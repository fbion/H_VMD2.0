/*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/* dhtmlx.com *//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/*
Copyright DHTMLX LTD. http://www.dhtmlx.com
You allowed to use this component or parts of it under GPL terms
To use it on other terms or get Professional edition of the component please contact us at sales@dhtmlx.com
*/
/*
2014 March 19
*/



/* DHX DEPEND FROM FILE 'assert.js'*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

// global context menu
/*
filename：dhtmlxcheckbox.js
creater：温龙香
date created：2016-01-12
description：单选、复选按钮组
date modified：2017.12.26
modifier：刘志伟
version：2.2.15.1129
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
filename：dhtmlXFileUpload.js
creater：刘志伟
date created：2017.6.20
description：上传组件
date modified：2018.08.03
modifier：刘志伟
version：2.3.12.0626
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*/

/* uploader *//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

// enable/disable
/*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

// effects: opacity, slide
/*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/*_TOPICS_
@0:Initialization
@1:Selection control
@2:Add/delete
@3:Private
@4:Node/level control
@5:Checkboxes/user data manipulation
@6:Appearence control
@7: Handlers
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*     @desc: adds drag-n-drop capabilities (with possibility to drop into dhtmlxTree) to HTML object. 
*     @param: obj - HTML object, or HTML object ID
*     @param: func - custom drag processor function, optional
*     @type: public
*     @topic: 0
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/*
Purpose: item edit extension
*/


/**
*     @desc: enable editing of item text
*     @param:  mode - true/false
*     @type: public
*     @topic: 0
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

//latest dev. version

/*_TOPICS_
@0:initialization
@1:selection control
@2:rows control
@3:colums control
@4:cells controll
@5:data manipulation
@6:appearence control
@7:overal control
@8:tools
@9:treegrid
@10: event handlers
@11: paginal output
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*   @desc: set rowspan with specified length starting from specified cell
*   @param: rowID - row Id
*	@param: colInd - column index
*	@param: length - length of rowspan
*	@edition: professional
*   @type:  public
*/

/**
* 修复数据行中同时存在合并行合并列时合并异常的问题
*//*
filename：dhtmlxgrid_validation.js
creater：
date created：2016.11.19
description：校验组件
date modified：2018.04.17
modifier：刘志伟
version：2.3.2.0329
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com  
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*	@desc: auto counter editor
*	@returns: dhtmlxGrid cell editor object
*	@type: public
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/


/*
HTML Link eXcell v.1.0  for dhtmlxGrid 
(c)DHTMLX LTD. 2005


The corresponding  cell value in XML should be a "^" delimited list of following values:
1st - Link Text 
2nd - URL (optional)
3rd - target (optional, default is _blank)

Samples:
<cell>Stephen King</cell>
<cell>Stephen King^http://www.stephenking.com/</cell>
<cell>Stephen King^http://www.stephenking.com/^_self</cell>
*/

/**
*	@desc: link editor
*	@returns: dhtmlxGrid cell editor object
*	@type: public
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
filename：dhtmlxgrid_excell_checkbox_tb.js
creater：刘志伟
date created：2016.11.19
description：扩展复选框组件
date modified：2018.09.14
modifier：刘志伟
version：2.3.16.0726
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/


/*
HTML Link eXcell v.1.0  for dhtmlxGrid 
(c)DHTMLX LTD. 2005


The corresponding  cell value in XML should be a "^" delimited list of following values:
1st - Link Text 
2nd - URL (optional)
3rd - target (optional, default is _blank)

Samples:
<cell>Stephen King</cell>
<cell>Stephen King^http://www.stephenking.com/</cell>
<cell>Stephen King^http://www.stephenking.com/^_self</cell>
*/

/**
*	@desc: link editor
*	@returns: dhtmlxGrid cell editor object
*	@type: public
*//*
filename：dhtmlxgrid_excell_hwupload.js
creater：刘志伟
date created：2016.11.19
description：上传组件
date modified：2018.07.09
modifier：刘志伟
version：2.3.12.0711
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
filename：dhtmlxgrid_excell_vmdguid.js
creater：刘志伟
date created：2019.03.14
description：guid组件
date modified：2019.03.14
modifier：刘志伟
version：2.3.3.0425
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*/
/**
*	@desc: simple text editor
*	@returns: dhtmlxGrid cell editor object
*	@type: public
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
filename：dhtmlxgrid_excell_vmdch.js
creater：刘志伟
date created：2019.03.14
description：ch组件
date modified：2019.03.14
modifier：刘志伟
version：2.3.3.0425
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*/
/**
*	@desc: simple text editor
*	@returns: dhtmlxGrid cell editor object
*	@type: public
*//*
filename：dhtmlxgrid_excell_order_tb.js
creater：刘志伟
date created：2016.11.19
description：序号组件
date modified：2017.12.06
modifier：刘志伟
version：2.2.15.1129
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
filename：dhtmlxgrid_eXcell_vmdsubreport.js
creater：刘志伟
date created：2016.11.19
description：子填报
date modified：2018.05.21
modifier：刘志伟
version：2.3.3.0425
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
filename：dhtmlxgrid_excell_vmdguid.js
creater：刘志伟
date created：2019.03.14
description：guid组件
date modified：2019.03.14
modifier：刘志伟
version：2.3.3.0425
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
filename：dhtmlxgrid_excell_vmdbutton.js
creater：刘志伟
date created：2016.11.19
description：按钮组件
date modified：2019.03.15
modifier：李份
version：2.2.15.1129
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
filename：dhtmlxgrid_excell_hwapprove.js
creater：刘志伟
date created：2016.11.19
description：审批组件
date modified：2018.03.12
modifier：刘志伟
version：2.2.15.1129
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*/
/*初始化加载*//*
Product Name: dhtmlxSuite 
Version: 4.0 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact 
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*     @desc: enables block selection mode in grid
*     @type: public
*     @topic: 0
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*   @desc: enable smart rendering mode
*   @type: public
*   @param: mode - true|false - enable|disable mode
*   @param: buffer - has sense only in dynamic loading mode, count of rows requrested from server by single operation, optional
*   @topic: 0
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

  /**
  *   @desc: sets marked cells support to enabled or disabled state
  *   @type: public
  *   @param: state - true or false
  *//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*	@desc: cell with support for math formulas
*	@param: cell - cell object
*	@type:  private
*   @edition: Professional
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*   @desc: add new column to the grid. Can be used after grid was initialized. At least one column should be in grid
*   @param: ind - index of column
*   @param: header - header content of column
*   @param: type - type of column
*   @param: width - width of column
*   @param: sort - sort type of column
*   @param: align - align of column
*   @param: valign - vertical align of column
*   @param: reserved - not used for now
*   @param: columnColor - background color of column
*   @type: public
*   @edition: Professional
*   @topic: 3
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/*
    Limitation:
        a) Width of column in px
        b) Grid not autoresizable
        c) Initialize grid in visible state
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*	@desc: enable Undo/Redo functionality in grid
*	@type: public
*	@edition: Professional
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*   @desc: load grid from CSV file
*   @param: path - path to file
*   @param: afterCall - function which will be called after xml loading
*   @type: public
*     @edition: Professional
*   @topic: 0
*//*
filename：dhtmlxgrid_ext_tb.js
creater：刘志伟
date created：2018.10.16
description：扩展grid对象
date modified：2018.10.16
modifier：刘志伟
version：
others：
copyright：Copyright @1999-2016, hwkj, All Rights Reserved
*/
/**
* 简单网格添加样式
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

/**
*   @desc: switch current row state (collapse/expand) tree grid row
*   @param: obj - row object
*   @type: private
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

//beware that function started from _in_header_ must not be obfuscated


/**
*   @desc: allows to define , which level of tree must be used for filtering
*   @type: public
*   @param: level - level value, -1 value means last one
*	@edition: Professional
*   @topic: 0
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*//*
Product Name: dhtmlxSuite 
Version: 5.0.8 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/
"undefined"==typeof window.dhx&&(window.dhx=window.dhx4={version:"5.0.8",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[10*Math.floor(dhx4.readFromCss(a+"_skin_detect")/10)]||null},readFromCss:function(a,b,c){var e=document.createElement("DIV");e.className=a;null!=document.body.firstChild?document.body.insertBefore(e,document.body.firstChild):document.body.appendChild(e);"string"==typeof c&&(e.innerHTML=c);a=e[b||"offsetWidth"];e.parentNode.removeChild(e);return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var a=this.first(),b;for(b in this.data)a=Math.max(a,this.data[b]);return a},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){null!=this.data[a]&&(this.data[a]=null,delete this.data[a])}},s2b:function(a){"string"==typeof a&&(a=a.toLowerCase());return 1==a||1==a||"true"==a||"1"==a||"yes"==a||"y"==a||"on"==a},s2j:function(a){dhx4.temp=null;try{eval("dhx4.temp\x3d"+a)}catch(b){dhx4.temp=null}a=dhx4.temp;dhx4.temp=null;return a},absLeft:function(a){"string"==typeof a&&(a=document.getElementById(a));return this.getOffset(a).left},absTop:function(a){"string"==typeof a&&(a=document.getElementById(a));return this.getOffset(a).top},_aOfs:function(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}},_aOfsRect:function(a){a=a.getBoundingClientRect();var b=document.body,c=document.documentElement;return{top:Math.round(a.top+(window.pageYOffset||c.scrollTop||b.scrollTop)-(c.clientTop||b.clientTop||0)),left:Math.round(a.left+(window.pageXOffset||c.scrollLeft||b.scrollLeft)-(c.clientLeft||b.clientLeft||0))}},getOffset:function(a){return a.getBoundingClientRect?this._aOfsRect(a):this._aOfs(a)},_isObj:function(a){return null!=a&&"object"==typeof a&&"undefined"==typeof a.length},_copyObj:function(a){if(this._isObj(a)){var b={},c;for(c in a)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c]}else for(b=[],c=0;c<a.length;c++)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c];return b},screenDim:function(){var a=0<=navigator.userAgent.indexOf("MSIE"),b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(a,b,c){a="string"==typeof a?document.getElementById(a):a;var e=a.value.length;b=Math.max(Math.min(b,e),0);c=Math.min(c,e);if(a.setSelectionRange)try{a.setSelectionRange(b,c)}catch(g){}else if(a.createTextRange){a=a.createTextRange();a.moveStart("character",b);a.moveEnd("character",c-e);try{a.select()}catch(g){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var a={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"},b;for(b in a)0==this.transData.transProp&&null!=document.documentElement.style[b]&&(this.transData.transProp=b,this.transData.transEv=a[b])}return this.transData},_xmlNodeValue:function(a){for(var b="",c=0;c<a.childNodes.length;c++)b+=null!=a.childNodes[c].nodeValue?a.childNodes[c].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return b}},window.dhx4.isIE=0<=navigator.userAgent.indexOf("MSIE")||0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE6=null==window.XMLHttpRequest&&0<=navigator.userAgent.indexOf("MSIE"),window.dhx4.isIE7=0<=navigator.userAgent.indexOf("MSIE 7.0")&&0>navigator.userAgent.indexOf("Trident"),window.dhx4.isIE8=0<=navigator.userAgent.indexOf("MSIE 8.0")&&0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE9=0<=navigator.userAgent.indexOf("MSIE 9.0")&&0<=navigator.userAgent.indexOf("Trident"),window.dhx4.isIE10=0<=navigator.userAgent.indexOf("MSIE 10.0")&&0<=navigator.userAgent.indexOf("Trident")&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=0<=navigator.userAgent.indexOf("Trident")&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=0<=navigator.userAgent.indexOf("Edge"),window.dhx4.isOpera=0<=navigator.userAgent.indexOf("Opera"),window.dhx4.isChrome=0<=navigator.userAgent.indexOf("Chrome")&&!window.dhx4.isEdge,window.dhx4.isKHTML=(0<=navigator.userAgent.indexOf("Safari")||0<=navigator.userAgent.indexOf("Konqueror"))&&!window.dhx4.isEdge,window.dhx4.isFF=0<=navigator.userAgent.indexOf("Firefox"),window.dhx4.isIPad=0<=navigator.userAgent.search(/iPad/gi),window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(a){return window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==a.pointerType||window.dhx4.isEdge&&"mouse"==a.pointerType},_touchOn:function(a){null==a&&(a=document.body);a.style.touchAction=a.style.msTouchAction=""},_touchOff:function(a){null==a&&(a=document.body);a.style.touchAction=a.style.msTouchAction="none"}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:"undefined"!=typeof window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}));"undefined"==typeof window.dhx4.template&&(window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(a,b,c){return a.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(a,g,h,l){a=window.dhx4.trim(l);h=null;l=[b[g]];if(0<a.length){a=a.split(":");for(var e=[],n=0;n<a.length;n++)0<n&&null!=e[e.length-1].match(/\\$/)?e[e.length-1]=e[e.length-1].replace(/\\$/,"")+":"+a[n]:e.push(a[n]);h=e[0];for(n=1;n<e.length;n++)l.push(e[n])}return"string"==typeof h&&"function"==typeof window.dhx4.template[h]?window.dhx4.template[h].apply(window.dhx4.template,l):0<g.length&&"undefined"!=typeof b[g]?1==c?window.dhx4.trim(b[g]):String(b[g]):""})},window.dhx4.template.date=function(a,b){if(null!=a){if(a instanceof Date)return window.dhx4.date2str(a,b);a=a.toString();return null!=a.match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(a)),b):a}return""},window.dhx4.template.maxlength=function(a,b){return String(a).substr(0,b)},window.dhx4.template.number_format=function(a,b,c,e){b=window.dhx4.template._parseFmt(b,c,e);return 0==b?a:window.dhx4.template._getFmtValue(a,b)},window.dhx4.template.lowercase=function(a){if("undefined"==typeof a||null==a)a="";return String(a).toLowerCase()},window.dhx4.template.uppercase=function(a){if("undefined"==typeof a||null==a)a="";return String(a).toUpperCase()},window.dhx4.template._parseFmt=function(a,b,c){a=a.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==a||4!=a.length)return!1;b={i_len:!1,i_sep:"string"==typeof b?b:",",d_len:!1,d_sep:"string"==typeof c?c:".",s_bef:"string"==typeof a[1]?a[1]:"",s_aft:"string"==typeof a[3]?a[3]:""};c=a[2].split(".");null!=c[1]&&(b.d_len=c[1].length);c=c[0].split(",");1<c.length&&(b.i_len=c[c.length-1].length);return b},window.dhx4.template._getFmtValue=function(a,b){var c=String(a).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=c&&5==c.length){var e="";null!=c[1]&&(e+=c[1]);e+=b.s_bef;if(!1!==b.i_len){for(var g=0,h="",l=c[2].length-1;0<=l;l--)h=""+c[2].charAt(l)+h,++g==b.i_len&&0<l&&(h=b.i_sep+h,g=0);e+=h}else e+=c[2];if(!1!==b.d_len){for(null==c[4]&&(c[4]="");c[4].length<b.d_len;)c[4]+="0";eval("dhx4.temp \x3d new RegExp(/\\d{"+b.d_len+"}/);");c=c[4].match(dhx4.temp);null!=c&&(e+=b.d_sep+c);dhx4.temp=null}return e+=b.s_aft}return a});"undefined"==typeof window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:"January February March April May June July August September October November December".split(" "),monthShortName:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayFullName:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayShortName:"Su Mo Tu We Th Fr Sa".split(" ")}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(a,b,c){if(null==b||"undefined"==typeof b)b=window.dhx4.dateFormat[window.dhx4.dateLang];if(null==c||"undefined"==typeof c)c=window.dhx4.dateStrings[window.dhx4.dateLang];if(a instanceof Date)var e=function(a){return 1==String(a).length?"0"+String(a):a},g=String(b||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(b){switch(b){case "%d":return e(a.getDate());case "%j":return a.getDate();case "%D":return c.dayShortName[a.getDay()];case "%l":return c.dayFullName[a.getDay()];case "%m":return e(a.getMonth()+1);case "%n":return a.getMonth()+1;case "%M":return c.monthShortName[a.getMonth()];case "%F":return c.monthFullName[a.getMonth()];case "%y":return e(a.getYear()%100);case "%Y":return a.getFullYear();case "%g":return(a.getHours()+11)%12+1;case "%h":return e((a.getHours()+11)%12+1);case "%G":return a.getHours();case "%H":return e(a.getHours());case "%i":return e(a.getMinutes());case "%s":return e(a.getSeconds());case "%a":return 11<a.getHours()?"pm":"am";case "%A":return 11<a.getHours()?"PM":"AM";case "%%":return"%";case "%u":return a.getMilliseconds();case "%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;b=a.getTimezoneOffset();var g=Math.abs(Math.floor(b/60)),h=Math.abs(b)-60*g;return(0<b?"-":"+")+e(g)+":"+e(h);default:return b}});return g||String(a)},window.dhx4.str2date=function(a,b,c){if(null==b||"undefined"==typeof b)b=window.dhx4.dateFormat[window.dhx4.dateLang];if(null==c||"undefined"==typeof c)c=window.dhx4.dateStrings[window.dhx4.dateLang];b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$\x26");var e=[],g=[];b=b.replace(/%[a-z]/gi,function(a){switch(a){case "%d":case "%m":case "%y":case "%h":case "%H":case "%i":case "%s":return g.push(a),"(\\d{2})";case "%D":case "%l":case "%M":case "%F":return g.push(a),"([a-z\u00e9\u00fb\u00e4\u0430-\u044f\u0451]{1,})";case "%j":case "%n":case "%g":case "%G":return g.push(a),"(\\d{1,2})";case "%Y":return g.push(a),"(\\d{4})";case "%a":return g.push(a),"([a|p]m)";case "%A":return g.push(a),"([A|P]M)";case "%u":return g.push(a),"(\\d{1,6})";case "%P":return g.push(a),"([+-]\\d{1,2}:\\d{1,2})"}return a});b=a.match(new RegExp(b,"i"));if(null==b||b.length-1!=g.length)return"Invalid Date";for(a=1;a<b.length;a++)e.push(b[a]);var h={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};b={};var l={};for(a=0;a<g.length;a++)if("undefined"!=typeof h[g[a]]){var m=h[g[a]];b[m]||(b[m]=[],l[m]=[]);b[m].push(e[a]);l[m].push(g[a])}e=[];g=[];for(a=1;7>=a;a++)if(null!=b[a])for(h=0;h<b[a].length;h++)e.push(b[a][h]),g.push(l[a][h]);b=new Date;b.setDate(1);b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);l=function(a,b){for(var c=0;c<b.length;c++)if(b[c].toLowerCase()==a)return c;return-1};for(a=0;a<e.length;a++)switch(g[a]){case "%d":case "%j":case "%n":case "%m":case "%Y":case "%H":case "%G":case "%i":case "%s":case "%u":if(!isNaN(e[a]))b[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[g[a]]](Number(e[a])+("%m"==g[a]||"%n"==g[a]?-1:0));break;case "%M":case "%F":h=l(e[a].toLowerCase(),c[{"%M":"monthShortName","%F":"monthFullName"}[g[a]]]);0<=h&&b.setMonth(h);break;case "%y":isNaN(e[a])||(h=Number(e[a]),b.setFullYear(h+(50<h?1900:2E3)));break;case "%g":case "%h":isNaN(e[a])||(h=Number(e[a]),12>=h&&0<=h&&b.setHours(h+(0<=l("pm",e)?12==h?0:12:12==h?-12:0)));break;case "%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=e[a])}return b});"undefined"==typeof window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(a){if("string"!==typeof a)return a;a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE)var b=(new window.DOMParser).parseFromString(a,"text/xml");else window.ActiveXObject!==window.undefined&&(b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a));return b},xmltop:function(a,b,c){if(("undefined"==typeof b.status||400>b.status)&&(xml=b.responseXML?b.responseXML||b:dhx4.ajax.parse(b.responseText||b))&&null!==xml.documentElement)try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(a)[0]}catch(e){}-1!==c&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",b,c]);return document.createElement("DIV")},xpath:function(a,b){b.nodeName||(b=b.responseXML||b);if(dhx4.isIE)try{return b.selectNodes(a)||[]}catch(h){return[]}else{for(var c=[],e,g=(b.ownerDocument||b).evaluate(a,b,null,XPathResult.ANY_TYPE,null);e=g.iterateNext();)c.push(e);return c}},query:function(a){dhx4.ajax._call(a.method||"GET",a.url,a.data||"",a.async||!0,a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,!0,b)},getSync:function(a){return this._call("GET",a,null,!1)},put:function(a,b,c){return this._call("PUT",a,b,!0,c)},del:function(a,b,c){return this._call("DELETE",a,b,!0,c)},post:function(a,b,c){1==arguments.length?b="":2!=arguments.length||"function"!=typeof b&&"function"!=typeof window[b]?b=String(b):(c=b,b="");return this._call("POST",a,b,!0,c)},postSync:function(a,b){b=null==b?"":String(b);return this._call("POST",a,b,!1)},getLong:function(a,b){this._call("GET",a,null,!0,b,{url:a})},postLong:function(a,b,c){2!=arguments.length||"function"!=typeof b&&!typeof window[b]||(c=b,b="");this._call("POST",a,b,!0,c,{url:a,postData:b})},_call:function(a,b,c,e,g,h,l){var m=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);1==e&&(m.onreadystatechange=function(){(4==m.readyState||1==n&&3==m.readyState)&&(200==m.status&&""!=m.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:m,filePath:b,async:e}]))&&window.setTimeout(function(){"function"==typeof g&&g.apply(window,[{xmlDoc:m,filePath:b,async:e}]);null!=h&&("undefined"!=typeof h.postData?dhx4.ajax.postLong(h.url,h.postData,g):dhx4.ajax.getLong(h.url,g));m=g=null},1)});"GET"==a&&(b+=this._dhxr(b));m.open(a,b,e);if(null!=l)for(var q in l)m.setRequestHeader(q,l[q]);else"POST"==a||"PUT"==a||"DELETE"==a?m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==a&&(c=null);m.setRequestHeader("X-Requested-With","XMLHttpRequest");m.send(c);1!=e&&(4==m.readyState||1==n&&3==m.readyState)&&(200==m.status&&""!=m.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:m,filePath:b,async:e}]));return{xmlDoc:m,filePath:b,async:e}},_dhxr:function(a,b){return 1!=this.cache?(null==a.match(/^[\?\&]$/)&&(a=0<=a.indexOf("?")?"\x26":"?"),"undefined"==typeof b&&(b=!0),a+"dhxr"+(new Date).getTime()+(1==b?"\x3d1":"")):""}});"undefined"==typeof window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(a,b,c,e,g){if("clear"==g){for(var h in a._dhxdataload)a._dhxdataload[h]=null,delete a._dhxdataload[h];a._loadData=null;a._dhxdataload=null;a.load=null;a.loadStruct=null}else if(a._dhxdataload={initObj:b,xmlToJson:c,xmlRootTag:e,onBeforeXLS:null},a._loadData=function(a,b,c){2==arguments.length&&(c=b,b=null);var e=null;3==arguments.length&&(c=arguments[2]);if("string"==typeof a){var g=a.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");(new RegExp("^\x3c"+this._dhxdataload.xmlRootTag)).test(g.replace(/^<\?xml[^\?]*\?>\s*/,""))&&(e=dhx4.ajax.parse(a),null!=e&&(e=this[this._dhxdataload.xmlToJson].apply(this,[e])));null!=e||null==g.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==g.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(e=dhx4.s2j(g));if(null==e){this.callEvent("onXLS",[]);e=[];if("function"==typeof this._dhxdataload.onBeforeXLS&&(g=this._dhxdataload.onBeforeXLS.apply(this,[a]),null!=g&&"object"==typeof g&&(null!=g.url&&(a=g.url),null!=g.params)))for(var h in g.params)e.push(h+"\x3d"+encodeURIComponent(g.params[h]));var l=this,n=function(b){b=0<=(b.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)||null!=b.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?l[l._dhxdataload.xmlToJson].apply(l,[b.xmlDoc.responseXML]):dhx4.s2j(b.xmlDoc.responseText);null!=b&&l[l._dhxdataload.initObj].apply(l,[b,a]);l.callEvent("onXLE",[]);null!=c&&("function"==typeof c?c.apply(l,[]):"function"==typeof window[c]&&window[c].apply(l,[]));l=n=c=null},e=e.join("\x26")+("string"==typeof b?"\x26"+b:"");"post"==dhx4.ajax.method?dhx4.ajax.post(a,e,n):"get"==dhx4.ajax.method&&dhx4.ajax.get(a+(0<e.length?(0<a.indexOf("?")?"\x26":"?")+e:""),n);return}}else e="object"==typeof a.documentElement||"undefined"!=typeof a.tagName&&"undefined"!=typeof a.getElementsByTagName&&0<a.getElementsByTagName(this._dhxdataload.xmlRootTag).length?this[this._dhxdataload.xmlToJson].apply(this,[a]):window.dhx4._copyObj(a);null!=e&&this[this._dhxdataload.initObj].apply(this,[e]);null!=c&&("function"==typeof c?c.apply(this,[]):"function"==typeof window[c]&&window[c].apply(this,[]),c=null)},null!=g)for(h in b={struct:"loadStruct",data:"load"},g)1==g[h]&&(a[b[h]]=function(){return this._loadData.apply(this,arguments)});a=null});"undefined"==typeof window.dhx4._eventable&&(window.dhx4._eventable=function(a,b){"clear"==b?(a.detachAllEvents(),a.dhxevs=null,a.attachEvent=null,a.detachEvent=null,a.checkEvent=null,a.callEvent=null,a.detachAllEvents=null):(a.dhxevs={data:{}},a.attachEvent=function(a,b){a=String(a).toLowerCase();this.dhxevs.data[a]||(this.dhxevs.data[a]={});var c=window.dhx4.newId();this.dhxevs.data[a][c]=b;return c},a.detachEvent=function(a){for(var b in this.dhxevs.data){var c=0,h;for(h in this.dhxevs.data[b])h==a?(this.dhxevs.data[b][h]=null,delete this.dhxevs.data[b][h]):c++;0==c&&(this.dhxevs.data[b]=null,delete this.dhxevs.data[b])}},a.checkEvent=function(a){a=String(a).toLowerCase();return null!=this.dhxevs.data[a]},a.callEvent=function(a,b){a=String(a).toLowerCase();if(null==this.dhxevs.data[a])return!0;var c=!0,e;for(e in this.dhxevs.data[a])c=this.dhxevs.data[a][e].apply(this,b)&&c;return c},a.detachAllEvents=function(){for(var a in this.dhxevs.data){for(var b in this.dhxevs.data[a])this.dhxevs.data[a][b]=null,delete this.dhxevs.data[a][b];this.dhxevs.data[a]=null;delete this.dhxevs.data[a]}});a=null},dhx4._eventable(dhx4));window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(a){return""==a},isNotEmpty:function(a){return a instanceof Array?0<a.length:""==!a},isValidBoolean:function(a){return!!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return!!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return!!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return!!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return!!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(a){return(a=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/))&&!!(9999>=a[1]&&12>=a[2]&&31>=a[3]&&59>=a[4]&&59>=a[5]&&59>=a[6])||!1},isValidDate:function(a){return(a=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/))&&!!(9999>=a[1]&&12>=a[2]&&31>=a[3])||!1},isValidTime:function(a){return(a=a.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/))&&!!(24>=a[1]&&59>=a[2]&&59>=a[3])||!1},isValidIPv4:function(a){return(a=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/))&&!!(255>=a[1]&&255>=a[2]&&255>=a[3]&&255>=a[4])||!1},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation);"undefined"==typeof window.dhtmlx&&(window.dhtmlx={extend:function(a,b){for(var c in b)a[c]||(a[c]=b[c]);return a},extend_api:function(a,b,c){var e=window[a];e&&(window[a]=function(a){if(a&&"object"==typeof a&&!a.tagName){var c=e.apply(this,b._init?b._init(a):arguments),g;for(g in dhtmlx)if(b[g])this[b[g]](dhtmlx[g]);for(g in a)if(b[g])this[b[g]](a[g]);else 0===g.indexOf("on")&&this.attachEvent(g,a[g])}else c=e.apply(this,arguments);b._patch&&b._patch(this);return c||this},window[a].prototype=e.prototype,c&&dhtmlx.extend(window[a].prototype,c))},url:function(a){return-1!=a.indexOf("?")?"\x26":"?"}});function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if(!a&&!window.event||2!=(a||event).button){if(window.dhtmlDragAndDrop.waitDrag)return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1;window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();a&&a.preventDefault&&a.preventDefault();return!1}};dhtmlDragAndDropObject.prototype.callDrag=function(a){a||(a=window.event);dragger=window.dhtmlDragAndDrop;if(!(100>(new Date).valueOf()-dragger.downtime)){if(!dragger.dragNode)if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(a,!0);if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var b=dragger.gldragNode;dragger.gldragNode.old&&(b=dragger.gldragNode.old);b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;b.pWindow&&b.pWindow.dhtmlDragAndDrop.lastLanding&&b.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(b.pWindow.dhtmlDragAndDrop.lastLanding);_isIE?(b=document.createElement("Div"),b.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=b.childNodes[0]):dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=a.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=a.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";dragger.checkLanding(a.srcElement?a.srcElement:a.target,a)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,e=0;b;)c+=b.offsetLeft,e+=b.offsetTop,b=b.offsetParent;parent.dhtmlDragAndDrop&&(b=parent.dhtmlDragAndDrop.calculateFramePosition(1),c+=1*b.split("_")[0],e+=1*b.split("_")[1]);if(a)return c+"_"+e;this.fx=c;this.fy=e}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&"BODY"!=a.tagName?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=0,this._onNotFound&&this._onNotFound())};dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){dragger=window.dhtmlDragAndDrop;if(!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null;c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)try{window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){a&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(e){}for(var c=0;c<window.frames.length;c++)try{window.frames[c]!=a&&window.frames[c].dhtmlDragAndDrop&&window.frames[c].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)}catch(e){}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1;-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0);-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(_isChrome=!0);-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),525<_KHTMLrv?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||7<document.documentMode)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]));if("undefined"==typeof window.dhtmlxEvent)var dhtmlxEvent$3=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)};null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2E3);"undefined"==typeof dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){function a(){if(c){var a=document.createEvent("HTMLEvents");a.initEvent("dblclick",!0,!0);c.dispatchEvent(a);b=c=null}}var b,c,e,g;dhtmlxEvent(document.body,"touchstart",function(h){c=h.touches[0].target;e=h.touches[0].clientX;g=h.touches[0].clientY;b=window.setTimeout(a,dhtmlxEvent.touchDelay)});dhtmlxEvent(document.body,"touchmove",function(a){b&&(50<Math.abs(a.touches[0].clientX-e)||50<Math.abs(a.touches[0].clientY-g))&&(window.clearTimeout(b),b=c=!1)});dhtmlxEvent(document.body,"touchend",function(a){b&&(window.clearTimeout(b),b=c=!1)});dhtmlxEvent.initTouch=function(){}});window.dhtmlx||(dhtmlx={});dhtmlx.assert=function(a,b){a||dhtmlx.error(b)};dhtmlx.assert_enabled=function(){return!1};dhtmlx.assert_event=function(a,b){a._event_check||(a._event_check={},a._event_check_size={});for(var c in b){a._event_check[c.toLowerCase()]=b[c];var e=-1,g;for(g in b[c])e++;a._event_check_size[c.toLowerCase()]=e}};dhtmlx.assert_method_info=function(a,b,c,e){for(var g=[],h=0;h<e.length;h++)g.push(e[h][0]+" : "+e[h][1]+"\n   "+e[h][2].describe()+(e[h][3]?"; optional":""));return a.name+"."+b+"\n"+c+"\n Arguments:\n - "+g.join("\n - ")};dhtmlx.assert_method=function(a,b){for(var c in b)dhtmlx.assert_method_process(a,c,b[c].descr,b[c].args,b[c].min||99,b[c].skip)};dhtmlx.assert_method_process=function(a,b,c,e,g,h){var l=a[b];h||(a[b]=function(){if(arguments.length!=e.length&&arguments.length<g)dhtmlx.log("warn","Incorrect count of parameters\n"+a[b].describe()+"\n\nExpecting "+e.length+" but have only "+arguments.length);else for(var c=0;c<e.length;c++)e[c][3]||e[c][2](arguments[c])||dhtmlx.log("warn","Incorrect method call\n"+a[b].describe()+"\n\nActual value of "+(c+1)+" parameter: {"+typeof arguments[c]+"} "+arguments[c]);return l.apply(this,arguments)});a[b].describe=function(){return dhtmlx.assert_method_info(a,b,c,e)}};dhtmlx.assert_event_call=function(a,b,c){a._event_check&&(a._event_check[b]?dhtmlx.isNotDefined(c)?dhtmlx.log("warn","Event without parameters :"+b):a._event_check_size[b]!=c.length&&dhtmlx.log("warn","Incorrect event call, expected "+a._event_check_size[b]+" parameter(s), but have "+c.length+" parameter(s), for "+b+" event"):dhtmlx.log("warn","Not expected event call :"+b))};dhtmlx.assert_event_attach=function(a,b){a._event_check&&!a._event_check[b]&&dhtmlx.log("warn","Unknown event name: "+b)};dhtmlx.assert_property=function(a,b){a._settings_check||(a._settings_check={});dhtmlx.extend(a._settings_check,b)};dhtmlx.assert_check=function(a,b){if("object"==typeof a)for(var c in a)dhtmlx.assert_settings(c,a[c],b)};dhtmlx.assert_settings=function(a,b,c){if(c=c||this._settings_check){if(!c[a])return dhtmlx.log("warn","Unknown propery: "+a);for(var e=!1,g=0;g<c[a].length;g++){var h=c[a][g];if("string"!=typeof h&&("function"==typeof h?e=e||h(b):"object"==typeof h&&"function"==typeof h[1]&&(e=e||h[1](b))&&h[2]&&dhtmlx.assert_check(b,h[2]),e))break}e||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(a,c)+"\nActual value: {"+typeof b+"} "+b)}};dhtmlx.assert_info=function(a,b){for(var c=b[a],e="",g=[],h=0;h<c.length;h++)"string"==typeof rule?e=c[h]:c[h].describe?g.push(c[h].describe()):c[h][1]&&c[h][1].describe&&g.push(c[h][1].describe());return"Property: "+a+", "+e+" \nExpected value: \n - "+g.join("\n - ")};dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(a){return"string"!=typeof a||0!==a.indexOf("#")||""!==a.substr(1).replace(/[0-9A-F]/gi,"")?!1:!0},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(a){return"function"==typeof a||"string"==typeof a?!0:!1},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},dhtmlx.assert_rule_boolean=function(a){return"boolean"==typeof a?!0:!1},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(a,b){return"object"==typeof a?!0:!1},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(a){return"string"==typeof a?!0:!1},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(a){return!!dhtmlx.toNode(a)},dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(a){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(a){var b=function(b){return a[b]};b.describe=function(){var b=[],e;for(e in a)b.push(e);return"{String} can take one of next values: "+b.join(", ")};return b},dhtmlx.assert_rule_dimension=function(a){return 1*a==a&&!isNaN(a)&&0<=a?!0:!1},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(a){return"number"==typeof a?!0:!1},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(a){return"function"==typeof a?!0:!1},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(a){return!0},dhtmlx.assert_rule_any.describe=function(){return"Any value"},dhtmlx.assert_rule_mix=function(a,b){var c=function(c){return a(c)||b(c)?!0:!1};c.describe=function(){return a.describe()};return c});dhtmlx.codebase="./";dhtmlx.copy=function(a){var b=dhtmlx.copy._function;b.prototype=a;return new b};dhtmlx.copy._function=function(){};dhtmlx.extend=function(a,b){for(var c in b)a[c]=b[c];dhtmlx.assert_enabled()&&b._assert&&(a._assert(),a._assert=null);dhtmlx.assert(a,"Invalid nesting target");dhtmlx.assert(b,"Invalid nesting source");b._init&&a._init();return a};dhtmlx.proto_extend=function(){for(var a=arguments,b=a[0],c=[],e=a.length-1;0<e;e--){"function"==typeof a[e]&&(a[e]=a[e].prototype);for(var g in a[e])"_init"==g?c.push(a[e][g]):b[g]||(b[g]=a[e][g])}a[0]._init&&c.push(a[0]._init);b._init=function(){for(var a=0;a<c.length;a++)c[a].apply(this,arguments)};b.base=a[1];e=function(a){this._init(a);this._parseSettings&&this._parseSettings(a,this.defaults)};e.prototype=b;b=a=null;return e};dhtmlx.bind=function(a,b){return function(){return a.apply(b,arguments)}};dhtmlx.require=function(a){dhtmlx._modules[a]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText),dhtmlx._modules[a]=!0)};dhtmlx._modules={};dhtmlx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};dhtmlx.methodPush=function(a,b,c){return function(){return a[b].apply(a,arguments)}};dhtmlx.isNotDefined=function(a){return"undefined"==typeof a};dhtmlx.delay=function(a,b,c,e){setTimeout(function(){var e=a.apply(b,c);a=b=c=null;return e},e||1)};dhtmlx.uid=function(){this._seed||(this._seed=(new Date).valueOf());this._seed++;return this._seed};dhtmlx.toNode=function(a){return"string"==typeof a?document.getElementById(a):a};dhtmlx.toArray=function(a){return dhtmlx.extend(a||[],dhtmlx.PowerArray)};dhtmlx.toFunctor=function(a){return"string"==typeof a?eval(a):a};dhtmlx._events={};dhtmlx.event=function(a,b,c,e){a=dhtmlx.toNode(a);var g=dhtmlx.uid();dhtmlx._events[g]=[a,b,c];e&&(c=dhtmlx.bind(c,e));a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c);return g};dhtmlx.eventRemove=function(a){if(a){dhtmlx.assert(this._events[a],"Removing non-existing event");var b=dhtmlx._events[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]);delete this._events[a]}};dhtmlx.log=function(a,b,c){if(window.console&&console.log){a=a.toLowerCase();if(window.console[a])window.console[a](b||"unknown error");else window.console.log(a+": "+b);c&&window.console.log(c)}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date;dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){dhtmlx.log("Info","Timing end ["+a+"]:"+((new Date).valueOf()-dhtmlx._start_time_log.valueOf())/1E3+"s")},1)};dhtmlx.log_time=function(a){var b="_start_time_log"+a;dhtmlx[b]?(dhtmlx.log("Info","Timing end ["+a+"]:"+((new Date).valueOf()-dhtmlx[b].valueOf())/1E3+"s"),dhtmlx[b]=null):(dhtmlx[b]=new Date,dhtmlx.log("Info","Timing start ["+a+"]"))};dhtmlx.error=function(a,b){dhtmlx.log("error",a,b)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(a,b){if(this._events._block)return!0;a=a.toLowerCase();dhtmlx.assert_event_call(this,a,b);var c=this._events[a.toLowerCase()],e=!0;dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+a,b);if(c)for(var g=0;g<c.length;g++)!1===c[g].apply(this,b||[])&&(e=!1);this._map[a]&&!this._map[a].callEvent(a,b)&&(e=!1);return e},attachEvent:function(a,b,c){a=a.toLowerCase();dhtmlx.assert_event_attach(this,a);c=c||dhtmlx.uid();b=dhtmlx.toFunctor(b);var e=this._events[a]||dhtmlx.toArray();e.push(b);this._events[a]=e;this._handlers[c]={f:b,t:a};return c},detachEvent:function(a){this._handlers[a]&&(this._events[this._handlers[a].t].remove(this._handlers[a].f),delete this._handlers[a])}};dhtmlx.PowerArray={removeAt:function(a,b){0<=a&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(b||0===b){var c=this.splice(b,this.length-b);this[b]=a;this.push.apply(this,c)}else this.push(a)},find:function(a){for(i=0;i<this.length;i++)if(a==this[i])return i;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this}};dhtmlx.env={};-1!=navigator.userAgent.indexOf("Opera")?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=9));dhtmlx.env={};(function(){dhtmlx.env.transform=!1;dhtmlx.env.transition=!1;for(var a={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","oTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","oTransition"]},b=document.createElement("DIV"),c=0;c<a.names.length;c++)for(;p=a[a.names[c]].pop();)"undefined"!=typeof b.style[p]&&(dhtmlx.env[a.names[c]]=!0)})();dhtmlx.env.transform_prefix=function(){var a;dhtmlx._isOpera?a="-o-":(a="",dhtmlx._isFF&&(a="-moz-"),dhtmlx._isWebKit&&(a="-webkit-"));return a}();dhtmlx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();dhtmlx.zIndex={drag:1E4};dhtmlx.html={create:function(a,b,c){b=b||{};a=document.createElement(a);for(var e in b)a.setAttribute(e,b[e]);b.style&&(a.style.cssText=b.style);b["class"]&&(a.className=b["class"]);c&&(a.innerHTML=c);return a},getValue:function(a){return(a=dhtmlx.toNode(a))?dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b?b.parentNode.insertBefore(a,b):c.appendChild(a))},locate:function(a,b){a=a||event;for(var c=a.target||a.srcElement;c;){if(c.getAttribute){var e=c.getAttribute(b);if(e)return e}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){a=a.getBoundingClientRect();var b=document.body,c=document.documentElement,e=a.top+(window.pageYOffset||c.scrollTop||b.scrollTop)-(c.clientTop||b.clientTop||0),b=a.left+(window.pageXOffset||c.scrollLeft||b.scrollLeft)-(c.clientLeft||b.clientLeft||0);return{y:Math.round(e),x:Math.round(b)}}for(b=e=0;a;)e+=parseInt(a.offsetTop,10),b+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:e,x:b}},pos:function(a){a=a||event;if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=dhtmlx._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault();dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=!0;return!1},addCss:function(a,b){a.className+=" "+b},removeCss:function(a,b){a.className=a.className.replace(RegExp(b,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),dhtmlx.codebase=a.slice(0,a.length).join("/")+"/")})();dhtmlx.ui||(dhtmlx.ui={});dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(a){this.destructor=function(){};this._htmlrows=this._htmlmap=null;this._html&&document.body.appendChild(this._html);this._html=null;this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null);this.data=this._obj=this._dataobj=null;this._events=this._handlers={};this.canvases=[];this.render&&(this.render=function(){})}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var a=0;a<dhtmlx.destructors.length;a++)dhtmlx.destructors[a].destructor(-1);dhtmlx.destructors=[]}for(var b in dhtmlx._events)a=dhtmlx._events[b],a[0].removeEventListener?a[0].removeEventListener(a[1],a[2],!1):a[0].detachEvent&&a[0].detachEvent("on"+a[1],a[2]),delete dhtmlx._events[b]});dhtmlx.ajax=function(a,b,c){if(0!==arguments.length){var e=new dhtmlx.ajax;c&&(e.master=c);e.get(a,null,b)}return this.getXHR?this:new dhtmlx.ajax};dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,b,c){var e=this.getXHR();"function"==typeof c&&(c=[c]);if("object"==typeof b){var g=[],h;for(h in b){var l=b[h];if(null===l||l===dhtmlx.undefined)l="";g.push(h+"\x3d"+encodeURIComponent(l))}b=g.join("\x26")}b&&!this.post&&(a=a+(-1!=a.indexOf("?")?"\x26":"?")+b,b=null);e.open(this.post?"POST":"GET",a,!this._sync);this.post&&e.setRequestHeader("Content-type","application/x-www-form-urlencoded");var m=this;e.onreadystatechange=function(){if(!e.readyState||4==e.readyState){if(c&&m)for(var a=0;a<c.length;a++)c[a]&&c[a].call(m.master||m,e.responseText,e.responseXML,e);c=m=m.master=null}};e.send(b||null);return e},get:function(a,b,c){this.post=!1;return this.send(a,b,c)},post:function(a,b,c){this.post=!0;return this.send(a,b,c)},sync:function(){this._sync=!0;return this}};dhtmlx.AtomDataLoader={_init:function(a){this.data={};a&&(this._settings.datatype=a.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0;this._settings.url&&this.url_setter(this._settings.url);this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){if(!this._ready_for_data)return a;this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data)return a;this.parse(a,this._settings.datatype);return!0},load:function(a,b,c){this.callEvent("onXLS",[]);"string"==typeof b?(this.data.driver=dhtmlx.DataDriver[b],b=c):this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"];window.dhx4?dhx4.ajax.get(a,dhtmlx.bind(function(a){a=a.xmlDoc;var c=a.responseText,e=a.responseXML;this._onLoad&&this._onLoad.call(this,c,e,a);b&&b.call(this,c,e,a)},this)):dhtmlx.ajax(a,[this._onLoad,b],this)},parse:function(a,b){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[b||"xml"];this._onLoad(a,null)},_onLoad:function(a,b,c){c=this.data.driver;b=c.getRecords(c.toObject(a,b))[0];this.data=c?c.getDetails(b):a;this.callEvent("onXLE",[])},_check_data_feed:function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var b=this._settings.dataFeed;if("function"==typeof b)return b.call(this,a.id||a,a);b=b+(-1==b.indexOf("?")?"?":"\x26")+"action\x3dget\x26id\x3d"+encodeURIComponent(a.id||a);this.callEvent("onXLS",[]);dhtmlx.ajax(b,function(a,b){this._ignore_feed=!0;this.setValues(dhtmlx.DataDriver.json.toObject(a)[0]);this._ignore_feed=!1;this.callEvent("onXLE",[])},this);return!1}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(a){a||(a="[]");return"string"==typeof a?(eval("dhtmlx.temp\x3d"+a),dhtmlx.temp):a},getRecords:function(a){a&&a.data&&(a=a.data);return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0,_key:a.dhx_security}}};dhtmlx.DataDriver.json_ext={toObject:function(a){a||(a="[]");if("string"==typeof a){eval("temp\x3d"+a);dhtmlx.temp=[];a=(void 0).header;for(var b=0;b<(void 0).data.length;b++){for(var c={},e=0;e<a.length;e++)"undefined"!=typeof(void 0).data[b][e]&&(c[a[e]]=(void 0).data[b][e]);dhtmlx.temp.push(c)}return dhtmlx.temp}return a},getRecords:function(a){return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0}}};dhtmlx.DataDriver.html={toObject:function(a){if("string"==typeof a){var b=null;-1==a.indexOf("\x3c")&&(b=dhtmlx.toNode(a));b||(b=document.createElement("DIV"),b.innerHTML=a);return b.getElementsByTagName(this.tag)}return a},getRecords:function(a){return a.tagName?a.childNodes:a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(a){return"string"==typeof a?(eval("dhtmlx.temp\x3d"+a),dhtmlx.temp):a},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(a,b){return b&&(b=this.checkResponse(a,b))?b:"string"==typeof a?this.fromString(a):a},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_key:a.documentElement.getAttribute("dhx_security")}},xpath:function(a,b){if(window.XPathResult){var c=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var e=[],c=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null),g=c.iterateNext();g;)e.push(g),g=c.iterateNext();return e}e=!0;try{"undefined"==typeof a.selectNodes&&(e=!1)}catch(h){}if(e)return a.selectNodes(b);e=b.split("/").pop();return a.getElementsByTagName(e)},tagToObject:function(a,b){b=b||{};for(var c=!1,e=a.childNodes,g=0;g<e.length;g++)1==e[g].nodeType&&(c=e[g].tagName,"undefined"!=typeof b[c]?(b[c]instanceof Array||(b[c]=[b[c]]),b[c].push(this.tagToObject(e[g],{}))):b[e[g].tagName]=this.tagToObject(e[g],{}),c=!0);if((e=a.attributes)&&e.length){for(g=0;g<e.length;g++)b[e[g].name]=e[g].value;c=!0}if(!c)return this.nodeValue(a);b.value=this.nodeValue(a);return b},nodeValue:function(a){return a.firstChild?a.firstChild.wholeText||a.firstChild.data:""},fromString:function(a){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");b.loadXML(a);return b}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(a,b){if(b&&b.firstChild&&"parsererror"!=b.firstChild.tagName)return b;var c=this.fromString(a.replace(/^[\s]+/,""));if(c)return c;dhtmlx.error("xml can't be parsed",a)}};dhtmlx.DataLoader={_init:function(a){this.name="DataStore";this.data=(a||"").datastore||new dhtmlx.DataStore;this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,b){dhtmlx.AtomDataLoader.load.apply(this,arguments);this.data.feed||(this.data.feed=function(b,e){if(this._load_count)return this._load_count=[b,e];this._load_count=!0;this.load(a+(-1==a.indexOf("?")?"?":"\x26")+"posStart\x3d"+b+"\x26count\x3d"+e,function(){var a=this._load_count;this._load_count=!1;"object"==typeof a&&this.data.feed.apply(this,a)})})},_onLoad:function(a,b,c){this.data._parse(this.data.driver.toObject(a,b));this.callEvent("onXLE",[]);this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(a,c){if(this._settings.dataFeed){var b={};if(a||b){if("function"==typeof a){if(!c)return;a(c,b)}else b={text:c};this.clearAll();var g=this._settings.dataFeed;if("function"==typeof g)return g.call(this,c,b);var h=[],l;for(l in b)h.push("dhx_filter["+l+"]\x3d"+encodeURIComponent(b[l]));this.load(g+(0>g.indexOf("?")?"?":"\x26")+h.join("\x26"),this._settings.datatype);return!1}}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);a&&a.call&&a.apply(this,arguments)}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(a){this.callEvent("onParse",[this.driver,a]);this._filter_order&&this.filter();var b=this.driver.getInfo(a);b._key&&(dhtmlx.security_key=b._key);var c=this.driver.getRecords(a),e=1*(b._from||0);0===e&&this.order[0]&&(e=this.order.length);for(var g=0,h=0;h<c.length;h++){var l=this.driver.getDetails(c[h]),m=this.id(l);this.pull[m]||(this.order[g+e]=m,g++);this.pull[m]=l;this.extraParser&&this.extraParser(l);this._scheme&&(this._scheme.$init?this._scheme.$update(l):this._scheme.$update&&this._scheme.$update(l))}for(h=0;h<b._size;h++)this.order[h]||(m=dhtmlx.uid(),l={id:m,$template:"loading"},this.pull[m]=l,this.order[h]=m);this.callEvent("onStoreLoad",[this.driver,a]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(a,b){dhtmlx.assert(this.pull[a],"Can't change id, for non existing item: "+a);this.pull[b]=this.pull[a];this.pull[b].id=b;this.order[this.order.find(a)]=b;this._filter_order&&(this._filter_order[this._filter_order.find(a)]=b);this.callEvent("onIdChange",[a,b]);this._render_change_id&&this._render_change_id(a,b)},get:function(a){return this.item(a)},set:function(a,b){return this.update(a,b)},item:function(a){return this.pull[a]},update:function(a,b){this._scheme&&this._scheme.$update&&this._scheme.$update(b);if(!1===this.callEvent("onBeforeUpdate",[a,b]))return!1;this.pull[a]=b;this.refresh(a)},refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a){this._skip_refresh=!0;a.call(this);this._skip_refresh=!1},getRange:function(a,b){a=a?this.indexById(a):this.startOffset||0;b?b=this.indexById(b):(b=Math.min(this.endOffset||Infinity,this.dataCount()-1),0>b&&(b=0));this.min&&(a=this.min);this.max&&(b=this.max);if(a>b){var c=b;b=a;a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(b||Infinity,this.dataCount()-1);for(var c=dhtmlx.toArray(),e=a||0;e<=b;e++)c.push(this.item(this.order[e]));return c},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(0>a||0>b)dhtmlx.error("DataStore::move","Incorrect indexes");else{var c=this.idByIndex(a),e=this.item(c);this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,b));this.callEvent("onStoreUpdated",[c,e,"move"])}},scheme:function(a){this._scheme=a},sync:function(a,b,c){"function"!=typeof b&&(c=b,b=null);dhtmlx.debug_bind&&(this.debug_sync_master=a,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" \x3c\x3d "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));var e=a;"DataStore"!=a.name&&(a=a.data);var g=dhtmlx.bind(function(e,g,m){if("update"!=m||b)e=null;e||(this.order=dhtmlx.toArray([].concat(a.order)),this._filter_order=null,this.pull=a.pull,b&&this.silent(b),this._on_sync&&this._on_sync());dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" \x3c\x3d "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id);c?c=!1:this.refresh(e)},this);a.attachEvent("onStoreUpdated",g);this.feed=function(a,b){e.loadNext(b,a)};g()},add:function(a,b){if(this._scheme){a=a||{};for(var c in this._scheme)a[c]=a[c]||this._scheme[c];this._scheme&&(this._scheme.$init?this._scheme.$update(a):this._scheme.$update&&this._scheme.$update(a))}c=this.id(a);var e=this.dataCount();if(dhtmlx.isNotDefined(b)||0>b)b=e;b>e&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),b=Math.min(this.order.length,b));if(!1===this.callEvent("onBeforeAdd",[c,a,b]))return!1;if(this.exists(c))return dhtmlx.error("Not unique ID");this.pull[c]=a;this.order.insertAt(c,b);this._filter_order&&(e=this._filter_order.length,!b&&this.order.length&&(e=0),this._filter_order.insertAt(c,e));this.callEvent("onafterAdd",[c,b]);this.callEvent("onStoreUpdated",[c,a,"add"]);return c},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(!1===this.callEvent("onBeforeDelete",[a]))return!1;if(!this.exists(a))return dhtmlx.error("Not existing ID",a);b=this.item(a);this.order.remove(a);this._filter_order&&this._filter_order.remove(a);delete this.pull[a];this.callEvent("onafterdelete",[a]);this.callEvent("onStoreUpdated",[a,b,"delete"])}},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this._filter_order=this.feed=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){(a>=this.order.length||0>a)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index");return this.order[a]},indexById:function(a){return this.order.find(a)},next:function(a,b){return this.order[this.indexById(a)+(b||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,b){return this.order[this.indexById(a)-(b||1)]},sort:function(a,b,c){var e=a;"function"==typeof a?e={as:a,dir:b}:"string"==typeof a&&(e={by:a,dir:b,as:c});a=[e.by,e.dir,e.as];this.callEvent("onbeforesort",a)&&(this.order.length&&(e=dhtmlx.sort.create(e),b=this.getRange(this.first(),this.last()),b.sort(e),this.order=b.map(function(a){return this.id(a)},this)),this.refresh(),this.callEvent("onaftersort",a))},filter:function(a,b){if(this.callEvent("onBeforeFilter",[a,b])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(a){var c=a;b=b||"";"string"==typeof a&&(a=dhtmlx.Template.fromHTML(a),b=b.toString().toLowerCase(),c=function(b,c){return-1!=a(b).toLowerCase().indexOf(c)});for(var e=dhtmlx.toArray(),g=0;g<this.order.length;g++){var h=this.order[g];c(this.item(h),b)&&e.push(h)}this._filter_order=this.order;this.order=e}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(a,b){for(var c=0;c<this.order.length;c++)a.call(b||this,this.item(this.order[c]))},provideApi:function(a,b){this.debug_bind_master=a;b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});for(var c="get set sort add remove exists idByIndex indexById item update refresh dataCount filter next previous clearAll first last serialize".split(" "),e=0;e<c.length;e++)a[c[e]]=dhtmlx.methodPush(this,c[e]);dhtmlx.assert_enabled()&&this.assert_event(a)},serialize:function(){for(var a=this.order,b=[],c=0;c<a.length;c++)b.push(this.pull[a[c]]);return b}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(a,b){a*=1;b*=1;return a>b?1:a<b?-1:0},string_strict:function(a,b){a=a.toString();b=b.toString();return a>b?1:a<b?-1:0},string:function(a,b){a=a.toString().toLowerCase();b=b.toString().toLowerCase();return a>b?1:a<b?-1:0}},by:function(a,b){if(!a)return b;"function"!=typeof b&&(b=dhtmlx.sort.as[b||"string"]);a=dhtmlx.Template.fromHTML(a);return function(c,e){return b(a(c),a(e))}},dir:function(a,b){return"asc"==a?b:function(a,e){return-1*b(a,e)}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(a){a=a||event;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[a.which||a.keyCode,a.ctrlKey,a.shiftKey,a])}};dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this));this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this);this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var b=dhtmlx.html.locate(a,this._id);if(b&&!this.callEvent("onBeforeContextMenu",[b,a]))return dhtmlx.html.preventEvent(a)},_onMouse:function(a){dhtmlx._isIE&&(a=document.createEventObject(event));this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer);this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){"mousemove"==a.type?this._onMouseMove(a):this._onMouseOut(a)},this),500)},_onMouseMove:function(a){this._mouseEvent(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(a,b,c){a=a||event;for(var e=a.target||a.srcElement,g,h=null,l=!1;e&&e.parentNode;){if(!l&&e.getAttribute&&(h=e.getAttribute(this._id))){e.getAttribute("userdata")&&this.callEvent("onLocateData",[h,e,a]);if(!this.callEvent("on"+c,[h,a,e]))return;l=!0}if(g=e.className)if(g=g.split(" "),g=g[0]||g[1],b[g])return b[g].call(this,a,h||dhtmlx.html.locate(a,this._id),e);e=e.parentNode}return l}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(a,b){return"object"==typeof a?this._parseSeetingColl(a):this._define(a,b)},_define:function(a,b){dhtmlx.assert_settings.call(this,a,b);var c=this[a+"_setter"];return this._settings[a]=c?c.call(this,b):b},_parseSeetingColl:function(a){if(a)for(var b in a)this._define(b,a[b])},_parseSettings:function(a,b){var c=dhtmlx.extend({},b);"object"!=typeof a||a.tagName||dhtmlx.extend(c,a);this._parseSeetingColl(c)},_mergeSettings:function(a,b){for(var c in b)switch(typeof a[c]){case "object":a[c]=this._mergeSettings(a[c]||{},b[c]);break;case "undefined":a[c]=b[c]}return a},_parseContainer:function(a,b,c){"object"!=typeof a||a.tagName||(a=a.container);this._obj=this.$view=dhtmlx.toNode(a);!this._obj&&c&&(this._obj=c(a));dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+b;this._obj.onselectstart=function(){return!1};this._dataobj=this._obj},_set_type:function(a){if("object"==typeof a)return this.type_setter(a);dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){a&&dhtmlx.extend(this.type,a);this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type("object"==typeof a?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=" "+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(a){var b=dhtmlx.Template.setter(a),c=this;return function(){return b.apply(c,arguments)}},fromHTML:function(a){if("function"==typeof a)return a;if(this._cache[a])return this._cache[a];a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};dhtmlx.Type={add:function(a,b){!a.types&&a.prototype.types&&(a=a.prototype);dhtmlx.assert_enabled()&&this.assert_event(b);var c=b.name||"default";this._template(b);this._template(b,"edit");this._template(b,"loading");a.types[c]=dhtmlx.extend(dhtmlx.extend({},a.types[c]||this._default),b);return c},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(a,b){b="template"+(b?"_"+b:"");var c=a[b];if(c&&"string"==typeof c){if(-1!=c.indexOf("-\x3e"))switch(c=c.split("-\x3e"),c[0]){case "html":c=dhtmlx.html.getValue(c[1]).replace(/\"/g,'\\"');break;case "http":c=(new dhtmlx.ajax).sync().get(c[1],{uid:(new Date).valueOf()}).responseText}a[b]=dhtmlx.Template.fromHTML(c)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data]))this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])}};dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";dhtmlx.assert_enabled()&&this._assert();"string"==typeof a&&(a={template:a});dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,b){this._disabled||(this.data!=a&&(this.data=a,this.render(a)),this._obj.style.top=b.y+this._settings.dy+"px",this._obj.style.left=b.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(a){var b=new dhtmlx.ui.Tooltip(a);this.attachEvent("onMouseMove",function(a,e){b.show(this.get(a),dhtmlx.html.pos(e))});this.attachEvent("onMouseOut",function(a,e){b.hide()});this.attachEvent("onMouseMoving",function(a,e){b.hide()});return b}};dhtmlx.compat=function(a,b){if(dhtmlx.compat[a])dhtmlx.compat[a](b)};dhtmlx.attaches||(dhtmlx.attaches={});dhtmlx.attaches.attachAbstract=function(a,b){var c=document.createElement("DIV");c.id="CustomObject_"+dhtmlx.uid();c.style.width="100%";c.style.height="100%";c.cmp="grid";document.body.appendChild(c);this.attachObject(c.id);b.container=c.id;var e=this.vs[this.av];e.grid=new window[a](b);e.gridId=c.id;e.gridObj=c;e.grid.setSizes=function(){this.resize?this.resize():this.render()};return this.vs[this._viewRestore()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(a,b){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(b||"");this._idd=a;this._isCell=!0;this.conf={borders:!0,idx:{},css:b||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var c=document.createElement("DIV");c.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(c);c=null;this._updateIdx=function(){for(var a in this.conf.idx)this.conf.idx[a]=null,delete this.conf.idx[a];for(var b=0;b<this.cell.childNodes.length;b++){var c=this.cell.childNodes[b].className;for(a in this.conf.idx_data)null!=c.match(new RegExp(this.conf.idx_data[a]))&&(this.conf.idx[a]=b)}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var a in this.dataNodes)null!=this.dataNodes[a]&&"function"==typeof this.dataNodes[a].setSizes&&this.dataNodes[a].setSizes();null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&("layout"==this.dataType&&"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()?this.dataObj.setSizes():this.dataObj.setSizes.apply(this.dataObj,arguments))};this._setSize=function(a,b,c,l,m,n,q,r){null==this.conf.size&&(this.conf.size={});null==r&&(r={});var e={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=a;this.conf.size.y=b;this.conf.size.w=Math.max(c,0);this.conf.size.h=Math.max(l,0);for(var g in e)this.cell.style[r[g]||g]=this.conf.size[e[g]]+"px";this.callEvent("_onSetSize",[]);!0!==n?this._adjustCont(m,q):this._adjustAttached(m);this._adjustProgress()};this._adjustCont=function(a,b){var c=this.cell.childNodes[this.conf.idx.cont];if("function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&1==this.conf.collapsed)c.style.left=c.style.top="0px",c.style.width=c.style.height="200px";else{var e=0,g;for(g in this.conf.ofs_nodes.t)var n=this.conf.ofs_nodes.t[g],e=e+("func"==n?this[g]():1==n?this.cell.childNodes[this.conf.idx[g]].offsetHeight:0);var q=0;for(g in this.conf.ofs_nodes.b)n=this.conf.ofs_nodes.b[g],q+="func"==n?this[g]():1==n?this.cell.childNodes[this.conf.idx[g]].offsetHeight:0;c.style.left="0px";c.style.top=e+"px";null==this.conf.cells_cont&&(this.conf.cells_cont={},c.style.width=this.cell.offsetWidth+"px",c.style.height=Math.max(this.cell.offsetHeight-e-q,0)+"px",this.conf.cells_cont.w=parseInt(c.style.width)-c.offsetWidth,this.conf.cells_cont.h=parseInt(c.style.height)-c.offsetHeight);c.style.left="0px";c.style.top=e+"px";c.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";c.style.height=Math.max(this.conf.size.h-e-q+this.conf.cells_cont.h,0)+"px";this._adjustAttached(a);"expand"==b&&"editor"==this.dataType&&null!=this.dataObj&&this.dataObj._prepareContent(!0)}};this._mtbUpdBorder=function(){for(var a=["menu","toolbar","ribbon"],b=0;b<a.length;b++)if(null!=this.conf.idx[a[b]]){var c=this.cell.childNodes[this.conf.idx[a[b]]],l="dhx_cell_"+a[b]+"_no_borders",m="dhx_cell_"+a[b]+"_def";c.className=c.className.replace(new RegExp(this.conf.borders?l:m),this.conf.borders?m:l)}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=!0;this._viewSave=function(a){this.views[a]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};for(var b=this.cell.childNodes[this.conf.idx.cont];0<b.childNodes.length;)this.views[a].cellCont.push(b.firstChild),b.removeChild(b.firstChild);this.dataObj=this.dataType=null;this.conf.url_data=null;for(var c in this.dataNodes){for(var e in this.conf.ofs_nodes)"undefined"!=typeof this.conf.ofs_nodes[e][c]&&(this.views[a].ofs_nodes[e][c]=this.conf.ofs_nodes[e][c],this.conf.ofs_nodes[e][c]=null,delete this.conf.ofs_nodes[e][c]);this.views[a].dataNodesCont[c]=this.cell.childNodes[this.conf.idx[c]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[c]]);this.views[a].dataNodes[c]=this.dataNodes[c];this.dataNodes[c]=null;delete this.dataNodes[c];this._updateIdx()}this.callEvent("_onViewSave",[a])};this._viewRestore=function(a){if(null!=this.views[a]){this.dataObj=this.views[a].dataObj;this.dataType=this.views[a].dataType;this.conf.url_data=this.views[a].url_data;for(var b=0;b<this.views[a].cellCont.length;b++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[a].cellCont[b]);for(var c in this.views[a].dataNodes)this.dataNodes[c]=this.views[a].dataNodes[c],"menu"==c&&this.cell.insertBefore(this.views[a].dataNodesCont[c],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),"toolbar"==c&&this.cell.insertBefore(this.views[a].dataNodesCont[c],this.cell.childNodes[this.conf.idx.cont]),"ribbon"==c&&this.cell.insertBefore(this.views[a].dataNodesCont[c],this.cell.childNodes[this.conf.idx.cont]),"sb"==c&&this.cell.appendChild(this.views[a].dataNodesCont[c]),this._updateIdx();for(c in this.views[a].ofs_nodes)for(var e in this.views[a].ofs_nodes[c])this.conf.ofs_nodes[c][e]=this.views[a].ofs_nodes[c][e];if(this.conf.borders!=this.views[a].borders)this[this.views[a].borders?"_showBorders":"_hideBorders"](!0);"url"==this.dataType&&null!=this.conf.url_data&&0==this.conf.url_data.ajax&&null!=this.conf.url_data.post_data&&this.reloadURL();this.callEvent("_onViewRestore",[a]);this._viewDelete(a)}};this._viewDelete=function(a){if(null!=this.views[a]){this.views[a].borders=null;for(var b in this.views[a].ofs_nodes){for(var c in this.views[a].ofs_nodes[b])this.views[a].ofs_nodes[b][c]=null;this.views[a].ofs_nodes[b]=null}this.views[a].dataType=null;this.views[a].dataObj=null;this.views[a].url_data=null;for(c=0;c<this.views[a].cellCont.length;c++)this.views[a].cellCont[c]=null;this.views[a].cellCont=null;for(b in this.views[a].dataNodes)this.views[a].dataNodes[b]=null,this.views[a].dataNodesCont[b]=null;this.views[a].dataNodes=this.views[a].dataNodesCont=null;this.views[a]=null;delete this.views[a]}};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a)return!1;this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;a="undefined"==typeof this.conf.views_loaded[this.conf.view];this.conf.views_loaded[this.conf.view]=!0;return a};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(a){if(a==this.conf.view)a=this.conf.unloading,this.conf.unloading=!0,"function"==typeof this.detachMenu&&this.detachMenu(),"function"==typeof this.detachToolbar&&this.detachToolbar(),"function"==typeof this.detachRibbon&&this.detachRibbon(),this.detachStatusBar(),this._detachObject(null,!0),this.conf.unloading=a,this.conf.unloading||this._adjustCont(this._idd);else if(null!=this.views[a]){var b=this.views[a],c;for(c in b.dataNodes)"function"==typeof b.dataNodes[c].unload&&b.dataNodes[c].unload(),b.dataNodes[c]=null,b.dataNodesCont[c]=null;"url"==b.dataType?null!=b.cellCont&&"null"!=b.cellCont[0]&&this._detachURLEvents(b.cellCont[0]):null!=b.dataObj&&("function"==typeof b.dataObj.unload?b.dataObj.unload():"function"==typeof b.dataObj.destructor&&b.dataObj.destructor(),b.dataObj=null);this._viewDelete(a);"undefined"!=typeof this.conf.views_loaded[a]&&delete this.conf.views_loaded[a]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(1!=this.conf.progress){this.conf.progress=!0;var a=document.createElement("DIV");a.className=this.conf.idx_data.pr1;var b=document.createElement("DIV");"material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)?(b.className=this.conf.idx_data.pr3,b.innerHTML='\x3csvg class\x3d"dhx_cell_prsvg" viewBox\x3d"25 25 50 50"\x3e\x3ccircle class\x3d"dhx_cell_prcircle" cx\x3d"50" cy\x3d"50" r\x3d"20"/\x3e\x3c/svg\x3e'):b.className=this.conf.idx_data.pr2;null!=this.conf.idx.cover?this.cell.insertBefore(b,this.cell.childNodes[this.conf.idx.cover]):this.cell.appendChild(b);this.cell.insertBefore(a,b);this._updateIdx();this._adjustProgress()}};dhtmlXCellObject.prototype.progressOff=function(){if(1==this.conf.progress){for(var a in{pr3:3,pr2:2,pr1:1}){var b=this.cell.childNodes[this.conf.idx[a]];null!=b&&b.parentNode.removeChild(b)}this.conf.progress=!1;this._updateIdx()}};dhtmlXCellObject.prototype._adjustProgress=function(){if(null!=this.conf.idx.pr1){this.conf.pr||(this.conf.pr={});var a=this.cell.childNodes[this.conf.idx.pr1],b=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];this.conf.pr.ofs||(b.style.width=a.offsetWidth+"px",b.style.height=a.offsetHeight+"px",this.conf.pr.ofs={w:b.offsetWidth-b.clientWidth,h:b.offsetHeight-b.clientHeight});b.style.width=a.offsetWidth-this.conf.pr.ofs.w+"px";b.style.height=a.offsetHeight-this.conf.pr.ofs.h+"px"}};dhtmlXCellObject.prototype._showCellCover=function(){if(1!=this.conf.cover){this.conf.cover=!0;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);this._updateIdx()}};dhtmlXCellObject.prototype._hideCellCover=function(){1==this.conf.cover&&(this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]),this._updateIdx(),this.conf.cover=!1)};dhtmlXCellObject.prototype._showBorders=function(a){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),!0!==a&&this._adjustCont(this._idd))};dhtmlXCellObject.prototype._hideBorders=function(a){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),!0!==a&&this._adjustCont(this._idd))};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=!0;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var a in this.views)this.unloadView(a);this.conf=null;for(a in this)this[a]=null};dhtmlXCellObject.prototype.attachObject=function(a,b){!window.dhx4.s2b(b)||"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||(b=!1);"string"==typeof a&&(a=document.getElementById(a));if(a.parentNode!=this.cell.childNodes[this.conf.idx.cont]){if(b){a.style.display="";var c=a.offsetWidth,e=a.offsetHeight}this._attachObject(a);this.dataType="obj";a.style.display="";b&&this._adjustByCont(c,e)}};dhtmlXCellObject.prototype.appendObject=function(a){"string"==typeof a&&(a=document.getElementById(a));a.parentNode!=this.cell.childNodes[this.conf.idx.cont]&&(this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0),this._attachObject(a,null,null,!0),this.dataType="obj",a.style.display="")};dhtmlXCellObject.prototype.detachObject=function(a,b){this._detachObject(null,a,b)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){return"obj"==this.dataType||"url"==this.dataType||"url-ajax"==this.dataType?this.cell.childNodes[this.conf.idx.cont].firstChild:this.dataObj};dhtmlXCellObject.prototype.attachURL=function(a,b,c){1==c&&(c={});var e="undefined"!=typeof c&&0!=c&&null!=c;null==this.conf.url_data&&(this.conf.url_data={});this.conf.url_data.url=a;this.conf.url_data.ajax=1==b;this.conf.url_data.post_data=1==c?{}:c||null;if(null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(l){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}if(1==b){var g=this;if(e){var e="",h;for(h in c)e+="\x26"+encodeURIComponent(h)+"\x3d"+encodeURIComponent(c[h]);this.conf.url_data.xml_doc=dhx4.ajax.post(a,e,function(a){null!=g.attachHTMLString&&"string"==typeof a.xmlDoc.responseText&&(g.attachHTMLString("\x3cdiv style\x3d'position:relative;width:100%;height:100%;overflow:auto;'\x3e"+a.xmlDoc.responseText+"\x3c/div\x3e"),"function"==typeof g._doOnFrameContentLoaded&&g._doOnFrameContentLoaded(),g.dataType="url-ajax");g=null})}else this.conf.url_data.xml_doc=dhx4.ajax.get(a,function(a){null!=g.attachHTMLString&&"string"==typeof a.xmlDoc.responseText&&(g.attachHTMLString("\x3cdiv style\x3d'position:relative;width:100%;height:100%;overflow:auto;'\x3e"+a.xmlDoc.responseText+"\x3c/div\x3e"),"function"==typeof g._doOnFrameContentLoaded&&g._doOnFrameContentLoaded(),g.dataType="url-ajax");g=null})}else"url"==this.dataType?c=this.getFrame():(c=document.createElement("IFRAME"),c.frameBorder=0,c.border=0,c.style.width="100%",c.style.height="100%",c.style.position="relative",this._attachObject(c),this.dataType="url",this._attachURLEvents()),e?(a="undefined"==typeof this.conf.url_data.post_ifr,this.conf.url_data.post_ifr=!0,a&&this._attachURLEvents(),c.src="about:blank"):c.src=a+window.dhx4.ajax._dhxr(a),c=null;c=null};dhtmlXCellObject.prototype.reloadURL=function(){"url"!=this.dataType&&"url-ajax"!=this.dataType||null==this.conf.url_data||this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(a){this._attachObject(null,null,a);a=a.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var b=0;b<a.length;b++){var c=a[b].replace(/<([\/]{0,1})script[^>]*>/gi,"");c&&(window.execScript?window.execScript(c):window.eval(c))}};dhtmlXCellObject.prototype.attachScheduler=function(a,b,c,e){e=e||window.scheduler;var g=!1;if(c){var h=document.getElementById(c);h&&(g=!0)}g||(c=c||'\x3cdiv class\x3d"dhx_cal_tab" name\x3d"day_tab" style\x3d"right:204px;"\x3e\x3c/div\x3e\x3cdiv class\x3d"dhx_cal_tab" name\x3d"week_tab" style\x3d"right:140px;"\x3e\x3c/div\x3e\x3cdiv class\x3d"dhx_cal_tab" name\x3d"month_tab" style\x3d"right:76px;"\x3e\x3c/div\x3e',h=document.createElement("DIV"),h.id="dhxSchedObj_"+(new Date).getTime(),h.style.width="100%",h.style.height="100%",h.style.position="relative",h.style.overflow="hidden",h.className="dhx_cal_container",h.innerHTML='\x3cdiv class\x3d"dhx_cal_navline"\x3e\x3cdiv class\x3d"dhx_cal_prev_button"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"dhx_cal_next_button"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"dhx_cal_today_button"\x3e\x3c/div\x3e\x3cdiv class\x3d"dhx_cal_date"\x3e\x3c/div\x3e'+c+'\x3c/div\x3e\x3cdiv class\x3d"dhx_cal_header"\x3e\x3c/div\x3e\x3cdiv class\x3d"dhx_cal_data"\x3e\x3c/div\x3e');this._attachObject(h);this.dataType="scheduler";this.dataObj=e;this.dataObj.setSizes=function(){this.update_view()};e.init(h.id,a,b);h=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);a||(a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP});this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(a,b,c,e,g){"undefined"!=typeof g?a=g:(b=b||{},c="string"==typeof b.text&&0<b.text.length?b.text:"\x26nbsp;",e="number"==typeof b.height?b.height:!1,a=document.createElement("DIV"),a.className="dhx_cell_statusbar_def",a.innerHTML="\x3cdiv class\x3d'"+(1==b.paging?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'\x3e"+c+"\x3c/div\x3e",0!=e&&(a.firstChild.style.height=a.firstChild.style.lineHeight=e+"px"));null!=this.conf.idx.pr1?this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.pr1]):this.cell.appendChild(a);this.conf.ofs_nodes.b.sb=!0;this._updateIdx();this._adjustCont(this._idd);return a};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(!this.dataNodes.sb)return null!=a&&1==window.dhx4.s2b(a.paging)&&(a.height=null),"dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",a),this.dataNodes.sb.setText=function(a){this.childNodes[0].innerHTML=a},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sb.onselectstart=function(a){return!1},this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&("dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(a,b){this.dataNodes[a]&&(this.cell.childNodes[this.conf.idx[a]].style.display=b,this._adjustCont())};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return"url"!=this.dataType?null:this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if("url"==this.dataType){var a=this,b=this._idd,c=this.cell.childNodes[this.conf.idx.cont].firstChild;"function"!=typeof this._doOnFrameMouseDown&&(this._doOnFrameMouseDown=function(c){a.callEvent("_onContentMouseDown",[b,c||event])});"function"==typeof window.addEventListener?c.onload=function(){try{"function"==typeof a._doOnFrameMouseDown&&this.contentWindow.document.body.addEventListener("mousedown",a._doOnFrameMouseDown,!1)}catch(e){}try{"function"==typeof a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(e){}}:c.onreadystatechange=function(b){if("complete"==this.readyState){try{"function"==typeof a._doOnFrameMouseDown&&this.contentWindow.document.body.attachEvent("onmousedown",a._doOnFrameMouseDown)}catch(g){}try{"function"==typeof a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(g){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(1==this.conf.url_data.post_ifr){var a=this.getFrame().contentWindow.document,b=a.createElement("FORM");b.method="POST";b.action=this.conf.url_data.url;a.body.appendChild(b);var c={};1!=window.dhx4.ajax.cache&&(c["dhxr"+(new Date).getTime()]="1");for(var e in this.conf.url_data.post_data)c[e]=this.conf.url_data.post_data[e];for(e in c){var g=a.createElement("INPUT");g.type="hidden";g.name=e;g.value=c[e];b.appendChild(g)}this.conf.url_data.post_ifr=!1;b.submit()}else this.callEvent("_onContentLoaded",[this._idd])};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(null==a){if("url"!=this.dataType)return;a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(a)if("function"==typeof window.addEventListener){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}};dhtmlXCellObject.prototype._attachObject=function(a,b,c,e,g){if("string"==typeof a&&1=={menu:1,toolbar:1,ribbon:1,sb:1}[a])return this["_createNode_"+a].apply(this,arguments);1!=e&&this._detachObject(null,!0,null);"string"==typeof c?this.cell.childNodes[this.conf.idx.cont].innerHTML=c:this.cell.childNodes[this.conf.idx.cont].appendChild(a);a=null};dhtmlXCellObject.prototype._detachObject=function(a,b,c){this.callEvent("_onBeforeContentDetach",[]);if("menu"==a||"toolbar"==a||"ribbon"==a||"sb"==a)b=this.cell.childNodes[this.conf.idx[a]],b.parentNode.removeChild(b),this.conf.ofs_nodes["sb"==a?"b":"t"][a]=!1,this._updateIdx(),this.conf.unloading||this._adjustCont(this._idd);else{1==b?c=!1:"undefined"==typeof c?c=document.body:"string"==typeof c&&(c=document.getElementById(c));if(!1===c){if(1==this.conf.unloading&&null!=String(this.dataType).match(/ajax/)&&null!=this.conf.url_data&&null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(e){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}"url"==this.dataType?this._detachURLEvents():null!=this.dataObj&&("function"==typeof this.dataObj.unload?this.dataObj.unload():"function"==typeof this.dataObj.destructor&&this.dataObj.destructor())}for(b=this.cell.childNodes[this.conf.idx.cont];0<b.childNodes.length;)!1===c?b.removeChild(b.lastChild):(b.firstChild.style.display="none",c.appendChild(b.firstChild));this.conf.append_mode&&(b.style.overflow="",this.conf.append_mode=!1);a="tabbar"==this.dataType;this.dataType=this.dataObj=null;1!=this.conf.unloading&&a&&(this.showHeader(!0),this._showBorders())}};dhtmlXCellObject.prototype._attachFromCell=function(a){this.detachObject(!0);var b="layout";"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(b="window");"function"==typeof window.dhtmlXWindowsCell&&a instanceof window.dhtmlXWindowsCell&&1==a.wins.w[a._idd].conf.parked&&a.wins._winCellSetOpacity(a._idd,"open",!1);"function"==typeof window.dhtmlXAccordionCell&&a instanceof window.dhtmlXAccordionCell&&0==a.conf.opened&&a._cellSetOpacity("open",!1);for(var c in a.dataNodes)this._attachObject(c,null,null,null,a.cell.childNodes[a.conf.idx[c]]),this.dataNodes[c]=a.dataNodes[c],a.dataNodes[c]=null,a.conf.ofs_nodes["sb"==c?"b":"t"][c]=!1,a._updateIdx();this._mtbUpdBorder();if(null!=a.dataType&&null!=a.dataObj){this.dataType=a.dataType;for(this.dataObj=a.dataObj;0<a.cell.childNodes[a.conf.idx.cont].childNodes.length;)this.cell.childNodes[this.conf.idx.cont].appendChild(a.cell.childNodes[a.conf.idx.cont].firstChild);a.dataType=null;a.dataObj=null;"grid"==this.dataType&&("window"==b&&"dhx_skyblue"==this.conf.skin?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else for(;0<a.cell.childNodes[a.conf.idx.cont].childNodes.length;)this.cell.childNodes[this.conf.idx.cont].appendChild(a.cell.childNodes[a.conf.idx.cont].firstChild);this.conf.view=a.conf.view;a.conf.view="def";for(c in a.views)this.views[c]=a.views[c],a.views[c]=null,delete a.views[c];a._updateIdx();a._adjustCont();this._updateIdx();this._adjustCont();1==a.conf.progress?(a.progressOff(),this.progressOn()):this.progressOff();"window"==b&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)};function dhtmlXCellTop(a,b){if(0!=arguments.length&&"undefined"!=typeof a){var c=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=!1;this.conf.fs_mode=!1;this.conf.fs_tm=null;this.conf.fs_resize=!1;if(a==document.body){if(this.conf.fs_mode=!0,this.base=a,this.base==document.body){var e={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=null!=e[this.conf.skin]?e[this.conf.skin]:e.dhx_skyblue}}else this.base="string"==typeof a?document.getElementById(a):a;this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(null!=b)this.setOffsets(b,!1);else if(null!=this.base._ofs){this.setOffsets(this.base._ofs,!1);this.base._ofs=null;try{delete this.base._ofs}catch(g){}}this._adjustCont=function(){var a=this.conf.ofs.t,b;for(b in this.conf.ofs_nodes.t)a+=1==this.conf.ofs_nodes.t[b]?this.dataNodes[b].offsetHeight:0;var c=this.conf.ofs.b;for(b in this.conf.ofs_nodes.b)c+=1==this.conf.ofs_nodes.b[b]?this.dataNodes[b].offsetHeight:0;this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=a+"px";this.cont.style.height=this.base.clientHeight-a-c+"px"};this._setBaseSkin=function(a){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+a)};this._initFSResize=function(){1!=this.conf.fs_resize&&(this._doOnResizeStart=function(){window.clearTimeout(c.conf.fs_tm);c.conf.fs_tm=window.setTimeout(c._doOnResizeEnd,200)},this._doOnResizeEnd=function(){c.setSizes()},"function"==typeof window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fs_resize=!0)};1==this.conf.fs_mode&&this._initFSResize();this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();1==this.conf.fs_mode&&("function"==typeof window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart));this.base.removeChild(this.cont);this.base.className=this.base.className.replace(new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi"),"");c=this.cont=this.base=null};a=null}}dhtmlXCellTop.prototype.setOffsets=function(a,b){var c=!1,e;for(e in a){var g=e.charAt(0);"undefined"==typeof this.conf.ofs[g]||isNaN(a[e])||(this.conf.ofs[g]=parseInt(a[e]),c=!0)}!1!==b&&"function"==typeof this.setSizes&&1==c&&this.setSizes()};dhtmlXCellTop.prototype.attachMenu=function(a){if(null==this.dataNodes.menu){this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if("object"!=typeof a||null==a)a={};a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.menuObj.style.display&&(null==this.conf.ofs_menu&&(this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}),this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(null!=this.dataNodes.haObj?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px")});this.conf.ofs_nodes.t.menuObj=!0;this.setSizes();a=a.parnt=null;return this.dataNodes.menu}};dhtmlXCellTop.prototype.detachMenu=function(){null!=this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.attachToolbar=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if("object"!=typeof a||null==a)a={};a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.toolbarObj.style.display&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=!0;this.setSizes();a=a.parnt=null;return this.dataNodes.toolbar}};dhtmlXCellTop.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.attachRibbon=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if("object"!=typeof a||null==a)a={};a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.ribbonObj.style.display&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())});this.conf.ofs_nodes.t.ribbonObj=!0;var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()});this.setSizes();a=a.parnt=null;return this.dataNodes.ribbon}};dhtmlXCellTop.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(!this.dataNodes.sbObj)return"undefined"==typeof a&&(a={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxcelltop_statusbar",null!=this.cont.nextSibling?this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling):this.base.appendChild(this.dataNodes.sbObj),this.dataNodes.sbObj.innerHTML="\x3cdiv class\x3d'dhxcont_statusbar'\x3e"+("string"==typeof a.text&&0<a.text.length?a.text:"\x26nbsp;")+"\x3c/div\x3e","number"==typeof a.height&&(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"),this.dataNodes.sbObj.setText=function(a){this.childNodes[0].innerHTML=a},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(a){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.sbObj.style.display&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=(null!=this.dataNodes.faObj?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(a,b){null!=this.dataNodes[a]&&(this.dataNodes[a].style.display=b,this.setSizes())};dhtmlXCellTop.prototype._mtbUnload=function(a,b){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var a=document.createElement("DIV");a.className="dhxcelltop_progress";this.base.appendChild(a);a=document.createElement("DIV");"material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)?(a.className="dhxcelltop_progress_svg",a.innerHTML='\x3csvg class\x3d"dhx_cell_prsvg" viewBox\x3d"25 25 50 50"\x3e\x3ccircle class\x3d"dhx_cell_prcircle" cx\x3d"50" cy\x3d"50" r\x3d"20"/\x3e\x3c/svg\x3e'):(a=document.createElement("DIV"),a.className="dhxcelltop_progress_img");this.base.appendChild(a)}};dhtmlXCellTop.prototype.progressOff=function(){if(this.conf.progress){for(var a={dhxcelltop_progress:!0,dhxcelltop_progress_img:!0,dhxcelltop_progress_svg:!0},b=0;b<this.base.childNodes.length;b++)"undefined"!=typeof this.base.childNodes[b].className&&1==a[this.base.childNodes[b].className]&&(a[this.base.childNodes[b].className]=this.base.childNodes[b]);for(var c in a)1!=a[c]&&this.base.removeChild(a[c]),a[c]=null;this.conf.progress=!1}};dhtmlXCellTop.prototype.attachHeader=function(a,b){null==this.dataNodes.haObj&&("object"!=typeof a&&(a=document.getElementById(a)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxcelltop_hdr",this.dataNodes.haObj.style.height=(b||a.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont),this.dataNodes.haObj.appendChild(a),a.style.visibility="visible",a=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())};dhtmlXCellTop.prototype.detachHeader=function(){if(this.dataNodes.haObj){for(;0<this.dataNodes.haObj.childNodes.length;)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=!1;delete this.dataNodes.haEv;delete this.dataNodes.haObj;this.conf.unloading||this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(a,b){if(null==this.dataNodes.faObj){"object"!=typeof a&&(a=document.getElementById(a));this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(b||a.offsetHeight)+"px";var c=this.dataNodes.sbObj||this.cont;this.base.lastChild==c?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,c.nextSibling);this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(a);a.style.visibility="visible";c=a=null;this.conf.ofs_nodes.b.faObj=!0;this.setSizes()}};dhtmlXCellTop.prototype.detachFooter=function(){if(this.dataNodes.faObj){for(;0<this.dataNodes.faObj.childNodes.length;)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=!1;delete this.dataNodes.faEv;delete this.dataNodes.faObj;this.conf.unloading||this.setSizes()}};function dhtmlXCombo(a,b,c,e,g){var h=this,l=g=null;"object"!=typeof a||a.tagName||(g=a,a=g.parent,c=g.width,b=g.name,e=g.mode,l=g.skin);this.cont="string"==typeof a?document.getElementById(a):a;this.conf={skin:null,form_name:b||"dhxcombo",combo_width:(parseInt(c)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof e&&"undefined"!=typeof this.modes[e]?e:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,free_text_empty:!1,enabled:!0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&"undefined"==typeof window.addEventListener?1:0,ro_mode:!1,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:!0,template:{header:!0,input:"#text#",option:"#text#"},f_func:null,f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:!1,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,i_ofs:23,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1},material:{list_ofs:0,hdr_ofs:1,scr_ofs:1}},col_w:null};this.conf.combo_image=1==this.modes[this.conf.opts_type].image;this.t={};this.base=document.createElement("DIV");this.base.style.width=this.conf.combo_width+"px";this.base.innerHTML="\x3cinput type\x3d'text' class\x3d'dhxcombo_input' style\x3d'width:"+(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px;"+(this.conf.combo_image?"margin-left:"+this.conf.i_ofs+"px;":"")+"' autocomplete\x3d'off'\x3e\x3cinput type\x3d'hidden' value\x3d''\x3e\x3cinput type\x3d'hidden' value\x3d'false'\x3e\x3cdiv class\x3d'dhxcombo_select_button'\x3e\x3cdiv class\x3d'dhxcombo_select_img'\x3e\x3c/div\x3e\x3c/div\x3e"+(this.conf.combo_image?"\x3cdiv class\x3d'dhxcombo_top_image'\x3e"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"\x3c/div\x3e":"");this.cont.appendChild(this.base);this.list=document.createElement("DIV");this.list._listId=window.dhx4.newId();this.list.style.display="none";document.body.insertBefore(this.list,document.body.firstChild);this._doOnListScroll=function(){null!=h.conf.s_tm&&window.clearTimeout(h.conf.s_tm);h.conf.s_tm=window.setTimeout(h._doOnListScrollAction,h.conf.s_time)};this._doOnListScrollAction=function(){h.conf.s_tm=null;"scroll"==h.conf.s_mode&&h.list.scrollHeight-h.list.scrollTop-10<h.list.clientHeight&&h._subloadRequest()};"function"==typeof window.addEventListener?this.list.addEventListener("scroll",this._doOnListScroll,!1):this.list.attachEvent("onscroll",this._doOnListScroll);this.setSkin(l||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"material");this._updateTopImage=function(a){this.conf.combo_image&&(this.base.lastChild.innerHTML=null!=a?this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))};this._filterOpts=function(a){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var b=String(this.base.firstChild.value).replace(new RegExp(this._fixRE(this.conf.f_ac_text)+"$","i"),"");if(this.conf.f_server_last==b.toLowerCase())this._checkForMatch();else if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))this.conf.f_server_last=b.toLowerCase(),this.callEvent("onDynXLS",[b]);else if(null!=this.conf.f_url)if(0==b.length)this.conf.f_server_last=b.toLowerCase(),this.clearAll();else if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[b]){this.clearAll();this.conf.f_server_last=b.toLowerCase();for(var c=0;c<this.conf.f_cache_data[b].data.length;c++)this.load(this.conf.f_cache_data[b].data[c]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[b].dyn_end,this.conf.f_mask=this.conf.f_cache_data[b].mask);!0!==a&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){h.conf.f_server_last=b.toLowerCase();h.conf.f_mask=b;var c="mask\x3d"+encodeURIComponent(b);h.conf.f_dyn&&(c+="\x26pos\x3d0",h.conf.f_dyn_end=!1);var e=function(c){h.conf.f_cache&&(h.conf.f_cache_data[b]||(h.conf.f_cache_data[b]={data:[],dyn_end:!1,mask:b}),h.conf.f_cache_data[b].data.push(c.xmlDoc.responseXML));h.clearAll();h.load(c.xmlDoc.responseXML);1==(0<h.base.offsetWidth&&0<h.base.offsetHeight)&&1==h.conf.enabled&&1==h.conf.combo_focus&&!0!==a&&(h.conf.f_ac&&"start"==h.conf.f_mode&&0==h.conf.clear_bsp&&null!=h.list.firstChild&&(c=String(h.t[h.list.firstChild._optId].obj.getText(h.list.firstChild,!0)),b==h.base.firstChild.value&&0===String(c).toLowerCase().indexOf(String(b).toLowerCase())&&(h.base.firstChild.value=c,h.conf.f_ac_text=c.substr(b.length),h._selectRange(b.length,c.length))),h._showList(!0),h._checkForMatch());e=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(h.conf.f_url,c,e):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(h.conf.f_url+(0<=String(h.conf.f_url).indexOf("?")?"\x26":"?")+c,e)},200);else{this.conf.f_server_last=b.toLowerCase();var e=0==b.length?!0:new RegExp(("start"==this.conf.f_mode?"^":"")+this._fixRE(b),"i"),g=null,l;for(l in this.t){var n=!1;!0!==e&&(null!=this.conf.f_func?(n=this._getOption(this.t[l].item._optId,c),n=1==this.conf.f_func.apply(window,[b,n])):(n=this.t[l].obj.getText(this.t[l].item,!0),n=1==e.test(n)));!0===e||1==n?(this.t[l].item.style.display="",null==g&&0<b.length&&(g=String(this.t[l].obj.getText(this.t[l].item,!0)))):this.t[l].item.style.display="none"}this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=g&&(this.conf.f_ac_text=g.replace(new RegExp("^"+b,"i"),""),this.base.firstChild.value=g,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length));"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0);!0!==a&&(this._showList(!0),this._checkForMatch())}};this._searchRO=function(a){this.conf.ro_tm&&window.clearTimeout(this.conf.ro_tm);this.conf.ro_text+=a;this._showList();for(a=0;a<this.list.childNodes.length;a++){var b=this.list.childNodes[a]._optId;if(0===String(this.t[b].obj.getText(this.list.childNodes[a],!0)).toLowerCase().indexOf(this.conf.ro_text)){this._setSelected(b,!0,!0);this._confirmSelect("script",!1);break}}this.conf.ro_tm=window.setTimeout(function(){h.conf.ro_text=""},this.conf.ro_tm_time)};this._fixRE=function(a){return String(a).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$\x26")};this._initObj=function(a){"undefined"!=typeof a.template&&this.setTemplate(a.template);1!=a.add&&1!=this.conf.f_loading&&this.clearAll(!1);this.addOption(a.options)};this._xmlToObj=function(a,b,c){var e={add:!1,options:[]};a=1==b?a:a.getElementsByTagName("complete");if(0<a.length){1==window.dhx4.s2b(a[0].getAttribute("add"))&&(e.add=!0);a=a[0].childNodes;for(var g=0;g<a.length;g++)if("undefined"!=typeof a[g].tagName){if("template"==String(a[g].tagName).toLowerCase()){for(var h={},l=0;l<a[g].childNodes.length;l++){var n=a[g].childNodes[l];if(null!=n.tagName){var m=n.tagName;"undefined"!=typeof this.conf.template[m]&&(h[m]=window.dhx4._xmlNodeValue(n));if("columns"==m)for(m=0;m<n.childNodes.length;m++){var q=n.childNodes[m];if(null!=q.tagName&&"column"==q.tagName){var r={},D;for(D in{width:1,css:1,header:1,option:1})null!=q.getAttribute(D)&&(r[D]=q.getAttribute(D));for(D in{header:1,option:1}){var E=q.getElementsByTagName(D);null!=E[0]&&null!=E[0].firstChild&&(r[D]=window.dhx4._xmlNodeValue(E[0]))}null==h.columns&&(h.columns=[]);h.columns.push(r)}}}}this.setTemplate(h)}if("option"==String(a[g].tagName).toLowerCase()){l=1==b?e.options.length==c:window.dhx4.s2b(a[g].getAttribute("selected"));h={value:a[g].getAttribute("value"),text:window.dhx4._xmlNodeValue(a[g]),selected:l,checked:window.dhx4.s2b(a[g].getAttribute("checked"))};for(D in{img:1,img_dis:1,img_src:1,img_src_dis:1,css:1})null!=a[g].getAttribute(D)&&(h[D]=a[g].getAttribute(D));for(l=0;l<a[g].childNodes.length;l++)if(null!=a[g].childNodes[l].tagName&&"text"==String(a[g].childNodes[l].tagName).toLowerCase())for(h.text={},n=a[g].childNodes[l],m=0;m<n.childNodes.length;m++)null!=n.childNodes[m].tagName&&(h.text[n.childNodes[m].tagName]=window.dhx4._xmlNodeValue(n.childNodes[m]));e.options.push(h)}}}return e};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0});window.dhx4._eventable(this);this._getNearItem=function(a,b){for(var c=null;null!=a;)a=a[0>b?"previousSibling":"nextSibling"],null==c&&null!=a&&""==a.style.display&&null!=a._optId&&(c=a,a=null);return c};this.setName(this.conf.form_name);this._doOnListMouseMove=function(a){a=a||event;for(a=a.target||a.srcElement;null!=a&&a!=this;)"undefined"!=typeof a._optId&&(h.conf.tm_hover&&window.clearTimeout(h.conf.tm_hover),h._setSelected(a._optId,!1,!1,!0)),a=a.parentNode};this._doOnListMouseDown=function(a){a=a||event;a.cancelBubble=!0;h.conf.clear_click=!0;window.setTimeout(function(){h.base.firstChild.focus()},1)};this._doOnListMouseUp=function(a){a=a||event;if(a.button==h.conf.btn_left)for(var b=a.target||a.srcElement;null!=b&&b!=this;){if("undefined"!=typeof b._optId){var c=!0;"function"==typeof h.t[b._optId].obj.optionClick&&!0!==h.t[b._optId].obj.optionClick(b,a,h)&&(c=!1);c&&(h._setSelected(b._optId,null,!0),h._confirmSelect("click"))}b=b.parentNode}};this._doOnListMouseOut=function(a){h.conf.tm_hover&&window.clearTimeout(h.conf.tm_hover);h.conf.tm_hover=window.setTimeout(function(){var a=h.conf.last_match||h.conf.last_selected;null==h.conf.last_match&&null!=h.t[a]&&h.base.firstChild.value!=h.t[a].obj.getText(h.t[a].item,!0)&&(a=null);h._setSelected(a,null,!0,!0)},1)};this._doOnBaseMouseDown=function(a){if(h.conf.enabled&&(h.conf.clear_click=!0,a=a||event,a.button==h.conf.btn_left)){a=a.target||a.srcElement;if(a!=this.firstChild){window.setTimeout(function(){h.base.firstChild.focus()},1);for(var b=a;b!=this&&null!=b;)if(b==this.lastChild){if("function"==typeof h.modes[h.conf.opts_type].topImageClick&&(b=h.conf.last_hover||h.conf.last_selected,b=null!=b?h.t[b].item:null,!0!==h.modes[h.conf.opts_type].topImageClick(b,h))){b=b=null;return}b=null}else b=b.parentNode}h._isListVisible()?h._hideList():(a!=this.firstChild&&(h.conf.clear_blur=!0),h._showList(),h._setSelected(h.conf.last_selected,!0,!0));a=null}};this._doOnBodyMouseDown=function(){h.conf.clear_click?h.conf.clear_click=!1:h._confirmSelect("blur")};this._doOnInputFocus=function(){h.conf.clear_blur=!1;h.conf.tm_confirm_blur&&window.clearTimeout(h.conf.tm_confirm_blur);0==h.conf.combo_focus&&(h.conf.combo_focus=!0,"material"==h.conf.skin&&null==h.base.className.match(/dhxcombo_actv/)&&(h.base.className+=" dhxcombo_actv"),h.callEvent("onFocus",[]))};this._doOnInputBlur=function(){1==h.conf.clear_blur?h.conf.clear_blur=!1:(h.conf.tm_confirm_blur&&window.clearTimeout(h.conf.tm_confirm_blur),h.conf.tm_confirm_blur=window.setTimeout(function(){0==h.conf.clear_click&&(h._confirmSelect("blur"),h.conf.combo_focus=!1,"material"==h.conf.skin&&null!=h.base.className.match(/dhxcombo_actv/)&&(h.base.className=h.base.className.replace(/\s*dhxcombo_actv/gi,"")),h.callEvent("onBlur",[]))},20))};this._doOnInputKeyUp=function(a){a=a||event;0!=h.conf.f_mode?(h.conf.clear_bsp=8==a.keyCode||46==a.keyCode,9!=a.keyCode&&13!=a.keyCode&&37!=a.keyCode&&38!=a.keyCode&&39!=a.keyCode&&40!=a.keyCode&&h._filterOpts()):h._checkForMatch()};this._doOnInputKeyDown=function(a){a=a||event;38!=a.keyCode&&40!=a.keyCode||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,h._keyOnUpDown(38==a.keyCode?-1:1));113!=a.keyCode||h._isListVisible()||(h._showList(),h.base.firstChild.value==h.conf.last_text?(h._setSelected(h.conf.last_selected,!0,!0),h.base.firstChild.value=h.conf.last_text,h.conf.f_server_last=h.base.firstChild.value.toLowerCase()):(h.conf.f_server_last=h.base.firstChild.value.toLowerCase(),0==h.conf.f_mode&&h._checkForMatch()));27==a.keyCode&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,h._cancelSelect());13==a.keyCode&&(a.preventDefault&&a.preventDefault(),h._confirmSelect("kbd"));1==h.conf.ro_mode&&(48<=a.keyCode&&57>=a.keyCode||65<=a.keyCode&&90>=a.keyCode)&&(h._searchRO(String.fromCharCode(a.keyCode).toLowerCase()),a.cancelBubble=!0);h.conf.clear_key=!0;h.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._doOnInputKeyPress=function(a){h.conf.clear_key?h.conf.clear_key=!1:(a=a||event,h.callEvent("onKeyPressed",[a.keyCode||a.charCode]))};this._keyOnUpDown=function(a){var b=null;this.conf.last_hover?b=this.t[this.conf.last_hover].item:this.conf.last_selected&&(b=this.t[this.conf.last_selected].item);if(b||0!=this._getListVisibleCount())null!=b&&""!=b.style.display&&(b=null),this._showList(),null!=b?this.t[b._optId].obj.isSelected(b)&&(b=this._getNearItem(b,a)):(b=this.list.firstChild,""!=b.style.display&&(b=this._getNearItem(b,1))),null!=b&&(this._setSelected(b._optId,!0,!0),0==this.conf.f_mode?this.base.firstChild.value=this.t[b._optId].obj.getText(b,!0):(a=String(this.t[b._optId].obj.getText(b,!0)),"start"==this.conf.f_mode&&1==this.conf.f_ac?0===a.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=a.substring(this.conf.f_server_last.length,a.length),this.base.firstChild.value=a,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())))};this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(b=0;b<this.conf.evs_nodes.length;b++)for(var m in this.conf.evs_nodes[b].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[b].node.addEventListener(m,this[this.conf.evs_nodes[b].evs[m]],!1):this.conf.evs_nodes[b].node.attachEvent("on"+m,this[this.conf.evs_nodes[b].evs[m]]);this.unload=function(){this.clearAll();this.t=null;for(var a=0;a<this.conf.evs_nodes.length;a++){for(var b in this.conf.evs_nodes[a].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[a].node.removeEventListener(b,this[this.conf.evs_nodes[a].evs[b]],!1):this.conf.evs_nodes[a].node.detachEvent("on"+b,this[this.conf.evs_nodes[a].evs[b]]),this.conf.evs_nodes[a].evs[b]=null,delete this.conf.evs_nodes[a].evs[b];this.conf.evs_nodes[a].node=null;this.conf.evs_nodes[a].evs=null;delete this.conf.evs_nodes[a].node;delete this.conf.evs_nodes[a].evs;this.conf.evs_nodes[a]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(b in this.conf)this.conf[b]=null,delete this.conf[b];this.conf=null;"function"==typeof window.addEventListener?this.list.removeEventListener("scroll",this._doOnListScroll,!1):this.list.detachEvent("onscroll",this._doOnListScroll);this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.modes=this.base=this.list=this.cont=null;for(b in this)"function"==typeof this[b]&&(this[b]=null);h=null};this.DOMelem_input=this.base.firstChild;this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)];this.DOMlist=this.list;this.DOMelem=this.base;this.DOMParent=a;a=null;null!=g&&(null!=g.filter&&("string"==typeof g.filter?this.enableFilteringMode(!0,g.filter,window.dhx4.s2b(g.filter_cache),window.dhx4.s2b(g.filter_sub_load)):this.enableFilteringMode(!0)),null!=g.image_path&&this.setImagePath(g.image_path),null==g.default_image&&null==g.default_image_dis||this.setDefaultImage(g.default_image,g.default_image_dis),(g.items||g.options)&&this.addOption(g.items||g.options),(g.xml||g.json)&&this.load(g.xml||g.json),"undefined"!=typeof g.readonly&&this.readonly(g.readonly),g=null);return this}function dhtmlXComboFromSelect(a){"string"==typeof a&&(a=document.getElementById(a));var b=a.offsetWidth,c=a.getAttribute("name")||null,e=document.createElement("SPAN");a.parentNode.insertBefore(e,a);var g=a.getAttribute("mode")||a.getAttribute("opt_type")||"option",b=new dhtmlXCombo(e,c,b,g);(c=a.getAttribute("imagePath"))&&b.setImagePath(c);c=a.getAttribute("defaultImage");e=a.getAttribute("defaultImageDis");1==window.dhx4.s2b(e)&&(e=!0);null==c&&null==e||b.setDefaultImage(c,e);c=b._xmlToObj([a],!0,a.selectedIndex);0<c.options.length&&b.addOption(c.options);a.parentNode.removeChild(a);return b}dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a;this.base.childNodes[1].name=a;this.base.childNodes[2].name=a.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(a){window.dhx4.s2b(a)?(this.base.firstChild.setAttribute("readOnly","true"),this.conf.ro_mode=!0):(this.base.firstChild.removeAttribute("readOnly"),this.conf.ro_mode=!1)};dhtmlXCombo.prototype.setPlaceholder=function(a){if("undefined"==typeof a||null==a)a="";this.base.firstChild.setAttribute("placeholder",String(a))};dhtmlXCombo.prototype.setTemplate=function(a){for(var b in a)"undefined"!=typeof this.conf.template[b]&&(this.conf.template[b]="header"==b?window.dhx4.s2b(a[b]):String(a[b]));null!=a.columns?this._mcMakeTemplate(a.columns):this._mcDetachHeader();for(b in this.t)this.t[b].obj.setText(this.t[b].item,this.t[b].item._conf.text);this._confirmSelect()};dhtmlXCombo.prototype.setSkin=function(a){a!=this.conf.skin&&(this.conf.skin=a,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin+(null!=this.hdr?" dhxcombolist_multicolumn":""),null!=this.hdr&&(this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"),this.conf.i_ofs="material"==a?26:23,this._adjustBase())};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(a){for(var b=0;b<this.list.childNodes.length;b++)a.apply(window,[this._getOption(this.list.childNodes[b]._optId,b)])};dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()};dhtmlXCombo.prototype.setFontSize=function(a,b){null!=a&&(this.base.firstChild.style.fontSize=a);null!=b&&(this.list.style.fontSize=b)};dhtmlXCombo.prototype.getOption=function(a){for(var b=null,c=null,e=0;e<this.list.childNodes.length;e++)if(null==b){var g=this.list.childNodes[e]._optId;this.t[g].obj.getValue(this.t[g].item)==a&&(b=g,c=e)}return null==b?null:this._getOption(b,c)};dhtmlXCombo.prototype.getOptionByIndex=function(a){return 0>a||null==this.list.childNodes[a]?null:this._getOption(this.list.childNodes[a]._optId,a)};dhtmlXCombo.prototype.getOptionByLabel=function(a){for(var b=null,c=null,e=0;e<this.list.childNodes.length;e++)if(null==b){var g=this.list.childNodes[e]._optId;this.t[g].obj.getText(this.t[g].item,!0)==a&&(b=g,c=e)}return null==b?null:this._getOption(b,c)};dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.getIndexByValue=function(a){a=this.getOption(a);return null!=a?a.index:-1};dhtmlXCombo.prototype.setComboText=function(a){1==this.conf.allow_free_text&&(this.unSelectOption(),this.conf.last_text=this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())};dhtmlXCombo.prototype.setComboValue=function(a){var b=this.getOption(a);null!=b?this.selectOption(b.index):(this.conf.last_value=a,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")};dhtmlXCombo.prototype.selectOption=function(a,b,c){0>a||a>=this.list.childNodes.length||(this._setSelected(this.list.childNodes[a]._optId,this._isListVisible(),!0),this._confirmSelect("script"))};dhtmlXCombo.prototype.unSelectOption=function(){null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null);this.base.firstChild.value="";0!=this.conf.f_mode&&this._filterOpts(!0);this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};dhtmlXCombo.prototype.enable=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.conf.enabled!=a&&((this.conf.enabled=a)?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))};dhtmlXCombo.prototype.disable=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.enable(!a)};dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled};dhtmlXCombo.prototype.show=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.base.style.display=1==a?"":"none"};dhtmlXCombo.prototype.hide=function(a){"undefined"==typeof a&&(a=!0);this.show(!a)};dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display};dhtmlXCombo.prototype.setFilterHandler=function(a){"function"==typeof a?(this.conf.f_func=a,this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):"string"==typeof a&&"function"==typeof window[a]?(this.conf.f_func=window[a],this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):this.conf.f_func=null};dhtmlXCombo.prototype.enableFilteringMode=function(a,b,c,e){1==a||"between"==a?(this.conf.f_mode=1==a?"start":"between",b?(this.conf.f_url=b,this.conf.f_cache=window.dhx4.s2b(c),this.conf.f_dyn=window.dhx4.s2b(e)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)};dhtmlXCombo.prototype.filter=function(a,b){for(var c=0;c<this.list.childNodes.length;c++){var e=a.apply(window,[this._getOption(this.list.childNodes[c]._optId,c)]);this.list.childNodes[c].style.display=!0===e?"":"none"}"undefined"!=typeof b&&1!=b||this._showList(!0)};dhtmlXCombo.prototype.sort=function(a){for(var b=[],c=0;c<this.list.childNodes.length;c++){var e=this.list.childNodes[c]._optId;b.push([e,this._getOption(e,c)])}if("asc"==a||"desc"==a)k=!0,b.sort(function(b,c){b=b[1].text_option.toLowerCase();c=c[1].text_option.toLowerCase();var e="asc"==a?1:-1;return b>c?e:-1*e});else if("function"==typeof a||"function"==typeof window[a])"function"==typeof window[a]&&(a=window[a]),b.sort(function(b,c){return a.apply(window,[b[1],c[1]])});for(;0<this.list.childNodes.length;)this.list.removeChild(this.list.lastChild);for(c=0;c<b.length;c++)this.list.appendChild(this.t[b[c][0]].item)};dhtmlXCombo.prototype.enableAutocomplete=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.conf.f_ac=a};dhtmlXCombo.prototype.disableAutocomplete=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.enableAutocomplete(!a)};dhtmlXCombo.prototype.allowFreeText=function(a,b){this.conf.allow_free_text="undefined"==typeof a?!0:window.dhx4.s2b(a);this.conf.free_text_empty="undefined"==typeof b?!1:window.dhx4.s2b(b)};dhtmlXCombo.prototype._checkForMatch=function(a){for(var b=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),c=null,e=this.list.firstChild;null!=e;){if(""==e.style.display&&null!=e._optId){var g=window.dhx4.trim(this.t[e._optId].obj.getText(e,!0)).toLowerCase();b==g&&(c=e._optId,e=null)}null!=e&&(e=e.nextSibling)}if(null==this.conf.last_match)if(null!=c)this._setSelected(c,!0,!0),this.conf.last_match=c;else{if("between"!=this.conf.f_mode||1==a)this._setSelected(null,!0,!0),this.conf.last_match=null}else null!=c?c!=this.conf.last_match&&(this._setSelected(c,!0,!0),this.conf.last_match=c):(this._setSelected(null,!0,!0),this.conf.last_match=null)};dhtmlXCombo.prototype._selectRange=function(a,b){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,a,b)};dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(a){0==this._getListVisibleCount()?a&&this._isListVisible()&&this._hideList():this._isListVisible()?this._checkListHeight():(this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.zIndex=Number(this.list.style.zIndex)+1),this.list.style.visibility="hidden",this.list.style.display="",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility=this.list.style.visibility,this.hdr.style.display=this.list.style.display),a=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0,this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+a+this.base.offsetHeight-1+"px",this.list.style.left=window.dhx4.absLeft(this.base)+"px",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.width=this.list.style.width,this.hdr.style.left=this.list.style.left,this.hdr.style.top=parseInt(this.list.style.top)-a+"px"),this._checkListHeight(),this.list.style.visibility="visible",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility="visible"),this.callEvent("onOpen",[]))};dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.display="none"),this.conf.clear_click=!1,this.callEvent("onClose",[]))};dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display};dhtmlXCombo.prototype._getListVisibleCount=function(){for(var a=0,b=0;b<this.list.childNodes.length;b++)a+=""==this.list.childNodes[b].style.display?1:0;return a};dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h)for(var a=this.list.firstChild;null!=a;)""==a.style.display?(this.conf.item_h=a.offsetHeight+(null!=this.hdr?-1:0),a=null):a=a.nextSibling;var b=window.dhx4.screenDim(),a=window.dhx4.absTop(this.base),c=this.base.offsetHeight,e=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0,g=Math.max(0,Math.floor((a-e-b.top)/this.conf.item_h)),b=Math.max(0,Math.floor((b.bottom-(a+c+e))/this.conf.item_h)),h=this._getListVisibleCount();b<Math.min(this.conf.opts_count_min,h)&&g>b&&(b=null);var g=Math.min(null==b?g:b,this.conf.opts_count,h),l=this.conf.sp[this.conf.skin][null!=this.hdr&&1==this.conf.template.header?"hdr_ofs":"list_ofs"];this.list.style.height=g<h?g*this.conf.item_h+"px":"";this.list.style.top=(null==b?a-this.list.offsetHeight+l:a+c+e-l)+"px";null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.top=(null==b?a-e-this.list.offsetHeight+l:a+c-l)+"px")}};dhtmlXCombo.prototype._scrollToItem=function(a){var b=this.t[a].item.offsetTop;a=b+this.t[a].item.offsetHeight;var c=this.list.scrollTop,e=c+this.list.clientHeight;b<c?this.list.scrollTop=b+(null!=this.hdr&&1==this.conf.template.header?1:0):a>e&&(this.list.scrollTop=a-this.list.clientHeight+(null!=this.hdr&&1==this.conf.template.header?-this.conf.sp[this.conf.skin].scr_ofs:0))};dhtmlXCombo.prototype._setSelected=function(a,b,c,e){this.conf.temp_selected=null;c&&this._updateTopImage(a);null!=a&&this.conf.last_hover==a?b&&this._scrollToItem(a):(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,null==a&&this.callEvent("onSelectionChange",[])),null!=a&&(this.t[a].obj.setSelected(this.t[a].item,!0),this.conf.last_hover=a,1!=e&&(this.conf.temp_selected=a,this.callEvent("onSelectionChange",[])),"select"==this.conf.s_mode&&this.t[a].item==this.t[a].item.parentNode.lastChild&&this._subloadRequest(),b&&this._scrollToItem(a)))};dhtmlXCombo.prototype._subloadRequest=function(){if(null!=this.conf.f_url&&1==this.conf.f_dyn&&0==this.conf.f_dyn_end){var a="mask\x3d"+encodeURIComponent(this.conf.f_mask)+"\x26pos\x3d"+this.list.childNodes.length,b=this,c=function(a){b.conf.f_cache&&b.conf.f_cache_data[b.conf.f_mask].data.push(a.xmlDoc.responseXML);var e=b.list.childNodes.length;b.conf.f_loading=!0;b.load(a.xmlDoc.responseXML);b.conf.f_loading=!1;e==b.list.childNodes.length&&(b.conf.f_dyn_end=!0,b.conf.f_cache&&(b.conf.f_cache_data[b.conf.f_mask].dyn_end=!0));c=b=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,a,c):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(0<=String(this.conf.f_url).indexOf("?")?"\x26":"?")+a,c)}};dhtmlXCombo.prototype.addOption=function(a,b,c,e,g){var h=null;if(a instanceof Array)for(g=0;g<a.length;g++)"undefined"!=typeof a[g]&&(a[g]instanceof Array?(b=this._renderOption({value:a[g][0],text:a[g][1],css:a[g][2],img:a[g][3]}),null==h&&1==window.dhx4.s2b(a[g][4])&&(h=b)):(b=this._renderOption(a[g]),null==h&&1==window.dhx4.s2b(a[g].selected)&&(h=b)));else b=this._renderOption({value:a,text:b,css:c,img:e}),null==h&&1==window.dhx4.s2b(g)&&(h=b);null!=h&&(this._setSelected(h,this._isListVisible(),!0),this._confirmSelect("onInit"))};dhtmlXCombo.prototype.updateOption=function(a,b,c,e){a=this._getOptionId(a);null!=a&&(this.t[a].obj.update(this.t[a].item,{value:b,text:c,css:e}),this.conf.last_selected==a&&(this.conf.last_text=this.base.firstChild.value=this.t[a].obj.getText(this.t[a].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))};dhtmlXCombo.prototype.deleteOption=function(a){for(var b in this.t)this.t[b].obj.getValue(this.t[b].item)==a&&this._removeOption(b);this._isListVisible()&&this._showList(!0)};dhtmlXCombo.prototype.clearAll=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);for(var b in this.t)this._removeOption(b);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover);this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;1==a&&this._hideList()};dhtmlXCombo.prototype._renderOption=function(a){var b=window.dhx4.newId(),c=document.createElement("DIV");c._optId=b;c._tpl=this.conf.template;"undefined"==typeof a.img&&"undefined"!=typeof a.img_src&&(a.img=a.img_src,delete a.img_src);"undefined"==typeof a.img_dis&&"undefined"!=typeof a.img_src_dis&&(a.img_dis=a.img_src_dis,delete a.img_src_dis);a.img_path=this.conf.img_path;a.img_def=this.conf.img_def;a.img_def_dis=this.conf.img_def_dis;this.list.appendChild(c);var e=this._isListVisible()&&1==window.dhx4.isFF;1==e&&--this.list.scrollTop;null!=this.hdr&&(a.multicol=!0);this.t[c._optId]={obj:this.modes[this.conf.opts_type].render(c,a),item:c,conf:{type:this.conf.opts_type}};1==e&&(this.list.scrollTop+=1);return b};dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item);this.t[a].obj=null;this.t[a].item.parentNode.removeChild(this.t[a].item);this.t[a].item=null;this.t[a].conf=null;this.t[a]=null;delete this.t[a];this.conf.last_hover==a&&(this.conf.last_hover=null);this.conf.last_selected==a&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))};dhtmlXCombo.prototype._confirmSelect=function(a,b){var c=!1;"undefined"==typeof b&&(b=!0);this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);if(null!=this.conf.last_hover)c=c||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else if(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value)c=c||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true";else{this._cancelSelect(!0);this._updateTopImage(this.conf.last_selected);return}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=a&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length));b&&this._hideList();1==c&&"onInit"!=a&&"onDelete"!=a&&(this.callEvent("onSelectionChange",[]),this.callEvent("onChange",[this.conf.last_value,this.conf.last_text]))};dhtmlXCombo.prototype._cancelSelect=function(a){this._hideList();1==a&&0==this.conf.allow_free_text&&1==this.conf.free_text_empty?(this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="",this.base.childNodes[2].value="false"):this.base.firstChild.value=this.conf.last_text;0!=this.conf.f_mode&&this._filterOpts(!0)};dhtmlXCombo.prototype._getOption=function(a,b){if(!this.t[a])return null;"undefined"==typeof b&&(b=-1);if(0>b)for(var c=0;c<this.list.childNodes.length;c++)0>b&&this.list.childNodes[c]._optId==a&&(b=c);c={value:this.t[a].obj.getValue(this.t[a].item),text:this.t[a].obj.getText(this.t[a].item),text_input:this.t[a].obj.getText(this.t[a].item,!0),text_option:this.t[a].obj.getText(this.t[a].item,null,!0),css:this.t[a].obj.getCss(this.t[a].item),selected:a==this.conf.last_selected,index:b};if("function"==typeof this.t[a].obj.getExtraData){var e=this.t[a].obj.getExtraData(this.t[a].item),g;for(g in e)"undefined"==typeof c[g]&&(c[g]=e[g])}return c};dhtmlXCombo.prototype._getOptionProp=function(a,b,c){return null!=a&&(a=this._getOption(a),null!=a)?a[b]:c};dhtmlXCombo.prototype._getOptionId=function(a){for(var b=null,c=0;c<this.list.childNodes.length;c++)if(null==b){var e=this.list.childNodes[c]._optId;a==this.t[e].obj.getValue(this.t[e].item)&&(b=e)}return b};dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)};dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this._adjustBase()};dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px";this.base.firstChild.style.marginLeft=this.conf.combo_image?this.conf.i_ofs+"px":"0px"};dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=parseInt(a)||null};dhtmlXCombo.prototype.setOptionIndex=function(a,b){if(!(isNaN(b)||0>b)){var c=this.getOption(a);null!=c&&b!=c.index&&(c=this.list.childNodes[c.index],c.parentNode.removeChild(c),null!=this.list.childNodes[b]?this.list.insertBefore(c,this.list.childNodes[b]):this.list.appendChild(c))}};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};dhtmlXCombo.prototype._mcMakeTemplate=function(a){for(var b="",c="",e=this.conf.col_w=0;e<a.length;e++){var g=Number(parseInt(a[e].width)||50),h=a[e].css||"",l=0==e&&1==window.dhx4.isIE6?"_first":"",c=c+("\x3cdiv class\x3d'dhxcombo_cell"+l+" "+h+"' style\x3d'width:"+g+"px;'\x3e\x3cdiv class\x3d'dhxcombo_cell_text'\x3e"+(a[e].option||"\x26nbsp;")+"\x3c/div\x3e\x3c/div\x3e"),b=b+("\x3cdiv class\x3d'dhxcombo_hdrcell"+l+" "+h+"' style\x3d'width:"+g+"px;'\x3e\x3cdiv class\x3d'dhxcombo_hdrcell_text'\x3e"+(a[e].header||"\x26nbsp;")+"\x3c/div\x3e\x3c/div\x3e");this.conf.col_w+=g+1}g=500;a=document.createElement("DIV");a.style.position="absolute";a.style.top="10px";a.style.left=2*-g+"px";a.style.width=g+"px";a.style.height="50px";a.style.overflowY="scroll";a.innerHTML="\x3cdiv\x3e\x26nbsp;\x3c/div\x3e";document.body.appendChild(a);this.conf.col_w+=g-a.firstChild.offsetWidth+10;a.parentNode.removeChild(a);this.conf.template.option=c;this._mcAttachHeader(b);this.list.className+=" dhxcombolist_multicolumn"};dhtmlXCombo.prototype._mcAttachHeader=function(a){null==this.hdr&&(this.hdr=document.createElement("DIV"),this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr",this.hdr.style.display="none",this.list.parentNode.insertBefore(this.hdr,this.list),"function"==typeof window.addEventListener?this.hdr.addEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.attachEvent("onmousedown",this._doOnListMouseDown),"checkbox"==this.conf.opts_type&&1==this.conf.combo_image&&(this.conf.combo_image=!1,null!=this.base.lastChild.className.match(/dhxcombo_top_image/)&&this.base.removeChild(this.base.lastChild),this._adjustBase()));this.hdr.innerHTML="\x3cdiv class\x3d'dhxcombo_hdrtext'\x3e"+a+"\x3c/div\x3e"};dhtmlXCombo.prototype._mcDetachHeader=function(){null!=this.hdr&&("function"==typeof window.addEventListener?this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.detachEvent("onmousedown",this._doOnListMouseDown),this.hdr.parentNode.removeChild(this.hdr),this.hdr=null);this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(a,b,c,e){var g=0<=a&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null;if(null==g||"function"!=typeof this.t[g].obj[b])return null;for(var h=[this.t[g].item],l=2;l<arguments.length;l++)h.push(arguments[l]);return this.t[g].obj[b].apply(this.t[g].obj,h)};function dhtmlXComboExtend(a,b){for(var c in dhtmlXCombo.prototype.modes[b])"undefined"==typeof dhtmlXCombo.prototype.modes[a][c]&&(dhtmlXCombo.prototype.modes[a][c]=dhtmlXCombo.prototype.modes[b][c])}dhtmlXCombo.prototype.modes.option={image:!1,html:!1,option_css:"dhxcombo_option_text",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="\x3cdiv class\x3d'"+this.option_css+"'\x3e\x26nbsp;\x3c/div\x3e";null!=b.css&&(a.lastChild.style.cssText=b.css,a._conf.css=b.css);this.setText(a,b.text);return this},destruct:function(a){a._conf=null},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text)},setText:function(a,b,c){a._conf.text=b;b="object"==typeof b?window.dhx4.template(a._tpl.option,this.replaceHtml(a._conf.text,c),!0):window.dhx4.trim(this.replaceHtml(a._conf.text,c)||"");a.lastChild.innerHTML=0==b.length?"\x26nbsp;":b},getText:function(a,b,c){return window.dhx4.s2b(b)&&"object"==typeof a._conf.text?window.dhx4.template(a._tpl.input,a._conf.text,!0):window.dhx4.s2b(c)&&"object"==typeof a._conf.text?window.dhx4.template(a._tpl.option,a._conf.text,!0):a._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,b){a.className="dhxcombo_option"+(b?" dhxcombo_option_selected":"")},isSelected:function(a){return 0<=String(a.className).indexOf("dhxcombo_option_selected")},getExtraData:function(a){return{type:"option"}},replaceHtml:function(a,b){if(1==this.html)return a;if("undefined"==typeof b||null==b)b={};if("object"==typeof a){var c={},e;for(e in a)c[e]=1==b[e]?a[e]:this.replaceHtml(a[e])}else c=(a||"").replace(/[\<\>\&\s]/g,function(a){switch(a){case "\x3c":return"\x26lt;";case "\x3e":return"\x26gt;";case "\x26":return"\x26amp;";case " ":return"\x26nbsp;"}return a});return c}};dhtmlXCombo.prototype.modes.checkbox={image:!0,html:!1,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(a,b){null==this.image_css_regexp&&(this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*")));a._conf={value:b.value,css:"",checked:window.dhx4.s2b(b.checked)};a.className="dhxcombo_option";var c={};1==b.multicol?(b.text.checkbox="\x3cdiv class\x3d'"+String(this.image_css).replace("#state#",a._conf.checked?"1":"0")+"'\x3e\x3c/div\x3e\x26nbsp;",c.checkbox=!0,a.innerHTML="\x3cdiv class\x3d'"+dhtmlXCombo.prototype.modes.option.option_css+"'\x3e\x3c/div\x3e"):a.innerHTML="\x3cdiv class\x3d'"+String(this.image_css).replace("#state#",a._conf.checked?"1":"0")+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'"+this.option_css+"'\x3e\x26nbsp;\x3c/div\x3e";null!=b.css&&(a.lastChild.style.cssText+=b.css,a._conf.css=b.css);this.setText(a,b.text,c);return this},setChecked:function(a,b){a._conf.checked=window.dhx4.s2b(b);var c=String(this.image_css).replace("#state#",a._conf.checked?"1":"0");this._changeChbxCss(a.childNodes,c)},_changeChbxCss:function(a,b){for(var c=0;c<a.length;c++)null!=a[c].tagName&&null!=a[c].className&&null!=a[c].className.match(this.image_css_regexp)?a[c].className=b:0<a[c].childNodes.length&&this._changeChbxCss(a[c].childNodes,b)},isChecked:function(a){return 1==a._conf.checked},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(a,b,c){var e=!0;for(b=b.target||b.srcElement;1==e&&null!=b&&b!=a&&null!=b.className;)null!=b.className.match(this.image_css_regexp)?(e=[a._conf.value,!a._conf.checked],!0===c.callEvent("onBeforeCheck",e)&&(this.setChecked(a,!this.isChecked(a)),c.callEvent("onCheck",e)),e=!1):b=b.parentNode;return e},getTopImage:function(a,b){return""},topImageClick:function(a,b){return!0}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(a,b){this.doWithItem(a,"setChecked",b)};dhtmlXCombo.prototype.getChecked=function(a){a=[];for(var b=0;b<this.list.childNodes.length;b++)this.isChecked(b)&&a.push(this._getOptionProp(this.list.childNodes[b]._optId,"value",""));return a};dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")};dhtmlXCombo.prototype.modes.image={image:!0,html:!1,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="\x3cdiv class\x3d'"+this.image_css+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'"+this.option_css+"'\x3e\x26nbsp;\x3c/div\x3e";null!=b.css&&(a.lastChild.style.cssText+=b.css,a._conf.css=b.css);this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis);return this},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis)},setImage:function(a,b,c,e,g,h){b=null!=b&&0<b.length?e+b:null!=g&&0<g.length?e+g:null;c=null!=c&&0<c.length?e+c:null!=h&&0<h.length?e+h:1==h?b:null;a._conf.img=b;a._conf.img_dis=c;a.firstChild.style.backgroundImage=null!=b?"url("+b+")":"none"},getExtraData:function(a){return{type:"image"}},getTopImage:function(a,b){var c=b?"img":"img_dis";return null!=a&&null!=a._conf[c]?"\x3cdiv class\x3d'"+this.image_css+"' style\x3d'background-image:url("+a._conf[c]+");'\x3e\x3c/div\x3e":""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(a,b){null!=a&&(this.conf.img_def=a);null!=b&&(this.conf.img_def_dis=b)};dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a};function dhtmlXWindows(a){var b=this,c={};if("undefined"!=typeof a)for(var e in a)c[e]=a[e];a=null;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"material",vp_pos_ofs:20,vp_custom:!1,vp_of_auto:"auto"==c.vp_overflow,vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:!1,dblclick_ev:window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8,fr_cover:0<=navigator.userAgent.indexOf("MSIE 6.0")};a=window.dhx4.transDetect();this.conf.tr={prop:a.transProp,ev:a.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"};c.viewport?null!=c.viewport.object?this.attachViewportTo(c.viewport.object):null!=c.viewport.left&&null!=c.viewport.top&&null!=c.viewport.width&&null!=c.viewport.height?this.setViewport(c.viewport.left,c.viewport.top,c.viewport.width,c.viewport.height,c.viewport.parent):this.attachViewportTo(document.body):this.attachViewportTo(document.body);this.w={};this.createWindow=function(a,b,c,e,n){var g={};if(1==arguments.length&&"object"==typeof a)g=a;else{g.id=a;g.left=b;g.top=c;g.width=e;g.height=n;if("undefined"==typeof g.id||null==g.id)g.id=window.dhx4.newId();for(;null!=this.w[g.id];)g.id=window.dhx4.newId()}null==g.left&&(g.left=0);null==g.top&&(g.top=0);g.move=null!=g.move&&0==window.dhx4.s2b(g.move)?!1:null!=g.deny_move&&1==window.dhx4.s2b(g.deny_move)?!1:!0;g.park=null!=g.park&&0==window.dhx4.s2b(g.park)?!1:null!=g.deny_park&&1==window.dhx4.s2b(g.deny_park)?!1:!0;g.resize=null!=g.resize&&0==window.dhx4.s2b(g.resize)?!1:null!=g.deny_resize&&1==window.dhx4.s2b(g.deny_resize)?!1:!0;g.keep_in_viewport=null!=g.keep_in_viewport&&window.dhx4.s2b(g.keep_in_viewport);g.modal=null!=g.modal&&window.dhx4.s2b(g.modal);g.center=null!=g.center&&window.dhx4.s2b(g.center);g.text=null!=g.text?g.text:null!=g.caption?g.caption:"dhtmlxWindow";g.header=!(null!=g.header&&0==window.dhx4.s2b(g.header));var h=document.createElement("DIV");h.className="dhxwin_active";this.vp.appendChild(h);h._isWindow=!0;h._idd=g.id;var l=document.createElement("DIV");l.className="dhxwin_hdr";l.style.zIndex=0;l.innerHTML="\x3cdiv class\x3d'dhxwin_icon'\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxwin_text'\x3e\x3cdiv class\x3d'dhxwin_text_inside'\x3e"+g.text+"\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxwin_btns'\x3e\x3c/div\x3e";h.appendChild(l);l.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};l.oncontextmenu=function(a){a=a||event;a.cancelBubble=!0;return!1};l._isWinHdr=!0;l.firstChild._isWinIcon=!0;var m=document.createElement("DIV");m.className="dhxwin_brd";h.appendChild(m);var x=document.createElement("DIV");x.className="dhxwin_fr_cover";x.innerHTML="\x3ciframe class\x3d'dhxwin_fr_cover_inner' frameborder\x3d'0' border\x3d'0'\x3e\x3c/iframe\x3e\x3cdiv class\x3d'dhxwin_fr_cover_inner'\x3e\x3c/div\x3e";h.appendChild(x);this.w[g.id]={win:h,hdr:l,brd:m,fr_cover:x,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,text:g.text,keep_in_vp:g.keep_in_viewport,allow_move:g.move,allow_park:g.park,allow_resize:g.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var h={help:{title:"Help",visible:!1},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}},w;for(w in h)m=new dhtmlXWindowsButton(this,g.id,w,h[w].title,!1),0==h[w].visible&&m.hide(),l.lastChild.appendChild(m.button),this.w[g.id].b[w]=m,m=null;this._winAdjustTitle(g.id);this.w[g.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[g.id].conf.z_id);l=new dhtmlXWindowsCell(g.id,this);this.w[g.id].win.insertBefore(l.cell,x);this.w[g.id].cell=l;"function"==typeof window.addEventListener?(this.w[g.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[g.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[g.id].win.addEventListener("dblclick",this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(this.w[g.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(this.w[g.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),this.w[g.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(this.w[g.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[g.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&this.w[g.id].win.attachEvent("ondblclick",this._winOnMouseDown));this._winInitFRM(g.id);this._winSetPosition(g.id,g.left,g.top);this._winSetSize(g.id,g.width,g.height);this._winMakeActive(g.id);1==g.center&&this.w[g.id].cell.center();1==g.modal&&this.w[g.id].cell.setModal(!0);0==g.header&&this.w[g.id].cell.hideHeader();f=h=l=m=x=l=null;return this.w[g.id].cell};this._winOnMouseDown=function(a){a=a||event;var c=a.target||a.srcElement,e={press_type:a.type};if("MSPointerDown"!=a.type&&"pointerdown"!=a.type)if(1==b.conf.ev_skip)b.conf.ev_skip=!1;else{for(;null!=c&&1!=c._isWindow;)"undefined"!=typeof c.className&&null==e.mode&&("undefined"!=typeof c._buttonName?(e.mode="button",e.button_name=c._buttonName):1==c._isWinHdr?e.mode="hdr":1==c._isWinIcon&&(e.mode="icon")),c=c.parentNode;null==e.mode&&(e.mode="win");e.id=null!=c&&1==c._isWindow?c._idd:null;null!=e.id&&null!=b.w[e.id]&&b.callEvent("_winMouseDown",[a,e])}};this._winOnParkTrans=function(a){a.stopPropagation&&a.stopPropagation();var c=b.w[this._idd];"opacity"==a.propertyName&&b._winCellClearOpacity(this._idd);"height"==a.propertyName&&"park"==c.conf.tr_mode&&"park"==c.conf.tr_mode&&(c.win.style[b.conf.tr.prop]="",c.conf.parked?(c.hdr.style.zIndex=3,b._callMainEvent("onParkUp",this._idd)):(b._winAdjustCell(this._idd),b._callMainEvent("onParkDown",this._idd),c.conf.keep_in_vp&&b._winAdjustPosition(this._idd,c.conf.x,c.conf.y)))};this.unload=function(){this.conf.unloading=!0;this._dndInitModule&&this._dndUnloadModule();for(var a in this.w)this._winClose(a);this.w=null;null!=this.cm&&"function"==typeof this._unloadContextMenu&&this._unloadContextMenu();window.dhx4._eventable(this,"clear");this.attachViewportTo(null);for(a in this.conf)this.conf[a]=null,delete this.conf[a];for(a in this)this[a]=null;b=null};window.dhx4._eventable(this);this.attachEvent("_winMouseDown",this._winMouseDownHandler);this._dndInitModule&&this._dndInitModule();if(null!=c.wins)for(a=0;a<c.wins.length;a++)this.createWindow(c.wins[a]);c=null;return this}dhtmlXWindows.prototype.forEachWindow=function(a){for(var b in this.w)a.apply(window,[this.w[b].cell])};dhtmlXWindows.prototype.window=function(a){return null!=this.w[a]?this.w[a].cell:null};dhtmlXWindows.prototype.isWindow=function(a){return null!=this.w[a]};dhtmlXWindows.prototype.findByText=function(a){var b=[],c;for(c in this.w)0<=this.w[c].cell.getText().indexOf(String(a))&&b.push(this.w[c]);return b};dhtmlXWindows.prototype.setSkin=function(a){if(a!=this.conf.skin){null!=this.vp&&(this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+a));for(var b in this.w)this.w[b].cell._resetSizeState(),this._winAdjustCell(b),this._winAdjustTitle(b);this.conf.skin=a}};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(!1)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(!0)};dhtmlXWindows.prototype._getTopBottomWin=function(a){var b=null,c;for(c in this.w)if(this.w[c].conf.visible){var e=!1;null!=b&&(e=b.z>this.w[c].win.style.zIndex,a&&(e=!e));if(null==b||e)b={win:this.w[c].cell,z:this.w[c].win.style.zIndex}}return b?b.win:null};dhtmlXWindows.prototype._winMakeActive=function(a,b){if(null==a||!0===b||1!=this.w[a].conf.actv){for(var c=[],e={},g=0;g<this._zOrder.length;g++){var h=this._zOrder[g].name,l=this._zOrder[g].value,m=[],n;for(n in this.w){var q=this.w[n];null==e[n]&&q.conf[h]===l&&1==q.conf.visible&&a!=n&&(window.dhx4.zim.clear(q.conf.z_id),m.push([n,Number(q.win.style.zIndex)]),e[n]=!0);q=null}m.sort(function(a,b){return a[1]<b[1]?1:-1});null!=a&&this.w[a].conf[h]===l&&null==e[a]&&(window.dhx4.zim.clear(this.w[a].conf.z_id),m=[[a,Number(this.w[a].win.style.zIndex)]].concat(m),e[a]=!0);c=c.concat(m)}for(g=c.length-1;0<=g;g--){n=c[g][0];q=this.w[n];q.win.style.zIndex=window.dhx4.zim.reserve(q.conf.z_id);if(q.conf.modal&&null!=this.mcover)for(var r in this.mcover)this.mcover[r].style.zIndex=q.win.style.zIndex;this._winAdjustFRMZIndex(n);null==a&&0==g&&(a=n);q.conf.actv=a==n;q.win.className=q.conf.actv?"dhxwin_active":"dhxwin_inactive";q=null}null!=a&&this.conf.last_active!=a&&this._callMainEvent("onFocus",a);this.conf.last_active=a}};dhtmlXWindows.prototype._zOrder=[{name:"modal",value:!0},{name:"sticked",value:!0},{name:"sticked",value:!1}];dhtmlXWindows.prototype._vpPull={};dhtmlXWindows.prototype._vpOf={};dhtmlXWindows.prototype._vpPullAdd=function(){if(null!=this.vp){var a=null,b;for(b in this._vpPull)this._vpPull[b].vp==this.vp&&(this._vpPull[b].count++,a=b);null==a&&(this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1});this.vp==document.body&&1==this.conf.vp_of_auto&&this._vpOfInit();this._vpOfUpd()}};dhtmlXWindows.prototype._vpPullRemove=function(){if(null==this.vp)return 0;var a=0,b;for(b in this._vpPull)this._vpPull[b].vp==this.vp&&(a=--this._vpPull[b].count,0==a&&(this._vpPull[b].vp=null,this._vpPull[b].count=null,delete this._vpPull[b]));this._vpOfClear();return a};dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=!0};dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=!1;delete this._vpOf[this.conf.vp_of_id];this._vpOfUpd()};dhtmlXWindows.prototype._vpOfUpd=function(){var a=!1,b;for(b in this._vpOf)a=a||this._vpOf[b];1==a?null==document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className+=" dhxwins_vp_auto"):null!=document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,""))};dhtmlXWindows.prototype.attachViewportTo=function(a){var b=this._vpPullRemove();if(this.conf.vp_custom){for(;0<this.vp.childNodes.length;)this.vp.removeChild(this.vp.lastChild);this.vp.parentNode.removeChild(this.vp);this.vp=null}else null!=this.vp&&0==b&&(this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),""));if(null==a)this.vp=null;else{this.vp="string"==typeof a?document.getElementById(a):a;a="dhxwins_vp_"+this.conf.skin;0>this.vp.className.indexOf(a)&&(this.vp.className+=" "+a);for(var c in this.w)this.vp.appendChild(this.w[c].win);this.conf.vp_custom=!1}this.vp==document.body&&(document.body.style.position="static");this._vpPullAdd()};dhtmlXWindows.prototype.setViewport=function(a,b,c,e,g){var h=document.createElement("DIV");h.style.position="absolute";h.style.left=a+"px";h.style.top=b+"px";h.style.width=c+"px";h.style.height=e+"px";"undefined"==typeof g||null==g?g=document.body:"string"==typeof g&&(g=document.getElementById(g));g.appendChild(h);this.attachViewportTo(h);this.conf.vp_custom=!0};dhtmlXWindows.prototype._winSetPosition=function(a,b,c){var e=this.w[a];e.conf.maxed&&(e.conf.lastMX+=b-e.conf.x,e.conf.lastMY+=c-e.conf.y);e.conf.x=b;e.conf.y=c;e.win.style.left=e.conf.x+"px";e.win.style.top=e.conf.y+"px";this._winAdjustFRMPosition(a)};dhtmlXWindows.prototype._winAdjustPosition=function(a,b,c){var e=this.w[a];"undefined"==typeof b&&(b=e.conf.x);"undefined"==typeof c&&(c=e.conf.y);var g=e.conf.keep_in_vp?0:-e.conf.w+this.conf.vp_pos_ofs,h=e.conf.keep_in_vp?this.vp.clientWidth-e.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs;b<g?b=g:b>h&&(b=h);g=e.conf.keep_in_vp?this.vp.clientHeight-e.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs;0>c?c=0:c>g&&(c=g);b==e.conf.x&&c==e.conf.y||this._winSetPosition(a,b,c)};dhtmlXWindows.prototype._winSetSize=function(a,b,c,e,g){var h=this.w[a];b=null!=b?b:h.conf.w;c=null!=c?c:h.conf.h;null==this.conf.ofs_w&&(h.win.style.width=b+"px",h.win.style.height=c+"px",this.conf.ofs_w=h.win.offsetWidth-b,this.conf.ofs_h=h.win.offsetHeight-c);null!=h.conf.min_w&&b<h.conf.min_w&&(b=h.conf.min_w);null!=h.conf.max_w&&b>h.conf.max_w&&(b=h.conf.max_w);!h.conf.parked&&null!=h.conf.min_h&&c<h.conf.min_h&&(c=h.conf.min_h);null!=h.conf.max_h&&c>h.conf.max_h&&(c=h.conf.max_h);h.conf.keep_in_vp&&(b>this.vp.clientWidth&&(b=this.vp.clientWidth),c>this.vp.clientHeight&&(c=this.vp.clientHeight));h.win.style.width=b-this.conf.ofs_w+"px";h.win.style.height=c-this.conf.ofs_h+"px";h.conf.w=b;h.conf.h=c;this._winAdjustFRMSize(a);g&&this._winAdjustPosition(a,h.conf.x,h.conf.y);h.conf.parked||1==e||this._winAdjustCell(a)};dhtmlXWindows.prototype._winMinmax=function(a,b){if(("undefined"==typeof b||this.w[a].conf.maxed!=b)&&0!=this.w[a].conf.allow_resize){var c=this.w[a];c.conf.parked&&this._winPark(a,!1);if(c.conf.maxed)this._winSetSize(a,c.conf.lastMW,c.conf.lastMH),this._winAdjustPosition(a,c.conf.lastMX,c.conf.lastMY),c.conf.maxed=!1;else{var e=0,g=0;null!=c.conf.max_w&&(e=c.conf.x+Math.round(c.conf.w-c.conf.max_w)/2);null!=c.conf.max_h&&(g=Math.max(c.conf.y+Math.round(c.conf.h-c.conf.max_h)/2,0));c.conf.lastMX=c.conf.x;c.conf.lastMY=c.conf.y;c.conf.lastMW=c.conf.w;c.conf.lastMH=c.conf.h;this._winSetSize(a,this.vp.clientWidth,this.vp.clientHeight);this._winAdjustPosition(a,e,g);c.conf.maxed=!0}c.b.minmax.setCss(c.conf.maxed?"minmaxed":"minmax");c.conf.maxed?this._callMainEvent("onMaximize",a):this._callMainEvent("onMinimize",a);this._callMainEvent("onResizeFinish",a)}};dhtmlXWindows.prototype._winShow=function(a,b){1!=this.w[a].conf.visible&&(this.w[a].win.style.display="",this.w[a].conf.visible=!0,1!=b&&null!=this.conf.last_active||this._winMakeActive(a,!0),this._callMainEvent("onShow",a))};dhtmlXWindows.prototype._winHide=function(a,b){0!=this.w[a].conf.visible&&(this.w[a].win.style.display="none",this.w[a].conf.visible=!1,this.w[a].conf.actv&&(this.w[a].conf.actv=!1,this.w[a].win.className="dhxwin_inactive",this._winMakeActive(null,!0)),this._callMainEvent("onHide",a))};dhtmlXWindows.prototype._winPark=function(a,b){if(0!=this.w[a].conf.allow_park&&0!=this.w[a].conf.header){var c=this.w[a];1==b&&!1!==this.conf.tr.prop&&(c.win.style[this.conf.tr.prop]=this.conf.tr[c.conf.parked?"height_open":"height_close"],c.conf.tr_ev||(c.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,!1),c.conf.tr_ev=!0));if(c.conf.parked){c.hdr.className=String(c.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,"");c.hdr.style.zIndex=0;c.conf.parked=!1;c.conf.tr_mode="park";this._winCellSetOpacity(a,"open",b);this._winSetSize(a,c.conf.w,c.conf.lastPH,1==b&&!1!==this.conf.tr.prop);if(1!=b||!1===this.conf.tr.prop)this._callMainEvent("onParkDown",a),c.conf.keep_in_vp&&this._winAdjustPosition(a,c.conf.x,c.conf.y);1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null!=c.cell.cell.className.match(/dhxwin_parked/)&&(c.cell.cell.className=c.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,""))}else{c.conf.lastPH=c.conf.h;c.hdr.className+=" dhxwin_hdr_parked";if(0==b||0==this.conf.tr.prop)c.hdr.style.zIndex=3;c.conf.parked=!0;c.conf.tr_mode="park";this._winCellSetOpacity(a,"close",b);this._winSetSize(a,c.conf.w,c.hdr.offsetHeight+this.conf.ofs_h,1==b&&!1!==this.conf.tr.prop);1==b&&!1!==this.conf.tr.prop||this._callMainEvent("onParkUp",a);1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null==c.cell.cell.className.match(/dhxwin_parked/)&&(c.cell.cell.className+=" dhxwin_parked")}}};dhtmlXWindows.prototype._winCellSetOpacity=function(a,b,c,e){a=this.w[a].cell;for(var g in a.conf.idx)1!={pr1:!0,pr2:!0}[g]&&(1==c&&0!=this.conf.tr.prop&&(a.cell.childNodes[a.conf.idx[g]].style[this.conf.tr.prop]=this.conf.tr["op_"+b]),a.cell.childNodes[a.conf.idx[g]].style.opacity=this.conf.tr["op_v_"+b])};dhtmlXWindows.prototype._winCellClearOpacity=function(a){a=this.w[a].cell;for(var b in a.conf.idx)1!={pr1:!0,pr2:!0}[b]&&0!=this.conf.tr.prop&&(a.cell.childNodes[a.conf.idx[b]].style[this.conf.tr.prop]="")};dhtmlXWindows.prototype._winStick=function(a,b){if("undefined"==typeof b||this.w[a].conf.sticked!=b)this.w[a].conf.sticked=!this.w[a].conf.sticked,this.w[a].b.stick.setCss(this.w[a].conf.sticked?"sticked":"stick"),this._winMakeActive(this.conf.last_active,!0),this.w[a].conf.sticked?this._callMainEvent("onStick",a):this._callMainEvent("onUnStick",a)};dhtmlXWindows.prototype._winClose=function(a){if(!0===this._callMainEvent("onClose",a)||1==this.conf.unloading){var b=this.w[a];b.conf.fs_mode&&b.cell.setToFullScreen(!1);b.conf.modal&&this._winSetModal(a,!1);window.dhx4.zim.clear(b.conf.z_id);null!=this.cm&&null!=this.cm.icon[a]&&this._detachContextMenu("icon",a,null);"function"==typeof window.addEventListener?(b.win.removeEventListener("mousedown",this._winOnMouseDown,!1),b.win.removeEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&b.win.removeEventListener("dblclick",this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(b.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(b.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),b.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(b.win.detachEvent("onmousedown",this._winOnMouseDown),b.win.detachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&b.win.attachEvent("ondblclick",this._winOnMouseDown));for(var c in b.b)this._winRemoveButton(a,c,!0);b.b=null;b.cell._unload();b.cell=null;b.brd.parentNode.removeChild(b.brd);b.brd=null;null!=b.fr_cover&&(b.fr_cover.parentNode.removeChild(b.fr_cover),b.fr_cover=null);null!=b.fr_m_cover&&(b.fr_m_cover.parentNode.removeChild(b.fr_m_cover),b.fr_m_cover=null);b.hdr._isWinHdr=!0;b.hdr.firstChild._isWinIcon=!0;b.hdr.onselectstart=null;b.hdr.parentNode.removeChild(b.hdr);b.hdr=null;for(c in b.conf)b.conf[c]=null,delete b.conf[c];b.conf=null;b.win._idd=null;b.win._isWindow=null;b.win.parentNode.removeChild(b.win);b.win=null;this.w[a]=null;delete this.w[a];this.conf.unloading||this._winMakeActive(null,!0)}};dhtmlXWindows.prototype._winSetModal=function(a,b,c){if(this.w[a].conf.modal!=b){"undefined"==typeof c&&(c=!0);var e=this.w[a];if(1==b&&0==e.conf.modal)null!=this.conf.last_modal&&this._winSetModal(this.conf.last_modal,!1,!1),null==this.mcover?(b=document.createElement("DIV"),b.className="dhxwins_mcover",this.vp.insertBefore(b,e.fr_m_cover||e.win),this.mcover={d:b},this.conf.fr_cover&&(this.mcover.f=document.createElement("IFRAME"),this.mcover.f.className="dhxwins_mcover",this.mcover.f.border=0,this.mcover.f.frameBorder=0,this.vp.insertBefore(this.mcover.f,b))):this.mcover.d.nextSibling!=(e.fr_m_cover||e.win)&&(this.vp.insertBefore(this.mcover.d,e.fr_m_cover||e.win),null!=this.mcover.f&&this.vp.insertBefore(this.mcover.f,this.mcover.d)),e.conf.modal=!0,this.conf.last_modal=a,this._winMakeActive(a,!0);else if(0==b&&1==e.conf.modal&&(e.conf.modal=!1,this.conf.last_modal=null,c&&null!=this.mcover)){for(var g in this.mcover)this.vp.removeChild(this.mcover[g]),this.mcover[g]=null;this.mcover=null}}};dhtmlXWindows.prototype._winMouseDownHandler=function(a,b){var c;if(!(2<=a.button)){if("button"==b.mode)if("mousedown"==b.press_type)this.conf.button_last=b.button_name;else if("mouseup"==b.press_type&&b.button_name==this.conf.button_last||"MSPointerDown"==b.press_type||"pointerdown"==b.press_type)if(this.conf.button_last=null,!0!==this._winButtonClick(b.id,b.button_name,a))return;if(("pointerdown"==b.press_type||"mousedown"==b.press_type||"dblclick"==b.press_type)&&"hdr"==b.mode&&(this.conf.dblclick_active=!1,1==this.conf.dblclick_ev?"dblclick"==b.press_type&&(this.conf.dblclick_active=!0):null==this.conf.dblclick_last?(this.conf.dblclick_last=(new Date).getTime(),this.dblclick_id=b.id):(c=(new Date).getTime(),this.conf.dblclick_last+this.conf.dblclick_tm>c&&this.dblclick_id==b.id?(this.conf.dblclick_active=!0,this.dblclick_id=this.conf.dblclick_last=null):(this.conf.dblclick_last=c,this.dblclick_id=b.id)),this.conf.dblclick_active)){this._winDoHeaderDblClick(b.id);return}"mousedown"!=b.press_type&&b.press_type!=window.dhx4.dnd.evs.start||this._winMakeActive(b.id)}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){"minmax"==this.conf.dblclick_mode?this._winMinmax(a):"park"==this.conf.dblclick_mode?this._winPark(a,!0):"function"==typeof this.conf.dblclick_mode?this.conf.dblclick_mode.apply(window,[a]):"function"==typeof window[this.conf.dblclick_mode]&&window[this.conf.dblclick_mode].apply(window,[a])};dhtmlXWindows.prototype._winAdjustCell=function(a){a=this.w[a];if("material"==this.conf.skin)var b=0,c=a.conf.header?a.hdr.offsetHeight:1,e=a.win.clientWidth,g=a.win.clientHeight-c;else b=1,c=a.conf.header?a.hdr.offsetHeight:1,e=a.win.clientWidth-2,g=a.win.clientHeight-c-1;a.brd.style.left=b+"px";a.brd.style.top=c+"px";null==a.conf.brd&&(a.brd.style.width=e+"px",a.brd.style.height=g+"px",a.conf.brd={w:e-a.brd.offsetWidth,h:g-a.brd.offsetHeight});a.brd.style.width=e+a.conf.brd.w+"px";a.brd.style.height=g+a.conf.brd.h+"px";e=5;"material"==this.conf.skin&&(e=1);b=1+e;c=a.conf.header?c:c+e;e=a.brd.clientWidth;g=a.brd.clientHeight;a.cell._setSize(b,c,e,g);a.fr_cover.style.left=b+"px";a.fr_cover.style.top=c+"px";a.fr_cover.style.width=e+"px";a.fr_cover.style.height=g+"px"};dhtmlXWindows.prototype._winAdjustTitle=function(a){var b=this.w[a].hdr.childNodes[1],c=this.w[a].hdr.childNodes[2],e="material"==this.conf.skin?7:0;b.style.paddingLeft=this.w[a].hdr.childNodes[0].offsetWidth+12+e+"px";b.style.paddingRight=c.offsetWidth+10+e+"px"};dhtmlXWindows.prototype._callMainEvent=function(a,b){var c=this.w[b];return c.cell.checkEvent(a)?c.cell._callMainEvent(a,[c.cell]):this.callEvent(a,[c.cell])};dhtmlXWindows.prototype._winInitFRM=function(a){if(1==this.conf.fr_cover){a=this.w[a];var b=document.createElement("IFRAME");b.className="dhxwin_main_fr_cover";b.border=0;b.frameBorder=0;b.style.zIndex=a.win.style.zIndex;a.win.parentNode.insertBefore(b,a.win);a.fr_m_cover=b}};dhtmlXWindows.prototype._winAdjustFRMSize=function(a){a=this.w[a];null!=a.fr_m_cover&&(a.fr_m_cover.style.width=a.conf.w+"px",a.fr_m_cover.style.height=a.conf.h+"px")};dhtmlXWindows.prototype._winAdjustFRMPosition=function(a){a=this.w[a];null!=a.fr_m_cover&&(a.fr_m_cover.style.left=a.win.style.left,a.fr_m_cover.style.top=a.win.style.top)};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(a){a=this.w[a];null!=a.fr_m_cover&&(a.fr_m_cover.style.zIndex=a.win.style.zIndex)};function dhtmlXWindowsCell(a,b){dhtmlXCellObject.apply(this,[a,"_wins"]);this.wins=b;this.cell._winId=a;this.conf.skin=this.wins.conf.skin;this.attachEvent("_onCellUnload",function(){this._unloadResize&&this._unloadResize();window.dhx4._eventable(this.cell,"clear");e=this.removeUserButton=this.addUserButton=this.button=this._adjustByCont=this.close=this.isModal=this.setModal=this.hideHeader=this.showHeader=this.isOnBottom=this.isOnTop=this.bringToBottom=this.bringToTop=this.centerOnScreen=this.center=this.keepInViewport=this.getMaxDimension=this.setMaxDimension=this.getMinDimension=this.setMinDimension=this.getDimension=this.setDimension=this.isSticked=this.unstick=this.stick=this.isHidden=this.hide=this.show=this.isParkable=this.denyPark=this.allowPark=this.isParked=this.park=this.adjustPosition=this.getPosition=this.setPosition=this.isMaximized=this.minimize=this.maximize=this.isResizable=this.denyResize=this.allowResize=this.isMovable=this.denyMove=this.allowMove=this.getText=this.setText=this.wins=this.cell._winId=null});this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)});this.attachEvent("_onContentMouseDown",function(a,b){this.wins.callEvent("_winMouseDown",[b,{id:a,mode:"win"}])});this._callMainEvent=function(a,b){return this.callEvent(a,b)};this.conf.tr={};for(var c in this.wins.conf.tr)this.conf.tr[c]=this.wins.conf.tr[c];this._initResize&&this._initResize();window.dhx4._eventable(this.cell);var e=this;this.cell.attachEvent("_setCellSize",function(a,b){e.setDimension(a+(e.wins.w[this._winId].conf.w-e.conf.size.w),b+(e.wins.w[this._winId].conf.h-e.conf.size.h))});return this}dhtmlXWindowsCell.prototype=new dhtmlXCellObject;dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].conf.text=a;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text};dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=!0};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=!1};dhtmlXWindowsCell.prototype.isMovable=function(){return 1==this.wins.w[this._idd].conf.allow_move};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=!0;this.wins.w[this._idd].b.minmax.enable()};dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=!1;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return 1==this.wins.w[this._idd].conf.allow_resize};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,!0)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,!1)};dhtmlXWindowsCell.prototype.isMaximized=function(){return 1==this.wins.w[this._idd].conf.maxed};dhtmlXWindowsCell.prototype.setPosition=function(a,b){this.wins._winSetPosition(this._idd,a,b)};dhtmlXWindowsCell.prototype.getPosition=function(){var a=this.wins.w[this._idd];return[a.conf.x,a.conf.y]};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,!0)};dhtmlXWindowsCell.prototype.isParked=function(){return 1==this.wins.w[this._idd].conf.parked};dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=!0;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=!1;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return 1==this.wins.w[this._idd].conf.allow_park};dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};dhtmlXWindowsCell.prototype.isHidden=function(){return 1!=this.wins.w[this._idd].conf.visible};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,!0)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,!1)};dhtmlXWindowsCell.prototype.isSticked=function(){return 1==this.wins.w[this._idd].conf.sticked};dhtmlXWindowsCell.prototype.setDimension=function(a,b){var c=this.wins.w[this._idd];c.conf.parked&&this.wins._winPark(this._idd,!1);c.conf.maxed?(null!=a&&(c.conf.lastMW=a),null!=b&&(c.conf.lastMH=b),this.wins._winMinmax(this._idd)):this.wins._winSetSize(this._idd,a,b,!1,!0)};dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd];return[a.conf.w,a.conf.h]};dhtmlXWindowsCell.prototype.setMinDimension=function(a,b){var c=this.wins.w[this._idd];c.conf.min_w=a;c.conf.min_h=b;this.wins._winSetSize(this._idd,c.conf.w,c.conf.h)};dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd];return[a.conf.min_w,a.conf.min_h]};dhtmlXWindowsCell.prototype.setMaxDimension=function(a,b){var c=this.wins.w[this._idd];c.conf.max_w=a;c.conf.max_h=b;this.wins._winSetSize(this._idd,c.conf.w,c.conf.h)};dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd];return[a.conf.max_w,a.conf.max_h]};dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(a)};dhtmlXWindowsCell.prototype.center=function(){var a=this.wins.vp,b=this.wins.w[this._idd];this.wins._winSetPosition(this._idd,Math.round((a.clientWidth-b.conf.w)/2),Math.round((a.clientHeight-b.conf.h)/2))};dhtmlXWindowsCell.prototype.centerOnScreen=function(){for(var a=this.wins.w[this._idd],b=window.dhx4.screenDim(),c=window.dhx4.absLeft(this.wins.vp),e=window.dhx4.absTop(this.wins.vp),g=this.wins.vp.parentNode;null!=g;)g.scrollLeft&&(c-=g.scrollLeft),g.scrollTop&&(e-=g.scrollTop),g=g.parentNode;this.wins._winAdjustPosition(this._idd,Math.round((b.right-b.left-a.conf.w)/2)-c,Math.round((b.bottom-b.top-a.conf.h)/2)-e);d=null};dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,!0)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active;window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(a,!0)};dhtmlXWindowsCell.prototype.isOnTop=function(){return 1==this.wins.w[this._idd].conf.actv};dhtmlXWindowsCell.prototype.isOnBottom=function(){var a=null,b=Infinity,c;for(c in this.wins.w)this.wins.w[c].conf.visible&&this.wins.w[c].win.style.zIndex<b&&(a=c,b=this.wins.w[c].win.style.zIndex);return a==this._idd};dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];0==a.conf.header&&(a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!0,this.wins._winAdjustCell(this._idd))};dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];1==a.conf.header&&(a.conf.parked&&this.wins._winPark(this._idd,!1),a.hdr.className+=" dhxwin_hdr_hidden",a.brd.className+=" dhxwin_hdr_hidden",this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!1,this.wins._winAdjustCell(this._idd))};dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.isModal=function(){return 1==this.wins.w[this._idd].conf.modal};dhtmlXWindowsCell.prototype._adjustByCont=function(a,b){a+=this.wins.w[this._idd].conf.w-this.conf.size.w;b+=this.wins.w[this._idd].conf.h-this.conf.size.h;this.wins._winSetSize(this._idd,a,b)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+a;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.setToFullScreen=function(a){a=window.dhx4.s2b(a);var b=this.wins.w[this._idd];b.conf.fs_mode!=a&&(null==this.wins.fsn&&(this.wins.fsn=document.createElement("DIV"),this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs",document.body.appendChild(this.wins.fsn)),a?(this.wins.fsn.appendChild(b.win),this.maximize(),this.hideHeader()):(this.wins.vp.appendChild(b.win),this.minimize(),this.showHeader(),0==this.wins.fsn.childNodes.length&&(this.wins.fsn.parentNode.removeChild(this.wins.fsn),this.wins.fsn=null)),b.conf.fs_mode=a)};dhtmlXWindowsCell.prototype.button=function(a){if("minmax1"==a||"minmax2"==a)a="minmax";return this.wins.w[this._idd].b[a]};dhtmlXWindowsCell.prototype.addUserButton=function(a,b,c){c=new dhtmlXWindowsButton(this.wins,this._idd,a,c,!0);var e=null,g=this.wins.w[this._idd].hdr.lastChild;isNaN(b)?b=0:0>b&&(b=0);null!=g.childNodes[b]&&(e=g.childNodes[b]);null!=e?g.insertBefore(c.button,e):g.appendChild(c.button);this.wins.w[this._idd].b[a]=c;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.removeUserButton=function(a){null!=this.wins.w[this._idd].b[a]&&1==this.wins.w[this._idd].b[a].conf.custom&&this.wins._winRemoveButton(this._idd,a)};window.dhtmlXWindowsButton=function(a,b,c,e,g){this.conf={wins:a,winId:b,name:c,enabled:!0,visible:!0,custom:!0};this.button=document.createElement("DIV");this.button._buttonName=c;this.button.title=e;this.enable=function(){this.conf.enabled=!0;this.setCss(this.conf.css)};this.disable=function(){this.conf.enabled=!1;this.setCss(this.conf.css)};this.isEnabled=function(){return 1==this.conf.enabled};this.show=function(){this.button.style.display="";this.conf.visible=!0;this.conf.wins._winAdjustTitle(this.conf.winId)};this.hide=function(){this.button.style.display="none";this.conf.visible=!1;this.conf.wins._winAdjustTitle(this.conf.winId)};this.isHidden=function(){return 0==this.conf.visible};this.setCss=function(a){this.conf.css=a;a=this.conf.enabled?"":"_dis";this.button.className="dhxwin_button"+a+" dhxwin_button_"+this.conf.css+a};this._doOnClick=function(a){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])};this.unload=function(a){dhx4._eventable(this,"clear");this.button._buttonName=null;this.button.parentNode.removeChild(this.button);null!=this.conf.wins.cm&&null!=this.conf.wins.cm.button[this.conf.winId]&&null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]&&this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name);this.unload=this.setCss=this.isHidden=this.hide=this.show=this.isEnabled=this.disable=this.enable=this.button=null;1!=a&&this.conf.wins._winAdjustTitle(this.conf.winId);this.conf.wins=null;this.conf=this.conf.winId=null};this.setCss(c);dhx4._eventable(this);return this};dhtmlXWindows.prototype._winButtonClick=function(a,b,c){if(!this.w[a].b[b].isEnabled())return!0;if(!0===this.w[a].b[b]._doOnClick())return"help"==b&&this._callMainEvent("onHelp",a),"park"==b&&this._winPark(a,!0),"minmax"==b&&this._winMinmax(a),"stick"==b?(this._winStick(a),!1):"close"==b?(this._winClose(a),!1):!0};dhtmlXWindows.prototype._winRemoveButton=function(a,b,c){this.w[a].b[b].unload(c);this.w[a].b[b]=null;delete this.w[a].b[b]};function dhtmlXToolbarObject(a,b){var c=this;this.conf={skin:b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"material",align:"left",align_autostart:"left",icons_path:"",icons_css:!1,iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null,cssShadow:dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_toolbar_shadow"};if("object"==typeof a&&null!=a&&"undefined"==typeof a.tagName){if(null!=a.icons_path||null!=a.icon_path)this.conf.icons_path=a.icons_path||a.icon_path;null!=a.icons_size&&(this.conf.icons_size_autoload=a.icons_size);null!=a.iconset&&(this.conf.icons_css="awesome"==a.iconset);null!=a.json&&(this.conf.json_autoload=a.json);null!=a.xml&&(this.conf.xml_autoload=a.xml);null!=a.onload&&(this.conf.onload_autoload=a.onload);if(null!=a.onclick||null!=a.onClick)this.conf.auto_onclick=a.onclick||a.onClick;null!=a.items&&(this.conf.items_autoload=a.items);null!=a.skin&&(this.conf.skin=a.skin);null!=a.align&&(this.conf.align_autostart=a.align);a=a.parent}for(this.cont="object"!=typeof a?document.getElementById(a):a;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);a=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);this.cont.ontouchstart=function(a){a=a||event;if("input"==String(a.target.tagName||"").toLowerCase())return!0;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};this.setSkin(this.conf.skin);this.objPull={};this.anyUsed=null;this._genStr=function(a){for(var b="dhxId_",c=0;c<a;c++)b+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return b};this.rootTypes="button buttonSelect buttonTwoState separator label slider text buttonInput".split(" ");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0});window.dhx4._eventable(this);this._getObj=function(a,b){for(var c=null,e=0;e<a.childNodes.length;e++)null!=a.childNodes[e].tagName&&String(a.childNodes[e].tagName).toLowerCase()==String(b).toLowerCase()&&(c=a.childNodes[e]);return c};this._addImgObj=function(a){var b=document.createElement(1==this.conf.icons_css?"I":"IMG");0<a.childNodes.length?a.insertBefore(b,a.childNodes[0]):a.appendChild(b);return b};this._setItemImage=function(a,b,c){1==c?a.imgEn=b:a.imgDis=b;!a.state&&1==c||a.state&&0==c||(1==this.conf.icons_css?(c=this._getObj(a.obj,"i"),null==c&&(c=this._addImgObj(a.obj)),c.className=this.conf.icons_path+b):(c=this._getObj(a.obj,"img"),null==c&&(c=this._addImgObj(a.obj)),c.src=this.conf.icons_path+b))};this._clearItemImage=function(a,b){1==b?a.imgEn="":a.imgDis="";if(!(!a.state&&1==b||a.state&&0==b)){var c=this._getObj(a.obj,this.conf.icons_css?"i":"img");null!=c&&c.parentNode.removeChild(c)}};this._setItemText=function(a,b){var c=this._getObj(a.obj,"div");null==b||0==b.length?null!=c&&c.parentNode.removeChild(c):(null==c&&(c=document.createElement("DIV"),c.className="dhxtoolbar_text",a.obj.appendChild(c)),c.innerHTML=b)};this._getItemText=function(a){a=this._getObj(a.obj,"div");return null!=a?a.innerHTML:""};this._enableItem=function(a){if(!a.state){a.state=!0;"buttonTwoState"==this.objPull[a.id].type&&1==this.objPull[a.id].obj.pressed?(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",a.obj.renderAs=a.obj.className);a.arw&&(a.arw.className=String(a.obj.className).replace("btn","arw"));var b=this._getObj(a.obj,this.conf.icons_css?"i":"img");""!=a.imgEn?(null==b&&(b=this._addImgObj(a.obj)),b[this.conf.icons_css?"className":"src"]=this.conf.icons_path+a.imgEn):null!=b&&b.parentNode.removeChild(b)}};this._disableItem=function(a){if(a.state){a.state=!1;a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+("buttonTwoState"==this.objPull[a.id].type&&a.obj.pressed?"pres_":"")+"dis";a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";a.arw&&(a.arw.className=String(a.obj.className).replace("btn","arw"));var b=this._getObj(a.obj,this.conf.icons_css?"i":"img");""!=a.imgDis?(null==b&&(b=this._addImgObj(a.obj)),b[this.conf.icons_css?"className":"src"]=this.conf.icons_path+a.imgDis):null!=b&&b.parentNode.removeChild(b);null!=a.polygon&&"none"!=a.polygon.style.display&&(window.dhx4.zim.clear(a.polygon._idd),a.polygon.style.display="none",a.polygon._ie6cover&&(a.polygon._ie6cover.style.display="none"),"dhx_terrace"==this.conf.skin&&this._improveTerraceButtonSelect(a.id,!0),this.callEvent("onButtonSelectHide",[a.obj.idd]));this.anyUsed=null}};this.clearAll=function(){for(var a in this.objPull)this._removeItem(String(a).replace(this.idPrefix,""))};this._doOnClick=function(a){c&&c.forEachItem&&c.forEachItem(function(a){"buttonSelect"==c.objPull[c.idPrefix+a].type&&(a=c.objPull[c.idPrefix+a],!0===a.arw._skip?a.arw._skip=!1:"none"!=a.polygon.style.display&&(a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",a.obj.className=a.obj.renderAs,a.arw.className=String(a.obj.renderAs).replace("btn","arw"),c.anyUsed=null,c.conf.touch_id=null,window.dhx4.zim.clear(a.polygon._idd),a.polygon.style.display="none",a.polygon._ie6cover&&(a.polygon._ie6cover.style.display="none"),"dhx_terrace"==c.conf.skin&&c._improveTerraceButtonSelect(a.id,!0),c.callEvent("onButtonSelectHide",[a.obj.idd])))})};"undefined"!=typeof window.addEventListener?(window.addEventListener("mousedown",this._doOnClick,!1),window.addEventListener("touchstart",this._doOnClick,!1)):document.body.attachEvent("onmousedown",this._doOnClick);null!=this.conf.icons_size_autoload&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null);null!=this.conf.items_autoload?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):null!=this.conf.json_autoload?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):null!=this.conf.xml_autoload&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=null);this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null);"function"==typeof this.conf.auto_onclick?this.attachEvent("onClick",this.conf.auto_onclick):"string"==typeof this.conf.auto_onclick&&"function"==typeof window[this.conf.auto_onclick]&&this.attachEvent("onClick",window[this.conf.auto_onclick]);return this}dhtmlXToolbarObject.prototype.addSpacer=function(a){var b=this.idPrefix+a;if(null!=this._spacer){if(this._spacer.idd==a)return;if(this._spacer==this.objPull[b].obj.parentNode){for(var c=!0;c;){var e=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(e==a||0==this._spacer.childNodes.length)null!=this.objPull[b].arw&&this.base.appendChild(this.objPull[b].arw),c=!1}this._spacer.idd=a;this._fixSpacer();return}if(this.base==this.objPull[b].obj.parentNode){for(var c=!0,g=null!=this.objPull[b].arw;c;)e=this.base.childNodes.length-1,1==g&&this.base.childNodes[e]==this.objPull[b].arw&&(c=!1),this.base.childNodes[e].idd==a&&(c=!1),c&&(0<this._spacer.childNodes.length?this._spacer.insertBefore(this.base.childNodes[e],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[e]));this._spacer.idd=a;this._fixSpacer();return}}else{b=null;for(e=0;e<this.base.childNodes.length;e++)this.base.childNodes[e]==this.objPull[this.idPrefix+a].obj&&(b=e,null!=this.objPull[this.idPrefix+a].arw&&(b=e+1));if(null!=b){this._spacer=document.createElement("DIV");this._spacer.className="right"==this.conf.align?" dhxtoolbar_float_left":" dhxtoolbar_float_right";this._spacer.dir="ltr";for(this._spacer.idd=a;this.base.childNodes.length>b+1;)this._spacer.appendChild(this.base.childNodes[b+1]);this.cont.appendChild(this._spacer);this._fixSpacer()}}"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;0<this._spacer.childNodes.length;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if("undefined"==typeof window.addEventListener&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null},1)}};dhtmlXToolbarObject.prototype.getType=function(a){var b=this.getParentId(a);if(null!=b){var c=null;a=this.objPull[this.idPrefix+b]._listOptions[a];null!=a&&(c=null!=a.sep?"buttonSelectSeparator":"buttonSelectButton");return c}return null==this.objPull[this.idPrefix+a]?null:this.objPull[this.idPrefix+a].type};dhtmlXToolbarObject.prototype.getTypeExt=function(a){a=this.getType(a);return"buttonSelectButton"==a||"buttonSelectSeparator"==a?"buttonSelectButton"==a?"button":"separator":null};dhtmlXToolbarObject.prototype.inArray=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1};dhtmlXToolbarObject.prototype.getParentId=function(a){var b=null,c;for(c in this.objPull)if(this.objPull[c]._listOptions)for(var e in this.objPull[c]._listOptions)e==a&&(b=String(c).replace(this.idPrefix,""));return b};dhtmlXToolbarObject.prototype._addItem=function(a,b){"string"==typeof a.text&&(a.text=window.dhx4.trim(a.text),0==a.text.length&&(a.text=null));this._addItemToStorage(a,b);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.addButton=function(a,b,c,e,g){this._addItem({id:a,type:"button",text:c,img:e,imgdis:g},b)};dhtmlXToolbarObject.prototype.addText=function(a,b,c){this._addItem({id:a,type:"text",text:c},b)};dhtmlXToolbarObject.prototype.addButtonSelect=function(a,b,c,e,g,h,l,m,n,q){for(var r=[],v=0;v<e.length;v++){var u={};e[v]instanceof Array?(u.id=e[v][0],u.type="obj"==e[v][1]?"button":"separator",u.text=e[v][2]||null,u.img=e[v][3]||null):e[v]instanceof Object&&null!=e[v]&&"undefined"!=typeof e[v].id&&"undefined"!=typeof e[v].type&&(u.id=e[v].id,u.type="obj"==e[v].type?"button":"separator",u.text=e[v].text,u.img=e[v].img);r.push(u)}this._addItem({id:a,type:"buttonSelect",text:c,img:g,imgdis:h,renderSelect:l,openAll:m,options:r,maxOpen:n,mode:q},b)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(a,b,c,e,g){this._addItem({id:a,type:"buttonTwoState",img:e,imgdis:g,text:c},b)};dhtmlXToolbarObject.prototype.addSeparator=function(a,b){this._addItem({id:a,type:"separator"},b)};dhtmlXToolbarObject.prototype.addSlider=function(a,b,c,e,g,h,l,m,n){this._addItem({id:a,type:"slider",length:c,valueMin:e,valueMax:g,valueNow:h,textMin:l,textMax:m,toolTip:n},b)};dhtmlXToolbarObject.prototype.addInput=function(a,b,c,e){this._addItem({id:a,type:"buttonInput",value:c,width:e},b)};dhtmlXToolbarObject.prototype.forEachItem=function(a){for(var b in this.objPull)this.inArray(this.rootTypes,this.objPull[b].type)&&a(this.objPull[b].id.replace(this.idPrefix,""))};(function(){for(var a="isVisible enableItem disableItem isEnabled setItemText getItemText setItemToolTip getItemToolTip getInput setItemImage setItemImageDis clearItemImage clearItemImageDis setItemState getItemState setItemToolTipTemplate getItemToolTipTemplate setValue getValue setMinValue getMinValue setMaxValue getMaxValue setWidth getWidth setMaxOpen".split(" "),b=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],c=function(a,b){return function(c,e,g){c=this.idPrefix+c;return null!=this.objPull[c][a]?this.objPull[c][a].call(this.objPull[c],e,g):b}},e=0;e<a.length;e++){var g=a[e];dhtmlXToolbarObject.prototype[g]=c(g,b[e])}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;null!=this.objPull[a]&&null!=this.objPull[a].showItem&&(this.objPull[a].showItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;null!=this.objPull[a]&&null!=this.objPull[a].hideItem&&(this.objPull[a].hideItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)};dhtmlXToolbarObject.prototype._getPosition=function(a,b){if(null==this.objPull[this.idPrefix+a])return null;for(var c=null,e=0,g=0;g<this.base.childNodes.length;g++)null!=this.base.childNodes[g].idd&&(this.base.childNodes[g].idd==a&&(c=e),e++);if(!c&&null!=this._spacer)for(g=0;g<this._spacer.childNodes.length;g++)null!=this._spacer.childNodes[g].idd&&(this._spacer.childNodes[g].idd==a&&(c=e),e++);return c};dhtmlXToolbarObject.prototype.setPosition=function(a,b){this._setPosition(a,b)};dhtmlXToolbarObject.prototype._setPosition=function(a,b){if(null!=this.objPull[this.idPrefix+a]){var c=null;this._spacer&&(c=this._spacer.idd,this.removeSpacer());isNaN(b)&&(b=this.base.childNodes.length);0>b&&(b=0);var e=this.objPull[this.idPrefix+a];this.base.removeChild(e.obj);e.arw&&this.base.removeChild(e.arw);var g=this._getIdByPosition(b,!0);null==g[0]?(this.base.appendChild(e.obj),e.arw&&this.base.appendChild(e.arw)):(this.base.insertBefore(e.obj,this.base.childNodes[g[1]]),e.arw&&this.base.insertBefore(e.arw,this.base.childNodes[g[1]+1]));null!=c&&this.addSpacer(c)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(a,b){for(var c=null,e=0,g=0,h=0;h<this.base.childNodes.length;h++)null!=this.base.childNodes[h].idd&&null==c&&e++==a&&(c=this.base.childNodes[h].idd),null==c&&g++;return 1==b?[c,null==c?null:g]:c};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype._removeItem=function(a){var b=this.getType(a);a=this.idPrefix+a;var c=this.objPull[a];if(1=={button:1,buttonTwoState:1}[b]){window.dhx4.isIE&&(c.obj.onselectstart=null);this._evs.clear.apply(c,[c.obj.evs,c.obj]);for(var e in c.obj)"function"==typeof c.obj[e]&&(c.obj[e]=null);c.obj.parentNode.removeChild(c.obj);c.obj=null;for(e in c)c[e]=null}if("buttonSelect"==b){for(e in c._listOptions)this.removeListOption(a,e);c._listOptions=null;c.polygon._ie6cover&&(document.body.removeChild(c.polygon._ie6cover),c.polygon._ie6cover=null);c.p_tbl.removeChild(c.p_tbody);c.polygon.removeChild(c.p_tbl);c.polygon.onselectstart=null;document.body.removeChild(c.polygon);window.dhx4.isIE&&(c.obj.onselectstart=null,c.arw.onselectstart=null);this._evs.clear.apply(c,[c.obj.evs,c.obj]);this._evs.clear.apply(c,[c.arw.evs,c.arw]);for(e in c.obj)"function"==typeof c.obj[e]&&(c.obj[e]=null);c.obj.parentNode.removeChild(c.obj);c.obj=null;for(e in c.arw)"function"==typeof c.arw[e]&&(c.arw[e]=null);c.arw.parentNode.removeChild(c.arw);c.arw=null;for(e in c)c[e]=null}"buttonInput"==b&&(c.obj.childNodes[0].onkeydown=null,c.obj.removeChild(c.obj.childNodes[0]),c.obj.w=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.type=null,c.enableItem=null,c.disableItem=null,c.isEnabled=null,c.showItem=null,c.hideItem=null,c.isVisible=null,c.setItemToolTip=null,c.getItemToolTip=null,c.setWidth=null,c.getWidth=null,c.setValue=null,c.getValue=null,c.setItemText=null,c.getItemText=null);if("slider"==b){window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",c.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",c.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",c.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",c.pen._doOnMouseMoveEnd));c.pen.allowMove=null;c.pen.initXY=null;c.pen.maxX=null;c.pen.minX=null;c.pen.nowX=null;c.pen.newNowX=null;c.pen.valueMax=null;c.pen.valueMin=null;c.pen.valueNow=null;c.pen._definePos=null;c.pen._detectLimits=null;c.pen._doOnMouseMoveStart=null;c.pen._doOnMouseMoveEnd=null;c.pen.onmousedown=null;c.obj.removeChild(c.pen);c.pen=null;c.label.tip=null;document.body.removeChild(c.label);c.label=null;c.obj.onselectstart=null;for(c.obj.idd=null;0<c.obj.childNodes.length;)c.obj.removeChild(c.obj.childNodes[0]);c.obj.parentNode.removeChild(c.obj);c.obj=null;c.id=null;c.type=null;c.state=null;c.enableItem=null;c.disableItem=null;c.isEnabled=null;c.setItemToolTipTemplate=null;c.getItemToolTipTemplate=null;c.setMaxValue=null;c.setMinValue=null;c.getMaxValue=null;c.getMinValue=null;c.setValue=null;c.getValue=null;c.showItem=null;c.hideItem=null;c.isVisible=null}"separator"==b&&(c.obj.onselectstart=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.type=null,c.showItem=null,c.hideItem=null,c.isVisible=null);"text"==b&&(c.obj.onselectstart=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.type=null,c.showItem=null,c.hideItem=null,c.isVisible=null,c.setWidth=null,c.setItemText=null,c.getItemText=null);this.objPull[a]=null;delete this.objPull[a]};(function(){for(var a="addListOption removeListOption showListOption hideListOption isListOptionVisible enableListOption disableListOption isListOptionEnabled setListOptionPosition getListOptionPosition setListOptionText getListOptionText setListOptionToolTip getListOptionToolTip setListOptionImage getListOptionImage clearListOptionImage forEachListOption getAllListOptions setListOptionSelected getListOptionSelected".split(" "),b=function(a){return function(b,c,e,g,q,r){b=this.idPrefix+b;if(null!=this.objPull[b]&&"buttonSelect"==this.objPull[b].type)return this.objPull[b][a].call(this.objPull[b],c,e,g,q,r)}},c=0;c<a.length;c++){var e=a[c];dhtmlXToolbarObject.prototype[e]=b(e)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(a,b){return a+b};dhtmlXToolbarObject.prototype._separatorObject=function(a,b,c){this.id=a.idPrefix+b;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=null!=c.hidden?"none":"";this.obj.idd=String(b);this.obj.title=c.title||"";this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.obj.ontouchstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};return this};dhtmlXToolbarObject.prototype._textObject=function(a,b,c){this.id=a.idPrefix+b;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=null!=c.hidden?"none":"";this.obj.idd=String(b);this.obj.title=c.title||"";this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.obj.ontouchstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};this.obj.innerHTML=c.text||"";a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(a){this.obj.innerHTML=a};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(a){this.obj.style.width=a+"px"};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(a,b,c){this.id=a.idPrefix+b;this.state=null!=c.enabled?!1:!0;this.imgEn=c.img||"";this.imgDis=c.imgdis||"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=null!=c.hidden?"none":"";this.obj.allowClick=!1;this.obj.extAction=c.action||null;this.obj.renderAs=this.obj.className;this.obj.idd=String(b);this.obj.title=c.title||"";this.obj.pressed=!1;b=a.conf.icons_css?"\x3ci class\x3d'"+a.conf.icons_path+this.img+"'\x3e\x3c/i\x3e":"\x3cimg src\x3d'"+a.conf.icons_path+this.img+"'\x3e";this.obj.innerHTML=a._rtlParseBtn(""!=this.img?b:"",null!=c.text?"\x3cdiv class\x3d'dhxtoolbar_text'\x3e"+c.text+"\x3c/div\x3e":"");a.base.appendChild(this.obj);window.dhx4.isIE&&(this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1});var e=this;this._doOnMouseOver=function(a){0!=e.state&&1!=e.obj.pressed&&1!=e.obj.over&&(null==e.obj.className.match(/dhxtoolbar_btn_over/gi)&&(e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),e.obj.over=!0)};this._doOnMouseOut=function(a){0!=e.state&&(null!=e.obj.className.match(/dhxtoolbar_btn_over/gi)&&(e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),e.obj.over=e.obj.pressed=!1)};this._doOnMouseDown=function(b){b=b||event;if("touchstart"==b.type){b.preventDefault&&b.preventDefault();b.cancelBubble=!0;if(null!=a.conf.touch_id&&a.conf.touch_id!=e.id)return;a.conf.touch_id=e.id}0!=e.state&&(null==e.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"),e.obj.pressed=!0)};this._doOnMouseUp=function(b){b=b||event;"touchend"==b.type&&(b.preventDefault&&b.preventDefault(),b.cancelBubble=!0,a.conf.touch_id==e.id&&(a.conf.touch_id=null));0!=e.state&&0!=e.obj.pressed&&(null!=e.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(e.obj.over?"over":"def")),e.obj.pressed=!1,e.obj.extAction&&window.setTimeout(function(){try{if(e&&e.obj)window[e.obj.extAction](e.id)}catch(h){}},1),a.callEvent("onClick",[e.obj.idd.replace(a.idPrefix,"")]))};this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};a._evs.add.apply(this,[this.obj.evs,this.obj]);this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(b){a._setItemText(this,b)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(b){a._setItemImage(this,b,!0)};this.clearItemImage=function(){a._clearItemImage(this,!0)};this.setItemImageDis=function(b){a._setItemImage(this,b,!1)};this.clearItemImageDis=function(){a._clearItemImage(this,!1)};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(a,b,c){this.id=a.idPrefix+b;this.state=null!=c.enabled?"true"==c.enabled?!0:!1:!0;this.imgEn=c.img||"";this.imgDis=c.imgdis||"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.mode=c.mode||"button";"select"==this.mode?(this.openAll=!0,this.renderSelect=!1,c.text&&0!=c.text.length||(c.text="\x26nbsp;")):(this.openAll=1==window.dhx4.s2b(c.openAll),this.renderSelect=null==c.renderSelect?!0:window.dhx4.s2b(c.renderSelect));this.maxOpen=isNaN(c.maxOpen?c.maxOpen:"")?null:c.maxOpen;this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!a._sbw){var b=document.createElement("DIV");b.className="dhxtoolbar_maxopen_test";document.body.appendChild(b);var c=document.createElement("DIV");c.className="dhxtoolbar_maxopen_test2";b.appendChild(c);a._sbw=b.offsetWidth-c.offsetWidth;b.removeChild(c);document.body.removeChild(b)}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=!1;this.obj.extAction=c.action||null;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=null!=c.hidden?"none":"";this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.obj.idd=String(b);this.obj.title=c.title||"";this.callEvent=this.obj.pressed=!1;var e=a.conf.icons_css?"\x3ci class\x3d'"+a.conf.icons_path+this.img+"'\x3e\x3c/i\x3e":"\x3cimg src\x3d'"+a.conf.icons_path+this.img+"'\x3e";this.obj.innerHTML=a._rtlParseBtn(""!=this.img?e:"",null!=c.text?"\x3cdiv class\x3d'dhxtoolbar_text'\x3e"+c.text+"\x3c/div\x3e":"");a.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="\x3cdiv class\x3d'arwimg'\x3e\x26nbsp;\x3c/div\x3e";this.arw.title=this.obj.title;this.arw.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};a.base.appendChild(this.arw);var g=this;window.dhx4.isIE&&(this.arw.onselectstart=this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1});this._doOnMouseOver=function(b){0!=g.state&&1!=g.obj.over&&a.anyUsed!=g.obj.idd&&(null==g.obj.className.match(/dhxtoolbar_btn_over/gi)&&(g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"),g.obj.over=!0)};this._doOnMouseOut=function(b){0!=g.state&&a.anyUsed!=g.obj.idd&&a.anyUsed!=g.obj.idd&&(null!=g.obj.className.match(/dhxtoolbar_btn_over/gi)&&(g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),g.obj.over=g.obj.pressed=!1)};this._doOnMouseDown=function(b){b=b||event;if("touchstart"==b.type){b.preventDefault&&b.preventDefault();b.cancelBubble=!0;if(null!=a.conf.touch_id&&a.conf.touch_id!=g.id)return;a.conf.touch_id=g.id}if(0!=g.state)if(a.anyUsed==g.obj.idd)1==g.obj.over?(g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"):(g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),g._hidePoly(!0),a.anyUsed=null;else{var c=b.target||b.srcElement;1==g.openAll||c==g.arw||c.parentNode==g.arw?("touchstart"==b.type&&(g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",g.arw._skip=!0,g._showPoly(!0),a.anyUsed=g.obj.idd):(null==g.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres"),g.obj.pressed=!0)}};this._doOnMouseUp=function(c){c=c||event;if("touchend"==c.type){if(""==g.polygon.style.display)return;c.preventDefault&&c.preventDefault();c.cancelBubble=!0;a.conf.touch_id==g.id&&(a.conf.touch_id=null)}if(0!=g.state&&0!=g.obj.pressed){null!=g.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(g.obj.over?"over":"def"),g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(g.obj.over?"over":"def"));if(this.extAction){var e=this;window.setTimeout(function(){try{window[e.extAction](b)}catch(n){}e=null},1)}a.callEvent("onClick",[g.obj.idd.replace(a.idPrefix,"")])}};this.arw.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown"};a._evs.add.apply(this,[this.arw.evs,this.arw]);this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};a._evs.add.apply(this,[this.obj.evs,this.obj]);this._showPoly=function(b){if(null!=a.anyUsed&&"buttonSelect"==a.objPull[a.idPrefix+a.anyUsed].type){var c=a.objPull[a.idPrefix+a.anyUsed];"none"!=c.polygon.style.display&&(c.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",c.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def",c.obj.over=!1,window.dhx4.zim.clear(c.polygon._idd),c.polygon.style.display="none",c.polygon._ie6cover&&(c.polygon._ie6cover.style.display="none"),"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(c.id,!0),a.callEvent("onButtonSelectHide",[c.obj.idd]))}this.polygon.style.top="0px";this.polygon.style.visibility="hidden";this.polygon.style.zIndex=window.dhx4.zim.reserve(this.polygon._idd);this.polygon.style.display="";"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(this.id,!1);this._fixMaxOpenHeight(this.maxOpen||null);a._autoDetectVisibleArea();var c=window.dhx4.absTop(this.obj)+this.obj.offsetHeight+a.conf.sel_ofs_y,e=this.polygon.offsetHeight;if(c+e>a.tY2){var g=null!=this.maxOpen?Math.floor((a.tY2-c)/22):0;1<=g?this._fixMaxOpenHeight(g):(c=window.dhx4.absTop(this.obj)-e-a.conf.sel_ofs_y,0>c&&(c=0))}this.polygon.style.top=c+"px";a.rtl?this.polygon.style.left=window.dhx4.absLeft(this.obj)+this.obj.offsetWidth-this.polygon.offsetWidth+a.conf.sel_ofs_x+"px":(c=document.body.scrollLeft+(window.innerWidth||document.body.clientWidth),e=window.dhx4.absLeft(this.obj)+a.conf.sel_ofs_x,e+this.polygon.offsetWidth>c&&(e=window.dhx4.absLeft(this.arw)+this.arw.offsetWidth-this.polygon.offsetWidth),this.polygon.style.left=Math.max(e,5)+"px");this.polygon.style.visibility="visible";this.polygon._ie6cover&&(this.polygon._ie6cover.style.left=this.polygon.style.left,this.polygon._ie6cover.style.top=this.polygon.style.top,this.polygon._ie6cover.style.width=this.polygon.offsetWidth+"px",this.polygon._ie6cover.style.height=this.polygon.offsetHeight+"px",this.polygon._ie6cover.style.display="");b&&a.callEvent("onButtonSelectShow",[this.obj.idd])};this._hidePoly=function(b){window.dhx4.zim.clear(this.polygon._idd);this.polygon.style.display="none";this.polygon._ie6cover&&(this.polygon._ie6cover.style.display="none");"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(this.id,!0);b&&a.callEvent("onButtonSelectHide",[this.obj.idd]);a.conf.touch_id=null};this.obj.iddPrefix=a.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(b){var c="auto",e=!1;if(null!==b){var h=0,l;for(l in this._listOptions)h++;h>b?(this._ph=22*b,c=this._ph+"px"):e=!0}this.polygon.style.width="auto";this.polygon.style.height="auto";e||null==g.maxOpen||(this.polygon.style.width=this.p_tbl.offsetWidth+a._sbw+"px",this.polygon.style.height=c)};this._separatorButtonSelectObject=function(a,b,c){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};isNaN(c)?c=g.p_tbody.childNodes.length+1:1>c&&(c=1);c>g.p_tbody.childNodes.length?g.p_tbody.appendChild(this.obj.tr):g.p_tbody.insertBefore(this.obj.tr,g.p_tbody.childNodes[c-1]);this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.td.appendChild(this.obj.sep);g._listOptions[a]=this.obj;return this};this._buttonButtonSelectObject=function(b,c,e){var h=!0;"undefined"!=typeof c.enabled?h=window.dhx4.s2b(c.enabled):"undefined"!=typeof c.disabled&&(h=window.dhx4.s2b(c.disabled));this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=h;this.obj.tr.extAction=c.action||null;this.obj.tr._selected=null!=c.selected;this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&g.renderSelect?" tr_btn_selected":"":" tr_btn_disabled");this.obj.tr.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.tr.idd=String(b);isNaN(e)?e=g.p_tbody.childNodes.length+1:1>e&&(e=1);e>g.p_tbody.childNodes.length?g.p_tbody.appendChild(this.obj.tr):g.p_tbody.insertBefore(this.obj.tr,g.p_tbody.childNodes[e-1]);this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};a.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b));null!=c.img?(this.obj.td_a.innerHTML=1==a.conf.icons_css?"\x3ci class\x3d'"+a.conf.icons_path+c.img+"'\x3e\x3c/i\x3e":"\x3cimg class\x3d'btn_sel_img' src\x3d'"+a.conf.icons_path+c.img+"' border\x3d'0'\x3e",this.obj.tr._img=c.img):this.obj.td_a.innerHTML="\x26nbsp;";this.obj.td_b.innerHTML="\x3cdiv class\x3d'btn_sel_text'\x3e"+(null!=c.text?c.text:c.itemText||"")+"\x3c/div\x3e";this.obj.tr.onmouseover=function(a){a=a||event;null!=a.type.match(/touch/)||!this.en||this._selected&&g.renderSelect||(this.className="tr_btn tr_btn_over")};this.obj.tr.onmouseout=function(a){a=a||event;null==a.type.match(/touch/)&&this.en&&(this._selected&&g.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")};this.obj.tr.ontouchstart=this.obj.tr.onmousedown=function(a){a=a||event;null==this._etype&&(this._etype=a.type)};this.obj.tr.onclick=function(b){b=b||event;b.cancelBubble=!0;if(this.en){g.setListOptionSelected(this.idd.replace(a.idPrefix,""));g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";g.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def";g.obj.over=!1;if(null!=this._etype&&null==this._etype.match(/touch/))window.dhx4.zim.clear(g.polygon._idd),g.polygon.style.display="none",g.polygon._ie6cover&&(g.polygon._ie6cover.style.display="none");else{var c=g.polygon;window.setTimeout(function(){window.dhx4.zim.clear(c._idd);c.style.display="none";c=null},500)}this._etype=null;"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(g.id,!0);a.anyUsed=null;a.conf.touch_id=null;a.callEvent("onButtonSelectHide",[g.obj.idd]);b=this.idd.replace(a.idPrefix,"");if(this.extAction)try{window[this.extAction](b)}catch(u){}a.callEvent("onClick",[b])}};g._listOptions[b]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+a.conf.skin+" dhxtoolbar_icons_"+a.conf.iconSize+a.conf.cssShadow;this.polygon.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.polygon.onmousedown=function(a){a=a||event;a.cancelBubble=!0};this.polygon.style.overflowY="auto";this.polygon._idd=window.dhx4.newId();this.polygon.ontouchstart=function(a){a=a||event;a.cancelBubble=!0};this.polygon.ontouchend=function(a){a=a||event;a.cancelBubble=!0};this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(null!=c.options)for(e=0;e<c.options.length;e++){var h="_"+(c.options[e].type||"")+"ButtonSelectObject";null==c.options[e].id&&(c.options[e].id=a._genStr(24));"function"==typeof this[h]&&new this[h](c.options[e].id,c.options[e])}document.body.appendChild(this.polygon);window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity\x3d100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover));this.setWidth=function(a){this.obj.style.width=a-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(b){a._setItemText(this,b)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(b){a._setItemImage(this,b,!0)};this.clearItemImage=function(){a._clearItemImage(this,!0)};this.setItemImageDis=function(b){a._setItemImage(this,b,!1)};this.clearItemImageDis=function(){a._clearItemImage(this,!1)};this.setItemToolTip=function(a){this.obj.title=a;this.arw.title=a};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(a,b,c,e,g){"button"!=c&&"separator"!=c||new this["_"+c+"ButtonSelectObject"](a,{id:a,type:c,text:e,img:g},b)};this.removeListOption=function(a){if(this._isListButton(a,!0)){var b=this._listOptions[a];if(null!=b.td_a&&null!=b.td_b){b.td_a.onselectstart=null;for(b.td_b.onselectstart=null;0<b.td_a.childNodes.length;)b.td_a.removeChild(b.td_a.childNodes[0]);for(;0<b.td_b.childNodes.length;)b.td_b.removeChild(b.td_b.childNodes[0]);b.tr.onselectstart=null;b.tr.onmouseover=null;b.tr.onmouseout=null;b.tr.onclick=null;b.tr.ontouchstart=null;for(b.tr.onmousedown=null;0<b.tr.childNodes.length;)b.tr.removeChild(b.tr.childNodes[0]);b.tr.parentNode.removeChild(b.tr);b.td_a=null;b.td_b=null}else{b.sep.onselectstart=null;b.td.onselectstart=null;for(b.tr.onselectstart=null;0<b.td.childNodes.length;)b.td.removeChild(b.td.childNodes[0]);for(;0<b.tr.childNodes.length;)b.tr.removeChild(b.tr.childNodes[0]);b.tr.parentNode.removeChild(b.tr);b.sep=null;b.td=null}b.tr=null;this._listOptions[a]=null;try{delete this._listOptions[a]}catch(n){}}};this.showListOption=function(a){this._isListButton(a,!0)&&(this._listOptions[a].tr.style.display="")};this.hideListOption=function(a){this._isListButton(a,!0)&&(this._listOptions[a].tr.style.display="none")};this.isListOptionVisible=function(a){if(this._isListButton(a,!0))return"none"!=this._listOptions[a].tr.style.display};this.enableListOption=function(b){this._isListButton(b)&&(this._listOptions[b].tr.en=!0,this._listOptions[b].tr.className="tr_btn"+(this._listOptions[b].tr._selected&&a.renderSelect?" tr_btn_selected":""))};this.disableListOption=function(a){this._isListButton(a)&&(this._listOptions[a].tr.en=!1,this._listOptions[a].tr.className="tr_btn tr_btn_disabled")};this.isListOptionEnabled=function(a){if(this._isListButton(a))return this._listOptions[a].tr.en};this.setListOptionPosition=function(a,b){if(this._listOptions[a]&&this.getListOptionPosition(a)!=b&&!isNaN(b)){1>b&&(b=1);var c=this._listOptions[a].tr;this.p_tbody.removeChild(c);b>this.p_tbody.childNodes.length?this.p_tbody.appendChild(c):this.p_tbody.insertBefore(c,this.p_tbody.childNodes[b-1])}};this.getListOptionPosition=function(a){var b=-1;if(!this._listOptions[a])return b;for(var c=0;c<this.p_tbody.childNodes.length;c++)this.p_tbody.childNodes[c]==this._listOptions[a].tr&&(b=c+1);return b};this.setListOptionImage=function(b,c){this._isListButton(b)&&(this._listOptions[b].tr.childNodes[a.rtl?1:0].innerHTML=a.conf.icons_css?"\x3ci class\x3d'"+a.conf.icons_path+c+"'\x3e\x3c/i\x3e":"\x3cimg src\x3d'"+a.conf.icons_path+c+"' class\x3d'btn_sel_img'\x3e")};this.getListOptionImage=function(b){if(this._isListButton(b)){b=this._listOptions[b].tr.childNodes[a.rtl?1:0];var c=null;0<b.childNodes.length&&(c=b.childNodes[0][a.conf.icons_css?"className":"src"]);return c}};this.clearListOptionImage=function(b){if(this._isListButton(b)){for(b=this._listOptions[b].tr.childNodes[a.rtl?1:0];0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b.innerHTML="\x26nbsp;"}};this.setListOptionText=function(b,c){this._isListButton(b)&&(this._listOptions[b].tr.childNodes[a.rtl?0:1].childNodes[0].innerHTML=c)};this.getListOptionText=function(b){if(this._isListButton(b))return this._listOptions[b].tr.childNodes[a.rtl?0:1].childNodes[0].innerHTML};this.setListOptionToolTip=function(a,b){this._isListButton(a)&&(this._listOptions[a].tr.title=b)};this.getListOptionToolTip=function(a){if(this._isListButton(a))return this._listOptions[a].tr.title};this.forEachListOption=function(a){for(var b in this._listOptions)a(b)};this.getAllListOptions=function(){var a=[],b;for(b in this._listOptions)a[a.length]=b;return a};this.setListOptionSelected=function(a){for(var b in this._listOptions){var c=this._listOptions[b];null!=c.td_a&&null!=c.td_b&&c.tr.en&&(b==a?(c.tr._selected=!0,c.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),"select"==this.mode&&(c.tr._img?this.setItemImage(c.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(a)))):(c.tr._selected=!1,c.tr.className="tr_btn"))}};this.getListOptionSelected=function(){var a=null,b;for(b in this._listOptions)1==this._listOptions[b].tr._selected&&(a=b);return a};this._isListButton=function(a,b){return null==this._listOptions[a]||!b&&"tr_sep"==this._listOptions[a].tr.className?!1:!0};this.setMaxOpen=function(a){this._ph=null;"number"==typeof a?(this.maxOpen=a,this._maxOpenTest()):this.maxOpen=null};c.width&&this.setWidth(c.width);"select"==this.mode&&"undefined"!=typeof c.selected&&this.setListOptionSelected(c.selected);return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(a,b,c){this.id=a.idPrefix+b;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=null!=c.hidden?"none":"";this.obj.idd=String(b);this.obj.w=null!=c.width?c.width:100;this.obj.title=null!=c.title?c.title:"";this.obj.innerHTML="\x3cinput class\x3d'dhxtoolbar_input' type\x3d'text' style\x3d'width:"+this.obj.w+"px;'"+(null!=c.value?" value\x3d'"+c.value+"'":"")+"\x3e";var e=this;this.obj.childNodes[0].onkeydown=function(b){b=b||event;13==b.keyCode&&a.callEvent("onEnter",[e.obj.idd,this.value])};a.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=!1};this.disableItem=function(){this.obj.childNodes[0].disabled=!0};this.isEnabled=function(){return!this.obj.childNodes[0].disabled};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return"none"!=this.obj.style.display};this.setValue=function(a){this.obj.childNodes[0].value=a};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(a){this.obj.w=a;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};"undefined"!=typeof c.enabled&&0==window.dhx4.s2b(c.enabled)&&this.disableItem();return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,b,c){this.id=a.idPrefix+b;this.state=null!=c.enabled?!1:!0;this.imgEn=null!=c.img?c.img:"";this.imgDis=null!=c.imgdis?c.imgdis:"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.pressed=null!=c.selected;this.obj.extAction=c.action||null;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis");this.obj.style.display=null!=c.hidden?"none":"";this.obj.renderAs=this.obj.className;this.obj.idd=String(b);this.obj.title=c.title||"";this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over");b=a.conf.icons_css?"\x3ci class\x3d'"+a.conf.icons_path+this.img+"'\x3e\x3c/i\x3e":"\x3cimg src\x3d'"+a.conf.icons_path+this.img+"'\x3e";this.obj.innerHTML=a._rtlParseBtn(""!=this.img?b:"",null!=c.text?"\x3cdiv class\x3d'dhxtoolbar_text'\x3e"+c.text+"\x3c/div\x3e":"");a.base.appendChild(this.obj);window.dhx4.isIE&&(this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1});var e=this;this._doOnMouseOver=function(a){0!=e.state&&1!=e.obj.over&&(1!=e.obj.pressed&&null==e.obj.className.match(/dhxtoolbar_btn_over/gi)&&(e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),e.obj.over=!0)};this._doOnMouseOut=function(a){0!=e.state&&(1!=e.obj.pressed&&null!=e.obj.className.match(/dhxtoolbar_btn_over/gi)&&(e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),e.obj.over=!1)};this._doOnMouseDown=function(b){b=b||event;if("touchstart"==b.type){b.preventDefault&&b.preventDefault();b.cancelBubble=!0;if(null!=a.conf.touch_id&&a.conf.touch_id!=e.id)return;a.conf.touch_id=e.id}if(0!=e.state&&!0===a.callEvent("onBeforeStateChange",[e.obj.idd.replace(a.idPrefix,""),e.obj.pressed])){e.obj.pressed=!e.obj.pressed;e.obj.className="dhx_toolbar_btn "+(1==e.obj.pressed?"dhxtoolbar_btn_pres":1==e.obj.over?"dhxtoolbar_btn_over":"dhxtoolbar_btn_def");b=e.obj.idd.replace(a.idPrefix,"");if(e.obj.extAction)try{window[e.obj.extAction](idd,e.obj.pressed)}catch(h){}a.callEvent("onStateChange",[b,e.obj.pressed])}};this._doOnMouseUp=function(b){b=b||event;"touchend"==b.type&&(b.preventDefault&&b.preventDefault(),b.cancelBubble=!0,a.conf.touch_id==e.id&&(a.conf.touch_id=null))};this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};a._evs.add.apply(this,[this.obj.evs,this.obj]);this.setItemState=function(b,c){if(this.obj.pressed!=b&&(1==b?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis")):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis")),1==c)){var e=this.obj.idd.replace(a.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](e,this.obj.pressed)}catch(m){}a.callEvent("onStateChange",[e,this.obj.pressed])}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(b){a._setItemText(this,b)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(b){a._setItemImage(this,b,!0)};this.clearItemImage=function(){a._clearItemImage(this,!0)};this.setItemImageDis=function(b){a._setItemImage(this,b,!1)};this.clearItemImageDis=function(){a._clearItemImage(this,!1)};this.setItemToolTip=function(a){this.obj.title=a};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(a,b,c){this.id=a.idPrefix+b;this.state=null!=c.enabled?"true"==c.enabled?!0:!1:!0;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=null!=c.hidden?"none":"";this.obj.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};this.obj.idd=String(b);this.obj.len=null!=c.length?Number(c.length):50;this.obj.innerHTML="\x3cdiv class\x3d'dhxtoolbar_text'\x3e"+(c.textMin||"")+"\x3c/div\x3e\x3cdiv class\x3d'dhxtoolbar_sl_bg_l'\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxtoolbar_sl_bg_m' style\x3d'width:"+this.obj.len+"px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxtoolbar_sl_bg_r'\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxtoolbar_text'\x3e"+(c.textMax||"")+"\x3c/div\x3e";a.base.appendChild(this.obj);var e=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var g=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+a.conf.skin+(a.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=c.toolTip||"%v";this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var h=this.label;this.pen.valueMin=null!=c.valueMin?Number(c.valueMin):0;this.pen.valueMax=null!=c.valueMax?Number(c.valueMax):100;this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax);this.pen.valueNow=null!=c.valueNow?Number(c.valueNow):this.pen.valueMax;this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax);this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin);this.pen._detectLimits=function(){this.minX=e.obj.childNodes[1].offsetLeft+2;this.maxX=e.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=!1;this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){0!=e.state&&(a=a||event,this.initXY=window.dhx4.isIPad?a.touches[0].clientX:a.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",""!=h.tip&&(h.style.visibility="hidden",h.style.display="",h.innerHTML=h.tip.replace("%v",this.valueNow),h.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-h.offsetWidth/2)+"px",h.style.top=window.dhx4.absTop(this)-h.offsetHeight-3+"px",h.style.visibility="",h.style.zIndex=window.dhx4.zim.reserve(h._zi)))};this.pen._doOnMouseMoveStart=function(a){a=a||event;if(g.allowMove){var b=window.dhx4.isIPad?a.touches[0].clientX:a.clientX,c=b-g.initXY;if(!(b<window.dhx4.absLeft(g)+Math.round(g.offsetWidth/2)&&g.nowX==g.minX||b>window.dhx4.absLeft(g)+Math.round(g.offsetWidth/2)&&g.nowX==g.maxX))return g.newNowX=g.nowX+c,g.newNowX<g.minX&&(g.newNowX=g.minX),g.newNowX>g.maxX&&(g.newNowX=g.maxX),g.nowX=g.newNowX,g.style.left=g.nowX+"px",g.initXY=b,g.newValueNow=Math.round((g.valueMax-g.valueMin)*(g.newNowX-g.minX)/(g.maxX-g.minX)+g.valueMin),""!=h.tip&&(h.innerHTML=h.tip.replace(/%v/gi,g.newValueNow),h.style.left=Math.round(window.dhx4.absLeft(g)+g.offsetWidth/2-h.offsetWidth/2)+"px",h.style.top=window.dhx4.absTop(g)-h.offsetHeight-3+"px"),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1}};this.pen._doOnMouseMoveEnd=function(){g.allowMove&&(g.className="dhxtoolbar_sl_pen",g.allowMove=!1,g.nowX=g.newNowX,g.valueNow=g.newValueNow,""!=h.tip&&(h.style.display="none",window.dhx4.zim.clear(h._zi)),a.callEvent("onValueChange",[e.obj.idd.replace(a.idPrefix,""),g.valueNow]))};window.dhx4.isIPad?(document.addEventListener("touchmove",g._doOnMouseMoveStart,!1),document.addEventListener("touchend",g._doOnMouseMoveEnd,!1)):"undefined"!=typeof window.addEventListener?(window.addEventListener("mousemove",g._doOnMouseMoveStart,!1),window.addEventListener("mouseup",g._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",g._doOnMouseMoveStart),document.body.attachEvent("onmouseup",g._doOnMouseMoveEnd));this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")};this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setValue=function(b,c){b=Number(b);b<this.pen.valueMin&&(b=this.pen.valueMin);b>this.pen.valueMax&&(b=this.pen.valueMax);this.pen.valueNow=b;this.pen._definePos();1==c&&a.callEvent("onValueChange",[this.obj.idd.replace(a.idPrefix,""),this.pen.valueNow])};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(a,b){a=Number(a);a>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=b,this.obj.childNodes[0].style.display=0<b.length?"":"none",this.pen.valueMin=a,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())};this.setMaxValue=function(a,b){a=Number(a);a<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=b,this.obj.childNodes[4].style.display=0<b.length?"":"none",this.pen.valueMax=a,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())};this.getMinValue=function(){return[this.pen.valueMin,this.obj.childNodes[0].innerHTML]};this.getMaxValue=function(){return[this.pen.valueMax,this.obj.childNodes[4].innerHTML]};this.setItemToolTipTemplate=function(a){this.label.tip=a};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._doOnClick,!1),window.removeEventListener("touchstart",this._doOnClick,!1)):document.body.detachEvent("onmousedown",this._doOnClick);this._doOnClick=null;this.clearAll();this.objPull=null;this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);for(;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);this.cont.removeChild(this.base);for(this.base=null;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.conf=this.items=this.setMaxOpen=this.getUserData=this.setUserData=this.unload=this.getListOptionSelected=this.setListOptionSelected=this.getAllListOptions=this.forEachListOption=this.clearListOptionImage=this.getListOptionImage=this.setListOptionImage=this.getListOptionToolTip=this.setListOptionToolTip=this.getListOptionText=this.setListOptionText=this.getListOptionPosition=this.setListOptionPosition=this.isListOptionEnabled=this.disableListOption=this.enableListOption=this.isListOptionVisible=this.hideListOption=this.showListOption=this.removeListOption=this.addListOption=this.removeItem=this.setPosition=this.getPosition=this.getWidth=this.setWidth=this.getMaxValue=this.setMaxValue=this.getMinValue=this.setMinValue=this.getValue=this.setValue=this.getItemToolTipTemplate=this.setItemToolTipTemplate=this.getItemState=this.setItemState=this.clearItemImageDis=this.clearItemImage=this.setItemImageDis=this.setItemImage=this.getItemToolTip=this.setItemToolTip=this.getItemText=this.setItemText=this.isEnabled=this.disableItem=this.enableItem=this.isVisible=this.hideItem=this.showItem=this.forEachItem=this.addInput=this.addSlider=this.addSeparator=this.addButtonTwoState=this.addButtonSelect=this.addText=this.addButton=this.getParentId=this.inArray=this.getTypeExt=this.getType=this.removeSpacer=this.addSpacer=this.clearAll=this.loadXMLString=this.loadXML=this.setIconPath=this.setIconsPath=this.setSkin=this.setAlign=this._removeItem=this._autoDetectVisibleArea=this._sliderObject=this._buttonTwoStateObject=this._buttonInputObject=this._buttonSelectObject=this._buttonObject=this._textObject=this._separatorObject=this._getIdByPosition=this._setPosition=this._getPosition=this._addItem=this._genStr=this._addItemToStorage=this._xmlParser=this._disableItem=this._enableItem=this._getItemText=this._setItemText=this._clearItemImage=this._setItemImage=this._addImgObj=this._getObj=this._sbw=this.setRTL=this._rtlParseBtn=this._rtl=this.rootTypes=this.idPrefix=this.anyUsed=this.tY2=this.tY1=this.tX2=this.tX1=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};dhtmlXToolbarObject.prototype.setIconset=function(a){this.conf.icons_css="awesome"==a};dhtmlXToolbarObject.prototype._evs={add:function(a,b){for(var c in a)"function"==typeof window.addEventListener?b.addEventListener(c,this[a[c]],!1):null==c.match(/^touch/)&&b.attachEvent("on"+c,this[a[c]])},clear:function(a,b){for(var c in a)"function"==typeof window.addEventListener?b.removeEventListener(c,this[a[c]],!1):null==c.match(/^touch/)&&b.detachEvent("on"+c,this[a[c]])}};dhtmlXToolbarObject.prototype._initObj=function(a){for(var b=0;b<a.length;b++)this._addItemToStorage(a[b]);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype._xmlToJson=function(a){var b=[];a=a.getElementsByTagName("toolbar");if(null!=a&&null!=a[0]){a=a[0];for(var c=function(a){for(var b=null,c=0;c<a.childNodes.length;c++)if(null==b&&"itemText"==a.childNodes[c].tagName){b=window.dhx4._xmlNodeValue(a.childNodes[c]);break}return b},e="id type hidden title text enabled img imgdis action openAll renderSelect mode maxOpen width value selected length textMin textMax toolTip valueMin valueMax valueNow".split(" "),g="id type enabled disabled action selected img text".split(" "),h=0;h<a.childNodes.length;h++)if("item"==a.childNodes[h].tagName){for(var l={},m=0;m<e.length;m++){var n=a.childNodes[h].getAttribute(e[m]);null!=n&&(l[e[m]]=n)}for(var q=0;q<a.childNodes[h].childNodes.length;q++){if("item"==a.childNodes[h].childNodes[q].tagName&&"buttonSelect"==l.type){for(var r={},m=0;m<g.length;m++)n=a.childNodes[h].childNodes[q].getAttribute(g[m]),null!=n&&(r[g[m]]=n);n=a.childNodes[h].childNodes[q].getElementsByTagName("userdata");for(m=0;m<n.length;m++){r.userdata||(r.userdata={});var v,u;try{v=n[m].getAttribute("name")}catch(x){v=null}try{u=n[m].firstChild.nodeValue}catch(x){u=""}null!=v&&(r.userdata[v]=u)}r.text=c(a.childNodes[h].childNodes[q])||r.text;null==l.options&&(l.options=[]);l.options.push(r)}if("userdata"==a.childNodes[h].childNodes[q].tagName){null==l.userdata&&(l.userdata={});r={};try{r.name=a.childNodes[h].childNodes[q].getAttribute("name")}catch(x){r.name=null}try{r.value=a.childNodes[h].childNodes[q].firstChild.nodeValue}catch(x){r.value=""}null!=r.name&&(l.userdata[r.name]=r.value)}}l.text=c(a.childNodes[h])||l.text;b.push(l)}c=null}return b};dhtmlXToolbarObject.prototype._addItemToStorage=function(a,b){var c=a.id||this._genStr(24),e=a.type||"";"spacer"==e?this.addSpacer(this._lastId):this._lastId=c;if(""!=e&&null!=this["_"+e+"Object"]){if("buttonSelect"==e&&null!=a.options)for(var g=0;g<a.options.length;g++)"obj"==a.options[g].type&&(a.options[g].type="button"),"sep"==a.options[g].type&&(a.options[g].type="separator");if("slider"==e){var g={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"},h;for(h in g)null==a[g[h]]&&null!=a[h]&&(a[g[h]]=a[h])}"buttonInput"==e&&null==a.value&&null!=a.text&&(a.value=a.text);"buttonTwoState"==e&&"undefined"==typeof a.selected&&"undefined"!=typeof a.pressed&&window.dhx4.s2b(a.pressed)&&(a.selected=!0);"undefined"==typeof a.enabled&&"undefined"!=typeof a.disabled&&window.dhx4.s2b(a.disabled)&&(a.enabled=!1);null==a.imgDis&&null!=a.img_disabled&&(a.imgdis=a.img_disabled);"undefined"!=typeof a.openAll&&null!=a.openAll||"dhx_terrace"!=this.conf.skin||(a.openAll=!0);this.objPull[this.idPrefix+c]=new this["_"+e+"Object"](this,c,a);this.objPull[this.idPrefix+c].type=e;this.setPosition(c,b)}if(null!=a.userdata)for(h in a.userdata)this.setUserData(c,h,a.userdata[h]);if(null!=a.options)for(g=0;g<a.options.length;g++)if(null!=a.options[g].userdata)for(h in a.options[g].userdata)this.setListOptionUserData(a.id,a.options[g].id,h,a.options[g].userdata[h])};dhtmlXToolbarObject.prototype.setSkin=function(a,b){!0===b?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=a,"dhx_skyblue"==this.conf.skin&&(this.conf.sel_ofs_y=1),"dhx_web"==this.conf.skin&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),"dhx_terrace"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),"material"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow);for(var c in this.objPull){var e=this.objPull[c];"slider"==e.type&&(e.pen._detectLimits(),e.pen._definePos(),e.label.className="dhx_toolbar_slider_label_"+this.conf.skin);"buttonSelect"==e.type&&(e.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow)}"dhx_terrace"==a&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align="right"==a?"right":"left";this.base.className="right"==a?"dhxtoolbar_float_right":"dhxtoolbar_float_left";this._spacer&&(this._spacer.className="right"==a?" dhxtoolbar_float_left":" dhxtoolbar_float_right")};dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[a]?a:18;this.setSkin(this.conf.skin,!0);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(a,b,c){a=this.idPrefix+a;null!=this.objPull[a]&&(null==this.objPull[a].userData&&(this.objPull[a].userData={}),this.objPull[a].userData[b]=c)};dhtmlXToolbarObject.prototype.getUserData=function(a,b){a=this.idPrefix+a;return null!=this.objPull[a]&&null!=this.objPull[a].userData?this.objPull[a].userData[b]||null:null};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,b){if(null==this.objPull[this.idPrefix+a])return!1;var c=this.objPull[this.idPrefix+a];return"buttonSelect"!=c.type||null==c._listOptions[b]?!1:!0};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,b,c,e){this._isListOptionExists(a,b)&&(a=this.objPull[this.idPrefix+a]._listOptions[b],null==a.userData&&(a.userData={}),a.userData[c]=e)};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,b,c){if(!this._isListOptionExists(a,b))return null;a=this.objPull[this.idPrefix+a]._listOptions[b];return a.userData?a.userData[c]?a.userData[c]:null:null};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){null==this.conf.terrace_radius&&(this.conf.terrace_radius="3px");var a=[],b={separator:!0,text:!0},c=[this.base];null!=this._spacer&&c.push(this._spacer);for(var e=0;e<c.length;e++){a[e]=[];for(var g=0;g<c[e].childNodes.length;g++)if(null!=c[e].childNodes[g].idd&&"none"!=c[e].childNodes[g].style.display){var h=this.idPrefix+c[e].childNodes[g].idd;null!=this.objPull[h]&&this.objPull[h].obj==c[e].childNodes[g]&&a[e].push({a:h,type:this.objPull[h].type,node:this.objPull[h]["buttonSelect"==this.objPull[h].type?"arw":"obj"]})}c[e]=null}for(e=0;e<a.length;e++)for(g=0;g<a[e].length;g++){var c=a[e][g],l=!1,m=!1;if(!b[c.type]){if(g==a[e].length-1||null!=a[e][g+1]&&b[a[e][g+1].type])l=!0;if(0==g||0<=g-1&&null!=a[e][g-1]&&b[a[e][g-1].type])m=!0}c.node.style.borderRightWidth=l?"1px":"0px";c.node.style.borderTopRightRadius=c.node.style.borderBottomRightRadius=l?this.conf.terrace_radius:"0px";"buttonSelect"==c.type?(c.node.previousSibling.style.borderTopLeftRadius=c.node.previousSibling.style.borderBottomLeftRadius=m?this.conf.terrace_radius:"0px",c.node.previousSibling._br=l,c.node.previousSibling._bl=m):c.node.style.borderTopLeftRadius=c.node.style.borderBottomLeftRadius=m?this.conf.terrace_radius:"0px";c.node._br=l;c.node._bl=m}for(e=0;e<a.length;e++){for(g=0;g<a[e].length;g++){for(h in a[e][g])a[e][g][h]=null;a[e][g]=null}a[e]=null}};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(a,b){var c=this.objPull[a];1==b?(c.obj.style.borderBottomLeftRadius=c.obj._bl?this.conf.terrace_radius:"0px",c.arw.style.borderBottomRightRadius=c.obj._br?this.conf.terrace_radius:"0px"):(c.obj.style.borderBottomLeftRadius="0px",c.arw.style.borderBottomRightRadius="0px")};"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_toolbar=function(a,b,c,e,g){"undefined"!=typeof g?a=g:(a=document.createElement("DIV"),a.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV")),a.firstChild.className="dhx_toolbar_base_18_dhx_skyblue");this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=!0;this._updateIdx();return a},dhtmlXCellObject.prototype.attachToolbar=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.callEvent("_onBeforeContentAttach",["toolbar"]),"undefined"==typeof a?a={}:"string"==typeof a&&(a={skin:a}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(a),this._adjustCont(this._idd),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()}),a=a.parent=null,this.callEvent("_onContentAttach",[]),this.dataNodes.toolbar},dhtmlXCellObject.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,"function"==typeof this.dataNodes.toolbar.unload&&this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar});dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this.conf.dnd_enabled=!0;this.conf.dnd_tm=null;this.conf.dnd_time=0;this._dndOnMouseDown=function(b,c){if(!a.conf.dblclick_active&&(b.preventDefault?b.preventDefault():b.returnValue=!1,!0===a._callMainEvent("onBeforeMoveStart",c))){a.conf.dnd={id:c,x:a._dndPos(b,"X"),y:a._dndPos(b,"Y"),ready:!0,css:!1,css_touch:!1,css_vp:!1,tr:null,mode:"def",moved:!1,prevent:!1};a.w[c].conf.keep_in_vp?(a.conf.dnd.minX=0,a.conf.dnd.maxX=a.vp.clientWidth-a.w[c].conf.w,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.w[c].conf.h):(a.conf.dnd.minX=-a.w[c].conf.w+a.conf.vp_pos_ofs,a.conf.dnd.maxX=a.vp.clientWidth-a.conf.vp_pos_ofs,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.conf.vp_pos_ofs);for(var e=["MozTransform","WebkitTransform","OTransform","msTransform","transform"],g=0;g<e.length;g++)null!=document.documentElement.style[e[g]]&&null==a.conf.dnd.tr&&(a.conf.dnd.tr=e[g],a.conf.dnd.mode="tr");"tr"==a.conf.dnd.mode&&(a.w[c].win.style[a.conf.dnd.tr]="translate(0px,0px)",null!=a.w[c].fr_m_cover&&(a.w[c].fr_m_cover.style[a.conf.dnd.tr]=a.w[c].win.style[a.conf.dnd.tr]));0==window.dhx4.dnd._mTouch(b)&&b.type==window.dhx4.dnd.evs.start?(0==a.conf.dnd.css_touch&&(a.w[c].win.className+=" dhxwin_dnd_touch",a.conf.dnd.css_touch=!0),0==a.conf.dnd.css_vp&&(a.vp.className+=" dhxwins_vp_dnd",a.conf.dnd.css_vp=!0)):a._dndInitEvents()}};this._dndOnMouseMove=function(b){b=b||event;var c=a.conf.dnd,e=a._dndPos(b,"X")-c.x,g=a._dndPos(b,"Y")-c.y;if(b.type==window.dhx4.dnd.evs.move&&1!=c.moved&&(20<Math.abs(e)||20<Math.abs(g)))null!=a.conf.dnd_tm&&(window.clearTimeout(a.conf.dnd_tm),a.conf.dnd_tm=null),window.removeEventListener(window.dhx4.dnd.evs.start,a._dndOnMouseMove,!1);else if(1==c.ready){var h=a.w[c.id];b.preventDefault?b.preventDefault():b.returnValue=!1;1!=c.css&&(0==c.css_touch&&(h.win.className+=" dhxwin_dnd"),h.fr_cover.className+=" dhxwin_fr_cover_dnd",c.css=!0);1!=c.css_vp&&(a.vp.className+=" dhxwins_vp_dnd",c.css_vp=!0);c.newX=h.conf.x+e;c.newY=h.conf.y+g;"tr"==c.mode?(c.newX=Math.min(Math.max(c.newX,c.minX),c.maxX),e=c.newX-h.conf.x,c.newY=Math.min(Math.max(c.newY,c.minY),c.maxY),g=c.newY-h.conf.y,h.win.style[c.tr]="translate("+e+"px,"+g+"px)",null!=h.fr_m_cover&&(h.fr_m_cover.style[c.tr]=h.win.style[c.tr])):(c.newX<c.minX||c.newX>c.maxX?c.newX=Math.min(Math.max(c.newX,c.minX),c.maxX):c.x=a._dndPos(b,"X"),c.newY<c.minY||c.newY>c.maxY?c.newY=Math.min(Math.max(c.newY,c.minY),c.maxY):c.y=a._dndPos(b,"Y"),a._winSetPosition(c.id,c.newX,c.newY));c.moved=!0}};this._dndOnMouseUp=function(b){b=b||event;a._dndUnloadEvents();if(null!=a.conf.dnd&&null!=a.conf.dnd.id){var c=a.conf.dnd,e=a.w[c.id];null!=c.newX&&"tr"==c.mode&&(a._winSetPosition(c.id,c.newX,c.newY),e.win.style[c.tr]="translate(0px,0px)",null!=e.fr_m_cover&&(e.fr_m_cover.style[c.tr]=e.win.style[c.tr]));1==c.css&&(0==c.css_touch&&(e.win.className=String(e.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")),e.fr_cover.className=String(e.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,""));1==c.css_touch&&(e.win.className=String(e.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,""));1==c.css_vp&&(a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,""));1==c.moved?a._callMainEvent("onMoveFinish",c.id):a._callMainEvent("onMoveCancel",c.id);a.conf.dnd=null}1==window.dhx4.dnd.p_en&&b.type==window.dhx4.dnd.evs.end&&(window.dhx4.dnd._touchOn(),window.removeEventListener(window.dhx4.dnd.evs.end,a._dndOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,a._dndOnMouseMove,!1),null!=a.conf.dnd_tm&&window.clearTimeout(a.conf.dnd_tm),a.conf.dnd_tm=null)};this._dndOnSelectStart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("onselectstart",this._dndOnSelectStart))};this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("onselectstart",this._dndOnSelectStart))};this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid);a=this._dndUnloadModule=this._dndInitModule=this._dndUnloadEvents=this._dndInitEvents=this._dndOnSelectStart=this._dndOnMouseUp=this._dndOnMouseMove=this._dndOnMouseDown=this.conf.dnd_evid=null};this._dndPos=function(a,c){var b=a[this.conf.dnd_ev_prefix+c];null!=b&&0!=b||null==a.touches||(b=a.touches[0][this.conf.dnd_ev_prefix+c]);return b};this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(b,c){if(null!=this.w[c.id]&&1==this.w[c.id].conf.allow_move&&!("undefined"!=typeof b.button&&2<=b.button)){if(b.type==window.dhx4.dnd.evs.start){if("hdr"==c.mode){if(this.w[c.id].conf.maxed&&null==this.w[c.id].conf.max_w&&null==this.w[c.id].conf.max_h)return;this.conf.dnd_ev_prefix="page";this.conf.dnd={x:this._dndPos(b,"X"),y:this._dndPos(b,"Y")};1>this.conf.dnd_time?this._dndOnMouseDown(b,c.id):(null!=this.conf.dnd_tm&&window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=window.setTimeout(function(){a._dndOnMouseDown(b,c.id)},this.conf.dnd_time));1==window.dhx4.dnd.p_en&&(window.dhx4.dnd._touchOff(),window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,!1));window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1)}return!1}if(b.type==window.dhx4.dnd.evs.end)return null!=this.conf.dnd_tm&&(window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=null),this._dndOnMouseUp(b),window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1),!1;this.conf.dnd_ev_prefix="client";if("hdr"==c.mode&&"mousedown"==b.type&&(!this.w[c.id].conf.maxed||null!=this.w[c.id].conf.max_w||null!=this.w[c.id].conf.max_h))return b.preventDefault?b.preventDefault():b.returnValue=!1,this._dndOnMouseDown(b,c.id),!1}})};dhtmlXWindowsCell.prototype._initResize=function(){var a=this,b=navigator.userAgent;this.conf.resize={b_width:6,c_type:0<b.indexOf("MSIE 10.0")||0<b.indexOf("MSIE 9.0")||0<b.indexOf("MSIE 8.0")||0<b.indexOf("MSIE 7.0")||0<b.indexOf("MSIE 6.0"),btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&"undefined"==typeof window.addEventListener?1:0};this._rOnCellMouseMove=function(b){if(1==a.wins.conf.resize_actv||0==a.wins.w[a._idd].conf.allow_resize||1==a.conf.progress||1==a.wins.w[a._idd].conf.maxed||1==a.wins.w[a._idd].conf.fs_mode){var c=a.wins.w[a._idd].brd;"default"!=c.style.cursor&&(c.style.cursor="default")}else{b=b||event;var c=a.wins.w[a._idd].brd,g=a.conf.resize,h=0==a.wins.w[a._idd].conf.header,l=b.clientX;b=b.clientY;l+=document.documentElement.scrollLeft||document.body.scrollLeft||0;b+=document.documentElement.scrollTop||document.body.scrollTop||0;var m=window.dhx4.absLeft(c),n=window.dhx4.absTop(c),q="";l<=m+g.b_width?q="w":l>=m+c.offsetWidth-g.b_width&&(q="e");b>=n+c.offsetHeight-g.b_width?q="s"+q:h&&b<=n+g.b_width&&(q="n"+q);""==q&&(q=!1);g.mode!=q&&(g.mode=q,c.style.cursor=0==q?"default":q+"-resize")}};this._rOnCellMouseDown=function(b){b=b||event;if(("undefined"==typeof b.button||b.button==a.conf.resize.btn_left)&&0!=a.conf.resize.mode&&1!=a.conf.progress&&0!=a.wins.w[a._idd].conf.allow_resize&&1!=a.wins.w[a._idd].conf.fs_mode&&(b.preventDefault?b.preventDefault():b.returnValue=!1,!0===a.wins._callMainEvent("onBeforeResizeStart",a._idd))){var c=a.wins.w[a._idd],g=a.conf.resize;a.wins.conf.resize_actv=!0;g.min_w=c.conf.min_w;g.min_h=c.conf.min_h;g.max_w=c.conf.max_w||Infinity;g.max_h=c.conf.max_h||Infinity;"layout"==c.cell.dataType&&null!=c.cell.dataObj&&"function"==typeof c.cell.dataObj._getWindowMinDimension&&(c=c.cell.dataObj._getWindowMinDimension(c.cell),g.min_w=Math.max(c.w,g.min_w),g.min_h=Math.max(c.h,g.min_h));g.vp_l=a.wins.conf.vp_pos_ofs;g.vp_r=a.wins.vp.clientWidth-a.wins.conf.vp_pos_ofs;g.vp_b=a.wins.vp.clientHeight-a.wins.conf.vp_pos_ofs;g.x=b.clientX;g.y=b.clientY;"function"==typeof window.addEventListener?(window.addEventListener("mousemove",a._rOnWinMouseMove,!1),window.addEventListener("mouseup",a._rOnWinMouseUp,!1),window.addEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.attachEvent("onmousemove",a._rOnWinMouseMove),document.body.attachEvent("onmouseup",a._rOnWinMouseUp),document.body.attachEvent("onselectstart",a._rOnSelectStart));g.resized=!1;g.vp_cursor=a.wins.vp.style.cursor;a.wins.vp.style.cursor=g.mode+"-resize"}};this._rOnCellContextMenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this._rOnWinMouseMove=function(b){b=b||event;var c=a.wins.w[a._idd],g=a.conf.resize;g.resized||(c.fr_cover.className+=" dhxwin_fr_cover_resize",g.resized=!0);var h=b.clientX-g.x;b=b.clientY-g.y;0<=g.mode.indexOf("e")?(g.rw=Math.min(Math.max(c.conf.w+h,g.min_w),g.max_w),g.rx=null,c.conf.x+g.rw<g.vp_l?g.rw=g.vp_l-c.conf.x:c.conf.x+g.rw>a.wins.vp.clientWidth&&(g.rw=a.wins.vp.clientWidth-c.conf.x)):0<=g.mode.indexOf("w")&&(g.rw=Math.min(Math.max(c.conf.w-h,g.min_w),g.max_w),g.rx=c.conf.x+c.conf.w-g.rw,0>g.rx?(g.rw+=g.rx,g.rx=0):g.rx>g.vp_r&&(g.rw-=g.vp_r,g.rx=g.vp_r));0<=g.mode.indexOf("s")?(g.rh=Math.min(Math.max(c.conf.h+b,g.min_h),g.max_h),g.ry=null,c.conf.y+g.rh>a.wins.vp.clientHeight&&(g.rh=a.wins.vp.clientHeight-c.conf.y)):0<=g.mode.indexOf("n")&&(g.rh=Math.min(Math.max(c.conf.h-b,g.min_h),g.max_h),g.ry=c.conf.y+c.conf.h-g.rh,0>g.ry?(g.rh+=g.ry,g.ry=0):g.ry>g.vp_b&&(g.rh-=g.vp_b,g.ry=g.vp_b));a._rAdjustSizer()};this._rOnWinMouseUp=function(){var b=a.conf.resize,e=a.wins.w[a._idd];a.wins.conf.resize_actv=!1;a.wins.vp.style.cursor=b.vp_cursor;e.fr_cover.className=String(e.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,"");b.resized&&(a.wins._winSetSize(a._idd,b.rw,b.rh),null==b.rx&&(b.rx=e.conf.x),null==b.ry&&(b.ry=e.conf.y),b.rx==e.conf.x&&b.ry==e.conf.y||a.wins._winSetPosition(a._idd,b.rx,b.ry));null!=b.obj&&(b.obj.parentNode.removeChild(b.obj),b.obj=null);null!=b.objFR&&(b.objFR.parentNode.removeChild(b.objFR),b.objFR=null);"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",a._rOnWinMouseMove,!1),window.removeEventListener("mouseup",a._rOnWinMouseUp,!1),window.removeEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.detachEvent("onmousemove",a._rOnWinMouseMove),document.body.detachEvent("onmouseup",a._rOnWinMouseUp),document.body.detachEvent("onselectstart",a._rOnSelectStart));1==b.resized?("layout"==a.dataType&&null!=a.dataObj&&a.dataObj.callEvent("onResize",[]),a.wins._callMainEvent("onResizeFinish",a._idd)):a.wins._callMainEvent("onResizeCancel",a._idd);b.mode=""};this._rOnSelectStart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this._rInitSizer=function(){var b=a.conf.resize,e=a.wins.w[a._idd];b.obj=document.createElement("DIV");b.obj.className="dhxwin_resize";b.obj.style.zIndex=e.win.style.zIndex;b.obj.style.cursor=b.mode+"-resize";a.wins.vp.appendChild(b.obj);1==a.wins.conf.fr_cover&&(b.objFR=document.createElement("IFRAME"),b.objFR.className="dhxwin_resize_fr_cover",b.objFR.style.zIndex=b.obj.style.zIndex,a.wins.vp.insertBefore(b.objFR,b.obj));b.rx=e.conf.x;b.ry=e.conf.y;b.rw=e.conf.w;b.rh=e.conf.h};this._rAdjustSizer=function(){var b=a.conf.resize;b.obj||this._rInitSizer();b.obj.style.width=b.rw+"px";b.obj.style.height=b.rh+"px";null!=b.rx&&(b.obj.style.left=b.rx+"px");null!=b.ry&&(b.obj.style.top=b.ry+"px");null!=b.objFR&&(b.objFR.style.width=b.obj.style.width,b.objFR.style.height=b.obj.style.height,null!=b.rx&&(b.objFR.style.left=b.obj.style.left),null!=b.ry&&(b.objFR.style.top=b.obj.style.top))};"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.attachEvent("oncontextmenu",this._rOnCellContextMenu));this._unloadResize=function(){"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu));this._unloadResize=this._rAdjustSizer=this._rInitSizer=this._rOnSelectStart=this._rOnWinMouseUp=this._rOnWinMouseMove=this._rOnCellMouseDown=this._rOnCellMouseMove=this._initResize=null;a=this.conf.resize=null}};dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu("icon",null,null,a)};dhtmlXWindows.prototype.getContextMenu=function(){return null!=this.cm&&null!=this.cm.global?this.cm.global:null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu("icon",this._idd,null,a)};dhtmlXWindowsCell.prototype.getContextMenu=function(){return null!=this.wins.cm&&null!=this.wins.cm.icon[this._idd]?this.wins.cm.icon[this._idd]:null};dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,a)};dhtmlXWindowsButton.prototype.getContextMenu=function(){return null==this.conf.wins.cm||null==this.conf.wins.cm.button[this.conf.winId]?null:null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]?this.conf.wins.cm.button[this.conf.winId][this.conf.name]:null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)};dhtmlXWindows.prototype._renderContextMenu=function(a,b,c,e){var g=this,h=!1;null==this.cm&&(this.cm={global:null,icon:{},button:{}},h=!0);if(null==b){if(null!=this.cm.global)return}else if("icon"==a){if(null!=this.cm.icon[b])return}else if("button"==a&&null!=this.cm.button[b]&&null!=this.cm.button[b][c])return;null==e&&(e={});e.parent=null;e.context=!0;e=new dhtmlXMenuObject(e);e.setAutoHideMode(!1);e.attachEvent("onShow",function(){this.conf.wins_menu_open=!0});e.attachEvent("onHide",function(){this.conf.wins_menu_open=!1;g.conf.opened_menu=null});null==b?this.cm.global=e:"icon"==a?this.cm.icon[b]=e:"button"==a&&(null==this.cm.button[b]&&(this.cm.button[b]={}),this.cm.button[b][c]=e);h&&(this._showContextMenu=function(a,b){if(!(2<=a.button)){if("icon"==b.mode&&null!=b.id&&"mousedown"==b.press_type){var c=this.cm.icon[b.id]||this.cm.global;if(null==c)return;a.cancelBubble=!0;var e=this.w[b.id].hdr.firstChild;c.conf.wins_menu_open&&this.conf.opened_menu==b.id?c.hideContextMenu():(this._hideContextMenu(),c.showContextMenu(window.dhx4.absLeft(e),window.dhx4.absTop(e)+e.offsetHeight),this.conf.opened_menu=b.id)}"button"==b.mode&&null!=b.id&&"mousedown"==b.press_type&&null!=this.cm.button[b.id]&&null!=this.cm.button[b.id][b.button_name]&&(a.cancelBubble=!0,this.conf.button_last=null,c=this.cm.button[b.id][b.button_name],e=this.w[b.id].b[b.button_name].button,c.conf.wins_menu_open&&this.conf.opened_menu==b.id?c.hideContextMenu():(this._hideContextMenu(),c.showContextMenu(window.dhx4.absLeft(e),window.dhx4.absTop(e)+e.offsetHeight),this.conf.opened_menu=b.id))}},this._hideContextMenu=function(a){if(null!=a){a=a||event;if("keydown"==a.type&&27!=a.keyCode)return;for(var b=a.target||a.srcElement,c=!0;null!=b&&1==c;)null!=b.className&&0<=b.className.search(/SubLevelArea_Polygon/)?c=!1:b=b.parentNode}if(c||null==a){null!=g.cm.global&&g.cm.global.hideContextMenu();for(var e in g.cm.icon)null!=g.cm.icon[e]&&g.cm.icon[e].hideContextMenu();for(e in g.cm.button)for(var h in g.cm.button[e])null!=g.cm.button[e][h]&&g.cm.button[e][h].hideContextMenu()}},this._detachContextMenu=function(a,b,c){null!=this.cm&&(null==b?null!=this.cm.global&&(this.cm.global.unload(),this.cm.global=null):"icon"==a?null!=this.cm.icon[b]&&(this.cm.icon[b].unload(),this.cm.icon[b]=null):"button"==a&&null!=this.cm.button[b]&&null!=this.cm.button[b][c]&&(this.cm.button[b][c].unload(),this.cm.button[b][c]=null))},this.attachEvent("_winMouseDown",this._showContextMenu),"function"==typeof window.addEventListener?(window.addEventListener("mousedown",this._hideContextMenu,!1),window.addEventListener("keydown",this._hideContextMenu,!1)):(document.body.attachEvent("onmousedown",this._hideContextMenu),document.body.attachEvent("onkeydown",this._hideContextMenu)),this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null);this.cm=null;"function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._hideContextMenu,!1),window.removeEventListener("keydown",this._hideContextMenu,!1)):(document.body.detachEvent("onmousedown",this._hideContextMenu),document.body.detachEvent("onkeydown",this._hideContextMenu));g=null});return e};function dhtmlXCheckBox(a,b){this.cont="string"==typeof a?document.getElementById(a):a;this.options={skin:b.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcheckbox")||"material",enabled:!0,enableAll:!1,text:"text",value:"value",checked:"checked",data:[],mode:"checkbox"};this.t={};this.lastValue="";window.dhx4._eventable(this);dhtmlXCheckBox.extend(this.options,b);var c=this;this.checked=[];this.base=document.createElement("DIV");this.base.className="dhtmlxcheckbox_"+this.options.skin;this.base.innerHTML="";this._init=function(a){c.addOption(a);c.cont.appendChild(this.base)};this.addOption=function(a,b){b&&dhtmlXCheckBox.extend(c.options,b,!0);c.clearAll();if(a&&0<a.length&&c.isChkAngEnbleAll()){for(var e=1,g=0;g<a.length;g++)if(!a[g].checked){e=0;break}c._renderOption({id:"_dhtmlx_all",value:"allall",text:unescape("%u5168%u9009"),checked:e},!0)}if(a instanceof Array)for(e=0;e<a.length;e++)g={text:a[e].text,value:a[e].value,checked:window.dhx4.s2b(a[e].checked)?1:0,id:a[e].id},c._renderOption(g);else c._renderOption({value:a,text:text});"1"==c.options.qita&&c._renderOther({id:"_dhtmlx_qita",value:"qita",text:unescape("%u5176%u4ED6"),inputText:""},!0);if("radio"==c.options.mode&&a&&0<a.length){var m=0,n="",q=void 0;c._forEachOption2(function(a,b){0==b&&(n=a._value);a._checked&&(m++,void 0==q&&(q=a._value),c.datastore._cursor=a._optId)});0==m?(c.setValue(n),c.datastore._cursor=a[0].id):1<m&&c.setValue(q)}c.lastValue=c.getValue();window.setTimeout(function(){c.callEvent("onLoaded",[c.getValue()])},20)};this._renderOption=function(a,b){var e=document.createElement("DIV");e._checked=a.checked;e._optId=a.id;e._value=a.value;e._text=a.text;e.className="dhtmlxcheckbox_"+c.options.skin+"_opt";var g=document.createElement("DIV");g.className="radio"==c.options.mode?"dhtmlxcheckbox_"+c.options.skin+"_"+(void 0==c.options.style?"rad":c.options.style)+e._checked:"dhtmlxcheckbox_"+c.options.skin+"_"+(void 0==c.options.style?"chk":c.options.style)+e._checked;c.options.enabled||(g.className+="_dis");var m=document.createElement("span");m.className="dhtmlxcheckbox_"+c.options.skin+"_txt";m.innerHTML=e._text;e.appendChild(g);e.appendChild(m);c.base.appendChild(e);e.onclick=function(a){c.options.enabled&&(a=a.target||window.event.srcElement,a._optId||(a=a.parentNode),b&&"allall"==a._value&&a._checked?c._forEachOption2(function(a){a.children[0].className=a.children[0].className.replace(/1/,"0");a._checked=0}):b&&"allall"==a._value&&!a._checked?c._forEachOption2(function(a){a.children[0].className=a.children[0].className.replace(/0/,"1");a._checked=1}):"checkbox"==c.options.mode?(a._checked?(a.children[0].className=a.children[0].className.replace(/1/,"0"),a._checked=0):(a.children[0].className=a.children[0].className.replace(/0/,"1"),a._checked=1),c.options.enableAll&&(c.isCheckedAll()?(c.t._dhtmlx_all.children[0].className=a.children[0].className.replace(/0/,"1"),c.t._dhtmlx_all._checked=1):(c.t._dhtmlx_all.children[0].className=a.children[0].className.replace(/1/,"0"),c.t._dhtmlx_all._checked=0))):"radio"!=c.options.mode||a._checked||(c._forEachOption2(function(a){a.children[0].className=a.children[0].className.replace(/1/,"0");a._checked=0}),a.children[0].className=a.children[0].className.replace(/0/,"1"),a._checked=1),c.lastValue!=c.getValue()&&(c.callEvent("onCheckChanged",[c.getValue(),c.lastValue]),c.lastValue=c.getValue()),c.callEvent("onClick",[c.getValue()]))};c.t[e._optId]=e;return e._optId};this._renderOther=function(a){var b=document.createElement("DIV");b._checked=0;b._optId=a.id;b._value=a.value;b._text=a.text;b.className="dhtmlxcheckbox_"+c.options.skin+"_opt_qita";a=document.createElement("span");a.className="dhtmlxcheckbox_"+c.options.skin+"_txt";a.innerHTML=b._text;b.appendChild(a);a=document.createElement("input");a.className="dhtmlxcheckbox_"+c.options.skin+"_input";b.appendChild(a);c.base.appendChild(b);c.t[b._optId]=b;return b._optId};c._init(c.options.data);return this}dhtmlXCheckBox.prototype.show=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a);this.base.style.display=1==a?"":"none"};dhtmlXCheckBox.prototype.hide=function(a){"undefined"==typeof a&&(a=!0);this.show(!a)};dhtmlXCheckBox.prototype.isVisible=function(){return""==this.base.style.display};dhtmlXCheckBox.prototype.enable=function(a){void 0==a&&(a=!0);this.options.enabled=a;var b=this;this._forEachOption2(function(c){b._enableOption(c._optId,a)})};dhtmlXCheckBox.prototype.disable=function(){this.enable(!1)};dhtmlXCheckBox.prototype._enableOption=function(a,b){b?this.t[a].children[0].className=this.t[a].children[0].className.replace(/_dis/,""):/_dis/.test(this.t[a].children[0].className)||("_dhtmlx_qita"==a?this.t[a].children[1].disabled="disabled":this.t[a].children[0].className+="_dis")};dhtmlXCheckBox.prototype.setAlign=function(a,b){var c=this;if("0"==a)"center"==b?this._forEachOption2(function(a){c.t[a._optId].style.marginLeft=(c.base.clientWidth-c.t[a._optId].clientWidth)/2+"px"}):this._forEachOption2(function(a){c.t[a._optId].style["float"]="none"});else if("center"==b){var e=[],g=0,h=[];this._forEachOption2(function(a){(h[g]||0)+c.t[a._optId].clientWidth<c.base.clientWidth?(e[g]=e[g]||[],e[g].push(c.t[a._optId]),h[g]=(h[g]||0)+c.t[a._optId].clientWidth):e[g]&&0!=e[g].length?(g++,e[g]=e[g]||[],e[g].push(c.t[a._optId]),h[g]=(h[g]||0)+c.t[a._optId].clientWidth):(e[g]=e[g]||[],e[g].push(c.t[a._optId]),h[g]=(h[g]||0)+c.t[a._optId].clientWidth,g++)});for(var l=0;l<e.length;l++){for(var m=0;m<e[l].length;m++)e[l][m].style["float"]="left";e[l][0].style.marginLeft=(c.base.clientWidth-h[l])/2+"px"}}else"right"==b?this._forEachOption2(function(a){c.t[a._optId].style["float"]="right"}):this._forEachOption2(function(a){c.t[a._optId].style["float"]="left"})};dhtmlXCheckBox.prototype.setColAlign=function(a){var b=this;a=parseInt(a);var c=[],e=0;this._forEachOption2(function(g){var h=c[e%a];c[e%a]=h?Math.max(h,b.t[g._optId].clientWidth):b.t[g._optId].clientWidth;e++});var g=eval(c.join("+"))||0;if(b.base.clientWidth<g)for(var h=Math.floor(b.base.clientWidth/a),g=0;g<c.length;g++)c[g]=h;else if(h=b.base.clientWidth-g-a,0<h)for(g=0;g<c.length;g++)c[g]+=h/a;e=0;this._forEachOption2(function(g){b.t[g._optId].style.width=c[e%a]+"px";b.t[g._optId].style["float"]="left";e++})};dhtmlXCheckBox.prototype.setRowMargin=function(a){var b=this;this._forEachOption2(function(c){var e=Math.round(c.clientHeight*(parseInt(a)/100))/2;b.t[c._optId].style.marginTop=e+"px";b.t[c._optId].style.marginBottom=e+"px"})};dhtmlXCheckBox.prototype.clearSelectStatus=function(){for(var a in this.t)this.t[a].childNodes[0].style.border="0px solid #FFFFFF"};dhtmlXCheckBox.prototype.moveToNext=function(){this.clearSelectStatus();var a=this.currentSelectId;if(a){var b=!1;for(c in this.t){if(b){a=this.currentSelectId=c;break}a==c&&(a=this.currentSelectId=null,b=!0)}}else for(var c in this.t){a=this.currentSelectId=c;break}this.t[a]&&(this.t[a].childNodes[0].style.border="0px dotted #A0A0A0");return a};dhtmlXCheckBox.prototype.moveToPre=function(){this.clearSelectStatus();var a=this.currentSelectId;if(a){var b=0,c;for(e in this.t){if(a==e&&0==b){a=this.currentSelectId=null;break}if(a==e){a=this.currentSelectId=c;break}c=e;b++}}else for(var e in this.t)a=this.currentSelectId=e;this.t[a]&&(this.t[a].childNodes[0].style.border="0px dotted #A0A0A0");return a};dhtmlXCheckBox.prototype.setValue=function(a){if(a){a+="";var b=this,c=a.split(",").map(function(a){return dhx4.trim(a)});this.checkAll(!1);"radio"==this.options.mode?this._forEachOption2(function(a,e){a._value==c[0]&&b._check(a._optId,!0)}):"checkbox"==this.options.mode&&this._forEachOption2(function(a,e){-1!=c.indexOf(a._value)&&b._check(a._optId,!0)});if(b.t._dhtmlx_qita){var e=function(a){var b=document.getElementById("__getwidth");null==b&&(b=document.createElement("span"),b.id="__getwidth",document.body.appendChild(b),b.style.visibility="hidden",b.style.whiteSpace="nowrap");b.innerText=a;b.style.fontSize="13.5px";return b.offsetWidth},g=b.t._dhtmlx_qita.children[1];g&&(a=a.replace(/,/g,"").replace(/\*=\*/g,","),g.value=a,g.style.width=(100<e(a)?e(a):100)+"px")}}else"radio"!=this.options.mode&&this.checkAll(!1)};dhtmlXCheckBox.prototype._check=function(a,b){b&&(this.t[a].children[0].className=this.t[a].children[0].className.replace(/0/,"1"),this.t[a]._checked=1)};dhtmlXCheckBox.prototype.checkAll=function(a){"radio"!=this.options.mode&&(a?this._forEachOption(function(a){a.children[0].className=a.children[0].className.replace(/0/,"1");a._checked=1}):this._forEachOption(function(a){a.children[0].className=a.children[0].className.replace(/1/,"0");a._checked=0}))};dhtmlXCheckBox.prototype.clearAll=function(){var a=this;this._forEachOption2(function(b){a._removeOption(b._optId)})};dhtmlXCheckBox.prototype._removeOption=function(a){this.base.removeChild(this.t[a]);delete this.t[a]};dhtmlXCheckBox.prototype._getIndexById=function(a){this._forEachOption(function(b,c){if(b==a)return c})};dhtmlXCheckBox.prototype.getValue=function(){var a=[],b=!1,c="";this._forEachOption2(function(e){b=!0;"_dhtmlx_all"!=e._optId&&("_dhtmlx_qita"==e._optId?c=e.childNodes[1].value:e._checked&&a.push(e._value))});c&&a.push(c);return b?a.join(this.options.seperator):null};dhtmlXCheckBox.prototype.getText=function(){var a=[];this._forEachOption2(function(b){"_dhtmlx_all"!=b._optId&&("_dhtmlx_qita"==b._optId?qitaText=b.childNodes[1].value:b._checked&&a.push(b._text))});qitaText&&a.push(qitaText);return a.join(this.options.seperator)};dhtmlXCheckBox.prototype._forEachOption=function(a){var b=0;for(id in this.t)"checkbox"==this.options.mode&&this.options.enableAll&&"_dhtmlx_all"!=id&&a.apply(window,[this.t[id],b-1]),b++};dhtmlXCheckBox.prototype._forEachOption2=function(a){var b=0;for(id in this.t)a.apply(window,[this.t[id],b]),b++};dhtmlXCheckBox.prototype.isChkAngEnbleAll=function(){return this.options.enableAll&&"checkbox"==this.options.mode};dhtmlXCheckBox.prototype.isCheckedAll=function(){if("radio"==this.options.mode)return!1;for(id in this.t)if("_dhtmlx_all"!=id&&!this.t[id]._checked)return!1;return!0};dhtmlXCheckBox.extend=function(a,b){for(var c in b)a[c]=b[c];return a};function dhtmlXFileUpload(a,b){var c=this;window.dhx4._eventable(this);if("string"==typeof b.mode&&"function"==typeof this[b.mode])this.engine=b.mode;else{this.engine="html4";var e=null;"undefined"!=typeof window.FormData&&"undefined"!=typeof window.XMLHttpRequest&&(e=new XMLHttpRequest,"undefined"==typeof e.upload&&(e=null));if(null!=e)this.engine=this.engine="html5";else if("undefined"!=typeof window.swfobject||!1===e)e=swfobject.getFlashPlayerVersion(),32<=e.major?this.engine="flash":Ext.Msg.confirm("\u63d0\u793a!","\u5f53\u524dflash\u7248\u672c\u4f4e\uff0c\u662f\u5426\u7acb\u5373\u4e0b\u8f7d\u4fee\u590d?",function(a){"yes"==a&&window.open(b.flashPath)});else if(this._sl_v=this.getSLVersion())this.engine="sl";e=null}"string"==typeof a&&(a=document.getElementById(a));this.base=a;this._upload_mp="undefined"!=typeof b.multiple?1==b.multiple:!0;this._upload_dnd=!0;this._swf_file_url=b.swfPath||"";this._swf_upolad_url=b.swfUrl||"";this._swf_logs=b.swfLogs;this._sl_xap=b.slXap||"";this._sl_upload_url=b.slUrl||"";this._sl_logs=b.slLogs||"";this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";a.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._oldFiles={};this._data={};this._autoRemove=this._autoStart=!1;this._enabled=this._titleScreen=!0;this._uploaded_count=0;this._fileType=b.fileType;this._showmode=b.showmode;this._numPerPage=b.numPerPage;this._cols=b.cols;this._isShowAll=b.isShowAll;this._dataHost=b.dataHost;this._wdkHost=b.wdkHost;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){c._enabled&&(c._uploading||c._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){c._enabled&&(c._uploadStop(),c._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){c._enabled&&c.clear()},tooltip:"Clear list"}};this.buttons={};for(var a in this.b_opts){var b=document.createElement("DIV");b.innerHTML="\x26nbsp;";b.className="dhx_file_uploader_button button_"+a;b.onclick=this.b_opts[a].onclick;this.b_opts[a].tooltip&&(b.title=this.b_opts[a].tooltip);this.p_controls.appendChild(b);this.buttons[a]=b;b=null}};this._readableSize=function(a){for(var b=!1,c="b Kb Mb Gb Tb Pb Eb".split(" "),e=0;e<c.length;e++)1024<a?a/=1024:!1===b&&(b=e);!1===b&&(b=c.length-1);return Math.round(100*a)/100+" "+c[b]};this._beforeAddFileToList=function(a,b){return!0===this.callEvent("onBeforeFileAdd",[a,b])};this.setDatas=function(a){this.datas=a};this.addItems=function(){if(this.datas&&0!=this.datas.length){var a=this;this.p_files.innerHTML="";this._files={};this._items={};this._oldFiles={};if(this.isWdk){var b=new HwFao(this._dataHost,"wdk"),c=this.datas.map(function(a){return a.docid});b.getWdkBrowseUrl(this._wdkHost,"vmdcode",c.join(","),function(b){if(b.isSucceed&&b.data){for(var e=0;e<b.data.length;e++)a.addItem(b.data[e]);a.doLayout()}else Ext.Msg.show({title:"\u63d0\u793a",msg:"\u67e5\u8be2\u6587\u4ef6\u4fe1\u606f\u5931\u8d25\uff01\u6587\u4ef6id\uff1a"+c.join(","),buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},function(a){Ext.Msg.alert("\u9519\u8bef\u4fe1\u606f",a,function(){})})}else for(b=0;b<this.datas.length;b++)this.addItem(this.datas[b]);this.doLayout()}};this.addItem=function(a){if(a){var b=a.url||a.path||"",c=a.url||"",e=a.name||b.substr(b.lastIndexOf("/")+1),g=(a.extend||b.substr(b.lastIndexOf(".")+1)||"").replace(".",""),h=a.size||"",v=a.docid||"",u=this.val&&this.val.split(",")||[];(this._isShowAll||(this.isWdk?v&&-1!=u.indexOf(v):b&&-1!=u.indexOf(b)))&&this._addServerFileToList(a.docid||a.id,e,b,c,h,g,v,"uploaded","nochange")}};this._addServerFileToList=function(a,b,e,g,q,r,v,u,x){this._checkTitleScreen();var h=document.createElement("DIV");h._idd=a;h._server=!0;h.className="dhx_file dhx_file_"+u;h.innerHTML="\x3cdiv class\x3d'dhx_file_param dhx_file_name'\x3e"+b+"\x3c/div\x3e\x3cdiv class\x3d'dhx_file_param dhx_file_progress'\x3e%\x3c/div\x3e\x3cdiv class\x3d'dhx_file_param dhx_file_delete' title\x3d'Remove from list'\x3e\x26nbsp;\x3c/div\x3e";this.p_files.appendChild(h);this._items[a]=h;this.timestamp=this.timestamp||(new Date).valueOf();this._files[a]={server:!0,file:null,name:b,size:q,state:u,path:e,relativePath:g,ext:r,id:v,timestamp:this.timestamp++,storageState:x};this._oldFiles[a]=this._files[a];h.childNodes[2].onclick=function(){c._enabled&&c._removeFileFromQueue(this.parentNode._idd)};this.callEvent("onFileAdd",[this.id,b,a])};this._addFileToList=function(a,b,e,g,q){this._checkTitleScreen();e=document.createElement("DIV");e._idd=a;e.className="dhx_file dhx_file_"+g;e.innerHTML="\x3cdiv class\x3d'dhx_file_param dhx_file_name'\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d'dhx_file_param dhx_file_progress'\x3e"+q+"%\x3c/div\x3e\x3cdiv class\x3d'dhx_file_param dhx_file_delete' title\x3d'Remove from list'\x3e\x26nbsp;\x3c/div\x3e";this.p_files.appendChild(e);this._items[a]=e;this._updateFileNameSize(a);this._items[a].childNodes[0].onmouseover=function(a){a=a||window.event;a.cancelBubble=!0;var b=a.pageX,c=a.pageY;void 0==b&&(b=a.clientX+document.body.scrollLeft||document.documentElement.scrollLeft);void 0==c&&(c=a.clientY+document.body.scrollTop||document.documentElement.scrollTop);a=document.createElement("div");a.id="upload_tip_"+this.id;a.style.position="absolute";a.style.top=c+10+"px";a.style.left=b+"px";a.style.border="1px solid #666";a.style.background="#FFFFFF";a.style.textIndent=0;a.style.display="";a.innerHTML=this.innerText;document.getElementsByTagName("body")[0].appendChild(a);return!1};this._items[a].childNodes[0].onmouseout=function(){var a=document.getElementById("upload_tip_"+this.id);a&&a.parentNode.removeChild(a)};e.childNodes[2].onclick=function(){c._enabled&&c._removeFileFromQueue(this.parentNode._idd)};this.callEvent("onFileAdd",[this.id,b,a])};this._removeFileFromList=function(a){this._items[a]&&(this._items[a].childNodes[2].onclick=null,this._items[a].parentNode.removeChild(this._items[a]),this._items[a]=null,delete this._items[a],this._data[a]&&(this._data[a]=null,delete this._data[a]),this._checkTitleScreen())};this._getAddFileCount=function(){var a=0,b;for(b in this._files)this._files.hasOwnProperty(b)&&"delete"!=this._files[b].storageState&&a++;return a};this._displayFileToArea=function(a,b,c,e,g){var h=this._items[a],l=this._files[a];a=h.childNodes[0];var n=h.childNodes[1],m=h.childNodes[2];h.style.top=b+"px";h.style.left=c+"px";h.style.width=e+"px";h.style.height=g+"px";h.style.position="absolute";a.style.top=(g-a.clientHeight)/2+"px";n.style.top=(g-n.clientHeight)/2+"px";m.style.top=(g-m.clientHeight)/2+"px";b=-1==l.path.indexOf("http://")?"http://"+this._dataHost.replace("http://","")+"/wdk/"+l.path:l.path;a.innerHTML="\x3ca target\x3d'_blank' style\x3d'text-align:left' href\x3d'"+b+"'\x3e"+a.innerHTML+"\x3c/a\x3e";n.style.visibility="hidden";this._deletable||(m.style.visibility="hidden")};this._displayImageToArea=function(a,b,c,e,g,r,v){var h=this,l=this._items[a],n=this._files[a];0==l.childNodes.length&&(l.innerHTML="\x3cdiv class\x3d'dhx_file_param dhx_file_name'\x3e"+name+"\x3c/div\x3e\x3cdiv class\x3d'dhx_file_param dhx_file_progress'\x3e%\x3c/div\x3e\x3cdiv class\x3d'dhx_file_param dhx_file_delete' title\x3d'Remove from list'\x3e\x26nbsp;\x3c/div\x3e");var m=l.childNodes[0],q=l.childNodes[1],C=l.childNodes[2];C.onclick=function(){h._enabled&&dhtmlXFileUpload.prototype.html5.prototype._removeFileFromQueue.call(h,[this.parentNode._idd])};l.style.top=b+"px";l.style.left=c+"px";l.style.width=e+"px";l.style.height=g+"px";l.style.position="absolute";var F,D=function(a,b){var c=e/g,h=a.width/a.height;"ActualSize"==r?a.height<g&&(a.style.top=(g-a.height)/2+"px"):"Extend"==r?(a.width=e,a.height=g):"Hextend"==r?(c=a.height,a.width=e,c<g&&(a.height=c),a.style.top=(g-a.height)/2+"px"):"Vextens"==r?(c=a.width,a.height=g,c<a.width&&(a.width=c)):"Fill"!=r&&"EqualScaling"==r&&(c>h?(a.height=g-2,a.width=g*h,a.style.left=(e-a.width)/2+"px",a.style.top="1px"):(a.width=e-2,a.height=e/h,a.style.left="1px",a.style.top=(g-a.height)/2+"px"));v&&v.apply(b,[])},E=new Image;this._items[a].removeChild(m);E.onload=function(){E.complete&&E.height&&E.width?D(this,h):F=setInterval(function(){E.complete&&E.height&&E.width?(D(E,h),F&&clearInterval(F)):E.src=-1==n.path.indexOf("http://")?"http://"+this._dataHost.replace("http://","")+"/wdk/"+n.path:n.path},40)};E.src=-1==n.path.indexOf("http://")?"http://"+this._dataHost.replace("http://","")+"/wdk/"+n.path:n.path;E.ondragstart=function(){return!1};E.onclick=function(){h.callEvent("onImgClick",[n])};E.style.cursor="pointer";E.style.position="relative";l.insertBefore(E,q);C.style.top=(g-12)/2+"px";C.style.right="5px";q.style.visibility="hidden";this._deletable||(C.style.visibility="hidden")};this.doLayout=function(){var a=this._getAddFileCount(),b=this._numPerPage||a||1,c=Math.min(b,this._cols),e=this._showmode,g=Math.ceil(a/b),r=this.base.parentNode.clientHeight,v=0,u=0,x=this.base.parentNode.clientWidth,w=this.base.parentNode.clientHeight/Math.ceil(a/c),x=a>=c?this.base.parentNode.clientWidth/c:this.base.parentNode.clientWidth/a,a=[];for(fileID in this._files)"delete"!=this._files[fileID].storageState&&(this._files[fileID].fileID=fileID,a.push(this._files[fileID]),this._items[fileID].style.pageBreakAfter="");for(v=0;v<a.length;v++)for(u=0;u<a.length;u++)if(a[v].timestamp<a[u].timestamp){var A=a[u];a[u]=a[v];a[v]=A}if("image"==this._fileType){A=[];for(v=0;v<g;v++)A[v]=[];for(v=u=0;v<a.length;v++)A[u].length==b&&u++,A[u].push(a[v]);this.p_files.innerHTML="";b=Math.ceil(b/c);0<b&&(w=r/b);for(v=0;v<g;v++){var r=A[v],y=document.createElement("table");y.style.borderSpacing="0px";y.style.borderCollapse="collapse";y.style.textAlign="left";v!=g-1&&(y.style.pageBreakAfter="always");this.p_files.appendChild(y);for(u=0;u<b;u++){var C=document.createElement("tr");C.style.height=w+"px";y.appendChild(C);for(var F=Math.min(c,a.length),D=0;D<F;D++){var E=document.createElement("td");E.style.borderWidth="0px";E.style.height=w+"px";E.style.width=x+"px";E.style.position="relative";E.style.padding="0px";C.appendChild(E);var H=r[u*c+D];if(H){var I=this._items[H.fileID];I&&(E.appendChild(I),this._displayImageToArea(H.fileID,0,0,x,w,e,function(){}))}}}}}else for(e=0;e<a.length;e++)v=e%c*x,u=parseInt(e/c)*w,this._displayFileToArea(a[e].fileID,u,v,x,w)};this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(isNaN(this._files[a].size)?"\x26nbsp;":" ("+this._readableSize(this._files[a].size)+")");this._items[a].childNodes[0].title=this._files[a].name+(isNaN(this._files[a].size)?"":" ("+this._readableSize(this._files[a].size)+")");this._items[a].childNodes[0].id=a};this._updateFileInList=function(a,b,c){this._items[a]&&(this._items[a].className="dhx_file dhx_file_"+b,this._updateProgress(a,b,c),this._updateFileNameSize(a))};this.showProgress=function(){this.p_progress||(this.p_progress=document.createElement("DIV"),this.p_progress.className="dhx_upload_progress",this.p.appendChild(this.p_progress))};this.hideProgress=function(){this.p_progress&&(this.p_progress.parentNode.removeChild(this.p_progress),this.p_progress=null)};this._updateProgress=function(a,b,c){"uploading"==b&&100>c&&"loader"==this._progress_type?(this._items[a].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[a].childNodes[1].innerHTML="\x26nbsp;"):(this._items[a].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[a].childNodes[1].innerHTML=c+"%");this._updateFileNameSize(a)};this._removeFilesByState=function(a){for(var b in this._files)!0!==a&&this._files[b].state!=a||dhtmlXFileUpload.prototype.html5.prototype._removeFileFromQueue.call(this,[b])};this._removeFilesDoms=function(a){if(a)for(var b in this._files)this._files[b].server=!1,this._removeFileFromQueue(b,!1)};this._switchButton=function(a){1==a?(this.buttons.upload.style.display="none",this.buttons.cancel.style.display=""):(a=this._uploaded_count,this.buttons.upload.style.display="",this.buttons.cancel.style.display="none",this._uploaded_count=0,0<a&&this.callEvent("onUploadComplete",[a]))};this._uploadStart=function(){this._switchButton(!0);if(!this._uploading)for(var a in this._files)"fail"==this._files[a].state&&(this._files[a].state="added",this._updateFileInList(a,"added",0));this._uploading=!0;var b=!1;for(a in this._files)b||"added"!=[this._files[a].state]||(b=!0,this._files[a].state="uploading",this._updateFileInList(a,"uploading",0),this._doUploadFile(a));b||(this._uploading=!1,this._switchButton(!1))};this._onUploadSuccess=function(a,b,c,e){if("undefined"!=typeof c&&"flash"==this.engine){dhx4.temp=null;try{eval("dhx4.temp\x3d"+c.data)}catch(r){dhx4.temp=null}var g=dhx4.temp;c=c.data;dhx4.temp=null;if(null==g||!g.isSucceed){this._onUploadFail(a,null!=g&&null!=g.extra?g.extra:null);return}}else c=this._loader&&this._loader.responseText;this._uploaded_count++;this._data[a]={realName:this._files[a].name,serverName:b};this._files[a].state="uploaded";this.timestamp=this.timestamp||(new Date).valueOf();this._files[a].timestamp=this.timestamp++;this._files[a].storageState="save";this._updateFileInList(a,"uploaded",100);this.callEvent("onUploadFile",[this._files[a].name,b,e,g,c,this.id,a]);this._autoRemove&&this._removeFileFromQueue(a);this._uploading&&this._uploadStart()};this._onUploadFail=function(a,b){this._files[a].state="fail";this._updateFileInList(a,"fail",0);this.callEvent("onUploadFail",[this._files[a].name,b]);this._uploading&&this._uploadStart()};this._onUploadAbort=function(a){this._uploading=!1;this._files[a].state="added";this._updateFileInList(a,"added",0);this.callEvent("onUploadCancel",[this._files[a].name])};this._checkTitleScreen=function(){var a=0,b;for(b in this._files)a++;0==a&&0>this.p.className.search("dhx_file_uploader_title")&&this._titleScreen&&(this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px");(0<a||!this._titleScreen)&&0<=this.p.className.search("dhx_file_uploader_title")&&(this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML="")};this.checkAllUpload=function(){for(var a in this._files)if("uploaded"!=this._files[a].state)return!1;return!0};this.upload=function(){this._uploading||this._uploadStart()};this.setIsWdk=function(a){this.isWdk=a};this.setUploadPath=function(a){this.uploadPath=a};this.setDeletable=function(a){this._deletable=a;a||(this.buttons.browse.style.right="40px");this.buttons.clear.style.display=a?"block":"none"};this.setAddable=function(a){this._addable=a;a||(this.buttons.clear.style.right="40px");this.buttons.browse.style.display=a?"block":"none"};this.setUploadable=function(a){this._uploadable=a;this.buttons.upload.style.display=a?"block":"none"};this.setCancelable=function(a){this._cancelable=a;this.buttons.cancel.style.display=a?"block":"none"};this.setInfoable=function(a){this._infoable=a;this.buttons.info.style.display=a?"block":"none"};this.setAutoStart=function(a){this._autoStart=1==a};this.setAutoRemove=function(a){this._autoRemove=1==a};this.enableTitleScreen=function(a){this._titleScreen=1==a;this._checkTitleScreen()};this.setTitleText=function(a){this._titleText=a;0<=this.p.className.search("dhx_file_uploader_title")&&(this.buttons.info.innerHTML=this._titleText)};this.setURL=function(a){this._url=a};this.setSWFURL=function(a){this._swf_upolad_url=a};this.enable=function(){this._enabled=!0;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=!1;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var a=0,b;for(b in this._files){if("uploaded"!=this._files[b].state)return-1;a=1}return a};this.getData=function(){return this._data};this.clear=function(){!0===this.callEvent("onBeforeClear",[])&&(this._uploading&&c._uploadStop(),c._switchButton(!1),c._removeFilesByState(!0),this.callEvent("onClear",[]))};this.unload=function(){this._removeFilesByState(!0);this._items=this._files=this._data=null;this._unloadEngine();for(var a in this.buttons)this.buttons[a].onclick=null,this.buttons[a].parentNode.removeChild(this.buttons[a]),this.buttons[a]=null,delete this.buttons[a];this.buttons=null;for(a in this.b_opts)this.b_opts[a].onclick=null,this.b_opts[a]=null,delete this.b_opts[a];this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(a in this)this[a]=null;c=null};var e=new this[this.engine],g;for(g in e)this[g]=e[g],e[g]=null;g=e=a=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUpload.prototype.html5=function(){};dhtmlXFileUpload.prototype.html5.prototype={_initEngine:function(){var a=this;this.buttons.browse.onclick=function(){a._enabled&&a.f.click()};this._progress_type="percentage";var b=window.navigator.userAgent;null!=b.match(/Windows/gi)&&null!=b.match(/AppleWebKit/gi)&&null!=b.match(/Safari/gi)&&(b.match(/Version\/5\.1\.5/gi)&&(this._upload_mp=!1),b.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this._upload_dnd=!1),b.match(/Version\/5\.1\.1/gi)&&(this._upload_dnd=this._upload_mp=!1),b.match(/Version\/5\.1\.2/gi)&&(this._upload_dnd=!1),b.match(/Version\/5\.1\.7/gi)&&(this._upload_mp=!1));this._addFileInput();this._upload_dnd?(this.p.ondragenter=function(a){a.dataTransfer&&(a.stopPropagation(),a.preventDefault())},this.p.ondragover=function(a){a.dataTransfer&&(a.stopPropagation(),a.preventDefault())},this.p.ondrop=function(b){b.dataTransfer&&(b.stopPropagation(),b.preventDefault(),a._enabled&&a._parseFilesInInput(b.dataTransfer.files))},this._titleText="Drag-n-Drop files here or\x3cbr\x3eclick to select files for upload."):this._titleText="Click to select files for upload."},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var a=this;this.f=document.createElement("INPUT");this.f.type="file";"image"==this._fileType&&(this.f.accept="image/gif,image/jpeg,image/jpg,image/png");this._upload_mp&&(this.f.multiple="1");this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);a._addFileInput()}},_doUploadFile:function(a){var b=this;this._loader||(this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(a){"uploading"==b._files[this._idd].state&&b._updateFileInList(this._idd,"uploading",Math.round(100*a.loaded/a.total))},this._loader.onload=function(a){dhx4.temp=null;try{eval("dhx4.temp\x3d"+this.responseText)}catch(g){}a=dhx4.temp;dhx4.temp=null;"object"==typeof a&&null!=a&&"undefined"!=typeof a.isSucceed&&1==a.isSucceed?b._onUploadSuccess(this.upload._idd,a.data[0].name,null):b._onUploadFail(this.upload._idd,null!=a&&null!=a.extra?a.extra:null)},this._loader.onerror=function(a){b._onUploadFail(this.upload._idd)},this._loader.onabort=function(a){b._onUploadAbort(this.upload._idd)});this._loader.upload._idd=a;var c=new FormData;c.append("file",this._files[a].file);this.ruleJson&&this.fldtJson&&(c.append(this.ruleJson.key,this.ruleJson.value),c.append(this.fldtJson.key,this.fldtJson.value));this._loader.open("POST",this._url+(0>String(this._url).indexOf("?")?"?":"\x26")+"mode\x3dhtml5\x26isWdk\x3d"+this.isWdk+(this.uploadPath?"\x26uploadPath\x3d"+escape(this.uploadPath):"")+"\x26dhxr"+(new Date).getTime(),!0);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(c)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(a){for(var b=0;b<a.length;b++)this._addFileToQueue(a[b])},_addFileToQueue:function(a){if(this._beforeAddFileToList(a.name,a.size)){var b=a._idd||window.dhx4.newId();this._files[b]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(b,a.name,a.size,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(a,b){if(this._files[a]&&"delete"!=this._files[a].storageState){var c=this._files[a].name,e=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;if(!1===b||!0===this.callEvent("onBeforeFileRemove",[c,e])){var g=!1;this._uploading&&a==this._loader.upload._idd&&"uploading"==this._files[a].state&&(this._uploadStop(),g=!0);var h=this._files[a].timestamp;this._files[a].server&&(this._delFiles=this._delFiles||{},this._delFiles[a]={id:this._files[a].id,name:this._files[a].name,path:this._files[a].path,size:this._files[a].size,storageState:"delete"});this._files[a].file=null;this._files[a].name=null;this._files[a].size=null;this._files[a].state=null;this._files[a]=null;delete this._files[a];var l=this._items[a].dataID;this._removeFileFromList(a);this.callEvent("onFileRemove",[c,e,this.id,l,h]);g&&this._uploadStart()}}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader=this._loader.upload._idd=null);this._unloadEngine=this._removeFileFromQueue=this._addFileToQueue=this._parseFilesInInput=this._uploadStop=this._doUploadFile=this._initEngine=null}};dhtmlXFileUpload.prototype.html4=function(){};dhtmlXFileUpload.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button\x3cbr\x3eto select files for upload."},_addForm:function(){var a=this,b=window.dhx4.newId();this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+window.dhx4.newId(),this.k.innerHTML='\x3ciframe name\x3d"'+this.fr_name+'" style\x3d"height:0px;width:0px;" frameBorder\x3d"0"\x3e\x3c/iframe\x3e',this.fr=this.k.firstChild,0<=window.navigator.userAgent.indexOf("MSIE")?this.fr.onreadystatechange=function(){"complete"==this.readyState&&a._onLoad()}:this.fr.onload=function(){a._onLoad()});var c=document.createElement("DIV");this.ruleJson||(this.ruleJson={},this.ruleJson.value="{}");this.fldtJson||(this.fldtJson={},this.fldtJson.value="{}");c.innerHTML="\x3cform method\x3d'POST' enctype\x3d'multipart/form-data' target\x3d'"+this.fr_name+"' class\x3d'dhx_file_form' name\x3d'dhx_file_form_"+window.dhx4.newId()+"'\x3e\x3cinput type\x3d'hidden' name\x3d'mode' value\x3d'html4'\x3e\x3cinput type\x3d'hidden' name\x3d'uid' value\x3d'"+b+"'\x3e\x3cinput type\x3d'hidden' name\x3d'rulejson' value\x3d'"+this.ruleJson.value+"'\x3e\x3cinput type\x3d'hidden' name\x3d'fldtjson' value\x3d'"+this.fldtJson.value+"'\x3e\x3cinput type\x3d'file' name\x3d'file' class\x3d'dhx_file_input'\x3e\x3c/form\x3e";this.k.appendChild(c);c.firstChild.lastChild._idd=b;c.firstChild.lastChild.onchange=function(){a._beforeAddFileToList(this.value,null)&&(a._addFileToQueue(this),this.onchange=null,this.parentNode.parentNode.style.display="none",a._addForm())};c=null},_onLoad:function(){if(this._uploading){dhx4.temp=null;try{eval("dhx4.temp\x3d"+this.fr.contentWindow.document.body.innerHTML)}catch(b){}var a=dhx4.temp;dhx4.temp=null;if("object"==typeof a&&null!=a&&"undefined"!=typeof a.state){if("cancelled"==a.state){this._onUploadAbort(this.fr._idd);return}if(1==a.state){"undefined"==typeof a.size||isNaN(a.size)||(this._files[this.fr._idd].size=a.size);this._onUploadSuccess(this.fr._idd,a.name,null,a);return}}this._onUploadFail(this.fr._idd,null!=a&&null!=a.extra?a.extra:null)}},_addFileToQueue:function(a){var b=a.value.match(/[^\\\/]*$/g),b=null!=b[0]?b[0]:a.value;this._files[a._idd]={name:b,form:a.parentNode,node:a.parentNode.parentNode,input:a,state:"added"};this._addFileToList(a._idd,a.value,!1,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a,b){var c=this._files[a].name,e=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;if(!1===b||!0===this.callEvent("onBeforeFileRemove",[c,e])){var g=this._files[a].timestamp;this._files[a].server&&(this._delFiles=this._delFiles||{},this._delFiles[a]={id:this._files[a].id,name:this._files[a].name,path:this._files[a].path,size:this._files[a].size,storageState:"delete"});this._files[a].input.onchange=null;this._files[a].form.removeChild(this._files[a].input);this._files[a].node.removeChild(this._files[a].form);this._files[a].node.parentNode.removeChild(this._files[a].node);this._files[a].input=null;this._files[a].name=null;this._files[a].form=null;this._files[a].node=null;this._files[a].size=null;this._files[a].state=null;this._files[a]=null;delete this._files[a];var h=this._items[a].dataID;this._removeFileFromList(a);this.callEvent("onFileRemove",[c,e,this.id,h,g])}},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this.ruleJson&&"rulejson"==this._files[a].form[2].name&&(this._files[a].form[2].value=this.ruleJson.value);this.fldtJson&&"fldtjson"==this._files[a].form[3].name&&(this._files[a].form[3].value=this.fldtJson.value);this._files[a].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(0>this._url.indexOf("?")?"?":"\x26")+"mode\x3dhtml4\x26isWdk\x3d"+this.isWdk+(this.uploadPath?"\x26uploadPath\x3d"+escape(this.uploadPath):"")+"\x26action\x3dcancel\x26dhxr"+(new Date).getTime())},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null);this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._onLoad=this._addForm=this._initEngine=null}};dhtmlXFileUpload.prototype.flash=function(){};dhtmlXFileUpload.prototype.flash.prototype={_initEngine:function(){window.dhtmlXFileUploaderSWFObjects||(window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(a,c,e){return window.dhtmlXFileUploaderSWFObjects.items[a].uploader[c].apply(window.dhtmlXFileUploaderSWFObjects.items[a].uploader,e)}});this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+(0<=this._swf_file_url.indexOf("?")?"\x26":"?")+"dhxr"+(new Date).getTime();this.buttons.browse.innerHTML="\x3cdiv id\x3d'"+this._swf_obj_id+"' style\x3d'width:100%;height:100%;'\x3e\x3c/div\x3e";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited\x3cbr\x3eFlash Player: "+a.major+"."+a.minor+"."+a.release;this._progress_type="percentage";window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,b){return!0===this.callEvent("onBeforeFileAdd",[a,b])},_addFileToQueue:function(a,b,c){if(window.dhx4.isIE){var e=document.createElement("INPUT");e.type="TEXT";e.style.position="absolute";e.style.left="0px";e.style.top=window.dhx4.absTop(this.buttons.browse)+"px";e.style.width="10px";document.body.appendChild(e);e.focus();document.body.removeChild(e)}this._files[a]={name:b,size:c,state:"added"};this._addFileToList(a,b,c,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a,b){if(this._files[a]){var c=this._files[a].name,e=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;if(!1===b||!0===this.callEvent("onBeforeFileRemove",[c,e])){var g=!1;this._uploading&&"uploading"==this._files[a].state&&(this._uploadStop(),g=!0);swfobject.getObjectById(this._swf_obj_id).removeFileById(a);var h=this._files[a].timestamp;this._files[a].server?this._files[a].storageState="delete":(this._files[a].name=null,this._files[a].size=null,this._files[a].state=null,this._files[a]=null,delete this._files[a]);var l=this._items[a].dataID;this._removeFileFromList(a);this.callEvent("onFileRemove",[c,e,this.id,l,h]);g&&this._uploadStart()}}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(a){for(var b in this._files)"uploading"==this._files[b].state&&swfobject.getObjectById(this._swf_obj_id).uploadStop(b)},_unloadEngine:function(){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]&&(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null,delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]);this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._swf_obj_id=null}};dhtmlXFileUpload.prototype.sl=function(){};dhtmlXFileUpload.prototype.sl.prototype={_initEngine:function(){"undefined"==typeof this._sl_v&&(this._sl_v=this.getSLVersion());window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(a,b,c){window.dhtmlXFileUploaderSLObjects.items[a].uploader[b].apply(window.dhtmlXFileUploaderSLObjects.items[a].uploader,c)}});this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();0!=this._sl_v?(this._titleText="Engine successfuly inited\x3cbr\x3eSilverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='\x3cdiv style\x3d"width:100%;height:100%;"\x3e\x3cobject data\x3d"data:application/x-silverlight-2," type\x3d"application/x-silverlight-2" width\x3d"100%" height\x3d"100%" id\x3d"'+this._sl_obj_id+'"\x3e\x3cparam name\x3d"source" value\x3d"'+this._sl_xap+'"/\x3e\x3cparam name\x3d"background" value\x3d"Transparent"/\x3e\x3cparam name\x3d"windowless" value\x3d"true"/\x3e\x3cparam name\x3d"initParams" value\x3d"SLID\x3d'+this._sl_obj_id+",LOGS\x3d"+this._sl_logs+'"/\x3e\x3cparam name\x3d"minRuntimeVersion" value\x3d"5.0"/\x3e\x3c/object\x3e\x3c/div\x3e'):(this._titleText="Silverlight plugin not found\x3cbr\x3eor version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title="");this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(a,b,c){this._files[a]={name:b,size:c,state:"added"};this._addFileToList(a,b,c,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a){if(this._files[a]){var b=!1;this._uploading&&"uploading"==this._files[a].state&&(this._uploadStop(),b=!0);document.getElementById([this._sl_obj_id]).Content.a.removeFileById(a);this._files[a].server&&(this._delFiles=this._delFiles||{},this._delFiles[a]={id:this._files[a].id,name:this._files[a].name,path:this._files[a].path,size:this._files[a].size,storageState:"delete"});this._files[a].name=null;this._files[a].size=null;this._files[a].state=null;this._files[a]=null;delete this._files[a];this._removeFileFromList(a);b&&this._uploadStart()}},_doUploadFile:function(a){document.getElementById(this._sl_obj_id).Content.a.upload(a,this._sl_upload_url,"\x26mode\x3dsl\x26isWdk\x3d"+this.isWdk+(this.uploadPath?"\x26uploadPath\x3d"+escape(this.uploadPath):"")+"\x26dhxr"+(new Date).getTime())},_uploadStop:function(a){this._uploading=!1;for(var b in this._files)"uploading"==this._files[b].state&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(b)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]);this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._sl_obj_id=null}};dhtmlXFileUpload.prototype.setValue=function(a){this.val=a;this.addItems()};dhtmlXFileUpload.prototype.setSLURL=function(a){this._sl_upload_url=a};dhtmlXFileUpload.prototype.getSLVersion=function(){var a=!1;if(window.dhx4.isIE)try{var b=new ActiveXObject("AgControl.AgControl");if(null!=b)for(var c=4,e=0;b.isVersionSupported([c,e].join("."));)a=[c,e],9<++e&&(c++,e=0)}catch(g){}else null!=navigator.plugins["Silverlight Plug-In"]&&(a=navigator.plugins["Silverlight Plug-In"].description.split("."));return a};window.dhtmlx||(window.dhtmlx={});(function(){function a(a,b){var e=a.callback;c(!1);a.box.parentNode.removeChild(a.box);q=a.box=null;e&&e(b)}function b(b){if(q){b=b||event;var c=b.which||event.keyCode;dhtmlx.message.keyboard&&(13!=c&&32!=c||a(q,!0),27==c&&a(q,!1));b.preventDefault&&b.preventDefault();return!(b.cancelBubble=!0)}}function c(a){c.cover||(c.cover=document.createElement("DIV"),c.cover.onkeydown=b,c.cover.className="dhx_modal_cover",document.body.appendChild(c.cover));c.cover.style.display=a?"inline-block":"none"}function e(a,b){return"\x3cdiv class\x3d'dhtmlx_popup_button' result\x3d'"+b+"' \x3e\x3cdiv\x3e"+a+"\x3c/div\x3e\x3c/div\x3e"}function g(a){r.area||(r.area=document.createElement("DIV"),r.area.className="dhtmlx_message_area",r.area.style[r.position]="15px",document.body.appendChild(r.area));r.hide(a.id);var b=document.createElement("DIV");b.innerHTML="\x3cdiv\x3e"+a.text+"\x3c/div\x3e";b.className="dhtmlx-info dhtmlx-"+a.type;b.onclick=function(){a&&r.hide(a.id);a=null};"bottom"==r.position&&r.area.firstChild?r.area.insertBefore(b,r.area.firstChild):r.area.appendChild(b);0<a.expire&&(r.timers[a.id]=window.setTimeout(function(){r.hide(a.id)},a.expire));r.pull[a.id]=b;b=null;return a.id}function h(b,c,g){var h=document.createElement("DIV");h.className=" dhtmlx_modal_box dhtmlx-"+b.type;h.setAttribute("dhxbox",1);var l="";b.width&&(h.style.width=b.width);b.height&&(h.style.height=b.height);b.title&&(l+='\x3cdiv class\x3d"dhtmlx_popup_title"\x3e'+b.title+"\x3c/div\x3e");l+='\x3cdiv class\x3d"dhtmlx_popup_text"\x3e\x3cspan\x3e'+(b.content?"":b.text)+'\x3c/span\x3e\x3c/div\x3e\x3cdiv  class\x3d"dhtmlx_popup_controls"\x3e';c&&(l+=e(b.ok||"OK",!0));g&&(l+=e(b.cancel||"Cancel",!1));if(b.buttons)for(var n=0;n<b.buttons.length;n++)l+=e(b.buttons[n],n);h.innerHTML=l+"\x3c/div\x3e";b.content&&(l=b.content,"string"==typeof l&&(l=document.getElementById(l)),"none"==l.style.display&&(l.style.display=""),h.childNodes[b.title?1:0].appendChild(l));h.onclick=function(c){c=c||event;c=c.target||c.srcElement;c.className||(c=c.parentNode);"dhtmlx_popup_button"==c.className&&(c=c.getAttribute("result"),a(b,"true"==c||("false"==c?!1:c)))};b.box=h;if(c||g)q=b;return h}function l(a,e,g){e=a.tagName?a:h(a,e,g);a.hidden||c(!0);document.body.appendChild(e);g=a.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-e.offsetWidth)/2));var l=a.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-e.offsetHeight)/2));e.style.top="top"==a.position?"-3px":l+"px";e.style.left=g+"px";e.onkeydown=b;e.focus();a.hidden&&dhtmlx.modalbox.hide(e);return e}function m(a,b,c){"object"!=typeof a&&("function"==typeof b&&(c=b,b=""),a={text:a,type:b,callback:c});return a}function n(a,b,c,e){"object"==typeof a&&a||(a={text:a,type:b,expire:c,id:e});a.id=a.id||r.uid();a.expire=a.expire||r.expire;return a}var q=null;document.attachEvent?document.attachEvent("onkeydown",b):document.addEventListener("keydown",b,!0);dhtmlx.alert=function(){var a=m.apply(this,arguments);a.type=a.type||"confirm";return l(a,!0,!1)};dhtmlx.confirm=function(){var a=m.apply(this,arguments);a.type=a.type||"alert";return l(a,!0,!0)};dhtmlx.modalbox=function(){var a=m.apply(this,arguments);a.type=a.type||"alert";return l(a)};dhtmlx.modalbox.hide=function(a){for(;a&&a.getAttribute&&!a.getAttribute("dhxbox");)a=a.parentNode;a&&(a.parentNode.removeChild(a),c(!1),q=null)};var r=dhtmlx.message=function(a,b,c,e){a=n.apply(this,arguments);a.type=a.type||"info";switch(a.type.split("-")[0]){case "alert":return l(a,!0,!1);case "confirm":return l(a,!0,!0);case "modalbox":return l(a);default:return g(a)}};r.seed=(new Date).valueOf();r.uid=function(){return r.seed++};r.expire=4E3;r.keyboard=!0;r.position="top";r.pull={};r.timers={};r.hideAll=function(){for(var a in r.pull)r.hide(a)};r.hide=function(a){var b=r.pull[a];b&&b.parentNode&&(window.setTimeout(function(){b.parentNode.removeChild(b);b=null},2E3),b.className+=" hidden",r.timers[a]&&window.clearTimeout(r.timers[a]),delete r.pull[a])}})();function dhtmlXColorPicker(a){if(!(this instanceof window.dhtmlXColorPicker))return new dhtmlXColorPicker(a);dhx4._eventable(this);var b=this,c=void 0,e=null,g,h;this._nodes=[];this.skin=this.memory=this._globalNode=this.base=this._inputListenerId=this.activeNode=null;this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0};this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1};this._initMoveSelection=function(a){a=a||event;"function"==typeof window.addEventListener?(b._controllerNodes.colorArea.addEventListener("mousemove",b._setMoveSelection,!1),document.body.addEventListener("mouseup",b._cleanMoveSelection,!1)):(b._controllerNodes.colorArea.attachEvent("onmousemove",b._setMoveSelection),document.body.attachEvent("onmouseup",b._cleanMoveSelection));b._setMoveSelection(a,b._controllerNodes.colorArea);return!1};this._cleanMoveSelection=function(){"function"==typeof window.removeEventListener?(b._controllerNodes.colorArea.removeEventListener("mousemove",b._setMoveSelection,!1),document.body.removeEventListener("mouseup",b._cleanMoveSelection,!1)):(b._controllerNodes.colorArea.detachEvent("onmousemove",b._setMoveSelection),document.body.detachEvent("onmouseup",b._cleanMoveSelection));return!1};this._setMoveSelection=function(a){a=a||event;var c=b._getOffsetPosition(a,b._controllerNodes.colorArea);b._controllerNodes.fr_cover?setTimeout(function(){b._setColorAreaXY(c.x,c.y);b._setColorByXYC()},0):(b._setColorAreaXY(c.x,c.y),b._setColorByXYC());return!1};this._initMoveContrast=function(a){a=a||event;"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",b._setMoveContrast,!1),document.body.addEventListener("mouseup",b._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",b._setMoveContrast),document.body.attachEvent("onmouseup",b._cleanMoveContrast));b._setMoveContrast(a,b._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){"function"==typeof window.removeEventListener?(document.body.removeEventListener("mousemove",b._setMoveContrast,!1),document.body.removeEventListener("mouseup",b._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",b._setMoveContrast),document.body.detachEvent("onmouseup",b._cleanMoveContrast))};this._setMoveContrast=function(a){a=a||event;a=b._getOffsetPosition(a,b._controllerNodes.contrastArea);b._setContrastY(a.y);b._setColorByXYC(!0)};this._doOnSelectColor=function(){var a=b.colorAIP.rgb2hex({r:b.value.red,g:b.value.green,b:b.value.blue});null!=b.activeNode&&(b.activeNode.valueCont&&(b.activeNode.valueCont.value=a),b.activeNode.valueColor&&(b.activeNode.valueColor.style.backgroundColor=a));(b.base._dhx_remove||b.conf.hideOnSelect)&&b.hide();b.callEvent("onSelect",[a,b.activeNode?b.activeNode.node:null])};this._doOnCancel=function(){1==b.callEvent("onCancel",[b.activeNode?b.activeNode.node:null])&&1==b.conf.closeable&&b.hide()};this._doOnFocusByInput=function(){var a=this!=window?this:event.srcElement,a=b.activeNode&&b.activeNode.valueCont&&b.activeNode.valueCont==a?b.activeNode:b._getNodeByValueCont(a);(b.activeNode=a)&&a==b.activeNode&&b._initListenerInput()};this._doOnBlurByInput=function(){var a=this!=window?this:event.srcElement;(a=b.activeNode&&b.activeNode.valueCont&&b.activeNode.valueCont==a?b.activeNode:b._getNodeByValueCont(a))&&a==b.activeNode&&b._removeListenerInput()};this._doOnClickByNode=function(a){a=this!=window?this:event.srcElement;b.activeNode=b.activeNode.node!=a?b._getNodeByElement(a):b.activeNode;b.isVisible()||b.show()};this.saveColor=function(){b.memory.setValue(b.value)};this._onSelectMemoryEl=function(a){var c;b._refreshCoordinatesByHSL(a.value.hue,a.value.sat,a.value.lum);for(c in a.value)b.value[c]=a.value[c];b._refreshContrast();b._refreshInputValues();b._refreshColorValue()};this._doOnClickByBody=function(a){a=a||event;var c=!0;a=a.target||a.srcElement;b._isBaseNode(a)&&(c=!1);c&&b.activeNode&&(b.activeNode.node==a||b.activeNode.valueCont==a)&&(c=!1);c&&b.hide()};this._doOnChangeHSL=function(){var a=parseInt(b._controllerNodes.hue.value),c=parseInt(b._controllerNodes.sat.value),e=parseInt(b._controllerNodes.lum.value);isNaN(a)||359<a||0>a?b._controllerNodes.hue.value=b.value.hue:b.value.hue=a;isNaN(c)||100<c||0>c?b._controllerNodes.sat.value=b.value.sat:b.value.sat=c;isNaN(e)||100<e||0>e?b._controllerNodes.lum.value=b.value.lum:b.value.lum=e;a=b.colorAIP.hsl2rgb(b.value.hue,b.value.sat/100,b.value.lum/100);b.value.red=Math.round(255*a.r);b.value.green=Math.round(255*a.g);b.value.blue=Math.round(255*a.b);b._refreshCoordinatesByHSL(b.value.hue,b.value.sat,b.value.lum);b._refreshContrast();b._refreshInputValues();b._refreshColorValue()};this._doOnChangeRGB=function(){var a=parseInt(b._controllerNodes.red.value),c=parseInt(b._controllerNodes.green.value),e=parseInt(b._controllerNodes.blue.value);isNaN(a)||255<a||0>a?b._controllerNodes.red.value=b.value.red:b.value.red=a;isNaN(c)||255<c||0>c?b._controllerNodes.green.value=b.value.green:b.value.green=c;isNaN(e)||255<e||0>e?b._controllerNodes.blue.value=b.value.blue:b.value.blue=e;a=b.colorAIP.rgb2hsl(b.value.red/255,b.value.green/255,b.value.blue/255);b.value.hue=Math.round(a.h);b.value.sat=Math.round(100*a.s);b.value.lum=Math.round(100*a.l);b._refreshCoordinatesByHSL(b.value.hue,b.value.sat,b.value.lum);b._refreshContrast();b._refreshInputValues();b._refreshColorValue()};this._doOnChangeHSV=function(){b._controllerNodes.hsv.value=b.setColor(b._controllerNodes.hsv.value)};this._checkType=function(a){if(a instanceof Array)switch(a=b._checkType(a[0]),a){case "string":return"array_string";case "input":case "textarea":return"array_input";case "object":return"array_object"}else{if(void 0==a)return null;if("string"==typeof a)return"string";if(a.tagName&&"input"==a.tagName.toLowerCase())return"input";if(a.tagName&&"textarea"==a.tagName.toLowerCase())return"textarea";if(a.tagName)return"container";if("object"==typeof a)return"object"}};this._initByObject=function(a){a.parent&&a.parent.tagName?b.base=a.parent:"string"==typeof a.parent?b.base=document.getElementById(a.parent):(b.base=document.createElement("div"),b.base._dhx_remove=!0);a.color&&(b.conf.selectedColor=a.color);"undefined"!=typeof a.closeable&&(this.conf.closeable=dhx4.s2b(a.closeable));a.custom_colors&&(this._tempInitCC=function(){var b,c;this.initMemoryColors();this.conf.customColors=!0;if(a.custom_colors instanceof Array)for(c=a.custom_colors.length,b=0;b<c;b++)this.setCustomColors(a.custom_colors[b]);this.base.parentNode&&this.showMemory();delete this._tempInitCC});a.hide&&(b.conf.hide=!0);a.input&&b._addNode(a.input,a.target_color,a.target_value);var c=a.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"material";b.setSkin(c);a.colors&&(b.initMemoryColors(),b.conf.customColors=!0);a.link&&b._addNode(a.link)};this.unload=function(){var a,c,g;this.isVisible()&&this.hide();this.destructMemory();c=this._nodes.length;for(a=0;a<c;a++){this._detachEventsFromNode(this._nodes[a]);for(g in this._nodes[a])this._nodes[a][g]=null;delete this._nodes[a]}this._nodes=null;this.base._dhx_remove?delete this.base._dhx_remove:this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,"");"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV));this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),delete this._controllerNodes.fr_cover);dhx4.zim.clear(this.conf.cp_id);dhx4._eventable(this,"clear");for(g in this)this[g]=null;h=e=b=null};c=this._checkType(a);switch(c){case "object":b._initByObject(a);break;case "input":case "textarea":b._initByObject({});this._addNode(a);break;case "string":return e=document.getElementById(a),new dhtmlXColorPicker(e);case "container":b._initByObject({parent:a});break;case null:b._initByObject({});break;case "array_string":case "array_input":b._initByObject({});g=a.length;for(c=0;c<g;c++)this._addNode(a[c]);break;case "array_object":for(b._initByObject({}),g=a.length,c=0;c<g;c++)h=this._addNode(a[c].input,a[c].target_color,a[c].target_value).conf,h.customColors=void 0!=a[c].custom_colors?dhx4.s2b(a[c].custom_colors):h.customColors,h.selectedColor=void 0!=a[c].color?a[c].color:h.selectedColor}this.base.innerHTML="\x3cdiv class\x3d'dhxcp_g_area'\x3e\x3cdiv class\x3d'dhxcp_sub_area'\x3e\x3cdiv class\x3d'dhxcp_g_color_area'\x3e\x3cdiv class\x3d'dhxcp_color_selector'\x3e\x3cdiv class\x3d'dhxcp_v_line'\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxcp_h_line'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxcp_contrast_area'\x3e\x3cdiv class\x3d'dhxcp_h_line'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxcp_g_input_area'\x3e\x3cdiv class\x3d'dhxcp_value_cont'\x3e\x3cdiv class\x3d'dhxcp_value_color'\x3e\x3c/div\x3e\x3cinput type\x3d'text' class\x3d'dhxcp_value'/\x3e\x3c/div\x3e\x3ctable class\x3d'dhxcp_inputs_cont' cellpadding\x3d'0' cellspacing\x3d'0' border\x3d'0'\x3e\x3ctr\x3e\x3ctd class\x3d'dhxcp_label_hsl'\x3e"+this.i18n[this.conf.lang].labelHue+"\x3c/td\x3e\x3ctd class\x3d'dhxcp_input_hsl'\x3e\x3cinput type\x3d'text' class\x3d'dhxcp_input_hsl'/\x3e\x3c/td\x3e\x3ctd class\x3d'dhxcp_label_rgb'\x3e"+this.i18n[this.conf.lang].labelRed+"\x3c/td\x3e\x3ctd class\x3d'dhxcp_input_rgb'\x3e\x3cinput type\x3d'text' class\x3d'dhxcp_input_rgb'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd class\x3d'dhxcp_label_hsl'\x3e"+this.i18n[this.conf.lang].labelSat+"\x3c/td\x3e\x3ctd class\x3d'dhxcp_input_hsl'\x3e\x3cinput type\x3d'text' class\x3d'dhxcp_input_hsl'/\x3e\x3c/td\x3e\x3ctd class\x3d'dhxcp_label_rgb'\x3e"+this.i18n[this.conf.lang].labelGreen+"\x3c/td\x3e\x3ctd class\x3d'dhxcp_input_rgb'\x3e\x3cinput type\x3d'text' class\x3d'dhxcp_input_rgb'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd class\x3d'dhxcp_label_hsl'\x3e"+this.i18n[this.conf.lang].labelLum+"\x3c/td\x3e\x3ctd class\x3d'dhxcp_input_hsl'\x3e\x3cinput type\x3d'text' class\x3d'dhxcp_input_hsl'/\x3e\x3c/td\x3e\x3ctd class\x3d'dhxcp_label_rgb'\x3e"+this.i18n[this.conf.lang].labelBlue+"\x3c/td\x3e\x3ctd class\x3d'dhxcp_input_rgb'\x3e\x3cinput type\x3d'text' class\x3d'dhxcp_input_rgb'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxcp_g_memory_area'\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxcp_buttons_area'\x3e\x3cbutton class\x3d'dhx_button_save'\x3e"+this.i18n[this.conf.lang].btnSelect+"\x3c/button\x3e\x3cbutton class\x3d'dhx_button_cancel'\x3e"+this.i18n[this.conf.lang].btnCancel+"\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e";"\x3c/div\x3e";this._globalNode=this.base.firstChild;this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};"function"==typeof this._tempInitCC&&this._tempInitCC();"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV));this.setColor(this.conf.selectedColor||"#ffffff");if(this._nodes.length)for(c=0;c<this._nodes.length;c++)this._attachEventsToNode(this._nodes[c]);this.conf.hide&&this.hide();"function"==typeof this._cpInitFRM&&this._cpInitFRM()}dhtmlXColorPicker.prototype.linkTo=function(a,b,c){1==arguments.length&&(b=c=a);var e;a=a||null;c=c||null;"string"==typeof b&&(b=document.getElementById(b));(e=this._addNode(b,a,c))&&this._attachEventsToNode(e);return e};dhtmlXColorPicker.prototype._isBaseNode=function(a){return a==this.base?!0:a.parentElement==document.body?!1:a.parentElement?this._isBaseNode(a.parentElement):!1};dhtmlXColorPicker.prototype._hasInput=function(a){var b,c,e=!1;c=this._nodes.length;for(b=0;b<c;b++)if(this._nodes[b].valueCont==a){e=!0;break}return e};dhtmlXColorPicker.prototype._findNodesByArray=function(a){var b,c,e;c=a.length;for(b=0;b<c;b++)(e="string"==typeof a[b]?document.getElementById(a[b]):a[b])&&this._addNode(e)};dhtmlXColorPicker.prototype._addNode=function(a,b,c){var e,g;a="string"==typeof a?document.getElementById(a):a;"string"==typeof b&&(b=document.getElementById(b));"string"==typeof c&&(c=document.getElementById(c));if(!a)return null;dhx4.s2b(a.getAttribute("colorbox"))&&(e=document.createElement("div"),e.style.width=a.offsetWidth+"px",e.style.height=a.offsetHeight+"px",a.style.width=a.offsetWidth-(a.offsetHeight+8)+"px",a.parentNode.insertBefore(e,a),e.style.position="relative",g=document.createElement("div"),e.appendChild(a),e.appendChild(g),g.className="dhxcp_colorBox",a.className+=" dhxcp_colorInput",g.style.width=g.style.height=a.offsetHeight+"px");b={node:a,valueColor:void 0!=b?b:g||a,valueCont:void 0!=c?c:a,conf:{customColors:null!=a.getAttribute("customcolors")?dhx4.s2b(a.getAttribute("customcolors")):null,selectedColor:a.getAttribute("selectedcolor")}};this._nodes.push(b);this.activeNode||(this.activeNode=b);return b};dhtmlXColorPicker.prototype.getNode=function(a){var b=null;a="string"==typeof a?document.getElementById(a):a;void 0!=a.tagName&&(b=this._getNodeByElement(a));return b};dhtmlXColorPicker.prototype._getNodeByElement=function(a){var b=null,c,e;e=this._nodes.length;for(c=0;c<e;c++)this._nodes[c].node==a&&(b=this._nodes[c]);return b};dhtmlXColorPicker.prototype._getNodeByValueCont=function(a){var b=null,c,e;e=this._nodes.length;for(c=0;c<e;c++)this._nodes[c].valueCont&&this._nodes[c].valueCont==a&&(b=this._nodes[c]);return b};dhtmlXColorPicker.prototype.initMemoryColors=function(){var a=this;this._controllerNodes.memory_block.innerHTML="\x3cdiv class\x3d'dhxcp_memory_button_cont'\x3e\x3cbutton class\x3d'dhxcp_save_to_memory'\x3e\x3cdiv class\x3d'dhxcp_label_bm'\x3e"+this.i18n[this.conf.lang].btnAddColor+"\x3c/div\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxcp_memory_els_cont'\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3ca class\x3d'dhxcp_memory_el'\x3e\x3c/a\x3e\x3c/div\x3e";this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(b){b=a.colorAIP.rgb2hex({r:b.red,g:b.green,b:b.blue});a.callEvent("onSaveColor",[b])};var b=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;"function"==typeof window.addEventListener?b.addEventListener("click",this.saveColor,!1):b.attachEvent("onclick",this.saveColor)};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(a,b,c){a=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*a/359)+this.configColorArea.minX;c=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-c)/100)+this.configColorArea.minY;b=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-b)/100)+this.configColorArea.minY;this._setColorAreaXY(a,c);this._setContrastY(b)};dhtmlXColorPicker.prototype._parseColor=function(a){if(a instanceof Array)var b={r:parseInt(a[0]),g:parseInt(a[1]),b:parseInt(a[2])};else"string"==typeof a&&(a=a.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(a)?(a=a.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),b={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])}):b=this.colorAIP.hex2rgb(a));return b};dhtmlXColorPicker.prototype.setColor=function(a){var b=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});a=this._parseColor(a);var c=a instanceof Object,c=(c=(c=c&&0<=a.r&&255>=a.r)&&0<=a.g&&255>=a.g)&&0<=a.b&&255>=a.b;if(!c)return b;c=this.colorAIP.rgb2hex({r:a.r,g:a.g,b:a.b});if(c==b)return b;this.value.red=a.r;this.value.green=a.g;this.value.blue=a.b;b=this.colorAIP.rgb2hsl(a.r/255,a.g/255,a.b/255);this.value.hue=Math.round(b.h);this.value.sat=Math.round(100*b.s);this.value.lum=Math.round(100*b.l);this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum);this._refreshContrast();this._refreshInputValues();this._refreshColorValue();return c};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};dhtmlXColorPicker.prototype._attachEventsToNode=function(a){"function"==typeof window.addEventListener?a.node.addEventListener("click",this._doOnClickByNode,!1):a.node.attachEvent("onclick",this._doOnClickByNode);a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.attachEvent("onfocus",this._doOnFocusByInput),a.valueCont.attachEvent("onblur",this._doOnBlurByInput)))};dhtmlXColorPicker.prototype._detachEventsFromNode=function(a){"function"==typeof window.addEventListener?a.node.removeEventListener("click",this._doOnClickByNode,!1):a.node.detachEvent("onclick",this._doOnClickByNode);a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.detachEvent("onfocus",this._doOnFocusByInput),a.valueCont.detachEvent("onblur",this._doOnBlurByInput)))};dhtmlXColorPicker.prototype.show=function(a){void 0!=a&&(this.activeNode=this.getNode(a)||this.activeNode);this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value);this.activeNode?(a=null!=this.activeNode.conf.customColors?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):a=this.conf.customColors;a?this.showMemory():this.hideMemory();this.base._dhx_remove?(this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id),this.base.style.visibility="hidden",document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),this.base.style.visibility="visible","function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode);this._controllerNodes.fr_cover&&this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode);this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])};dhtmlXColorPicker.prototype.setPosition=function(a,b){var c=null,e=parseInt(a),g=parseInt(b);isNaN(e)&&(c={right:"right",bottom:"bottom"}[a.toLowerCase()]?a:null);this.base._dhx_remove?null!=c&&(this.conf.position=c,this._refreshPosition(c)):isNaN(e)||isNaN(g)||(this._globalNode.style.left=e+"px",this._globalNode.style.top=g+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))};dhtmlXColorPicker.prototype._initListenerInput=function(){var a=this;this._inputListenerId=this._inputListenerId||setInterval(function(){a._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)};dhtmlXColorPicker.prototype._refreshValueByInput=function(){var a=this.activeNode.valueCont.value,b=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(a)&&a!=b&&(this.setColor(a),this.callEvent("onSelect",[a,this.activeNode.node]))};dhtmlXColorPicker.prototype._refreshPosition=function(a){if(null!=this.activeNode){var b=dhx4.absTop(this.activeNode.node),c=dhx4.absLeft(this.activeNode.node),e=dhx4.screenDim(),g=this._globalNode.offsetWidth,h=this._globalNode.offsetHeight,l;a=a||this.conf.position;switch(a){case "bottom":l=b+this.activeNode.node.offsetHeight+this.conf.indent;var m=c;m+g>e.left+e.right&&(m=c+this.activeNode.node.offsetWidth-g);m<e.left&&(m=c);l+h>e.top+e.bottom&&(l=b-h-this.conf.indent);0>l-e.top&&(l=e.top+this.conf.indent);this._globalNode.style.top=l+"px";this._globalNode.style.left=m+"px";break;default:m=c+this.activeNode.node.offsetWidth+this.conf.indent,l=b,"right"==a&&(m+g>e.left+e.right&&(m=c-g-this.conf.indent),m<e.left&&(m=c+this.activeNode.node.offsetWidth+this.conf.indent)),0>=e.bottom-(l+h)&&(l=b+this.activeNode.node.offsetHeight-h),0>l-e.top&&(l=e.top+this.conf.indent),this._globalNode.style.left=m+"px",this._globalNode.style.top=l+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}};dhtmlXColorPicker.prototype.isVisible=function(){return this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base};dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(0==this.isVisible())return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover);void 0!=this.callEvent&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0};dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"},ch:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"\u4fdd\u5b58",btnSelect:"\u9009\u62e9",btnCancel:"\u53d6\u6d88"}};dhtmlXColorPicker.prototype.loadUserLanguage=function(a){"function"==typeof this._mergeLangModules&&this._mergeLangModules();this.conf.lang=a;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var a,b=this.i18n[this.conf.lang];for(a in b)this._labelNodes[a]&&(this._labelNodes[a].innerHTML=b[a])};dhtmlXColorPicker.prototype._setColorAreaXY=function(a,b){var c=this.configColorArea;a=parseInt(a);c.minX>a?this.conf.x=c.minX:a>c.maxX?this.conf.x=c.maxX:isNaN(a)||(this.conf.x=a);b=parseInt(b);c.minY>b?this.conf.y=c.minY:b>c.maxY?this.conf.y=c.maxY:isNaN(b)||(this.conf.y=b);this._refreshLines()};dhtmlXColorPicker.prototype._setColorByXYC=function(a){a=a||!1;this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var b=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*b.r);this.value.green=Math.round(255*b.g);this.value.blue=Math.round(255*b.b);a||this._refreshContrast();this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(a){var b=this.configColorArea;a=parseInt(a);isNaN(a)||(this.conf.c=Math.min(Math.max(b.minY,a),b.maxY));this._refreshContrastLine()};dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=a;this.callEvent("onChange",[a])};dhtmlXColorPicker.prototype._refreshContrast=function(){var a=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),b=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),c=this._checkIeVersion();c&&9>=c?(c=this._controllerNodes.contrastArea.firstChild,c==this._controllerNodes.contrast_line&&(c=document.createElement("div"),c.className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(c),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)),a=this.colorAIP.rgb2hex({r:Math.round(255*a.r),g:Math.round(255*a.g),b:Math.round(255*a.b)}),b=this.colorAIP.rgb2hex({r:Math.round(255*b.r),g:Math.round(255*b.g),b:Math.round(255*b.b)}),c.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr\x3d'"+b+"', endColorstr\x3d'"+a+"', GradientType\x3d0)"):(a=[Math.round(255*a.r),Math.round(255*a.g),Math.round(255*a.b)],b=[Math.round(255*b.r),Math.round(255*b.g),Math.round(255*b.b)],b="linear-gradient(rgb("+b.join(",")+"), rgb("+a.join(",")+"))",1==window.dhx4.isKHTML&&null!=navigator.userAgent.match(/Windows/gi)&&(b="-webkit-"+b),this._controllerNodes.contrastArea.style.backgroundImage=b)};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px";this._controllerNodes.h_line.style.top=this.conf.y+"px"};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"};dhtmlXColorPicker.prototype._getOffsetPosition=function(a,b){var c={x:NaN,y:NaN},e=a.target||a.srcElement;e==b?(c.x=void 0!=a.offsetX?a.offsetX:a.layerX,c.y=void 0!=a.offsetY?a.offsetY:a.layerY):e==this._controllerNodes.v_line?c.y=void 0!=a.offsetY?a.offsetY:a.layerY:c.x=void 0!=a.offsetX?a.offsetX:a.layerX;return c};dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(a){a=a.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return null!=a?{r:parseInt("0x"+a[2]),g:parseInt("0x"+a[3]),b:parseInt("0x"+a[4])}:null},rgb2hex:function(a){var b=parseInt(a.r),c=parseInt(a.g);a=parseInt(a.b);b=b||0;c=c||0;a=a||0;return"#"+(b?16>b?"0"+b.toString(16):b.toString(16):"00")+(c?16>c?"0"+c.toString(16):c.toString(16):"00")+(a?16>a?"0"+a.toString(16):a.toString(16):"00")},rgb2hsl:function(a,b,c){var e,g=Math.max(a,b,c),h=Math.min(a,b,c);e=.5*(g+h);g==h?a=0:g==a?(a=60*(b-c)/(g-h),b<c&&(a+=360)):a=g==b?60*(c-a)/(g-h)+120:60*(a-b)/(g-h)+240;return{h:a,s:0==e||g==h?0:.5>=e?.5*(g-h)/e:.5*(g-h)/(1-e),l:e}},hsl2rgb:function(a,b,c){var e=[],g=[];b=.5>=c?c*(1+b):c+b-c*b;c=2*c-b;a/=360;e.push(a+1/3);e.push(a);e.push(a-1/3);for(a=0;3>a;a++)0>e[a]?e[a]+=1:1<e[a]&&--e[a],e[a]<1/6?g.push(c+6*(b-c)*e[a]):.5>e[a]?g.push(b):e[a]<2/3?g.push(c+(b-c)*(2/3-e[a])*6):g.push(c);return{r:g[0],g:g[1],b:g[2]}}};dhtmlXColorPicker.prototype._checkIeVersion=function(){var a=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return a&&a[2]?parseInt(a[2]):null};dhtmlXColorPicker.prototype.setCustomColors=function(){null==this.memory&&(this.initMemoryColors(),this.conf.customColors=!0);var a,b,c,e,g,h;b=arguments.length;for(a=0;a<b;a++)if(arguments[a]instanceof Array)c=this._rgb2value(arguments[a][0],arguments[a][1],arguments[a][2]),this.memory.setValue(c,null,!1);else if("string"==typeof arguments[a])if(e=arguments[a].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),e instanceof Array)c=this._rgb2value(e[1],e[2],e[3]),this.memory.setValue(c,null,!1);else if(e=arguments[a].match(/(#[\da-f]{6})/ig),e instanceof Array)for(h=e.length,g=0;g<h;g++)c=this._hex2value(e[g]),this.memory.setValue(c,null,!1)};dhtmlXColorPicker.prototype.getCustomColors=function(){var a=[];if(null!=this.memory&&1==this.conf.customColors)for(var b=0;b<this.memory.controllers.length;b++){var c=this.memory.controllers[b].value;a.push(this.colorAIP.rgb2hex({r:c.red,g:c.green,b:c.blue}))}return a};dhtmlXColorPicker.prototype._rgb2value=function(a,b,c){var e=this.colorAIP.rgb2hsl(a/255,b/255,c/255);return{red:a,green:b,blue:c,hue:Math.round(e.h),sat:Math.round(100*e.s),lum:Math.round(100*e.l)}};dhtmlXColorPicker.prototype._hex2value=function(a){var b;a=this.colorAIP.hex2rgb(a);b=this.colorAIP.rgb2hsl(a.r/255,a.g/255,a.b/255);return{red:a.r,green:a.g,blue:a.b,hue:Math.round(b.h),sat:Math.round(100*b.s),lum:Math.round(100*b.l)}};dhtmlXColorPicker.prototype.showMemory=function(){null==this.memory&&this.initMemoryColors();this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory");this.conf.customColors=!0};dhtmlXColorPicker.prototype.hideMemory=function(){null!=this.memory&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,""));this.conf.customColors=!1};dhtmlXColorPicker.prototype.setSkin=function(a){if(1==this._skinCollection[a]){this.base.className=this.base.className.replace(new RegExp("dhtmlxcp_"+(this.skin||"dummy")),"");this.base.className+=" dhtmlxcp_"+a;this.skin=a;if("material"==this.skin){a={labelHue:"H",labelSat:"S",labelLum:"L",labelRed:"R",labelGreen:"G",labelBlue:"B"};for(var b in a)this.i18n.en[b]=a[b]}null!=this.base.className.match(/dhxcp_shadow/)||dhx4.isIE6||dhx4.isIE7||dhx4.isIE8||(this.base.className+=" dhxcp_shadow")}};dhtmlXColorPicker.prototype.hideOnSelect=function(a){a=dhx4.s2b(a);this.conf.hideOnSelect=a};dhtmlXColorPicker.prototype._indexOf=function(a,b){var c,e=-1;for(c=a.length;0<=c;c--)if(a[c]==b){e=c;break}return e};dhtmlXColorPicker.prototype.destructMemory=function(){if(null!=this.memory){this.hideMemory();var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;"function"==typeof window.addEventListener?a.removeEventListener("click",this.saveColor,!1):a.detachEvent("onclick",this.saveColor);this.memory.remove();this._controllerNodes.memory_block.innerHTML="";this.memory=null}};dhtmlXColorPicker.prototype.Memory=function(a){var b=this,c=null,e={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var a=this!=window?this:event.srcElement,e=e||a.dhxpc_memory;null!=c&&b.unSelect();c=e;e.domElement.className+=" dhxcp_memory_el_select";if("function"==typeof b.onSelect)b.onSelect(e)};this.onSave=this.onSelect=null;this._createMemoryController=function(a){var c={domElement:a,value:dhx4._copyObj(e)};a.dhxpc_memory=c;"function"==typeof window.addEventListener?a.addEventListener("click",b.select,!1):a.attachEvent("onclick",b.select);return c};this._findMemoryControllers=function(a){a=a.getElementsByTagName("a");var b,c,e=[];c=a.length;for(b=0;b<c;b++)e.push(this._createMemoryController(a[b]));return e};this.controllers=this._findMemoryControllers(a);this.unSelect=function(){c&&(c.domElement.className=c.domElement.className.replace(/\s.*$/i,""));c=null};this.setActiveNext=function(){var a,b;null==c?c=this.controllers[0]:(a=this.getIndex(c),b=this.controllers.length,this.unSelect(),c=a+1<b?this.controllers[a+1]:this.controllers[0]);c.domElement.className+=" dhxcp_memory_el_next";return c};this.setValue=function(a,b,e){c=b||c;null==c&&(c=this.controllers[0]);c.value.red=a.red;c.value.blue=a.blue;c.value.green=a.green;c.value.hue=a.hue;c.value.sat=a.sat;c.value.lum=a.lum;c.domElement.style.backgroundColor="rgb("+[a.red,a.green,a.blue].join(", ")+")";this.setActiveNext();if(0!=e&&"function"==typeof this.onSave)this.onSave(a)};this.clean=function(){for(var a=this.controllers.length,b,l=0;l<a;l++)b=this.controllers[l],b.value=dhx4._copyObj(e),b.domElement.style.backgroundColor="rgb("+[e.red,e.green,e.blue].join(", ")+")";this.unSelect();c=this.controllers[0]};this.getIndex=function(a){var b,c,e=-1;c=this.controllers.length;for(b=0;b<c;b++)if(this.controllers[b]==a){e=b;break}return e};this.remove=function(){var a,b;b=this.controllers.length;for(a=0;a<b;a++)"function"==typeof window.addEventListener?this.controllers[a].domElement.removeEventListener("click",this.select,!1):this.controllers[a].domElement.detachEvent("onclick",this.select),delete this.controllers[a].domElement.dhxpc_memory;delete this.onSelect;delete this.controllers;delete this.onSave}};window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var a;this._controllerNodes.fr_cover||(a=document.createElement("IFRAME"),a.className="dhxcp_frm",a.border=0,a.frameBorder=0,this._controllerNodes.fr_cover=a);this.base._dhx_remove||this.base.insertBefore(a,this._globalNode)});function dhtmlXCalendarObject(a,b){this.i={};var c=null,e="string"==typeof a?document.getElementById(a):a;e&&"object"==typeof e&&e.tagName&&"input"!=String(e.tagName).toLowerCase()&&(c=e);e=null;"object"==typeof a&&a.length||(a=[a]);for(e=0;e<a.length;e++)"string"==typeof a[e]&&(a[e]=document.getElementById(a[e])||null),null!=a[e]&&a[e].tagName&&"input"==String(a[e].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:a[e]}:a[e]instanceof Array||!(a[e]instanceof Object)||null==a[e].input&&null==a[e].button||(null!=a[e].input&&"string"==typeof a[e].input&&(a[e].input=document.getElementById(a[e].input)),null!=a[e].button&&"string"==typeof a[e].button&&(a[e].button=document.getElementById(a[e].button)),this.i[window.dhx4.newId()]=a[e]),a[e]=null;this.conf={skin:b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material",zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:!0,today:!1,ws_first:!0};this.setSkin=function(a,b){if(this.conf.skin!=a||b)this.conf.skin=a,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize()};this.base=document.createElement("DIV");this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));null!=c?(this._hasParent=!0,c.appendChild(this.base),c=null):document.body.appendChild(this.base);this.setParent=function(a){this._hasParent&&("object"==typeof a?a.appendChild(this.base):"string"==typeof a&&document.getElementById(a).appendChild(this.base))};this.setSkin(this.conf.skin,!0);this.base.onclick=function(a){a=a||event;a.preventDefault&&a.preventDefault();a.cancelBubble=!0};this.base.onmousedown=function(){return!1};this.conf.touch&&(this.base.ontouchstart=this.base.onclick);this.loadUserLanguage=function(a){if(this.langData[a]){this.lang=a;this.setWeekStartDay(this.langData[this.lang].weekstart);this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");if(this.msCont)for(var b=a=0;b<this.msCont.childNodes.length;b++)for(var c=0;c<this.msCont.childNodes[b].childNodes.length;c++)this.msCont.childNodes[b].childNodes[c].innerHTML=this.langData[this.lang].monthesSNames[a++];this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today;this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear}};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(a){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.base.firstChild.appendChild(this.contMonth);c=document.createElement("UL");c.className="dhtmlxcalendar_line";this.contMonth.appendChild(c);var g=document.createElement("LI");g.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";g.innerHTML="\x3cdiv class\x3d'dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover\x3d'this.className\x3d\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout\x3d'this.className\x3d\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'\x3e\x3c/div\x3e\x3cspan\x3e\x3c/span\x3e\x3cdiv class\x3d'dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover\x3d'this.className\x3d\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout\x3d'this.className\x3d\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'\x3e\x3c/div\x3e";c.appendChild(g);var h=this;g.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();var b=a.target||a.srcElement;b.className&&0===b.className.indexOf("dhtmlxcalendar_month_arrow")?(h._hideSelector(),a=b.parentNode.firstChild==b?-1:1,b=new Date(h._activeMonth),h._drawMonth(new Date(h._activeMonth.getFullYear(),h._activeMonth.getMonth()+a,1,0,0,0,0)),h._evOnArrowClick([b,new Date(h._activeMonth)])):b.className&&"dhtmlxcalendar_month_label_month"==b.className?(a.cancelBubble=!0,h._showSelector("month",Math.round(b.offsetLeft+b.offsetWidth/2),b.offsetTop+b.offsetHeight+2,"selector_month",!0)):b.className&&"dhtmlxcalendar_month_label_year"==b.className?(a.cancelBubble=!0,h._showSelector("year",Math.round(b.offsetLeft+b.offsetWidth/2),b.offsetTop+b.offsetHeight+2,"selector_year",!0)):h._hideSelector()};1==this.conf.touch&&(g.ontouchstart=g.onclick);this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(a){0==a&&(a=7);this._wStart=Math.min(Math.max(isNaN(a)?1:a,1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){var a=document.createElement("UL");a.className="dhtmlxcalendar_line";this.contDays.appendChild(a)}else a=this.contDays.firstChild;var b=this._wStart,c=this.langData[this.lang].daysSNames;c.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var e=0;8>e;e++){if(null==a.childNodes[e]){var g=document.createElement("LI");a.appendChild(g)}else g=a.childNodes[e];0==e?(g.className="dhtmlxcalendar_cell_wn",g.innerHTML="\x3cdiv class\x3d'dhtmlxcalendar_label'\x3e"+(this.langData[this.lang].weekname||"w")+"\x3c/div\x3e"):(g.className="dhtmlxcalendar_cell"+(6<=b?" dhtmlxcalendar_day_weekday_cell":"")+(1==e?"_first":""),g.innerHTML=c[b],7<++b&&(b=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();var b=a.target||a.srcElement;null!=b.parentNode&&null!=b.parentNode._date&&(b=b.parentNode);if(null!=b._date&&!b._css_dis){var c=h._activeDate.getHours(),e=h._activeDate.getMinutes(),g=b._date;if(!h.checkEvent("onBeforeChange")||h.callEvent("onBeforeChange",[new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),c,e)])){null!=h._activeDateCell&&(h._activeDateCell._css_date=!1,h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w));var l=h._activeDate.getFullYear()+"_"+h._activeDate.getMonth()!=g.getFullYear()+"_"+g.getMonth();h._nullDate=!1;h._activeDate=new Date(g.getFullYear(),g.getMonth(),g.getDate(),c,e);h._activeDateCell=b;h._activeDateCell._css_date=!0;h._activeDateCell._css_hover=!1;h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w);l&&h._drawMonth(h._activeDate);h._updateInp();h._hasParent||("touchstart"==a.type?window.setTimeout(function(){h._hide()},400):h._hide());h._evOnClick([new Date(h._activeDate.getTime())])}}};1==this.conf.touch&&(this.contDates.ontouchstart=this.contDates.onclick);this.contDates.onmouseover=function(a){a=a||event;var b=a.target||a.srcElement;null!=b.parentNode&&null!=b.parentNode._date&&(b=b.parentNode);null==b._date||h._lastHover==b||b._css_hover||(b._css_hover=!0,h._updateCellStyle(b._q,b._w),h._lastHover=b,h._evOnMouseOver([new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),0,0,0,0),a]))};this.contDates.onmouseout=function(a){h._clearDayHover(a||event)};this._lastHover=null;this._clearDayHover=function(a){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),null!=a&&h._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a]),this._lastHover=null)};for(e=0;6>e;e++){c=document.createElement("UL");c.className="dhtmlxcalendar_line";this.contDates.appendChild(c);for(var l=0;7>=l;l++)g=document.createElement("LI"),g.className=0==l?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",c.appendChild(g)}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.contTime.style.display="none";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){1!=this.conf.time&&(this.conf.time=!0,this._adjustTimeCont())};this.hideTime=function(){1==this.conf.time&&(this.conf.time=!1,this._adjustTimeCont())};this.showToday=function(){1!=this.conf.today&&(this.conf.today=!0,this._adjustTimeCont())};this.hideToday=function(){1==this.conf.today&&(this.conf.today=!1,this._adjustTimeCont())};this._adjustTimeCont=function(){var a="";1==this.conf.time&&(a+="_time");1==this.conf.today&&(a+="_today");""==a?this.contTime.style.display="none":(this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+a,this.contTime.style.display="");this._ifrSize()};this._adjustTimeCont();c=document.createElement("UL");c.className="dhtmlxcalendar_line";this.contTime.appendChild(c);g=document.createElement("LI");g.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";g.innerHTML="\x3cdiv class\x3d'dhtmlxcalendar_time_img'\x3e\x3c/div\x3e\x3cspan class\x3d'dhtmlxcalendar_label_hours'\x3e\x3c/span\x3e\x3cspan class\x3d'dhtmlxcalendar_label_colon'\x3e:\x3c/span\x3e\x3cspan class\x3d'dhtmlxcalendar_label_minutes'\x3e\x3c/span\x3e\x3cspan class\x3d'dhtmlxcalendar_label_clear'\x3e"+this.langData[this.lang].clear+"\x3c/span\x3e\x3cspan class\x3d'dhtmlxcalendar_label_today'\x3e"+this.langData[this.lang].today+"\x3c/span\x3e";c.appendChild(g);g.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();var b=a.target||a.srcElement;null!=b.tagName&&"span"==b.tagName.toLowerCase()&&1==b._par&&null!=b.parentNode&&(b=b.parentNode);b.className&&"dhtmlxcalendar_label_hours"==b.className?(a.cancelBubble=!0,a=h.contMonth.offsetHeight+h.contDays.offsetHeight+h.contDates.offsetHeight+b.offsetTop,h._showSelector("hours",Math.round(b.offsetLeft+b.offsetWidth/2),a-2,"selector_hours",!0)):b.className&&"dhtmlxcalendar_label_minutes"==b.className?(a.cancelBubble=!0,1==h._minutesInterval&&(a=h.getFormatedDate("%i"),b.innerHTML="\x3cspan class\x3d'dhtmlxcalendar_selected_date'\x3e"+a.charAt(0)+"\x3c/span\x3e"+a.charAt(1),b.firstChild._par=!0,h._selectorMode=1),a=h.contMonth.offsetHeight+h.contDays.offsetHeight+h.contDates.offsetHeight+b.offsetTop,h._showSelector("minutes",Math.round(b.offsetLeft+b.offsetWidth/2),a-2,"selector_minutes",!0)):(h._hideSelector(),b.className&&"dhtmlxcalendar_label_today"==b.className&&(a=new Date,a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),h._activeDate.getHours(),h._activeDate.getMinutes(),h._activeDate.getSeconds(),h._activeDate.getMilliseconds()),h.setDate(a),h._updateInp(),h.callEvent("onButtonClick",[a])),b.className&&"dhtmlxcalendar_label_clear"==b.className&&(h._nullDate=!0,h._drawMonth(new Date),h._updateInp(),h.callEvent("onButtonClick",[null])))};1==this.conf.touch&&(g.ontouchstart=g.onclick);this._activeMonth=null;this._activeDate=new Date;this._activeDateCell=null;this.setDate=function(a){window.dhx4.temp_calendar={tz:null};this._nullDate="undefined"==typeof a||""===a||!a;a instanceof Date||(a=this._strToDate(String(a||"")),"Invalid Date"==a?a=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null);null==this.conf.tz&&(this.conf.tz=window.dhx4.date2str(a,"%P"));a=a.getTime();this._isOutOfRange(a)||(this._activeDate=new Date(a),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())};this.getDate=function(a){if(this._nullDate)return null;var b=new Date(this._activeDate.getTime());return a?(window.dhx4.temp_calendar={tz:this.conf.tz},a=this._dateToStr(b),window.dhx4.temp_calendar=null,a):b};this._drawMonth=function(a){if(a instanceof Date){isNaN(a.getFullYear())&&(a=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0));this._activeMonth=new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0);this._activeDateCell=null;var b=new Date(this._activeMonth.getTime()),c=b.getDay()-this._wStart;0>c&&(c+=7);b.setDate(b.getDate()-c);for(var c=a.getMonth(),e=(new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0)).getTime(),g=0,h=0;6>h;h++)for(var l=this._wStart,n=0;7>=n;n++)if(0==n){var m=this.getWeekNumber(new Date(b.getFullYear(),b.getMonth(),b.getDate()+g,0,0,0,0));if(52<=m&&1==this.conf.ws_first&&0==this._activeMonth.getMonth()){var C=this.getWeekNumber(new Date(b.getFullYear(),b.getMonth(),b.getDate()+g+7,0,0,0,0));C<m&&1<C&&(m=1)}this.contDates.childNodes[h].childNodes[n].innerHTML="\x3cdiv class\x3d'dhtmlxcalendar_label'\x3e"+m+"\x3c/div\x3e"}else{m=new Date(b.getFullYear(),b.getMonth(),b.getDate()+g,0,0,0,0);0!=m.getHours()&&(C=12<m.getHours()?24-m.getHours():m.getHours(),m.setTime(m.getTime()+36E5*C));m.getDay();var C=m.getTime(),F="dhtmlxcalendar_label";null!=this._tipData[C]?(this._tipData[C].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[h].childNodes[n].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[h].childNodes[n].setAttribute("title",this._tipData[C].text),this._tipData[C].showIcon&&(F+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[h].childNodes[n].removeAttribute("title");this.contDates.childNodes[h].childNodes[n].innerHTML="\x3cdiv class\x3d'"+F+"'\x3e"+m.getDate()+"\x3c/div\x3e";this.contDates.childNodes[h].childNodes[n]._date=new Date(C);this.contDates.childNodes[h].childNodes[n]._q=h;this.contDates.childNodes[h].childNodes[n]._w=n;this.contDates.childNodes[h].childNodes[n]._css_month=m.getMonth()==c;this.contDates.childNodes[h].childNodes[n]._css_date=!this._nullDate&&C==e;this.contDates.childNodes[h].childNodes[n]._css_weekend=6<=l;this.contDates.childNodes[h].childNodes[n]._css_dis=this._isOutOfRange(C);this.contDates.childNodes[h].childNodes[n]._css_holiday=1==this._holidays[C];this._updateCellStyle(h,n);C==e&&(this._activeDateCell=this.contDates.childNodes[h].childNodes[n]);7<++l&&(l=1);g++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(a)}};this._updateCellStyle=function(a,b){var c=this.contDates.childNodes[a].childNodes[b],e;e="dhtmlxcalendar_cell dhtmlxcalendar_cell"+(c._css_month?"_month":"");e+=c._css_date?"_date":"";e+=c._css_weekend?"_weekend":"";e+=c._css_holiday?"_holiday":"";e+=c._css_dis?"_dis":"";e+=c._css_hover&&!c._css_dis?"_hover":"";c.className=e};this._minutesInterval=5;this._initSelector=function(a,b){this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover));this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="\x26nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="\x26nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(a){a=a||event;a=a.target||a.srcElement;!0===a._cell&&(h._selHover!=a&&h._clearSelHover(),null!=String(a.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(a.className+=" dhtmlxcalendar_selector_cell_hover",h._selHover=a))},this._sel.onmouseout=function(){h._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;h._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;h._scrollYears(1)},1==this.conf.touch&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow");if(1!=this._sel._ta[a]){if("month"==a){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+b;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var c=0,e=0;4>e;e++){var g=document.createElement("UL");g.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(g);for(var l=0;3>l;l++){var n=document.createElement("LI");n.innerHTML=this.langData[this.lang].monthesSNames[c];n.className="dhtmlxcalendar_selector_cell";g.appendChild(n);n._month=c;n._cell=!0;this._msCells[c++]=n}}this.msCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;null!=a._month&&(h._hideSelector(),h._updateActiveMonth(),h._drawMonth(new Date(h._activeMonth.getFullYear(),a._month,1,0,0,0,0)),h._doOnSelectorChange())};1==this.conf.touch&&(this.msCont.ontouchstart=this.msCont.onclick)}if("year"==a){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+b;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(e=0;4>e;e++)for(g=document.createElement("UL"),g.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(g),l=0;3>l;l++)n=document.createElement("LI"),n.className="dhtmlxcalendar_selector_cell",n._cell=!0,g.appendChild(n);this.ysCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;null!=a._year&&(h._hideSelector(),h._drawMonth(new Date(a._year,h._activeMonth.getMonth(),1,0,0,0,0)),h._doOnSelectorChange())};1==this.conf.touch&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if("hours"==a){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+b;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(e=c=0;4>e;e++)for(g=document.createElement("UL"),g.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(g),l=0;6>l;l++)n=document.createElement("LI"),n.innerHTML=this._fixLength(c,2),n.className="dhtmlxcalendar_selector_cell",g.appendChild(n),n._hours=c,n._cell=!0,this._hsCells[c++]=n;this.hsCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;null!=a._hours&&(h._hideSelector(),h._activeDate.setHours(a._hours),h._updateActiveHours(),h._updateVisibleHours(),h._doOnSelectorChange(),h.callEvent("onTimeChange",[new Date(h._activeDate.getTime())]))};1==this.conf.touch&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if("minutes"==a){var m=4,q=3,C=2;1==this._minutesInterval&&(1==this._selectorMode?(m=2,q=3,C=1):(m=2,q=5,C=1,b+="5"));10==this._minutesInterval&&(m=2);15==this._minutesInterval&&(m=1,q=4,b+="4");this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+b;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(e=c=0;e<m;e++)for(g=document.createElement("UL"),g.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(g),l=0;l<q;l++)n=document.createElement("LI"),n.innerHTML=1<C?this._fixLength(c,C):c,n.className="dhtmlxcalendar_selector_cell",g.appendChild(n),n._minutes=c,n._cell=!0,this._rsCells[c]=n,c+=this._minutesInterval;this.rsCont.onclick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a=a.target||a.srcElement;if(null!=a._minutes){if(1==h._minutesInterval){var b=h.getFormatedDate("%i"),b=1==h._selectorMode?a._minutes.toString()+b.charAt(1):b.charAt(0)+a._minutes.toString();h._activeDate.setMinutes(Number(b));h.callEvent("onTimeChange",[new Date(h._activeDate.getTime())]);h._hideSelector();if(1==h._selectorMode){h._updateVisibleMinutes(!0);h._selectorMode=2;h._showSelector("minutes",h._sel._x,h._sel._y,"selector_minutes",!0);h._updateActiveMinutes();return}h._selectorMode=1}else h._hideSelector(),h._activeDate.setMinutes(a._minutes),h._updateActiveMinutes(),h.callEvent("onTimeChange",[new Date(h._activeDate.getTime())]);h._updateVisibleMinutes();h._doOnSelectorChange()}};1==this.conf.touch&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[a]=!0}};this._showSelector=function(a,b,c,e,g){!0===g&&null!=this._sel&&this._isSelectorVisible()&&a==this._sel._t?this._hideSelector():("dhx_terrace"==this.conf.skin&&(b+=12),this._sel&&this._sel._ta[a]||this._initSelector(a,e),a!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=b,this._sel._y=c,this._sel.style.visibility="hidden",this._sel.style.display="",this._selCover.style.width=this.base.offsetWidth-2+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px",this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px",this._selCover.style.display="",this._sel._t=a,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+e+("hours"==a&&1==this.conf.today?"2":""),this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==a?"":"none",b=Math.max(0,b-Math.round(this._sel.offsetWidth/2)),b+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(b=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=b+"px",this._sel.style.top="hours"==a||"minutes"==a?c-this._sel.offsetHeight+"px":c+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(a))};this._doOnSelectorShow=function(a){"month"==a&&this._updateActiveMonth();"year"==a&&this._updateYearsList(this._activeMonth);"hours"==a&&this._updateActiveHours();"minutes"==a&&this._updateActiveMinutes()};this._hideSelector=function(a){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none","minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))};this._isSelectorVisible=function(){return this._sel?"none"!=this._sel.style.display:!1};this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),!0===a])};this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)};this._unloadSelector=function(a){if(this._sel&&this._sel._ta[a]){if("month"==a){this._msActive=this.msCont.onclick=this.msCont.ontouchstart=null;for(var b in this._msCells)this._msCells[b]._cell=null,this._msCells[b]._month=null,this._msCells[b].parentNode.removeChild(this._msCells[b]),this._msCells[b]=null;for(this._msCells=null;0<this.msCont.childNodes.length;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if("year"==a){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(b in this._ysCells)this._ysCells[b]._cell=null,this._ysCells[b]._year=null,this._ysCells[b].parentNode.removeChild(this._ysCells[b]),this._ysCells[b]=null;for(this._ysCells=null;0<this.ysCont.childNodes.length;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if("hours"==a){this._hsActive=this.hsCont.onclick=this.hsCont.ontouchstart=null;for(b in this._hsCells)this._hsCells[b]._cell=null,this._hsCells[b]._hours=null,this._hsCells[b].parentNode.removeChild(this._hsCells[b]),this._hsCells[b]=null;for(this._hsCells=null;0<this.hsCont.childNodes.length;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if("minutes"==a){this._rsActive=this.rsCont.onclick=this.rsCont.ontouchstart=null;for(b in this._rsCells)this._rsCells[b]._cell=null,this._rsCells[b]._minutes=null,this._rsCells[b].parentNode.removeChild(this._rsCells[b]),this._rsCells[b]=null;for(this._rsCells=null;0<this.rsCont.childNodes.length;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[a]=null}};this.setMinutesInterval=function(a){if(1==a||5==a||10==a||15==a)this._minutesInterval=a,this._unloadSelector("minutes")};this._updateActiveMonth=function(){"undefined"!=typeof this._msActive&&"undefined"!=typeof this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell");this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();this._ysCells[a]&&(this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateYearsList=function(a){for(var b in this._ysCells)this._ysCells[b]=null,delete this._ysCells[b];a=12*Math.floor(a.getFullYear()/12);for(b=0;4>b;b++)for(var c=0;3>c;c++)this.ysCont.childNodes[b].childNodes[c].innerHTML=a,this.ysCont.childNodes[b].childNodes[c]._year=a,this.ysCont.childNodes[b].childNodes[c].className="dhtmlxcalendar_selector_cell",this._ysCells[a++]=this.ysCont.childNodes[b].childNodes[c];this._updateActiveYear()};this._scrollYears=function(a){a=new Date((0>a?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(a)};this._updateActiveHours=function(){"undefined"!=typeof this._hsActive&&"undefined"!=typeof this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell");this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){null!=this._rsActive&&"undefined"!=typeof this._rsActive&&"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell");this._rsActive=1==this._minutesInterval?this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._activeDate.getMinutes();"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateVisibleMinutes=function(a){var b=this._fixLength(this._activeDate.getMinutes(),2).toString();1==a&&(b=b.charAt(0)+"\x3cspan class\x3d'dhtmlxcalendar_selected_date'\x3e"+b.charAt(1)+"\x3c/span\x3e");this.contTime.firstChild.firstChild.childNodes[3].innerHTML=b;1==a&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)};this._fixLength=function(a,b){for(;String(a).length<b;)a="0"+String(a);return a};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(a){var b={};if(null!=this._strToDate)for(var c in this.i)if(null!=this.i[c].input&&0<this.i[c].input.value.length){var e=this._strToDate(this.i[c].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");e instanceof Date&&(b[c]=e)}this._dateFormat=a;a=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){switch(a.replace(/%/,"")){case "n":case "h":case "j":case "g":case "G":return"\\d{1,2}";case "m":case "d":case "H":case "i":case "s":case "y":return"\\d{2}";case "Y":return"\\d{4}";case "M":return"("+h.langData[h.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case "F":return"("+h.langData[h.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case "D":return"[a-z]{2}";case "a":case "A":return"AM|PM";case "u":return"\\d{1,6}";case "P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return a});this._dateFormatRE=new RegExp(a,"i");for(c in b)this.i[c].input.value=this._dateToStr(b[c]);b=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(a){this._dateFormatRE&&a.match(this._dateFormatRE)&&a!=this.getFormatedDate()&&(a=this._strToDate(a),a instanceof Date&&(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])?this._updateInp():(this._nullDate=!1,this._activeDate=a,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0))))};this.showMonth=function(a){"string"==typeof a&&(a=this._strToDate(a));a instanceof Date&&this._drawMonth(a)};this.setFormatedDate=function(a,b,c,e){a=this._strToDate(b,a);if(e)return a;this.setDate(a)};this.getFormatedDate=function(a,b){if(!(b&&b instanceof Date)){if(this._nullDate)return"";b=new Date(this._activeDate)}return this._dateToStr(b,a)};this.getWeekNumber=function(a){"string"==typeof a&&(a=this._strToDate(a));if(!(a instanceof Date))return"Invalid Date";"undefined"==typeof this._ftDay&&(this._ftDay=4);var b=this._wStart,c=4,e=(new Date(a.getFullYear(),0,1,0,0,0,0)).getDay();0==e&&(e=7);c<b&&(c+=7,e+=7);var g=0;e>=b&&e<=c||(g=1);b=e-b;g=new Date(a.getFullYear(),0,1-b+7*g,0,0,0,0);b=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,0,0,0,0);g=Math.ceil((b.getTime()-g.getTime())/6048E5);0==g&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),g=a.getDay()-this._wStart,0>g&&(g+=7),a.setDate(a.getDate()-g),g=this.getWeekNumber(a));return g};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(a){if(!a&&this._hasParent)this._show();else{if("string"==typeof a){var b=document.getElementById(a);if(null!=b&&"undefined"!=typeof b._dhtmlxcalendar_uid&&null!=this.i[b._dhtmlxcalendar_uid]){this._show(b._dhtmlxcalendar_uid);return}}if("object"==typeof a&&"undefined"!=typeof a._dhtmlxcalendar_uid&&this.i[a._dhtmlxcalendar_uid]==a)this._show(a._dhtmlxcalendar_uid);else{if("undefined"==typeof a)for(var c in this.i)a||(a=c);a&&this._show(a)}}};this.hide=function(){this._isVisible()&&this._hide()};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(a,b){this._py=this._px=null;"right"==a||"bottom"==a?this.pos=a:(this.pos="int","undefined"==typeof a||isNaN(a)||(this.base.style.left=a+"px",this._px=a),"undefined"==typeof b||isNaN(b)||(this.base.style.top=b+"px",this._py=b),this._ifrSize())};this._show=function(a,b){if(!0===b&&this._activeInp==a&&this._isVisible())this._hide();else{this.base.style.visibility="hidden";this.base.style.display="";if(a){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=" dhtmlxcalendar_in_input");var c=this.i[a].input||this.i[a].button,e=window.dhx4.screenDim(),g=window.dhx4.absTop(c),h=window.dhx4.absLeft(c);if("right"==this.pos)this.base.style.left=h+c.offsetWidth+"px",this.base.style.top=Math.min(g,e.bottom-this.base.offsetHeight)+"px";else if("bottom"==this.pos){var l=g+c.offsetHeight+1;l+this.base.offsetHeight>e.bottom&&(g-=this.base.offsetHeight,-20<=g&&(l=g));g=h;g+this.base.offsetWidth>e.right&&(g=Math.max(0,h+c.offsetWidth-this.base.offsetWidth));this.base.style.left=g+"px";this.base.style.top=l+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=a}else null!=this._px&&null!=this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();this._ifr&&(this._ifr.style.display="");this.callEvent("onShow",[])}};this._hide=function(){null!=this._lastHover&&this._clearDayHover();this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);0<=this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,""));this._activeInp=null;this._ifr&&(this._ifr.style.display="none");this.callEvent("onHide",[])};this._isVisible=function(){return"none"!=this.base.style.display};this._rangeActive=!1;this._rangeTo=this._rangeFrom=null;this._rangeSet={};this.setInsensitiveDays=function(a){a=this._extractDates(a);for(var b=0;b<a.length;b++)this._rangeSet[(new Date(a[b].getFullYear(),a[b].getMonth(),a[b].getDate(),0,0,0,0)).getTime()]=!0;this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(a){if(null==a)this._clearHolidays();else if(null!=a){a=this._extractDates(a);for(var b=0;b<a.length;b++)this._holidays[(new Date(a[b].getFullYear(),a[b].getMonth(),a[b].getDate(),0,0,0,0)).getTime()]=!0}this._drawMonth(this._activeMonth)};this._extractDates=function(a){if("string"==typeof a||a instanceof Date)a=[a];for(var b=[],c=0;c<a.length;c++)if("string"==typeof a[c])for(var e=a[c].split(","),g=0;g<e.length;g++)b.push(this._strToDate(e[g]));else a[c]instanceof Date&&b.push(a[c]);return b};this._clearRange=function(){this._rangeActive=!1;this._rangeTo=this._rangeFrom=this._rangeType=null};this._clearRangeSet=function(){for(var a in this._rangeSet)this._rangeSet[a]=null,delete this._rangeSet[a]};this._clearHolidays=function(){for(var a in this._holidays)this._holidays[a]=null,delete this._holidays[a]};this._isOutOfRange=function(a){if(1==this._rangeSet[a]||this._rangeActive&&("in"==this._rangeType&&(a<this._rangeFrom||a>this._rangeTo)||"out"==this._rangeType&&a>=this._rangeFrom&&a<=this._rangeTo||"from"==this._rangeType&&a<this._rangeFrom||"to"==this._rangeType&&a>this._rangeTo))return!0;a=new Date(a);return this._rangeWeek&&!0===this._rangeWeekData[a.getDay()]||this._rangeMonth&&!0===this._rangeMonthData[a.getDate()]||this._rangeYear&&!0===this._rangeYearData[a.getMonth()+"_"+a.getDate()]?!0:!1};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(a,b,c){var e=!1;if(null!=a&&null!=b){a instanceof Date||(a=this._strToDate(a));b instanceof Date||(b=this._strToDate(b));if(a.getTime()>b.getTime())return;this._rangeFrom=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime();this._rangeTo=(new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0)).getTime();this._rangeActive=!0;this._rangeType="in";e=!0}e||null==a||null!=b||(a instanceof Date||(a=this._strToDate(a)),this._rangeFrom=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime(),this._rangeTo=null,!0===c&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",e=!0);e||null!=a||null==b||(b instanceof Date||(b=this._strToDate(b)),this._rangeFrom=null,this._rangeTo=(new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0)).getTime(),!0===c&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",e=!0);e&&this._drawMonth(this._activeMonth)};this.setInsensitiveRange=function(a,b){null!=a&&null!=b?(a instanceof Date||(a=this._strToDate(a)),b instanceof Date||(b=this._strToDate(b)),a.getTime()>b.getTime()||(this._rangeFrom=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime(),this._rangeTo=(new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0)).getTime(),this._rangeActive=!0,this._rangeType="out",this._drawMonth(this._activeMonth))):null!=a&&null==b?this.setSensitiveRange(null,a,!0):null==a&&null!=b&&this.setSensitiveRange(b,null,!0)};this.disableDays=function(a,b){if("week"==a){"object"!=typeof b&&"undefined"==typeof b.length&&(b=[b]);this._rangeWeekData||(this._rangeWeekData={});for(var c in this._rangeWeekData)this._rangeWeekData[c]=!1,delete this._rangeWeekData[c];for(var e=0;e<b.length;e++)this._rangeWeekData[b[e]]=!0,7==b[e]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==a){"object"!=typeof b&&"undefined"==typeof b.length&&(b=[b]);this._rangeMonthData||(this._rangeMonthData={});for(c in this._rangeMonthData)this._rangeMonthData[c]=!1,delete this._rangeMonthData[c];for(e=0;e<b.length;e++)this._rangeMonthData[b[e]]=!0;this._rangeMonth=!0}if("year"==a){var g=this._extractDates(b);this._rangeYearData||(this._rangeYearData={});for(c in this._rangeYearData)this._rangeYearData[c]=!1,delete this._rangeYearData[c];for(e=0;e<g.length;e++)this._rangeYearData[g[e].getMonth()+"_"+g[e].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)};this.enableDays=function(a){"week"==a&&(this._rangeWeek=!1);"month"==a&&(this._rangeMonth=!1);"year"==a&&(this._rangeYear=!1);this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=!1;this._tipCellDim=this._tipCellDate=this._tipPopup=null;this.setTooltip=function(a,b,c,e){a=this._extractDates(a);for(var g=0;g<a.length;g++){var h=(new Date(a[g].getFullYear(),a[g].getMonth(),a[g].getDate(),0,0,0,0)).getTime();this._tipData[h]={text:b,showIcon:c,usePopup:e}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(a){a=this._extractDates(a);for(var b=0;b<a.length;b++){var c=(new Date(a[b].getFullYear(),a[b].getMonth(),a[b].getDate(),0,0,0,0)).getTime();this._tipData[c]=null;delete this._tipData[c]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(a){var b=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime();null!=this._tipData[b]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=a,this._tipCellDim=this.getCellDimension(a),this._tipText=this._tipData[b].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)};this._showTooltipPopup=function(a,b,c,e,g){h._tipPopup||(h._tipPopup=new dhtmlXPopup({mode:"top"}));h._tipPopup.attachHTML(h._tipText);h._tipPopup.show(h._tipCellDim.x,h._tipCellDim.y,h._tipCellDim.w,h._tipCellDim.h);h.callEvent("onPopupShow",[h._tipCellDate])};this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM);null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(a){"string"==typeof a&&(a=this._strToDate(a));if(!(a instanceof Date))return null;a=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)).getTime();for(var b=null,c=0;c<this.contDates.childNodes.length;c++)for(var e=0;e<this.contDates.childNodes[c].childNodes.length;e++){var g=this.contDates.childNodes[c].childNodes[e];null!=g._date&&g._date.getTime()==a&&(b={x:window.dhx4.absLeft(g),y:window.dhx4.absTop(g),w:g.offsetWidth,h:g.offsetHeight})}return b};this._updateFromInput=function(a){this._nullInInput&&0==a.value.replace(/\s/g,"").length?this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null])?this._updateInp():this.setDate(null):this._updateDateStr(a.value)};this._doOnClick=function(a){a=a||event;a=a.target||a.srcElement;a._dhtmlxcalendar_uid&&a._dhtmlxcalendar_uid!=h._activeInp&&h._isVisible()&&h._activeInp?h._hide():a._dhtmlxcalendar_uid&&h.i[a._dhtmlxcalendar_uid]||(h._isSelectorVisible()?h._hideSelector():!h._hasParent&&h._isVisible()&&h._hide())};this._doOnKeyDown=function(a){a=a||event;if(27==a.keyCode||13==a.keyCode)h._isSelectorVisible()?h._hideSelector():h._isVisible()&&!h._hasParent&&h._hide()};this._doOnInpClick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a=a.target||a.srcElement;a._dhtmlxcalendar_uid&&(h._listenerEnabled||h._updateFromInput(a),h._show(a._dhtmlxcalendar_uid,!0))};this._doOnInpKeyUp=function(a){a=a||event;var b=a.target||a.srcElement;13!=a.keyCode&&b._dhtmlxcalendar_uid&&(h._listenerEnabled||h._updateFromInput(b))};this._doOnBtnClick=function(a){a=a||event;"touchstart"==a.type&&null!=a.preventDefault&&a.preventDefault();a=a.target||a.srcElement;a._dhtmlxcalendar_uid&&(null!=h.i[a._dhtmlxcalendar_uid].input&&h._updateFromInput(h.i[a._dhtmlxcalendar_uid].input),h._show(a._dhtmlxcalendar_uid,!0))};this._doOnUnload=function(){h&&h.unload&&h.unload()};"function"==typeof window.addEventListener?(document.body.addEventListener("click",h._doOnClick,!1),window.addEventListener("keydown",h._doOnKeyDown,!1),window.addEventListener("unload",h._doOnUnload,!1),1==this.conf.touch&&document.body.addEventListener("touchstart",h._doOnClick,!1)):(document.body.attachEvent("onclick",h._doOnClick),document.body.attachEvent("onkeydown",h._doOnKeyDown),window.attachEvent("onunload",h._doOnUnload));this.attachObj=function(a){var b=window.dhx4.newId();"string"==typeof a?this.i[b]={input:document.getElementById(a)}:"undefined"!=typeof a.tagName?this.i[b]={input:a}:"object"!=typeof a||null==a.input&&null==a.button||(this.i[b]={},null!=a.input&&(this.i[b].input="string"==typeof a.input?document.getElementById(a.input):a.input),null!=a.button&&(this.i[b].button="string"==typeof a.button?document.getElementById(a.button):a.button));this._attachEventsToObject(b);return b};this.detachObj=function(a){var b=null;null!=this.i[a]?b=a:"string"==typeof a?(a=document.getElementById(a),b=a._dhtmlxcalendar_uid):"undefined"!=typeof a.tagName?b=a._dhtmlxcalendar_uid:"object"!=typeof a||null==a.input&&null==a.button||(null==b&&null!=a.input&&(b=("string"==typeof a.input?document.getElementById(a.input):a.input)._dhtmlxcalendar_uid),null==b&&null!=a.button&&(b=("string"==typeof a.button?document.getElementById(a.button):a.button)._dhtmlxcalendar_uid));if(null!=b&&null!=this.i[b]){this._detachEventsFromObject(b);for(var c in this.i[c])this.i[b][c]._dhtmlxcalendar_uid=null,this.i[b][c]=null,delete this.i[b][c];this.i[b]=null;delete this.i[b];return!0}return!1};this._attachEventsToObject=function(a){null!=this.i[a].button?(this.i[a].button._dhtmlxcalendar_uid=a,"function"==typeof window.addEventListener?(this.i[a].button.addEventListener("click",h._doOnBtnClick,!1),1==this.conf.touch&&this.i[a].button.addEventListener("touchstart",h._doOnBtnClick,!1)):this.i[a].button.attachEvent("onclick",h._doOnBtnClick)):null!=this.i[a].input&&(this.i[a].input._dhtmlxcalendar_uid=a,"function"==typeof window.addEventListener?(this.i[a].input.addEventListener("click",h._doOnInpClick,!1),this.i[a].input.addEventListener("keyup",h._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[a].input.addEventListener("touchstart",h._doOnInpClick,!1)):(this.i[a].input.attachEvent("onclick",h._doOnInpClick),this.i[a].input.attachEvent("onkeyup",h._doOnInpKeyUp)))};this._detachEventsFromObject=function(a){null!=this.i[a].button?"function"==typeof window.addEventListener?(this.i[a].button.removeEventListener("click",h._doOnBtnClick,!1),1==this.conf.touch&&this.i[a].button.removeEventListener("touchstart",h._doOnBtnClick,!1)):this.i[a].button.detachEvent("onclick",h._doOnBtnClick):null!=this.i[a].input&&("function"==typeof window.addEventListener?(this.i[a].input.removeEventListener("click",h._doOnInpClick,!1),this.i[a].input.removeEventListener("keyup",h._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[a].input.removeEventListener("touchstart",h._doOnInpClick,!1)):(this.i[a].input.detachEvent("onclick",h._doOnInpClick),this.i[a].input.detachEvent("onkeyup",h._doOnInpKeyUp)))};this._updateInp=function(){null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate())};this.enableListener=function(a){a&&("function"==typeof window.addEventListener?(a.addEventListener("focus",h._listenerEvFocus,!1),a.addEventListener("blur",h._listenerEvBlur,!1)):(a.attachEvent("onfocus",h._listenerEvFocus),a.attachEvent("onblur",h._listenerEvBlur)))};this.disableListener=function(a){a&&(a._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),"function"==typeof window.addEventListener?(a.removeEventListener("focus",h._listenerEvFocus,!1),a.removeEventListener("blur",h._listenerEvBlur,!1)):(a.detachEvent("onfocus",h._listenerEvFocus),a.detachEvent("onblur",h._listenerEvBlur)))};this._startListener=function(a){this._tmListener&&window.clearTimeout(this._tmListener);"undefined"==typeof a._v1&&(a._v1=a.value);a._v1!=a.value&&(this._updateFromInput(a),a._v1=a.value);a._f0&&(this._tmListener=window.setTimeout(function(){h._startListener(a)},100))};this._listenerEvFocus=function(a){a=a||event;a=a.target||a.srcElement;a._f0=!0;h._startListener(a)};this._listenerEvBlur=function(a){a=a||event;(a.target||a.srcElement)._f0=!1};for(var m in this.i)this._attachEventsToObject(m);window.dhx4._eventable(this);this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)};this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",a)};this.unload=function(){this._lastHover=this._dateFormatRE=this._dateFormat=this._activeMonth=this._activeInp=this._activeDateCell=this._activeDate=null;this._tmListener&&window.clearTimeout(this._tmListener);this._tmListener=null;"function"==typeof window.addEventListener?(document.body.removeEventListener("click",h._doOnClick,!1),window.removeEventListener("keydown",h._doOnKeyDown,!1),window.removeEventListener("unload",h._doOnUnload,!1),1==this.conf.touch&&document.body.removeEventListener("touchstart",h._doOnClick,!1)):(document.body.detachEvent("onclick",h._doOnClick),document.body.detachEvent("onkeydown",h._doOnKeyDown),window.detachEvent("onunload",h._doOnKeyDown));this._doOnUnload=this._doOnKeyDown=this._doOnClick=null;for(var a in this.i)this.i[a]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(a),this.disableListener(this.i[a].input),this.i[a]=null,delete this.i[a];this._doOnInpKeyUp=this._doOnInpClick=this.i=null;window.dhx4._eventable(this,"clear");this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;for(this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;0<this.contMonth.firstChild.firstChild.childNodes.length;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);for(this.contMonth=null;0<this.contDays.firstChild.childNodes.length;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=null;this.contDates.onmouseover=null;for(this.contDates.onmouseout=null;0<this.contDates.childNodes.length;){for(;0<this.contDates.lastChild.childNodes.length;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;for(this.contTime.firstChild.firstChild.ontouchstart=null;0<this.contTime.firstChild.firstChild.childNodes.length;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this._lastHover=this.contTime=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null);if(this._sel){for(a in this._sel._ta)this._sel._ta[a]=null;this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;for(this._sel.onmouseout=null;0<this._sel.firstChild.firstChild.firstChild.childNodes.length;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);for(this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);0<this._sel.childNodes.length;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.unload=this.showTime=this.show=this.setYearsRange=this.setDateFormat=this.setDate=this.hideTime=this.hide=this.enableIframe=this._updateYearsList=this._updateVisibleMinutes=this._updateVisibleHours=this._updateDateStr=this._updateCellStyle=this._updateActiveYear=this._updateActiveMonth=this._updateActiveMinutes=this._updateActiveHours=this._strToDate=this._showSelector=this._show=this._scrollYears=this._isVisible=this._isSelectorVisible=this._initSelector=this._hideSelector=this._hide=this._ifrSize=this._fixLength=this._drawMonth=this._doOnSelectorShow=this._doOnSelectorChange=this._clearSelHover=this._clearDayHover=this.base=null;null!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null);for(a in this)delete this[a];h=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:"January February March April May June July August September October November December".split(" "),monthesSNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysFNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysSNames:"Su Mo Tu We Th Fr Sa".split(" "),weekstart:1,weekname:"w",today:"Today",clear:"Clear"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(a){var b=this,c=function(a){return 1==String(a).length?"0"+String(a):a},e=function(a,b){return"\x3cspan class\x3d'dhtmlxcalendar_month_label_"+a+"'\x3e"+b+"\x3c/span\x3e"},g=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(g){switch(g){case "%m":return e("month",c(a.getMonth()+1));case "%n":return e("month",a.getMonth()+1);case "%M":return e("month",b.langData[b.lang].monthesSNames[a.getMonth()]);case "%F":return e("month",b.langData[b.lang].monthesFNames[a.getMonth()]);case "%y":return e("year",c(a.getYear()%100));case "%Y":return e("year",a.getFullYear());case "%%":return"%";default:return g}}),b=c=e=null;return g};dhtmlXCalendarObject.prototype.enableIframe=function(a){1==a?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("\x3chtml\x3e\x3chead\x3e\x3cstyle\x3ehtml,body{width:100%;height:100%;overflow:hidden;margin:0px;}\x3c/style\x3e\x3c/head\x3e\x3cbody\x3c/body\x3e\x3c/html\x3e")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)};dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var a=this.langData[this.lang];return{monthFullName:a.monthesFNames,monthShortName:a.monthesSNames,dayFullName:a.daysFNames,dayShortName:a.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(a,b){return window.dhx4.str2date(a,b||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(a,b){return window.dhx4.date2str(a,b||this._dateFormat,this._dateStrings())};function dhtmlXMenuObject(a,b){var c=this;this.conf={skin:b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"material",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",icons_css:!1,arrow_ff_fix:0<=navigator.userAgent.indexOf("MSIE")&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27,material:25},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24,material:30},tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]};if("object"==typeof a&&null!=a&&"undefined"==typeof a.tagName){if(null!=a.icons_path||null!=a.icon_path)this.conf.icons_path=a.icons_path||a.icon_path;null!=a.skin&&(this.conf.skin=a.skin);a.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:a.visible_area.x1,x2:a.visible_area.x2,y1:a.visible_area.y1,y2:a.visible_area.y2});for(var e in{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1,iconset:1})null!=a[e]&&(this.conf.autoload[e]=a[e]);a=a.parent}if(null==a)this.base=document.body;else{var g="string"==typeof a?document.getElementById(a):a;null!=g?(this.base=g,this.base.id||(this.base.id="menuBaseId_"+(new Date).getTime()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},this.base.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1}):this.base=document.body}this.idPrefix="";this.topId="dhxWebMenuTopId";this.idPull={};this.itemPull={};this.userData={};this.radio={};this.setSkin=function(a){var b=this.conf.skin;this.conf.skin=a;switch(this.conf.skin){case "dhx_skyblue":case "dhx_web":this.conf.tl_botmarg=2;this.conf.tl_rmarg=1;this.conf.tl_ofsleft=1;break;case "dhx_terrace":case "material":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+b+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle");for(var c in this.idPull)this.idPull[c].className=String(this.idPull[c].className).replace(b,this.conf.skin)};this.setSkin(this.conf.skin);this._addSubItemToSelected=function(a,b){for(var c=!0,e=0;e<this.conf.selected_sub.length;e++)this.conf.selected_sub[e][0]==a&&this.conf.selected_sub[e][1]==b&&(c=!1);1==c&&this.conf.selected_sub.push([a,b]);return c};this._removeSubItemFromSelected=function(a,b){for(var c=[],e=!1,g=0;g<this.conf.selected_sub.length;g++)this.conf.selected_sub[g][0]==a&&this.conf.selected_sub[g][1]==b?e=!0:c[c.length]=this.conf.selected_sub[g];1==e&&(this.conf.selected_sub=c);return e};this._getSubItemToDeselectByPolygon=function(a){for(var b=[],c=0;c<this.conf.selected_sub.length;c++)if(this.conf.selected_sub[c][1]==a){b[b.length]=this.conf.selected_sub[c][0];for(var b=b.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[c][0])),e=!0,g=0;g<this.conf.opened_poly.length;g++)this.conf.opened_poly[g]==this.conf.selected_sub[c][0]&&(e=!1);1==e&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[c][0]);this.conf.selected_sub[c][0]=-1;this.conf.selected_sub[c][1]=-1}return b};this._hidePolygon=function(a){if(null!=this.idPull["polygon_"+a]){null!=this.idPull["polygon_"+a]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+a]._zId);if("undefined"!=typeof this._menuEffect&&!1!==this._menuEffect)this._hidePolygonEffect("polygon_"+a);else{if("none"==this.idPull["polygon_"+a].style.display)return;this.idPull["polygon_"+a].style.display="none";null!=this.idPull["arrowup_"+a]&&(this.idPull["arrowup_"+a].style.display="none");null!=this.idPull["arrowdown_"+a]&&(this.idPull["arrowdown_"+a].style.display="none");this._updateItemComplexState(a,!0,!1);window.dhx4.isIE6&&null!=this.idPull["polygon_"+a+"_ie6cover"]&&(this.idPull["polygon_"+a+"_ie6cover"].style.display="none")}a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onHide",[a]);null!=a&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+a,!0)}};this._showPolygon=function(a,b){var c=this._countVisiblePolygonItems(a);if(0!=c){var e="polygon_"+a;if(null!=this.idPull[e]&&null!=this.idPull[a]&&(!this.conf.top_mode||"web"!=this.conf.mode||this.conf.context||this.idPull[a]._mouseOver||b!=this.conf.dir_toplv)){this.conf.fixed_pos||this._autoDetectVisibleArea();var g=null,h=null;null==this.idPull[e]._zId&&(this.idPull[e]._zId=window.dhx4.newId());this.idPull[e]._zInd=window.dhx4.zim.reserve(this.idPull[e]._zId);this.idPull[e].style.visibility="hidden";this.idPull[e].style.left="0px";this.idPull[e].style.top="0px";this.idPull[e].style.display="";this.idPull[e].style.zIndex=this.idPull[e]._zInd;this.conf.auto_overflow&&(this.idPull[e].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-this.conf.v.y1?this.conf.overflow_limit=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-2*this.conf.of_ah[this.conf.skin])/this.conf.of_ih[this.conf.skin]),1):(this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+a]&&this._removeUpArrow(String(a).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+a]&&this._removeDownArrow(String(a).replace(this.idPrefix,""))));0<this.conf.overflow_limit&&this.conf.overflow_limit<c&&(null==this.idPull["arrowup_"+a]&&this._addUpArrow(String(a).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+a]&&this._addDownArrow(String(a).replace(this.idPrefix,"")),g=this.idPull["arrowup_"+a],g.style.display="none",h=this.idPull["arrowdown_"+a],h.style.display="none");0<this.conf.overflow_limit&&this.conf.overflow_limit<c?(this.idPull[e].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px",g.style.width=h.style.width=this.idPull[e].childNodes[1].style.width=this.idPull[e].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[e].childNodes[1].scrollTop=0,g.style.display="",h.style.display=""):(this.idPull[e].childNodes[1].style.height="",this.idPull[e].childNodes[1].style.width="");var l=null!=this.idPull[a].tagName?window.dhx4.absLeft(this.idPull[a]):this.idPull[a][0],u=null!=this.idPull[a].tagName?window.dhx4.absTop(this.idPull[a]):this.idPull[a][1],x=null!=this.idPull[a].tagName?this.idPull[a].offsetWidth:0,w=null!=this.idPull[a].tagName?this.idPull[a].offsetHeight:0,A=g=0,y=this.idPull[e].offsetWidth,C=this.idPull[e].offsetHeight;"bottom"==b&&(g=this.conf.rtl?l+(null!=x?x:0)-y:"right"==this.conf.align?l+x-y:l-1+(b==this.conf.dir_toplv?this.conf.tl_rmarg:0),A=u-1+w+this.conf.tl_botmarg);"right"==b&&(g=l+x-1,A=u+2);"left"==b&&(g=l-this.idPull[e].offsetWidth+2,A=u+2);"top"==b&&(g=l-1,A=u-C+2);if(this.conf.fixed_pos)var F=65536,D=65536;else F=null!=this.conf.v.x2?this.conf.v.x2:0,D=null!=this.conf.v.y2?this.conf.v.y2:0,0==F&&(window.innerWidth?(F=window.innerWidth,D=window.innerHeight):(F=document.body.offsetWidth,D=document.body.scrollHeight));g+y>F&&!this.conf.rtl&&(g=l-y+2);g<this.conf.v.x1&&this.conf.rtl&&(g=l+x-2);0>g&&(g=0);A+C>D&&null!=this.conf.v.y2&&(A=Math.max(u+w-C+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==a&&null!=h&&(A-=2),null==this.itemPull[a]||this.conf.context||this.itemPull[a].parent==this.idPrefix+this.topId&&(A-=this.base.offsetHeight));this.idPull[e].style.left=g+"px";this.idPull[e].style.top=A+"px";"undefined"!=typeof this._menuEffect&&!1!==this._menuEffect?this._showPolygonEffect(e):(this.idPull[e].style.visibility="",0<this.conf.overflow_limit&&this.conf.overflow_limit<c&&(this.idPull[e].childNodes[1].scrollTop=0,this._checkArrowsState(a)),window.dhx4.isIE6&&(c=e+"_ie6cover",null==this.idPull[c]&&(h=document.createElement("IFRAME"),h.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,h.frameBorder=0,h.setAttribute("src","javascript:false;"),document.body.insertBefore(h,document.body.firstChild),this.idPull[c]=h),this.idPull[c].style.left=g+"px",this.idPull[c].style.top=A+"px",this.idPull[c].style.width=this.idPull[e].offsetWidth+"px",this.idPull[c].style.height=this.idPull[e].offsetHeight+"px",this.idPull[c].style.zIndex=this.idPull[e].style.zIndex-1,this.idPull[c].style.display=""));a=String(a).replace(this.idPrefix,"");a==this.topId&&(a=null);this.callEvent("onShow",[a]);null!=a&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+a,!1)}}};this._redistribSubLevelSelection=function(a,b){for(;0<this.conf.opened_poly.length;)this.conf.opened_poly.pop();var c=this._getSubItemToDeselectByPolygon(b);this._removeSubItemFromSelected(-1,-1);for(var e=0;e<c.length;e++)null!=this.idPull[c[e]]&&c[e]!=a&&"enabled"==this.itemPull[c[e]].state&&(this.idPull[c[e]].className="sub_item");for(e=0;e<this.conf.opened_poly.length;e++)this.conf.opened_poly[e]!=b&&this._hidePolygon(this.conf.opened_poly[e]);if("enabled"==this.itemPull[a].state){this.idPull[a].className="sub_item_selected";if(this.itemPull[a].complex&&this.conf.dload&&"no"==this.itemPull[a].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(a,!0);this.itemPull[a].loaded="get";var g=a.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var a={params:{}};a.params[this.conf.dload_pid]=g;for(var b in this.conf.dload_params)a.params[b]=this.conf.dload_params[b];return a};this.loadStruct(this.conf.dload_url)}(this.itemPull[a].complex||this.conf.dload&&"yes"==this.itemPull[a].loaded)&&this.itemPull[a].complex&&null!=this.idPull["polygon_"+a]&&(this._updateItemComplexState(a,!0,!0),this._showPolygon(a,this.conf.dir_sublv));this._addSubItemToSelected(a,b);this.conf.selected=a}};this._doOnClick=function(a,b,c){this.conf.last_click=a;if(null!=this.itemPull[this.idPrefix+a].href_link&&"enabled"==this.itemPull[this.idPrefix+a].state){b=document.createElement("FORM");c=String(this.itemPull[this.idPrefix+a].href_link).split("?");b.action=c[0];if(null!=c[1]){c=String(c[1]).split("\x26");for(var e=0;e<c.length;e++){var g=String(c[e]).split("\x3d"),h=document.createElement("INPUT");h.type="hidden";h.name=g[0]||"";h.value=g[1]||"";b.appendChild(h)}}null!=this.itemPull[this.idPrefix+a].href_target&&(b.target=this.itemPull[this.idPrefix+a].href_target);b.style.display="none";document.body.appendChild(b);b.submit();null!=b&&document.body.removeChild(b)}else if("c"!=b.charAt(0)&&"d"!=b.charAt(1)&&"s"!=b.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[a,this.conf.ctx_zoneid,c]);else if("d"==b.charAt(1)||"win"==this.conf.mode&&"t"==b.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}};this._doOnTouchMenu=function(a){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[a]))};this._searchMenuNode=function(a,b){for(var c=[],e=0;e<b.length;e++)if("object"==typeof b[e]){5==b[e].length&&"object"!=typeof b[e][0]&&b[e][0].replace(this.idPrefix,"")==a&&0==e&&(c=b);var g=this._searchMenuNode(a,b[e]);0<g.length&&(c=g)}return c};this._getMenuNodes=function(a){var b=[],c;for(c in this.itemPull)this.itemPull[c].parent==a&&(b[b.length]=c);return b};this._genStr=function(a){for(var b="dhxId_",c=0;c<a;c++)b+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return b};this.getItemType=function(a){a=this.idPrefix+a;return null==this.itemPull[a]?null:this.itemPull[a].type};this.forEachItem=function(a){for(var b in this.itemPull)a(String(b).replace(this.idPrefix,""))};this._clearAndHide=function(){c.conf.selected=-1;for(c.conf.last_click=-1;0<c.conf.opened_poly.length;)c.conf.opened_poly.pop();for(var a=0;a<c.conf.selected_sub.length;a++){var b=c.conf.selected_sub[a][0];null!=c.idPull[b]&&"enabled"==c.itemPull[b].state&&("sub_item_selected"==c.idPull[b].className&&(c.idPull[b].className="sub_item"),c.idPull[b].className=="dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Selected"&&(c.idPull[b].className=null!=c.itemPull[b].cssNormal?c.itemPull[b].cssNormal:"dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Normal"));c._hidePolygon(b)}c.conf.is_touched=!1;c.conf.context&&c.conf.ctx_hideall&&c._hidePolygon(c.idPrefix+c.topId)};this._showSubLevelItem=function(a,b){null!=document.getElementById("arrow_"+this.idPrefix+a)&&(document.getElementById("arrow_"+this.idPrefix+a).style.display=b?"none":"");null!=document.getElementById("image_"+this.idPrefix+a)&&(document.getElementById("image_"+this.idPrefix+a).style.display=b?"none":"");null!=document.getElementById(this.idPrefix+a)&&(document.getElementById(this.idPrefix+a).style.display=b?"":"none")};this._hideSubLevelItem=function(a){this._showSubLevelItem(a,!0)};this.idPrefix=this._genStr(12)+"_";this._bodyClick=function(a){a=a||event;2==a.button||window.dhx4.isOpera&&1==a.ctrlKey||(c.conf.context?c.conf.ctx_autohide&&(!window.dhx4.isOpera||c._isContextMenuVisible()&&window.dhx4.isOpera)&&c._hideContextMenu():c._clearAndHide&&c._clearAndHide())};this._bodyContext=function(a){a=a||event;var b=String((a.srcElement||a.target).className);if(-1==b.search("dhtmlxMenu")||-1==b.search("SubLevelArea")){b=!0;for(a=a.target||a.srcElement;null!=a;)null!=a.id&&c.isContextZone(a.id)&&(b=!1),a==document.body&&(b=!1),a=a.parentNode;b&&c.hideContextMenu()}};"undefined"!=typeof window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext));dhx4.attachEvent("_onGridClick",this._bodyClick);this.unload=function(){window.dhx4._eventable(this,"clear");dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(l){}this.conf.live_id=null;"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext));this._bodyContext=this._bodyClick=null;this.removeItem(this.idPrefix+this.topId,!0);this.idPull=this.itemPull=null;if(this.conf.context)for(var a in this.conf.ctx_zones)this.removeContextZone(a);null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null);null!=this.base&&(this.conf.context||(this.base.className=""),this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base=this.base.onselectstart=null);for(a in this)this[a]=null;c=null};dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this;window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0});window.dhx4._eventable(this);1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu();"awesome"==this.conf.autoload.iconset&&(this.conf.icons_css=!0);null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload);for(e in{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[e]&&("function"==typeof this.conf.autoload[e]?this.attachEvent(e,this.conf.autoload[e]):"function"==typeof window[this.conf.autoload[e]]&&this.attachEvent(e,window[this.conf.autoload[e]]));null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text);null!=this.conf.autoload.align&&this.setAlign(this.conf.autoload.align);null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode);null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow);for(e in this.conf.autoload)this.conf.autoload[e]=null,delete this.conf.autoload[e];this.conf.autoload=null;return this}dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var a={params:{}},b;for(b in this.conf.dload_params)a.params[b]=this.conf.dload_params[b];return a},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(a){var b=0,c;for(c in this.itemPull){var e=this.itemPull[c].parent,g=this.itemPull[c].type;null!=this.idPull[c]&&(e!=a||"item"!=g&&"radio"!=g&&"checkbox"!=g||"none"==this.idPull[c].style.display||b++)}return b};dhtmlXMenuObject.prototype._redefineComplexState=function(a){if(this.idPrefix+this.topId!=a&&null!=this.idPull["polygon_"+a]&&null!=this.idPull[a]){var b=this._countVisiblePolygonItems(a);0<b&&!this.itemPull[a].complex&&this._updateItemComplexState(a,!0,!1);0==b&&this.itemPull[a].complex&&this._updateItemComplexState(a,!1,!1)}};dhtmlXMenuObject.prototype._updateItemComplexState=function(a,b,c){if(!this.conf.context&&"TopLevel"==this._getItemLevelType(a.replace(this.idPrefix,"")))this.itemPull[a].complex=b;else if(null!=this.idPull[a]&&null!=this.itemPull[a]&&(this.itemPull[a].complex=b,a!=this.idPrefix+this.topId))if(b=null,c=this.idPull[a].childNodes[this.conf.rtl?0:2],c.childNodes[0]&&0===String(c.childNodes[0].className).search("complex_arrow")&&(b=c.childNodes[0]),this.itemPull[a].complex){if(null==b){b=document.createElement("DIV");b.className="complex_arrow";for(b.id="arrow_"+a;0<c.childNodes.length;)c.removeChild(c.childNodes[0]);c.appendChild(b)}this.conf.dload&&"get"==this.itemPull[a].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=b.className&&(b.className="complex_arrow_loading"):b.className="complex_arrow"}else this.itemPull[a].complex||null==b||(c.removeChild(b),null!=this.itemPull[a].hotkey_backup&&this.setHotKey&&this.setHotKey(a.replace(this.idPrefix,""),this.itemPull[a].hotkey_backup))};dhtmlXMenuObject.prototype._getItemLevelType=function(a){return this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"};dhtmlXMenuObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXMenuObject.prototype._updateItemImage=function(a,b){a=this.idPrefix+a;var c=this.itemPull[a].type;if("checkbox"!=c&&"radio"!=c){var e=this.itemPull[a].parent==this.idPrefix+this.topId&&!this.conf.context,c=null;if(e)for(var g=0;g<this.idPull[a].childNodes.length;g++){if(null==c&&"dhtmlxMenu_TopLevel_Item_Icon"==(this.idPull[a].childNodes[g].className||"")||"i"==(this.idPull[a].childNodes[g].tagName||"").toLowerCase())c=this.idPull[a].childNodes[g]}else{try{c=this.idPull[a].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(h){}if(null==c||"undefined"==typeof c.className||"sub_icon"!=c.className&&"i"!=c.tagName.toLowerCase())c=null}g=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(0<g.length)if(null!=c)1==this.conf.icons_css?c.className=this.conf.icons_path+g:c.src=this.conf.icons_path+g;else if(e)1==this.conf.icons_css?(c=document.createElement("i"),c.className=this.conf.icons_path+g):(c=document.createElement("IMG"),c.className="dhtmlxMenu_TopLevel_Item_Icon",c.src=this.conf.icons_path+g,c.border="0",c.id="image_"+a),!this.conf.rtl&&0<this.idPull[a].childNodes.length?this.idPull[a].insertBefore(c,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(c);else if(1==this.conf.icons_css)e=this.idPull[a].childNodes[this.conf.rtl?2:0],e.innerHTML="\x3ci class\x3d'"+this.conf.icons_path+g+"'\x3e\x3c/i\x3e";else{c=document.createElement("IMG");c.className="sub_icon";c.src=this.conf.icons_path+g;c.border="0";c.id="image_"+a;for(e=this.idPull[a].childNodes[this.conf.rtl?2:0];0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(c)}else null!=c&&(e?c.parentNode.removeChild(c):(e=c.parentNode,e.removeChild(c),e.innerHTML="\x26nbsp;"))}};dhtmlXMenuObject.prototype._getAllParents=function(a){var b=[],c;for(c in this.itemPull)if(this.itemPull[c].parent==a&&(b[b.length]=this.itemPull[c].id,this.itemPull[c].complex))for(var e=this._getAllParents(this.itemPull[c].id),g=0;g<e.length;g++)b[b.length]=e[g];return b};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var a=window.dhx4.screenDim();this.conf.v.x1=a.left;this.conf.v.x2=a.right;this.conf.v.y1=a.top;this.conf.v.y2=a.bottom}};dhtmlXMenuObject.prototype.getItemPosition=function(a){a=this.idPrefix+a;var b=-1;if(null==this.itemPull[a])return b;for(var c=this.itemPull[a].parent,c=null!=this.idPull["polygon_"+c]?this.idPull["polygon_"+c].tbd:this.cont,e=0;e<c.childNodes.length;e++)if(c.childNodes[e]==this.idPull["separator_"+a]||c.childNodes[e]==this.idPull[a])b=e;return b};dhtmlXMenuObject.prototype.setItemPosition=function(a,b){a=this.idPrefix+a;if(null!=this.idPull[a]){var c=this.itemPull[a].parent==this.idPrefix+this.topId,e=this.idPull[a],g=this.getItemPosition(a.replace(this.idPrefix,"")),h=this.itemPull[a].parent,h=null!=this.idPull["polygon_"+h]?this.idPull["polygon_"+h].tbd:this.cont;h.removeChild(h.childNodes[g]);0>b&&(b=0);c&&1>b&&(b=1);b<h.childNodes.length?h.insertBefore(e,h.childNodes[b]):h.appendChild(e)}};dhtmlXMenuObject.prototype.getParentId=function(a){a=this.idPrefix+a;return null==this.itemPull[a]?null:(null!=this.itemPull[a].parent?this.itemPull[a].parent:this.topId).replace(this.idPrefix,"")};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0);this._isInited=!1;this.idPrefix=this._genStr(12)+"_";this.itemPull={}};"undefined"==typeof dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={});dhtmlXMenuObject.prototype.setIconset=function(a){this.conf.icons_css="awesome"==a};dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(a,b){var c=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var e=0;e<c.length;e++)c[e]!=a&&this._hidePolygon(c[e]),null!=this.idPull[c[e]]&&c[e]!=a&&(this.idPull[c[e]].className=this.idPull[c[e]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+a].state&&(this.idPull[this.idPrefix+a].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+a,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?a:this.conf.selected:a,this.itemPull[this.idPrefix+a].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+a,this.conf.dir_toplv))};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.conf.dir_toplv="bottom";this.conf.dir_sublv=this.conf.rtl?"left":"right";if(this.conf.context)this.idPull[this.idPrefix+this.topId]=[0,0],this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var a=this._getMenuNodes(this.idPrefix+this.topId),b=0;b<a.length;b++)"item"==this.itemPull[a[b]].type&&this._renderToplevelItem(a[b],null),"separator"==this.itemPull[a[b]].type&&this._renderSeparator(a[b],null)};dhtmlXMenuObject.prototype._renderToplevelItem=function(a,b){var c=this,e=document.createElement("DIV");e.id=a;e.className="enabled"==this.itemPull[a].state&&null!=this.itemPull[a].cssNormal?this.itemPull[a].cssNormal:"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[a].state?"Normal":"Disabled");if(""!=this.itemPull[a].title){var g=document.createElement("DIV");g.className="top_level_text";g.innerHTML=this.itemPull[a].title;e.appendChild(g)}0<this.itemPull[a].tip.length&&(e.title=this.itemPull[a].tip);if(""!=this.itemPull[a].imgen||""!=this.itemPull[a].imgdis)if(g=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"]){if(1==this.conf.icons_css){var h=document.createElement("i");h.className=this.conf.icons_path+g}else h=document.createElement("IMG"),h.border="0",h.id="image_"+a,h.src=this.conf.icons_path+g,h.className="dhtmlxMenu_TopLevel_Item_Icon";0<e.childNodes.length&&!this.conf.rtl?e.insertBefore(h,e.childNodes[0]):e.appendChild(h)}e.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};e.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont));null!=b&&(b++,0>b&&(b=0),b>this.cont.childNodes.length-1&&(b=null));null!=b?this.cont.insertBefore(e,this.cont.childNodes[b]):this.cont.appendChild(e);this.idPull[e.id]=e;this.itemPull[a].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[a].id,this.itemPull[a].id);e.onmouseover=function(){"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler);var a=c._getSubItemToDeselectByPolygon("parent");c._removeSubItemFromSelected(-1,-1);for(var b=0;b<a.length;b++)a[b]!=this.id&&c._hidePolygon(a[b]),null!=c.idPull[a[b]]&&a[b]!=this.id&&(null!=c.itemPull[a[b]].cssNormal?c.idPull[a[b]].className=c.itemPull[a[b]].cssNormal:("sub_item_selected"==c.idPull[a[b]].className&&(c.idPull[a[b]].className="sub_item"),c.idPull[a[b]].className=c.idPull[a[b]].className.replace(/Selected/g,"Normal")));if("enabled"==c.itemPull[this.id].state){this.className="dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Selected";c._addSubItemToSelected(this.id,"parent");c.conf.selected="win"==c.conf.mode?-1!=c.conf.selected?this.id:c.conf.selected:this.id;if(c.conf.dload){if("no"==c.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime();c.itemPull[this.id].loaded="get";var e=this.id.replace(c.idPrefix,"");c._dhxdataload.onBeforeXLS=function(){var a={params:{}};a.params[this.conf.dload_pid]=e;for(var b in this.conf.dload_params)a.params[b]=this.conf.dload_params[b];return a};c.loadStruct(c.conf.dload_url)}c.conf.top_mode&&"web"==c.conf.mode&&!c.conf.context&&(this._mouseOver=!0)}if((!c.conf.dload||c.conf.dload&&(!c.itemPull[this.id].loaded||"yes"==c.itemPull[this.id].loaded))&&c.itemPull[this.id].complex&&-1!=c.conf.selected)if(c.conf.top_mode&&"web"==c.conf.mode&&!c.conf.context){this._mouseOver=!0;var g=this.id;this._menuOpenTM=window.setTimeout(function(){c._showPolygon(g,c.conf.dir_toplv)},c.conf.top_tmtime)}else c._showPolygon(this.id,c.conf.dir_toplv)}c._doOnTouchMenu(this.id.replace(c.idPrefix,""))};e.onmouseout=function(){c.itemPull[this.id].complex&&-1!=c.conf.selected||"enabled"!=c.itemPull[this.id].state||(e.className=null!=c.itemPull[this.id].cssNormal?c.itemPull[this.id].cssNormal:"dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Normal");"web"==c.conf.mode&&(window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.conf.tm_sec,"JavaScript"));c.conf.top_mode&&"web"==c.conf.mode&&!c.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))};e.onclick=function(a){"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler);if("web"==c.conf.mode||"disabled"!=c.itemPull[this.id].state){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;if("win"==c.conf.mode&&c.itemPull[this.id].complex){if(c.conf.selected==this.id){c.conf.selected=-1;var b=!1}else c.conf.selected=this.id,b=!0;b?c._showPolygon(this.id,c.conf.dir_toplv):c._hidePolygon(this.id)}var b=c.itemPull[this.id].complex?"c":"-",e="enabled"!=c.itemPull[this.id].state?"d":"-";a={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};c._doOnClick(this.id.replace(c.idPrefix,""),b+e+"t",a);return!1}};"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(a,b){this._renderSublevelPolygon(a,b);for(var c=this._getMenuNodes(b),e=0;e<c.length;e++)"separator"==this.itemPull[c[e]].type?this._renderSeparator(c[e],null):this._renderSublevelItem(c[e],null);for(var e=0;e<c.length;e++)this.itemPull[c[e]].complex&&this._addSubMenuPolygon(a,this.itemPull[c[e]].id)};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(a,b){var c=document.createElement("DIV");c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":"");c.dir="ltr";c.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};c.id="polygon_"+b;c.onclick=function(a){a=a||event;a.cancelBubble=!0};c.style.display="none";document.body.insertBefore(c,document.body.firstChild);c.innerHTML='\x3cdiv style\x3d"position:relative;"\x3e\x3c/div\x3e\x3cdiv style\x3d"position: relative; overflow:hidden;"\x3e\x3c/div\x3e\x3cdiv style\x3d"position:relative;"\x3e\x3c/div\x3e';var e=document.createElement("TABLE");e.className="dhtmlxMebu_SubLevelArea_Tbl";e.cellSpacing=0;e.cellPadding=0;e.border=0;var g=document.createElement("TBODY");e.appendChild(g);c.childNodes[1].appendChild(e);c.tbl=e;c.tbd=g;this.idPull[c.id]=c;null!=this.sxDacProc&&(this.idPull["sxDac_"+b]=new this.sxDacProc(c,c.className),window.dhx4.isIE?(this.idPull["sxDac_"+b]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+b]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+b]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+b]._setCustomCycle(this.dacCycles)));return c};dhtmlXMenuObject.prototype._renderSublevelItem=function(a,b){var c=this,e=document.createElement("TR");e.className="enabled"==this.itemPull[a].state?"sub_item":"sub_item_dis";var g=document.createElement("TD");g.className="sub_item_icon";var h=this.itemPull[a].type,l=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(""!=l){if("checkbox"==h||"radio"==h){var m=document.createElement("DIV");m.id="image_"+this.itemPull[a].id;m.className="sub_icon "+l;g.appendChild(m)}"checkbox"!=h&&"radio"!=h&&(1==this.conf.icons_css?g.innerHTML="\x3ci class\x3d'"+this.conf.icons_path+l+"'\x3e\x3c/i\x3e":(m=document.createElement("IMG"),m.id="image_"+this.itemPull[a].id,m.className="sub_icon",m.src=this.conf.icons_path+l,g.appendChild(m)))}else g.innerHTML="\x26nbsp;";h=document.createElement("TD");h.className="sub_item_text";""!=this.itemPull[a].title?(l=document.createElement("DIV"),l.className="sub_item_text",l.innerHTML=this.itemPull[a].title,h.appendChild(l)):h.innerHTML="\x26nbsp;";l=document.createElement("TD");l.className="sub_item_hk";this.itemPull[a].complex?(m=document.createElement("DIV"),m.className="complex_arrow",m.id="arrow_"+this.itemPull[a].id,l.appendChild(m)):0<this.itemPull[a].hotkey.length&&!this.itemPull[a].complex?(m=document.createElement("DIV"),m.className="sub_item_hk",m.innerHTML=this.itemPull[a].hotkey,l.appendChild(m)):l.innerHTML="\x26nbsp;";e.appendChild(this.conf.rtl?l:g);e.appendChild(h);e.appendChild(this.conf.rtl?g:l);e.id=this.itemPull[a].id;e.parent=this.itemPull[a].parent;0<this.itemPull[a].tip.length&&(e.title=this.itemPull[a].tip);e.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};e.onmouseover=function(a){c.conf.hide_tm[this.id]&&window.clearTimeout(c.conf.hide_tm[this.id]);"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler);this._visible||c._redistribSubLevelSelection(this.id,this.parent);this._visible=!0};e.onmouseout=function(){"web"==c.conf.mode&&(c.conf.tm_handler&&window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c&&c._clearAndHide&&c._clearAndHide()},c.conf.tm_sec,"JavaScript"));var a=this;c.conf.hide_tm[this.id]&&window.clearTimeout(c.conf.hide_tm[this.id]);c.conf.hide_tm[this.id]=window.setTimeout(function(){a._visible=!1},50)};e.onclick=function(a){if(c.checkEvent("onClick")||!c.itemPull[this.id].complex){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;tc=c.itemPull[this.id].complex?"c":"-";td="enabled"==c.itemPull[this.id].state?"-":"d";a={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};switch(c.itemPull[this.id].type){case "checkbox":c._checkboxOnClickHandler(this.id.replace(c.idPrefix,""),tc+td+"n",a);break;case "radio":c._radioOnClickHandler(this.id.replace(c.idPrefix,""),tc+td+"n",a);break;case "item":c._doOnClick(this.id.replace(c.idPrefix,""),tc+td+"n",a)}return!1}};g=this.idPull["polygon_"+this.itemPull[a].parent];null!=b&&(b++,0>b&&(b=0),b>g.tbd.childNodes.length-1&&(b=null));null!=b&&null!=g.tbd.childNodes[b]?g.tbd.insertBefore(e,g.tbd.childNodes[b]):g.tbd.appendChild(e);this.idPull[e.id]=e};dhtmlXMenuObject.prototype._renderSeparator=function(a,b){var c=this.conf.context?"SubLevelArea":this.itemPull[a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=c||!this.conf.context){var e=this;if("TopLevel"!=c){var g=document.createElement("TR");g.className="sub_sep";var h=document.createElement("TD");h.colSpan="3";g.appendChild(h)}var l=document.createElement("DIV");l.id="separator_"+a;l.className="TopLevel"==c?"top_sep":"sub_sep";l.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1};l.onclick=function(a){a=a||event;a.cancelBubble=!0;a={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};e._doOnClick(this.id.replace("separator_"+e.idPrefix,""),"--s",a)};"TopLevel"==c?(null!=b?(b++,0>b&&(b=0),null!=this.cont.childNodes[b]?this.cont.insertBefore(l,this.cont.childNodes[b]):this.cont.appendChild(l)):(g=this.cont.childNodes[this.cont.childNodes.length-1],-1==String(g).search("TopLevel_Text")?this.cont.appendChild(l):this.cont.insertBefore(l,g)),this.idPull[l.id]=l):(c=this.idPull["polygon_"+this.itemPull[a].parent],null!=b&&(b++,0>b&&(b=0),b>c.tbd.childNodes.length-1&&(b=null)),null!=b&&null!=c.tbd.childNodes[b]?c.tbd.insertBefore(g,c.tbd.childNodes[b]):c.tbd.appendChild(g),h.appendChild(l),this.idPull[l.id]=g)}};dhtmlXMenuObject.prototype.addNewSeparator=function(a,b){b=this.idPrefix+(null!=b?b:this._genStr(24));var c=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(b,c,"","separator",!1,"","");this._renderSeparator(b,this.getItemPosition(a))};dhtmlXMenuObject.prototype._initObj=function(a,b,c){a instanceof Array||(c=a.parentId,null!=c&&0!==String(c).indexOf(this.idPrefix)&&(c=this.idPrefix+String(c)),a=a.items);for(var e=0;e<a.length;e++){if("undefined"==typeof a[e].id||null==a[e].id)a[e].id=this._genStr(24);null==a[e].text&&(a[e].text="");0!==String(a[e].id).indexOf(this.idPrefix)&&(a[e].id=this.idPrefix+String(a[e].id));var g={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""},h;for(h in g)"undefined"==typeof a[e][h]&&(a[e][h]=g[h]);""==a[e].imgen&&null!=a[e].img&&(a[e].imgen=a[e].img);""==a[e].imgdis&&null!=a[e].img_disabled&&(a[e].imgdis=a[e].img_disabled);null==a[e].title&&null!=a[e].text&&(a[e].title=a[e].text);null!=a[e].href&&(null!=a[e].href.link&&(a[e].href_link=a[e].href.link),null!=a[e].href.target&&(a[e].href_target=a[e].href.target));if(null!=a[e].userdata)for(h in a[e].userdata)this.userData[a[e].id+"_"+h]=a[e].userdata[h];"undefined"!=typeof a[e].enabled&&0==window.dhx4.s2b(a[e].enabled)?a[e].state="disabled":"undefined"!=typeof a[e].disabled&&1==window.dhx4.s2b(a[e].disabled)&&(a[e].state="disabled");"undefined"==typeof a[e].parent&&(a[e].parent=null!=c?c:this.idPrefix+this.topId);"checkbox"==a[e].type&&(a[e].checked=window.dhx4.s2b(a[e].checked),a[e].imgen=a[e].imgdis="chbx_"+(a[e].checked?"1":"0"));if("radio"==a[e].type){a[e].checked=window.dhx4.s2b(a[e].checked);a[e].imgen=a[e].imgdis="rdbt_"+(a[e].checked?"1":"0");if("undefined"==typeof a[e].group||null==a[e].group)a[e].group=this._genStr(24);null==this.radio[a[e].group]&&(this.radio[a[e].group]=[]);this.radio[a[e].group].push(a[e].id)}this.itemPull[a[e].id]=a[e];null!=a[e].items&&0<a[e].items.length?(this.itemPull[a[e].id].complex=!0,this._initObj(a[e].items,!0,a[e].id)):this.conf.dload&&1==a[e].complex&&(this.itemPull[a[e].id].loaded="no");this.itemPull[a[e].id].items=null}if(!0!==b)if(1==this.conf.dload)if(null==c)this._initTopLevelMenu();else{this._addSubMenuPolygon(c,c);if(this.conf.selected==c){var l=(b=this.itemPull[c].parent==this.idPrefix+this.topId)&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv;a=!1;if(b&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&(b=this.idPull[c],1==b._mouseOver&&(e=this.conf.top_tmtime-((new Date).getTime()-b._dynLoadTM),1<e))){var m=c,n=this;b._menuOpenTM=window.setTimeout(function(){n._showPolygon(m,l);n=m=null},e);a=!0}a||this._showPolygon(c,l)}this.itemPull[c].loaded="yes";1==this.conf.dload_icon&&this._updateLoaderIcon(c,!1)}else this._init()};dhtmlXMenuObject.prototype._xmlToJson=function(a,b){var c=[];if(null==b){var e=a.getElementsByTagName(this.conf.tags.root);if(null==e||null!=e&&0==e.length)return{items:[]};e=e[0]}else e=a;null!=e.getAttribute("parentId")&&(b=this.idPrefix+e.getAttribute("parentId"));for(var g=0;g<e.childNodes.length;g++)if("undefined"!=typeof e.childNodes[g].tagName&&String(e.childNodes[g].tagName).toLowerCase()==this.conf.tags.item){var h=e.childNodes[g],l={id:this.idPrefix+(h.getAttribute("id")||this._genStr(24)),title:h.getAttribute("text")||"",imgen:h.getAttribute("img")||"",imgdis:h.getAttribute("imgdis")||"",tip:"",hotkey:"",type:h.getAttribute("type")||"item"};null!=h.getAttribute("cssNormal")&&(l.cssNormal=h.getAttribute("cssNormal"));"checkbox"==l.type&&(l.checked=h.getAttribute("checked"));"radio"==l.type&&(l.checked=h.getAttribute("checked"),l.group=h.getAttribute("group"));l.state="enabled";null!=h.getAttribute("enabled")&&0==window.dhx4.s2b(h.getAttribute("enabled"))?l.state="disabled":null!=h.getAttribute("disabled")&&1==window.dhx4.s2b(h.getAttribute("disabled"))&&(l.state="disabled");l.parent=null!=b?b:this.idPrefix+this.topId;if(this.conf.dload)l.complex=null!=h.getAttribute("complex"),l.complex&&(l.loaded="no");else{var m=this._xmlToJson(h,l.id);l.items=m.items;l.complex=0<l.items.length}for(m=0;m<h.childNodes.length;m++)if("undefined"!=typeof h.childNodes[m].tagName){var n=String(h.childNodes[m].tagName||"").toLowerCase();if(n==this.conf.tags.userdata){var q=h.childNodes[m];null!=q.getAttribute("name")&&(this.userData[l.id+"_"+q.getAttribute("name")]=null!=q.firstChild&&null!=q.firstChild.nodeValue?q.firstChild.nodeValue:"")}n==this.conf.tags.text_ext&&(l.title=h.childNodes[m].firstChild.nodeValue);n==this.conf.tags.tooltip&&(l.tip=h.childNodes[m].firstChild.nodeValue);n==this.conf.tags.hotkey&&(l.hotkey=h.childNodes[m].firstChild.nodeValue);n==this.conf.tags.href&&"item"==l.type&&(l.href_link=h.childNodes[m].firstChild.nodeValue,null!=h.childNodes[m].getAttribute("target")&&(l.href_target=h.childNodes[m].getAttribute("target")))}c.push(l)}return h={parentId:b,items:c}};dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,b){this.conf.dload=!0;this.conf.dload_url=a;this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"\x26";this.conf.dload_icon=b;this._init()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(a,b){if(null!=this.idPull[a]&&!(0<=String(this.idPull[a].className).search("TopLevel_Item"))){var c=this.conf.rtl?0:2;this.idPull[a].childNodes[c]&&this.idPull[a].childNodes[c].childNodes[0]&&(c=this.idPull[a].childNodes[c].childNodes[0],0===String(c.className).search("complex_arrow")&&(c.className="complex_arrow"+(b?"_loading":"")))}};dhtmlXMenuObject.prototype.addNewSibling=function(a,b,c,e,g,h){b=this.idPrefix+(null!=b?b:this._genStr(24));var l=this.idPrefix+(null!=a?this.getParentId(a):this.topId);this._addItemIntoGlobalStrorage(b,l,c,"item",e,g,h);l!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(b,this.getItemPosition(a)):this._renderToplevelItem(b,this.getItemPosition(a))};dhtmlXMenuObject.prototype.addNewChild=function(a,b,c,e,g,h,l){if(null==a)if(this.conf.context)a=this.topId;else{this.addNewSibling(a,c,e,g,h,l);null!=b&&this.setItemPosition(c,b);return}c=this.idPrefix+(null!=c?c:this._genStr(24));this.setHotKey&&this.setHotKey(a,"");a=this.idPrefix+a;this._addItemIntoGlobalStrorage(c,a,e,"item",g,h,l);null==this.idPull["polygon_"+a]&&this._renderSublevelPolygon(a,a);this._renderSublevelItem(c,b-1);this._redefineComplexState(a)};dhtmlXMenuObject.prototype.removeItem=function(a,b,c){b||(a=this.idPrefix+a);var e=null;if(a!=this.idPrefix+this.topId){if(null==this.itemPull[a])return;this.idPull["polygon_"+a]&&this.idPull["polygon_"+a]._tmShow&&window.clearTimeout(this.idPull["polygon_"+a]._tmShow);if("separator"==this.itemPull[a].type){var g=this.idPull["separator_"+a];this.itemPull[a].parent==this.idPrefix+this.topId?(g.onclick=null,g.onselectstart=null,g.id=null):(g.childNodes[0].childNodes[0].onclick=null,g.childNodes[0].childNodes[0].onselectstart=null,g.childNodes[0].childNodes[0].id=null,g.childNodes[0].removeChild(g.childNodes[0].childNodes[0]),g.removeChild(g.childNodes[0]));g.parentNode.removeChild(g);this.idPull["separator_"+a]=null;this.itemPull[a]=null;delete this.idPull["separator_"+a]}else{e=this.itemPull[a].parent;g=this.idPull[a];g.onclick=null;g.oncontextmenu=null;g.onmouseover=null;g.onmouseout=null;g.onselectstart=null;for(g.id=null;0<g.childNodes.length;)g.removeChild(g.childNodes[0]);g.parentNode.removeChild(g);this.idPull[a]=null;this.itemPull[a]=null;delete this.idPull[a]}delete this.itemPull[a]}for(var h in this.itemPull)this.itemPull[h].parent==a&&this.removeItem(h,!0,!0);g=Array(a);null==e||c||null==this.idPull["polygon_"+e]||0!=this.idPull["polygon_"+e].tbd.childNodes.length||(g.push(e),this._updateItemComplexState(e,!1,!1));for(e=0;e<g.length;e++)this.idPull["polygon_"+g[e]]&&(h=this.idPull["polygon_"+g[e]],h.onclick=null,h.oncontextmenu=null,h.tbl.removeChild(h.tbd),h.tbd=null,h.childNodes[1].removeChild(h.tbl),h.tbl=null,h.id=null,h.parentNode.removeChild(h),window.dhx4.isIE6&&(h="polygon_"+g[e]+"_ie6cover",null!=this.idPull[h]&&(document.body.removeChild(this.idPull[h]),delete this.idPull[h])),null!=this.idPull["arrowup_"+a]&&this._removeArrow&&this._removeArrow("arrowup_"+a),null!=this.idPull["arrowdown_"+a]&&this._removeArrow&&this._removeArrow("arrowdown_"+a),this.idPull["polygon_"+g[e]]=null,delete this.idPull["polygon_"+g[e]]);"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(a,b,c,e,g,h,l){a={id:a,title:c,imgen:null!=h?h:"",imgdis:null!=l?l:"",type:e,state:1==g?"disabled":"enabled",parent:b,complex:!1,hotkey:"",tip:""};this.itemPull[a.id]=a};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0;1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1);null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)};dhtmlXMenuObject.prototype.addContextZone=function(a){if(a==document.body){a="document.body."+this.idPrefix;var b=document.body}else b="string"==typeof a?document.getElementById(a):a;var c=!1,e;for(e in this.conf.ctx_zones)c=c||e==a||this.conf.ctx_zones[e]==b;if(1==c)return!1;this.conf.ctx_zones[a]=b;var g=this;window.dhx4.isOpera?(this.operaContext=function(a){g._doOnContextMenuOpera(a,g)},b.addEventListener("mouseup",this.operaContext,!1)):(null==b.oncontextmenu||b._oldContextMenuHandler||(b._oldContextMenuHandler=b.oncontextmenu),b.oncontextmenu=function(a){for(var b in dhtmlXMenuObject.prototype.liveInst)b!=g.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[b].context&&dhtmlXMenuObject.prototype.liveInst[b]._hideContextMenu();a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;g._doOnContextBeforeCall(a,this);return!1})};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(a,b){for(var c in dhtmlXMenuObject.prototype.liveInst)c!=b.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[c].context&&dhtmlXMenuObject.prototype.liveInst[c]._hideContextMenu();a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;0==a.button&&1==a.ctrlKey&&b._doOnContextBeforeCall(a,this);return!1};dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a))return!1;a==document.body&&(a="document.body."+this.idPrefix);var b=this.conf.ctx_zones[a];window.dhx4.isOpera?b.removeEventListener("mouseup",this.operaContext,!1):(b.oncontextmenu=null!=b._oldContextMenuHandler?b._oldContextMenuHandler:null,b._oldContextMenuHandler=null);try{this.conf.ctx_zones[a]=null,delete this.conf.ctx_zones[a]}catch(c){}return!0};dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var b=!1;null!=this.conf.ctx_zones[a]&&this.conf.ctx_zones[a]==document.getElementById(a)&&(b=!0);return b};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display};dhtmlXMenuObject.prototype._showContextMenu=function(a,b,c){this._clearAndHide();if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;window.clearTimeout(this.conf.tm_handler);this.idPull[this.idPrefix+this.topId]=[a,b];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[c])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId)};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(a,b){this.conf.ctx_zoneid=b.id;this._clearAndHide();this._hideContextMenu();if(1==window.dhx4.isChrome||1==window.dhx4.isEdge||1==window.dhx4.isOpera||1==window.dhx4.isIE11)var c=window.dhx4.absLeft(a.target)+a.offsetX,e=window.dhx4.absTop(a.target)+a.offsetY;else if(1==window.dhx4.isIE6||1==window.dhx4.isIE7||1==window.dhx4.isIE)c=window.dhx4.absLeft(a.srcElement)+a.x||0,e=window.dhx4.absTop(a.srcElement)+a.y||0;else var e=a.srcElement||a.target,c=window.dhx4.isIE||window.dhx4.isKHTML?a.offsetX:a.layerX,g=window.dhx4.isIE||window.dhx4.isKHTML?a.offsetY:a.layerY,c=window.dhx4.absLeft(e)+c,e=window.dhx4.absTop(e)+g;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[b.id,a])&&this.conf.ctx_autoshow&&(this._showContextMenu(c,e,b.id),this.callEvent("onAfterContextMenu",[b.id,a])):this.conf.ctx_autoshow&&(this._showContextMenu(c,e,b.id),this.callEvent("onAfterContextMenu",[b.id]))};dhtmlXMenuObject.prototype.showContextMenu=function(a,b){this._showContextMenu(a,b,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.conf.ctx_autoshow=1==a?!0:!1};dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.conf.ctx_autohide=1==a?!0:!1};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.conf.ctx_hideall=1==a?!0:!1};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall};dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var a in this.itemPull)if(this.itemPull[a].parent==this.idPrefix+this.topId&&null!=this.idPull[a]){var b=!1,c=!1;this.idPull[a].parentNode.firstChild==this.idPull[a]&&(b=!0);this.idPull[a].parentNode.lastChild==this.idPull[a]&&(c=!0);for(var e in this.itemPull)"separator"==this.itemPull[e].type&&this.itemPull[e].parent==this.idPrefix+this.topId&&(this.idPull[a].nextSibling==this.idPull["separator_"+e]&&(c=!0),this.idPull[a].previousSibling==this.idPull["separator_"+e]&&(b=!0));this.idPull[a].style.borderLeftWidth=b?"1px":"0px";this.idPull[a].style.borderTopLeftRadius=this.idPull[a].style.borderBottomLeftRadius=b?"3px":"0px";this.idPull[a].style.borderTopRightRadius=this.idPull[a].style.borderBottomRightRadius=c?"3px":"0px";this.idPull[a]._bl=b;this.idPull[a]._br=c}};dhtmlXMenuObject.prototype._improveTerraceButton=function(a,b){b?(this.idPull[a].style.borderBottomLeftRadius=this.idPull[a]._bl?"3px":"0px",this.idPull[a].style.borderBottomRightRadius=this.idPull[a]._br?"3px":"0px"):(this.idPull[a].style.borderBottomLeftRadius="0px",this.idPull[a].style.borderBottomRightRadius="0px")};"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_menu=function(a,b,c,e,g){"undefined"!=typeof g?a=g:(a=document.createElement("DIV"),a.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV")));this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]);this.conf.ofs_nodes.t.menu=!0;this._updateIdx();return a},dhtmlXCellObject.prototype.attachMenu=function(a){if(!this.dataNodes.menu)return this.callEvent("_onBeforeContentAttach",["menu"]),"undefined"==typeof a&&(a={}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(a),this._adjustCont(this._idd),a.parent=null,this.callEvent("_onContentAttach",[]),this.dataNodes.menu},dhtmlXCellObject.prototype.detachMenu=function(){null!=this.dataNodes.menu&&("function"==typeof this.dataNodes.menu.unload&&this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu});dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a))};dhtmlXMenuObject.prototype.isItemEnabled=function(a){return null!=this.itemPull[this.idPrefix+a]?"enabled"==this.itemPull[this.idPrefix+a].state:!1};dhtmlXMenuObject.prototype._changeItemState=function(a,b,c){var e=this.idPrefix+a;null!=this.itemPull[e]&&null!=this.idPull[e]&&this.itemPull[e].state!=b&&(this.itemPull[e].state=b,this.idPull[e].className=this.itemPull[e].parent!=this.idPrefix+this.topId||this.conf.context?"sub_item"+("enabled"==this.itemPull[e].state?"":"_dis"):"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[e].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+a,this.itemPull[this.idPrefix+a].complex,!1),this._updateItemImage(a,c),this.idPrefix+this.conf.last_click==e&&"TopLevel"!=c&&this._redistribSubLevelSelection(e,this.itemPull[e].parent));return!1};dhtmlXMenuObject.prototype.getItemText=function(a){return null!=this.itemPull[this.idPrefix+a]?this.itemPull[this.idPrefix+a].title:""};dhtmlXMenuObject.prototype.setItemText=function(a,b){a=this.idPrefix+a;if(null!=this.itemPull[a]&&null!=this.idPull[a])if(this._clearAndHide(),this.itemPull[a].title=b,this.itemPull[a].parent!=this.idPrefix+this.topId||this.conf.context){c=null;for(e=0;e<this.idPull[a].childNodes[1].childNodes.length;e++)"sub_item_text"==String(this.idPull[a].childNodes[1].childNodes[e].className||"")&&(c=this.idPull[a].childNodes[1].childNodes[e]);""==String(this.itemPull[a].title).length||null==this.itemPull[a].title?c&&(c.parentNode.removeChild(c),this.idPull[a].childNodes[1].innerHTML="\x26nbsp;"):(c||(c=document.createElement("DIV"),c.className="sub_item_text",this.idPull[a].childNodes[1].innerHTML="",this.idPull[a].childNodes[1].appendChild(c)),c.innerHTML=this.itemPull[a].title)}else{for(var c=null,e=0;e<this.idPull[a].childNodes.length;e++)try{"top_level_text"==this.idPull[a].childNodes[e].className&&(c=this.idPull[a].childNodes[e])}catch(g){}""==String(this.itemPull[a].title).length||null==this.itemPull[a].title?null!=c&&c.parentNode.removeChild(c):(c||(c=document.createElement("DIV"),c.className="top_level_text",this.conf.rtl&&0<this.idPull[a].childNodes.length?this.idPull[a].insertBefore(c,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(c)),c.innerHTML=this.itemPull[a].title)}};dhtmlXMenuObject.prototype.loadFromHTML=function(a,b,c){var e=this.conf.tags.item;this.conf.tags.item="div";a="string"==typeof a?document.getElementById(a):a;var g=this._xmlToJson(a,this.idPrefix+this.topId);this._initObj(g);this.conf.tags.item=e;b&&a.parentNode.removeChild(a);objOd=null;if(null!=onload)if("function"==typeof c)c();else if("function"==typeof window[c])window[c]()};dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,!1)};dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(a){var b=null;null!=this.idPull[this.idPrefix+a]&&(b="none"==this.idPull[this.idPrefix+a].style.display);return b};dhtmlXMenuObject.prototype._changeItemVisible=function(a,b){var c=this.idPrefix+a;null!=this.itemPull[c]&&("separator"==this.itemPull[c].type&&(c="separator_"+c),null!=this.idPull[c]&&(this.idPull[c].style.display=b?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+a].parent)))};dhtmlXMenuObject.prototype.setUserData=function(a,b,c){this.userData[this.idPrefix+a+"_"+b]=c};dhtmlXMenuObject.prototype.getUserData=function(a,b){return null!=this.userData[this.idPrefix+a+"_"+b]?this.userData[this.idPrefix+a+"_"+b]:null};dhtmlXMenuObject.prototype.setOpenMode=function(a){this.conf.mode="win"==a?"win":"web"};dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.conf.tm_sec=isNaN(a)?400:a};dhtmlXMenuObject.prototype.getItemImage=function(a){var b=[null,null];a=this.idPrefix+a;"item"==this.itemPull[a].type&&(b[0]=this.itemPull[a].imgen,b[1]=this.itemPull[a].imgdis);return b};dhtmlXMenuObject.prototype.setItemImage=function(a,b,c){"item"==this.itemPull[this.idPrefix+a].type&&(this.itemPull[this.idPrefix+a].imgen=b,this.itemPull[this.idPrefix+a].imgdis=c,this._updateItemImage(a,this._getItemLevelType(a)))};dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","")};dhtmlXMenuObject.prototype.setVisibleArea=function(a,b,c,e){this.conf.v_enabled=!0;this.conf.v.x1=a;this.conf.v.x2=b;this.conf.v.y1=c;this.conf.v.y2=e};dhtmlXMenuObject.prototype.setTooltip=function(a,b){a=this.idPrefix+a;null!=this.itemPull[a]&&null!=this.idPull[a]&&(this.idPull[a].title=0<b.length?b:null,this.itemPull[a].tip=b)};dhtmlXMenuObject.prototype.getTooltip=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].tip};dhtmlXMenuObject.prototype.setTopText=function(a){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=a)};dhtmlXMenuObject.prototype.setAlign=function(a){this.conf.align==a||"left"!=a&&"right"!=a||(this.conf.align=a,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left")))};dhtmlXMenuObject.prototype.setHref=function(a,b,c){null!=this.itemPull[this.idPrefix+a]&&(this.itemPull[this.idPrefix+a].href_link=b,null!=c&&(this.itemPull[this.idPrefix+a].href_target=c))};dhtmlXMenuObject.prototype.clearHref=function(a){null!=this.itemPull[this.idPrefix+a]&&(delete this.itemPull[this.idPrefix+a].href_link,delete this.itemPull[this.idPrefix+a].href_target)};dhtmlXMenuObject.prototype.getCircuit=function(a){for(var b=Array(a);this.getParentId(a)!=this.topId;)a=this.getParentId(a),b[b.length]=a;return b.reverse()};dhtmlXMenuObject.prototype._getCheckboxState=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].checked};dhtmlXMenuObject.prototype._setCheckboxState=function(a,b){null!=this.itemPull[this.idPrefix+a]&&(this.itemPull[this.idPrefix+a].checked=b)};dhtmlXMenuObject.prototype._updateCheckboxImage=function(a){if(null!=this.idPull[this.idPrefix+a]){this.itemPull[this.idPrefix+a].imgen="chbx_"+(this._getCheckboxState(a)?"1":"0");this.itemPull[this.idPrefix+a].imgdis=this.itemPull[this.idPrefix+a].imgen;try{this.idPull[this.idPrefix+a].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+a].imgen}catch(b){}}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(a,b,c){"d"!=b.charAt(1)&&null!=this.itemPull[this.idPrefix+a]&&(b=this._getCheckboxState(a),this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[a,b,this.conf.ctx_zoneid,c])&&this.setCheckboxState(a,!b):this.setCheckboxState(a,!b),this.checkEvent("onClick")&&this.callEvent("onClick",[a]))};dhtmlXMenuObject.prototype.setCheckboxState=function(a,b){this._setCheckboxState(a,b);this._updateCheckboxImage(a)};dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)};dhtmlXMenuObject.prototype.addCheckbox=function(a,b,c,e,g,h,l){if(!this.conf.context||b!=this.topId)if(null==this.itemPull[this.idPrefix+b]||"child"==a&&"item"!=this.itemPull[this.idPrefix+b].type)return;var m="chbx_"+(h?"1":"0");"sibling"==a?(a=this.idPrefix+(null!=e?e:this._genStr(24)),e=this.idPrefix+this.getParentId(b),this._addItemIntoGlobalStrorage(a,e,g,"checkbox",l,m,m),this.itemPull[a].checked=h,this._renderSublevelItem(a,this.getItemPosition(b))):(a=this.idPrefix+(null!=e?e:this._genStr(24)),e=this.idPrefix+b,this._addItemIntoGlobalStrorage(a,e,g,"checkbox",l,m,m),this.itemPull[a].checked=h,null==this.idPull["polygon_"+e]&&this._renderSublevelPolygon(e,e),this._renderSublevelItem(a,c-1),this._redefineComplexState(e))};dhtmlXMenuObject.prototype.setHotKey=function(a,b){a=this.idPrefix+a;if(null!=this.itemPull[a]&&null!=this.idPull[a]&&(this.itemPull[a].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[a].complex){var c=this.itemPull[a].type;if("item"==c||"checkbox"==c||"radio"==c){c=null;try{"sub_item_hk"==this.idPull[a].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(c=this.idPull[a].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(g){}if(0==b.length)this.itemPull[a].hotkey_backup=this.itemPull[a].hotkey,this.itemPull[a].hotkey="",null!=c&&c.parentNode.removeChild(c);else{this.itemPull[a].hotkey=b;this.itemPull[a].hotkey_backup=null;if(null==c){c=document.createElement("DIV");c.className="sub_item_hk";for(var e=this.idPull[a].childNodes[this.conf.rtl?0:2];0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(c)}c.innerHTML=b}}}};dhtmlXMenuObject.prototype.getHotKey=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].hotkey};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){for(var b=this._getSubItemToDeselectByPolygon(a),c=0;c<this.conf.opened_poly.length;c++)this.conf.opened_poly[c]!=a&&this._hidePolygon(this.conf.opened_poly[c]);for(c=0;c<b.length;c++)null!=this.idPull[b[c]]&&"enabled"==this.itemPull[b[c]].state&&(this.idPull[b[c]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")};dhtmlXMenuObject.prototype._checkArrowsState=function(a){var b=this.idPull["polygon_"+a].childNodes[1],c=this.idPull["arrowup_"+a];a=this.idPull["arrowdown_"+a];c.className=0==b.scrollTop?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(c.over?"_Over":"");a.className=b.scrollTop+b.offsetHeight<b.scrollHeight?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(a.over?"_Over":""):"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled"};dhtmlXMenuObject.prototype._addUpArrow=function(a){var b=this,c=document.createElement("DIV");c.pId=this.idPrefix+a;c.id="arrowup_"+this.idPrefix+a;c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp";c.over=!1;c.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};c.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};c.onmouseover=function(){"web"==b.conf.mode&&window.clearTimeout(b.conf.tm_handler);b._clearAllSelectedSubItemsInPolygon(this.pId);this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,b._canScrollUp=!0,b._doScrollUp(this.pId,!0))};c.onmouseout=function(){"web"==b.conf.mode&&(window.clearTimeout(b.conf.tm_handler),b.conf.tm_handler=window.setTimeout(function(){b._clearAndHide()},b.conf.tm_sec,"JavaScript"));this.over=!1;b._canScrollUp=!1;this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(b.conf.of_utm))};c.onclick=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};a=this.idPull["polygon_"+this.idPrefix+a];a.childNodes[0].appendChild(c);this.idPull[c.id]=c;a=c=null};dhtmlXMenuObject.prototype._addDownArrow=function(a){var b=this,c=document.createElement("DIV");c.pId=this.idPrefix+a;c.id="arrowdown_"+this.idPrefix+a;c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown";c.over=!1;c.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};c.oncontextmenu=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};c.onmouseover=function(){"web"==b.conf.mode&&window.clearTimeout(b.conf.tm_handler);b._clearAllSelectedSubItemsInPolygon(this.pId);this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,b._canScrollDown=!0,b._doScrollDown(this.pId,!0))};c.onmouseout=function(){"web"==b.conf.mode&&(window.clearTimeout(b.conf.tm_handler),b.conf.tm_handler=window.setTimeout(function(){b._clearAndHide()},b.conf.tm_sec,"JavaScript"));this.over=!1;b._canScrollDown=!1;this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(b.conf.of_dtm))};c.onclick=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;a.cancelBubble=!0;return!1};a=this.idPull["polygon_"+this.idPrefix+a];a.childNodes[2].appendChild(c);this.idPull[c.id]=c;a=c=null};dhtmlXMenuObject.prototype._removeUpArrow=function(a){this._removeArrow("arrowup_"+this.idPrefix+a)};dhtmlXMenuObject.prototype._removeDownArrow=function(a){this._removeArrow("arrowdown_"+this.idPrefix+a)};dhtmlXMenuObject.prototype._removeArrow=function(a){var b=this.idPull[a];b.onselectstart=null;b.oncontextmenu=null;b.onmouseover=null;b.onmouseout=null;b.onclick=null;b.parentNode&&b.parentNode.removeChild(b);this.idPull[a]=null;try{delete this.idPull[a]}catch(c){}};dhtmlXMenuObject.prototype._isArrowExists=function(a){return null!=this.idPull["arrowup_"+a]&&null!=this.idPull["arrowdown_"+a]?!0:!1};dhtmlXMenuObject.prototype._doScrollUp=function(a,b){var c=this.idPull["polygon_"+a].childNodes[1];if(this._canScrollUp&&0<c.scrollTop){var e=!1,g=c.scrollTop-this.conf.of_ustep;0>g&&(e=!0,g=0);c.scrollTop=g;if(e)b=!0;else{var h=this;this.conf.of_utm=window.setTimeout(function(){h._doScrollUp(a,!1);h=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(a);b&&this._checkArrowsState(a)};dhtmlXMenuObject.prototype._doScrollDown=function(a,b){var c=this.idPull["polygon_"+a].childNodes[1];if(this._canScrollDown&&c.scrollTop+c.offsetHeight<=c.scrollHeight){var e=!1,g=c.scrollTop+this.conf.of_dstep;g+c.offsetHeight>=c.scrollHeight&&(e=!0,g=c.scrollHeight-c.offsetHeight);c.scrollTop=g;if(e)b=!0;else{var h=this;this.conf.of_dtm=window.setTimeout(function(){h._doScrollDown(a,!1);h=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(a);b&&this._checkArrowsState(a)};dhtmlXMenuObject.prototype._countPolygonItems=function(a){var b=0,c;for(c in this.itemPull){var e=this.itemPull[c].type;this.itemPull[c].parent!=this.idPrefix+a||"item"!=e&&"radio"!=e&&"checkbox"!=e||b++}return b};dhtmlXMenuObject.prototype.setOverflowHeight=function(a){if("auto"===a)this.conf.overflow_limit=0,this.conf.auto_overflow=!0;else if(!(0==this.conf.overflow_limit&&0>=a))if(this._clearAndHide(),0<=this.conf.overflow_limit&&0<a)this.conf.overflow_limit=a;else if(0<this.conf.overflow_limit&&0>=a){for(var b in this.itemPull)this._isArrowExists(b)&&(a=String(b).replace(this.idPrefix,""),this._removeUpArrow(a),this._removeDownArrow(a),this.idPull["polygon_"+b].childNodes[1].style.height="");this.conf.overflow_limit=0}};dhtmlXMenuObject.prototype._getRadioImgObj=function(a){try{var b=this.idPull[this.idPrefix+a].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(c){b=null}return b};dhtmlXMenuObject.prototype._setRadioState=function(a,b){var c=this._getRadioImgObj(a);if(null!=c){var e=this.itemPull[this.idPrefix+a];e.checked=b;e.imgen="rdbt_"+(e.checked?"1":"0");e.imgdis=e.imgen;c.className="sub_icon "+e.imgen}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(a,b,c){"d"!=b.charAt(1)&&null!=this.itemPull[this.idPrefix+a].group&&(b=this.itemPull[this.idPrefix+a].group,this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[b,this.getRadioChecked(b),a,this.conf.ctx_zoneid,c])&&this.setRadioChecked(b,a):this.setRadioChecked(b,a),this.checkEvent("onClick")&&this.callEvent("onClick",[a]))};dhtmlXMenuObject.prototype.getRadioChecked=function(a){for(var b=null,c=0;c<this.radio[a].length;c++){var e=this.radio[a][c].replace(this.idPrefix,""),g=this._getRadioImgObj(e);null!=g&&null!=g.className.match(/rdbt_1$/gi)&&(b=e)}return b};dhtmlXMenuObject.prototype.setRadioChecked=function(a,b){if(null!=this.radio[a])for(var c=0;c<this.radio[a].length;c++){var e=this.radio[a][c].replace(this.idPrefix,"");this._setRadioState(e,e==b)}};dhtmlXMenuObject.prototype.addRadioButton=function(a,b,c,e,g,h,l,m){if(!this.conf.context||b!=this.topId)if(null==this.itemPull[this.idPrefix+b]||"child"==a&&"item"!=this.itemPull[this.idPrefix+b].type)return;e=this.idPrefix+(null!=e?e:this._genStr(24));var n="rdbt_"+(l?"1":"0");"sibling"==a?(a=this.idPrefix+this.getParentId(b),this._addItemIntoGlobalStrorage(e,a,g,"radio",m,n,n),this._renderSublevelItem(e,this.getItemPosition(b))):(a=this.idPrefix+b,this._addItemIntoGlobalStrorage(e,a,g,"radio",m,n,n),null==this.idPull["polygon_"+a]&&this._renderSublevelPolygon(a,a),this._renderSublevelItem(e,c-1),this._redefineComplexState(a));b=null!=h?h:this._genStr(24);this.itemPull[e].group=b;null==this.radio[b]&&(this.radio[b]=[]);this.radio[b][this.radio[b].length]=e;1==l&&this.setRadioChecked(b,String(e).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype.serialize=function(){return"\x3cmenu\x3e"+this._readLevel(this.idPrefix+this.topId)+"\x3c/menu\x3e"};dhtmlXMenuObject.prototype._readLevel=function(a){var b="",c;for(c in this.itemPull)if(this.itemPull[c].parent==a){var e="",g="",h="",l=String(this.itemPull[c].id).replace(this.idPrefix,""),m="",n=""!=this.itemPull[c].title?' text\x3d"'+this.itemPull[c].title+'"':"",q="";"item"==this.itemPull[c].type&&(""!=this.itemPull[c].imgen&&(e=' img\x3d"'+this.itemPull[c].imgen+'"'),""!=this.itemPull[c].imgdis&&(g=' imgdis\x3d"'+this.itemPull[c].imgdis+'"'),""!=this.itemPull[c].hotkey&&(h="\x3chotkey\x3e"+this.itemPull[c].hotkey+"\x3c/hotkey\x3e"));"separator"==this.itemPull[c].type?m=' type\x3d"separator"':"disabled"==this.itemPull[c].state&&(q=' enabled\x3d"false"');"checkbox"==this.itemPull[c].type&&(m=' type\x3d"checkbox"'+(this.itemPull[c].checked?' checked\x3d"true"':""));"radio"==this.itemPull[c].type&&(m=' type\x3d"radio" group\x3d"'+this.itemPull[c].group+'" '+(this.itemPull[c].checked?' checked\x3d"true"':""));b+="\x3citem id\x3d'"+l+"'"+n+m+e+g+q+"\x3e";b+=h;this.itemPull[c].complex&&(b+=this._readLevel(c));b+="\x3c/item\x3e"}return b};dhtmlXMenuObject.prototype.enableEffect=function(a,b,c){this._menuEffect="opacity"==a||"slide"==a||"slide+"==a?a:!1;this._pOpStyleIE=0<=navigator.userAgent.search(/MSIE\s[678]\.0/gi);for(var e in this.idPull)0===e.search(/polygon/)&&(this._pOpacityApply(e,this._pOpStyleIE?100:1),this.idPull[e].style.height="");this._pOpMax=("undefined"==typeof b?100:b)/(this._pOpStyleIE?1:100);this._pOpStyleName=this._pOpStyleIE?"filter":"opacity";this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d#)":"#";this._pSlSteps=this._pOpStyleIE?10:20;this._pSlTMTimeMax=c||50};dhtmlXMenuObject.prototype._showPolygonEffect=function(a){this._pShowHide(a,!0)};dhtmlXMenuObject.prototype._hidePolygonEffect=function(a){this._pShowHide(a,!1)};dhtmlXMenuObject.prototype._pOpacityApply=function(a,b){this.idPull[a].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",b||this.idPull[a]._op)};dhtmlXMenuObject.prototype._pShowHide=function(a,b){if(this.idPull){if(null!=this.idPull[a]._tmShow){if(0<this.idPull[a]._step_h&&1==b||0>this.idPull[a]._step_h&&0==b)return;window.clearTimeout(this.idPull[a]._tmShow);this.idPull[a]._tmShow=null;this.idPull[a]._max_h=null}if(0!=b||"hidden"!=this.idPull[a].style.visibility&&"none"!=this.idPull[a].style.display){1==b&&"none"==this.idPull[a].style.display&&(this.idPull[a].style.visibility="hidden",this.idPull[a].style.display="");if(null==this.idPull[a]._max_h){this.idPull[a]._max_h=parseInt(this.idPull[a].offsetHeight);this.idPull[a]._h=1==b?0:this.idPull[a]._max_h;this.idPull[a]._step_h=Math.round(this.idPull[a]._max_h/this._pSlSteps)*(1==b?1:-1);if(0==this.idPull[a]._step_h)return;this.idPull[a]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps);"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[a].op_tm=this.idPull[a]._step_tm,this.idPull[a].op_step=this._pOpMax/this._pSlSteps*(1==b?1:-1),this._pOpStyleIE&&(this.idPull[a].op_step=Math.round(this.idPull[a].op_step)),this.idPull[a]._op=1==b?0:this._pOpMax):this.idPull[a]._op=this._pOpStyleIE?100:1;this._pOpacityApply(a);0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height="0px");this.idPull[a].style.visibility="visible"}this._pEffectSet(a,this.idPull[a]._h+this.idPull[a]._step_h)}}};dhtmlXMenuObject.prototype._pEffectSet=function(a,b){if(this.idPull){this.idPull[a]._tmShow&&window.clearTimeout(this.idPull[a]._tmShow);this.idPull[a]._h=Math.max(0,Math.min(b,this.idPull[a]._max_h));0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height=this.idPull[a]._h+"px");b+=this.idPull[a]._step_h;if("slide+"==this._menuEffect||"opacity"==this._menuEffect)this.idPull[a]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[a]._op+this.idPull[a].op_step)),this._pOpacityApply(a);if(0<this.idPull[a]._step_h&&b<=this.idPull[a]._max_h||0>this.idPull[a]._step_h&&0<=b){var c=this;this.idPull[a]._tmShow=window.setTimeout(function(){c._pEffectSet(a,b)},this.idPull[a]._step_tm)}else{0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height="");0>this.idPull[a]._step_h&&(this.idPull[a].style.visibility="hidden");if("slide+"==this._menuEffect||"opacity"==this._menuEffect)this.idPull[a]._op=0>this.idPull[a]._step_h?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(a);this.idPull[a]._tmShow=null;this.idPull[a]._h=null;this.idPull[a]._max_h=null;this.idPull[a]._step_tm=null}}};function xmlPointer(a){this.d=a}xmlPointer.prototype={text:function(){return _isFF?(new XMLSerializer).serializeToString(this.d):this.d.xml},get:function(a){return this.d.getAttribute(a)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.wholeText||this.d.firstChild.data:""},each:function(a,b,c,e){var g=this.d.childNodes,h=new xmlPointer;if(g.length)for(e=e||0;e<g.length&&(g[e].tagName!=a||(h.d=g[e],-1!=b.apply(c,[h,e])));e++);},get_all:function(){for(var a={},b=this.d.attributes,c=0;c<b.length;c++)a[b[c].name]=b[c].value;return a},sub:function(a){var b=this.d.childNodes,c=new xmlPointer;if(b.length)for(var e=0;e<b.length;e++)if(b[e].tagName==a)return c.d=b[e],c},up:function(a){return new xmlPointer(this.d.parentNode)},set:function(a,b){this.d.setAttribute(a,b)},clone:function(a){return new xmlPointer(this.d)},sub_exists:function(a){var b=this.d.childNodes;if(b.length)for(var c=0;c<b.length;c++)if(b[c].tagName==a)return!0;return!1},through:function(a,b,c,e,g){var h=this.d.childNodes;if(h.length)for(var l=0;l<h.length;l++){if(h[l].tagName==a&&null!=h[l].getAttribute(b)&&""!=h[l].getAttribute(b)&&(!c||h[l].getAttribute(b)==c)){var m=new xmlPointer(h[l]);e.apply(g,[m,l])}m=this.d;this.d=h[l];this.through(a,b,c,e,g);this.d=m}}};function dhtmlXTreeObject(a,b,c,e){dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch();if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}this.parentObject="object"!=typeof a?document.getElementById(a):a;this.parentObject.style.overflow="hidden";this._itim_dg=!0;this.dlmtr=",";this.dropLower=!1;this.enableIEImageFix(!0);this.xmlstate=0;this.mytype="tree";this.smcheck=!0;this.width=b;this.height=c;this.rootId=e;this.childCalc=null;this.def_line_img_x=this.def_img_y=this.def_img_x="18px";this.def_line_img_y="24px";this._dragged=[];this._selected=[];this.style_pointer="pointer";this._aimgs=!0;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.mlitems=this.cMenu=0;this.iconURL="";this.dadmode=0;this.slowParse=!1;this.autoScroll=!0;this.hfMode=0;this.nodeCut=[];this.XMLloadingWarning=this.XMLsource=0;this._idpull={};this._pullSize=0;this.treeLinesOn=!0;this.tscheck=!1;this.timgen=!0;this.dpcpy=!1;this._ld_id=null;this._dynDeleteBranches={};this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray="iconUncheckAll.gif iconCheckAll.gif iconCheckGray.gif iconUncheckDis.gif iconCheckDis.gif iconCheckDis.gif".split(" ");this.radioArray="radio_off.gif radio_on.gif radio_on.gif radio_off.gif radio_on.gif radio_on.gif".split(" ");this.lineArray="line2.gif line3.gif line4.gif blank.gif blank.gif line1.gif".split(" ");this.minusArray=["minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"];this.plusArray=["plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"];this.imageArray=["leaf.gif","folderOpen.gif","folderClosed.gif"];this.cutImg=[0,0,0];this.cutImage="but_cut.gif";dhx4._eventable(this);this.dragger=new dhtmlDragAndDropObject;this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this);_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var g=this;this.allTree.onselectstart=new Function("return false;");_isMacOS&&(this.allTree.oncontextmenu=function(a){return g._doContClick(a||window.event,!0)});this.allTree.onmousedown=function(a){return g._doContClick(a||window.event)};this.XMLLoader=this._parseXMLTree;_isIE&&this.preventIECashing(!0);this.selectionBar=document.createElement("DIV");this.selectionBar.className="selectionBar";this.selectionBar.innerHTML="\x26nbsp;";this.selectionBar.style.display="none";this.allTree.appendChild(this.selectionBar);window.addEventListener&&window.addEventListener("unload",function(){try{g.destructor()}catch(h){}},!1);window.attachEvent&&window.attachEvent("onunload",function(){try{g.destructor()}catch(h){}});this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||"material");dhtmlx.image_path&&(a=dhtmlx.image_path,b=this.parentObject.className.match(/dhxtree_dhx_([a-z_]*)/i),null!=b&&null!=b[1]&&(a+="dhxtree_"+b[1]+"/"),this.setImagePath(a));return this}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a};dhtmlXTreeObject.prototype._doContClick=function(a,b){if(!b&&2!=a.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var c=_isIE?a.srcElement:a.target;c&&"BODY"!=c.tagName&&!c.parentObject;)c=c.parentNode;if(!c||!c.parentObject)return!0;var e=c.parentObject;this.callEvent("onRightClick",[e.id,a])||((a.srcElement||a.target).oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1});if(this._acMenu=e.cMenu||this.cMenu){if(!this.callEvent("onBeforeContextMenu",[e.id]))return!0;_isMacOS||((a.srcElement||a.target).oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1});if(this._acMenu.showContextMenu){var c=window.document.documentElement,g=window.document.body,g=[c.scrollLeft||g.scrollLeft,c.scrollTop||g.scrollTop];_isIE?(c=a.clientX+g[0],g=a.clientY+g[1]):(c=a.pageX,g=a.pageY);this._acMenu.showContextMenu(c-1,g-1);this.contextID=e.id;a.cancelBubble=!0;this._acMenu._skip_hide=!0}else c.contextMenuId=e.id,c.contextMenu=this._acMenu,c.a=this._acMenu._contextStart,c.a(c,a),c.a=null;return!1}return!0};dhtmlXTreeObject.prototype.enableIEImageFix=function(a){a?(this._getImg=function(){var a=document.createElement("DIV");a.innerHTML="\x26nbsp;";a.className="dhx_bg_img_fix";return a},this._setSrc=function(a,c){a.style.backgroundImage="url("+c+")"},this._getSrc=function(a){a=a.style.backgroundImage;return a.substr(4,a.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(a){return document.createElement(a==this.rootId?"div":"img")},this._setSrc=function(a,c){a.src=c},this._getSrc=function(a){return a.src})};dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var b=this._idpull[a];b&&(b.parentObject=null,b.treeNod=null,b.childNodes=null,b.span=null,b.tr.nodem=null,b.tr=null,b.htmlNode.objBelong=null,b.htmlNode=null,this._idpull[a]=null)}this.parentObject.innerHTML="";this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(a in this)this[a]=null};function cObject(){return this}cObject.prototype={};cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a};function dhtmlXTreeItemObject(a,b,c,e,g,h){this.scolor=this.acolor=this.htmlNode="";this.span=this.dragMove=this.dragSpan=this.tempDOMU=this.tempDOMM=this.childsCount=this.tr=0;this.closeble=1;this.childNodes=[];this.userData=new cObject;this.checkstate=0;this.treeNod=e;this.label=b;this.parentObject=c;this.actionHandler=g;this.images=[e.imageArray[0],e.imageArray[1],e.imageArray[2]];this.id=e._globalIdStorageAdd(a,this);this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,h):this.treeNod._createItem(0,this,h);this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(a,b){if(this._globalIdStorageFind(a,1,1))return a=a+"_"+(new Date).valueOf(),this._globalIdStorageAdd(a,b);this._idpull[a]=b;this._pullSize++;return a};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){this._idpull[a]&&(this._unselectItem(this._idpull[a]),this._idpull[a]=null,this._pullSize--);this._locker&&this._locker[a]&&(this._locker[a]=!1)};dhtmlXTreeObject.prototype._globalIdStorageFind=function(a,b,c,e){var g=this._idpull[a];if(g){g.unParsed&&!c&&this.reParse(g,0);this._srnd&&!g.htmlNode&&this._buildSRND(g,c);if(e&&this._edsbpsA)for(b=0;b<this._edsbpsA.length;b++)if(this._edsbpsA[b][2]==a)return dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",a]),null;return g}return this.slowParse&&0!=a&&!b?this.preParse(a):null};dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var b=[];a.each("item",function(a){b.push(a.get("id"))},this);return b.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=dhx4.s2b(a)};dhtmlXTreeObject.prototype.findXML=function(a,b,c){};dhtmlXTreeObject.prototype._getAllCheckedXML=function(a,b,c){var e=[];2==c&&a.through("item","checked",-1,function(a){e.push(a.get("id"))},this);1==c&&a.through("item","id",null,function(a){a.get("checked")&&-1!=a.get("checked")&&e.push(a.get("id"))},this);0==c&&a.through("item","id",null,function(a){a.get("checked")&&0!=a.get("checked")||e.push(a.get("id"))},this);return e.length?b+(b?this.dlmtr:"")+e.join(this.dlmtr):b?b:""};dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,b){var c=a?"1":"";b.through("item","id",null,function(a){a.get("disabled")&&0!=a.get("disabled")||a.set("checked",c)},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(a,b){var c=[],e=function(a){a.sub_exists("item")?a.each("item",e,this):c.push(a.get("id"))};e(a);return c.join(",")};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(a,b){var c=[],e=function(a){a.sub_exists("item")&&(c.push(a.get("id")),a.each("item",e,this))};e(a);return c.join(",")};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(a,b,c){b=[];c.through("item","id",null,function(a){b.push(a.get("id"))},this);return b.join(",")};dhtmlXTreeObject.prototype.reParse=function(a){this.parsCount||this.callEvent("onXLS",[this,a.id]);this.xmlstate=1;var b=a.unParsed;a.unParsed=0;this.XMLloadingWarning=1;var c=this.parsingOn,e=this.waitUpdateXML,g=this.parsedArray;this.parsedArray=[];this.waitUpdateXML=!1;this.parsingOn=a.id;this.parsedArray=[];this.setCheckList="";this._parse(b,a.id,2);for(var h=this.setCheckList.split(this.dlmtr),l=0;l<this.parsedArray.length;l++)a.htmlNode.childNodes[0].appendChild(this.parsedArray[l]);b.get("order")&&"none"!=b.get("order")&&this._reorderBranch(a,b.get("order"),!0);this.oldsmcheck=this.smcheck;this.smcheck=!1;for(b=0;b<h.length;b++)h[b]&&this.setCheck(h[b],1);this.smcheck=this.oldsmcheck;this.parsingOn=c;this.waitUpdateXML=e;this.parsedArray=g;this.XMLloadingWarning=0;this._redrawFrom(this,a);this._srnd&&!a._sready&&this.prepareSR(a.id);this.xmlstate=0;return!0};dhtmlXTreeObject.prototype.preParse=function(a){if(!a||!this._p)return null;var b=!1;this._p.clone().through("item","id",a,function(a){this._globalIdStorageFind(a.up().get("id"));return b=!0},this);if(b){var c=this._globalIdStorageFind(a,!0,!1);c||dhx4.callEvent("ongetItemError",["The item "+a+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",a])}return c};dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case "none":return a;case "utf8":return encodeURIComponent(a);default:return escape(a)}};dhtmlXTreeObject.prototype._drawNewTr=function(a,b){var c=document.createElement("tr"),e=document.createElement("td"),g=document.createElement("td");e.appendChild(document.createTextNode(" "));g.colSpan=3;g.appendChild(a);c.appendChild(e);c.appendChild(g);return c};dhtmlXTreeObject.prototype.parse=function(a,b,c){"string"==typeof b&&(c=b,b=null);if("json"===c)return this._loadJSONObject(a,b);if("csv"===c)return this._loadCSVString(a,b);if("jsarray"===c)return this._loadJSArray(a,b);this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;this.XMLLoader({responseXML:dhx4.ajax.parse(a)},b)};dhtmlXTreeObject.prototype.loadXMLString=function(){window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this.parse.apply(this,arguments)};dhtmlXTreeObject.prototype.load=function(a,b,c){"string"==typeof b&&(c=b,b=null);c=c||this._datamode;if("json"===c)return this._loadJSON(a,b);if("csv"===c)return this._loadCSV(a,b);if("jsarray"===c)return this._loadJSArrayFile(xmlString,b);this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;this.XMLLoader=this._parseXMLTree;var e=this;dhx4.ajax.get(a,function(a){e.XMLLoader(a.xmlDoc,b);e=null})};dhtmlXTreeObject.prototype.loadXML=function(){window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this.load.apply(this,arguments)};dhtmlXTreeObject.prototype._attachChildNode=function(a,b,c,e,g,h,l,m,n,q,r){q&&q.parentObject&&(a=q.parentObject);0==a.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(a.XMLload=1,this._loadDynXML(a.id));var v=a.childsCount,u=a.childNodes;r&&r.tr.previousSibling&&(r.tr.previousSibling.previousSibling?q=r.tr.previousSibling.nodem:m=m.replace("TOP","")+",TOP");if(q){for(r=0;r<v;r++)if(u[r]==q){for(;v!=r;v--)u[1+v]=u[v];break}r++;v=r}if(m)for(var x=m.split(","),w=0;w<x.length;w++)switch(x[w]){case "TOP":0<a.childsCount&&(q={},q.tr=a.childNodes[0].tr.previousSibling);a._has_top=!0;for(r=v;0<r;r--)u[r]=u[r-1];v=0}var A;(A=this._idpull[b])&&-1==A.span||(A=u[v]=new dhtmlXTreeItemObject(b,c,a,this,e,1),b=u[v].id,a.childsCount++);A.htmlNode||(A.label=c,A.htmlNode=this._createItem(this.checkBoxOff?1:0,A),A.htmlNode.objBelong=A);g&&(A.images[0]=g);h&&(A.images[1]=h);l&&(A.images[2]=l);c=this._drawNewTr(A.htmlNode);if(this.XMLloadingWarning||this._hAdI)A.htmlNode.parentNode.parentNode.style.display="none";q&&q.tr&&q.tr.nextSibling?a.htmlNode.childNodes[0].insertBefore(c,q.tr.nextSibling):this.parsingOn==a.id?this.parsedArray[this.parsedArray.length]=c:a.htmlNode.childNodes[0].appendChild(c);q&&!q.span&&(q=null);this.XMLsource&&(A.XMLload=n&&0!=n?0:1);A.tr=c;c.nodem=A;0==a.itemId&&(c.childNodes[0].className="hiddenRow");(a._r_logic||this._frbtr)&&this._setSrc(A.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]);if(m)for(x=m.split(","),w=0;w<x.length;w++)switch(x[w]){case "SELECT":this.selectItem(b,!1);break;case "CALL":this.selectItem(b,!0);break;case "CHILD":A.XMLload=0;break;case "CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+b:this.setCheck(b,1);break;case "HCHECKED":this._setCheck(A,"unsure");break;case "OPEN":A.openMe=1}if(!this.XMLloadingWarning&&(0>this._getOpenState(a)&&!this._hAdI&&this.openItem(a.id),q&&(this._correctPlus(q),this._correctLine(q)),this._correctPlus(a),this._correctLine(a),this._correctPlus(A),2<=a.childsCount&&(this._correctPlus(u[a.childsCount-2]),this._correctLine(u[a.childsCount-2])),2!=a.childsCount&&this._correctPlus(u[0]),this.tscheck&&this._correctCheckStates(a),this._onradh))if(1==this.xmlstate){var y=this.onXLE;this.onXLE=function(a){this._onradh(b);y&&y(a)}}else this._onradh(b);return A};dhtmlXTreeObject.prototype.enableContextMenu=function(a){a&&(this.cMenu=a)};dhtmlXTreeObject.prototype.setItemContextMenu=function(a,b){for(var c=a.toString().split(this.dlmtr),e=0;e<c.length;e++){var g=this._globalIdStorageFind(c[e]);g&&(g.cMenu=b)}};dhtmlXTreeObject.prototype.insertNewItem=function(a,b,c,e,g,h,l,m,n){a=this._globalIdStorageFind(a);if(!a)return-1;b=this._attachChildNode(a,b,c,e,g,h,l,m,n);this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1);!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(a);return b};dhtmlXTreeObject.prototype.insertNewChild=function(a,b,c,e,g,h,l,m,n){return this.insertNewItem(a,b,c,e,g,h,l,m,n)};dhtmlXTreeObject.prototype._parseXMLTree=function(a,b){var c=new xmlPointer(dhx4.ajax.xmltop("tree",a));this._parse(c);this._p=c;b&&b.call(this,a)};dhtmlXTreeObject.prototype._parseItem=function(a,b,c,e){var g;if(!this._srnd||this._idpull[g=a.get("id")]&&this._idpull[g].span){var h=a.get_all();if("object"!=typeof this.waitUpdateXML||this.waitUpdateXML[h.id]){if(null===h.text||"undefined"==typeof h.text)h.text=a.sub("itemtext"),h.text&&(h.text=h.text.content());g=[];h.select&&g.push("SELECT");h.top&&g.push("TOP");h.call&&(this.nodeAskingCall=h.id);-1==h.checked?g.push("HCHECKED"):h.checked&&g.push("CHECKED");h.open&&g.push("OPEN");this.waitUpdateXML?this._globalIdStorageFind(h.id)?e=this.updateItem(h.id,h.text,h.im0,h.im1,h.im2,h.checked,h.child):(0==this.npl?g.push("TOP"):c=b.childNodes[this.npl],e=this._attachChildNode(b,h.id,h.text,0,h.im0,h.im1,h.im2,g.join(","),h.child,0,c),h.id=e.id,c=null):e=this._attachChildNode(b,h.id,h.text,0,h.im0,h.im1,h.im2,g.join(","),h.child,e||0,c);h.tooltip&&(e.span.parentNode.parentNode.title=h.tooltip);h.style&&(e.span.style.cssText?e.span.style.cssText+=";"+h.style:e.span.setAttribute("style",e.span.getAttribute("style")+"; "+h.style));h.radio&&(e._r_logic=!0);h.nocheckbox&&(e.span.parentNode.previousSibling.previousSibling.style.display="none",e.nocheckbox=!0);h.disabled&&(null!=h.checked&&this._setCheck(e,h.checked),this.disableCheckbox(e,1));e._acc=h.child||0;this.parserExtension&&this.parserExtension._parseExtension.call(this,a,h,b?b.id:0);this.setItemColor(e,h.aCol,h.sCol);"1"==h.locked&&this.lockItem(e.id,!0,!0);(h.imwidth||h.imheight)&&this.setIconSize(h.imwidth,h.imheight,e);"0"!=h.closeable&&"1"!=h.closeable||this.setItemCloseable(e,h.closeable);b="";h.topoffset&&this.setItemTopOffset(e,h.topoffset);this.slowParse&&"object"!=typeof this.waitUpdateXML?(!e.childsCount&&a.sub_exists("item")&&(e.unParsed=a.clone()),a.each("userdata",function(a){this.setUserData(h.id,a.get("name"),a.content())},this)):a.sub_exists("item")&&(b=this._parse(a,h.id,1));""!=b&&(this.nodeAskingCall=b);a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this)}else this._parse(a,h.id,1)}else this._addItemSRND(b.id,g,a)};dhtmlXTreeObject.prototype._parse=function(a,b,c,e){if(this._srnd&&!this.parentObject.offsetHeight){var g=this;return window.setTimeout(function(){g._parse(a,b,c,e)},100)}if(a.exists()){this.skipLock=!0;if(!b){b=a.get("id");this._dynDeleteBranches[b]&&(this.deleteChildItems(b),this._dynDeleteBranches[b]--,this._dynDeleteBranches[b]||delete this._dynDeleteBranches[b]);var h=a.get("dhx_security");h&&(dhtmlx.security_key=h);a.get("radio")&&(this.htmlNode._r_logic=!0);this.parsingOn=b;this.parsedArray=[];this.nodeAskingCall=this.setCheckList=""}var l=this._globalIdStorageFind(b);if(!l)return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"]);this.parsCount=this.parsCount?this.parsCount+1:1;this.XMLloadingWarning=1;this.npl=0;a.each("item",function(e,g){l.XMLload=1;this._parseItem(e,l,0,0);if(this._edsbps&&this.npl==this._edsbpsC)return this._distributedStart(a,g+1,b,c,l.childsCount),-1;this.npl++},this,e);if(!c){a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this);l.XMLload=1;if(this.waitUpdateXML)for(this.waitUpdateXML=!1,h=l.childsCount-1;0<=h;h--)l.childNodes[h]._dmark&&this.deleteItem(l.childNodes[h].id);this._globalIdStorageFind(this.parsingOn);for(h=0;h<this.parsedArray.length;h++)l.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);this.parsedArray=[];this.lastLoadedXMLId=b;this.XMLloadingWarning=0;for(var h=this.setCheckList.split(this.dlmtr),m=0;m<h.length;m++)h[m]&&this.setCheck(h[m],1);this.XMLsource&&this.tscheck&&this.smcheck&&l.id!=this.rootId&&(0===l.checkstate?this._setSubChecked(0,l):1===l.checkstate&&this._setSubChecked(1,l));this._redrawFrom(this,null,e);a.get("order")&&"none"!=a.get("order")&&this._reorderBranch(l,a.get("order"),!0);""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);this._branchUpdate&&this._branchUpdateNext(a)}if(1==this.parsCount){this.parsingOn=null;this._srnd&&l.id!=this.rootId&&(this.prepareSR(l.id),this.XMLsource&&this.openItem(l.id));a.through("item","open",null,function(a){this.openItem(a.get("id"))},this);if(!this._edsbps||!this._edsbpsA.length){var n=this;window.setTimeout(function(){n.callEvent("onXLE",[n,b])},1);this.xmlstate=0}this.skipLock=!1}this.parsCount--;n=this;this._edsbps&&window.setTimeout(function(){n._distributedStep(b)},this._edsbpsD);if(!c&&this.onXLE)this.onXLE(this,b);return this.nodeAskingCall}};dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(a){var b=a.get("id");if(!this._idpull[b]||this._idpull[b].XMLload)this._branchUpdate++,this.smartRefreshItem(a.get("id"),a)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(a,b){if(1==a.nodeType&&"userdata"==a.tagName){var c=a.getAttribute("name");c&&a.childNodes[0]&&this.setUserData(b,c,a.childNodes[0].data)}};dhtmlXTreeObject.prototype._redrawFrom=function(a,b,c,e){if(b)g=b;else{var g=a._globalIdStorageFind(a.lastLoadedXMLId);a.lastLoadedXMLId=-1;if(!g)return 0}var h=0;for(c=c?c-1:0;c<g.childsCount;c++)if(this._branchUpdate&&1!=this._getOpenState(g)||b&&1!=e||(g.childNodes[c].htmlNode.parentNode.parentNode.style.display=""),1==g.childNodes[c].openMe&&(this._openItem(g.childNodes[c]),g.childNodes[c].openMe=0),a._redrawFrom(a,g.childNodes[c]),null!=this.childCalc){if(g.childNodes[c].unParsed||!g.childNodes[c].XMLload&&this.XMLsource)g.childNodes[c].span.innerHTML=g.childNodes[c]._acc?g.childNodes[c].label+this.htmlcA+g.childNodes[c]._acc+this.htmlcB:g.childNodes[c].label;if(g.childNodes[c].childNodes.length&&this.childCalc){1==this.childCalc&&(g.childNodes[c].span.innerHTML=g.childNodes[c].label+this.htmlcA+g.childNodes[c].childsCount+this.htmlcB);if(2==this.childCalc){var l=g.childNodes[c].childsCount-(g.childNodes[c].pureChilds||0);l&&(g.childNodes[c].span.innerHTML=g.childNodes[c].label+this.htmlcA+l+this.htmlcB);g.pureChilds?g.pureChilds++:g.pureChilds=1}3==this.childCalc&&(g.childNodes[c].span.innerHTML=g.childNodes[c].label+this.htmlcA+g.childNodes[c]._acc+this.htmlcB);4==this.childCalc&&(l=g.childNodes[c]._acc)&&(g.childNodes[c].span.innerHTML=g.childNodes[c].label+this.htmlcA+l+this.htmlcB)}else 4==this.childCalc&&h++;h+=g.childNodes[c]._acc;3==this.childCalc&&h++}g.unParsed||!g.XMLload&&this.XMLsource||(g._acc=h);a._correctLine(g);a._correctPlus(g);this.childCalc&&!b&&a._fixChildCountLabel(g)};dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");a.className="containerTableStyle";a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a};dhtmlXTreeObject.prototype._xcloseAll=function(a){if(!a.unParsed){if(this.rootId!=a.id){if(!a.htmlNode)return;for(var b=a.htmlNode.childNodes[0].childNodes,c=b.length,e=1;e<c;e++)b[e].style.display="none";this._correctPlus(a)}for(e=0;e<a.childsCount;e++)a.childNodes[e].childsCount&&this._xcloseAll(a.childNodes[e])}};dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var b=0;b<a.childsCount;b++)this._xopenAll(a.childNodes[b])};dhtmlXTreeObject.prototype._correctPlus=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,c=a.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],e=this.lineArray;if(this.XMLsource&&!a.XMLload){if(e=this.plusArray,this._setSrc(c,this.iconURL+a.images[2]),this._txtimg)return b.innerHTML="[+]"}else if(a.childsCount||a.unParsed)if(a.htmlNode.childNodes[0].childNodes[1]&&"none"!=a.htmlNode.childNodes[0].childNodes[1].style.display){if(a.wsign||(e=this.minusArray),this._setSrc(c,this.iconURL+a.images[1]),this._txtimg)return b.innerHTML="[-]"}else{if(a.wsign||(e=this.plusArray),this._setSrc(c,this.iconURL+a.images[2]),this._txtimg)return b.innerHTML="[+]"}else this._setSrc(c,this.iconURL+a.images[0]);c=2;a.treeNod.treeLinesOn?(a.parentObject&&(c=this._getCountStatus(a.id,a.parentObject)),this._setSrc(b,this.imPath+e[c])):this._setSrc(b,this.imPath+e[3])}};dhtmlXTreeObject.prototype._correctLine=function(a){if(a.htmlNode){var b=a.parentObject;if(b)if(0!=this._getLineStatus(a.id,b)&&this.treeLinesOn)for(b=1;b<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[b];b++)a.htmlNode.childNodes[0].childNodes[b].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",a.htmlNode.childNodes[0].childNodes[b].childNodes[0].style.backgroundRepeat="repeat-y";else for(b=1;b<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[b];b++)a.htmlNode.childNodes[0].childNodes[b].childNodes[0].style.backgroundImage="",a.htmlNode.childNodes[0].childNodes[b].childNodes[0].style.backgroundRepeat=""}};dhtmlXTreeObject.prototype._getCountStatus=function(a,b){return 1>=b.childsCount?b.id==this.rootId?4:0:b.childNodes[0].id==a?b.id==this.rootId?2:1:b.childNodes[b.childsCount-1].id==a?0:1};dhtmlXTreeObject.prototype._getLineStatus=function(a,b){return b.childNodes[b.childsCount-1].id==a?0:1};dhtmlXTreeObject.prototype._HideShow=function(a,b){if(!this._locker||this.skipLock||!this._locker[a.id])if(this.XMLsource&&!a.XMLload)1!=b&&(a.XMLload=1,this._loadDynXML(a.id));else{a.unParsed&&this.reParse(a);var c=a.htmlNode.childNodes[0].childNodes,e=c.length;if(1<e){"none"==c[1].style.display&&1!=b||2==b?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var g=1;g<e;g++)c[g].style.display=nodestyle}this._correctPlus(a)}};dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode)return 0;a=a.htmlNode.childNodes[0].childNodes;return 1>=a.length?0:"none"!=a[1].style.display?1:-1};dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onDblClick",[this.parentObject.id,a]))return!1;this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2);a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]));return!1};dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2);a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]))};dhtmlXTreeObject.prototype._epnFHe=function(a,b,c){b!=this.rootId&&this.callEvent("onOpenEnd",[b,a.getOpenState(b)]);a.onXLE=a._oie_onXLE.pop();if(!c&&!a._oie_onXLE.length&&a.onXLE)a.onXLE(a,b)};dhtmlXTreeObject.prototype.onRowClickDown=function(a){a=a||window.event;this.parentObject.treeNod._selectItem(this.parentObject,a)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var a=[],b=0;b<this._selected.length;b++)a[b]=this._selected[b].id;return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._selectItem=function(a,b){this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId());this._amsel&&b&&(b.ctrlKey||b.metaKey||b.shiftKey)||this._unselectItems();if(a.i_sel&&this._amsel&&b&&(b.ctrlKey||b.metaKey))this._unselectItem(a);else if(!(a.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=a.parentObject))if(this._amsel&&b&&b.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==a.parentObject){var c=this._getIndex(this._selected[this._selected.length-1]),e=this._getIndex(a);if(e<c)var g=c,c=e,e=g;for(;c<=e;c++)a.parentObject.childNodes[c].i_sel||this._markItem(a.parentObject.childNodes[c])}else this._markItem(a);this.checkEvent("onSelect")&&(e=this.getSelectedItemId(),e!=this._onSSCFold&&this.callEvent("onSelect",[e]))};dhtmlXTreeObject.prototype._markItem=function(a){a.scolor&&(a.span.style.color=a.scolor);a.span.className="selectedTreeRow";a.span.parentNode.parentNode.className="selectedTreeRowFull";a.i_sel=!0;this._selected[this._selected.length]=a};dhtmlXTreeObject.prototype.getIndexById=function(a){return(a=this._globalIdStorageFind(a))?this._getIndex(a):null};dhtmlXTreeObject.prototype._getIndex=function(a){for(var b=a.parentObject,c=0;c<b.childsCount;c++)if(b.childNodes[c]==a)return c};dhtmlXTreeObject.prototype._unselectItem=function(a){if(a&&a.i_sel)for(a.span.className="standartTreeRow",a.span.parentNode.parentNode.className="",a.acolor&&(a.span.style.color=a.acolor),a.i_sel=!1,a=0;a<this._selected.length;a++)if(!this._selected[a].i_sel){this._selected.splice(a,1);break}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var b=this._selected[a];b.span.className="standartTreeRow";b.span.parentNode.parentNode.className="";b.acolor&&(b.span.style.color=b.acolor);b.i_sel=!1}this._selected=[]};dhtmlXTreeObject.prototype.onRowSelect=function(a,b,c){a=a||window.event;var e=this.parentObject;b&&(e=b.parentObject);b=e.treeNod;var g=b.getSelectedItemId();a&&a.skipUnSel||b._selectItem(e,a);c||(e.actionHandler?e.actionHandler(e.id,g):b.callEvent("onClick",[e.id,g]))};dhtmlXTreeObject.prototype._correctCheckStates=function(a){if(this.tscheck&&a&&a.id!=this.rootId){var b=a.childNodes,c=0,e=0;if(0!=a.childsCount){for(var g=0;g<a.childsCount;g++)if(!b[g].dscheck)if(0==b[g].checkstate)c=1;else if(1==b[g].checkstate)e=1;else{e=c=1;break}c&&e?this._setCheck(a,"unsure"):c?this._setCheck(a,!1):this._setCheck(a,!0);this._correctCheckStates(a.parentObject)}}};dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){if(this.parentObject.dscheck)return!0;this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0);this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])}};dhtmlXTreeObject.prototype._createItem=function(a,b,c){var e=document.createElement("table");e.cellSpacing=0;e.cellPadding=0;e.border=0;this.hfMode&&(e.style.tableLayout="fixed");e.style.margin=0;e.style.padding=0;var g=document.createElement("tbody"),h=document.createElement("tr"),l=document.createElement("td");l.className="standartTreeImage";if(this._txtimg){var m=document.createElement("div");l.appendChild(m);m.className="dhx_tree_textSign"}else m=this._getImg(b.id),m.border="0","IMG"==m.tagName&&(m.align="absmiddle"),l.appendChild(m),m.style.padding=0,m.style.margin=0,m.style.width=this.def_line_img_x;var m=document.createElement("td"),n=this._getImg(this.cBROf?this.rootId:b.id);n.checked=0;this._setSrc(n,this.imPath+this.checkArray[0]);n.style.width="18px";n.style.height="18px";a||(m.style.display="none");m.appendChild(n);this.cBROf||"IMG"!=n.tagName||(n.align="absmiddle");n.onclick=this.onCheckBoxClick;n.treeNod=this;n.parentObject=b;m.width=window._KHTMLrv?"16px":"20px";a=document.createElement("td");a.className="standartTreeImage";n=this._getImg(this.timgen?b.id:this.rootId);n.onmousedown=this._preventNsDrag;n.ondragstart=this._preventNsDrag;n.border="0";this._aimgs&&(n.parentObject=b,"IMG"==n.tagName&&(n.align="absmiddle"),n.onclick=this.onRowSelect);c||this._setSrc(n,this.iconURL+this.imageArray[0]);a.appendChild(n);n.style.padding=0;n.style.margin=0;if(this.timgen)a.style.width=n.style.width=this.def_img_x,n.style.height=this.def_img_y;else if(n.style.width="0px",n.style.height="0px",_isOpera||window._KHTMLrv)a.style.display="none";c=document.createElement("td");c.className="dhxTextCell standartTreeRow";b.span=document.createElement("span");b.span.className="standartTreeRow";this.mlitems?(b.span.style.width=this.mlitems,b.span.style.display="block"):c.noWrap=!0;dhx4.isIE8?c.style.width="99999px":window._KHTMLrv||(c.style.width="100%");b.span.innerHTML=b.label;c.appendChild(b.span);c.parentObject=b;l.parentObject=b;c.onclick=this.onRowSelect;l.onclick=this.onRowClick;c.ondblclick=this.onRowClick2;this.ettip&&(h.title=b.label);this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(a,this),a.parentObject=b),this.dragger.addDraggableItem(c,this));b.span.style.paddingLeft="5px";b.span.style.paddingRight="5px";c.style.verticalAlign="";c.style.fontSize="10pt";c.style.cursor=this.style_pointer;h.appendChild(l);h.appendChild(m);h.appendChild(a);h.appendChild(c);g.appendChild(h);e.appendChild(g);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))h.onmousemove=this._itemMouseIn,h[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut;return e};dhtmlXTreeObject.prototype.setImagePath=function(a){this.iconURL=this.imPath=a};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a};dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var b=0,c=0;c<a.childsCount;c++)0==a.childNodes[c].childsCount&&b++;return b};dhtmlXTreeObject.prototype._getChildCounterValue=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;if(a.unParsed||!a.XMLload&&this.XMLsource)return a._acc;switch(this.childCalc){case 1:return a.childsCount;case 2:return this._getLeafCount(a);case 3:return a._acc;case 4:return a._acc}};dhtmlXTreeObject.prototype._fixChildCountLabel=function(a,b){if(null!=this.childCalc)if(a.unParsed||!a.XMLload&&this.XMLsource)a.span.innerHTML=a._acc?a.label+this.htmlcA+a._acc+this.htmlcB:a.label;else switch(this.childCalc){case 1:a.span.innerHTML=0!=a.childsCount?a.label+this.htmlcA+a.childsCount+this.htmlcB:a.label;break;case 2:var c=this._getLeafCount(a);a.span.innerHTML=0!=c?a.label+this.htmlcA+c+this.htmlcB:a.label;break;case 3:if(0!=a.childsCount){for(var e=c=0;e<a.childsCount;e++)a.childNodes[e]._acc||(a.childNodes[e]._acc=0),c+=1*a.childNodes[e]._acc;c+=1*a.childsCount;a.span.innerHTML=a.label+this.htmlcA+c+this.htmlcB;a._acc=c}else a.span.innerHTML=a.label,a._acc=0;a.parentObject&&a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject);break;case 4:if(0!=a.childsCount){for(e=c=0;e<a.childsCount;e++)a.childNodes[e]._acc||(a.childNodes[e]._acc=1),c+=1*a.childNodes[e]._acc;a.span.innerHTML=a.label+this.htmlcA+c+this.htmlcB;a._acc=c}else a.span.innerHTML=a.label,a._acc=1;a.parentObject&&a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject)}};dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case "child":this.childCalc=1;break;case "leafs":this.childCalc=2;break;case "childrec":this.childCalc=3;break;case "leafsrec":this.childCalc=4;break;case "disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(a,b){this.htmlcA=a;this.htmlcB=b};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)};dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)};dhtmlXTreeObject.prototype.openAllItems=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;this._xopenAll(a)};dhtmlXTreeObject.prototype.getOpenState=function(a){return(a=this._globalIdStorageFind(a))?this._getOpenState(a):""};dhtmlXTreeObject.prototype.closeAllItems=function(a){a===window.undefined&&(a=this.rootId);a=this._globalIdStorageFind(a);if(!a)return 0;this._xcloseAll(a);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(a,b,c){if(a=this._globalIdStorageFind(a,0,!0))"hint"==b&&(a.htmlNode.childNodes[0].childNodes[0].title=c),"undefined"==typeof a.userData["t_"+b]&&(a._userdatalist=a._userdatalist?a._userdatalist+(","+b):b),a.userData["t_"+b]=c};dhtmlXTreeObject.prototype.getUserData=function(a,b){var c=this._globalIdStorageFind(a,0,!0);if(c)return c.userData["t_"+b]};dhtmlXTreeObject.prototype.getItemColor=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;var b={};a.acolor&&(b.acolor=a.acolor);a.scolor&&(b.scolor=a.scolor);return b};dhtmlXTreeObject.prototype.setItemColor=function(a,b,c){if(a=a&&a.span?a:this._globalIdStorageFind(a)){if(a.i_sel){if(c||b)a.span.style.color=c||b}else b&&(a.span.style.color=b);c&&(a.scolor=c);b&&(a.acolor=b)}else return 0};dhtmlXTreeObject.prototype.getItemText=function(a){return(a=this._globalIdStorageFind(a))?a.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0};dhtmlXTreeObject.prototype.getParentId=function(a){return(a=this._globalIdStorageFind(a))&&a.parentObject?a.parentObject.id:""};dhtmlXTreeObject.prototype.changeItemId=function(a,b){if(a!=b){var c=this._globalIdStorageFind(a);if(!c)return 0;c.id=b;c.span.contextMenuId=b;this._idpull[b]=this._idpull[a];delete this._idpull[a]}};dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut();this.nodeCut=[].concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b._cimgs=[];b._cimgs[0]=b.images[0];b._cimgs[1]=b.images[1];b._cimgs[2]=b.images[2];b.images[0]=b.images[1]=b.images[2]=this.cutImage;this._correctPlus(b)}};dhtmlXTreeObject.prototype.doPaste=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;for(var b=0;b<this.nodeCut.length;b++)this._checkPNodes(a,this.nodeCut[b])||this._moveNode(this.nodeCut[b],a);this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b.images[0]=b._cimgs[0];b.images[1]=b._cimgs[1];b.images[2]=b._cimgs[2];this._correctPlus(b)}this.nodeCut=[]};dhtmlXTreeObject.prototype._moveNode=function(a,b){if(1==this.dadmodec){var c=b;if(0>this.dadmodefix){for(;;){c=this._getPrevNode(c);if(-1==c){c=this.htmlNode;break}if(0==c.tr||""==c.tr.style.display||!c.parentObject)break}var e=b}else c.tr&&c.tr.nextSibling&&c.tr.nextSibling.nodem&&1>this._getOpenState(c)?c=c.tr.nextSibling.nodem:1>this._getOpenState(c)?c=this.htmlNode:(c=this._getNextNode(c),-1==c&&(c=this.htmlNode)),e=c,c=b;return this._getNodeLevel(c,0)>this._getNodeLevel(e,0)?this.dropLower?e.id!=this.rootId?this._moveNodeTo(a,e.parentObject,e):this._moveNodeTo(a,this.htmlNode,null):this._moveNodeTo(a,c.parentObject):this._moveNodeTo(a,e.parentObject,e)}return this._moveNodeTo(a,b)};dhtmlXTreeObject.prototype._fixNodesCollection=function(a,b){var c=0,e=a.childNodes,g=a.childsCount-1;if(b!=e[g]){for(var h=0;h<g;h++)e[h]==e[g]&&(e[h]=e[h+1],e[h+1]=e[g]);for(h=0;h<g+1;h++)if(c){var l=e[h];e[h]=c;c=l}else e[h]==b&&(c=e[h],e[h]=e[g])}};dhtmlXTreeObject.prototype._recreateBranch=function(a,b,c,e){var g,h="";if(c){for(g=0;g<b.childsCount&&b.childNodes[g]!=c;g++);0!=g?c=b.childNodes[g-1]:(h="TOP",c="")}g=this._onradh;this._onradh=null;c=this._attachChildNode(b,a.id,a.label,0,a.images[0],a.images[1],a.images[2],h,0,c);c._userdatalist=a._userdatalist;c.userData=a.userData.clone();if(a._attrs){c._attrs={};for(var l in a._attrs)c._attrs[l]=a._attrs[l]}c.XMLload=a.XMLload;g&&(this._onradh=g,this._onradh(c.id));a.treeNod.dpcpy?a.treeNod._globalIdStorageFind(a.id):c.unParsed=a.unParsed;this._correctPlus(c);for(g=0;g<a.childsCount;g++)this._recreateBranch(a.childNodes[g],c,0,1);!e&&this.childCalc&&this._redrawFrom(this,b);return c};dhtmlXTreeObject.prototype._moveNodeTo=function(a,b,c){if(a.treeNod._nonTrivialNode)return a.treeNod._nonTrivialNode(this,b,c,a);if(this._checkPNodes(b,a))return!1;var e=b.mytype?a.treeNod.lWin!=b.lWin:a.treeNod.lWin!=b.treeNod.lWin;if(!this.callEvent("onDrag",[a.id,b.id,c?c.id:null,a.treeNod,b.treeNod]))return!1;0==b.XMLload&&this.XMLsource&&(b.XMLload=1,this._loadDynXML(b.id));this.openItem(b.id);var g=a.treeNod,h=a.parentObject.childsCount,l=a.parentObject;if(e||g.dpcpy){var m=a.id;a=this._recreateBranch(a,b,c);g.dpcpy||g.deleteItem(m)}else{var n=b.childsCount,q=b.childNodes;0==n&&(b._open=!0);g._unselectItem(a);q[n]=a;a.treeNod=b.treeNod;b.childsCount++;n=this._drawNewTr(q[n].htmlNode);c?(b.htmlNode.childNodes[0].insertBefore(n,c.tr),this._fixNodesCollection(b,c),q=b.childNodes):(b.htmlNode.childNodes[0].appendChild(n),1==this.dadmode&&this._fixNodesCollection(b,c))}if(!g.dpcpy&&!e){var r=a.tr;document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){r.parentNode.removeChild(r)},250):a.parentObject.htmlNode.childNodes[0].removeChild(a.tr);if(c&&b==a.parentObject)l.childNodes[l.childsCount-1]=0;else for(m=0;m<l.childsCount;m++)if(l.childNodes[m].id==a.id){l.childNodes[m]=0;break}g._compressChildList(l.childsCount,l.childNodes);l.childsCount--}if(!e&&!g.dpcpy){a.tr=n;n.nodem=a;a.parentObject=b;if(g!=b.treeNod){if(a.treeNod._registerBranch(a,g))return;this._clearStyles(a);this._redrawFrom(this,a.parentObject);this._onradh&&this._onradh(a.id)}this._correctPlus(b);this._correctLine(b);this._correctLine(a);this._correctPlus(a);c?this._correctPlus(c):2<=b.childsCount&&(this._correctPlus(q[b.childsCount-2]),this._correctLine(q[b.childsCount-2]));this._correctPlus(q[b.childsCount-1]);this.tscheck&&this._correctCheckStates(b);g.tscheck&&g._correctCheckStates(l)}1<h&&(g._correctPlus(l.childNodes[h-2]),g._correctLine(l.childNodes[h-2]));g._correctPlus(l);g._correctLine(l);this._fixChildCountLabel(b);g._fixChildCountLabel(l);this.callEvent("onDrop",[a.id,b.id,c?c.id:null,g,b.treeNod]);return a.id};dhtmlXTreeObject.prototype._clearStyles=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[1],c=b.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=!1;a._aimgs&&this.dragger.removeDraggableItem(b.nextSibling);this.checkBoxOff?(b.childNodes[0].style.display="",b.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(b.childNodes[0],this.imPath+this.checkArray[a.checkstate])):b.style.display="none";b.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(c);this.dragAndDropOff&&this.dragger.addDraggableItem(c,this);this._aimgs&&this.dragger.addDraggableItem(b.nextSibling,this);c.childNodes[0].className="standartTreeRow";c.parentNode.className="";c.onclick=this.onRowSelect;c.ondblclick=this.onRowClick2;b.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(b=0;b<a.childsCount;b++)this._clearStyles(a.childNodes[b])}};dhtmlXTreeObject.prototype._registerBranch=function(a,b){b&&b._globalIdStorageSub(a.id);a.id=this._globalIdStorageAdd(a.id,a);a.treeNod=this;for(var c=0;c<a.childsCount;c++)this._registerBranch(a.childNodes[c],b);return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=!0;this.attachEvent("onMouseIn",a)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=!0;this.attachEvent("onMouseOut",a)};dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(a,b){this.checkBoxOff=dhx4.s2b(a);this.cBROf=!(this.checkBoxOff||dhx4.s2b(b))};dhtmlXTreeObject.prototype.setStdImages=function(a,b,c){this.imageArray[0]=a;this.imageArray[1]=b;this.imageArray[2]=c};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setImageArrays=function(a,b,c,e,g,h){switch(a){case "plus":this.plusArray[0]=b;this.plusArray[1]=c;this.plusArray[2]=e;this.plusArray[3]=g;this.plusArray[4]=h;break;case "minus":this.minusArray[0]=b,this.minusArray[1]=c,this.minusArray[2]=e,this.minusArray[3]=g,this.minusArray[4]=h}};dhtmlXTreeObject.prototype.openItem=function(a){this.skipLock=!0;return(a=this._globalIdStorageFind(a))?this._openItem(a):0};dhtmlXTreeObject.prototype._openItem=function(a){var b=this._getOpenState(a);if(0>b||this.XMLsource&&!a.XMLload){if(!this.callEvent("onOpenStart",[a.id,b]))return 0;this._HideShow(a,2);this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,a.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)]))}else this._srnd&&this._HideShow(a,2);a.parentObject&&!this._skip_open_parent&&this._openItem(a.parentObject)};dhtmlXTreeObject.prototype.closeItem=function(a){if(this.rootId==a)return 0;this.skipLock=!0;a=this._globalIdStorageFind(a);if(!a)return 0;a.closeble&&this._HideShow(a,1);this.skipLock=!1};dhtmlXTreeObject.prototype.getLevel=function(a){return(a=this._globalIdStorageFind(a))?this._getNodeLevel(a,0):0};dhtmlXTreeObject.prototype.setItemCloseable=function(a,b){b=dhx4.s2b(b);var c=a&&a.span?a:this._globalIdStorageFind(a);if(!c)return 0;c.closeble=b};dhtmlXTreeObject.prototype._getNodeLevel=function(a,b){return a.parentObject?this._getNodeLevel(a.parentObject,b+1):b};dhtmlXTreeObject.prototype.hasChildren=function(a){return(a=this._globalIdStorageFind(a))?this.XMLsource&&!a.XMLload?!0:a.childsCount:0};dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var b=0,c=0;c<a.childsCount;c++)0==a.childNodes[c].childsCount&&b++;return b};dhtmlXTreeObject.prototype.setItemText=function(a,b,c){a=this._globalIdStorageFind(a);if(!a)return 0;a.label=b;a.span.innerHTML=b;this.childCalc&&this._fixChildCountLabel(a);a.span.parentNode.parentNode.title=c||""};dhtmlXTreeObject.prototype.getItemTooltip=function(a){return(a=this._globalIdStorageFind(a))?a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title||"":""};dhtmlXTreeObject.prototype.refreshItem=function(a){a||(a=this.rootId);this._globalIdStorageFind(a);this._dynDeleteBranches[a]=(this._dynDeleteBranches[a]||0)+1;this._loadDynXML(a)};dhtmlXTreeObject.prototype.setItemImage2=function(a,b,c,e){a=this._globalIdStorageFind(a);if(!a)return 0;a.images[1]=c;a.images[2]=e;a.images[0]=b;this._correctPlus(a)};dhtmlXTreeObject.prototype.setItemImage=function(a,b,c){a=this._globalIdStorageFind(a);if(!a)return 0;c?(a.images[1]=b,a.images[2]=c):a.images[0]=b;this._correctPlus(a)};dhtmlXTreeObject.prototype.getSubItems=function(a){a=this._globalIdStorageFind(a,0,1);if(!a)return 0;if(a.unParsed)return this._getSubItemsXML(a.unParsed);var b="";for(i=0;i<a.childsCount;i++)b=b?b+(this.dlmtr+a.childNodes[i].id):""+a.childNodes[i].id;return b};dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||0<a.childNodes[c].childsCount){var e=a.childNodes[c].unParsed?this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1):this._getAllScraggyItems(a.childNodes[c]);e&&(b=b?b+(this.dlmtr+e):e)}else b=b?b+(this.dlmtr+a.childNodes[c].id):""+a.childNodes[c].id;return b};dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||0<a.childNodes[c].childsCount){var b=b?b+(this.dlmtr+a.childNodes[c].id):""+a.childNodes[c].id,e=a.childNodes[c].unParsed?this._getAllFatItemsXML(a.childNodes[c].unParsed,1):this._getAllFatItems(a.childNodes[c]);e&&(b+=this.dlmtr+e)}return b};dhtmlXTreeObject.prototype._getAllSubItems=function(a,b,c){c=c?c:this._globalIdStorageFind(a);if(!c)return 0;b="";for(var e=0;e<c.childsCount;e++){b=b?b+(this.dlmtr+c.childNodes[e].id):""+c.childNodes[e].id;var g=this._getAllSubItems(0,b,c.childNodes[e]);g&&(b+=this.dlmtr+g)}c.unParsed&&(b=this._getAllSubItemsXML(a,b,c.unParsed));return b};dhtmlXTreeObject.prototype.selectItem=function(a,b,c){b=dhx4.s2b(b);a=this._globalIdStorageFind(a);if(!a||!a.parentObject)return 0;this.XMLloadingWarning?a.parentObject.openMe=1:this._openItem(a.parentObject);var e=null;c&&(e={ctrlKey:!0},a.i_sel&&(e.skipUnSel=!0));if(b)this.onRowSelect(e,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1);else this.onRowSelect(e,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)};dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var a=[],b=0;b<this._selected.length;b++)a[b]=this._selected[b].span.innerHTML;return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._compressChildList=function(a,b){a--;for(var c=0;c<a;c++)0==b[c]&&(b[c]=b[c+1],b[c+1]=0)};dhtmlXTreeObject.prototype._deleteNode=function(a,b,c){if(!b||!b.parentObject)return 0;var e=0,g=0;b.tr.nextSibling&&(e=b.tr.nextSibling.nodem);b.tr.previousSibling&&(g=b.tr.previousSibling.nodem);for(var h=b.parentObject,l=h.childsCount,m=h.childNodes,n=0;n<l;n++)if(m[n].id==a){c||h.htmlNode.childNodes[0].removeChild(m[n].tr);m[n]=0;break}this._compressChildList(l,m);c||h.childsCount--;e&&(this._correctPlus(e),this._correctLine(e));g&&(this._correctPlus(g),this._correctLine(g));this.tscheck&&this._correctCheckStates(h);c||this._globalIdStorageRecSub(b)};dhtmlXTreeObject.prototype.setCheck=function(a,b){var c=this._globalIdStorageFind(a,0,1);c&&("unsure"===b?this._setCheck(c,b):(b=dhx4.s2b(b),this.tscheck&&this.smcheck?this._setSubChecked(b,c):this._setCheck(c,b)),this.smcheck&&this._correctCheckStates(c.parentObject))};dhtmlXTreeObject.prototype._setCheck=function(a,b){if(a){if((a.parentObject._r_logic||this._frbtr)&&b)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=a;else for(var c=0;c<a.parentObject.childsCount;c++)this._setCheck(a.parentObject.childNodes[c],0);c=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];a.checkstate="unsure"==b?2:b?1:0;a.dscheck&&(a.checkstate=a.dscheck);this._setSrc(c,this.imPath+(a.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[a.checkstate])}};dhtmlXTreeObject.prototype.setSubChecked=function(a,b){var c=this._globalIdStorageFind(a);this._setSubChecked(b,c);this._correctCheckStates(c.parentObject)};
dhtmlXTreeObject.prototype._setSubChecked=function(a,b){a=dhx4.s2b(a);if(b){if((b.parentObject._r_logic||this._frbtr)&&a)for(var c=0;c<b.parentObject.childsCount;c++)this._setSubChecked(0,b.parentObject.childNodes[c]);b.unParsed&&this._setSubCheckedXML(a,b.unParsed);if(b._r_logic||this._frbtr)this._setSubChecked(a,b.childNodes[0]);else for(c=0;c<b.childsCount;c++)this._setSubChecked(a,b.childNodes[c]);c=b.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];b.checkstate=a?1:0;b.dscheck&&(b.checkstate=b.dscheck);this._setSrc(c,this.imPath+(b.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[b.checkstate])}};dhtmlXTreeObject.prototype.isItemChecked=function(a){if(a=this._globalIdStorageFind(a))return a.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(a){if(a=this._globalIdStorageFind(a))for(var b=a.childsCount,c=0;c<b;c++)this._deleteNode(a.childNodes[0].id,a.childNodes[0])};dhtmlXTreeObject.prototype.deleteItem=function(a,b){if(!this._onrdlh||this._onrdlh(a)){var c=this._deleteItem(a,b);c&&this._fixChildCountLabel(c)}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(a,b,c){b=dhx4.s2b(b);var e=this._globalIdStorageFind(a);if(e){var g=this.getParentId(a),h=e.parentObject;this._deleteNode(a,e,c);this._editCell&&this._editCell.id==a&&(this._editCell=null);this._correctPlus(h);this._correctLine(h);b&&g!=this.rootId&&this.selectItem(g,1);return h}};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var b=0;b<a.childsCount;b++)this._globalIdStorageRecSub(a.childNodes[b]),this._globalIdStorageSub(a.childNodes[b].id);this._globalIdStorageSub(a.id);a.span=null;a.tr.nodem=null;a.tr=null;a.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(a,b,c,e,g,h,l,m,n){a=this._globalIdStorageFind(a);if(!a||!a.parentObject)return 0;b=this._attachChildNode(0,b,c,e,g,h,l,m,n,a);!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(a.parentObject);return b};dhtmlXTreeObject.prototype.getItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)};dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null);this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(a,b){"temporary_disabled"==a?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0;(this.dragAndDropOff=dhx4.s2b(a))&&this.dragger.addDragLanding(this.allTree,this);1<arguments.length&&(this._ddronr=!dhx4.s2b(b))};dhtmlXTreeObject.prototype._setMove=function(a,b,c){if(a.parentObject.span){b=dhx4.absTop(a);var e=dhx4.absTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;2==this.dadmode&&(c=c-b+(document.body.scrollTop||document.documentElement.scrollTop)-2-a.offsetHeight/2,0<Math.abs(c)-a.offsetHeight/6?(this.dadmodec=1,0>c&&(this.dadmodefix=0-a.offsetHeight)):this.dadmodec=0);0==this.dadmodec?(a=a.parentObject.span,a.className+=" dragAndDropRow",this._lastMark=a):(this._clearMove(),this.selectionBar.style.top=b-e+((parseInt(a.parentObject.span.parentNode.parentNode.offsetHeight)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",20<this.allTree.offsetWidth&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="");this._autoScroll(null,b,e)}};dhtmlXTreeObject.prototype._autoScroll=function(a,b,c){this.autoScroll&&(a&&(b=dhx4.absTop(a),c=dhx4.absTop(this.allTree)-this.allTree.scrollTop),b-c-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),b-c<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))};dhtmlXTreeObject.prototype._createDragNode=function(a,b){if(!this.dADTempOff)return null;var c=a.parentObject;if(!this.callEvent("onBeforeDrag",[c.id,b]))return null;c.i_sel||this._selectItem(c,b);this._checkMSelectionLogic();var c=document.createElement("div"),e=[];if(this._itim_dg)for(var g=0;g<this._selected.length;g++)e[g]="\x3ctable cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ctr\x3e\x3ctd\x3e\x3cimg width\x3d'18px' height\x3d'18px' src\x3d'"+this._getSrc(this._selected[g].span.parentNode.previousSibling.childNodes[0])+"'\x3e\x3c/td\x3e\x3ctd\x3e"+this._selected[g].span.innerHTML+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";else e=this.getSelectedItemText().split(this.dlmtr);c.innerHTML=e.join("");c.style.position="absolute";c.className="dragSpanDiv";this._dragged=[].concat(this._selected);return c};dhtmlXTreeObject.prototype._focusNode=function(a){a=dhx4.absTop(a.htmlNode)-dhx4.absTop(this.allTree);if(a>this.allTree.offsetHeight-30||0>a)this.allTree.scrollTop=a+this.allTree.scrollTop};dhtmlXTreeObject.prototype._preventNsDrag=function(a){a&&a.preventDefault&&a.preventDefault();return!1};dhtmlXTreeObject.prototype._drag=function(a,b,c){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer);c.parentObject||(c=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0);this._clearMove();(b=a.parentObject.treeNod)&&b._clearMove&&b._clearMove("");if(!this.dragMove||this.dragMove()){a=b&&b._clearMove&&b._dragged?b._dragged:Array(a.parentObject);c=c.parentObject;for(var e=0;e<a.length;e++){var g=this._moveNode(a[e],c);this.dadmodec&&!1!==g&&(c=this._globalIdStorageFind(g,!0,!0));g&&!this._sADnD&&this.selectItem(g,0,1)}}b&&(b._dragged=[])};dhtmlXTreeObject.prototype._dragIn=function(a,b,c,e){if(!this.dADTempOff)return 0;var g=b.parentObject;if((b=a.parentObject)||!this._ddronr){if(!this.callEvent("onDragIn",[g.id,b?b.id:null,g.treeNod,this]))return b&&this._autoScroll(a),0;if(b){if(null==g.childNodes)return this._setMove(a,c,e),a;for(var g=g.treeNod,h=0;h<g._dragged.length;h++)if(this._checkPNodes(b,g._dragged[h]))return this._autoScroll(a),0;this.selectionBar.parentNode.removeChild(this.selectionBar);b.span.parentNode.appendChild(this.selectionBar);this._setMove(a,c,e);if(0>=this._getOpenState(b)){var l=this;this._autoOpenId=b.id;this._autoOpenTimer=window.setTimeout(function(){l._autoOpenItem(null,l);l=null},1E3)}}else this.allTree.className+=" selectionBox";return a}};dhtmlXTreeObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(a){this._clearMove();this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)};dhtmlXTreeObject.prototype._getNextNode=function(a,b){return!b&&a.childsCount?a.childNodes[0]:a==this.htmlNode?-1:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:this._getNextNode(a.parentObject,!0)};dhtmlXTreeObject.prototype._lastChild=function(a){return a.childsCount?this._lastChild(a.childNodes[a.childsCount-1]):a};dhtmlXTreeObject.prototype._getPrevNode=function(a,b){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:-1};dhtmlXTreeObject.prototype.findItem=function(a,b,c){return(a=this._findNodeByLabel(a,b,c?this.htmlNode:null))?(this.selectItem(a.id,!0),this._focusNode(a),a.id):null};dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,b,c){return(a=this._findNodeByLabel(a,b,c?this.htmlNode:null))?a.id:null};dhtmlXTreeObject.prototype.findStrInXML=function(a,b,c){if(!a.childNodes&&a.item)return this.findStrInJSON(a,b,c);if(!a.childNodes)return!1;for(var e=0;e<a.childNodes.length;e++)if(1==a.childNodes[e].nodeType){var g=a.childNodes[e].getAttribute(b);g||"itemtext"!=a.childNodes[e].tagName||(g=a.childNodes[e].firstChild.data);if(g&&-1!=g.toLowerCase().search(c)||this.findStrInXML(a.childNodes[e],b,c))return!0}return!1};dhtmlXTreeObject.prototype.findStrInJSON=function(a,b,c){for(var e=0;e<a.item.length;e++){var g=a.item[e].text;if(g&&-1!=g.toLowerCase().search(c)||a.item[e].item&&this.findStrInJSON(a.item[e],b,c))return!0}return!1};dhtmlXTreeObject.prototype._findNodeByLabel=function(a,b,c){a=a.replace(/^( )+/,"").replace(/( )+$/,"");a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");c||(c=this._selected[0],c||(c=this.htmlNode));var e=c;if(b){var g=this._getPrevNode(e);-1==g&&(g=this._lastChild(this.htmlNode));g.unParsed&&this.findStrInXML(g.unParsed.d,"text",a)?(this.reParse(g),c=this._getPrevNode(e)):c=g;-1==c&&(c=this._lastChild(this.htmlNode))}else c.unParsed&&this.findStrInXML(c.unParsed.d,"text",a)&&this.reParse(c),c=this._getNextNode(e),-1==c&&(c=this.htmlNode.childNodes[0]);for(;c&&c!=e;){if(c.label&&-1!=c.label.search(a))return c;if(b)g=this._getPrevNode(c),-1==g&&(g=this._lastChild(this.htmlNode)),g.unParsed&&this.findStrInXML(g.unParsed.d,"text",a)?(this.reParse(g),c=this._getPrevNode(c)):c=g,-1==c&&(c=this._lastChild(this.htmlNode));else{if(-1==c){if(e==this.htmlNode)break;c=this.htmlNode.childNodes[0]}c.unParsed&&this.findStrInXML(c.unParsed.d,"text",a)&&this.reParse(c);c=this._getNextNode(c);-1==c&&(c=this.htmlNode)}}return null};dhtmlXTreeObject.prototype.moveItem=function(a,b,c,e){a=this._globalIdStorageFind(a);if(!a)return 0;var g=null;switch(b){case "right":alert("Not supported yet");break;case "item_child":g=(e||this)._globalIdStorageFind(c);if(!g)return 0;g=(e||this)._moveNodeTo(a,g,0);break;case "item_sibling":g=(e||this)._globalIdStorageFind(c);if(!g)return 0;g=(e||this)._moveNodeTo(a,g.parentObject,g);break;case "item_sibling_next":g=(e||this)._globalIdStorageFind(c);if(!g)return 0;g=g.tr&&g.tr.nextSibling&&g.tr.nextSibling.nodem?(e||this)._moveNodeTo(a,g.parentObject,g.tr.nextSibling.nodem):(e||this)._moveNodeTo(a,g.parentObject);break;case "left":a.parentObject.parentObject&&(g=this._moveNodeTo(a,a.parentObject.parentObject,a.parentObject));break;case "up":e=this._getPrevNode(a);if(-1==e||!e.parentObject)return null;g=this._moveNodeTo(a,e.parentObject,e);break;case "up_strict":e=this._getIndex(a);0!=e&&(g=this._moveNodeTo(a,a.parentObject,a.parentObject.childNodes[e-1]));break;case "down_strict":e=this._getIndex(a);b=a.parentObject.childsCount-2;e==b?g=this._moveNodeTo(a,a.parentObject):e<b&&(g=this._moveNodeTo(a,a.parentObject,a.parentObject.childNodes[e+2]));break;case "down":e=this._getNextNode(this._lastChild(a));if(-1==e||!e.parentObject)return;e.parentObject==a.parentObject&&(e=this._getNextNode(e));if(-1==e)g=this._moveNodeTo(a,a.parentObject);else{if(-1==e||!e.parentObject)return;g=this._moveNodeTo(a,e.parentObject,e)}}_isIE&&8>_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0");return g};dhtmlXTreeObject.prototype.setDragBehavior=function(a,b){this._sADnD=!dhx4.s2b(b);switch(a){case "child":this.dadmode=0;break;case "sibling":this.dadmode=1;break;case "complex":this.dadmode=2}};dhtmlXTreeObject.prototype._loadDynXML=function(a,b){b=b||this.XMLsource;var c=(new Date).valueOf();this._ld_id=a;"function"==this.xmlalb?b&&b(this._escape(a)):"name"==this.xmlalb?this.load(b+this._escape(a)):"xmlname"==this.xmlalb?this.load(b+this._escape(a)+".xml?uid\x3d"+c):this.load(b+dhtmlx.url(b)+"uid\x3d"+c+"\x26id\x3d"+this._escape(a))};dhtmlXTreeObject.prototype.enableMultiselection=function(a,b){this._amsel=dhx4.s2b(a);this._amselS=dhx4.s2b(b)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var a=[],b=0;b<this._selected.length;b++)for(var c=0;c<this._selected.length;c++)b!=c&&this._checkPNodes(this._selected[c],this._selected[b])&&(a[a.length]=this._selected[c]);for(b=0;b<a.length;b++)this._unselectItem(a[b])};dhtmlXTreeObject.prototype._checkPNodes=function(a,b){return this._dcheckf?!1:b==a?1:a.parentObject?this._checkPNodes(a.parentObject,b):0};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(a,b,c){this._edsbps=dhx4.s2b(a);this._edsbpsA=[];this._edsbpsC=b||10;this._edsbpsD=c||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)};dhtmlXTreeObject.prototype.getItemParsingState=function(a){if(!this._globalIdStorageFind(a,!0,!0))return 0;if(this._edsbpsA)for(var b=0;b<this._edsbpsA.length;b++)if(this._edsbpsA[b][2]==a)return-1;return 1};dhtmlXTreeObject.prototype._distributedStart=function(a,b,c,e,g){this._edsbpsA||(this._edsbpsA=[]);this._edsbpsA[this._edsbpsA.length]=[a,b,c,e,g]};dhtmlXTreeObject.prototype._distributedStep=function(a){var b=this;if(this._edsbpsA&&this._edsbpsA.length){var c=this._edsbpsA[0];this.parsedArray=[];this._parse(c[0],c[2],c[3],c[1]);var e=this._globalIdStorageFind(c[2]);this._redrawFrom(this,e,c[4],this._getOpenState(e));c=this.setCheckList.split(this.dlmtr);for(e=0;e<c.length;e++)c[e]&&this.setCheck(c[e],1);this._edsbpsA=[].concat(this._edsbpsA.slice(1));this._edsbpsA.length||(window.setTimeout(function(){if(b.onXLE)b.onXLE(b,a);b.callEvent("onXLE",[b,a])},1),b.xmlstate=0)}else b.XMLloadingWarning=0};dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.preventIECaching=function(a){dhx4.ajax.cache=!a};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(a,b){var c="object"!=typeof a?this._globalIdStorageFind(a,0,1):a;c&&(c.dscheck=dhx4.s2b(b)?(c.checkstate||0)%3+3:2<c.checkstate?c.checkstate-3:c.checkstate,this._setCheck(c),3>c.dscheck&&(c.dscheck=!1))};dhtmlXTreeObject.prototype.smartRefreshBranch=function(a,b){this._branchUpdate=1;this.smartRefreshItem(a,b)};dhtmlXTreeObject.prototype.smartRefreshItem=function(a,b){for(var c=this._globalIdStorageFind(a),e=0;e<c.childsCount;e++)c.childNodes[e]._dmark=!0;this.waitUpdateXML=!0;b&&b.exists?this._parse(b,a):this._loadDynXML(a,b)};dhtmlXTreeObject.prototype.refreshItems=function(a,b){var c=a.toString().split(this.dlmtr);this.waitUpdateXML=[];for(var e=0;e<c.length;e++)this.waitUpdateXML[c[e]]=!0;this.load((b||this.XMLsource)+dhtmlx.url(b||this.XMLsource)+"ids\x3d"+this._escape(a))};dhtmlXTreeObject.prototype.updateItem=function(a,b,c,e,g,h,l){var m=this._globalIdStorageFind(a);m.userData=new cObject;b&&(m.label=b);m.images=[c||this.imageArray[0],e||this.imageArray[1],g||this.imageArray[2]];this.setItemText(a,b);h&&this._setCheck(m,!0);"1"!=l||this.hasChildren(a)||(m.XMLload=0);this._correctPlus(m);m._dmark=!1;return m};dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate};dhtmlXTreeObject.prototype.setItemTopOffset=function(a,b){var c;c="object"!=typeof a?this._globalIdStorageFind(a):a;var e=c.span.parentNode.parentNode;c.span.style.paddingBottom="1px";for(var g=0;g<e.childNodes.length;g++){if(0!=g)_isIE?(e.childNodes[g].style.height="18px",e.childNodes[g].style.paddingTop=parseInt(b)+"px"):e.childNodes[g].style.height=18+parseInt(b)+"px";else{var h=e.childNodes[g].firstChild;"DIV"!=e.childNodes[g].firstChild.tagName&&(h=document.createElement("DIV"),e.childNodes[g].insertBefore(h,e.childNodes[g].firstChild));c.parentObject.id==this.rootId&&c.parentObject.childNodes[0]==c||!this.treeLinesOn||(e.childNodes[g].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")");h.innerHTML="\x26nbsp;";h.style.overflow="hidden"}h.style.verticalAlign=e.childNodes[g].style.verticalAlign="bottom";_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")}};dhtmlXTreeObject.prototype.setIconSize=function(a,b,c){if(c){c=c&&c.span?c:this._globalIdStorageFind(c);if(!c)return 0;c=c.span.parentNode.previousSibling.childNodes[0];a&&(c.style.width=a+"px",window._KHTMLrv&&(c.parentNode.style.width=a+"px"));b&&(c.style.height=b+"px",window._KHTMLrv&&(c.parentNode.style.height=b+"px"))}else this.def_img_x=a+"px",this.def_img_y=b+"px"};dhtmlXTreeObject.prototype.getItemImage=function(a,b,c){a=this._globalIdStorageFind(a);if(!a)return"";b=a.images[b||0];c&&(b=this.iconURL+b);return b};dhtmlXTreeObject.prototype.enableRadioButtons=function(a,b){if(1==arguments.length)this._frbtr=dhx4.s2b(a),this.checkBoxOff=this.checkBoxOff||this._frbtr;else{var c=this._globalIdStorageFind(a);if(!c)return"";if((b=dhx4.s2b(b))&&!c._r_logic){c._r_logic=!0;for(var e=0;e<c.childsCount;e++)this._setCheck(c.childNodes[e],c.childNodes[e].checkstate)}if(!b&&c._r_logic)for(c._r_logic=!1,e=0;e<c.childsCount;e++)this._setCheck(c.childNodes[e],c.childNodes[e].checkstate)}};dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){this.mlitems=!0===a?"100%":a};dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=dhx4.s2b(a)};dhtmlXTreeObject.prototype.clearSelection=function(a){a?this._unselectItem(this._globalIdStorageFind(a)):this._unselectItems()};dhtmlXTreeObject.prototype.showItemSign=function(a,b){var c=this._globalIdStorageFind(a);if(!c)return 0;dhx4.s2b(b)?(c.closeble=!0,c.wsign=!1):(this._openItem(c),c.closeble=!1,c.wsign=!0);this._correctPlus(c)};dhtmlXTreeObject.prototype.showItemCheckbox=function(a,b){if(!a)for(var c in this._idpull)this.showItemCheckbox(this._idpull[c],b);"object"!=typeof a&&(a=this._globalIdStorageFind(a,0,0));if(!a)return 0;a.nocheckbox=!dhx4.s2b(b);a.span.parentNode.previousSibling.previousSibling.childNodes[0].parentNode.style.display=a.nocheckbox?"none":""};dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a};dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a};dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=!0;this.ehlta=dhx4.s2b(a)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b.callEvent("onMouseOut",[a.id]);a.id==b._l_onMSI&&(b._l_onMSI=null);b.ehlta&&(a.span.className=a.span.className.replace("_lor",""))};dhtmlXTreeObject.prototype._itemMouseIn=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b._l_onMSI!=a.id&&b.callEvent("onMouseIn",[a.id]);b._l_onMSI=a.id;b.ehlta&&(a.span.className=a.span.className.replace("_lor",""),a.span.className=a.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.focusItem=function(a){a=this._globalIdStorageFind(a);if(!a)return 0;this._focusNode(a)};dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||0<a.childNodes[c].childsCount){var e=a.childNodes[c].unParsed?this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1):this._getAllScraggyItems(a.childNodes[c]);e&&(b=b?b+(this.dlmtr+e):e)}else b=b?b+(this.dlmtr+a.childNodes[c].id):""+a.childNodes[c].id;return b};dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||0<a.childNodes[c].childsCount){var b=b?b+(this.dlmtr+a.childNodes[c].id):""+a.childNodes[c].id,e=a.childNodes[c].unParsed?this._getAllFatItemsXML(a.childNodes[c].unParsed,1):this._getAllFatItems(a.childNodes[c]);e&&(b+=this.dlmtr+e)}return b};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){a&&(a=this._globalIdStorageFind(a));return this._getAllChecked(a,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)],b=this._getAllChecked("","",2);b&&a.push(b);return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(a,b,c){a||(a=this.htmlNode);a.checkstate==c&&(a.nocheckbox||(b=b?b+(this.dlmtr+a.id):""+a.id));for(var e=a.childsCount,g=0;g<e;g++)b=this._getAllChecked(a.childNodes[g],b,c);a.unParsed&&(b=this._getAllCheckedXML(a.unParsed,b,c));return b?b:""};dhtmlXTreeObject.prototype.setItemStyle=function(a,b,c){c=c||!1;a=this._globalIdStorageFind(a);if(!a)return 0;a.span.style.cssText?a.span.style.cssText=c?b:a.span.style.cssText+";"+b:a.span.setAttribute("style",a.span.getAttribute("style")+"; "+b)};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setSkin=function(a){var b=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=b+" dhxtree_"+a;"dhx_terrace"!=a&&"dhx_web"!=a&&"material"!=a||this.enableTreeLines(!1);"material"==a&&this.setIconSize("25","25")};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,a.width||"100%",a.height||"100%",a.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(a,c,e){a=dhx4.ajax.xpath(".//item",a)[0].getAttribute("text");this.obj.insertNewItem(e,c,a,0,0,0,0,"CHILD")});a.attachEvent("updateCallback",function(a,c,e){a=dhx4.ajax.xpath(".//item",a)[0].getAttribute("text");this.obj.setItemText(c,a);this.obj.getParentId(c)!=e&&this.obj.moveItem(c,"item_child",e);this.setUpdated(c,!0,"updated")});a.attachEvent("deleteCallback",function(a,c,e){this.obj.setUserData(c,this.action_param,"true_deleted");this.obj.deleteItem(c,!1)});a._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(b,c){3==b&&a.setUpdated(c,!0);return!0});this.attachEvent("onDrop",function(b,c,e,g,h){g==h&&a.setUpdated(b,!0)});this._onrdlh=function(b){var c=a.getState(b);if("inserted"==c)return a.set_invalid(b,!1),a.setUpdated(b,!1),!0;if("true_deleted"==c)return a.setUpdated(b,!1),!0;a.setUpdated(b,!0,"deleted");return!1};this._onradh=function(b){a.setUpdated(b,!0,"inserted")};a._getRowData=function(a){var b={};a=this.obj._globalIdStorageFind(a);var e=a.parentObject,g;for(g=0;g<e.childsCount&&e.childNodes[g]!=a;g++);b.tr_id=a.id;b.tr_pid=e.id;b.tr_order=g;b.tr_text=a.span.innerHTML;e=(a._userdatalist||"").split(",");for(g=0;g<e.length;g++)b[e[g]]=a.userData["t_"+e[g]];return b}};"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachTree=function(a){this.callEvent("_onBeforeContentAttach",["tree"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);this.dataType="tree";this.dataObj=new dhtmlXTreeObject(b,"100%","100%",a||0);this.dataObj.setSkin(this.conf.skin);this.dataObj.allTree.childNodes[0].style.marginTop="2px";this.dataObj.allTree.childNodes[0].style.marginBottom="2px";this.callEvent("_onContentAttach",[]);return this.dataObj});dhtmlXTreeObject.prototype.makeDraggable=function(a,b){"object"!=typeof a&&(a=document.getElementById(a));dragger=new dhtmlDragAndDropObject;dropper=new dhx_dragSomethingInTree;dragger.addDraggableItem(a,dropper);a.dragLanding=null;a.ondragstart=dropper._preventNsDrag;a.onselectstart=new Function("return false;");a.parentObject={};a.parentObject.img=a;a.parentObject.treeNod=dropper;dropper._customDrop=b};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(a){for(var b=document.getElementsByTagName("div"),c=0;c<b.length;c++)b[c].getAttribute("dragInDhtmlXTree")&&this.makeDragable(b[c],a)};function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(a){var b=document.createElement("div");b.style.position="absolute";b.innerHTML=a.innerHTML||a.value;b.className="dragSpanDiv";return b};this._preventNsDrag=function(a){(a||window.event).cancelBubble=!0;a&&a.preventDefault&&a.preventDefault();return!1};this._nonTrivialNode=function(a,b,c,e){if(this._customDrop)return this._customDrop(a,e.img.id,b.id,c?c.id:null);var g=e.img.getAttribute("image")||"",h=e.img.id||"new";e=e.img.getAttribute("text")||(_isIE?e.img.innerText:e.img.textContent);a[c?"insertNewNext":"insertNewItem"](c?c.id:b.id,h,e,"",g,g,g)}}dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=dhx4.s2b(a);this._eItEdFlag||(this._edn_dblclick=this._edn_click_IE=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(a,c){this._edn_dblclick&&this._editItem(a,c);return!0}),this.setOnClickHandler(function(a,c){this._stopEditItem(a,c);this.ed_hist_clcik==a&&this._edn_click_IE&&this._editItem(a,c);this.ed_hist_clcik=a;return!0}),this._eItEdFlag=!0)};dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent("onEdit",a)};dhtmlXTreeObject.prototype.setEditStartAction=function(a,b){this._edn_click_IE=dhx4.s2b(a);this._edn_dblclick=dhx4.s2b(b)};dhtmlXTreeObject.prototype._stopEdit=function(a,b){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=a)){var c=!0;b?(c=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):c=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]);!0===c?c=this._editCell.span.childNodes[0].value:!1===c&&(c=this._editCell._oldValue);var e=c!=this._editCell._oldValue;this._editCell.span.innerHTML=c;this._editCell.label=this._editCell.span.innerHTML;this._editCell.span.className=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.parentNode.className="standartTreeRow";this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px";this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};c=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell);this._editCell=null;b||this.callEvent("onEdit",[3,c,this,e]);this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}};dhtmlXTreeObject.prototype._stopEditItem=function(a,b){this._stopEdit(a)};dhtmlXTreeObject.prototype.stopEdit=function(a){this._editCell&&this._stopEdit(this._editCell.id+"_non",a)};dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)};dhtmlXTreeObject.prototype._editItem=function(a,b){if(this._eItEd){this._stopEdit();var c=this._globalIdStorageFind(a);if(c){var e=this.callEvent("onEdit",[0,a,this,c.span.innerHTML]);if(!0===e)e="undefined"!=typeof c.span.innerText?c.span.innerText:c.span.textContent;else if(!1===e)return;this.dADTempOffEd=this.dADTempOff;this.dADTempOff=!1;this._editCell=c;c._oldValue=e;c.span.innerHTML="\x3cinput type\x3d'text' class\x3d'intreeeditRow' /\x3e";c.span.style.paddingRight=c.span.style.paddingLeft="0px";c.span.onclick=c.span.ondblclick=function(a){(a||event).cancelBubble=!0};c.span.childNodes[0].value=e;c.span.childNodes[0].onselectstart=function(a){return(a||event).cancelBubble=!0};c.span.childNodes[0].onmousedown=function(a){return(a||event).cancelBubble=!0};c.span.childNodes[0].focus();c.span.childNodes[0].focus();c.span.onclick=function(a){(a||event).cancelBubble=!0;return!1};c.span.className="";c.span.parentNode.className="";var g=this;c.span.childNodes[0].onkeydown=function(a){a||(a=window.event);13==a.keyCode?(a.cancelBubble=!0,g._stopEdit(window.undefined)):27==a.keyCode&&g._stopEdit(window.undefined,!0);(a||event).cancelBubble=!0};this.callEvent("onEdit",[1,a,this])}}};function jsonPointer(a,b){this.d=a;this.dp=b}jsonPointer.prototype={text:function(){var a=function(a){for(var c=[],g=0;g<a.length;g++)c.push("{"+b(a[g])+"}");return c.join(",")},b=function(c){var e=[],g;for(g in c)"object"==typeof c[g]?g.length?e.push('"'+g+'":['+a(c[g])+"]"):e.push('"'+g+'":{'+b(c[g])+"}"):e.push('"'+g+'":"'+c[g]+'"');return e.join(",")};return"{"+b(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(a,b,c){a=this.d[a];var e=new jsonPointer;if(a)for(var g=0;g<a.length;g++)e.d=a[g],b.apply(c,[e,g])},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return!!this.d[a]},each_x:function(a,b,c,e,g){a=this.d[a];var h=new jsonPointer(0,this.d);if(a)for(g=g||0;g<a.length&&(!a[g][b]||(h.d=a[g],-1!=c.apply(e,[h,g])));g++);},up:function(a){return new jsonPointer(this.dp,this.d)},set:function(a,b){this.d[a]=b},clone:function(a){return new jsonPointer(this.d,this.dp)},through:function(a,b,c,e,g){var h=this.d[a];if(h.length)for(var l=0;l<h.length;l++){if(null!=h[l][b]&&""!=h[l][b]&&(!c||h[l][b]==c)){var m=new jsonPointer(h[l],this.d);e.apply(g,[m,l])}m=this.d;this.d=h[l];this.sub_exists(a)&&this.through(a,b,c,e,g);this.d=m}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(a,b){window.console&&window.console.info&&window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSArrayFile(a,b)};dhtmlXTreeObject.prototype._loadJSArrayFile=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var c=this;this.XMLLoader=function(a,b){eval("var z\x3d"+a.responseText);this._loadJSArray(z);b&&b.call(this,a)};dhx4.ajax.get(a,function(a){c.XMLLoader(a.xmlDoc,b)})};dhtmlXTreeObject.prototype.loadCSV=function(a,b){window.console&&window.console.info&&window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadCSV(a,b)};dhtmlXTreeObject.prototype._loadCSV=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var c=this;this.XMLLoader=function(a,b){this._loadCSVString(a.responseText);b&&b.call(this,a)};dhx4.ajax.get(a,function(a){c.XMLLoader(a.xmlDoc,b)})};dhtmlXTreeObject.prototype.loadJSArray=function(a,b){window.console&&window.console.info&&window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSArray(a,b)};dhtmlXTreeObject.prototype._loadJSArray=function(a,b){for(var c=[],e=0;e<a.length;e++)c[a[e][1]]||(c[a[e][1]]=[]),c[a[e][1]].push({id:a[e][0],text:a[e][2]});var e={id:this.rootId},g=function(a,b){if(c[a.id]){a.item=c[a.id];for(var e=0;e<a.item.length;e++)b(a.item[e],b)}};g(e,g);this._loadJSONObject(e,b)};dhtmlXTreeObject.prototype.loadCSVString=function(a,b){window.console&&window.console.info&&window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadCSVString(a,b)};dhtmlXTreeObject.prototype._loadCSVString=function(a,b){for(var c=[],e=a.split("\n"),g=0;g<e.length;g++){var h=e[g].split(",");c[h[1]]||(c[h[1]]=[]);c[h[1]].push({id:h[0],text:h[2]})}e={id:this.rootId};g=function(a,b){if(c[a.id]){a.item=c[a.id];for(var e=0;e<a.item.length;e++)b(a.item[e],b)}};g(e,g);this._loadJSONObject(e,b)};dhtmlXTreeObject.prototype.loadJSONObject=function(a,b){window.console&&window.console.info&&window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSONObject(a,b)};dhtmlXTreeObject.prototype._loadJSONObject=function(a,b){this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;var c=new jsonPointer(a);this._parse(c);this._p=c;b&&b()};dhtmlXTreeObject.prototype.loadJSON=function(a,b){window.console&&window.console.info&&window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");return this._loadJSON(a,b)};dhtmlXTreeObject.prototype._loadJSON=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var c=this;this.XMLLoader=function(a,b){try{eval("var t\x3d"+a.responseText)}catch(l){dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",a,this]);return}var c=new jsonPointer(t);this._parse(c);this._p=c;b&&b.call(this,a)};dhx4.ajax.get(a,function(a){c.XMLLoader(a.xmlDoc,b)})};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var a=['{"id":"'+this.rootId+'", "item":['],b=[],c=0;c<this.htmlNode.childsCount;c++)b.push(this._serializeItemJSON(this.htmlNode.childNodes[c]));a.push(b.join(","));a.push("]}");return a.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(a){var b=[];if(a.unParsed)return a.unParsed.text();var c=this._selected.length?this._selected[0].id:"",e=a.span.innerHTML,e=e.replace(/\"/g,'\\"',e);this._xfullXML?b.push('{ "id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(c==a.id?' "select":"1",':"")+' "text":"'+e+'", "im0":"'+a.images[0]+'", "im1":"'+a.images[1]+'", "im2":"'+a.images[2]+'" '+(a.acolor?', "aCol":"'+a.acolor+'" ':"")+(a.scolor?', "sCol":"'+a.scolor+'" ':"")+(1==a.checkstate?', "checked":"1" ':2==a.checkstate?', "checked":"-1"':"")+(a.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==a.XMLload?', "child":"1" ':"")):b.push('{ "id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(c==a.id?' "select":"1",':"")+' "text":"'+e+'"'+(this.XMLsource&&0==a.XMLload?', "child":"1" ':""));if(this._xuserData&&a._userdatalist){b.push(', "userdata":[');for(var c=a._userdatalist.split(","),e=[],g=0;g<c.length;g++)e.push('{ "name":"'+c[g]+'" , "content":"'+a.userData["t_"+c[g]]+'" }');b.push(e.join(","));b.push("]")}if(a.childsCount){b.push(', "item":[');e=[];for(g=0;g<a.childsCount;g++)e.push(this._serializeItemJSON(a.childNodes[g]));b.push(e.join(","));b.push("]\n")}b.push("}\n");return b.join("")};function dhtmlXTreeView(a){var b=this;if("object"!=typeof a||null!=a.tagName)a={parent:a,clear:!0};this.base="string"==typeof a.parent?document.getElementById(a.parent):a.parent;if(this.base!=document.body)for(;0<this.base.childNodes.length;)this.base.removeChild(this.base.lastChild);this.conf={skin:a.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtreeview")||"material",tree_id:window.dhx4.newId(),ofs:{w:1,h:0},adjust_base:!1,icons:this.icons["string"==typeof a.iconset&&null!=this.icons[a.iconset]&&1==this.icons[a.iconset].r?a.iconset:"tree_native"],autoload:{url:null,mode:"id"},selected:{},ud:{},idx:{sign:0,icon:1,text:2},silent:!1,is_mac:null!=navigator.platform.match(/^mac/i)&&"function"==typeof window.addEventListener,mac_cmd_key:!1};this.setSkin(this.conf.skin);this.cont=document.createElement("DIV");this.cont.className="dhxtreeview_cont";this.base.appendChild(this.cont);this.area=document.createElement("DIV");this.area.className="dhxtreeview_area";this.cont.appendChild(this.area);this.cont.onclick=function(a){a=a||event;b.callEvent("_onTreeClick",[a,{stop:!1}])};this.cont.ondblclick=function(a){a=a||event;a=a.target||a.srcElement;null!=a.className.match(/dhxtreeview_item_label/)&&b._openCloseItem(a.parentNode.parentNode._itemId,!0)};this.items={};this._addItem=function(a,b,c,e){var g=null!=b?this.items[b].level+1:1,h=document.createElement("DIV");h.className="dhxtreeview_item";h.innerHTML="\x3cdiv class\x3d'dhxtreeview_item_text'\x3e\x3c/div\x3e";null!=e&&0>e&&(c.index=0);if(null==b)var l=this.area;else 0==this.items[b].kids&&this._initKidsNode(b),this.items[b].kids_request=!1,l=this.items[b].item.lastChild.firstChild;null!=e&&null!=l.childNodes[e]?l.insertBefore(h,l.childNodes[e]):l.appendChild(h);l=null;h._itemId=a;h._treeId=this.conf.tree_id;1==window.dhx4.isIE&&(h.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1});this.items[a]={id:a,pId:b,treeId:this.conf.tree_id,text:c.text,item:h,level:g,kids:!1,opened:window.dhx4.s2b(c.open),userdata:window.dhx4._copyObj(c.userdata||{}),half_opened:!1};this.callEvent("_onItemRendered",[a,c]);h.firstChild.innerHTML=this._getItemHtml(a);h=null;1==window.dhx4.s2b(c.select)&&this._setSelected(a,!0);this.callEvent("_onItemInited",[a,c])};this.addItem=function(a,b,c,e){null==this.items[a]&&(null!=c&&null==this.items[c]&&(c=null),this._addItem(a,c,{text:b},e),this._callPublicEvent("onAddItem",[a,b,c,e]))};this._removeSingleItem=function(a){1==window.dhx4.isIE&&(this.items[a].item.onselectstart=null);this.items[a].item.parentNode.removeChild(this.items[a].item);for(var b in this.items[a])this.items[a][b]=null,delete this.items[a][b];delete this.items[a];1==this.conf.selected[a]&&delete this.conf.selected[a]};this._removeItem=function(a){var b=this.items[a].pId,c=-1,e;for(e in this.items)this.items[e].pId==a&&this._removeItem(e),this.items[e].pId==b&&c++;null!=a&&this._removeSingleItem(a);b&&!c&&this._clearKidsNode(b)};this.deleteItem=function(a){null!=this.items[a]&&this._callPublicEvent("onBeforeDeleteItem",[a])&&(this._removeItem(a),this._callPublicEvent("onDeleteItem",[a]))};this.clearAll=function(){this._removeItem(null);1!=this.conf.unloading&&this._fixAreaWidth()};this._initKidsNode=function(a){var b;null==this.items[a].item.lastChild.className.match(/dhxtreeview_kids_cont/)&&(b=document.createElement("DIV"),b.className="dhxtreeview_kids_cont",b.innerHTML="\x3cdiv style\x3d'position:relative;'\x3e\x3c/div\x3e",b.style.opacity="1",1!=this.items[a].opened&&(0!=this.conf.transProp?(b.style.height="0px",b.style.opacity="0",b.firstChild.style.display="none"):b.style.display="none"),this.items[a].item.appendChild(b));this.items[a].kids=!0;this._iconUpdate(a);this._signUpdate(a)};this._clearKidsNode=function(a){null!=this.items[a].item.lastChild.className.match(/dhxtreeview_kids_cont/)&&this.items[a].item.removeChild(this.items[a].item.lastChild);this.items[a].kids=!1;this._iconUpdate(a);this._signUpdate(a)};this.openItem=function(a,b){1!=this.items[a].opened&&("undefined"==typeof b&&(b=!0),this._openCloseItem(a,b))};this.closeItem=function(a,b){1==this.items[a].opened&&("undefined"==typeof b&&(b=!0),this._openCloseItem(a,b))};this._openCloseItem=function(a,c){if(!0===this.callEvent("_onBeforeOpen",[a])){if(1!=this.items[a].kids&&1!=this.items[a].kids_request)return!1;1==this.items[a].half_opened?(this.items[a].half_opened=!1,this._signUpdate(a)):c&&0!=this.conf.transProp?(this.items[a].transEv||(this.items[a].item.lastChild.addEventListener(this.conf.transEv,this._doOnTrEnd),this.items[a].transEv=!0),1==this.items[a].opened?(this.items[a].transMode="close",this.items[a].item.lastChild.style.overflow="hidden",this.items[a].item.lastChild.style.height=this.items[a].item.lastChild.childNodes[0].offsetHeight+"px",window.setTimeout(function(){b.items[a].item.lastChild.style[b.conf.transProp]=b.conf.transValueHeight;b.items[a].item.lastChild.style.height="0px";b.items[a].item.lastChild.style.opacity="0";b.items[a].opened=!1;b._iconUpdate(a);b._signUpdate(a)},50)):(this.items[a].transMode="open",this.items[a].item.lastChild.style[this.conf.transProp]=this.conf.transValueHeight,this.items[a].item.lastChild.childNodes[0].style.display="",this.items[a].item.lastChild.style.overflow="hidden",this.items[a].item.lastChild.style.height=this.items[a].item.lastChild.childNodes[0].offsetHeight+"px",this.items[a].item.lastChild.style.opacity="1",this.items[a].opened=!0,this._iconUpdate(a),this._signUpdate(a))):(this.items[a].opened=!this.items[a].opened,this.items[a].item.lastChild.style.display=1==this.items[a].opened?"":"none",this.items[a].item.lastChild.childNodes[0].style.display=this.items[a].item.lastChild.style.display,this.items[a].item.lastChild.style.height=1==this.items[a].opened?"":"0px",this.items[a].item.lastChild.style.opacity=1==this.items[a].opened?1:0,this._iconUpdate(a),this._signUpdate(a),this._fixAreaWidth())}};this._doOnTrEnd=function(){var a=this.parentNode._itemId;b.items[a].item.lastChild.style[b.conf.transProp]="";"close"==b.items[a].transMode?b.items[a].item.lastChild.childNodes[0].style.display="none":(b.items[a].item.lastChild.style.height="",b.items[a].item.lastChild.style.overflow="");b._fixAreaWidth()};this.setSizes=function(){1==this.conf.adjust_base&&(this.base.style.width=this.base.parentNode.clientWidth-2+"px",this.base.style.height=this.base.parentNode.clientHeight-2+"px");this.cont.style.left=this.conf.ofs.w+"px";this.cont.style.top=this.conf.ofs.h+"px";this.cont.style.width=this.base.clientWidth-2*this.conf.ofs.w+"px";this.cont.style.height=this.base.clientHeight-2*this.conf.ofs.h+"px";this._fixAreaWidth()};this._fixAreaWidth=function(a){this.area.style.width="100%";this.cont.scrollWidth!=this.cont.clientWidth&&(this.area.style.width=this.cont.scrollWidth+1+"px");1==window.dhx4.isIE7&&!1!==a&&window.setTimeout(function(){b._fixAreaWidth(!1)},1)};this.setSizes();dhx4._eventable(this);var c=window.dhx4.transDetect();this.conf.transProp=c.transProp;this.conf.transEv=c.transEv;this.conf.transValueHeight="height 0.15s";c=null;1==this.conf.is_mac&&(this._macOnKey=function(a){if((window.dhx4.isKHTML||window.dhx4.isChrome||window.dhx4.isOpera)&&(91==a.keyCode||93==a.keyCode)||window.dhx4.isFF&&224==a.keyCode)b.conf.mac_cmd_key="keydown"==a.type},window.addEventListener("keydown",this._macOnKey,!1),window.addEventListener("keyup",this._macOnKey,!1));for(var e in this.modules)if(null!=this.modules[e].init)this[this.modules[e].init](a);this.unload=function(){this.conf.unloading=!0;this.cont.onclick=null;this.cont.ondblclick=null;this.clearAll();1==this.conf.is_mac&&(window.removeEventListener("keydown",this._macOnKey,!1),window.removeEventListener("keyup",this._macOnKey,!1));for(var a in this.modules)if(null!=this.modules[a].unload)this[this.modules[a].unload]();this.area.parentNode.removeChild(this.area);this.area=null;this.cont.parentNode.removeChild(this.cont);this.cont=null;this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"");window.dhx4._eventable(this,"clear");for(a in this)this[a]=null;b=null};null==a.items&&null==a.json&&null==a.xml||this.loadStruct(a.items||a.json||a.xml,a.onload);return this}dhtmlXTreeView.prototype.modules={};dhtmlXTreeView.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"")+" dhxtreeview_"+a;this.conf.skin=a;this.conf.icon_width=dhx4.readFromCss("dhxtreeview_"+this.conf.skin+" dhxtreeview_icon_width");this.conf.ofs="dhx_skyblue"==this.conf.skin?{w:1,h:0}:{w:0,h:0}};dhtmlXTreeView.prototype.setItemText=function(a,b){null!=this.items[a]&&(this.items[a].text=b,this.items[a].item.firstChild.childNodes[this.conf.idx.text].innerHTML=b,this._callPublicEvent("onTextChange",[a,b]))};dhtmlXTreeView.prototype.getItemText=function(a){return this.items[a].text};dhtmlXTreeView.prototype.getParentId=function(a){return this.items[a].pId};dhtmlXTreeView.prototype.getSubItems=function(a){var b=[],c;for(c in this.items)this.items[c].pId==a&&b.push(c);return b};dhtmlXTreeView.prototype._refreshItemHtml=function(a,b,c){this.items[a].item.firstChild.innerHTML=this._getItemHtml(a);1==b&&this._signUpdate(a);1==c&&this._iconUpdate(a)};dhtmlXTreeView.prototype._getItemHtml=function(a){var b=[],c=0,e;for(e in this.conf.idx){var g=this["_itemHtml_"+e](a,c);!1!==g.nodeText&&(b.push(g.nodeText),c+=g.nodeIndex)}return b.join("")};dhtmlXTreeView.prototype._getIconOfs=function(a,b){return(this.items[a].level-1+b)*this.conf.icon_width};dhtmlXTreeView.prototype._itemHtml_text=function(a,b){return{nodeIndex:1,nodeText:"\x3cdiv class\x3d'dhxtreeview_item_label' style\x3d'left:"+this._getIconOfs(a,b)+"px;'\x3e"+this.items[a].text+"\x3c/div\x3e"}};dhtmlXTreeView.prototype.setUserData=function(a,b,c){(a=this.items[a])&&(a.userdata[b]=c)};dhtmlXTreeView.prototype.getUserData=function(a,b){var c=this.items[a];return c&&!b?c.userdata:c?c.userdata[b]||null:null};dhtmlXTreeView.prototype.silent=function(a){this.conf.silent=!0;"function"==typeof a&&a.apply(window,[this]);this.conf.silent=!1};dhtmlXTreeView.prototype._callPublicEvent=function(){return 0==this.conf.silent?this.callEvent.apply(this,arguments):!0};"function"==typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachTreeView=function(a){this.callEvent("_onBeforeContentAttach",["treeview"]);var b=document.createElement("DIV");b.style.position="relative";b.style.overflow="hidden";b.style.width="100%";b.style.height="100%";this._attachObject(b);var c={parent:b,skin:this.conf.skin};if(null!=a&&"object"==typeof a)for(var e in a)"undefined"==typeof c[e]&&(c[e]=a[e]);this.dataType="treeview";this.dataObj=new dhtmlXTreeView(c);"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(b.className+=" dhxtreeview_with_border",this.dataObj.conf.adjust_base=!0,this.dataObj.setSizes());c.parent=null;this.callEvent("_onContentAttach",[]);return this.dataObj});dhtmlXTreeView.prototype.modules.chbx={init:"_chbxInit"};dhtmlXTreeView.prototype.enableCheckboxes=function(a){a=1==a;if(this.conf.enable_chbx!=a){this.conf.enable_chbx=a;this._chbxUpdIndex();for(var b in this.items)this._refreshItemHtml(b,!0,!0)}};dhtmlXTreeView.prototype.getAllChecked=function(a){return this._chbxGetCheckedBranch(a,!0)};dhtmlXTreeView.prototype.getAllUnchecked=function(a){return this._chbxGetCheckedBranch(a,!1)};dhtmlXTreeView.prototype.checkItem=function(a){this._chbxSetChecked(a,!0,!0)};dhtmlXTreeView.prototype.uncheckItem=function(a){this._chbxSetChecked(a,!1,!0)};dhtmlXTreeView.prototype.isItemChecked=function(a){return null==this.items[a]?null:1==this.items[a].checked};dhtmlXTreeView.prototype.enableCheckbox=function(a){this._chbxSetEnabled(a,!0)};dhtmlXTreeView.prototype.disableCheckbox=function(a){this._chbxSetEnabled(a,!1)};dhtmlXTreeView.prototype.isCheckboxEnabled=function(a){return 1==this.items[a].chbx_enabled};dhtmlXTreeView.prototype.showCheckbox=function(a){this._chbxSetVisible(a,!0)};dhtmlXTreeView.prototype.hideCheckbox=function(a){this._chbxSetVisible(a,!1)};dhtmlXTreeView.prototype.isCheckboxVisible=function(a){return 1==this.items[a].chbx_visible};dhtmlXTreeView.prototype._chbxInit=function(a){this.enableCheckboxes(a.checkboxes);this.attachEvent("_onItemRendered",function(a,c){this.items[a].checked=window.dhx4.s2b(c.checked);var b=c.checkbox||"enabled,visible";this.items[a].chbx_enabled=null==b.match(/disabled/);this.items[a].chbx_visible=null==b.match(/hidden/)});this.attachEvent("_onTreeClick",function(a,c){if(1==this.conf.enable_chbx){var b=a.target||a.srcElement;"i"==b.tagName.toLowerCase()&&(b=b.parentNode);null!=(b.parentNode.className||"").match(/dhxtreeview_item_text/)&&b==b.parentNode.childNodes[this.conf.idx.chbx]&&(b=b.parentNode.parentNode._itemId,1==this.items[b].chbx_enabled&&this._chbxSetChecked(b,!this.items[b].checked,!0),c.stop=!0)}});a=null};dhtmlXTreeView.prototype._itemHtml_chbx=function(a,b){var c={nodeIndex:0,nodeText:!1};1==this.conf.enable_chbx&&(1==this.items[a].chbx_visible&&(c.nodeIndex=1),c.nodeText="\x3cdiv class\x3d'dhxtreeview_item_icon' style\x3d'left:"+this._getIconOfs(a,b)+"px;"+(0<c.nodeIndex?"":"display:none;")+"'\x3e"+this._chbxGenIcon(a)+"\x3c/div\x3e");return c};dhtmlXTreeView.prototype._chbxSetChecked=function(a,b){1==this.conf.enable_chbx&&(b=1==b,this.items[a].checked!=b&&!0===this._callPublicEvent("onBeforeCheck",[a,1==this.items[a].checked])&&(this.items[a].checked=b,this.items[a].item.childNodes[0].childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(a),this._callPublicEvent("onCheck",[a,b])))};dhtmlXTreeView.prototype._chbxSetEnabled=function(a,b){this.items[a].chbx_enabled!=b&&(this.items[a].chbx_enabled=b,this.items[a].item.firstChild.childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(a))};dhtmlXTreeView.prototype._chbxSetVisible=function(a,b){this.items[a].chbx_visible!=b&&(this.items[a].chbx_visible=b,this._refreshItemHtml(a,!0,!0))};dhtmlXTreeView.prototype._chbxGenIcon=function(a){return'\x3ci class\x3d"'+this.conf.icons.prefix+" "+this.conf.icons["chbx_"+(this.items[a].chbx_enabled?"":"dis_")+(this.items[a].checked?"1":"0")]+'"\x3e\x3c/i\x3e'};dhtmlXTreeView.prototype._chbxUpdIndex=function(){this.conf.idx=1==this.conf.enable_chbx?{sign:0,chbx:1,icon:2,text:3}:{sign:0,icon:1,text:2}};dhtmlXTreeView.prototype._chbxGetCheckedBranch=function(a,b){var c=[],e;for(e in this.items)this.items[e].pId==a&&(this.items[e].checked==b&&c.push(e),1==this.items[e].kids&&(c=c.concat(this._chbxGetCheckedBranch(e,b))));return c};dhtmlXTreeView.prototype.modules.sign={init:"_signInit"};dhtmlXTreeView.prototype._signInit=function(){this.attachEvent("_onTreeClick",function(a,b){if(1!=b.stop){var c=a.target||a.srcElement;"i"==c.tagName.toLowerCase()&&(c=c.parentNode);null!=(c.parentNode.className||"").match(/dhxtreeview_item_text/)&&c==c.parentNode.childNodes[this.conf.idx.sign]&&(this._openCloseItem(c.parentNode.parentNode._itemId,!0),b.stop=!0)}})};dhtmlXTreeView.prototype._signUpdate=function(a){a=this.items[a];a.item.childNodes[0].childNodes[this.conf.idx.sign].innerHTML=1==a.kids||1==a.kids_request?'\x3ci class\x3d"'+this.conf.icons.prefix+" "+this.conf.icons[a.opened||a.half_opened?"minus":"plus"]+'"\x3e\x3c/i\x3e':""};dhtmlXTreeView.prototype._itemHtml_sign=function(a,b){return{nodeIndex:1,nodeText:"\x3cdiv class\x3d'dhxtreeview_item_icon' style\x3d'left:"+this._getIconOfs(a,b)+"px;'\x3e\x3c/div\x3e"}};dhtmlXTreeView.prototype.modules.selection={init:"_selectionInit"};dhtmlXTreeView.prototype.selectItem=function(a){if(1==this.conf.msel){var b={};a instanceof Array||(a=[a]);for(var c=0;c<a.length;c++)b[a[c]]=!0;for(var e in this.conf.selected)1==b[e]?delete b[e]:this._setSelected(e,!1);for(e in b)this._setSelected(e,!0)}else null==a||1==this.conf.selected[a]||a instanceof Array||0==this._clearSelection(a)&&this._setSelected(a,!0)};dhtmlXTreeView.prototype.unselectItem=function(a){if(1==this.conf.msel){a instanceof Array||(a=[a]);for(var b=0;b<a.length;b++)1==this.conf.selected[a[b]]&&this._setSelected(a[b],!1)}else null!=a&&this._setSelected(a,!1)};dhtmlXTreeView.prototype.getSelectedId=function(){var a=[],b;for(b in this.conf.selected)a.push(b);return this.conf.msel?a:a[0]||null};dhtmlXTreeView.prototype.enableMultiselect=function(a){a=1==a;this.conf.msel!=a&&(this._clearSelection(),this.conf.msel=a)};dhtmlXTreeView.prototype._selectionInit=function(a){this.conf.msel=window.dhx4.s2b(a.multiselect);this.attachEvent("_onTreeClick",function(a,c){if(1!=c.stop){var b=a.target||a.srcElement;"i"==b.tagName.toLowerCase()&&(b=b.parentNode);var g=null;null!=b.className.match(/dhxtreeview_item_label/)?g=b.parentNode.parentNode._itemId:null!=b.className.match(/^dhxtreeview_item_text/)?g=b.parentNode._itemId:null!=b.className.match(/^dhxtreeview_item_icon/)&&(g=b.parentNode.parentNode._itemId);null!=g&&(1==this.conf.msel?1!=a.ctrlKey&&1!=this.conf.mac_cmd_key||0!=a.shiftKey||0!=a.altKey?0==a.ctrlKey&&0==a.shiftKey&&0==a.altKey&&0==this.conf.mac_cmd_key&&0==this._clearSelection(g)&&this._setSelected(g,!0):this._setSelected(g,!this._isSelected(g)):0==this._clearSelection(g)&&this._setSelected(g,!0))}})};dhtmlXTreeView.prototype._setSelected=function(a,b){1==b?1!=this.conf.selected[a]&&(this.items[a].item.childNodes[0].className+=" dhxtreeview_item_text_selected",this.conf.selected[a]=!0,this._callPublicEvent("onSelect",[a,!0])):1==this.conf.selected[a]&&(this.items[a].item.childNodes[0].className=String(this.items[a].item.childNodes[0].className).replace(/\s*dhxtreeview_item_text_selected/gi,""),delete this.conf.selected[a],this._callPublicEvent("onSelect",[a,!1]))};dhtmlXTreeView.prototype._clearSelection=function(a){var b=!1,c;for(c in this.conf.selected)null!=a&&c==a?b=!0:this._setSelected(c,!1);return b};dhtmlXTreeView.prototype._isSelected=function(a){return 1==this.conf.selected[a]};dhtmlXTreeView.prototype.modules.icons={init:"_iconModuleInit"};dhtmlXTreeView.prototype.setItemIcons=function(a,b){if(null==b&&null!=this.items[a].icons)delete this.items[a].icons;else if(null!=b){null==this.items[a].icons&&(this.items[a].icons={});for(var c in b)null!=b[c]?this.items[a].icons[c]=b[c]:null==b[c]&&null!=this.items[a].icons[c]&&delete this.items[a].icons[c]}this._iconUpdate(a)};dhtmlXTreeView.prototype.setIconColor=function(a,b){var c=this.items[a].item.firstChild.childNodes[this.conf.idx.icon].firstChild;null==b?null!=this.items[a].icon_color&&(delete this.items[a].icon_color,c.style.color="inherit"):this.items[a].icon_color!=b&&(this.items[a].icon_color=b,c.style.color=b)};dhtmlXTreeView.prototype.setIconset=function(a){null!=this.icons[a]&&1==this.icons[a].r&&(this.conf.icons=this.icons[a])};dhtmlXTreeView.prototype._iconModuleInit=function(){this.attachEvent("_onItemRendered",function(a,b){null!=b.icons&&(this.items[a].icons=b.icons);null!=b.icon_color&&(this.items[a].icon_color=b.icon_color)})};dhtmlXTreeView.prototype._iconConf=function(a){a=this.items[a].icons||{};for(var b in{folder_opened:1,folder_closed:1,file:1})"undefined"==typeof a[b]&&(a[b]=this.conf.icons[b]);return a};dhtmlXTreeView.prototype._iconHtml=function(a,b){var c=['class\x3d"'+this.conf.icons.prefix+" "+b+'"'];null!=this.items[a].icon_color&&c.push('style\x3d"color:'+this.items[a].icon_color+';"');return"\x3ci "+c.join(" ")+"\x3e\x3c/i\x3e"};dhtmlXTreeView.prototype._itemHtml_icon=function(a,b){return{nodeIndex:1,nodeText:"\x3cdiv class\x3d'dhxtreeview_item_icon' style\x3d'left:"+this._getIconOfs(a,b)+"px;'\x3e"+this._iconHtml(a,this._iconConf(a).file)+"\x3c/div\x3e"}};dhtmlXTreeView.prototype._iconUpdate=function(a){var b=this.items[a],c=this._iconConf(a);b.item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML=this._iconHtml(a,1==b.kids||1==b.kids_request?c[b.opened?"folder_opened":"folder_closed"]:c.file)};dhtmlXTreeView.prototype.icons={tree_native:{r:!0,prefix:"dhxtreeview_icon",plus:"dhxtreeview_icon_plus",minus:"dhxtreeview_icon_minus",file:"dhxtreeview_icon_file",folder_opened:"dhxtreeview_icon_folder_opened",folder_closed:"dhxtreeview_icon_folder_closed",loading:"dhxtreeview_icon_loading",chbx_0:"dhxtreeview_icon_chbx_0",chbx_1:"dhxtreeview_icon_chbx_1",chbx_dis_0:"dhxtreeview_icon_chbx_dis_0",chbx_dis_1:"dhxtreeview_icon_chbx_dis_1"},font_awesome:{r:!(1==window.dhx4.isIE6||1==window.dhx4.isIE7),prefix:"fa",plus:"fa-caret-right",minus:"fa-caret-down",file:"fa-file-o",folder_opened:"fa-folder-open-o",folder_closed:"fa-folder-o",loading:"fa-refresh fa-spin",chbx_0:"fa-square-o",chbx_1:"fa-check-square-o",chbx_dis_0:"fa-square-o dhx-disabled",chbx_dis_1:"fa-check-square-o dhx-disabled"}};dhtmlXTreeView.prototype.modules.loading={init:"_loadingInit",unload:"_loadingUnload"};dhtmlXTreeView.prototype._loadingInit=function(a){window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tree",{struct:!0});this.conf.root_id="undefined"==typeof a.root_id||null==a.root_id?"0":a.root_id;this._dhxdataload.onBeforeXLS=function(a){null==this.conf.autoload.url&&(this.conf.autoload.url=a);return{url:a.replace(/\{id\}/gi,this.conf.root_id)}}};dhtmlXTreeView.prototype._loadingUnload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear")};dhtmlXTreeView.prototype._initObj=function(a,b,c,e){for(b=0;b<a.length;b++){var g=a[b].id;null==g&&(g="dhxtreeview_id_"+window.dhx4.newId());null==this.items[g]&&this._addItem(g,c,a[b]);null!=a[b].items&&this._initObj(a[b].items,null,g,!0)}1!=e&&this._fixAreaWidth()};dhtmlXTreeView.prototype._xmlToObj=function(a,b){1!=b&&(a=a.getElementsByTagName("tree")[0]);for(var c=[],e=0;e<a.childNodes.length;e++){var g=a.childNodes[e];if("item"==(g.tagName||"").toLowerCase()){for(var h={},l=0;l<g.attributes.length;l++)h[g.attributes[l].name]=g.attributes[l].value;if(0<g.childNodes.length)for(b=this._xmlToObj(g,!0),0<b.length&&(h.items=b),l=0;l<g.childNodes.length;l++){var m=(g.childNodes[l].tagName||"").toLowerCase();if(1=={icons:1,userdata:1}[m]){null==h[m]&&(h[m]={});for(var n=0;n<g.childNodes[l].attributes.length;n++){var q=g.childNodes[l].attributes[n].name;null==h[m][q]&&(h[m][q]=g.childNodes[l].attributes[n].value)}}n2=null}c.push(h)}}return c};dhtmlXTreeView.prototype.modules.dnd={init:"_dndInit",unload:"_dndUnload"};dhtmlXTreeView.prototype.enableDragAndDrop=function(a){this.conf.enable_dnd=window.dhx4.s2b(a)};dhtmlXTreeView.prototype._dndInit=function(a){var b=this;this.enableDragAndDrop(a.dnd);this.conf.dnd=null;this._dndOnMouseDown=function(a){if(1==b.conf.enable_dnd){a=a||event;if("undefined"!=typeof a.button&&2<=a.button)return!1;for(var c=null,g=null,h=a.target||a.srcElement,l=window.dhx4.absLeft(h)+("undefined"==typeof a.offsetX?a.layerX:a.offsetX)-a.clientX,m=window.dhx4.absTop(h)+("undefined"==typeof a.offsetY?a.layerY:a.offsetY)-a.clientY;null!=h&&h!=b.cont;)null!=(h.className||"").match(/dhxtreeview_item/)&&null!=h._itemId?(c=h._itemId,g=h._treeId,h=null):h=h.parentNode;null!=c&&(b.conf.dnd={inited:!1,id:c,treeId:g,selected:1==b.conf.selected[c],tid:null,drop:{},x:a.clientX,y:a.clientY,ofs_x:l,ofs_y:m,zi:window.dhx4.newId(),scroll:!1,scroll_ofs:5,scroll_time:30,scroll_tm:null,kids:{},idx:{}},b._dndInitEvents())}};this._dndOnMouseMove=function(a){a=a||event;if(1!=b.conf.dnd.inited)if(15<=Math.abs(b.conf.dnd.x-a.clientX)||15<=Math.abs(b.conf.dnd.y-a.clientY)){if(!0!==b._callPublicEvent("onBeforeDrag",[b.conf.dnd.id]))return;b.conf.dnd.inited=!0;b.cont.className+=" dhxtreeview_dnd_mode";b._dndInitDraggedObj();b._dndCollectKids(b.conf.dnd.id);b._dndCollectIndexes(b.area);0==b._clearSelection(b.conf.dnd.id)&&b._setSelected(b.conf.dnd.id,!0);b.items[b.conf.dnd.id].item.className+=" dhxtreeview_item_dragged";document.body.className+=" dhxtreeview_dnd_mode";b.conf.dnd.cont={x1:window.dhx4.absLeft(b.base),y1:window.dhx4.absTop(b.base)};b.conf.dnd.cont.x2=b.conf.dnd.cont.x1+b.base.offsetWidth;b.conf.dnd.cont.y2=b.conf.dnd.cont.y1+b.base.offsetHeight}else return;b.conf.dnd.x=a.clientX;b.conf.dnd.y=a.clientY;b._dndAdjustDraggedObj();var c=!0;b.cont.scrollHeight>b.cont.clientHeight&&b.conf.dnd.x>=b.conf.dnd.cont.x1&&b.conf.dnd.x<=b.conf.dnd.cont.x2&&(0<b.cont.scrollTop&&b.conf.dnd.y>=b.conf.dnd.cont.y1&&b.conf.dnd.y<=b.conf.dnd.cont.y1+10?(b._dndScroll("up"),c=!1):b.cont.scrollTop+b.cont.clientHeight<b.cont.scrollHeight&&b.conf.dnd.y<=b.conf.dnd.cont.y2&&b.conf.dnd.y>=b.conf.dnd.cont.y2-10&&(b._dndScroll("down"),c=!1));1==c&&1==b.conf.dnd.scroll&&b._dndScroll("stop");var g=a.target||a.srcElement;if(null==g.parentNode||null==(g.parentNode.className||"").match(/dhxtreeview_kids_cont/)){var h=!1,l=c=null;null!=g.className&&(null!=g.className.match(/dhxtreeview_item_[li]/)?(c=g.parentNode.parentNode._itemId,l=g.parentNode.parentNode._treeId):null!=g.className.match(/dhxtreeview_item_[t]/)&&(c=g.parentNode._itemId,l=g.parentNode._treeId));if(null==c||l==b.conf.dnd.treeId){if(b.conf.dnd.id==c||1==b.conf.dnd.kids[c])c=null;if(null!=c){var m=b.items[c].item.firstChild.offsetHeight,m=Math.max(Math.floor(3*Math.min(a.layerY||a.offsetY,m)/m),0);0==m?b.items[c].item.previousSibling==b.items[b.conf.dnd.id].item&&(m=null):1==m?b.items[b.conf.dnd.id].pId==c?m=null:1==b.items[c].kids&&b.items[c].item.lastChild.firstChild.firstChild==b.items[b.conf.dnd.id].item&&(m=null):2==m&&(1==b.items[c].opened?m=null:b.items[c].item.nextSibling==b.items[b.conf.dnd.id].item&&(m=null));m!=b.conf.dnd.ofs&&(b.conf.dnd.ofs=m,h=!0)}c!=b.conf.dnd.tid&&(null!=b.conf.dnd.tid&&b._dndUpdateTargetCss(b.conf.dnd.tid,!1),null!=c&&(h=!0),b.conf.dnd.tid=c);1==h&&(a=!1,null!=m&&(h={id:b.conf.dnd.id,pId:b.items[c].pId||null,index:null,idxOfs:b.items[b.conf.dnd.id].pId==b.items[c].pId&&b.conf.dnd.idx[b.conf.dnd.id]<b.conf.dnd.idx[c]?-1:0},0==m||2==m?h.index=b.conf.dnd.idx[c]+(2==m?1:0)+h.idxOfs:1==m&&(h.pId=c,h.index=null==b.items[c].item.lastChild.className.match(/dhxtreeview_kids_cont/)?0:b.items[c].item.lastChild.firstChild.childNodes.length),b.conf.dnd.drop.id!=h.id||b.conf.dnd.drop.pId!=h.pId||b.conf.dnd.drop.index!=h.index)&&(b.conf.dnd.drop=h,!0===b._callPublicEvent("onDragOver",[b.conf.dnd.drop.id,b.conf.dnd.drop.pId,b.conf.dnd.drop.index])&&(a=!0)),1!=a&&(b.conf.dnd.ofs=null),b._dndUpdateTargetCss(c,a))}}};this._dndOnMouseUp=function(a){a=a||event;if(!("undefined"!=typeof a.button&&2<=a.button)){b._dndUnloadEvents();b._dndUnloadDraggedObj();1==b.conf.dnd.scroll&&b._dndScroll("stop");null!=b.cont.className.match(/dhxtreeview_dnd_mode/gi)&&(b.cont.className=String(b.cont.className).replace(/\s*dhxtreeview_dnd_mode/gi,""));null!=b.conf.dnd.tid&&b._dndUpdateTargetCss(b.conf.dnd.tid,!1);if(1==b.conf.dnd.inited&&(b.items[b.conf.dnd.id].item.className=String(b.items[b.conf.dnd.id].item.className).replace(/\s*dhxtreeview_item_dragged/gi,""),document.body.className=String(document.body.className).replace(/\s*dhxtreeview_dnd_mode/,""),null!=b.conf.dnd.tid&&null!=b.conf.dnd.ofs&&!0===b._callPublicEvent("onBeforeDrop",[b.conf.dnd.drop.id,b.conf.dnd.drop.pId,b.conf.dnd.drop.index]))){a=b.items[b.conf.dnd.id];var c=b.items[b.conf.dnd.tid],g=null!=a.pId?b.items[a.pId]:null,h;if(1==b.conf.dnd.ofs)h=!1,0==c.kids&&(b._initKidsNode(c.id),h=!0),c.item.lastChild.firstChild.appendChild(a.item),1==h&&b._openCloseItem(c.id,!1),a.pId=c.id,h=c.level+1-a.level;else if(0==b.conf.dnd.ofs||2==b.conf.dnd.ofs)0==b.conf.dnd.ofs?c.item.parentNode.insertBefore(a.item,c.item):null!=c.item.nextSibling?c.item.parentNode.insertBefore(a.item,c.item.nextSibling):c.item.parentNode.appendChild(a.item),a.pId=c.pId,h=c.level-a.level;if(0!=h){b.conf.dnd.kids[a.id]=!0;for(var l in b.conf.dnd.kids)b.items[l].level+=h,b._refreshItemHtml(l,1==b.items[l].kids,!0)}null!=g&&1==g.kids&&0==g.item.lastChild.firstChild.childNodes.length&&(b._clearKidsNode(g.id),g.opened=!1);b._fixAreaWidth();b._callPublicEvent("onDrop",[b.conf.dnd.drop.id,b.conf.dnd.drop.pId,b.conf.dnd.drop.index])}window.dhx4.zim.clear(b.conf.dnd.zi);b.conf.dnd=null}};this._dndOnContextMenu=function(a){if(1==b.conf.dnd.inited)return a=a||event,a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),a.returnValue=!1};this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("oncontextmenu",this._dndOnContextMenu))};this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("oncontextmenu",this._dndOnContextMenu))};this._dndInitDraggedObj=function(){this.conf.dnd.dragged=document.createElement("DIV");this.conf.dnd.dragged.className="dhxtreeview_dragged_obj_"+this.conf.skin;this.conf.dnd.dragged.style.zIndex=window.dhx4.zim.reserve(this.conf.dnd.zi);document.body.appendChild(this.conf.dnd.dragged);this.conf.dnd.dragged.innerHTML=this.getItemText(this.conf.dnd.id)};this._dndAdjustDraggedObj=function(){this.conf.dnd.dragged.style.left=this.conf.dnd.x+this.conf.dnd.ofs_x+12+"px";this.conf.dnd.dragged.style.top=this.conf.dnd.y+this.conf.dnd.ofs_y+18+"px"};this._dndUnloadDraggedObj=function(){null!=this.conf.dnd.dragged&&(document.body.removeChild(this.conf.dnd.dragged),this.conf.dnd.dragged=null)};this._dndUpdateTargetCss=function(a,b){var c=this.items[a].item.childNodes[0];null==this.conf.dnd.ofs&&(b=!1);if(1==b){c.className=String(c.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs);if(null==c.nextSibling||null==c.nextSibling.className.match(/dhxtreeview_drop_preview/)){var e=document.createElement("DIV");e.className="dhxtreeview_drop_preview";e.style.left=c.lastChild.previousSibling.style.left;null==c.nextSibling?c.parentNode.appendChild(e):c.parentNode.insertBefore(e,c.nextSibling)}c.nextSibling.className=String(c.nextSibling.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs)}else null!=c.className.match(/dhxtreeview_drop_\d/)&&(c.className=String(c.className).replace(/\s*dhxtreeview_drop_\d/gi,""),null!=c.nextSibling&&null!=c.nextSibling.className.match(/dhxtreeview_drop_preview/)&&c.parentNode.removeChild(c.nextSibling))};this._dndCollectKids=function(a){for(var b in this.items)this.items[b].pId==a&&(this.conf.dnd.kids[b]=!0,1==this.items[b].kids&&this._dndCollectKids(b))};this._dndCollectIndexes=function(a){for(var b=0;b<a.childNodes.length;b++)this.conf.dnd.idx[a.childNodes[b]._itemId]=b,null!=a.childNodes[b].lastChild.className.match(/dhxtreeview_kids_cont/)&&this._dndCollectIndexes(a.childNodes[b].lastChild.firstChild)};this._dndScroll=function(a,e){if("stop"==a)1==b.conf.dnd.scroll&&(b.conf.dnd.scroll_tm&&window.clearTimeout(b.conf.dnd.scroll_tm),b.conf.dnd.scroll=!1);else{if(1==b.conf.dnd.scroll){if(1!=e)return}else b.conf.dnd.scroll=!0;var c=!1;"up"==a?(b.cont.scrollTop=Math.max(0,b.cont.scrollTop-b.conf.dnd.scroll_ofs),0==b.cont.scrollTop&&(c=!0)):(b.cont.scrollTop=Math.min(b.cont.scrollHeight-b.cont.clientHeight,b.cont.scrollTop+b.conf.dnd.scroll_ofs),b.cont.scrollTop+b.cont.clientHeight==b.cont.scrollHeight&&(c=!0));1!=c&&(b.conf.dnd.scroll_tm=window.setTimeout(function(){b._dndScroll(a,!0)},b.conf.dnd.scroll_time))}};"function"==typeof window.addEventListener?this.cont.addEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.attachEvent("onmousedown",this._dndOnMouseDown);this._dndUnload=function(){"function"==typeof window.addEventListener?this.cont.removeEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.detachEvent("onmousedown",this._dndOnMouseDown);b=null};a=null};dhtmlXTreeView.prototype.modules.ctx={init:"_ctxInit",unload:"_ctxUnload"};dhtmlXTreeView.prototype.enableContextMenu=function(a){this.conf.ctx=window.dhx4.s2b(a)};dhtmlXTreeView.prototype._ctxInit=function(a){var b=this;this._ctxCall=function(a){if(1==b.conf.ctx){a=a||event;var c=a.target||a.srcElement;"i"==c.tagName.toLowerCase()&&(c=c.parentNode);var g=c.parentNode._itemId||c.parentNode.parentNode._itemId,h=window.dhx4.absLeft(c)+("undefined"==typeof a.offsetX?a.layerX:a.offsetX),c=window.dhx4.absTop(c)+("undefined"==typeof a.offsetY?a.layerY:a.offsetY);if(null!=g&&!0!==b._callPublicEvent("onContextMenu",[g,h,c,a]))return a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1}};"function"==typeof window.addEventListener?this.cont.addEventListener("contextmenu",this._ctxCall,!1):this.cont.attachEvent("oncontextmenu",this._ctxCall);this._ctxUnload=function(){"function"==typeof window.addEventListener?this.cont.removeEventListener("contextmenu",this._ctxCall,!1):this.cont.detachEvent("oncontextmenu",this._ctxCall);b=null};this.enableContextMenu(a.context_menu)};dhtmlXTreeView.prototype.modules.dynload={init:"_dynLoadInit"};dhtmlXTreeView.prototype._dynLoadInit=function(){this.attachEvent("_onItemInited",function(a,b){this.items[a].kids_request=window.dhx4.s2b(b.kids);1==this.items[a].kids_request&&this._initKidsNode(a);if(1==this.items[a].opened&&1==this.items[a].kids_request){var c=this;window.setTimeout(function(){c._dynLoadRequest(a);c=null},100)}});this.attachEvent("_onBeforeOpen",function(a){return 1!=this.items[a].opened&&1==this.items[a].kids_request&&1!=this._dynLoadRequest(a)?(this.items[a].half_opened=!0,this._signUpdate(a),!1):!0})};dhtmlXTreeView.prototype._dynLoadRequest=function(a){if("function"==typeof this.conf.autoload.mode)return this.conf.autoload.mode.apply(window,[a]),!0;if(null!=this.conf.autoload.url){this._dhxdataload.onBeforeXLS=function(b){return{url:b.replace(/\{id\}/gi,a)}};var b=this;this.items[a].kids_loading_tm=window.setTimeout(function(){b._dynLoadUpdateIcon(a,!0);b=null},100);this.loadStruct(this.conf.autoload.url,function(){window.clearTimeout(this.items[a].kids_loading_tm);this._dynLoadUpdateIcon(a,!1);this.items[a].half_opened&&(this.items[a].half_opened=!1,this._openCloseItem(a,!0))});return this.items[a].kids_request=!1}};dhtmlXTreeView.prototype._dynLoadUpdateIcon=function(a,b){this.items[a].loading=1==b;1==this.items[a].loading?this.items[a].item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML="\x3ci class\x3d'"+this.conf.icons.prefix+" "+this.conf.icons.loading+"'\x3e\x3c/i\x3e":this._iconUpdate(a)};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};function dhtmlxArray(a){return dhtmlx.extend(a||[],dhtmlxArray._master)}dhtmlxArray._master={_dhx_find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},_dhx_insertAt:function(a,b){this[this.length]=null;for(var c=this.length-1;c>=a;c--)this[c]=this[c-1];this[a]=b},_dhx_removeAt:function(a){this.splice(a,1)},_dhx_swapItems:function(a,b){var c=this[a];this[a]=this[b];this[b]=c}};function dhtmlXGridObject(a){dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch();if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(c){}a?"object"==typeof a?(this.entBox=a,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(a):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid());this.entBox.innerHTML="";dhx4._eventable(this);var b=this;this._RaSeCol=[];this._wcorr=0;this.fontWidth=7;this.row=this.cell=null;this.iconURL="";this.editor=null;this._dclE=this._f2kE=!0;this.combos=[];this.defVal=[];this.rowsAr={};this.rowsBuffer=dhtmlxArray();this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=!0;this.xmlLoader=this.doLoadDetails;this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return!1};a=function(a){var b=document.createElement("TABLE");b.cellSpacing=b.cellPadding=0;b.style.cssText="width:100%;table-layout:fixed;";b.className=a.substr(2);return b};this.obj=a("c_obj");this.hdr=a("c_hdr");this.hdr.style.marginRight="20px";this.hdr.style.paddingRight="20px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this);this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height="25px";this.hdrBox.style.overflow="hidden";this.hdrBox.className="xhdr";this.preloadImagesAr=[];this.sortImg=document.createElement("DIV");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.cellWidthType=this.entBox.cellwidthtype||"px";this.delim=this.entBox.delimiter||",";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20;this.imgURL=window.dhx_globalImgPath||"";this.isActive=!1;this.isEditable=!0;this.pagingOn=this.useImagesInHeader=!1;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{b.destructor&&b.destructor()}catch(c){}});this.setSkin=function(a){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+a)+4;this.skin_name=a;this._imgURL&&this.setImagePath(this._imgURL);var b=this.entBox.className.split(" gridbox")[0];this.entBox.className=b+" gridbox gridbox_"+a+(_isIE?" isIE":" isModern");this.skin_h_correction=0;this.enableAlterCss("ev_"+a,"odd_"+a,this.isTreeGrid());this._fixAlterCss();switch(a){case "dhx_terrace":case "material":this._srdh=33;this.forceDivInHeader=!0;break;case "dhx_web":case "material":this.forceDivInHeader=!0;this._srdh=31;break;case "dhx_skyblue":this.forceDivInHeader=!0}_isIE&&this.hdr&&(a=this.hdr.parentNode,a.removeChild(this.hdr),a.appendChild(this.hdr));this.setSizes()};_isIE&&this.preventIECaching(!0);window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject);this._doOnScroll=function(a,b){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(a,b)};this.doOnScroll=function(a,e){var c=this.hdrBox;c._try_header_sync=!0;setTimeout(function(){c._try_header_sync=!1},2E3);this.hdrBox.scrollLeft=this.objBox.scrollLeft;this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft);!e&&this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){b._update_srnd_view&&b._update_srnd_view()},100))};this.attachToObject=function(a){a.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()};this.init=function(a){this.isTreeGrid()&&!this._h2&&(this._h2=this._createHierarchy(),this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null});if(this._hstyles){this.skin_name||this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"material");this.editStop();this.fldSorted=this.r_fldSorted=this.resized=this.lastClicked=null;this.cellWidthPX=[];this.cellWidthPC=[];if(0<this.hdr.rows.length){var c=this.xmlFileUrl;this.clearAll(!0);this.xmlFileUrl=c}for(var g=this.hdr.insertRow(0),c=0;c<this.hdrLabels.length;c++)g.appendChild(document.createElement("TH")),g.childNodes[c]._cellIndex=c,g.childNodes[c].style.height="0px";_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?g.style.position="absolute":g.style.height="auto";g=this.hdr.insertRow(_isKHTML?2:1);g._childIndexes=[];for(var h=0,c=0;c<this.hdrLabels.length;c++)g._childIndexes[c]=c-h,this.hdrLabels[c]==this.splitSign&&0!=c?(_isKHTML&&g.insertCell(c-h),g.cells[c-h-1].colSpan=(g.cells[c-h-1].colSpan||1)+1,g.childNodes[c-h-1]._cellIndex++,h++,g._childIndexes[c]=c-h):(g.insertCell(c-h),g.childNodes[c-h]._cellIndex=c,g.childNodes[c-h]._cellIndexS=c,this.setColumnLabel(c,this.hdrLabels[c]));0==h&&(g._childIndexes=null);this._cCount=this.hdrLabels.length;_isIE&&window.setTimeout(function(){b.setSizes&&b.setSizes()},1);this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));g=this.obj.firstChild;if(!g.firstChild)for(g.appendChild(document.createElement("TR")),g=g.firstChild,_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?g.style.position="absolute":g.style.height="auto",c=0;c<this.hdrLabels.length;c++)g.appendChild(document.createElement("TH")),g.childNodes[c].style.height="0px";this._c_order=null;1!=this.multiLine&&(this.obj.className+=" row20px");this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.className="dhxgrid_sort_desc";this.sortImg.defLeft=0;this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1;this._ivizcol&&this.setColHidden();this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();a&&this.parseXML();this.obj.scrollTop=0;this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this);this._initDrF&&this._initD();dhx4.callEvent("onGridCreated",[this])}};this.setColumnSizes=function(a){for(var b=0,c=[],h=0,l=0;l<this._cCount;l++)if("*"!=this.initCellWidth[l]||this._hrrar[l]){if("%"==this.cellWidthType){"undefined"==typeof this.cellWidthPC[l]&&(this.cellWidthPC[l]=this.initCellWidth[l]);var m=a*this.cellWidthPC[l]/100||0;.5<h&&(m++,h--);var n=this.cellWidthPX[l]=Math.floor(m),h=h+m-n}else"undefined"==typeof this.cellWidthPX[l]&&(this.cellWidthPX[l]=this.initCellWidth[l]);this._hrrar[l]||(b+=1*this.cellWidthPX[l])}else this._awdth=!1,c.push(l);if(c.length){h=Math.floor((a-b)/c.length);0>h&&(h=1);for(l=0;l<c.length;l++)m=Math.max(this._drsclmW?this._drsclmW[c[l]]||0:0,h),this.cellWidthPX[c[l]]=m,b+=m;a>b&&(c=c[c.length-1],this.cellWidthPX[c]+=a-b,b=a);this._setAutoResize()}this.obj.style.width=b+"px";this.hdr.style.width=b+"px";this.ftr&&(this.ftr.style.width=b+"px");this.chngCellWidth();return b};this.setSizes=function(){if(this.hdr.rows[0]){var a=this.quirks=_isIE&&"BackCompat"==document.compatMode,e=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){if(!this.globalBox.clientWidth)return;var g=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){this.globalBox.style.width=this._delta_x;var h=this.globalBox.clientWidth;this.entBox.style.width=Math.max(0,h+(a?2*g:0)-this._fake.entBox.clientWidth)+"px";h!=this._lastTimeSplitWidth&&(this._fake._correctSplit(this._fake.entBox.clientWidth),this._lastTimeSplitWidth=h)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(a?2*g:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*e+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);window.clearTimeout(this._sizeTime);if(this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth){var h=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||a?0:2,l=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||a?0:2;this._sizeFix&&(h-=this._sizeFix,l-=this._sizeFix);isVScroll=(this.type="vmdgrid",this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.parentNode.offsetHeight);var g=dhtmlx.$customScroll?0:18,m=this.entBox.clientWidth-(this.skin_h_correction||0)*(a?0:1)-h,h=this.entBox.clientWidth-(this.skin_h_correction||0)-h,n=this.entBox.clientHeight-l,q=this.setColumnSizes(h-(isVScroll?g:0)-(this._correction_x||0)),r=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX,l=this.hdr.clientHeight,v=this.ftr?this.ftr.clientHeight:0,u=n-l-v;this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(r=0);this._ahgr&&(u=this._ahgrMA?this.entBox.parentNode.clientHeight-l-v:this.obj.offsetHeight+(r?g:0)+(this._correction_y||0),this._ahgrM&&(u=this._ahgrF?Math.min(this._ahgrM,u+l+v)-l-v:Math.min(this._ahgrM,u)),isVScroll&&u>=this.obj.scrollHeight+(r?g:0)&&(isVScroll=!1,this.setColumnSizes(h-(this._correction_x||0))));this._awdth&&this._awdth[0]&&("%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(q+=this._fake.entBox.clientWidth),m=Math.min(Math.max(q+(isVScroll?g:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0),this.objBox.style.overflowX=!isVScroll&&this.objBox.scrollWidth<=m?"hidden":"auto",this._fake&&(m-=this._fake.entBox.clientWidth));u=Math.max(0,u);this._ff_size_delta=.1==this._ff_size_delta?.2:.1;_isFF||(this._ff_size_delta=0);this.dontSetSizes||(this.entBox.style.width=Math.max(0,m+(a?2:0)*e+this._ff_size_delta)+"px",this.entBox.style.height=u+(a?2:0)*e+l+v+"px");this.objBox.style.height=u+(a&&!isVScroll?2:0)*e+"px";this.hdrBox.style.height=l+"px";u!=n&&this.doOnScroll(0,!this._srnd);(a=this["setSizes_"+this.skin_name])&&a.call(this);this.setSortImgPos();l!=this.hdr.clientHeight&&this._ahgr&&this.setSizes();this.callEvent("onSetSizes",[])}else this._sizeTime=window.setTimeout(function(){b.setSizes&&b.setSizes()},250)}};this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var a=this._cCount,b=0;b<a;b++)this.hdr.rows[0].cells[b].style.width=this.cellWidthPX[b]+"px",this.obj.rows[0].childNodes[b].style.width=this.cellWidthPX[b]+"px",this.ftr&&(this.ftr.rows[0].cells[b].style.width=this.cellWidthPX[b]+"px")};this.setDelimiter=function(a){this.delim=a};this.setInitWidthsP=function(a,b){this.cellWidthType="%";this.initCellWidth=a.split(this.delim.replace(/px/gi,""));b||this._setAutoResize()};this._setAutoResize=function(){if(!this._realfake){var a=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(a._resize_timer);a._setAutoResize&&(a._resize_timer=window.setTimeout(function(){a.setSizes&&a.setSizes();a._fake&&a._fake._correctSplit()},100))});this._setAutoResize=function(){}}};this.setInitWidths=function(a){this.cellWidthType="px";this.initCellWidth=a.split(this.delim);if(_isFF)for(a=0;a<this.initCellWidth.length;a++)"*"!=this.initCellWidth[a]&&(this.initCellWidth[a]=parseInt(this.initCellWidth[a]))};this.enableMultiline=function(a){this.multiLine=dhx4.s2b(a)};this.enableMultiselect=function(a){this.selMultiRows=dhx4.s2b(a)};this.setImagesPath=this.setImagePath=function(a){this._imgURL=a=a.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/");this.imgURL=a+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/";this.iconTree=this.imgURL+"tree/"};this.setIconsPath=this.setIconPath=function(a){this.iconURL=a};this.changeCursorState=function(a){var b=a.target||a.srcElement;"TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD"));if(b){if("TD"==b.tagName&&this._drsclmn&&!this._drsclmn[b._cellIndex])return b.style.cursor="default";var c=(a.layerX||0)+(_isIE||"DIV"!=a.target.tagName?0:b.offsetLeft);b.offsetWidth-(a.offsetX||-1*(parseInt(this.getPosition(b,this.hdrBox))-c))<(_isOpera?20:10)?b.style.cursor="E-resize":b.style.cursor="default";_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}};this.startColResize=function(a){this.resized&&this.stopColResize();this.resized=null;var c=a.target||a.srcElement;"TD"!=c.tagName&&(c=this.getFirstParentOfType(c,"TD"));var g=a.clientX,h=this.hdr.offsetWidth,l=parseInt(c.offsetWidth);"TD"!=c.tagName||"default"==c.style.cursor||this._drsclmn&&!this._drsclmn[c._cellIndex]||(b._old_d_mm=document.body.onmousemove,b._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(a){b&&b.doColResize(a||window.event,c,l,g,h)},document.body.onmouseup=function(){b&&b.stopColResize()})};this.stopColResize=function(){document.body.onmousemove=b._old_d_mm||"";document.body.onmouseup=b._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])};this.doColResize=function(a,b,g,h,l){b.style.cursor="E-resize";this.resized=b;a=g+(a.clientX-h);if(this.callEvent("onResize",[b._cellIndex,a,this])){_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft);g=!1;if(1<b.colSpan){h=[];for(l=0;l<b.colSpan;l++)h[l]=Math.round(a*this.hdr.rows[0].childNodes[b._cellIndexS+l].offsetWidth/b.offsetWidth);for(l=0;l<b.colSpan;l++)g=this._setColumnSizeR(b._cellIndexS+1*l,h[l])}else g=this._setColumnSizeR(b._cellIndex,a);this.doOnScroll(0,1);this.setSizes();this._fake&&this._awdth&&this._fake._correctSplit();return g}};this._setColumnSizeR=function(a,b){if(b>(this._drsclmW&&!this._notresize?this._drsclmW[a]||10:10)){this.obj.rows[0].childNodes[a].style.width=b+"px";this.hdr.rows[0].childNodes[a].style.width=b+"px";this.ftr&&(this.ftr.rows[0].childNodes[a].style.width=b+"px");if("px"==this.cellWidthType)this.cellWidthPX[a]=b;else{var c=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(c-=17);this.cellWidthPC[a]=Math.round(b/c*100)}"none"!=this.sortImg.style.display&&this.setSortImgPos()}else return!1};this.setSortImgState=function(a,b,g,h){g=(g||"asc").toLowerCase();if(dhx4.s2b(a)){this.sortImg.className="asc"==g?"dhxgrid_sort_asc":"dhxgrid_sort_desc";this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[b];var c=this.hdr.rows[h||1];if(c){for(var e=0;e<c.childNodes.length;e++)if(c.childNodes[e]._cellIndexS==b)return this.r_fldSorted=c.childNodes[e],this.setSortImgPos();return this.setSortImgState(a,b,g,(h||1)+1)}}else this.sortImg.style.display="none",this.r_fldSorted&&(this.r_fldSorted.className=""),this.fldSorted=this.r_fldSorted=null};this.setSortImgPos=function(a,b,g,h){this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:a]||(this.ar_fldSorted&&(this.ar_fldSorted.className=""),h||(h=a?this.hdr.rows[g||0].cells[a]:this.r_fldSorted),null!=h&&(a=this.getPosition(h,this.hdrBox),g=h.offsetWidth,this.ar_fldSorted=h,h.className=this.sortImg.className+"_col",this.sortImg.style.left=Number(a[0]+g-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(a[1]+5)+"px",this.useImagesInHeader||b||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"))};this.setActive=function(a){0==arguments.length&&(a=!0);1==a?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))};this._doClick=function(a){var b=0,c=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(c&&c.parentNode&&c.parentNode.idd){if(this.markedCells){b=0;if(a.shiftKey||a.metaKey)b=1;a.ctrlKey&&(b=2);this.doMark(c,b);return!0}0!=this.selMultiRows&&(a.shiftKey&&null!=this.row&&this.selectedRows.length&&(b=1),a.ctrlKey||a.metaKey)&&(b=2);return this.doClick(c,!0,b,!1)}};this._doContClick=function(a){var b=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(!b||"undefined"==typeof b.parentNode.idd)return this.callEvent("onEmptyClick",[a]),!0;if(2==a.button||_isMacOS&&a.ctrlKey){if(!this.callEvent("onRightClick",[b.parentNode.idd,b._cellIndex,a]))return b=function(a){(a||event).cancelBubble=!0;return!1},(a.srcElement||a.target).oncontextmenu=b,b(a);if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[b.parentNode.idd,b._cellIndex,this]))return!0;_isIE&&(a.srcElement.oncontextmenu=function(){event.cancelBubble=!0;return!1});if(this._ctmndx.showContextMenu){var c=window.document.documentElement,h=window.document.body,h=[c.scrollLeft||h.scrollLeft,c.scrollTop||h.scrollTop];_isIE?(c=a.clientX+h[0],h=a.clientY+h[1]):(c=a.pageX,h=a.pageY);this._ctmndx.showContextMenu(c-1,h-1);this.contextID=this._ctmndx.contextMenuZoneId=b.parentNode.idd+"_"+b._cellIndex;this._ctmndx._skip_hide=!0}else b.contextMenuId=b.parentNode.idd+"_"+b._cellIndex,b.contextMenu=this._ctmndx,b.a=this._ctmndx._contextStart,b.a(b,a),b.a=null;a.cancelBubble=!0;return!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0};this.doClick=function(a,e,g,h){this.selMultiRows||(g=0);var c=this.row?this.row.idd:0;this.setActive(!0);g||(g=0);null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""));if("TD"==a.tagName){if(this.checkEvent("onSelectStateChanged"))var m=this.getSelectedId();var n=this.row;if(1==g){var q=this.rowsCol._dhx_find(a.parentNode),r=this.rowsCol._dhx_find(this.lastClicked);if(q>r)var v=r;else v=q,q=r;for(r=0;r<this.rowsCol.length;r++)if(r>=v&&r<=q)if(this.rowsCol[r]&&!this.rowsCol[r]._sRow)this.rowsCol[r].idd&&-1==this.rowsCol[r].className.indexOf("rowselected")&&this.callEvent("onBeforeSelect",[this.rowsCol[r].idd,c,a._cellIndex])&&(this.rowsCol[r].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[r]);else return this.clearSelection(),this.doClick(a,e,0,h)}else if(2==g&&-1!=a.parentNode.className.indexOf("rowselected")){a.parentNode.className=a.parentNode.className.replace(/rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(a.parentNode));var u=!0;h=!1}this.editStop();if("undefined"==typeof a.parentNode.idd)return!0;u||a.parentNode._sRow||(this.callEvent("onBeforeSelect",[a.parentNode.idd,c,a._cellIndex])?this.getSelectedRowId()!=a.parentNode.idd?(0==g&&this.clearSelection(),this.cell=a,n==a.parentNode&&this._chRRS&&(e=!1),this.row=a.parentNode,!1!==this.rowSelecteStates&&(this.row.className+=" rowselected"),-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=a,this.row=a.parentNode):e=!1);this.cell&&-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected");if(1!=g&&!this.row)return;this.lastClicked=a.parentNode;var x=this.row.idd,w=this.cell;e&&"undefined"!=typeof x&&w&&!u?b.onRowSelectTime=setTimeout(function(){b.callEvent&&b.callEvent("onRowSelect",[x,w._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[x]);this.checkEvent("onSelectStateChanged")&&(a=this.getSelectedId(),m!=a&&this.callEvent("onSelectStateChanged",[a,m]));if(u)return!1}this.isActive=!0;!1!==h&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)};this.selectAll=function(){this.clearSelection();var a=this.rowsBuffer;this.pagingOn&&(a=this.rowsCol);for(var b=0;b<a.length;b++)this.render_row(b).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(a));this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]);this._fake&&!this._realfake&&this._fake.selectAll()};this.selectCell=function(a,b,g,h,l,m){g||(g=!1);"object"!=typeof a&&(a=this.render_row(a));if(!a||-1==a)return null;(b=a._childIndexes?a.childNodes[a._childIndexes[b]]:a.childNodes[b])||(b=a.childNodes[0]);this.markedCells?this.doMark(b,h?2:0):h?this.doClick(b,g,3,m):this.doClick(b,g,0,m);l&&this.editCell()};this.moveToVisible=function(a,b){if(this.pagingOn){var c=Math.floor(this.getRowIndex(a.parentNode.idd)/this.rowsBufferOutSize)+1;c!=this.currentPage&&this.changePage(c)}try{if(a.offsetHeight){var e=a.offsetLeft+a.offsetWidth+20,c=0;e>this.objBox.offsetWidth+this.objBox.scrollLeft?a.offsetLeft>this.objBox.scrollLeft&&(c=a.offsetLeft-(this.objBox.offsetWidth-a.offsetWidth)+5):a.offsetLeft<this.objBox.scrollLeft&&(e-=2*a.offsetWidth/3,e<this.objBox.scrollLeft&&(c=a.offsetLeft-5));c&&!b&&(this.objBox.scrollLeft=c)}e=a.offsetHeight?a.offsetTop:this.rowsBuffer._dhx_find(this._realfake?this._fake.rowsAr[a.parentNode.idd]:a.parentNode)*this._srdh;if(e+a.offsetHeight+38>this.objBox.offsetHeight+this.objBox.scrollTop)var l=e;else e<this.objBox.scrollTop&&(l=e-5);l&&(this.objBox.scrollTop=l)}catch(m){}};this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){this.editStop();if(1!=this.isEditable||!this.cell)return!1;var a=this.cell;if(a.parentNode._locked)return!1;this.editor=this.cells4(a);if(null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),a.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}};this.editStop=function(a){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor)if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),a)a=this.editor.val,this.editor.detach(),this.editor.setValue(a),this.editor=null,this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,a]);else if(this.editor.detach()&&(this.cell.wasChanged=!0),a=this.editor,null!=a){this.editor=null;var b=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,a.getValue(),a.val]);if("string"==typeof b||"number"==typeof b)a[a.setImage?"setLabel":"setValue"](b);else if(!b)a[a.setImage?"setLabel":"setValue"](a.val);this._ahgr&&this.multiLine&&this.setSizes()}};this._nextRowCell=function(a,b,g){return(a=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(a),b))?a.childNodes[a._childIndexes?a._childIndexes[g]:g]:null};this._getNextCell=function(a,b,g){a=a||this.cell;var c=a.parentNode;this._tabOrder?(g=this._tabOrder[a._cellIndex],"undefined"!=typeof g&&(a=0>g?this._nextRowCell(c,b,Math.abs(g)-1):c.childNodes[g])):(g=a._cellIndex+b,0<=g&&g<this._cCount?(c._childIndexes&&(g=c._childIndexes[a._cellIndex]+b),a=c.childNodes[g]):a=this._nextRowCell(c,b,1==b?0:this._cCount-1));return a?"none"==a.style.display||this.smartTabOrder&&this.cells(a.parentNode.idd,a._cellIndex).isDisabled()?this._getNextCell(a,b):a:(1==b&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==b&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null)};this._nextRow=function(a,b){var c=this.render_row(a+b);return c&&-1!=c?c&&"none"==c.style.display?this._nextRow(a+b,b):c:null};this.scrollPage=function(a){if(this.rowsBuffer.length){var b=this._realfake?this._fake:this,c=Math.floor((b._r_select||this.getRowIndex(this.row.idd)||0)+a*this.objBox.offsetHeight/(this._srdh||20));0>c&&(c=0);c>=this.rowsBuffer.length&&(c=this.rowsBuffer.length-1);this._srnd&&!this.rowsBuffer[c]?(this.objBox.scrollTop+=Math.floor(a*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),b._r_select=c):(this.selectCell(c,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(c)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)),b._r_select=null)}};this.doKey=function(a){if(!a)return!0;if((a.target||a.srcElement).value!==window.undefined){var b=a.target||a.srcElement;if("dhxcombo_input"!=b.className&&(!b.parentNode||-1==b.parentNode.className.indexOf("editable")))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(a);if(0==this.isActive||this._htkebl)return!0;if(!this.callEvent("onKeyPress",[a.keyCode,a.ctrlKey,a.shiftKey,a]))return!1;b="k"+a.keyCode+"_"+(a.ctrlKey?1:0)+"_"+(a.shiftKey?1:0);if(this.cell){if(this._key_events[b]){if(!1===this._key_events[b].call(this))return!0;a.preventDefault&&a.preventDefault();a.cancelBubble=!0;return!1}this._key_events.k_other&&this._key_events.k_other.call(this,a)}return!0};this.selectRow=function(a,b,g,h){"object"!=typeof a&&(a=this.render_row(a));this.selectCell(a,0,b,g,!1,h)};this.wasDblClicked=function(a){var b=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(b)return this.callEvent("onRowDblClicked",[b.parentNode.idd,b._cellIndex,a])};this._onHeaderClick=function(a,b){var c=this.grid;b=b||c.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD");if(null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[b._cellIndexS,a||window.event]))return!1;c.sortField(b._cellIndexS,!1,b)}this.grid.resized=null};this.deleteSelectedRows=function(){var a=this.selectedRows.length;if(0!=a){var b=this.selectedRows;this.selectedRows=dhtmlxArray();for(--a;0<=a;a--){var g=b[a];if(!this.deleteRow(g.idd,g))this.selectedRows[this.selectedRows.length]=g;else if(g==this.row)var h=a}if(h)try{h+1>this.rowsCol.length&&h--,this.selectCell(h,0,!0)}catch(l){this.cell=this.row=null}}};this.getSelectedRowId=function(){for(var a=[],b={},g=0;g<this.selectedRows.length;g++){var h=this.selectedRows[g].idd;b[h]||(a[a.length]=h,b[h]=!0)}return 0==a.length?null:a.join(this.delim)};this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1};this.getColWidth=function(a){return parseInt(this.cellWidthPX[a])};this.setColWidth=function(a,b){if("*"==b)this.initCellWidth[a]="*";else{if(this._hrrar[a])return;"px"==this.cellWidthType?this.cellWidthPX[a]=parseInt(b):this.cellWidthPC[a]=parseInt(b)}this.setSizes()};this.getRowIndex=function(a){for(var b=0;b<this.rowsBuffer.length;b++)if(this.rowsBuffer[b]&&this.rowsBuffer[b].idd==a)return b;return-1};this.getRowId=function(a){return this.rowsBuffer[a]?this.rowsBuffer[a].idd:this.undefined};this.setRowId=function(a,b){this.changeRowId(this.getRowId(a),b)};this.changeRowId=function(a,b){if(a!=b){var c=this.rowsAr[a];c.idd=b;this.UserData[a]&&(this.UserData[b]=this.UserData[a],this.UserData[a]=null);this._h2&&this._h2.get[a]&&(this._h2.get[b]=this._h2.get[a],this._h2.get[b].id=b,delete this._h2.get[a]);this.rowsAr[a]=null;this.rowsAr[b]=c;for(var e=0;e<c.childNodes.length;e++)c.childNodes[e]._code&&(c.childNodes[e]._code=this._compileSCL(c.childNodes[e]._val,c.childNodes[e]));if(this._mat_links&&this._mat_links[a]){c=this._mat_links[a];delete this._mat_links[a];for(var l in c)for(e=0;e<c[l].length;e++)this._compileSCL(c[l][e].original,c[l][e])}this.callEvent("onRowIdChange",[a,b])}};this.setColumnIds=function(a){this.columnIds=a.split(this.delim)};this.setColumnId=function(a,b){this.columnIds[a]=b};this.getColIndexById=function(a){for(var b=0;b<this.columnIds.length;b++)if(this.columnIds[b]==a)return b};this.getColumnId=function(a){return this.columnIds[a]};this.getColLabel=this.getColumnLabel=function(a,b,g,h){b=(g||this.hdr).rows[(b||0)+1];for(g=0;g<b.cells.length;g++)if(b.cells[g]._cellIndexS==a)return h?b.cells[g].firstChild.innerHTML:_isIE?b.cells[g].innerText:b.cells[g].textContent;return""};this.getFooterLabel=function(a,b,g){return this.getColumnLabel(a,b,this.ftr,g)};this.setRowTextBold=function(a){if(a=this.getRowById(a))a.style.fontWeight="bold"};this.setRowTextStyle=function(a,b){var c=this.getRowById(a);if(c)for(var e=0;e<c.childNodes.length;e++){var l=c.childNodes[e]._attrs.style||"";this._hrrar&&this._hrrar[e]&&(l="display:none;");c.childNodes[e].style.cssText=l+"width:"+c.childNodes[e].style.width+";"+b}};this.setRowColor=function(a,b){for(var c=this.getRowById(a),e=0;e<c.childNodes.length;e++)c.childNodes[e].bgColor=b};this.setCellTextStyle=function(a,b,g){if(a=this.getRowById(a))if(a=a.childNodes[a._childIndexes?a._childIndexes[b]:b]){var c="";this._hrrar&&this._hrrar[b]&&(c="display:none;");a.style.cssText=c+"width:"+a.style.width+";"+g}};this.setRowTextNormal=function(a){if(a=this.getRowById(a))a.style.fontWeight="normal"};this.doesRowExist=function(a){return null!=this.getRowById(a)?!0:!1};this.getColumnsNum=function(){return this._cCount};this.moveRowUp=function(a){var b=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,-1);a=this.rowsCol._dhx_find(b);b.previousSibling&&0!=a&&(b.parentNode.insertBefore(b,b.previousSibling),this.rowsCol._dhx_swapItems(a,a-1),this.setSizes(),b=this.rowsBuffer._dhx_find(b),this.rowsBuffer._dhx_swapItems(b,b-1),this._cssEven&&this._fixAlterCss(a-1))};this.moveRowDown=function(a){var b=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,1);a=this.rowsCol._dhx_find(b);b.nextSibling&&(this.rowsCol._dhx_swapItems(a,a+1),b.nextSibling.nextSibling?b.parentNode.insertBefore(b,b.nextSibling.nextSibling):b.parentNode.appendChild(b),this.setSizes(),b=this.rowsBuffer._dhx_find(b),this.rowsBuffer._dhx_swapItems(b,b+1),this._cssEven&&this._fixAlterCss(a))};this.getCombo=function(a){this.combos[a]||(this.combos[a]=new dhtmlXGridComboObject);return this.combos[a]};this.setUserData=function(a,b,g){a||(a="gridglobaluserdata");this.UserData[a]||(this.UserData[a]=new Hashtable);this.UserData[a].put(b,g)};this.getUserData=function(a,b){a||(a="gridglobaluserdata");this.getRowById(a);var c=this.UserData[a];return c?c.get(b):""};this.setEditable=function(a){this.isEditable=dhx4.s2b(a)};this.selectRowById=function(a,b,g,h){h||(h=!1);this.selectCell(this.getRowById(a),0,h,b,!1,g)};this.clearSelection=function(){this.editStop();for(var a=0;a<this.selectedRows.length;a++){var b=this.rowsAr[this.selectedRows[a].idd];b&&(b.className=b.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray();this.row=null;null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null);this.callEvent("onSelectionCleared",[])};this.copyRowContent=function(a,b){var c=this.getRowById(a);if(this.isTreeGrid())this._copyTreeGridRowContent(c,a,b);else for(var e=0;e<c.cells.length;e++)this.cells(b,e).setValue(this.cells(a,e).getValue());_isIE||(this.getRowById(a).cells[0].height=c.cells[0].offsetHeight)};this.setFooterLabel=function(a,b,g){return this.setColumnLabel(a,b,g,this.ftr)};this.setColumnLabel=function(a,b,g,h){g=(h||this.hdr).rows[g||1];h=g._childIndexes?g._childIndexes[a]:a;if(g.cells[h]){if(this.useImagesInHeader)g.cells[h].style.textAlign="left",g.cells[h].innerHTML="\x3cimg src\x3d'"+b+"'\x3e",a=new Image,a.src=""+b.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=a,a=new Image,a.src=""+b.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=a;else{var c="\x3cdiv class\x3d'hdrcell'\x3e";if(-1!=b.indexOf("img:[")){var e=b.replace(/.*\[([^>]+)\].*/,"$1");b=b.substr(b.indexOf("]")+1,b.length);c+="\x3cimg width\x3d'18px' height\x3d'18px' align\x3d'absmiddle' src\x3d'"+e+"' hspace\x3d'2'\x3e"}g.cells[h].innerHTML=c+b+"\x3c/div\x3e";this._hstyles[a]&&(g.cells[h].style.cssText=this._hstyles[a])}if(-1!=(b||"").indexOf("#")&&(a=b.match(/(^|{)#([^}]+)(}|$)/))&&(c="_in_header_"+a[2],this[c]))this[c](this.forceDivInHeader?g.cells[h].firstChild:g.cells[h],h,b.split(a[0]))}};this.setColLabel=function(a,b,g,h){return this.setColumnLabel(a,b,(g||0)+1,h)};this.clearAll=function(a){if(this.obj.rows[0]){this._h2&&(this._h2=this._createHierarchy(),this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2));this.limit=this._limitC=0;this.editStop(!0);this._dLoadTimer&&window.clearTimeout(this._dLoadTimer);this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);for(var b=this.obj.rows.length-1;0<b;b--){var c=this.obj.rows[b];c.parentNode.removeChild(c)}if(a){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(b=this.hdr.rows.length-1;0<=b;b--)c=this.hdr.rows[b],c.parentNode.removeChild(c);this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null);this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null}this.cell=this.row=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd)this.xmlFileUrl="";this.pagingOn&&this.changePage(1);this._contextCallTimer&&window.clearTimeout(this._contextCallTimer);this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;this.setSortImgState(!1);this.setSizes();this.callEvent("onClearAll",[])}};this.sortField=function(a,b,g){if(0==this.getRowsNum())return!1;if((b=this.hdr.rows[0].cells[a])&&"TH"==b.tagName&&this.fldSort.length-1>=b._cellIndex&&"na"!=this.fldSort[b._cellIndex]){var c=this.getSortingState(),c=c[0]==a&&"asc"==c[1]?"des":"asc";if(this.callEvent("onBeforeSorting",[a,this.fldSort[a],c])){this.sortImg.className="dhxgrid_sort_"+("asc"==c?"asc":"desc");if(this.useImagesInHeader){a=this.hdr.rows[1].cells[b._cellIndex].firstChild;if(null!=this.fldSorted){var e=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;e.src=e.src.replace(/(\.asc\.)|(\.des\.)/,".")}a.src=a.src.replace(/(\.[a-z]+)$/,"."+c+"$1")}this.sortRows(b._cellIndex,this.fldSort[b._cellIndex],c);this.fldSorted=b;g&&"th"!=g.tagName.toLowerCase()&&(this.r_fldSorted=g);this.setSortImgPos(!1,!1,!1,g)}}};this.setCustomSorting=function(a,b){this._customSorts||(this._customSorts=[]);this._customSorts[b]="string"==typeof a?eval(a):a;this.fldSort[b]="cus"};this.enableHeaderImages=function(a){this.useImagesInHeader=a};this.setHeader=function(a,b,g){a="object"!=typeof a?this._eSplit(a):[].concat(a);for(var c=[],e=new dhtmlxArray(0),m=[],n=[],q=[],r=0;r<a.length;r++)c[c.length]=Math.round(100/a.length),e[e.length]="ed",m[m.length]="left",n[n.length]="middle",q[q.length]="na";this.splitSign=b||"#cspan";this.hdrLabels=a;this.cellWidth=c;this.initCellWidth.length||this.setInitWidthsP(c.join(this.delim),!0);this.cellType=e;this.cellAlign=m;this.cellVAlign=n;this.fldSort=q;this._hstyles=g||[]};this._eSplit=function(a){if(![].push)return a.split(this.delim);var b="r"+(new Date).valueOf(),c=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(a||"").replace(RegExp(c,"g"),b).replace(RegExp("\\\\"+b,"g"),this.delim).split(b)};this.getColType=function(a){return this.cellType[a]};this.getColTypeById=function(a){return this.cellType[this.getColIndexById(a)]};this.setColTypes=function(a){this.cellType=dhtmlxArray(a.split(this.delim));this._strangeParams=[];for(a=0;a<this.cellType.length;a++){if(-1!=this.cellType[a].indexOf("[")){var b=this.cellType[a].split(/[\[\]]+/g);this.cellType[a]=b[0];this.defVal[a]=b[1];0==b[1].indexOf("\x3d")&&(this.cellType[a]="math",this._strangeParams[a]=b[0])}window["eXcell_"+this.cellType[a]]||dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[a],this,this.cellType[a]])}};this.setColSorting=function(a){this.fldSort=a.split(this.delim);a={str:1,"int":1,date:1};for(var b=0;b<this.fldSort.length;b++)a[this.fldSort[b]]||"function"!=typeof window[this.fldSort[b]]||(this._customSorts||(this._customSorts=[]),this._customSorts[b]=window[this.fldSort[b]],this.fldSort[b]="cus")};this.setColAlign=function(a){this.cellAlign=a.split(this.delim);for(a=0;a<this.cellAlign.length;a++)this.cellAlign[a]=this.cellAlign[a]._dhx_trim()};this.setColVAlign=function(a){this.cellVAlign=a.split(this.delim)};this.setNoHeader=function(a){this.noHeader=dhx4.s2b(a)};this.showRow=function(a){this.getRowById(a);this._h2&&this.openItem(this._h2.get[a].parent.id);for(a=this.getRowById(a).childNodes[0];a&&"none"==a.style.display;)a=a.nextSibling;a&&this.moveToVisible(a,!0)};this.setStyle=function(a,b,g,h){this.ssModifier=[a,b,g,g,h];for(a=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"];!_isIE;)break;for(b=0;b<a.length;b++)this.ssModifier[b]&&(_isIE?document.styleSheets[0].addRule(a[b],this.ssModifier[b]):document.styleSheets[0].insertRule(a[b]+(" { "+this.ssModifier[b]+" }"),document.styleSheets[0].cssRules.length))};this.setColumnColor=function(a){this.columnColor=a.split(this.delim)};this.enableAlterCss=function(a,b,g,h){(a||b)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();this._fake&&this._fake._fixAlterCss()});this._cssSP=g;this._cssSU=h;this._cssEven=a;this._cssUnEven=b};this._fixAlterCss=function(a){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(a);if(this._cssEven||this._cssUnEven)for(var b=a=a||0;a<this.rowsCol.length;a++)this.rowsCol[a]&&"none"!=this.rowsCol[a].style.display&&(this.rowsCol[a]._cntr?b=1:(-1!=this.rowsCol[a].className.indexOf("rowselected")?this.rowsCol[a].className=1==b%2?this._cssUnEven+" rowselected "+(this.rowsCol[a]._css||""):this._cssEven+" rowselected "+(this.rowsCol[a]._css||""):this.rowsCol[a].className=1==b%2?this._cssUnEven+" "+(this.rowsCol[a]._css||""):this._cssEven+" "+(this.rowsCol[a]._css||""),b++))};this.clearChangedState=function(){for(var a=0;a<this.rowsCol.length;a++){var b=this.rowsCol[a];if(b&&b.childNodes)for(var g=b.childNodes.length,h=0;h<g;h++)b.childNodes[h].wasChanged=!1}};this.getChangedRows=function(a){var b=[];this.forEachRow(function(c){c=this.rowsAr[c];if("TR"==c.tagName){var e=c.childNodes.length;if(a&&c._added)b[b.length]=c.idd;else for(var g=0;g<e;g++)if(c.childNodes[g].wasChanged){b[b.length]=c.idd;break}}});return b.join(this.delim)};this._sAll=this._sUDa=!1;this.setSerializationLevel=function(a,b,g,h,l,m){this._sUDa=a;this._sAll=b;this._sConfig=g;this._chAttr=h;this._onlChAttr=l;this._asCDATA=m};this.setSerializableColumns=function(a){if(a)for(this._srClmn=(a||"").split(","),a=0;a<this._srClmn.length;a++)this._srClmn[a]=dhx4.s2b(this._srClmn[a]);else this._srClmn=null};this._serialise=function(a,b,g){this.editStop();var c=[],e="\x3c/"+this.xml.s_row+"\x3e";if(this.isTreeGrid())this._h2.forEachChildF(0,function(a){a=this._serializeRow(this.render_row_tree(-1,a.id));c.push(a);return a?!0:!1},this,function(){c.push(e)});else for(a=0;a<this.rowsBuffer.length;a++)!this.rowsBuffer[a]||this._chAttr&&this.rowsBuffer[a]._locator||(b=this._serializeRow(this.render_row(a)),c.push(b),b&&c.push(e));return[c.join("")]};this._serializeRow=function(a,b){var c=[],e=this.xml.row_attrs,l=this.xml.cell_attrs;c.push("\x3c"+this.xml.s_row);c.push(" id\x3d'"+a.idd+"'");this._sAll&&-1!=this.selectedRows._dhx_find(a)&&c.push(" selected\x3d'1'");this._h2&&"minus"==this._h2.get[a.idd].state&&c.push(" open\x3d'1'");if(e.length)for(b=0;b<e.length;b++)c.push(" "+e[b]+"\x3d'"+a._attrs[e[b]]+"'");c.push("\x3e");if(this._sUDa&&this.UserData[a.idd])for(keysAr=this.UserData[a.idd].getKeys(),e=0;e<keysAr.length;e++){var m=keysAr[e];0!==m.indexOf("__")&&c.push("\x3cuserdata name\x3d'"+m+"'\x3e"+(this._asCDATA?"\x3c![CDATA[":"")+this.UserData[a.idd].get(m)+(this._asCDATA?"]]\x3e":"")+"\x3c/userdata\x3e")}e=!1;for(m=0;m<this._cCount;m++)if(!this._srClmn||this._srClmn[m]){var n=this.cells3(a,m);c.push("\x3ccell");if(l.length)for(b=0;b<l.length;b++)c.push(" "+l[b]+"\x3d'"+n.cell._attrs[l[b]]+"'");zxVal=n[this._agetm]();this._asCDATA&&(zxVal="\x3c![CDATA["+zxVal+"]]\x3e");this._ecspn&&n.cell.colSpan&&1<n.cell.colSpan&&c.push(' colspan\x3d"'+n.cell.colSpan+'" ');this._chAttr?n.wasChanged()&&(c.push(' changed\x3d"1"'),e=!0):this._onlChAttr&&n.wasChanged()&&(e=!0);this._sAll&&"tree"==this.cellType[m]?c.push((this._h2?" image\x3d'"+this._h2.get[a.idd].image+"'":"")+"\x3e"+zxVal+"\x3c/cell\x3e"):c.push("\x3e"+zxVal+"\x3c/cell\x3e");if(this._ecspn&&n.cell.colSpan)for(var q=0;q<n.cell.colSpan-1;q++)c.push("\x3ccell/\x3e"),m++}return!this._onlChAttr||e||a._added?c.join(""):""};this._serialiseConfig=function(){for(var a="\x3chead\x3e",b=0;b<this.hdr.rows[0].cells.length;b++)if(!this._srClmn||this._srClmn[b]){var g=this.fldSort[b];"cus"==g&&(g=this._customSorts[b].toString(),g=g.replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));a+="\x3ccolumn width\x3d'"+this.getColWidth(b)+"' align\x3d'"+this.cellAlign[b]+"' type\x3d'"+this.cellType[b]+"' sort\x3d'"+(g||"na")+"' color\x3d'"+(this.columnColor[b]||"")+"'"+(this.columnIds[b]?" id\x3d'"+this.columnIds[b]+"'":"")+"\x3e";a=this._asCDATA?a+("\x3c![CDATA["+this.getColumnLabel(b)+"]]\x3e"):a+this.getColumnLabel(b);if(g=this.getCombo(b))for(var h=0;h<g.keys.length;h++)a+="\x3coption value\x3d'"+g.keys[h]+"'\x3e"+g.values[h]+"\x3c/option\x3e";a+="\x3c/column\x3e"}return a+"\x3c/head\x3e"};this.serialize=function(){var a='\x3c?xml version\x3d"1.0"?\x3e\x3crows\x3e';this._agetm=this._mathSerialization?"getMathValue":"getValue";if(this._sUDa&&this.UserData.gridglobaluserdata)for(var b=this.UserData.gridglobaluserdata.getKeys(),g=0;g<b.length;g++)a+="\x3cuserdata name\x3d'"+b[g]+"'\x3e"+this.UserData.gridglobaluserdata.get(b[g])+"\x3c/userdata\x3e";this._sConfig&&(a+=this._serialiseConfig());a+=this._serialise();return a+"\x3c/rows\x3e"};this.getPosition=function(a,b){if(!b){var c=dhx4.getOffset(a);return[c.left,c.top]}b=b||document.body;for(var c=a,e=0,l=0;c&&c!=b;)e+=c.offsetLeft-c.scrollLeft,l+=c.offsetTop-c.scrollTop,c=c.offsetParent;b==document.body&&(_isIE?(l+=document.body.offsetTop||document.documentElement.offsetTop,e+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(e+=document.body.offsetLeft,l+=document.body.offsetTop));return[e,l]};this.getFirstParentOfType=function(a,b){for(;a&&a.tagName!=b&&"BODY"!=a.tagName;)a=a.parentNode;return a};this.objBox.onscroll=function(){this.grid._doOnScroll()};this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,1<Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)};if(!_isOpera||8.5<_OperaRv)this.hdr.onmousemove=function(a){this.grid.changeCursorState(a||window.event)},this.hdr.onmousedown=function(a){return this.grid.startColResize(a||window.event)};this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(a){a=a||event;a.cancelBubble=!0;this.firstChild.grid.setActive(!0);window.dhx4.callEvent("_onGridClick",[a,this.firstChild.grid])};this.obj.onclick=function(a){!1!==this.grid._doClick(a||window.event)&&(this.grid._sclE?this.grid.editCell(a||window.event):this.grid.editStop());a=a||event;a.cancelBubble=!0;window.dhx4.callEvent("_onGridClick",[a,this.grid])};_isMacOS?this.entBox.oncontextmenu=function(a){a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;var b=this.grid;b._realfake&&(b=b._fake);return b._doContClick(a||window.event)}:(this.entBox.onmousedown=function(a){return this.grid._doContClick(a||window.event)},this.entBox.oncontextmenu=function(a){this.grid._ctmndx&&((a||event).cancelBubble=!0);return!this.grid._ctmndx});this.obj.ondblclick=function(a){if(!this.grid.wasDblClicked(a||window.event))return!1;this.grid._dclE&&this.grid.getFirstParentOfType(_isIE?event.srcElement:a.target,"TR")==this.grid.row&&this.grid.editCell(a||window.event);(a||event).cancelBubble=!0;if(_isOpera)return!1};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){b._onHeaderClick.apply({grid:b},[null,b.r_fldSorted])};this.hdr.ondblclick=this._onHeaderDblClick;document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,"keydown",function(a){if(globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(a||window.event)}),document.body._dhtmlxgrid_onkeydown=!0);dhtmlxEvent(document.body,"click",function(){b.editStop&&b.editStop();b.isActive&&b.setActive(!1)});-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height);-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width);(this._delta_x||this._delta_y)&&this._setAutoResize();this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;this.enableAutoHeigth=this.enableAutoHeight;this.getUID=this.uid;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}dhtmlXGridObject.prototype={getRowAttribute:function(a,b){return this.getRowById(a)._attrs[b]},setRowAttribute:function(a,b,c){this.getRowById(a)._attrs[b]=c},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(a,b){dhx4.s2b(b);var c=this.getRowById(a);if(c){""===c.expand&&this.collapseKids(c);if(b&&"none"!=c.style.display){c.style.display="none";var e=this.selectedRows._dhx_find(c);if(-1!=e){c.className=c.className.replace("rowselected","");for(var g=0;g<c.childNodes.length;g++)c.childNodes[g].className=c.childNodes[g].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(e)}this.callEvent("onGridReconstructed",[])}b||"none"!=c.style.display||(c.style.display="",this.callEvent("onGridReconstructed",[]));this.callEvent("onRowHide",[a,b]);this.setSizes()}},setColumnHidden:function(a,b){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[a]=b;this.fldSorted&&this.fldSorted.cellIndex==a&&b&&(this.sortImg.style.display="none");if(dhx4.s2b(b)){if(!this._hrrar)this._hrrar=[];else if(this._hrrar[a])return;this._hrrar[a]="display:none;";this._hideShowColumn(a,"none")}else{if(!this._hrrar||!this._hrrar[a])return;this._hrrar[a]="";this._hideShowColumn(a,"")}this.fldSorted&&this.fldSorted.cellIndex==a&&!b&&(this.sortImg.style.display="inline");this.setSortImgPos();this.callEvent("onColumnHidden",[a,b])},isColumnHidden:function(a){return this._hrrar&&this._hrrar[a]?!0:!1},setColumnsVisibility:function(a){a&&(this._ivizcol=a.split(this.delim));if(this.hdr.rows.length&&this._ivizcol)for(a=0;a<this._ivizcol.length;a++)this.setColumnHidden(a,this._ivizcol[a])},_fixHiddenRowsAll:function(a,b,c,e,g){g=g||"_cellIndex";for(var h=a.rows.length,l=0;l<h;l++){var m=a.rows[l].childNodes;if(m.length!=this._cCount)for(var n=0;n<m.length;n++){if(m[n][g]==b){m[n].style[c]=e;break}}else m[b].style[c]=e}},_hideShowColumn:function(a,b){if("none"==b){this.hdr.rows[0].cells[a]._oldWidth=this.hdr.rows[0].cells[a].style.width||this.initCellWidth[a]+"px";this.hdr.rows[0].cells[a]._oldWidthP=this.cellWidthPC[a];this.obj.rows[0].cells[a].style.width="0px";var c={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&c.rows.push(this.rowsAr[a])});this._fixHiddenRowsAll(c,a,"display","none");this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"none");(_isOpera&&9>_OperaRv||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","none","_cellIndexS");this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","none");this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","nowrap","_cellIndexS");this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth));this.cellWidthPX[a]&&(this.cellWidthPX[a]=0);this.cellWidthPC[a]&&(this.cellWidthPC[a]=0)}else if(this.hdr.rows[0].cells[a]._oldWidth){var e=this.hdr.rows[0].cells[a];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","","_cellIndexS");this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","");c={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&c.rows.push(this.rowsAr[a])});this._fixHiddenRowsAll(c,a,"display","");this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"");this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","normal","_cellIndexS");e._oldWidthP&&(this.cellWidthPC[a]=e._oldWidthP);e._oldWidth&&(this.cellWidthPX[a]=parseInt(e._oldWidth))}!b&&this._realfake&&this.setColumnSizes(this.entBox.clientWidth);this.setSizes();_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(a){this._ecspn=dhx4.s2b(a)},enableRowsHover:function(a,b){this._unsetRowHover(!1,!0);this._hvrCss=b;dhx4.s2b(a)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(a,b,c){this._sclE=dhx4.s2b(a);this._dclE=dhx4.s2b(b);this._f2kE=dhx4.s2b(c)},enableLightMouseNavigation:function(a){dhx4.s2b(a)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");b&&(this.grid.editStop(),this.grid.doClick(b),this.grid.editCell(),(a||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(a,b){that=b?this:this.grid;if(that._lahRw&&that._lahRw!=b){for(var c=0;c<that._lahRw.childNodes.length;c++)that._lahRw.childNodes[c].className=that._lahRw.childNodes[c].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(b&&b.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,b);b=b.parentNode;if(!b.idd||"__filler__"==b.idd)return;for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].className+=" "+this.grid._hvrCss;this.grid._lahRw=b}this._honmousemove(a)},_autoMoveSelect:function(a){if(!this.grid.editor){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");b.parentNode.idd&&this.grid.doClick(b,!0,0)}this._onmousemove(a)},enableDistributedParsing:function(a,b,c){dhx4.s2b(a)?(this._ads_count=b||10,this._ads_time=c||250):this._ads_count=0},destructor:function(){this.editStop(!0);this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime));this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs)for(var a=0;a<this.formInputs.length;a++)this.parentForm.removeChild(this.formInputs[a]);for(var b,a=0;a<this.rowsCol.length;a++)this.rowsCol[a]&&(this.rowsCol[a].grid=null);for(a in this.rowsAr)this.rowsAr[a]&&(this.rowsAr[a]=null);this.rowsCol=new dhtmlxArray;this.rowsAr={};this.entBox.innerHTML="";a=function(){};this.setSizes=this._update_srnd_view=this.callEvent=this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=a;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=a,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=a);for(b in this)this[b]&&this[b].m_obj&&(this[b].m_obj=null),this[b]=null;this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null);return null},getSortingState:function(){var a=[];this.fldSorted&&(a[0]=this.fldSorted._cellIndex,a[1]="dhxgrid_sort_desc"==this.sortImg.className?"des":"asc");return a},enableAutoHeight:function(a,b,c){this._ahgr=dhx4.s2b(a);this._ahgrF=dhx4.s2b(c);this._ahgrM=b||null;1==arguments.length&&(this.objBox.style.overflowY=a?"hidden":"auto");"auto"==b&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(a){this._sst=dhx4.s2b(a);this.rowsCol.stablesort=function(a){for(var b=this.length-1,e=0;e<this.length-1;e++){for(var g=0;g<b;g++)if(0<a(this[g],this[g+1])){var h=this[g];this[g]=this[g+1];this[g+1]=h}b--}}},enableKeyboardSupport:function(a){this._htkebl=!dhx4.s2b(a)},enableContextMenu:function(a){this._ctmndx=a},setScrollbarWidthCorrection:function(a){},enableTooltips:function(a){this._enbTts=a.split(",");for(a=0;a<this._enbTts.length;a++)this._enbTts[a]=dhx4.s2b(this._enbTts[a])},enableResizing:function(a){this._drsclmn=a.split(",");for(a=0;a<this._drsclmn.length;a++)this._drsclmn[a]=dhx4.s2b(this._drsclmn[a])},setColumnMinWidth:function(a,b){2==arguments.length?(this._drsclmW||(this._drsclmW=[]),this._drsclmW[b]=a):this._drsclmW=a.split(",")},enableCellIds:function(a){this._enbCid=dhx4.s2b(a)},lockRow:function(a,b){var c=this.getRowById(a);c&&(c._locked=dhx4.s2b(b),this.cell&&this.cell.parentNode.idd==a&&this.editStop())},_getRowArray:function(a){for(var b=[],c=0;c<a.childNodes.length;c++){var e=this.cells3(a,c);b[c]=e.getValue()}return b},setDateFormat:function(a,b){this._dtmask=a;this._dtmask_inc=b},setNumberFormat:function(a,b,c,e){var g=a.replace(/[^0\,\.]*/g,""),h=g.indexOf(".");-1<h&&(h=g.length-h-1);var l=g.indexOf(",");-1<l&&(l=g.length-h-2-l);"string"!=typeof c&&(c=this.i18n.decimal_separator);"string"!=typeof e&&(e=this.i18n.group_separator);var m=a.split(g)[0];a=a.split(g)[1];this._maskArr[b]=[h,l,m,a,c,e]},_aplNFb:function(a,b){var c=this._maskArr[b];if(!c)return a;var e=parseFloat(a.toString().replace(/[^0-9]*/g,""));"-"==a.toString().substr(0,1)&&(e*=-1);0<c[0]&&(e/=Math.pow(10,c[0]));return e},_aplNF:function(a,b){var c=this._maskArr[b];if(!c)return a;var e=(0>parseFloat(a)?"-":"")+c[2];a=Math.abs(Math.round(parseFloat(a)*Math.pow(10,0<c[0]?c[0]:0))).toString();a=(a.length<c[0]?Math.pow(10,c[0]+1-a.length).toString().substr(1,c[0]+1)+a.toString():a).split("").reverse();a[c[0]]=(a[c[0]]||"0")+c[4];if(0<c[1])for(var g=(0<c[0]?0:1)+c[0]+c[1];g<a.length;g+=c[1])a[g]+=c[5];return e+a.reverse().join("")+c[3]},_launchCommands:function(a){for(var b=0;b<a.length;b++){for(var c=[],e=0;e<a[b].childNodes.length;e++)1==a[b].childNodes[e].nodeType&&(c[c.length]=a[b].childNodes[e].firstChild.data);this[a[b].getAttribute("command")].apply(this,c)}},_parseHead:function(a){var b=dhx4.ajax.xpath("./head",a);if(b.length){var c=dhx4.ajax.xpath("./column",b[0]),e=dhx4.ajax.xpath("./settings",b[0]),g="setInitWidths",h=!1;if(e[0])for(var l=0;l<e[0].childNodes.length;l++)switch(e[0].childNodes[l].tagName){case "colwidth":e[0].childNodes[l].firstChild&&"%"==e[0].childNodes[l].firstChild.data&&(g="setInitWidthsP");break;case "splitat":h=e[0].childNodes[l].firstChild?e[0].childNodes[l].firstChild.data:!1}this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",b[0]));if(0<c.length){0<this.hdr.rows.length&&this.clearAll(!0);for(var e=[[],[],[],[],[],[],[],[],[]],m=" width type align sort color format hidden id".split(" "),n=["",g,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],l=0;l<c.length;l++){for(g=1;g<m.length;g++)e[g].push(c[l].getAttribute(m[g]));e[0].push((c[l].firstChild?c[l].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(e[0]);for(l=0;l<n.length;l++)if(n[l])this[n[l]](e[l].join(this.delim));for(l=0;l<c.length;l++)if(0==this.cellType[l].indexOf("co")||"clist"==this.cellType[l]){if(m=dhx4.ajax.xpath("./option",c[l]),m.length)if(n=[],"clist"==this.cellType[l]){for(g=0;g<m.length;g++)n[n.length]=m[g].firstChild?m[g].firstChild.data:"";this.registerCList(l,n)}else for(n=this.getCombo(l),g=0;g<m.length;g++)n.put(m[g].getAttribute("value"),m[g].firstChild?m[g].firstChild.data:"")}else e[6][l]&&(-1!=this.cellType[l].toLowerCase().indexOf("calendar")||"date"==this.fldSort[l]?this.setDateFormat(e[6][l]):this.setNumberFormat(e[6][l],l));this.init();c=e[7].join(this.delim);this.setColHidden&&""!=c.replace(/,/g,"")&&this.setColHidden(c);h&&this.splitAt&&this.splitAt(h)}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",b[0]))}a=dhx4.ajax.xpath("//rows/userdata",a);if(0<a.length)for(this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable),g=0;g<a.length;g++){b="";for(h=0;h<a[g].childNodes.length;h++)b+=a[g].childNodes[h].nodeValue;this.UserData.gridglobaluserdata.put(a[g].getAttribute("name"),b)}},getCheckedRows:function(a){var b=[];this.forEachRowA(function(c){var e=this.cells(c,a);e.changeState&&0!=e.getValue()&&b.push(c)},!0);return b.join(",")},checkAll:function(){for(var a=arguments.length?arguments[0]:1,b=0;b<this.getColumnsNum();b++)"ch"==this.getColType(b)&&this.setCheckedRows(b,a)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(a,b){this.forEachRowA(function(c){this.cells(c,a).isCheckbox()&&this.cells(c,a).setValue(b)})},_drawTooltip:function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(!b||this.grid.editor&&this.grid.editor.cell==b)return!0;var c=b.parentNode;if(c.idd&&"__filler__"!=c.idd){var e=a?a.target:event.srcElement;if(c.idd==window.unknown||!this.grid.callEvent("onMouseOver",[c.idd,b._cellIndex,a||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[b._cellIndex])return e.title&&(e.title=""),!0;if(!(b._cellIndex>=this.grid._cCount)&&(a=this.grid.cells3(c,b._cellIndex))&&a.cell&&a.cell._attrs)return e._title&&(a.cell.title=""),a.cell._attrs.title||(e._title=!0),a&&(e.title=a.cell._attrs.title||(a.getTitle?a.getTitle():(a.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}},enableCellWidthCorrection:function(a){_isFF&&(this._wcorr=parseInt(a))},getAllRowIds:function(a){for(var b=[],c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&b.push(this.rowsBuffer[c].idd);return b.join(a||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(a,b,c){if(this._ecspn){a=this.getRowById(a);if(a._childIndexes&&a.childNodes[a._childIndexes[b]]){var e=a._childIndexes[b],g=a.childNodes[e],h=g.colSpan;g.colSpan=1;if(h&&1!=h)for(var l=1;l<h;l++){var m=document.createElement("TD");g.nextSibling?a.insertBefore(m,g.nextSibling):a.appendChild(m);a._childIndexes[b+l]=e+l;m._cellIndex=b+l;m.style.textAlign=this.cellAlign[l];m.style.verticalAlign=this.cellVAlign[l];g=m;this.cells3(a,b+l).setValue("")}for(g=1*b+1*h;g<a._childIndexes.length;g++)a._childIndexes[g]+=1*(h-1)}if(c&&1<c){if(a._childIndexes)e=a._childIndexes[b];else for(e=b,a._childIndexes=[],g=0;g<a.childNodes.length;g++)a._childIndexes[g]=g;a.childNodes[e].colSpan=c;for(g=1;g<c;g++)a._childIndexes[a.childNodes[e+1]._cellIndex]=e,a.removeChild(a.childNodes[e+1]);for(g=1*a.childNodes[a._childIndexes[b]]._cellIndex+1*c;g<a._childIndexes.length;g++)a._childIndexes[g]-=c-1}}},preventIECaching:function(a){dhx4.ajax.cache=!a},enableColumnAutoSize:function(a){this._eCAS=dhx4.s2b(a)},_onHeaderDblClick:function(a){var b=this.grid;a=b.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD");if(!b._eCAS)return!1;b.adjustColumnSize(a._cellIndexS)},adjustColumnSize:function(a,b){if(!this._hrrar||!this._hrrar[a]){this._notresize=!0;var c=0;this._setColumnSizeR(a,20);for(var e=1;e<this.hdr.rows.length;e++){var g=this.hdr.rows[e];(g=g.childNodes[g._childIndexes?g._childIndexes[a]:a])&&(!g.colSpan||2>g.colSpan)&&g._cellIndex==a&&(g.childNodes[0]&&"hdrcell"==g.childNodes[0].className&&(g=g.childNodes[0]),c=Math.max(c,g.scrollWidth))}for(var e=this.obj.rows.length,h,g=this.cellType._dhx_find("tree"),l=1;l<e;l++){var m=this.obj.rows[l];h=a;if(this.rowsAr[m.idd]){if(m._childIndexes){if(m._childIndexes[a]==m._childIndexes[a+1])continue;h=m._childIndexes[a]}m.childNodes[h]&&m.childNodes[h]._cellIndex==a&&(h=(m.childNodes[h].innerText||m.childNodes[h].textContent||"").length*this.fontWidth,this._h2&&a==g&&(h+=22*this._h2.get[m.idd].level),h>c&&(c=h))}}this._setColumnSizeR(a,c+(20+(b||0)));this._notresize=!1;this.setSizes()}},detachHeader:function(a,b){b=b||this.hdr;var c=b.rows[a+1];c&&c.parentNode.removeChild(c);this.setSizes()},detachFooter:function(a){this.detachHeader(a,this.ftr)},attachHeader:function(a,b,c){"string"==typeof a&&(a=this._eSplit(a));"string"==typeof b&&(b=b.split(this.delim));c=c||"_aHead";if(this.hdr.rows.length)if(a)this._createHRow([a,b],this["_aHead"==c?"hdr":"ftr"]);else{if(this[c])for(a=0;a<this[c].length;a++)this.attachHeader.apply(this,this[c][a])}else this[c]||(this[c]=[]),this[c][this[c].length]=[a,b,c]},_createHRow:function(a,b){if(!b){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative");var c=document.createElement("DIV");c.className="ftr";this.entBox.appendChild(c);var e=document.createElement("TABLE");e.cellPadding=e.cellSpacing=0;_isIE&&8!=_isIE||(e.width="100%",e.style.paddingRight="20px");e.style.marginRight="20px";e.style.tableLayout="fixed";c.appendChild(e);e.appendChild(document.createElement("TBODY"));this.ftr=b=e;for(var c=e.insertRow(0),g=1>=this.hdrLabels.length?a[0].length:this.hdrLabels.length,h=0;h<g;h++)c.appendChild(document.createElement("TH")),c.childNodes[h]._cellIndex=h;_isIE&&8>_isIE?c.style.position="absolute":c.style.height="auto"}g=a[1];c=document.createElement("TR");b.rows[0].parentNode.appendChild(c);for(h=0;h<a[0].length;h++)if("#cspan"==a[0][h])e=c.cells[c.cells.length-1],e.colSpan=(e.colSpan||1)+1;else if("#rspan"==a[0][h]&&1<b.rows.length){for(var l=b.rows.length-2,m=!1,e=null;!m;){for(var e=b.rows[l],n=0;n<e.cells.length;n++)if(e.cells[n]._cellIndex==h){m=n+1;break}l--}e=e.cells[m-1];e.rowSpan=(e.rowSpan||1)+1}else{l=document.createElement("TD");l._cellIndex=l._cellIndexS=h;this._hrrar&&this._hrrar[h]&&!_isIE&&(l.style.display="none");if("object"==typeof a[0][h])l.appendChild(a[0][h]);else if(l.innerHTML=this.forceDivInHeader?"\x3cdiv class\x3d'hdrcell'\x3e"+(a[0][h]||"\x26nbsp;")+"\x3c/div\x3e":a[0][h]||"\x26nbsp;",-1!=(a[0][h]||"").indexOf("#")&&(e=a[0][h].match(/(^|{)#([^}]+)(}|$)/)))if(m="_in_header_"+e[2],this[m])this[m](this.forceDivInHeader?l.firstChild:l,h,a[0][h].split(e[0]));g&&(l.style.cssText=g[h]);c.appendChild(l)}_isKHTML&&(b._kTimer&&window.clearTimeout(b._kTimer),b._kTimer=window.setTimeout(function(){b.rows[1].style.display="none";window.setTimeout(function(){b.rows[1].style.display=""},1)},500))},attachFooter:function(a,b){this.attachHeader(a,b,"_aFoot")},setCellExcellType:function(a,b,c){this.changeCellType(this.getRowById(a),b,c)},getCellExcellType:function(a,b){var c=this.getRowById(a);return this.cells3(c,b).cell._cellType||this.cellType[b]},changeCellType:function(a,b,c){c=c||this.cellType[b];var e=this.cells3(a,b),g=e.getValue();e.cell._cellType=c;e=this.cells3(a,b);e.setValue(g)},setRowExcellType:function(a,b){for(var c=this.rowsAr[a],e=0;e<c.childNodes.length;e++)this.changeCellType(c,e,b)},setColumnExcellType:function(a,b){for(var c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&"TR"==this.rowsBuffer[c].tagName&&this.changeCellType(this.rowsBuffer[c],a,b);"math"==this.cellType[a]?this._strangeParams[c]=b:this.cellType[a]=b},forEachRow:function(a){for(var b in this.rowsAr)this.rowsAr[b]&&this.rowsAr[b].idd&&a.apply(this,[this.rowsAr[b].idd])},forEachRowA:function(a){for(var b=0;b<this.rowsBuffer.length;b++)this.rowsBuffer[b]&&a.call(this,this.render_row(b).idd)},forEachCell:function(a,b){var c=this.getRowById(a);if(c)for(var e=0;e<this._cCount;e++)b(this.cells3(c,e),e)},enableAutoWidth:function(a,b,c){this._awdth=[dhx4.s2b(a),parseInt(b||99999),parseInt(c||0)];1==arguments.length&&(this.objBox.style.overflowX=a?"hidden":"auto")},updateFromXML:function(a,b,c,e){"undefined"==typeof b&&(b=!0);this._refresh_mode=[!0,b,c];this.load(a,e)},_refreshFromXML:function(a){this._f_rowsBuffer&&this.filterBy(0,"");reset=!1;window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(a){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(a):this.setValueX(a)});var b=this.cellType._dhx_find("tree"),c=dhx4.ajax.xmltop("rows",a);a=c.getAttribute("parent")||0;var e={};this._refresh_mode[2]&&(-1!=b?this._h2.forEachChild(a,function(a){e[a.id]=!0},this):this.forEachRow(function(a){e[a]=!0}));b=dhx4.ajax.xpath("//row",c);for(c=0;c<b.length;c++){var g=b[c],h=g.getAttribute("id");e[h]=!1;a=g.parentNode.getAttribute("id")||a;if(this.rowsAr[h]&&"TR"!=this.rowsAr[h].tagName)this._h2?this._h2.get[h].buff.data=g:this.rowsBuffer[this.getRowIndex(h)].data=g,this.rowsAr[h]=g;else if(this.rowsAr[h])this._process_xml_row(this.rowsAr[h],g,-1),this._postRowProcessing(this.rowsAr[h],!0),this._fake&&this._fake.rowsAr[h]&&this._fake._process_xml_row(this._fake.rowsAr[h],g,-1);else if(this._refresh_mode[1]){var l={idd:h,data:g,_parser:this._process_xml_row,_locator:this._get_xml_data},m=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(l),m=0):this.rowsBuffer.push(l);this._h2?(reset=!0,this._h2.add(h,g.parentNode.getAttribute("id")||g.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0);this.rowsAr[h]=g;g=this.render_row(m);this._insertRowAt(g,m?-1:0)}}if(this._refresh_mode[2])for(h in e)e[h]&&this.rowsAr[h]&&this.deleteRow(h);this._refresh_mode=null;window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX);reset&&(this._h2?this._renderSort():this.render_dataset());this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(a,b){var c=this.cells(a,b).cell;c._combo||(c._combo=new dhtmlXGridComboObject);return c._combo},setTabOrder:function(a){var b=a.split(this.delim);this._tabOrder=[];a=this._cCount||a.length;for(var c=0;c<a;c++)b[c]={c:parseInt(b[c]),ind:c};b.sort(function(a,b){return a.c>b.c?1:-1});for(c=0;c<a;c++)this._tabOrder[b[c].ind]=b[c+1]&&"undefined"!=typeof b[c].c?b[c+1].ind:-1*(b[0].ind+1)},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+1],this.cell._cellIndex,!0)},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1]))return!1;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(!this.editor&&this.isTreeGrid())this.collapseKids(this.row);else return!1},k39_0_0:function(){if(!this.editor&&this.isTreeGrid())this.expandKids(this.row);else return!1},k40_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var b=Math.max(a._r_select||0,this.getRowIndex(this.row.idd)),c=this._nextRow(b,1);if(c)a._r_select=null,this.selectCell(c,this.cell._cellIndex,!0),a.pagingOn&&a.showRow(c.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]);this.pagingOn&&this.rowsCol[b+1]&&this.selectCell(b+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var b=this.getRowIndex(this.row.idd)+1;-1==b||this.pagingOn&&1==b?this._key_events.k33_0_0.apply(this,[]):(b=this._nextRow(b-1,-1),this.selectCell(b,this.cell._cellIndex,!0),a.pagingOn&&b&&a.showRow(b.idd))}this._still_active=!0}},_build_master_row:function(){for(var a=document.createElement("DIV"),b=["\x3ctable\x3e\x3ctr\x3e"],c=0;c<this._cCount;c++)b.push("\x3ctd\x3e\x3c/td\x3e");b.push("\x3c/tr\x3e\x3c/table\x3e");a.innerHTML=b.join("");this._master_row=a.firstChild.rows[0]},_prepareRow:function(a){this._master_row||this._build_master_row();for(var b=this._master_row.cloneNode(!0),c=0;c<b.childNodes.length;c++)b.childNodes[c]._cellIndex=c,this._enbCid&&(b.childNodes[c].id="c_"+a+"_"+c),this.dragAndDropOff&&this.dragger.addDraggableItem(b.childNodes[c],this);b.idd=a;b.grid=this;return b},_process_jsarray_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};this._fillRow(a,this._c_order?this._swapColumns(b):b);return a},_get_jsarray_data:function(a,b){return a[b]},_process_json_row:function(a,b){b=this._c_order?this._swapColumns(b.data):b.data;return this._process_some_row(a,b)},_process_some_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};this._fillRow(a,b);return a},_get_json_data:function(a,b){return a.data[b]},_process_js_row:function(a,b){for(var c=[],e=0;e<this.columnIds.length;e++)c[e]=b[this.columnIds[e]],c[e]||0===c[e]||(c[e]="");this._process_some_row(a,c);a._attrs=b;return a},_get_js_data:function(a,b){return a[this.columnIds[b]]},_process_csv_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};this._fillRow(a,this._c_order?this._swapColumns(b.split(this.csv.cell)):b.split(this.csv.cell));return a},_get_csv_data:function(a,b){return a.split(this.csv.cell)[b]},_process_store_row:function(a,b){for(var c=[],e=0;e<this.columnIds.length;e++)c[e]=b[this.columnIds[e]];for(e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};a._attrs=b;this._fillRow(a,c)},_process_xml_row:function(a,b){var c=dhx4.ajax.xpath(this.xml.cell,b),e=[];a._attrs=this._xml_attrs(b);if(this._ud_enabled)for(var g=dhx4.ajax.xpath("./userdata",b),h=g.length-1;0<=h;h--){for(var l="",m=0;m<g[h].childNodes.length;m++)l+=g[h].childNodes[m].nodeValue;this.setUserData(a.idd,g[h].getAttribute("name"),l)}for(m=0;m<c.length;m++)if(g=c[this._c_order?this._c_order[m]:m])h=a._childIndexes?a._childIndexes[m]:m,l=g.getAttribute("type"),a.childNodes[h]&&(l&&(a.childNodes[h]._cellType=l),a.childNodes[h]._attrs=this._xml_attrs(g)),g.getAttribute("xmlcontent")||(g=g.firstChild?g.firstChild.wholeText||g.firstChild.data:""),e.push(g);for(m<c.length;m<a.childNodes.length;m++)a.childNodes[m]._attrs={};a.parentNode&&"row"==a.parentNode.tagName&&(a._attrs.parent=a.parentNode.getAttribute("idd"));this._fillRow(a,e);return a},_get_xml_data:function(a,b){for(a=a.firstChild;;){if(!a)return"";"cell"==a.tagName&&b--;if(0>b)break;a=a.nextSibling}return a.firstChild?a.firstChild.data:""},_fillRow:function(a,b){this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==a.idd&&this.editStop();for(var c=0;c<a.childNodes.length;c++)if(c<b.length||this.defVal[c]){var e=a.childNodes[c]._cellIndex,g=b[e],h=this.cells4(a.childNodes[c]);!this.defVal[e]||""!=g&&"undefined"!=typeof g||(g=this.defVal[e]);h&&h.setValue(g)}else a.childNodes[c].innerHTML="\x26nbsp;",a.childNodes[c]._clearCell=!0;return a},_postRowProcessing:function(a,b){a._attrs["class"]&&(a._css=a.className=a._attrs["class"]);a._attrs.locked&&(a._locked=!0);a._attrs.bgColor&&(a.bgColor=a._attrs.bgColor);for(var c=0,e=0;e<a.childNodes.length;e++){var g=a.childNodes[e],h=g._cellIndex,l=g._attrs.style||a._attrs.style;l&&(g.style.cssText+=";"+l);g._attrs["class"]&&(g.className+=g._attrs["class"]);if(l=g._attrs.align||this.cellAlign[h])g.align=l;g.vAlign=g._attrs.valign||this.cellVAlign[h];if(l=g._attrs.bgColor||this.columnColor[h])g.bgColor=l;g._attrs.colspan&&!b&&(this.setColspan(a.idd,e+c,g._attrs.colspan),c+=g._attrs.colspan-1);this._hrrar&&this._hrrar[h]&&!b&&(g.style.display="none")}this.callEvent("onRowCreated",[a.idd,a,null])},load:function(a,b,c){this.callEvent("onXLS",[this]);2==arguments.length&&"function"!=typeof b&&(c=b,b=null);this._last_load_type=c=c||this._last_load_type||"xml";this.xmlFileUrl||(this.xmlFileUrl=a);this._data_type=c;this.xmlLoader=this.doLoadDetails;var e=this;this.xmlLoader=function(a){e.callEvent&&(e["_process_"+c](a.xmlDoc),e._contextCallTimer||e.callEvent("onXLE",[e,0,0,a.xmlDoc,c]),b&&(b(),b=null))};return dhx4.ajax.get(a,this.xmlLoader)},loadXMLString:function(a,b){window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");this.parse({responseXML:dhx4.ajax.parse(a)},b,"xml")},loadXML:function(a,b){window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");this.load(a,b,"xml")},parse:function(a,b,c){2==arguments.length&&"function"!=typeof b&&(c=b,b=null);this._data_type=this._last_load_type=c=c||this._last_load_type||"xml";"xml"==c&&"string"==typeof a&&(a={responseXML:dhx4.ajax.parse(a)});this["_process_"+c](a);this._contextCallTimer||this.callEvent("onXLE",[this,0,0,a,c]);b&&b()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(a){var b={};if(a.attributes.length)for(var c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;return b},_process_xml:function(a){if(this._refresh_mode)return this._refreshFromXML(a);this._parsing=!0;var b=dhx4.ajax.xmltop(this.xml.top,a);if(b.tagName==this.xml.top){if(a=b.getAttribute("dhx_security"))dhtmlx.security_key=a;this._parseHead(b);a=dhx4.ajax.xpath(this.xml.row,b);var c=parseInt(b.getAttribute("pos")||0),e=parseInt(b.getAttribute("total_count")||0);this.pagingOn||(e=Math.min(e,32E6/this._srdh));var g=!1;e&&e!=this.rowsBuffer.length&&(this.rowsBuffer[e-1]||(this.rowsBuffer.length&&(g=!0),this.rowsBuffer[e-1]=null),e<this.rowsBuffer.length&&(this.rowsBuffer.splice(e,this.rowsBuffer.length-e),g=!0));if(this.isTreeGrid())return this._process_tree_xml(b);for(b=0;b<a.length;b++)this.rowsBuffer[b+c]||(e=a[b].getAttribute("id")||b+c+1,this.rowsBuffer[b+c]={idd:e,data:a[b],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[e]=a[b]);this.callEvent("onDataReady",[]);g&&this._srnd?(a=this.objBox.scrollTop,this._reset_view(),this.objBox.scrollTop=a):this.render_dataset();this._parsing=!1}},_process_jsarray:function(a){this._parsing=!0;a=a.responseText||a;"string"==typeof a&&(eval("dhtmlx.temp\x3d"+a+";"),a=dhtmlx.temp);for(var b=0;b<a.length;b++){var c=b+1;this.rowsBuffer.push({idd:c,data:a[b],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[c]=a[b]}this.render_dataset();this._parsing=!1},_process_csv:function(a){this._parsing=!0;a=a.responseText||a;a=a.replace(/\r/g,"");a=a.split(this.csv.row);if(this._csvHdr){this.clearAll();var b=a.splice(0,1)[0].split(this.csv.cell);this._csvAID||b.splice(0,1);this.setHeader(b.join(this.delim));this.init()}for(b=0;b<a.length;b++)if(a[b]||b!=a.length-1){if(this._csvAID){var c=b+1;this.rowsBuffer.push({idd:c,data:a[b],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var e=a[b].split(this.csv.cell),c=e.splice(0,1)[0];this.rowsBuffer.push({idd:c,data:e,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[c]=a[b]}this.render_dataset();this._parsing=!1},_process_js:function(a){return this._process_json(a,"js")},_process_json:function(a,b){this._parsing=!0;a=a.responseText||a;"string"==typeof a&&(eval("dhtmlx.temp\x3d"+a+";"),a=dhtmlx.temp);if("js"==b){a.data&&(a=a.data);for(var c=0;c<a.length;c++){var e=a[c],g=e.id||c+1;this.rowsBuffer.push({idd:g,data:e,_parser:this._process_js_row,_locator:this._get_js_data});this.rowsAr[g]=a[c]}}else if(a.rows)for(c=0;c<a.rows.length;c++)g=a.rows[c].id,this.rowsBuffer.push({idd:g,data:a.rows[c],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[g]=a.rows[c];a.dhx_security&&(dhtmlx.security_key=a.dhx_security);this.callEvent("onDataReady",[]);this.render_dataset();this._parsing=!1},render_dataset:function(a,b){if(this._srnd){if(this._fillers)return this._update_srnd_view();b=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(a=Math.max(a||0,(this.currentPage-1)*this.rowsBufferOutSize),b=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(a=a||0,b=b||this.rowsBuffer.length);for(var c=a;c<b;c++){var e=this.render_row(c);if(-1==e){this.xmlFileUrl&&this.callEvent("onDynXLS",[c,this._dpref?this._dpref:b-c])&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart\x3d"+c+"\x26count\x3d"+(this._dpref?this._dpref:b-c),this._data_type);b=c;break}if(!e.parentNode||!e.parentNode.tagName)if(this._insertRowAt(e,c),e._attrs.selected||e._attrs.select)this.selectRow(e,e._attrs.call?!0:!1,!0),e._attrs.selected=e._attrs.select=null;if(this._ads_count&&c-a==this._ads_count){var g=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){g._contextCallTimer=null;g.render_dataset(c,b);g._contextCallTimer||(g._context_parsing?g.callEvent("onXLE",[]):g._fixAlterCss(),g._context_parsing=!1)},this._ads_time)}}this._ads_count&&c==b&&this.callEvent("onDistributedEnd",[]);if(this._srnd&&!this._fillers){e=this.rowsBuffer.length-b;this._fillers=[];this._fake&&!this._realfake&&(this._fake._fillers=[]);for(var h=Math.round(99E4/this._srdh);0<e;){var l=_isIE||window._FFrv?Math.min(e,h):e,m=this._add_filler(b,l);m&&this._fillers.push(m);e-=l;b+=l}}this.setSizes()},render_row:function(a){if(!this.rowsBuffer[a])return-1;if(this.rowsBuffer[a]._parser){var b=this.rowsBuffer[a];if(this.rowsAr[b.idd]&&"TR"==this.rowsAr[b.idd].tagName)return this.rowsBuffer[a]=this.rowsAr[b.idd];var c=this._prepareRow(b.idd);this.rowsBuffer[a]=c;this.rowsAr[b.idd]=c;b._parser.call(this,c,b.data);this._postRowProcessing(c);return c}return this.rowsBuffer[a]},_get_cell_value:function(a,b,c){return a._locator?(this._c_order&&(b=this._c_order[b]),a._locator.call(this,a.data,b)):this.cells3(a,b)[c?c:"getValue"]()},sortRows:function(a,b,c){this.editStop();c=(c||"asc").toLowerCase();b=b||this.fldSort[a];a=a||0;if(this.isTreeGrid())this.sortTreeRows(a,b,c);else{var e={},g=this.cellType[a],h="getValue";"link"==g&&(h="getContent");if("dhxCalendar"==g||"dhxCalendarA"==g)h="getDate";if("co"==g||"coro"==g)h="getText";for(g=0;g<this.rowsBuffer.length;g++)e[this.rowsBuffer[g].idd]=this._get_cell_value(this.rowsBuffer[g],a,h);this._sortRows(a,b,c,e)}this.callEvent("onAfterSorting",[a,b,c])},_sortCore:function(a,b,c,e,g){var h="sort";this._sst&&(g.stablesort=this.rowsCol.stablesort,h="stablesort");4<b.length&&(b=window[b]);if("cus"==b){var l=this._customSorts[a];g[h](function(a,b){return l(e[a.idd],e[b.idd],c,a.idd,b.idd)})}else if("function"==typeof b)g[h](function(a,g){return b(e[a.idd],e[g.idd],c,a.idd,g.idd)});else if("str"==b)g[h](function(a,b){return"asc"==c?e[a.idd]>e[b.idd]?1:e[a.idd]<e[b.idd]?-1:0:e[a.idd]<e[b.idd]?1:e[a.idd]>e[b.idd]?-1:0});else if("int"==b)g[h](function(a,b){var g=parseFloat(e[a.idd]),g=isNaN(g)?-99999999999999:g,h=parseFloat(e[b.idd]),h=isNaN(h)?-99999999999999:h;return"asc"==c?g-h:h-g});else if("date"==b)g[h](function(a,b){var g=Date.parse(e[a.idd])||Date.parse("01/01/1900"),h=Date.parse(e[b.idd])||Date.parse("01/01/1900");return"asc"==c?g-h:h-g})},_sortRows:function(a,b,c,e){this._sortCore(a,b,c,e,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(a){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0);this.callEvent("onResetView",[]);var b=this.obj.rows[0].parentNode,c=b.removeChild(b.childNodes[0],!0);if(_isKHTML)for(var e=b.parentNode.childNodes.length-1;0<=e;e--)"TR"==b.parentNode.childNodes[e].tagName&&b.parentNode.removeChild(b.parentNode.childNodes[e],!0);else if(_isIE)for(e=b.childNodes.length-1;0<=e;e--)b.childNodes[e].removeNode(!0);else b.innerHTML="";b.appendChild(c);this.rowsCol=dhtmlxArray();this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;a||this.render_dataset()}},deleteRow:function(a,b){b||(b=this.getRowById(a));if(b){this.editStop();if(!this._realfake&&0==this.callEvent("onBeforeRowDeleted",[a]))return!1;var c=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){b.parentNode&&b.parentNode.removeChild(b);var e=this.rowsCol._dhx_find(b);-1!=e&&this.rowsCol._dhx_removeAt(e);for(var g=0;g<this.rowsBuffer.length;g++)if(this.rowsBuffer[g]&&this.rowsBuffer[g].idd==a){this.rowsBuffer._dhx_removeAt(g);e=g;break}}else c=this._h2.get[a].parent.id,this._removeTrGrRow(b);this.rowsAr[a]=null;for(g=0;g<this.selectedRows.length;g++)this.selectedRows[g].idd==a&&this.selectedRows._dhx_removeAt(g);if(this._srnd){if(this._fillers)for(g=0;g<this._fillers.length;g++){var h=this._fillers[g];h&&(h[0]>=e?this._update_fillers(g,0,-1):h[0]+h[1]>e&&this._update_fillers(g,-1,0))}this._update_srnd_view()}this.pagingOn&&this.changePage();this._realfake||this.callEvent("onAfterRowDeleted",[a,c]);this.callEvent("onGridReconstructed",[]);this._ahgr&&this.setSizes();return!0}},_addRow:function(a,b,c){if(-1==c||"undefined"==typeof c)c=this.rowsBuffer.length;"string"==typeof b&&(b=b.split(this.delim));a=this._prepareRow(a);a._attrs={};for(var e=0;e<a.childNodes.length;e++){a.childNodes[e].className=this.cellClassNames&&this.cellClassNames[e]||"";a.childNodes[e]._attrs=this.cellAttrs&&this.cellAttrs[e]||{};var g=this.hwReport&&this.hwReport.getOriginCellById(a.childNodes[e]._attrs.sid);g&&(a.childNodes[e]._disabled=g&&g.getIsDisabled())}this.rowsAr[a.idd]=a;this._h2&&(this._h2.get[a.idd].buff=a);this._fillRow(a,b);this._postRowProcessing(a);if(this._skipInsert)return this._skipInsert=!1,this.rowsAr[a.idd]=a;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(c,a),this.rowsAr[a.idd]=a;if(this._fillers){this.rowsCol._dhx_insertAt(c,null);this.rowsBuffer._dhx_insertAt(c,a);this._fake&&this._fake.rowsCol._dhx_insertAt(c,null);this.rowsAr[a.idd]=a;b=!1;for(e=0;e<this._fillers.length;e++){if((g=this._fillers[e])&&g[0]<=c&&g[0]+g[1]>=c){g[1]+=1;var h=g[2].firstChild.style.height=parseInt(g[2].firstChild.style.height)+this._srdh+"px";b=!0;this._fake&&(this._fake._fillers[e][1]++,this._fake._fillers[e][2].firstChild.style.height=h)}g&&g[0]>c&&(g[0]+=1,this._fake&&this._fake._fillers[e][0]++)}b||this._fillers.push(this._add_filler(c,1,0==c?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[c-1]));return a}this.rowsBuffer._dhx_insertAt(c,a);return this._insertRowAt(a,c)},addRow:function(a,b,c){b=this._addRow(a,b,c);this.dragContext||this.callEvent("onRowAdded",[a]);this.pagingOn&&this.changePage(this.currentPage);this._srnd&&this._update_srnd_view();b._added=!0;this._srnd&&!this._fillers&&(this._fillers=[]);this._ahgr&&this.setSizes();this.callEvent("onGridReconstructed",[]);return b},_insertRowAt:function(a,b,c){this.rowsAr[a.idd]=a;if(this._skipInsert)return this._skipInsert=!1,a;0>b||!b&&0!==parseInt(b)?b=this.rowsCol.length:b>this.rowsCol.length&&(b=this.rowsCol.length);if(this._cssEven){var e=a.className.replace(this._cssUnEven,"");1==(this._cssSP?this.getLevel(a.idd):b)%2?a.className=e+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(a.idd):""):a.className=e+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(a.idd):"")}c||(b!=this.obj.rows.length-1&&this.rowsCol[b]?this.rowsCol[b].parentNode.insertBefore(a,this.rowsCol[b]):_isKHTML?this.obj.appendChild(a):this.obj.firstChild.appendChild(a));this.rowsCol._dhx_insertAt(b,a);this.callEvent("onRowInserted",[a,b]);return a},getRowById:function(a){var b=this.rowsAr[a];if(b){if("TR"!=b.tagName){for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==a)return this.render_row(c);if(this._h2)return this.render_row(null,b.idd)}return b}return null},cellById:function(a,b){return this.cells(a,b)},cells:function(a,b){if(0==arguments.length)return this.cells4(this.cell);var c=this.getRowById(a);if(!c){debugger;return{}}var e=c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b];!e&&c._childIndexes&&(e=c.firstChild||{});return this.cells4(e)},cellByIndex:function(a,b){return this.cells2(a,b)},cells2:function(a,b){var c=this.render_row(a),e=c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b];!e&&c._childIndexes&&(e=c.firstChild||{});return this.cells4(e)},cells3:function(a,b){return this.cells4(a._childIndexes?a.childNodes[a._childIndexes[b]]:a.childNodes[b])},cells4:function(a){var b=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];if(b)return new b(a)},cells5:function(a,b){b=b||a._cellType||this.cellType[a._cellIndex];this._ecache[b]||(this._ecache[b]=new (window["eXcell_"+b]?window["eXcell_"+b]:eXcell_ro)(a));this._ecache[b].cell=a;return this._ecache[b]},dma:function(a){this._ecache||(this._ecache={});a&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!a&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(a){this.smartTabOrder=0<arguments.length?dhx4.s2b(a):!0},setExternalTabOrder:function(a,b){var c=this;this.tabStart="object"==typeof a?a:document.getElementById(a);var e=this.tabStart.onkeydown;this.tabStart.onkeydown=function(a){e&&e.call(this,a);a=a||window.event;if(9==a.keyCode&&!a.shiftKey)return a.cancelBubble=!0,c.selectCell(0,0,0,0,1),c.smartTabOrder&&c.cells2(0,0).isDisabled()&&c._key_events.k9_0_0.call(c),this.blur(),!1};_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown);this.tabEnd="object"==typeof b?b:document.getElementById(b);var g=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(a){g&&g.call(this,a);a=a||window.event;if(9==a.keyCode&&a.shiftKey)return a.cancelBubble=!0,c.selectCell(c.getRowsNum()-1,c.getColumnCount()-1,0,0,1),c.smartTabOrder&&c.cells2(c.getRowsNum()-1,c.getColumnCount()-1).isDisabled()&&c._key_events.k9_0_1.call(c),this.blur(),!1};_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){this._ui_seed||(this._ui_seed=(new Date).valueOf());return this._ui_seed++},setIconset:function(a){this.iconset=a},clearAndLoad:function(){if(this._last_load_request){var a=this._last_load_request.xmlDoc;if(4!=a.readyState)try{a.onreadystatechange=function(){},a.abort()}catch(b){}}a=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=a;this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var a=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,a,Math.min(a+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}var a=Math.floor(this.objBox.scrollTop/this._srdh),b=Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh);if(this.multiLine){for(var c=this.objBox.scrollTop,a=0;0<=c;)c-=this.rowsCol[a]?this.rowsCol[a].offsetHeight:this._srdh,a++;a--;c+=this.objBox.offsetHeight;for(b=0;0<=c;)c-=this.rowsCol[a+b]?this.rowsCol[a+b].offsetHeight:this._srdh,b++}return[a,b,this.rowsBuffer.length]}};(function(){function a(a,b){this[a]=b}function b(a,b){this[a].call(this,b)}function c(a,b){this[a].call(this,b.join(this.delim))}var e=[{name:"label",def:"\x26nbsp;",operation:"setHeader",type:function(a,b,c){function e(a,b,c){g[b]||(g[b]=[]);"object"==typeof c&&(c.toString=function(){return this.text});g[b][a]=c}var g=[];for(a=0;a<b.length;a++)if("object"==typeof b[a]&&b[a].length)for(c=0;c<b[a].length;c++)e(a,c,b[a][c]);else e(a,0,b[a]);for(a=0;a<g.length;a++)for(c=0;c<g[0].length;c++){b=g[a][c];g[a][c]=(b||"").toString()||"\x26nbsp;";if(b&&b.colspan)for(var h=1;h<b.colspan;h++)e(c+h,a,"#cspan");if(b&&b.rowspan)for(h=1;h<b.rowspan;h++)e(c,a+h,"#rspan")}this.setHeader(g[0]);for(a=1;a<g.length;a++)this.attachHeader(g[a])}},{name:"id",def:"",operation:"columnIds",type:a},{name:"width",def:"*",operation:"setInitWidths",type:c},{name:"align",def:"left",operation:"cellAlign",type:a},{name:"valign",def:"middle",operation:"cellVAlign",type:a},{name:"sort",def:"na",operation:"fldSort",type:a},{name:"type",def:"ro",operation:"setColTypes",type:c},{name:"options",def:"",operation:"",type:function(a,b){for(var c=0;c<b.length;c++)if("object"==typeof b[c]){var e=this.getCombo(c),g;for(g in b[c])e.put(g,b[c][g])}}}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(a){return[a.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(a){for(var c=0;c<e.length;c++){for(var g=[],m=0;m<a.length;m++)g[m]=a[m][e[c].name]||e[c].def;(e[c].type||b).call(this,e[c].operation,g,a)}this.init()},rows:function(a){},headers:function(a){for(var b=0;b<a.length;b++)this.attachHeader(a[b])}})})();dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(a,c){this.obj._h2?this.obj.addRow(c,b,null,parent):this.obj.addRow(c,[],0);var b=this.obj.getRowById(c);b&&(this.obj._process_xml_row(b,a.firstChild),this.obj._postRowProcessing(b))});a.attachEvent("updateCallback",function(a,c){var b=this.obj.getRowById(c);b&&(this.obj._process_xml_row(b,a.firstChild),this.obj._postRowProcessing(b))});a.attachEvent("deleteCallback",function(a,c){this.obj.setUserData(c,this.action_param,"true_deleted");this.obj.deleteRow(c)});a._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(b,c,e){if(a._columns&&!a._columns[e])return!0;e=this.cells(c,e);1==b?e.isCheckbox()&&a.setUpdated(c,!0):2==b&&e.wasChanged()&&a.setUpdated(c,!0);return!0});this.attachEvent("onRowPaste",function(b){a.setUpdated(b,!0)});this.attachEvent("onUndo",function(b){a.setUpdated(b,!0)});this.attachEvent("onRowIdChange",function(b,c){var e=a.findRow(b);e<a.updatedRows.length&&(a.updatedRows[e]=c)});this.attachEvent("onSelectStateChanged",function(b){"row"==a.updateMode&&a.sendData();return!0});this.attachEvent("onEnter",function(b,c){"row"==a.updateMode&&a.sendData();return!0});this.attachEvent("onBeforeRowDeleted",function(b){if(a._silent_mode||!this.rowsAr[b])return!0;if(this.dragContext&&a.dnd)return window.setTimeout(function(){a.setUpdated(b,!0)},1),!0;var c=a.getState(b);this._h2&&this._h2.forEachChild(b,function(b){a.setUpdated(b.id,!1);a.markRow(b.id,!0,"deleted")},this);if("inserted"==c)return a.set_invalid(b,!1),a.setUpdated(b,!1),!0;if("deleted"==c)return!1;if("true_deleted"==c)return a.setUpdated(b,!1),!0;a.setUpdated(b,!0,"deleted");return!1});this.attachEvent("onBindUpdate",function(b,c,e){a.setUpdated(e,!0)});this.attachEvent("onRowAdded",function(b){if(this.dragContext&&a.dnd)return!0;a.setUpdated(b,!0,"inserted");return!0});a._getRowData=function(a,c){var b=[];b.gr_id=a;this.obj.isTreeGrid()&&(b.gr_pid=this.obj.getParentId(a));for(var g=this.obj.getRowById(a),h=0;h<this.obj._cCount;h++){var l=this.obj._c_order?this.obj._c_order[h]:h,m=this.obj.cells(g.idd,h);if(!this._changed||m.wasChanged())this._endnm?b[this.obj.getColumnId(h)]=m.getValue():b["c"+l]=m.getValue()}if(g=this.obj.UserData[a])for(h=0;h<g.keys.length;h++)g.keys[h]&&0!=g.keys[h].indexOf("__")&&(b[g.keys[h]]=g.values[h]);if(g=this.obj.UserData.gridglobaluserdata)for(h=0;h<g.keys.length;h++)b[g.keys[h]]=g.values[h];return b};a._clearUpdateFlag=function(a){if(this.obj.getRowById(a))for(var b=0;b<this.obj._cCount;b++)this.obj.cells(a,b).cell.wasChanged=!1};a.checkBeforeUpdate=function(a){for(var b=!0,e=[],g=0;g<this.obj._cCount;g++)if(this.mandatoryFields[g]){var h=this.mandatoryFields[g].call(this.obj,this.obj.cells(a,g).getValue(),a,g);"string"==typeof h?(this.messages.push(h),b=!1):(b&=h,e[g]=!h)}b||(this.set_invalid(a,"invalid",e),this.setUpdated(a,!1));return b}};dhx4.attachEvent("onGridCreated",function(a){a._con_f_used=[].concat(a._con_f_used);dhtmlXGridObject.prototype._con_f_used=[];var b=function(a){a=a.replace(/(\?|\&)connector[^\f]*/g,"");return a+(-1!=a.indexOf("?")?"\x26":"?")+"connector\x3dtrue"+(0<this.hdr.rows.length?"\x26dhx_no_header\x3d1":"")+(this._connector_sorting||"")+(this._connector_filter||"")},c=function(a,c,e){this._connector_sorting="\x26dhx_sort["+c+"]\x3d"+e;return b.call(this,a)},e=function(a,c,e){for(var g=[],h=0;h<c.length;h++)g[h]="dhx_filter["+c[h]+"]\x3d"+encodeURIComponent(e[h]);this._connector_filter="\x26"+g.join("\x26");return b.call(this,a)};a.attachEvent("onCollectValues",function(a){return this._con_f_used[a]?"object"==typeof this._con_f_used[a]?this._con_f_used[a]:!1:!0});a.attachEvent("onDynXLS",function(){this.xmlFileUrl&&(this.xmlFileUrl=b.call(this,this.xmlFileUrl));return!0});a.attachEvent("onBeforeSorting",function(a,b,e){if("connector"==b){var g=this;this.clearAndLoad(c.call(this,this.xmlFileUrl,a,e),function(){g.setSortImgState(!0,a,e)});return!1}return!0});a.attachEvent("onFilterStart",function(a,b){if(this._con_f_used.length){var c=this.getSortingState();this.clearAndLoad(e.call(this,this.xmlFileUrl,a,b));c.length&&this.setSortImgState(!0,c[0],c[1]);return!1}return!0})});dhtmlXGridObject.prototype._con_f_used=[];dhtmlXGridObject.prototype._in_header_connector_text_filter=function(a,b){this._con_f_used[b]||(this._con_f_used[b]=1);return this._in_header_text_filter(a,b)};dhtmlXGridObject.prototype._in_header_connector_select_filter=function(a,b){this._con_f_used[b]||(this._con_f_used[b]=2);return this._in_header_select_filter(a,b)};dhtmlXGridObject.prototype.load_connector||(dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(a,b,c){if(!this._colls_loaded&&this.cellType){for(var e=[],g=0;g<this.cellType.length;g++)0!=this.cellType[g].indexOf("co")&&0!=this.cellType[g].indexOf("clist")&&2!=this._con_f_used[g]||e.push(g);e.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"\x26":"?")+"connector\x3dtrue\x26dhx_colls\x3d"+e.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(a,b,c){this._parseHead_connector.apply(this,arguments);if(!this._colls_loaded){for(var e=dhx4.ajax.xpath("./coll_options",arguments[0]),g=0;g<e.length;g++){var h=e[g].getAttribute("for"),l=[],m=null;"combo"==this.cellType[h]?m=this.getColumnCombo(h):0==this.cellType[h].indexOf("co")&&(m=this.getCombo(h));for(var n=dhx4.ajax.xpath("./item",e[g]),q=[],r=0;r<n.length;r++){var v=n[r].getAttribute("value");if(m){var u=n[r].getAttribute("label")||v;m.addOption?q.push([v,u]):m.put(v,u);l[l.length]=u}else l[l.length]=v}q.length?m&&m.addOption(q):l.length&&!m&&this.registerCList&&this.registerCList(1*h,l);this._con_f_used[1*h]&&(this._con_f_used[1*h]=l)}this._colls_loaded=!0}});dhtmlXGridObject.prototype.getRowData=function(a){for(var b={},c=this.getColumnsNum(),e=0;e<c;e++){var g=this.getColumnId(e);g&&(b[g]=this.cells(a,e).getValue())}return b};dhtmlXGridObject.prototype.setRowData=function(a,b){for(var c=this.getColumnsNum(),e=0;e<c;e++){var g=this.getColumnId(e);g&&b.hasOwnProperty(g)&&this.cells(a,e).setValue(b[g])}};dhtmlXGridObject.prototype.clearAddedState=function(){this.forEachRow(function(a){a=this.rowsAr[a];"TR"==a.tagName&&(a._added=!1)});this._added_rows=[]};function dhtmlXGridCellObject(a){this.destructor=function(){return this.base=this.grid=this.cell=this.cell.obj=null};this.cell=a;this.getValue=function(){return this.cell.textContent&&"TEXTAREA"==this.cell.textContent.tagName?this.cell.textContent.value:this.cell.innerHTML._dhx_trim()};this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()};this.getFont=function(){arOut=Array(3);this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily);if("bold"==this.cell.style.fontWeight||"bold"==this.cell.parentNode.style.fontWeight)arOut[1]="bold";if("italic"==this.cell.style.fontStyle||"italic"==this.cell.parentNode.style.fontWeight)arOut[1]+="italic";arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"";return arOut.join("-")};this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"};this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"};this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(a){fntAr=a.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))};this.setTextColor=function(a){this.cell.style.color=a};this.setBgColor=function(a){""==a&&(a=null);this.cell.style.background=a};this.setHorAlign=function(a){this.cell.style.textAlign=1==a.length?"c"==a?"center":"l"==a?"left":"right":a};this.wasChanged=function(){return this.cell.wasChanged?!0:!1};this.isCheckbox=function(){var a=this.cell.firstChild;return a&&"INPUT"==a.tagName?(type=a.type,"radio"==type||"checkbox"==type?!0:!1):!1};this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked};this.isDisabled=function(){return this.cell._disabled};this.setChecked=function(a){this.isCheckbox()&&("true"!=a&&1!=a&&(a=!1),this.cell.firstChild.checked=a)};this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);this.isCheckbox()&&(this.cell.firstChild.disabled=a,this.disabledF&&this.disabledF(a));this.cell._disabled=a}}dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,b){this.cell._attrs[a]=b},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var a=(this.obj||this.cell).getElementsByTagName("TEXTAREA");a.length||(a=(this.obj||this.cell).getElementsByTagName("INPUT"));return a[0]}};dhtmlXGridCellObject.prototype.setValue=function(a){"number"==typeof a||a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="\x26nbsp;",this.cell._clearCell=!0);this.setCValue(a)};dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent};dhtmlXGridCellObject.prototype.setCValue=function(a,b){this.cell.innerHTML=a;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,1<arguments.length?b:a])};dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(a));this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])};dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a};dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()};function eXcell(){this.val=this.obj=null;this.changeState=function(){return!1};this.edit=function(){this.val=this.getValue()};this.detach=function(){return!1};this.getPosition=function(a){for(var b=0,c=0;"BODY"!=a.tagName;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return[b,c]}}eXcell.prototype=new dhtmlXGridCellObject;function eXcell_ed(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){this.cell.atag=this.grid.multiLine?"TEXTAREA":"INPUT";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(a){(a||event).cancelBubble=!0};this.obj.onmousedown=function(a){(a||event).cancelBubble=!0};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);this.obj.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0};_isIE&&(this.obj.focus(),this.obj.blur());this.obj.focus()};this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_ed.prototype=new eXcell;function eXcell_edtxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(a){a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0);this.setCTxtValue(a)}}eXcell_edtxt.prototype=new eXcell_ed;function eXcell_edn(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_edn.prototype=new eXcell_ed;eXcell_edn.prototype.setValue=function(a){if(a&&""!=a.toString()._dhx_trim())this.cell._clearCell=!1,this.cell._orig_value=a;else return this.cell._clearCell=!0,this.setCValue("\x26nbsp;",0);this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)};function eXcell_ch(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")};this.changeState=function(a){!0!==a||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0));!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return!0};this.isChecked=function(){return"1"==this.getValue()?!0:!1};this.setChecked=function(a){this.setValue(a.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch.prototype=new eXcell;eXcell_ch.prototype.setValue=function(a){this.cell.style.verticalAlign="middle";a&&(a=a.toString()._dhx_trim(),"false"==a||"0"==a)&&(a="");a?(a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.cell.setAttribute("excell","ch");this.setCValue("\x3cimg src\x3d'"+this.grid.imgURL+"item_chk"+a+".gif' onclick\x3d'new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble\x3dtrue; '\x3e",this.cell.chstate)};function eXcell_ra(a){this.base=eXcell_ch;this.base(a);this.grid=a.parentNode.grid;this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")};this.changeState=function(a){!1===a&&1==this.getValue()||!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.edit=null}eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(a){this.cell.style.verticalAlign="middle";a&&(a=a.toString()._dhx_trim(),"false"==a||"0"==a)&&(a="");a?(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]&&(a=this.grid.cells(this.grid._RaSeCol[this.cell._cellIndex],this.cell._cellIndex),a.setValue("0"),this.grid.rowsAr[a.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,a.cell.parentNode.idd,a.cell._cellIndex])),this.grid._RaSeCol[this.cell._cellIndex]=this.cell.parentNode.idd,a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.cell.setAttribute("excell","ra");this.setCValue("\x3cimg src\x3d'"+this.grid.imgURL+"radio_chk"+a+".gif' onclick\x3d'new eXcell_ra(this.parentNode).changeState(false);'\x3e",this.cell.chstate)};function eXcell_txt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(a){(a||event).cancelBubble=!0};var a=this.grid.getPosition(this.cell);this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;document.body.appendChild(this.obj);_isOpera&&(this.obj.onkeypress=function(a){if(9==a.keyCode||27==a.keyCode)return!1});this.obj.onkeydown=function(a){a=a||event;if(9==a.keyCode||27==a.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:a.keyCode,shiftKey:a.shiftKey,srcElement:"0"}),!1};this.obj.style.left=a[0]+"px";this.obj.style.top=a[1]+this.cell.offsetHeight+"px";this.obj.style.width=(200>this.cell.offsetWidth?200:this.cell.offsetWidth)+16+"px";_isIE&&(this.obj.select(),this.obj.value=this.obj.value);this.obj.focus()};this.detach=function(){var a;a=this.obj.value;this.cell._clearCell=""==a?!0:!1;this.setValue(a);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue()};this.getValue=function(){return this.obj?this.obj.value:this.cell._clearCell?"":"undefined"!=typeof this.cell._brval?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}eXcell_txt.prototype=new eXcell;function eXcell_txttxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(a){(this.cell._brval=a)&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0);this.setCTxtValue(a)}}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(a){(this.cell._brval=a)&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="\x26nbsp;",this.cell._clearCell=!0);!this.grid.multiLine||this.cell._clearCell?this.setCValue(a,this.cell._brval):this.setCValue(a.replace(/\n/g,"\x3cbr/\x3e"),a)};function eXcell_co(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0);this.shiftNext=function(){var a=this.list.options[this.list.selectedIndex+1];a&&(a.selected=!0);this.obj.value=this.list.options[this.list.selectedIndex].text;return!0};this.shiftPrev=function(){if(0!=this.list.selectedIndex){var a=this.list.options[this.list.selectedIndex-1];a&&(a.selected=!0);this.obj.value=this.list.options[this.list.selectedIndex].text}return!0};this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();var a=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(a){(a||event).cancelBubble=!0};this.obj.onmousedown=function(a){(a||event).cancelBubble=!0};this.obj.value=this.text;this.obj.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0};var c=this;this.obj.onkeyup=function(a){a=(a||event).keyCode;if(38!=a&&40!=a&&9!=a){a=this.readonly?String.fromCharCode(a):this.value;for(var b=c.list.options,e=0;e<b.length;e++)if(0==b[e].text.indexOf(a))return b[e].selected=!0}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=a[0]+"px";this.list.style.top=a[1]+this.cell.offsetHeight+"px";this.list.onclick=function(a){a=a||window.event;c.editable=!1;c.grid.editStop();a.cancelBubble=!0};for(var a=this.combo.getKeys(),e=!1,g=0,h=0;h<a.length;h++){var l=this.combo.get(a[h]);this.list.options[this.list.options.length]=new Option(l,a[h]);a[h]==this.val&&(g=this.list.options.length-1,e=!0)}0==e&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),g=this.list.options.length-1);document.body.appendChild(this.list);this.list.size="6";this.cstate=1;this.editable?this.cell.innerHTML="":(this.obj.style.width="0px",this.obj.style.height="0px");this.cell.appendChild(this.obj);this.list.options[g].selected=!0;this.editable&&(this.obj.focus(),this.obj.focus());this.editable||(this.obj.style.visibility="hidden",this.obj.style.position="absolute",this.list.focus(),this.list.onkeydown=function(a){a=a||window.event;c.grid.setActive(!0);if(30>a.keyCode)return c.grid.doKey({target:c.cell,keyCode:a.keyCode,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey})})};this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value};this.detach=function(){this.val!=this.getValue()&&(this.cell.wasChanged=!0);if(null!=this.list.parentNode)if(this.editable){var a=this.list.options[this.list.selectedIndex];if(a&&a.text==this.obj.value)this.setValue(this.list.value);else{var a=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),c=a.values._dhx_find(this.obj.value);-1!=c?this.setValue(a.keys[c]):this.setValue(this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);this.list.parentNode&&this.list.parentNode.removeChild(this.list);this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj);return this.val!=this.getValue()}}eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};eXcell_co.prototype.setValue=function(a){if("object"==typeof a){var b=dhx4.ajax.xpath("./option",a);b.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var c=0;c<b.length;c++)this.cell._combo.put(b[c].getAttribute("value"),b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}""==(a||"").toString()._dhx_trim()&&(a=null);this.cell.combo_value=a;null!==a?(b=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a),this.setCValue(null===b?a:b,a)):this.setCValue("\x26nbsp;",a)};function eXcell_coro(a){this.base=eXcell_co;this.base(a);this.editable=!1}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(a){this.base=eXcell_co;this.base(a)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent};eXcell_cotxt.prototype.setValue=function(a){if("object"==typeof a){var b=dhx4.ajax.xpath("./option",a);b.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var c=0;c<b.length;c++)this.cell._combo.put(b[c].getAttribute("value"),b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}""==(a||"").toString()._dhx_trim()&&(a=null);null!==a?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a)||a,a):this.setCTxtValue(" ",a);this.cell.combo_value=a};function eXcell_corotxt(a){this.base=eXcell_co;this.base(a);this.editable=!1}eXcell_corotxt.prototype=new eXcell_cotxt;function eXcell_cp(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var a=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=a[0]+"px";this.obj.style.zIndex=1E3;this.obj.style.top=a[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(a){1==a.length&&(a="0"+a);return a};this.colorPanel=function(a,c){var b=document.createElement("TABLE");c.appendChild(b);b.cellSpacing=0;b.editor_obj=this;b.style.cursor="default";b.onclick=function(a){a=a||window.event;a=a.target||a.srcElement;var b=a.parentNode.parentNode.parentNode.editor_obj;b&&(b.setValue(a._bg),b.grid.editStop())};for(var g=256/a,h=0;h<=256/g;h++)for(var l=b.insertRow(h),m=0;m<=256/g;m++)for(var n=0;n<=256/g;n++){R=new Number(g*h)-(0==h?0:1);G=new Number(g*m)-(0==m?0:1);B=new Number(g*n)-(0==n?0:1);var q=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16)),r=l.insertCell(m);r.width="10px";r.innerHTML="\x26nbsp;";r.title=q.toUpperCase();r.style.backgroundColor="#"+q;r._bg="#"+q;null!=this.val&&"#"+q.toUpperCase()==this.val.toUpperCase()&&(r.style.border="2px solid white")}};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){null!=this.obj.offsetParent&&document.body.removeChild(this.obj);return this.val!=this.getValue()}}eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(a){this.setCValue("\x3cdiv style\x3d'width:100%;height:"+(this.grid.multiLine?"100%":23)+";background-color:"+(a||"")+";border:0px;'\x3e\x26nbsp;\x3c/div\x3e",a);this.cell.firstChild._bg=a};function eXcell_img(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var a=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:""),a=a+("^"+this.cell.lnk);this.cell.trg&&(a+="^"+this.cell.trg);return a}};this.isDisabled=function(){return!0}}eXcell_img.prototype=new eXcell;eXcell_img.prototype.getTitle=function(){return this.cell._brval};eXcell_img.prototype.setValue=function(a){var b=a;if(-1!=(a||"").indexOf("^")){var c=a.split("^");a=c[0];b=this.cell._attrs.title||c[1];2<c.length&&(this.cell.lnk=c[2],c[3]&&(this.cell.trg=c[3]));this.cell.titFl="1"}this.grid.multiLine?this.setCValue("\x3cimg src\x3d'"+this.grid.iconURL+(a||"")._dhx_trim()+"' border\x3d'0'\x3e",a):this.setCValue("\x3cimg src\x3d'"+this.grid.iconURL+(a||"")._dhx_trim()+"' border\x3d'0' style\x3d'max-height:"+(this.grid._srdh-4)+"px'\x3e",a);this.cell.lnk&&(this.cell.innerHTML="\x3ca href\x3d'"+this.cell.lnk+"' target\x3d'"+this.cell.trg+"'\x3e"+this.cell.innerHTML+"\x3c/a\x3e");this.cell._brval=b};function eXcell_icon(a){this.base=eXcell_ed;this.base(a);try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.setValue=function(a){this.cell._raw_value=a;this.setCValue('\x3cdiv class\x3d"dhx_grid_icon"\x3e\x3ci class\x3d"fa fa-'+a.toString()._dhx_trim()+'"\x3e\x3c/i\x3e\x3c/div\x3e')};this.getValue=function(){return this.cell._raw_value};this.isDisabled=function(){return!0}}eXcell_icon.prototype=new eXcell_ed;function eXcell_price(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){return 1<this.cell.childNodes.length?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(a){isNaN(parseFloat(a))&&(a=this.val||0);var b="green";0>a&&(b="red");this.setCValue("\x3cspan\x3e$\x3c/span\x3e\x3cspan style\x3d'padding-right:2px;color:"+b+";'\x3e"+a+"\x3c/span\x3e",a)};function eXcell_dyn(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){if(!this.cell.firstChild.childNodes[1])return"";var a=this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim(),c=this.grid._aplNFb(a,this.cell._cellIndex);return isNaN(Number(c))?a:c}}eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.getValue=function(){eXcell_ed.prototype.getValue.call(this)};eXcell_dyn.prototype.setValue=function(a){if(!a||isNaN(Number(a)))""!==a&&(a=0);else{if(0<a)var b="green",c="dyn_up.gif";else 0==a?(b="black",c="dyn_.gif"):(b="red",c="dyn_down.gif");a=this.grid._aplNF(a,this.cell._cellIndex)}this.setCValue("\x3cdiv class\x3d'grid_cell_dyn'\x3e\x3cimg src\x3d'"+this.grid.imgURL+""+c+"'\x3e\x3cspan style\x3d'color:"+b+";'\x3e"+a+"\x3c/span\x3e\x3c/div\x3e",a)};function eXcell_ro(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}eXcell_ro.prototype=new eXcell;window.eXcell_hidden=function(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell.val}};eXcell_hidden.prototype=new eXcell;eXcell_hidden.prototype.setValue=function(a){this.cell.val=a};function eXcell_ron(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}eXcell_ron.prototype=new eXcell;eXcell_ron.prototype.setValue=function(a){if(0!==a&&(!a||""==a.toString()._dhx_trim()))return this.setCValue("\x26nbsp;"),this.cell._clearCell=!0;this.cell._orig_value=a;this.cell._clearCell=!1;this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0")};function eXcell_rotxt(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return!0};this.setValue=function(a){a?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0);this.setCTxtValue(a)};this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}eXcell_rotxt.prototype=new eXcell;function dhtmlXGridComboObject(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;this.put=function(a,b){for(var c=0;c<this.keys.length;c++)if(this.keys[c]==a)return this.values[c]=b,!0;this.values[this.values.length]=b;this.keys[this.keys.length]=a};this.get=function(a){for(var b=0;b<this.keys.length;b++)if(this.keys[b]==a)return this.values[b];return null};this.clear=function(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray};this.remove=function(a){for(var b=0;b<this.keys.length;b++)if(this.keys[b]==a)return this.keys._dhx_removeAt(b),this.values._dhx_removeAt(b),!0};this.size=function(){for(var a=0,b=0;b<this.keys.length;b++)null!=this.keys[b]&&a++;return a};this.getKeys=function(){for(var a=[],b=0;b<this.keys.length;b++)null!=this.keys[b]&&(a[a.length]=this.keys[b]);return a};this.save=function(){this._save=[];for(var a=0;a<this.keys.length;a++)this._save[a]=[this.keys[a],this.values[a]]};this.restore=function(){if(this._save){this.keys[a]=[];this.values[a]=[];for(var a=0;a<this._save.length;a++)this.keys[a]=this._save[a][0],this.values[a]=this._save[a][1]}};return this}function Hashtable(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;return this}Hashtable.prototype=new dhtmlXGridComboObject;"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachGrid=function(a){this.callEvent("_onBeforeContentAttach",["grid"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);this.dataType="grid";a&&"object"===typeof a&&!a.tagName&&(a.parent=b,b=a);this.dataObj=new dhtmlXGridObject(b);this.dataObj.setSkin(this.conf.skin);"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&null!=navigator.userAgent.match(/7[\.\d]* mobile/gi)&&null!=navigator.userAgent.match(/AppleWebKit/gi)&&(this.dataObj.objBox.style.webkitOverflowScrolling="auto");"material"==this.conf.skin&&"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(this.cell.childNodes[this.conf.idx.cont].style.overflow="hidden");"dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2);this.callEvent("_onContentAttach",[]);return this.dataObj});dhtmlXGridObject.prototype.setRowspan=function(a,b,c){if(1!=c){var e=this[this._bfs_cells?"_bfs_cells":"cells"](a,b).cell,g=this.rowsAr[a];if(e.rowSpan&&1!=e.rowSpan)for(var h=g.nextSibling,l=1;l<e.rowSpan;l++){var m=h.childNodes[h._childIndexes[e._cellIndex+1]],n=document.createElement("TD");n.innerHTML="\x26nbsp;";n._cellIndex=e._cellIndex;n._clearCell=!0;m?m.parentNode.insertBefore(n,m):h.parentNode.appendChild(n);this._shiftIndexes(h,e._cellIndex,-1);h=h.nextSibling}e.rowSpan=c;g=this._h2?this.rowsAr[this._h2.get[g.idd].parent.childs[this._h2.get[g.idd].index+1].id]:g.nextSibling||this.rowsCol[this.rowsCol._dhx_find(g)+1];h=[];for(l=1;l<c;l++){for(n=0;n<e.colSpan;n++)m=this._fake&&!this._realfake?this._bfs_cells3(g,b+n).cell:this.cells3(g,b+n).cell,this._shiftIndexes(g,e._cellIndex+n,1),m&&m.parentNode.removeChild(m);h.push(g);this._h2?(g=this._h2.get[g.idd].parent.childs[this._h2.get[g.idd].index+1])&&(g=this.rowsAr[g.id]):g=g.nextSibling||this.rowsCol[this.rowsCol._dhx_find(g)+1]}this.rowsAr[a]._rowSpan=this.rowsAr[a]._rowSpan||{};this.rowsAr[a]._rowSpan[b]=h;this._fake&&!this._realfake&&b<this._fake._cCount&&this._fake.setRowspan(a,b,c)}};dhtmlXGridObject.prototype._shiftIndexes=function(a,b,c){if(!a._childIndexes){a._childIndexes=[];for(var e=0;e<a.childNodes.length;e++)a._childIndexes[e]=e}for(e=0;e<a._childIndexes.length;e++)e>b&&(a._childIndexes[e]=Math.max(a._childIndexes[e]-c,0))};dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0;this.enableRowspan=function(){};this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var a=1;a<this.obj.rows.length;a++)if(this.obj.rows[a]._rowSpan){var b=this.obj.rows[a],c;for(c in b._rowSpan)for(var e=b,g=e._rowSpan[c],h=0;h<g.length;h++){e.nextSibling?e.parentNode.insertBefore(g[h],e.nextSibling):e.parentNode.appendChild(g[h]);if(this._fake){var l=this._fake.rowsAr[e.idd],m=this._fake.rowsAr[g[h].idd];l.nextSibling?l.parentNode.insertBefore(m,l.nextSibling):l.parentNode.appendChild(m);this._correctRowHeight(e.idd)}e=e.nextSibling}}a=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray;this.rowsCol.stablesort=a;for(a=1;a<this.obj.rows.length;a++)this.rowsCol.push(this.obj.rows[a])}});this.attachEvent("onXLE",function(a,b,c,e){if(this._srnd)for(a=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length),b=0;b<a;b++){c=this.render_row(b);e=c.childNodes;for(var g=0;g<e.length;g++){var h=e[g]._attrs.rowspan;b+h>=a&&(e[g]._attrs.total_rowspan=h,h=a-b);1<h&&this.setRowspan(c.idd,e[g]._cellIndex,h)}}else for(b=e&&e.pos||0;b<this.rowsBuffer.length;b++)for(c=this.render_row(b),e=c.childNodes,g=0;g<e.length;g++)e[g]._attrs.rowspan&&this.setRowspan(c.idd,e[g]._cellIndex,e[g]._attrs.rowspan)})};var feildLengths={};dhtmlxValidation=function(){};dhtmlxValidation.prototype={trackInput:function(a,b,c,e){dhtmlxEvent(a,"keyup",function(g){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null);dhtmlxValidation._timer=window.setTimeout(function(){if(dhtmlxValidation.checkInput(a,b))a.className=a.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),e&&e(a,a.value,b);else if(!c||c(a,a.value,b))a.className+=" dhtmlx_live_validation_error"},250)})},checkInput:function(a,b){return this.checkValue(a.value,b)},checkValue:function(a,b,c,e,g,h){var l={};this["is"+e]?l=this["is"+e](a,b,c,g,h):alert("\u6821\u9a8c\u89c4\u5219\u4e0d\u5b58\u5728: "+e);return l},isEmpty:function(a,b,c,e,g){return{result:""==c,type:"Error",errMsg:g||"\u503c\u987b\u4e3a\u7a7a"}},isNotEmpty:function(a,b,c,e,g){return{result:c instanceof Array?0<c.length:""==!c,type:"Error",errMsg:g||"\u503c\u4e0d\u80fd\u4e3a\u7a7a"}},isValidBoolean:function(a,b,c,e,g){return{result:!!c.toString().match(/^(0|1|true|false)$/),type:"Error",errMsg:g||"\u503c\u987b\u4e3atrue\u6216\u662ffalse"}},isValidEmail:function(a,b,c,e,g){return c?{result:!!c.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)|(^(\/)$)/i),type:"Error",errMsg:g||"\u90ae\u7bb1\u8f93\u5165\u4e0d\u6b63\u786e"}:{result:!0,type:"Success",errMsg:""}},isValidTelePhone:function(a,b,c,e,g){return c?{result:!!c.toString().match(/^([0-9]{3,4}[-\s]{0,1})?[0-9]{7,8}$|(^(\/)$)/),type:"Error",errMsg:g||"\u7535\u8bdd\u53f7\u7801\u8f93\u5165\u4e0d\u6b63\u786e\uff01"}:{result:!0,type:"Success",errMsg:""}},isValidCellPhone:function(a,b,c,e,g){return c?{result:!!c.toString().match(/^((\+?86)|(\(\+86\)))?(1[34578]\d{9})$|(^(\/)$)/),type:"Error",errMsg:g||"\u624b\u673a\u53f7\u7801\u8f93\u5165\u4e0d\u6b63\u786e\uff01"}:{result:!0,type:"Success",errMsg:""}},isValidIdCard:function(a,b,c,e,g){return c?{result:!!c.toString().match(/^([1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}$)|(^(\/)$)/),type:"Error",errMsg:g||"\u8eab\u4efd\u8bc1\u53f7\u8f93\u5165\u4e0d\u6b63\u786e\uff01"}:{result:!0,type:"Success",errMsg:""}},isValidPostCode:function(a,b,c,e,g){return c?{result:!!c.toString().match(/^[1-9]\d{5}(?!\d)|(^(\/)$)/),type:"Error",errMsg:g||"\u90ae\u7f16\u8f93\u5165\u4e0d\u6b63\u786e\uff01"}:{result:!0,type:"Success",errMsg:""}},isValidInteger:function(a,b,c,e,g){return c?{result:!!c.toString().match(/(^[-|+]?\d+$)|(^(\/)$)/),type:"Error",errMsg:g||"\u503c\u987b\u4e3a\u6574\u6570"}:{result:!0,type:"Success",errMsg:""}},isValidNumeric:function(a,b,c,e,g){return c?{result:!!c.toString().match(/(^[-|+]?\d\d*[\.|,]\d*$)|(^[-|+]?\d\d*$)|(^[-|+]?[\.|,]\d\d*$)|(^(\/)$)/),type:"Error",errMsg:g||"\u503c\u987b\u4e3a\u6570\u5b57"}:{result:!0,type:"Success",errMsg:""}},isValidAplhaNumeric:function(a,b,c,e,g){return c?{result:!!c.toString().match(/^[_\-a-z0-9]+$|(^(\/)$)/gi),type:"Error",errMsg:g||"\u503c\u4e0d\u7b26\u5408\u6570\u503c\u89c4\u8303"}:{result:!0,type:"Success",errMsg:""}},isValidDatetime:function(a,b,c,e,g){return c&&c.constructor!=Date?(a=c.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2})[:(\d{2})]{0,1}$/),b=!0,null!=a&&6==a.length?b=a&&!!(9999>=a[1]&&12>=a[2]&&31>=a[3]&&59>=a[4]&&59>=a[5])||!1:null!=a&&7==a.length&&(b=a&&!!(9999>=a[1]&&12>=a[2]&&31>=a[3]&&59>=a[4]&&59>=a[5]&&59>=a[6])||!1),{result:b,type:"Error",errMsg:g||"\u503c\u4e0d\u7b26\u5408\u65f6\u95f4\u89c4\u8303"}):{result:!0,type:"Success",errMsg:""}},isValidDate:function(a,b,c,e,g){return c&&c.constructor!=Date?(a=c.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/),{result:a&&!!(9999>=a[1]&&12>=a[2]&&31>=a[3])||!1,type:"Error",errMsg:g||"\u503c\u4e0d\u7b26\u5408\u65e5\u671f\u89c4\u8303"}):{result:!0,type:"Success",errMsg:""}},isValidYear:function(a,b,c,e,g){return c&&c.constructor!=Date?(a=c.toString().replace("-","").match(/^(\d{4})$/),{result:a&&!!(9999>=a[1])||!1,type:"Error",errMsg:g||"\u503c\u4e0d\u7b26\u5408\u5e74\u89c4\u8303"}):{result:!0,type:"Success",errMsg:""}},isValidYearMouth:function(a,b,c,e,g){return c&&c.constructor!=Date?(a=c.toString().replace("-","").match(/^(\d{4})(\d{2})$/),{result:a&&!!(9999>=a[1]&&12>=a[2])||!1,type:"Error",errMsg:g||"\u503c\u4e0d\u7b26\u5408\u5e74\u6708\u89c4\u8303"}):{result:!0,type:"Success",errMsg:""}},isValidTime:function(a,b,c,e,g){return c&&c.constructor!=Date?(a=c.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/),{result:a&&!!(24>=a[1]&&59>=a[2]&&59>=a[3])||!1,type:"Error",errMsg:g||"\u503c\u4e0d\u7b26\u5408\u65f6\u95f4\u89c4\u8303"}):{result:!0,type:"Success",errMsg:""}},isValidIPv4:function(a,b,c,e,g){return c?(a=c.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/),{result:a&&!!(255>=a[1]&&255>=a[2]&&255>=a[3]&&255>=a[4])||!1,type:"Error",errMsg:g||"\u503c\u4e0d\u7b26\u5408IP\u5730\u5740\u89c4\u8303"}):{result:!0,type:"Success",errMsg:""}},isValidCurrency:function(a,b,c,e,g){return c?{result:c.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1,type:"Error",errMsg:g||"isValidCurrency"}:{result:!0,type:"Success",errMsg:""}},isValidSSN:function(a,b,c,e,g){return c?{result:c.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1,type:"Error",errMsg:g||"\u503c\u5fc5\u987bisValidSSN"}:{result:!0,type:"Success",errMsg:""}},isValidSIN:function(a,b,c,e,g){return c?{result:c.toString().match(/^\d{9}$/)&&!0||!1,type:"Error",errMsg:g||"\u503c\u5fc5\u987bisValidSIN"}:{result:!0,type:"Success",errMsg:""}},isValidLength:function(a,b,c,e,g){e=e.split(",");if(!isNaN(+e[0])&&!isNaN(+e[1]))return c.length<=e[1]&&c.length>=e[0]?{result:!0,type:"Success",errMsg:""}:{result:!1,type:"Error",errMsg:g||"\u5b57\u7b26\u6570\u987b\u4e0d\u5c11\u4e8e "+e[0]+" \u4e2a\u5e76\u4e14\u4e0d\u591a\u4e8e"+e[1]+"\u4e2a\uff0c\u5f53\u524d\u5171\u6709\u5b57\u7b26 "+c.length+" \u4e2a"}},isValidLessLength:function(a,b,c,e,g){if(!isNaN(+e))return a=+e,c.length<=a?{result:!0,type:"Success",errMsg:""}:{result:!1,type:"Error",errMsg:g||"\u5b57\u7b26\u6570\u987b\u4e0d\u591a\u4e8e "+a+" \u4e2a\uff0c\u5f53\u524d\u5171\u6709\u5b57\u7b26 "+c.length+" \u4e2a"}},isValidGreaterLength:function(a,b,c,e,g){return{result:!0,type:"Success",errMsg:""}},isValidRegExp:function(a,b,c,e,g){return e&&0<e.length?(e=e._dhx_trim(),a=(0===e.indexOf("/")?eval(e):new RegExp(e)).test(c),{result:a,type:a?"Success":"Error",errMsg:g||(a?"":"\u6570\u636e\u683c\u5f0f\u4e0d\u6b63\u786e")}):{result:!1,type:"Error",errMsg:"\u6b63\u5219\u8868\u8fbe\u5f0f\u4e0d\u5b58\u5728\uff01"}},isValidMoreThan:function(a,b,c,e,g){a=!1;if(e&&0<e.length)return isNaN(e)?a=!0:isNaN(c)||+c>=+e&&(a=!0),{result:a,type:a?"Success":"Error",errMsg:g||(a?"":"\u503c\u5e94\u5927\u4e8e\u7b49\u4e8e "+e)}},isValidLessThan:function(a,b,c,e,g){a=!1;if(e&&0<e.length)return isNaN(e)?a=!0:isNaN(c)||+c<=+e&&(a=!0),{result:a,type:a?"Success":"Error",errMsg:g||(a?"":"\u503c\u5e94\u5c0f\u4e8e\u7b49\u4e8e "+e)}},isValidDecimal:function(a,b,c,e,g){a=!1;if(e&&0<e.length)return b=c.split("."),2==b.length?c.split(".")[1].length<=+e&&(a=!0):1==b.length&&(a=!0),{result:a,type:a?"Success":"Error",errMsg:g||(a?"":"\u5c0f\u6570\u4f4d\u6700\u591a\u7cbe\u786e\u5230\u7b2c "+e+" \u4f4d")}}};dhtmlxValidation=new dhtmlxValidation;dhtmlXGridObject.prototype.enableValidation=function(a,b){this._validators=(a=convertStringToBoolean(a))?{data:[]}:!1;1<arguments.length&&(this._validators._live=b);this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))};dhtmlXGridObject.prototype.setColValidators=function(a){this.isRowNumber&&(a instanceof Array&&a.splice(0,0,""),"string"==typeof a&&(a=","+a));this._validators||this.enableValidation(!0);"string"==typeof a&&(a=a.split(this.delim));this._validators.data=a};dhtmlXGridObject.prototype.validationEvent=function(a,b,c,e,g){g=this._validators;if(!g)return!0;var h=g.data[c]||this.cells(b,c).getAttribute("validate")||"";if(1==a&&h){var l=this.editor||(this._fake||{}).editor;if(!l)return!0;l.cell.className=l.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(h&&"validnumeric"==h.toLowerCase()){var m=function(a){"function"==typeof window.addEventListener?l.obj.addEventListener("keyup",function(){a.t_value=a.t_value||"";a.value.match(/^[\+\-]?\d*?\.?\d*?$/)?a.t_value=a.value:a.value=a.t_value;a.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/)&&(a.o_value=a.value)},!1):l.obj.attachEvent("onkeyup",function(){a.t_value=a.t_value||"";a.value.match(/^[\+\-]?\d*?\.?\d*?$/)?a.t_value=a.value:a.value=a.t_value;a.value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/)&&(a.o_value=a.value)})};l.obj&&!l.obj._keypressLimit&&(l.obj._keypressLimit=m,m(l.obj))}if(g._live){var n=this;dhtmlxValidation.trackInput(l.getInput(),h,function(a,e,g){return n.callEvent("onLiveValidationError",[b,c,e,a,g])},function(a,e,g){return n.callEvent("onLiveValidationCorrect",[b,c,e,a,g])})}}2==a&&this.validateCell(b,c,h,e);return!0};dhtmlXGridObject.prototype.validateCell=function(a,b,c,e,g,h){c=c||this._validators.data[b]||this.cells(a,b).getAttribute("validate");e=e||this.cells(a,b).getValue();if(c){var l=this.cells(a,b).cell;g=dhtmlxValidation.checkValue(a,b,e,c,g,h);g.result?(this.callEvent("onValidationCorrect",[a,b,e]),l.className=l.className.replace(/[ ]*dhtmlx_validation_error1/g,"")):this.callEvent("onValidationError",[a,b,e,g,c])&&(l.className+=" dhtmlx_validation_error1");return g}};dhx4.attachEvent("onGridCreated",function(a){window.dhx_globalImgPath||(window.dhx_globalImgPath=a.imgURL);a._col_combos=[];for(var b=0;b<a._cCount;b++)0==a.cellType[b].indexOf("combo")&&(a._col_combos[b]=eXcell_combo.prototype.initCombo.call({grid:a},b));a._loading_handler_set||(a._loading_handler_set=a.attachEvent("onXLE",function(a,b,g,h,l){"xml"==l&&(eXcell_combo.prototype.fillColumnCombos(this,h),this.detachEvent(this._loading_handler_set),this._loading_handler_set=null)}))});function eXcell_combo(a){a&&(this.cell=a,this.grid=a.parentNode.grid,this._combo_pre="",this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL);this.val=this.getValue();var a=this.getText();this.cell._clearCell&&(a="");this.cell.innerHTML="";this.combo=this.cell._brval?this.cell._brval:(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex];this.cell.appendChild(this.combo.DOMParent);this.combo.DOMParent.style.margin="0";this.combo.DOMelem_input.focus();this.combo.setSize(this.cell.offsetWidth-2);this.combo._xml?this.combo.setComboText(a):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(a)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(a).value)):this.combo.unSelectOption();this.combo.openSelect()},this.selectComboOption=function(a,c){c.selectOption(c.getIndexByValue(c.getOptionByLabel(a).value))},this.getValue=function(a){return this.cell.combo_value||""},this.getText=function(a){a=this.cell;""==this._combo_pre&&a.childNodes[1]?a=a.childNodes[1]:a.childNodes[0].childNodes[1];return _isIE?a.innerText:a.textContent},this.setValue=function(a){if("object"==typeof a){this.cell._brval=this.initCombo();var b=this.cell._cellIndex,e=this.cell.parentNode.idd;a.firstChild?this.cell.combo_value=a.firstChild.data:(this.cell.combo_value="\x26nbsp;",this.cell._clearCell=!0);this.setComboOptions(this.cell._brval,a,this.grid,b,e)}else{this.cell.combo_value=a;if((b=this.cell._brval)&&"object"==typeof this.cell._brval)a=(b.getOption(a)||{}).text||a;else if(b=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(b=this.grid._fake._col_combos[this.cell._cellIndex]))a=(b.getOption(a)||{}).text||a;""==(a||"").toString()._dhx_trim()&&(a=null);null!==a?this.setComboCValue(a):(this.setComboCValue("\x26nbsp;",""),this.cell._clearCell=!0)}},this.detach=function(){var a=this.combo.getParent();if(a.parentNode==this.cell)this.cell.removeChild(a);else return!1;a=this.cell.combo_value;this.combo._confirmSelect("blur");this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("\x26nbsp;"),this.cell._clearCell=!0);this.cell.combo_value=this.combo.getActualValue();this.combo.closeAll();this.grid._still_active=!0;this.grid.setActive(1);return a!=this.cell.combo_value})}eXcell_combo.prototype=new eXcell;eXcell_combo_v=function(a){a=new eXcell_combo(a);a._combo_pre="\x3cimg src\x3d'"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class\x3d'dhxgrid_combo_icon'/\x3e";return a};eXcell_combo.prototype.initCombo=function(a){var b=document.createElement("DIV");b.className="dhxcombo_in_grid_parent";var c=new dhtmlXCombo(b,"combo",0,this.grid.defVal[arguments.length?a:this.cell._cellIndex]);this.grid.defVal[arguments.length?a:this.cell._cellIndex]="";var e=this.grid;c.DOMelem.onmousedown=c.DOMelem.onclick=function(a){a=a||event;a.cancelBubble=!0};c.DOMelem.onselectstart=function(a){a=a||event;return a.cancelBubble=!0};this.grid.attachEvent("onScroll",function(){c._isListVisible()&&c._hideList()});c.attachEvent("onKeyPressed",function(a){if(13==a||27==a)e.editStop(),e._fake&&e._fake.editStop()});return c};eXcell_combo.prototype.fillColumnCombos=function(a,b){if(b){var c=dhx4.ajax.xmltop("rows",b,-1);if(c&&"DIV"!==c.tagName)for(a.combo_columns=a.combo_columns||[],columns=dhx4.ajax.xpath("//column",c),c=0;c<columns.length;c++)0==(columns[c].getAttribute("type")||"").indexOf("combo")&&(a.combo_columns[a.combo_columns.length]=c,this.setComboOptions(a._col_combos[c],columns[c],a,c))}};eXcell_combo.prototype.setComboCValue=function(a,b){""!=this._combo_pre&&(a="\x3cdiv style\x3d'width:100%;position:relative;height:100%;overflow:hidden;'\x3e"+this._combo_pre+"\x3cspan\x3e"+a+"\x3c/span\x3e\x3c/div\x3e");1<arguments.length?this.setCValue(a,b):this.setCValue(a)};eXcell_combo.prototype.setComboOptions=function(a,b,c,e,g){if(window.dhx4.s2b(b.getAttribute("xmlcontent"))&&!b.getAttribute("source")){options=b.childNodes;for(var h=[],l=0;l<options.length;l++)if("option"==options[l].tagName){var m=options[l].firstChild?options[l].firstChild.data:"";h[h.length]=[options[l].getAttribute("value"),m,options[l].getAttribute("css")||""]}a.addOption(h);4==arguments.length?c.forEachRowA(function(b){b=c.cells(b,e);b.cell._brval||b.cell._cellType||b.cell._cellIndex!=e||(""==b.cell.combo_value?b.setComboCValue("\x26nbsp;",""):a.getOption(b.cell.combo_value)?b.setComboCValue(a.getOption(b.cell.combo_value).text,b.cell.combo_value):b.setComboCValue(b.cell.combo_value))}):(h=this.cell?this:c.cells(g,e),b.getAttribute("text")?""==b.getAttribute("text")._dhx_trim()?h.setComboCValue("\x26nbsp;",""):h.setComboCValue(b.getAttribute("text")):h.cell.combo_value&&""!=h.cell.combo_value._dhx_trim()?a.getOption(h.cell.combo_value)?h.setComboCValue(a.getOption(h.cell.combo_value).text,h.cell.combo_value):h.setComboCValue(h.cell.combo_value):h.setComboCValue("\x26nbsp;",""))}if(b.getAttribute("source"))if(b.getAttribute("auto")&&window.dhx4.s2b(b.getAttribute("auto")))b.getAttribute("xmlcontent")?(h=this.cell?this:c.cells(g,e),b.getAttribute("text")&&h.setComboCValue(b.getAttribute("text"))):c.forEachRowA(function(a){a=c.cells(a,e);if(!a.cell._brval&&!a.cell._cellType){var b=a.cell.combo_value.toString();-1!=b.indexOf("^")&&(b=b.split("^"),a.cell.combo_value=b[0],a.setComboCValue(b[1]))}}),a.enableFilteringMode(!0,b.getAttribute("source"),window.dhx4.s2b(b.getAttribute("cache")||!0),window.dhx4.s2b(b.getAttribute("sub")||!1));else{var n=arguments.length;a.load(b.getAttribute("source"),function(){if(4==n)c.forEachRow(function(b){b=c.cells(b,e);b.cell._brval||b.cell._cellType||(a.getOption(b.cell.combo_value)?b.setComboCValue(a.getOption(b.cell.combo_value).text,b.cell.combo_value):""==(b.cell.combo_value||"").toString()._dhx_trim()?(b.setComboCValue("\x26nbsp;",""),b.cell._clearCell=!0):b.setComboCValue(b.cell.combo_value))});else{var b=c.cells(g,e);a.getOption(b.cell.combo_value)?b.setComboCValue(a.getOption(b.cell.combo_value).text,b.cell.combo_value):b.setComboCValue(b.cell.combo_value)}})}b.getAttribute("auto")&&window.dhx4.s2b(b.getAttribute("auto"))||(b.getAttribute("editable")&&!window.dhx4.s2b(b.getAttribute("editable"))&&a.readonly(!0),b.getAttribute("filter")&&window.dhx4.s2b(b.getAttribute("filter"))&&a.enableFilteringMode(!0))};eXcell_combo.prototype.getCellCombo=function(){if(this.cell._brval)return this.cell._brval;this.cell._brval=this.initCombo();return this.cell._brval};eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())};dhtmlXGridObject.prototype.getColumnCombo=function(a){if(this._col_combos&&this._col_combos[a])return this._col_combos[a];this._col_combos||(this._col_combos=[]);this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this},a);return this._col_combos[a]};dhtmlXGridObject.prototype.refreshComboColumn=function(a){this.forEachRow(function(b){this.cells(b,a).refreshCell&&this.cells(b,a).refreshCell()})};function eXcell_cntr(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0;this.grid._h2&&this.grid.attachEvent("onOpenEn",function(b){this.resetCounter(a._cellIndex)});var b=function(){var b=this;window.setTimeout(function(){b.resetCounter&&(b._fake&&!b._realfake&&a._cellIndex<b._fake._cCount?b._fake.resetCounter(a._cellIndex):b.resetCounter(a._cellIndex))},1);return!0};this.grid.attachEvent("onBeforeSorting",b);this.grid.attachEvent("onFilterEnd",b)}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(a){this.cell.style.paddingRight="2px";var b=this.cell;window.setTimeout(function(){if(b.parentNode){var a=b.parentNode.rowIndex;if(b.parentNode.grid.currentPage||0>a||b.parentNode.grid._srnd)a=b.parentNode.grid.rowsBuffer._dhx_find(b.parentNode)+1;0>=a||(b.innerHTML=a,b.parentNode.grid._fake&&b._cellIndex<b.parentNode.grid._fake._cCount&&b.parentNode.grid._fake.rowsAr[b.parentNode.idd]&&b.parentNode.grid._fake.cells(b.parentNode.idd,b._cellIndex).setCValue(a),b=null)}},100)}}dhtmlXGridObject.prototype.resetCounter=function(a){this._fake&&!this._realfake&&a<this._fake._cCount&&this._fake.resetCounter(a,this.currentPage);var b;for(b=0;b<this.rowsBuffer.length;b++)this.rowsBuffer[b]&&"TR"==this.rowsBuffer[b].tagName&&this.rowsAr[this.rowsBuffer[b].idd]&&(this.rowsAr[this.rowsBuffer[b].idd].childNodes[a].innerHTML=b+1)};eXcell_cntr.prototype=new eXcell;function eXcell_link(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return!0};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var a=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(a?"^"+a:"")}return""};this.setValue=function(a){if("number"!=typeof a&&(!a||""==a.toString()._dhx_trim()))return this.setCValue("\x26nbsp;",b),this.cell._clearCell=!0;var b=a.split("^");1==b.length?b[1]="":1<b.length&&(b[1]="href\x3d'"+b[1]+"'",b[1]=3==b.length?b[1]+(" target\x3d'"+b[2]+"'"):b[1]+" target\x3d'_blank'");this.setCValue("\x3ca "+b[1]+" onclick\x3d'(_isIE?event:arguments[0]).cancelBubble \x3d true;'\x3e"+b[0]+"\x3c/a\x3e",b)}}eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return a&&a.tagName?a.getAttribute("href"):""};eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return a&&a.tagName?a.innerHTML:""};function eXcell_dhxCalendar(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){a=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[a]);var b=this.grid;a.attachEvent("onClick",function(){this._last_operation_calendar=!0;window.setTimeout(function(){b.editStop()},1);return!0});dhtmlxEvent(a.base,"click",function(a){(a||event).cancelBubble=!0});a=null}}eXcell_dhxCalendar.prototype=new eXcell;eXcell_dhxCalendar.prototype.edit=function(){var a=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(a[0],a[1]+this.cell.offsetHeight);this.grid._grid_calendarA._last_operation_calendar=!1;this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val||new Date);this.grid._grid_calendarA.draw=a};eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;if(this.grid._grid_calendarA._last_operation_calendar){var a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b);this.setCValue(a,b);this.cell._clearCell=!a;a=this.val;this.val=this._val;return this.cell.val.valueOf()!=(a||"").valueOf()}return!1}};eXcell_dhxCalendar.prototype.setValue=function(a){a&&"object"==typeof a?(this.cell.val=a,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val)):(a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(a="\x26nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("\x26nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val))};function eXcell_dhxCalendarA(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){a=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[a]);var b=this.grid;a.attachEvent("onClick",function(){this._last_operation_calendar=!0;window.setTimeout(function(){b.editStop()},1);return!0});dhtmlxEvent(a.base,"click",function(a){(a||event).cancelBubble=!0})}}eXcell_dhxCalendarA.prototype=new eXcell;eXcell_dhxCalendarA.prototype.edit=function(){var a=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(1*a[0]+this.cell.offsetWidth,1*a[1]);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=!1;this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.draw=a;this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=this.cell.offsetHeight-4+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(a){(a||event).cancelBubble=!0};this.obj.onmousedown=function(a){(a||event).cancelBubble=!0};this.obj.value=this.getValue();this.cell.innerHTML="";this.cell.appendChild(this.obj);window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&18<=this.obj.offsetHeight&&40>this.obj.offsetHeight&&(this.obj.style.height="36px",this.obj.style.overflow="scroll"));this.obj.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0};this.obj.focus();this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b);this.setCValue(a,b);this.cell._clearCell=!a;a=this.val;this.val=this._val;return this.cell.val.valueOf()!=(a||"").valueOf()}this.setValue(this.obj.value);a=this.val;this.val=this._val;return this.cell.val.valueOf()!=(a||"").valueOf()}};eXcell_dhxCalendarA.prototype.setValue=function(a){a&&"object"==typeof a?(this.cell.val=a,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val)):(a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(a="\x26nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("\x26nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val))};function eXcell_vmdcheckbox(a){a&&(this.cell=a,this.grid=a.parentNode.grid,this.hwReport=this.grid.hwReport,this.options={},this.getcheckbox=function(){return this.cell.checkbox},this.getValue=function(){return this.cell.checkbox&&null!=this.cell.checkbox.getValue()?this.cell.checkbox.getValue():this.cell._val||""},this.setValue=function(a){this.cell._val=a;this.cell.checkbox=this.initCheckBox();this.cell.checkbox.setValue(a);this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])},this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled},this.edit=function(){this.val=this.getValue();this.cell.checkbox.moveToNext()},this.detach=function(){this.cell.checkbox.clearSelectStatus();this.cell.checkbox.currentSelectId=null;this.cell.checkbox.hasSelected=!1;this.grid.editor=null;return!1})}eXcell_vmdcheckbox.prototype=new eXcell;eXcell_vmdcheckbox.prototype.initCheckBox=function(a){var b=this;if(this.cell.checkbox)return this.cell.checkbox;a=this.hwReport.getOriginCellById(this.cell._attrs.sid);a=this.hwReport.cellTypes.get(a.fillcelltype);var c=document.createElement("div");this.cell.appendChild(c);var c=new dhtmlXCheckBox(c,{mode:a.mode}),e=a.bindsource&&a.bindsource.tablename&&this.hwReport.getQueryStoreByName(a.bindsource.tablename);e&&e.dhtmlxDatastore&&c.sync(e.dhtmlxDatastore,{text:(a.bindsource.showcolumn||"text").toLowerCase(),value:(a.bindsource.valuecolumn||"value").toLowerCase(),seperator:a.seperator,mode:a.mode,style:"radio"==a.mode?"rad":"chk",enableAll:window.dhx4.s2b(a.isallselect)},this);c.attachEvent("onCheckChanged",function(a,c){b.grid.callEvent("onCellChanged",[b.cell.parentNode.idd,b.cell._cellIndex,a]);b.grid.callEvent("onEditCell",[2,b.cell.parentNode.idd,b.cell._cellIndex,a,c])});return c};eXcell_vmdcheckbox.prototype.getCellCheckBox=function(){if(this.cell.checkbox)return this.cell.checkbox;this.cell.checkbox=this.initCheckBox();return this.cell.checkbox};function eXcell_vmdnum(a){var b=this;try{this.cell=a;this.grid=this.cell.parentNode.grid;this.hwReport=this.grid.hwReport;var c=this.hwReport.getOriginCellById(this.cell._attrs.sid);this.cellType=this.hwReport.cellTypes.get(c.fillcelltype);this.number=this.hwReport.numbers.get(c.number)||{};this.cell.DOMelem_input||(this.cell.atag="INPUT",this.cell.DOMelem_input=document.createElement(this.cell.atag),this.cell.DOMelem_input.setAttribute("autocomplete","off"),this.cell.DOMelem_input.className="dhx_combo_edit",this.cell.DOMelem_input.wrap="soft",this.cell.DOMelem_input.style.marginLeft="0px",this.cell.DOMelem_input.style.textAlign=this.cell.style.textAlign,(this.grid._disabled||this.isDisabled())&&this.cell.DOMelem_input.setAttribute("readonly","readonly"),this.cell.DOMelem_input.onclick=function(a){(a||event).cancelBubble=!0},this.cell.DOMelem_input.onkeyup=function(a){var c=(a.srcElement.value+"").substr((a.srcElement.value+"").length-1);(a.srcElement.value+"").indexOf(".")!=(a.srcElement.value+"").length-1&&"0"!=c&&"-"!=a.srcElement.value&&"+"!=a.srcElement.value&&(a.srcElement.value=b.format(a.srcElement.value))},this.cell.DOMelem_input.onmousedown=function(a){b.cell._editorshow&&!1!==b.grid._doClick(a||window.event)&&(b.grid._sclE?b.grid.editCell(a||window.event):b.grid.editStop());(a||event).cancelBubble=!0},this.cell.DOMelem_input.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0})}catch(e){}this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled};this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);(this.cell._disabled=a)?this.cell.DOMelem_input.setAttribute("readonly","readonly"):this.cell.DOMelem_input.removeAttribute("readonly")};this.edit=function(){this.val=this.getValue();this.cell._editorshow?_isIE&&(this.cell.DOMelem_input.focus(),this.cell.DOMelem_input.blur()):(this.cell.className+=" "+this.hwReport.reportId+"-p-0",this.cell.DOMelem_input.style.width=this.cell.clientWidth+"px",this.cell.DOMelem_input.style.height=this.cell.clientHeight-3+"px",this.cell.DOMelem_input.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.cell.DOMelem_input));this.cell.DOMelem_input.focus();/dhxcombo_actv/g.test(this.cell.DOMelem_input.className)||(this.cell.DOMelem_input.className+=" dhxcombo_actv")};this.showEditor=function(){var a=this,b=this.getValue();this.cell.DOMelem_input.onclick=null;this.cell.DOMelem_input.style.width=this.cell.clientWidth+"px";this.cell.DOMelem_input.value=b;this.cell.innerHTML="";this.cell.appendChild(this.cell.DOMelem_input);this.cell._editorshow=!0;this.grid.attachEvent("onSetSizes",function(){a.cell.DOMelem_input.style.width=a.cell.clientWidth+"px"})};this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()};this.setValue=function(a){a=this.format(a);isNaN(a)?(a="\x26nbsp;",this.cell._clearCell=!0):this.cell._clearCell=!1;this.cell._editorshow?this.cell.DOMelem_input.value=a:this.cell.innerHTML=a;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,this.cell._clearCell?"":a])};this.format=function(a){var b=this.number.type;a=parseFloat(a);switch(b){case "0":return isNaN(a)?"":a;case "1":if(isNaN(a))return"";b=parseInt(this.number.decimal||-1);if(0>b)return a;a=a.toFixed(b);dhx.s2b(this.number.zerovisible)||(a=parseFloat(a));return a;default:return isNaN(a)?"":a}};this.detach=function(){this.cell.DOMelem_input.className=this.cell.DOMelem_input.className.replace(/dhxcombo_actv/g,"");this.cell.className=this.cell.className.replace(new RegExp(this.hwReport.reportId+"-p-0","gi")," ");this.setValue(this.cell.DOMelem_input.value);return this.val!=this.getValue()}}eXcell_vmdnum.prototype=new eXcell;function eXcell_vmdlink(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return!0};this.edit=function(){};this.getValue=function(){return this.cell.firstChild.getAttribute?(this.cell.firstChild.getAttribute("target"),this.cell.firstChild.innerHTML):""};this.setValue=function(a){if("number"!=typeof a&&(!a||""==a.toString()._dhx_trim()))return this.setCValue("\x26nbsp;",b),this.cell._clearCell=!0;var b=a.split("^");1==b.length?b[1]="":1<b.length&&(b[1]="href\x3d'"+b[1]+"'",b[1]=3==b.length?b[1]+(" target\x3d'"+b[2]+"'"):b[1]+" target\x3d'_blank'");this.setCValue("\x3cdiv style \x3d'color:blue;cursor:pointer;text-decoration:underline;' "+b[1]+" onclick\x3d'(_isIE?event:arguments[0]).cancelBubble \x3d true;this.parentNode.parentNode.grid.hyperlinkClick(this)'\x3e"+b[0]+"\x3c/div\x3e",b[0])}}eXcell_vmdlink.prototype=new eXcell;eXcell_vmdlink.prototype.getTitle=function(){var a=this.cell.firstChild;return _isIE?a.innerText:a.textContent};eXcell_vmdlink.prototype.getContent=function(){var a=this.cell.firstChild;return a&&a.tagName?a.innerHTML:""};dhtmlXGridObject.prototype.hyperlinkClick=function(a){a=this.cells4(a.parentNode);for(var b=this.hwReport.getOriginCellById(a.cell._attrs.sid),b=(b=(b=this.hwReport.cellTypes.get(b.fillcelltype))&&b.url&&dhx.trim(b.url.replace("?",""))||"")?b.split("\x26").filter(function(a){return!!a}).map(function(a){return a.split("\x3d").map(function(a){return dhx.trim(a)})}):[],c=0;c<b.length;c++)b[c][1]=this.hwReport.getValue(b[c][1],a);this.editor=a;this.cell=a.cell;this.row=a.cell.parentNode;c="onLeftLinkClick";this.hwReport.callEvent("onLeftLinkClick",[this,a,b.map(function(a){return a.join("\x3d")}).join("\x26")]);this.LeftLinkClickName&&(c=this.LeftLinkClickName);if(Ext.isFunction(window[c]))window[c](b.map(function(a){return a.join("\x3d")}).join("\x26"),this,a);if(Ext.isFunction(window[this.hwReport.reportId+"_LeftLinkClick"]))window[this.hwReport.reportId+"_LeftLinkClick"](b.map(function(a){return a.join("\x3d")}).join("\x26"),this,a);this.editor=null};function eXcell_vmdupload(a){var b=this;if(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.hwReport=this.grid.hwReport;var c=this.hwReport.getOriginCellById(a._attrs.sid);this.hwReport.cellTypes.get(c.fillcelltype);this.cell.style.padding="0px";this.hwReport.uploadCells=this.hwReport.uploadCells||{};this.hwReport.uploadCells[a.parentNode.idd+"_"+a._cellIndex]=a;this.hwReport.upload_onReportRendered_id||(this.hwReport.upload_onReportRendered_id=this.hwReport.attachEvent("onRendered",function(){for(var a in b.hwReport.uploadCells){var c=b.hwReport.uploadCells[a];c._uploader||(c._uploader=b.grid._uploader_render(c),c._uploader.doLayout())}}))}window.dhx4._eventable(this);this.isDisabled=function(){return!0};this.setValue=function(a){this.cell._val=a;this.cell._uploader?this.cell._uploader.setValue(a):(this.cell._uploader=b.grid._uploader_render(this.cell),this.cell._uploader.doLayout())};this.getValue=function(a){var b=this.cell._uploader,c="";a?b&&b._files&&(c=this.getUploadValue(b._files,a)):c="";return c};this.getUploadValue=function(a,b){var c="",e="",g="",n="",q="";if(a)for(fileKey in a){var r=a[fileKey],c=c+(r.path+","),e=e+(r.name+","),g=g+(r.id+","),n=n+(r.size+",");r.name&&(r=r.name.substring(r.name.indexOf(".")),q+=r+",")}switch(b){case "path":if(c&&0<c.length)return c.substring(0,c.length-1);break;case "name":if(e&&0<e.length)return e.substring(0,e.length-1);break;case "id":if(g&&0<g.length)return g.substring(0,g.length-1);break;case "size":if(n&&0<n.length)return n.substring(0,n.length-1);break;case "ext":if(q&&0<q.length)return q.substring(0,q.length-1)}};this.showProgress=function(){var a=document.createElement("DIV");a.id="dhxgrid_upload_container";a.className="dhxgrid_file_uploader";a.style.width=this.cell.offsetWidth+"px";a.style.height=this.cell.offsetHeight+"px";this.cell.appendChild(a)};this.hideController=function(){this.cell.controller&&(this.cell.uploadContainer.removeChild(this.cell.controller),this.cell.controller=null)};this.hwuploadDel=function(a){document.getElementById(this.hwupload_rendStr(a,"bm")+"_a").style.display="none";document.getElementById(this.hwupload_rendStr(a,"bm")+"_del").style.display="none";var b=this.cell.val.split(",");this.lastVal="";for(var c=0;c<b.length;c++)0>b[c].indexOf(a)&&(this.lastVal+=b[c]+",");this.lastVal=this.lastVal.substr(0,this.lastVal.length-1);cellUpdate(this.cell,this.lastVal);this.cell.val=this.lastVal};this.hwupload_rendStr=function(a,b){if("bm"==b)return a?a.substr(0,a.indexOf(":")):null;if("mc"==b)return a?a.substr(a.indexOf(":")+1,a.length):null}}eXcell_vmdupload.prototype=new eXcell;eXcell_vmdupload.prototype.getCellUploader=function(){return this.cell._uploader};dhtmlXGridObject.prototype._uploader_render=function(a){var b=this;a._attrs.title=" ";var c=this.hwReport.getOriginCellById(a._attrs.sid),e=this.hwReport.cellTypes.get(c.fillcelltype),g=e.wordMode,c=!c.data&&!c.datavalue,h=document.createElement("DIV");h.id="dhxgrid_upload_container";h.className="dhxgrid_file_uploader";a.appendChild(h);var l=vmd.MicService.getDasIp(),m=new HwFao(l,"wdk"),n=vmd.projectInfo&&vmd.projectInfo.docIp||"",m=g?m.getWdkUploadUrl(n,"vmdcode",""):m.getUploadUrl("");g&&!n&&Ext.Msg.show({title:"\u63d0\u793a",msg:"\u914d\u7f6e\u6587\u6863\u5e93\u4e0a\u4f20\u540e\u9700\u914d\u7f6e\u6587\u6863\u4e2d\u5fc3\uff01",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR});var q=new dhtmlXFileUpload(h,{swfPath:this.hwReport.dhtmxlUrl+"/lib/dhtmlx/sources/dhtmlxFileUpload/codebase/uploader.swf",flashPath:this.hwReport.dhtmxlUrl+"/lib/dhtmlx/sources/dhtmlxFileUpload/codebase/flashplayerpp_install_cn.zip",swfUrl:m,swfLogs:"enabled",fileType:e.filetype,numPerPage:parseInt(e.pageexp),cols:parseInt(e.colexp),showmode:e.showmode,isShowAll:c,dataHost:l,wdkHost:n});q.val=a._val;q.cellObj=this;q.grid=this.grid;q.enableTitleScreen(!1);q.setURL(m);q.setIsWdk(g);q.setAutoStart(!0);q.setDeletable("0"==e["delete"]?!1:!0);q.setAddable("0"==e.add?!1:!0);q.setInfoable(!1);q.setUploadable(!1);q.setCancelable(!1);(g=e.bindsource&&e.bindsource.tablename&&this.hwReport.getQueryStoreByName(e.bindsource.tablename))&&g.dhtmlxDatastore&&q.sync(g.dhtmlxDatastore,{name:e.bindsource.filename&&e.bindsource.filename.toLowerCase(),path:e.bindsource.filepath&&e.bindsource.filepath.toLowerCase(),docid:e.bindsource.docid&&e.bindsource.docid.toLowerCase(),size:e.bindsource.filesize&&e.bindsource.filesize.toLowerCase(),ext:e.bindsource.fileext&&e.bindsource.fileext.toLowerCase(),mode:e.wordMode},this);q.attachEvent("onBeforeFileAdd",function(a,b){var c,g=parseInt(e.upmaxnum),h=0;for(c in q._files)q._files[c].server&&"delete"!=q._files[c].storageState&&h++;if(h>=g)return Ext.Msg.show({title:"\u63d0\u793a",msg:"\u6587\u4ef6\u6700\u591a\u5141\u8bb8\u4e0a\u4f20"+g+"\u4e2a\uff0c\u5df2\u5b58\u5728\u6587\u4ef6\u6570\u91cf\u4e3a"+h+"\u4e2a\uff0c\u65e0\u6cd5\u7ee7\u7eed\u6dfb\u52a0\uff01",buttons:Ext.Msg.OK,icon:Ext.Msg.INFO}),!1;q.showProgress();return!0});q.attachEvent("onBeforeFileRemove",function(a,b){return confirm('\u662f\u5426\u5220\u9664\u6587\u4ef6"'+a+'"\uff1f')?!0:!1});q.attachEvent("onImgClick",function(a){a=-1==a.path.indexOf("http://")?"http://"+l.replace("http://","")+"/wdk/"+a.path:a.path;a=a.replace("/thumbnail/","/");window.open(a,"_blank")});q.attachEvent("onFileRemove",function(c,e,g,h,l){q.doLayout();c=[];for(fileID in q._oldFiles)e=q._oldFiles[fileID],c.push({path:e.path,name:e.name,id:e.id,size:e.size,ext:e.ext||e.name&&e.name.substring(e.name.indexOf(".")),state:e.storageState});g=[];q._oldFiles={};for(fileID in q._files)e=q._files[fileID],q._oldFiles[fileID]=dhx4._copyObj(e),g.push({path:e.path,name:e.name,id:e.id,size:e.size,ext:e.ext||e.name&&e.name.substring(e.name.indexOf(".")),state:e.storageState});if(q._delFiles)for(fileID in q._delFiles)e=q._delFiles[fileID],g.push({path:e.path,name:e.name,id:e.id,size:e.size,ext:e.ext||e.name&&e.name.substring(e.name.indexOf(".")),state:e.storageState});b.grid.callEvent("onCellChanged",[a.parentNode.idd,a._cellIndex,g]);b.grid.callEvent("onEditCell",[2,a.parentNode.idd,a._cellIndex,g,c])});q.attachEvent("onUploadFile",function(c,g,h,l,m,n,y){q.hideProgress();m=eval("("+m+")");g=m.data[0];c=q._files[y];c.absPath=g.absolutePath;c.relativePath=g.relativePath;c.path=g.path;c.id=g.docid;c=parseInt(e.upmaxnum);if(q._getAddFileCount()>c){c=null;for(y in q._files)q._files[y].server||(c?q._files[c].timestamp>q._files[y].timestamp&&(c=y):c=y);c&&(q._items[c].parentNode.removeChild(q._items[c]),delete q._files[c],delete q._items[c])}if(q.checkAllUpload()){q.doLayout();g=[];for(y in q._oldFiles)c=q._oldFiles[y],g.push({path:c.path,name:c.name,id:c.id,size:c.size,ext:c.name.substring(c.name.indexOf(".")),state:c.storageState});h=[];q._oldFiles={};for(y in q._files)c=q._files[y],q._oldFiles[y]=dhx4._copyObj(c),h.push({path:c.path,name:c.name,id:c.id,size:c.size,ext:c.name.substring(c.name.indexOf(".")),state:c.storageState});if(q._delFiles)for(y in q._delFiles)c=q._delFiles[y],h.push({path:c.path,name:c.name,id:c.id,size:c.size,ext:c.name.substring(c.name.indexOf(".")),state:c.storageState});b.grid.callEvent("onCellChanged",[a.parentNode.idd,a._cellIndex,h]);b.grid.callEvent("onEditCell",[2,a.parentNode.idd,a._cellIndex,h,g]);b.grid.callEvent("uploadComplete",[b,m])}});q.attachEvent("onUploadFail",function(a,b){window.Ext?Ext.Msg.show({title:"\u8b66\u544a",msg:"\u4e0a\u4f20"+a+"\u5931\u8d25!",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR}):dhtmlx.alert({title:"\u8b66\u544a\u4fe1\u606f",ok:"\u786e\u5b9a",type:"alert-error",text:"\u4e0a\u4f20"+a+"\u5931\u8d25!"})});a.onmouseover=function(b){(b||event).cancelBubble=!0;a._disabled||!q._deletable&&!q._addable||(q.p_controls.style.visibility="visible")};a.onmouseout=function(a){(a||event).cancelBubble=!0;q.p_controls.style.visibility="hidden"};return q};dhx4.attachEvent("onGridCreated",function(a){window.dhx_globalImgPath||(window.dhx_globalImgPath=a.imgURL);var b=a.hwReport;if(b){for(var c in b._cell_trees)b._cell_trees[c].obj||(b._cell_trees[c].obj=b._cell_trees[c].init(a));b._loading_handler_set_tree||(b._loading_handler_set_tree=b.attachEvent("onStoreSuccess",function(a){if(a.trees)for(var c=0;c<a.trees.length;c++)eXcell_vmdtree.prototype.fillCellCombos(b,a.trees[c])}))}});function eXcell_vmdtree(a){if(a){this.cell=a;this.grid=a.parentNode.grid;this.hwReport=this.grid.hwReport;this.cellType=this.hwReport._cell_trees[this.cell._attrs.sid];this.combo_tree=this.cellType.obj;this._combo_pre="";if(this.hwReport&&this.hwReport.vmdreport&&"vmd.datainput"==this.hwReport.vmdreport.xtype){var b=this.hwReport.getOriginCellById(this.cell._attrs.sid);b&&1==a.rowSpan&&0>b.childs.indexOf(a.parentNode.idd+"_"+a.cellIndex)&&b.childs.push(a.parentNode.idd+"_"+a.cellIndex)}this.edit=function(){function a(a){b.combo_tree.items[b.cell.combo_value]?b.combo_tree.selectItem(b.cell.combo_value):b.combo_tree.items[a]?b.combo_tree.selectItem(a):b.combo_tree.getSelectedId()&&b.combo_tree.unselectItem(b.combo_tree.getSelectedId())}var b=this;window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL);this.val=this.getValue();var g=this.getText();this.cell._clearCell&&(g="");var h=window.dhx4.screenDim(),l=this.cell.clientWidth*this.cellType.percentWidth,m=this.combo_tree.base.offsetHeight;this.combo_tree.base.style.width=l+"px";this.combo_tree.setSizes();var n=this.cell.getBoundingClientRect(),q=n.top+n.height,r=n.left;q+m>h.bottom&&(q=n.top-m);r+l>h.right&&(r=n.left-(l-n.width));/dhxcombo_actv/g.test(this.combo_tree.DOMelem.className)||(this.combo_tree.DOMelem.className+=" dhxcombo_actv");this.cell._editorshow?this.combo_tree.DOMelem_input.onclick=function(a){a||(a=event);return a.cancelBubble=!0}:this.cell.className+=" "+this.hwReport.reportId+"-p-0";this.cell.innerHTML="";this.cell.appendChild(this.combo_tree.DOMParent);q=(this.combo_tree.DOMParent.clientHeight-this.combo_tree.DOMelem.clientHeight)/2;1>q&&(q=0);this.combo_tree.DOMelem.style.top=q+"px";this.combo_tree.DOMParent.firstChild.style.width=this.cell.clientWidth+"px";this.combo_tree.DOMelem_input.style.width=this.cell.clientWidth-24+"px";this.combo_tree.DOMelem_input.focus();this.combo_tree.DOMelem_input.value=g;h=0;this.combo_tree.base.style.height&&(h=this.combo_tree.base.style.height.split("p")[0]);l=document.body.clientHeight;l-n.top-n.height>h?this.combo_tree.base.style.top=n.top+n.height+"px":n.top>h?this.combo_tree.base.style.top=n.top-h+"px":l>h&&(this.combo_tree.base.style.top=l-h+"px");this.combo_tree.base.style.left=r-1+"px";this.combo_tree.base.style.visibility="visible";this.combo_tree.area.focus();this.combo_tree.setSizes();a(g);var v=this.cellType&&this.cellType.bindsource&&this.cellType.bindsource.conditions;v&&0<v.length?(this.combo_tree.filterByDataStore(function(a,c){for(;0<v.length;)return a[v[0].field]!=b.hwReport.getValue(v[0].value,b)?!1:!0}),a(g)):this.combo_tree.rptStore&&this.combo_tree.rptStore.update(function(){a(g)},function(){})};this.showEditor=function(){var a=this.getText();this.cell.innerHTML="";this.combo_tree.DOMelem.style.width=this.cell.clientWidth+"px";this.combo_tree.DOMelem_input.style.width=this.cell.clientWidth-24+"px";this.combo_tree.DOMelem_input.value=a;this.cell.appendChild(this.combo_tree.DOMParent);this.combo_tree.DOMelem.style.top=(this.combo_tree.DOMParent.clientHeight-this.combo_tree.DOMelem.clientHeight)/2+"px";this.cell._editorshow=!0};this.getValue=function(a){return this.cell.combo_value||""};this.getText=function(a){a=this.cell;return a._editorshow?a.firstChild.firstChild.firstChild.value:_isIE?a.innerText:a.textContent};this.setValue=function(a){this.cell.combo_value=a;var b=null;if((b=this.cell._brval)&&"object"==typeof this.cell._brval)a=b.items[a]&&b.items[a].text||a;else if(b=this.hwReport._cell_trees[this.cell._attrs.sid].obj){a=b.items[a]&&b.items[a].text||a;var c=b.items[a];c?a=c:b.rule&&b.rptStore&&(c=b.rptStore.find(function(c){return c[b.rule.value]+""==a+""}))&&(a={value:c[b.rule.value],text:c[b.rule.text]});a=(a||{}).text||a}""==(a||"").toString()._dhx_trim()&&(a=null);null!==a?this.setComboCValue(a,this.cell.combo_value):(this.setComboCValue("\x26nbsp;",""),this.cell._clearCell=!0)};this.detach=function(){this.combo_tree.DOMelem_input.onclick=null;this.cell.className=this.cell.className.replace(new RegExp(this.hwReport.reportId+"-p-0","gi")," ");this.combo_tree.DOMelem.className=this.combo_tree.DOMelem.className.replace(/dhxcombo_actv/g,"");this.combo_tree.base.style.visibility="hidden";var a=this.getValue(),b=this.getText();this.combo_tree.getSelectedId()&&this.combo_tree.items[this.combo_tree.getSelectedId()]&&""!=this.combo_tree.items[this.combo_tree.getSelectedId()].text._dhx_trim()?(this.setComboCValue(this.combo_tree.items[this.combo_tree.getSelectedId()].text.replace(/\&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),this.combo_tree.getSelectedId()),this.cell._clearCell=!1,this.cell.combo_value=this.combo_tree.getSelectedId()):(this.cell.combo_value=a,this.setComboCValue(b,a));this.grid._still_active=!0;this.grid.setActive(1);return a!=this.cell.combo_value}}}eXcell_vmdtree.prototype=new eXcell;eXcell_vmdtree.prototype.init=function(a){a=document.createElement("DIV");a.className="dhxtree_in_grid_parent";var b=new dhtmlXTreeView(a),c=this.grid;b.DOMParent=document.createElement("DIV");b.DOMParent.className="dhxcombo_in_grid_parent";b.DOMParent.innerHTML="\x3cdiv class\x3d'dhxcombo_material'\x3e\x3cinput type\x3d'text' class\x3d'dhxcombo_input' autocomplete\x3d'off'\x3e\x3cinput type\x3d'hidden' value\x3d''\x3e\x3cinput type\x3d'hidden' value\x3d'false'\x3e\x3cdiv class\x3d'dhxcombo_select_button'\x3e\x3cdiv class\x3d'dhxcombo_select_img'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";b.DOMelem=b.DOMParent.firstChild;b.DOMelem_input=b.DOMParent.firstChild.firstChild;document.body.appendChild(b.base);b.base.style.width="250px";b.base.style.height=(this.cellType.height||250)+"px";b.base.style.position="absolute";b.base.style.visibility="hidden";b.attachEvent("_onBeforeOpen",function(a,b){var e=c.editStop;c.editStop=function(){c.editStop=e};return!0});this.grid.attachEvent("onScroll",function(){b.base.style.visibility="hidden"});return b};eXcell_vmdtree.prototype.fillCellCombos=function(a,b){for(var c=a.grid,e=a.getOriginCellById(b),g=0;g<e.childs.length;g++)c.cells.apply(c,e.childs[g].split("_")).refreshCell()};eXcell_vmdtree.prototype.setComboCValue=function(a,b){if(this.cell._editorshow)this.cell.innerHTML=this.combo_tree.DOMParent.outerHTML,this.cell.firstChild.firstChild.firstChild.value="\x26nbsp;"==a?"":a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,b]);else{var c;dhx.isIE&&(c=this.combo_tree.DOMParent.innerHTML);this.setCValue(a,b);dhx.isIE&&c&&(this.combo_tree.DOMParent.innerHTML=c,this.combo_tree.DOMParent.firstChild.firstChild.value="\x26nbsp;"==a?"":a)}};eXcell_vmdtree.prototype.getCellCombo=function(){if(this.cell._brval)return this.cell._brval;this.cell._brval=this.init();return this.cell._brval};eXcell_vmdtree.prototype.refreshCell=function(){this.setValue(this.getValue())};dhtmlXTreeView.prototype._signInit=function(){this.attachEvent("_onTreeClick",function(a,b){if(1!=b.stop){var c=a.target||a.srcElement;"i"==c.tagName.toLowerCase()&&(c=c.parentNode);null!=(c.parentNode.className||"").match(/dhxtreeview_item_text/)?c==c.parentNode.childNodes[this.conf.idx.sign]?(this._openCloseItem(c.parentNode.parentNode._itemId,!0),b.stop=!0):"leaf"==this._selectableType&&0<this.getSubItems(c.parentNode.parentNode._itemId).length?(this._openCloseItem(c.parentNode.parentNode._itemId,!0),b.stop=!0):"parent"==this._selectableType&&0==this.getSubItems(c.parentNode.parentNode._itemId).length&&(b.stop=!0):null!=(c.parentNode.className||"").match(/dhxtreeview_item/)&&("leaf"==this._selectableType&&0<this.getSubItems(c.parentNode._itemId).length?(this._openCloseItem(c.parentNode._itemId,!0),b.stop=!0):"parent"==this._selectableType&&0==this.getSubItems(c.parentNode._itemId).length&&(b.stop=!0))}})};function eXcell_vmded(a){var b=this;a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.hwReport=this.grid.hwReport,this.cellType=(a=this.hwReport.getOriginCellById(this.cell._attrs.sid))&&this.hwReport.cellTypes.get(a.fillcelltype),this.cell.DOMelem_input||(this.cell.atag=this.cellType&&this.cellType.ismultiline?"TEXTAREA":"INPUT",this.cell.DOMelem_input=document.createElement(this.cell.atag),this.cell.DOMelem_input.setAttribute("autocomplete","off"),this.cell.DOMelem_input.className="dhx_combo_edit",this.cell.DOMelem_input.wrap="soft",this.cell.DOMelem_input.style.marginLeft="0px",this.cell.DOMelem_input.style.textAlign=this.cell.style.textAlign,(this.grid._disabled||this.isDisabled())&&this.cell.DOMelem_input.setAttribute("readonly","readonly"),"TEXTAREA"==this.cell.atag&&(this.cell.DOMelem_input.onkeydown=function(a){a=a||window.event;13==a.keyCode&&(a.cancelBubble=!0);return!0}),this.cell.DOMelem_input.onclick=function(a){(a||event).cancelBubble=!0},this.cell.DOMelem_input.onmousedown=function(a){b.cell._editorshow&&!1!==b.grid._doClick(a||window.event)&&(b.grid._sclE?b.grid.editCell(a||window.event):b.grid.editStop());(a||event).cancelBubble=!0},this.cell.DOMelem_input.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0}));this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled};this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);(this.cell._disabled=a)?this.cell.DOMelem_input.setAttribute("readonly","readonly"):this.cell.DOMelem_input.removeAttribute("readonly")};this.edit=function(){this.val=this.getValue();this.cell._editorshow||(this.cell.className+=" "+this.hwReport.reportId+"-p-0",this.cell.DOMelem_input.style.width=this.cell.clientWidth+"px",this.cell.DOMelem_input.style.height=this.cell.clientHeight-3+"px",this.cell.DOMelem_input.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.cell.DOMelem_input));/dhxcombo_actv/g.test(this.cell.DOMelem_input.className)||(this.cell.DOMelem_input.className+=" dhxcombo_actv");_isIE&&(this.cell.DOMelem_input.focus(),this.cell.DOMelem_input.blur());dhx.getOffset(this.cell).top+(this.cell.clientHeight-3)>document.body.clientHeight&&(this.hwReport.grid.objBox.scrollTop+=dhx.getOffset(this.cell).top+(this.cell.clientHeight-3)-document.body.clientHeight);this.cell.DOMelem_input.focus()};this.showEditor=function(){var a=this,b=this.getValue();"TEXTAREA"==this.cell.atag&&(this.cell.DOMelem_input.style.height=this.cell.clientHeight-3+"px");this.cell.DOMelem_input.onclick=null;this.cell.DOMelem_input.style.width=this.cell.clientWidth+"px";this.cell.DOMelem_input.value=b;this.cell.innerHTML="";this.cell.appendChild(this.cell.DOMelem_input);this.cell._editorshow=!0;this.grid.attachEvent("onSetSizes",function(){a.cell.DOMelem_input.style.width=a.cell.clientWidth+"px"})};this.setValue=function(a){"number"==typeof a||a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,"TEXTAREA"==this.cell.atag&&(a=a.replace(/\n/g,"\x3cbr/\x3e"))):this.cell._clearCell=!0;this.cell._editorshow?(this.cell.DOMelem_input.value=a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,this.cell._clearCell?"":a])):this.setCValue(this.cell._clearCell?"\x26nbsp;":a,a)};this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":"TEXTAREA"==this.cell.atag?this.cell.innerHTML.toString()._dhx_trim().replace(/<br(\/){0,1}>/g,"\n"):this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.cell.DOMelem_input.className=this.cell.DOMelem_input.className.replace(/dhxcombo_actv/g,"");this.cell.className=this.cell.className.replace(new RegExp(this.hwReport.reportId+"-p-0","gi")," ");1==this.cell._editorshow?this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,this.cell.DOMelem_input.value]):this.setValue(this.cell.DOMelem_input.value);return this.val!=this.getValue()}}eXcell_vmded.prototype=new eXcell;dhx4.attachEvent("onGridCreated",function(a){window.dhx_globalImgPath||(window.dhx_globalImgPath=a.imgURL);var b=a.hwReport;if(b){for(var c in b._cell_grids)b._cell_grids[c].obj||(b._cell_grids[c].obj=b._cell_grids[c].init(a));b._loading_handler_set_grid||(b._loading_handler_set_grid=b.attachEvent("onStoreSuccess",function(a){if(a.grids)for(var c=0;c<a.grids.length;c++)eXcell_vmdgrid.prototype.fillCellCombos(b,a.grids[c])}))}});function eXcell_vmdgrid(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.hwReport=this.grid.hwReport,this.cellType=this.hwReport._cell_grids[this.cell._attrs.sid],this.subgrid=this.cellType.obj,(this.grid._disabled||this.isDisabled())&&this.subgrid.DOMelem_input.setAttribute("readonly","readonly"));this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled};this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);(this.cell._disabled=a)?(this.cell.firstChild&&this.cell.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild.setAttribute("readonly","readonly"),this.subgrid.DOMelem_input.setAttribute("readonly","readonly")):(this.cell.firstChild&&this.cell.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild.removeAttribute("readonly"),this.subgrid.DOMelem_input.removeAttribute("readonly"))};this.edit=function(){function a(){if(c.cellType.ismulti){var a=(c.cell.combo_value||"").split(c.cellType.seperator),b=[],g;for(g in c.subgrid.rowsAr){var h=c.subgrid.rowsAr[g];if(h&&h.idd){var l=c.subgrid.cells(g,0);l.isCheckbox()&&l.setValue(0);h.className=h.className.replace(" rowselected","")}}for(g=0;g<a.length;g++)if(h=c.subgrid.getRowById(a[g])){var m=c.subgrid.cells(a[g],0),l=c.subgrid.cells(a[g],c.subgrid.getSubGridShowIndex());m.setChecked(!0);/rowselected/g.test(h.className)||(h.className+=" rowselected");c.subgrid.showRow(a[g]);b.push(l.getValue())}c.subgrid.DOMelem_input.value=b.join(c.cellType.seperator);c.subgrid._is_checked_all_col0=void 0==c.subgrid._is_checked_all_col0?c.subgrid.isCheckedAll(0):c.subgrid._is_checked_all_col0;c.subgrid.DOMelem_check_all.src=c.subgrid._is_checked_all_col0?c.subgrid.DOMelem_check_all.src.replace("item_chk0.gif","item_chk1.gif"):c.subgrid.DOMelem_check_all.src.replace("item_chk1.gif","item_chk0.gif")}else c.subgrid.clearSelection(),c.subgrid.getRowById(c.cell.combo_value)&&c.subgrid.setSelectedRow(c.cell.combo_value),c.subgrid.DOMelem_input.value=e}var c=this;this.val=this.cell.combo_value;var e=this.getText();/dhxcombo_actv/g.test(this.subgrid.DOMelem.className)||(this.subgrid.DOMelem.className+=" dhxcombo_actv");this.cell._editorshow||(this.cell.className+=" "+this.hwReport.reportId+"-p-0");this.cell.innerHTML="";this.subgrid.DOMParent.firstChild&&(this.subgrid.DOMParent.firstChild.style.width=this.cell.clientWidth+"px");this.subgrid.DOMelem_input.style.width=this.cell.clientWidth-21+"px";this.cell.appendChild(this.subgrid.DOMParent);this.subgrid.DOMelem_input.focus();this.subgrid.entBox.style.display="block";this.subgrid.entBox.style.zIndex="99";var g=(this.subgrid.DOMParent.clientHeight-this.subgrid.DOMelem.clientHeight)/2;1>g&&(g=0);this.subgrid.DOMelem.style.top=g+"px";var h=window.dhx4.screenDim(),l=this.subgrid.entBox.offsetHeight,m=this.cell.clientWidth*this.cellType.percentWidth,n=this.cell.getBoundingClientRect(),g=n.top+n.height,q=n.left;g+l>h.bottom&&(g=n.top-l);q+m>h.right&&(q=n.left-(m-n.width));this.subgrid.entBox.style.top=g+"px";this.subgrid.entBox.style.left=q-1+"px";this.subgrid.entBox.style.width=m+"px";this.subgrid.entBox.style.position="absolute";this.subgrid.setSizes();g=this.grid.editStop;this.grid.editStop=function(){};a();this.subgrid.setActive(!0);var r=(h=this.hwReport._cell_grids[this.cell._attrs.sid])&&h.bindsource&&h.bindsource.conditions;r&&0<r.length?(this.subgrid.filterByDataStore(function(a,b){for(;0<r.length;)return a[r[0].field]!=c.hwReport.getValue(r[0].value,c)?!1:!0}),a()):this.subgrid.rptStore&&this.subgrid.rptStore.update(function(){a()},function(){});this.grid.editStop=g};this.showEditor=function(){var a=this,c=this.getText();this.cell.innerHTML="";this.subgrid.DOMelem.style.width=this.cell.clientWidth+"px";this.subgrid.DOMelem_input.style.width=this.cell.clientWidth-24+"px";this.subgrid.DOMelem_input.value=c;this.cell.appendChild(this.subgrid.DOMParent);this.subgrid.DOMelem.style.top=(this.subgrid.DOMParent.clientHeight-this.subgrid.DOMelem.clientHeight)/2+"px";this.cell._editorshow=!0;this.grid.attachEvent("onSetSizes",function(){a.cell.firstChild&&a.cell.firstChild.firstChild&&(a.cell.firstChild.firstChild.style.width=a.cell.clientWidth+"px",a.cell.firstChild.firstChild.firstChild.style.width=a.cell.clientWidth-24+"px");a.subgrid.DOMelem.style.width=a.cell.clientWidth+"px";a.subgrid.DOMelem_input.style.width=a.cell.clientWidth-24+"px"})};this.getValue=function(){return this.cell.combo_value||""};this.getText=function(a){a=this.cell;return a._editorshow?a.firstChild.firstChild.firstChild.value:_isIE?a.innerText:a.textContent};this.setValue=function(a){var b=this;this.cell.combo_value=a;if(this.cellType.ismulti){for(var e=(a||"").split(this.cellType.seperator),g=[],h=!1,l=0;l<e.length;l++){var m=this.subgrid.getRowById(e[l])&&this.subgrid.cells(e[l],this.subgrid.getSubGridShowIndex()),m=m&&m.getValue();!m&&this.subgrid.rule&&this.subgrid.rptStore&&(m=(m=this.subgrid.rptStore.find(function(a){return a[b.subgrid.rule.value]+""==e[l]+""}))&&m[this.subgrid.rule.text]);null!=m&&(h=!0);g.push(m||"")}(g=h?g.join(this.cellType.seperator):"")?a=g:this.cellType&&this.cellType.noValueClear&&(a="\x26nbsp;")}else this.subgrid.getRowById(a)?a=(a=this.subgrid.cells(a,this.subgrid.getSubGridShowIndex()))?a.getValue():"":this.subgrid.rule&&this.subgrid.rptStore&&(a=(g=this.subgrid.rptStore.find(function(c){return c[b.subgrid.rule.value]+""==a+""}))&&g[this.subgrid.rule.text]||a);this.setComboCValue(a||"\x26nbsp;",this.cell.combo_value)};this.detach=function(){var a=this,c=this.cell.combo_value;this.cell.className=this.cell.className.replace(new RegExp(this.hwReport.reportId+"-p-0","gi")," ");this.subgrid.DOMelem.className=this.subgrid.DOMelem.className.replace(/dhxcombo_actv/g,"");if(this.subgrid){this.subgrid.entBox.style.display="none";if(this.cellType.ismulti){var e=this.subgrid.getCheckedRowsAr(0),g=e.map(function(b){return(b=a.subgrid.cells(b,a.subgrid.getSubGridShowIndex()))&&b.getValue()||""});0==g.length?(this.setComboCValue("\x26nbsp;",""),this.cell._clearCell=!0):(this.setComboCValue(g.join(this.cellType.seperator),e.map(function(a){return a.replace(/__\d+__/,"")}).join(this.cellType.seperator)),this.cell._clearCell=!1);this.cell.combo_value=e.map(function(a){return a.replace(/__\d+__/,"")}).join(this.cellType.seperator)}else(g=(e=this.subgrid.getSelectedId())&&(a.subgrid.getSubGridShowIndex()||0==a.subgrid.getSubGridShowIndex())&&a.subgrid.cells(e,a.subgrid.getSubGridShowIndex()))&&g.getValue()?(this.setComboCValue(g.getValue(),e.replace(/__\d+__/,"")),this.cell._clearCell=!1):(this.setComboCValue("\x26nbsp;",""),this.cell._clearCell=!0),this.cell.combo_value=e&&e.replace(/__\d+__/,"");a.subgrid.datastore&&a.subgrid.filterByDataStore(function(a,b){return!0});return this.cell.combo_value!=c}}}eXcell_vmdgrid.prototype=new eXcell;eXcell_vmdgrid.prototype.init=function(a){a=document.createElement("DIV");a.style.display="none";a.style.zIndex=99999;document.body.appendChild(a);a.className="dhxgrid_in_grid_parent";var b=new dhtmlXGridObject(a);b.DOMParent=document.createElement("DIV");b.DOMParent.className="dhxcombo_in_grid_parent";b.DOMParent.innerHTML="\x3cdiv class\x3d'dhxcombo_material'\x3e\x3cinput type\x3d'text' class\x3d'dhxcombo_input' autocomplete\x3d'off'\x3e\x3cinput type\x3d'hidden' value\x3d''\x3e\x3cinput type\x3d'hidden' value\x3d'false'\x3e\x3cdiv class\x3d'dhxcombo_select_button'\x3e\x3cdiv class\x3d'dhxcombo_select_img'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";b.DOMelem=b.DOMParent.firstChild;b.DOMelem_input=b.DOMParent.firstChild.firstChild;var c=this;b.subgridcelltype=this.cellType;this.grid.attachEvent("onScroll",function(){b.entBox.style.display="none"});b.entBox.onclick=function(a){(a||window.event).cancelBubble=!0;return!1};b.attachEvent("onRowSelect",function(a){var e=c.cellType&&c.cellType.bindsource&&c.cellType.bindsource.multicolumns;if(e)for(var g=0;g<e.length;g++){var h=e[g].cellid;if(h){var q=b.cells(a,g).getValue();if((h=c.grid.hwReport.getCells(h))&&1==h.length){var r=h[0].getValue();h[0].setValue(q);c.grid.callEvent("onEditCell",[2,h[0].cell.parentNode.idd,h[0].cell._cellIndex,q,r])}}}a=void 0==this._lastSelectTime?!0:!1;this._lastSelectTime=this._lastSelectTime||(new Date).valueOf();e=(new Date).valueOf();g=e-this._lastSelectTime;this._lastSelectTime=e;if(0==c.__isEditStop){if(a||500<g)c.__isEditStop=!0}else c.grid.editStop();return!0});b.attachEvent("onCheck",function(a,e,g){e=b.getCheckedRowsAr(0).map(function(a){return(a=b.cells(a,b.getSubGridShowIndex()))&&a.getValue()||""});b.DOMelem_input.value=e.join(c.cellType.seperator);a=b.getRowById(a);g?(a.className+=" rowselected",b._is_checked_all_col0=b.isCheckedAll(0),b._is_checked_all_col0&&(b.DOMelem_check_all.src=b.DOMelem_check_all.src.replace("item_chk0.gif","item_chk1.gif"))):(b._is_checked_all_col0=!1,a.className=a.className.replace(/ rowselected/g,""),b.DOMelem_check_all.src=b.DOMelem_check_all.src.replace("item_chk1.gif","item_chk0.gif"))});b.attachEvent("onXLE",function(a,e){if(c.cellType.ismulti){var g=this.hdr.rows[1].cells[0];g.firstChild.innerHTML="\x3cimg src\x3d'"+this.imgURL+"item_chk0.gif' /\x3e";b.DOMelem_check_all=g.firstChild.firstChild;b.DOMelem_check_all.onclick=function(a){if(/item_chk0.gif/g.test(this.src)){for(var e=b.rptStore.dhtmlxDatastore,h=e.dataCount(),l=0;l<h;l++){var m=e.idByIndex(l),m=e.item(m);m.chkid="1"}e.refresh();var e=[],n;for(n in b.rowsAr)(h=b.rowsAr[n])&&h.idd&&(l=b.cells(n,0),l.isCheckbox()&&l.setValue(1),e.push(b.cells(n,b.getSubGridShowIndex()).getValue()),/rowselected/g.test(h.className)||(h.className+=" rowselected"));this.src=this.src.replace("item_chk0.gif","item_chk1.gif");b._is_checked_all_col0=!0;b.DOMelem_input.value=e.join(c.cellType.seperator)}else{e=b.rptStore.dhtmlxDatastore;h=e.dataCount();for(l=0;l<h;l++)m=e.idByIndex(l),m=e.item(m),m.chkid=void 0;e.refresh();for(n in b.rowsAr)(h=b.rowsAr[n])&&h.idd&&(l=b.cells(n,0),l.isCheckbox()&&l.setValue(0),h.className=h.className.replace(" rowselected",""));this.src=this.src.replace("item_chk1.gif","item_chk0.gif");b._is_checked_all_col0=!1;b.DOMelem_input.value=""}g.firstChild.innerHTML="\x3cimg src\x3d'"+this.src+"' /\x3e";b.DOMelem_check_all=g.firstChild.firstChild;b.DOMelem_check_all.onclick=this.onclick;a.stopPropagation()}}});a=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:b.DOMParent,evs:{mousedown:"_doOnBaseMouseDown"}},{node:b.DOMelem_input,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}}];for(var e=0;e<a.length;e++)for(var g in a[e].evs)"function"==typeof window.addEventListener?a[e].node.addEventListener(g,eval(a[e].evs[g]),!1):a[e].node.attachEvent("on"+g,eval(a[e].evs[g]));b._chRRS=!1;return b};eXcell_vmdgrid.prototype.fillCellCombos=function(a,b){var c=a.grid,e=a.getOriginCellById(b);if(a.bindDatastore)for(var g=0;g<c.rowsCol.length;g++){var h=c.cells3(c.rowsCol[g],e.index);h.refreshCell&&h.refreshCell()}else for(g=0;g<e.childs.length;g++)h=c.cells.apply(c,e.childs[g].split("_")),h.refreshCell&&h.refreshCell()};eXcell_vmdgrid.prototype.setComboCValue=function(a,b){if(this.cell._editorshow)this.cell.innerHTML=this.subgrid.DOMParent.outerHTML,this.cell.firstChild.firstChild.firstChild.value="\x26nbsp;"==a?"":a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,b]);else{var c;dhx.isIE&&(c=this.subgrid.DOMParent.innerHTML);this.setCValue(a,b);dhx.isIE&&c&&(this.subgrid.DOMParent.innerHTML=c,this.subgrid.DOMParent.firstChild.firstChild.value="\x26nbsp;"==a?"":a)}};eXcell_vmdgrid.prototype.refreshCell=function(){this.setValue(this.getValue())};dhtmlXGridObject.prototype.getSubGridShowIndex=function(){var a=this.subgridcelltype.bindsource.showcolumn;if(a)return this.columnIds.indexOf(a.toLowerCase())};dhtmlXGridObject.prototype.getCheckedRowsAr=function(a){var b=[];this.forEachRow(function(c){var e=this.cells(c,a);e.changeState&&0!=e.getValue()&&b.push(c)},!0);return b};function eXcell_vmdch(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.hwReport=this.grid.hwReport,a=this.hwReport.getOriginCellById(this.cell._attrs.sid),this.cellType=this.hwReport.cellTypes.get(a.fillcelltype));this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled};this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")};this.changeState=function(a){!0!==a||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0));!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[2,this.cell.parentNode.idd,this.cell._cellIndex,this.getValue(),this.val]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return!0};this.isChecked=function(){return"1"==this.getValue()?!0:!1};this.setChecked=function(a){this.setValue(a.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_vmdch.prototype=new eXcell;eXcell_vmdch.prototype.setValue=function(a){this.cell.style.verticalAlign="middle";a&&(a=a.toString()._dhx_trim(),"false"==a||"0"==a)&&(a="");a?(a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.cell.setAttribute("excell","ch");this.setCValue("\x3cimg src\x3d'"+this.grid.imgURL+"item_chk"+a+".gif' style\x3d'vertical-align:middle;' onclick\x3d'new eXcell_vmdch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble\x3dtrue; '\x3e"+(this.cellType.displayLabel?"\x3cspan style\x3d'vertical-align:middle; margin-left:4px;' \x3e"+this.cellType.displayLabel+"\x3c/span\x3e":""),this.cell.chstate)};function eXcell_vmdorder(a){a&&(this.cell=a,this.cell._disabled=!0,this.grid=this.cell.parentNode.grid);this.getValue=function(){return"undefined"!=typeof this.cell._brval?this.cell._brval:this.cell._brval||this.cell.innerHTML.toString()._dhx_trim()};this.setValue=function(a){var b=this.grid.hwReport;if(b.vmdreport&&"vmd.datainput"==b.vmdreport.xtype){var e=this.cell,g=this;window.setTimeout(function(){if(e.parentNode){var a=e.parentNode.rowIndex;if(e.parentNode.grid.currentPage||0>a||e.parentNode.grid._srnd)a=e.parentNode.grid.rowsBuffer._dhx_find(e.parentNode)+1;0>=a||(e.innerHTML=a,e.parentNode.grid._fake&&e._cellIndex<e.parentNode.grid._fake._cCount&&e.parentNode.grid._fake.rowsAr[e.parentNode.idd]&&e.parentNode.grid._fake.cells(e.parentNode.idd,e._cellIndex).setCValue(a),e=null,g.setCValue(a))}},100)}else{var h=b.getOriginCellById(this.cell._attrs.sid);!a&&h&&(a=(a=b.cellTypes.get(h&&h.fillcelltype))&&a.start||1,h._seed=h._seed||a,a=h._seed++);a=a||"1";this.cell._brval=a;this.setCValue(a)}}}eXcell_vmdorder.prototype=new eXcell;function eXcell_vmdsubreport(a){var b=this;if(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.hwReport=this.grid.hwReport;var c=this.hwReport.getOriginCellById(a._attrs.sid),c=this.hwReport.cellTypes.get(c.fillcelltype);this.cell.style.padding="0px";"embed"==c.subrptshowmode?(this.hwReport.embedSubReportCells=this.hwReport.embedSubReportCells||{},this.hwReport.embedSubReportCells[a.parentNode.idd+"_"+a._cellIndex]=a):"expand"==c.subrptshowmode&&"1"==c.spread&&(this.hwReport.expandSubReportCells=this.hwReport.expandSubReportCells||{},this.hwReport.expandSubReportCells[a.parentNode.idd+"_"+a._cellIndex]=a);this.hwReport.sub_onReportRendered_id||(this.hwReport.sub_onReportRendered_id=this.hwReport.attachEvent("onRendered",function(){if(!b.hwReport.isEmpty(b.hwReport.expandSubReportCells))for(var a in b.hwReport.expandSubReportCells)b.grid._expandMonolite_vmd.apply(b.hwReport.expandSubReportCells[a].firstChild,[window.event]);if(!b.hwReport.isEmpty(b.hwReport.embedSubReportCells))for(a in b.grid._flow=[],b.hwReport.embedSubReportCells){var c=b.hwReport.embedSubReportCells[a],h=b.grid._sub_vmdreport_render(c,"embed");b.grid._flow[c.parentNode.idd]=c._d;b.grid.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite_vmd():this._correctMonolite_vmd(null,!1)});b.grid.attachEvent("onClearAll",function(){for(var a in this._flow)this._flow[a]&&this._flow[a].parentNode&&this._flow[a].parentNode.removeChild(this._flow[a]);this._flow=[]});b.grid.callEvent("onSubReportOpen",[c.parentNode.idd,c._cellIndex,h])}}))}this.setValue=function(a){this.cell._sub_row_type="vmdsubreport";a=this.hwReport.getOriginCellById(this.cell._attrs.sid);a=this.hwReport.cellTypes.get(a.fillcelltype);"popup"==a.subrptshowmode?this._setState("pop.png"):"embed"!=a.subrptshowmode&&this._setState("plus.gif")};this.getValue=function(){return this.cell._attrs.data};this._setState=function(a,b){var c=this,e=b||this.cell,g=this.hwReport.getOriginCellById(e._attrs.sid),n=this.hwReport.cellTypes.get(g.fillcelltype),g="";"minus.gif"!=a?(g="\x3cdiv style\x3d'cursor:pointer;'\x3e\x3cimg src\x3d'"+this.grid.imgURL+a+"' style\x3d'width:18px;height:18px;float:left;'/\x3e\x3cspan style\x3d'line-height:18px;'\x3e"+(e._attrs.data||"\x26nbsp;")+"\x3c/span\x3e\x3c/div\x3e",e.className=e.className.replace(this.hwReport.reportId+"-v-top","")):(g="\x3cdiv style\x3d'cursor:pointer;padding-top:"+parseInt(((e.parentNode.oldHeight||e.offsetHeight)-e.firstChild.offsetHeight)/2)+"px;'\x3e\x3cimg src\x3d'"+this.grid.imgURL+a+"' style\x3d'width:18px;height:18px;float:left;'/\x3e\x3cspan style\x3d'line-height:18px;'\x3e"+(e._attrs.data||"")+"\x3c/span\x3e\x3c/div\x3e",e.className+=" "+this.hwReport.reportId+"-v-top");e.innerHTML=g;e.firstChild.onclick=function(a){"popup"==n.subrptshowmode?c.grid.openSubReportInWindow.apply(c.grid,[a,e]):c.grid._expandMonolite_vmd.apply(e.firstChild,[a])}}}eXcell_vmdsubreport.prototype=new eXcell;dhtmlXGridObject.prototype._sub_vmdreport_render=function(a,b){a._d&&a._d.parentNode.removeChild(a._d);var c=this,e=document.createElement("DIV");e.ctrl={rId:a.parentNode.idd,cIndex:a._cellIndex};e.style.cssText="position:absolute;width:"+a.offsetWidth+"px; height:"+a.offsetHeight+"px; left:"+a.offsetLeft+"px; top:"+a.offsetTop+"px; overflow-x:hidden; font-family:Tahoma; font-size:8pt; margin-bottom:0px;";e.className="dhx_sub_row ";this.objBox.appendChild(e);a._d=e;var g=document.createElement("DIV");g.id="sub_"+a.parentNode.idd+"_"+a._cellIndex;e.appendChild(g);var h=this.hwReport.getOriginCellById(a._attrs.sid),h=this.hwReport.cellTypes.get(h.fillcelltype),h=this.hwReport.subs[h.subrptindex],l=new HwReport(this.hwReport.vmdreport,e,g,a.offsetWidth,a.offsetHeight,!0,!0,!0,b);if(!h)return l;l.attachEvent("onSectionSeverSuccess",function(){l.vmdreport.myMask.hide()});l.init();l.parse(h);l.analysis();l.integrateMatrix();l.insertRules();l.prepare();l.initContainer();l.initMenus();l.initGrid();l.attachGridEvent();l.updateDatastore();l.grid.attachEvent("onSetSizes",function(){c.hwReport.grid._detectHeight_tb(e,a);c.hwReport.grid._correctMonolite_vmd();c.hwReport.setSize();c.hwReport.setPosition()});this.hwReport.subReports.put(h.name,l);l.parentReport=this.hwReport;return l};dhtmlXGridObject.prototype._expandMonolite_vmd=function(a,b,c){var e=this.parentNode,g=e.parentNode,h=g.grid;if(a||window.event)c||g._expanded||h.editStop(),(a||event).cancelBubble=!0;a=h.getUserData(g.idd,"__sub_row");h._sub_row_editor||(h._sub_row_editor=new eXcell_vmdsubreport(e));if(g._expanded&&!b){h._sub_row_editor._setState("plus.gif",e);e._previous_content=g._expanded;h.objBox.removeChild(g._expanded);g._expanded=!1;g.style.height=(g.oldHeight||20)+"px";e.style.height=(g.oldHeight||20)+"px";h._fake&&(h._fake.rowsAr[g.idd].style.height=(g.oldHeight||20)+"px",h._fake.rowsAr[g.idd].firstChild.style.height=(g.oldHeight||20)+"px");for(b=0;b<g.cells.length;b++)g.cells[b].style.verticalAlign="middle";delete h._flow[g.idd];h._correctMonolite_vmd();g._expanded.ctrl=null}else if(!g._expanded&&!c){h._sub_row_editor._setState("minus.gif",e);g.oldHeight=g.oldHeight||e.offsetHeight;e._previous_content?(b=e._previous_content,b.ctrl=e,h.objBox.appendChild(b),h._detectHeight_tb(b,e,parseInt(b.style.height))):(e._sub_row_type?e.sub_report=h._sub_vmdreport_render(e,"expand"):e._d.innerHTML=a,h._detectHeight_tb(e._d,e));h._flow||(h.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite_vmd():this._correctMonolite_vmd()}),h.attachEvent("onResizeEnd",function(){this._correctMonolite_vmd(!0)}),h.attachEvent("onAfterCMove",function(){this._correctMonolite_vmd(!0)}),h.attachEvent("onDrop",function(){this._correctMonolite_vmd(!0)}),h.attachEvent("onBeforePageChanged",function(){this._collapsMonolite_vmd();return!0}),h.attachEvent("onGroupStateChanged",function(){this._correctMonolite_vmd();return!0}),h.attachEvent("onFilterEnd",function(){this._collapsMonolite_vmd()}),h.attachEvent("onUnGroup",function(){this._collapsMonolite_vmd()}),h.attachEvent("onPageChanged",function(){this._collapsMonolite_vmd()}),h.attachEvent("onXLE",function(){this._collapsMonolite_vmd()}),h.attachEvent("onClearAll",function(){for(var a in this._flow)this._flow[a]&&this._flow[a].parentNode&&this._flow[a].parentNode.removeChild(this._flow[a]);this._flow=[]}),h.attachEvent("onCellChanged",function(a,b){this._flow[a]&&(this.cells(a,b).cell.style.verticalAlign="top")}),h._flow=[]);h._flow[g.idd]=e._d;h._correctMonolite_vmd();for(b=0;b<g.cells.length;b++)g.cells[b].style.verticalAlign="top";if(h._fake)for(c=h._fake.rowsAr[g.idd],b=0;b<c.cells.length;b++)c.cells[b].style.verticalAlign="top";g._expanded=e._d}h._ahgr&&h.setSizes();g._expanded?h.callEvent("onSubReportOpen",[g.idd,e._cellIndex,e.sub_report]):h.callEvent("onSubReportClose",[g.idd,e._cellIndex,e.sub_report])};dhtmlXGridObject.prototype._detectHeight_tb=function(a,b,c){a.style.left=b.offsetLeft+"px";c=c||a.firstChild.scrollHeight;a.style.overflow="hidden";a.style.height=c+"px";a=b.parentNode;b.parentNode.style.height=(a.oldHeight||20)+1*c+"px";b.style.height=(a.oldHeight||20)+1*c+"px";this._fake&&(b=this._fake.rowsAr[b.parentNode.idd],b.style.height=(a.oldHeight||20)+1*c+"px",b.firstChild.style.height=(a.oldHeight||20)+1*c+"px")};dhtmlXGridObject.prototype._correctMonolite_vmd=function(a,b){if(!this._in_correction){this._in_correction=!0;for(var c in this._flow)if(this._flow[c]&&"DIV"==this._flow[c].tagName)if(this.rowsAr[c])if("none"==this.rowsAr[c].style.display)this.cells4(this._flow[c].ctrl).close();else{if(this._flow[c].style.top=this.rowsAr[c].offsetTop+(0==b?-1:this.rowsAr[c].oldHeight||20)+1+"px",a){var e=this._flow[c].ctrl.offsetLeft+this._flow[c].ctrl.offsetWidth;this._flow[c].style.left=e+"px";this._flow[c].style.width=this.rowsAr[c].offsetWidth-e-4+"px"}}else this._flow[c].ctrl=null,this.objBox.removeChild(this._flow[c]),delete this._flow[c];this._in_correction=!1}};dhtmlXGridObject.prototype._collapsMonolite_vmd=function(){for(var a in this._flow)this._flow[a]&&"DIV"==this._flow[a].tagName&&this.rowsAr[a]&&this.cells4(this._flow[a].ctrl).close()};dhtmlXGridObject.prototype.openSubReportInWindow=function(a,b,c,e,g,h){var l=this;if(a||window.event)this.editStop(),(a||event).cancelBubble=!0;a=this.hwReport;var m=a.getOriginCellById(b._attrs.sid),m=a.cellTypes.get(m.fillcelltype),m="win_"+b._attrs.sid;a.wins=a.wins||{};if(n=a.wins[m])n.show();else{c=c||0;e=e||0;g=g||600;h=h||320;var n=(a.dhxWins=a.dhxWins||new dhtmlXWindows).createConfirmWindow(m,c,e,g,h);n.center();n.setModal(!0);n.setText(b._attrs.data||"");a.wins[m]=n;h=document.createElement("DIV");h.id=m;h.style.position="relative";n.cell.firstChild.appendChild(h);n.button("close").attachEvent("onClick",function(){n.setModal(!1);n.hide();l.callEvent("onSubReportClose",[b.parentNode.idd,b._cellIndex,q]);return!1});m=this.hwReport.getOriginCellById(b._attrs.sid);m=this.hwReport.cellTypes.get(m.fillcelltype);a=this.hwReport.subs[m.subrptindex];var q=new HwReport(this.hwReport.vmdreport,n.cell.firstChild,h,n.cell.firstChild.clientWidth,n.cell.firstChild.clientHeight);if(!a)return q;q.init();q.parse(a);q.analysis();q.integrateMatrix();q.insertRules();q.prepare();q.initContainer();q.initMenus();q.initGrid();q.attachGridEvent();q.updateDatastore();this.hwReport.subReports.put(a.name,q);q.parentReport=this.hwReport;n.attachEvent("onResizeFinish",function(a){q.setSize(a.cell.clientWidth,a.cell.clientHeight);q.setPosition()});n.attachEvent("onResizeFinish",function(a){q.setSize(a.cell.clientWidth,a.cell.clientHeight);q.setPosition()});n.attachEvent("onShow",function(a){l.callEvent("onSubReportOpen",[b.parentNode.idd,b._cellIndex,q])});this.callEvent("onSubReportOpen",[b.parentNode.idd,b._cellIndex,q])}};function eXcell_vmdguid(a){a&&(this.cell=a,this.cell._disabled=!0,this.grid=this.cell.parentNode.grid);this.getValue=function(){return"undefined"!=typeof this.cell._brval?this.cell._brval:this.cell._brval||this.cell.innerHTML.toString()._dhx_trim()};this.setValue=function(a){var b=this.grid.hwReport,e=b.getOriginCellById(this.cell._attrs.sid),b=(b=b.cellTypes.get(e&&e.fillcelltype))&&b.len||32;a=a||vmd.getGuid(b);this.cell._brval=a;this.setCValue(a)}}eXcell_vmdguid.prototype=new eXcell;function eXcell_vmdbutton(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.hwReport=this.grid.hwReport);var b=this;this.conf={};this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled};this.setValue=function(c){var e=this.hwReport.getOriginCellById(a._attrs.sid),e=this.hwReport.cellTypes.get(e.fillcelltype);this.cell.innerHTML="";if("none"==e.bottontype)this.cell._val=e.name,this.cell.innerHTML="\x3cinput type\x3d'button' class\x3d' noprint' value\x3d'"+(e.name||c)+"'/\x3e",this.cell.firstChild.onclick=function(a){(a||event).cancelBubble=!0;b.hwReport.callEvent("onEditRow",["label",b.cell.parentNode.idd,b.cell._cellIndex]);return!1};else if("add-delete"==e.bottontype)this.cell._val="add-delete",this.cell.innerHTML="\x3cimg class\x3d'noprint' src\x3d'"+this.grid.imgURL+"add.png'/\x3e\x3cimg class\x3d'noprint' src\x3d'"+this.grid.imgURL+"delete.png'/\x3e",this.cell.children[0].onclick=function(a){(a||event).cancelBubble=!0;b.hwReport.callEvent("onEditRow",["add",b.cell.parentNode.idd,b.cell._cellIndex]);return!1},this.cell.children[1].onclick=function(a){(a||event).cancelBubble=!0;b.hwReport.callEvent("onEditRow",["delete",b.cell.parentNode.idd,b.cell._cellIndex]);return!1};else if(e.bottontype){c={insertrow:"add",deleterow:"delete",editrow:"edit",retract:"retract",expend:"expend",moveup:"moveup",movedown:"movedown"};var g="extend_retract"==e.bottontype?c[e.status]:c[e.bottontype];this.cell._val=g;e.text?(this.cell.innerHTML="left"==e.labelpos?"\x3cspan\x3e"+e.text+"\x3c/span\x3e\x3cimg class\x3d'noprint' src\x3d'"+this.grid.imgURL+g+".png'/\x3e":"\x3cimg class\x3d'noprint' src\x3d'"+this.grid.imgURL+g+".png'/\x3e\x3cspan\x3e"+e.text+"\x3c/span\x3e",this.cell.firstChild.onclick=function(a){(a||event).cancelBubble=!0;b.hwReport.callEvent("onEditRow",[g,b.cell.parentNode.idd,b.cell._cellIndex]);return!1},this.cell.lastChild.onclick=function(a){(a||event).cancelBubble=!0;b.hwReport.callEvent("onEditRow",[g,b.cell.parentNode.idd,b.cell._cellIndex]);return!1}):(this.cell.innerHTML="\x3cimg class\x3d'noprint' src\x3d'"+this.grid.imgURL+g+".png'/\x3e",this.cell.firstChild.onclick=function(a){(a||event).cancelBubble=!0;b.hwReport.callEvent("onEditRow",[g,b.cell.parentNode.idd,b.cell._cellIndex]);return!1})}else c&&(this.cell._val=c,this.cell.innerHTML="\x3cspan class\x3d'noprint'\x3e"+c+"\x3c/span\x3e",this.cell.firstChild.onclick=function(a){(a||event).cancelBubble=!0;b.hwReport.callEvent("onEditRow",["label",b.cell.parentNode.idd,b.cell._cellIndex]);return!1});this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.cell,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur",input:"_doOnInputInput"}}];for(c=0;c<this.conf.evs_nodes.length;c++)for(var h in this.conf.evs_nodes[c].evs)window.addEventListener?this.conf.evs_nodes[c].node.addEventListener(h,this[this.conf.evs_nodes[c].evs[h]],!1):this.conf.evs_nodes[c].node.attachEvent("on"+h,this[this.conf.evs_nodes[c].evs[h]])};this.getValue=function(){return this.cell._val};this.edit=this.detach=null;this._doOnInputKeyDown=function(a){a=a||event;38!=a.keyCode&&40!=a.keyCode||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,b._keyOnUpDown(38==a.keyCode?-1:1));113!=a.keyCode||b._isListVisible()||(b._showList(),b.cell.firstChild.value==b.conf.last_text?(b._setSelected(b.conf.last_selected,!0,!0),b.cell.firstChild.value=b.conf.last_text,b.conf.f_server_last=b.cell.firstChild.value.toLowerCase()):(b.conf.f_server_last=b.cell.firstChild.value.toLowerCase(),0==b.conf.f_mode&&b._checkForMatch()));27==a.keyCode&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,b._cancelSelect());13==a.keyCode&&(a.preventDefault&&a.preventDefault(),b._confirmSelect("kbd"));b.conf.clear_key=!0;b.callEvent("onKeyPressed",[a.keyCode||a.charCode])}}eXcell_vmdbutton.prototype=new eXcell;dhx4.attachEvent("onGridCreated",function(a){window.dhx_globalImgPath||(window.dhx_globalImgPath=a.imgURL);var b=a.hwReport;if(b){for(var c in b._cell_combos){var e=b._cell_combos[c];e.obj||(e.obj=e.init(a))}b._loading_handler_set_combo||(b._loading_handler_set_combo=b.attachEvent("onStoreSuccess",function(a){if(a.combos)for(var c=0;c<a.combos.length;c++)eXcell_vmdcombo.prototype.fillCellCombos(b,a.combos[c])}))}});function eXcell_vmdcombo(a){a&&(this.cell=a,this.grid=a.parentNode.grid,this._combo_pre="",this.hwReport=this.grid.hwReport,this.cellType=this.hwReport._cell_combos[this.cell._attrs.sid],this.combo=this.cellType.obj,(this.grid._disabled||this.isDisabled())&&this.combo.DOMelem_input.setAttribute("readonly","readonly"),this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled},this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);(this.cell._disabled=a)?(this.cell.firstChild&&this.cell.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild.setAttribute("readonly","readonly"),this.combo.DOMelem_input.setAttribute("readonly","readonly")):(this.cell.firstChild&&this.cell.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild&&this.cell.firstChild.firstChild.firstChild.removeAttribute("readonly"),this.combo.DOMelem_input.removeAttribute("readonly"))},this.edit=function(){function a(a){if(c.cellType.ismulti){a=(c.cell.combo_value||"").split(c.cellType.seperator);var b=[];null!=c.combo.conf.last_hover&&(c.combo.t[c.combo.conf.last_hover].obj.setSelected(c.combo.t[c.combo.conf.last_hover].item,!1),c.combo.conf.last_hover=null);c.combo.base.firstChild.value="";c.combo.forEachOption(function(a){c.combo.setChecked(a.index,!1)});for(var e=0;e<a.length;e++){var g=c.combo.getOption(a[e]);g&&(c.combo.setChecked(g.index,!0),c.combo.selectOption(g.index),b.push(g.text))}c.combo.DOMelem_input.value=b.join(c.cellType.seperator)}else-1!=c.combo.getIndexByValue(c.cell.combo_value)?c.combo.selectOption(c.combo.getIndexByValue(c.cell.combo_value)):c.combo.getOptionByLabel(a)?c.combo.selectOption(c.combo.getIndexByValue(c.combo.getOptionByLabel(a).value)):c.combo.unSelectOption(),c.combo.DOMelem_input.value=a}window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL);var c=this;this.val=this.getValue();var e=this.getText();this.cell.innerHTML="";this.cell._editorshow||(this.cell.style.padding="0px");this.cell.appendChild(this.combo.DOMParent);this.combo.DOMParent.style.margin="0";this.combo.DOMelem_input.focus();this.combo.base.style.width=this.cell.clientWidth+"px";this.combo.base.firstChild.style.width=this.cell.clientWidth-(this.combo.conf.i_ofs+1)+"px";this.combo.DOMelem.style.top=(this.combo.DOMParent.clientHeight-this.combo.DOMelem.clientHeight)/2+"px";this.combo.conf.combo_width=this.cell.clientWidth*this.cellType.percentWidth;a(e);var g=this.cellType&&this.cellType.bindsource&&this.cellType.bindsource.conditions;g&&0<g.length?(this.combo.filterByDataStore(function(a,b){for(;0<g.length;)return a[g[0].field]!=c.hwReport.getValue(g[0].value,c)?!1:!0}),a(e)):this.combo.rptStore&&(this.combo._ishideList=!1,this.combo.rptStore.update(function(){a(e);c.combo.openSelect()},function(){}));this.combo.openSelect()},this.showEditor=function(){var a=this,c=this.getText();this.cell.innerHTML="";this.combo.DOMelem.style.width=this.cell.clientWidth+"px";this.combo.DOMelem_input.style.width=this.cell.clientWidth-24+"px";this.combo.DOMelem_input.value=c;this.cell.appendChild(this.combo.DOMParent);this.combo.DOMelem.style.top=(this.combo.DOMParent.clientHeight-this.combo.DOMelem.clientHeight)/2+"px";this.cell._editorshow=!0;this.grid.attachEvent("onSetSizes",function(){a.cell.firstChild&&a.cell.firstChild.firstChild&&(a.cell.firstChild.firstChild.style.width=a.cell.clientWidth+"px",a.cell.firstChild.firstChild.firstChild.style.width=a.cell.clientWidth-24+"px");a.combo.DOMelem.style.width=a.cell.clientWidth+"px";a.combo.DOMelem_input.style.width=a.cell.clientWidth-24+"px"})},this.selectComboOption=function(a,c){c.selectOption(c.getIndexByValue(c.getOptionByLabel(a).value))},this.getValue=function(a){return this.cell.combo_value||""},this.getText=function(a){a=this.cell;if(a._editorshow)return a.firstChild.firstChild.firstChild.value;""==this._combo_pre&&a.childNodes[1]?a=a.childNodes[1]:a.childNodes[0].childNodes[1];return dhx4.trim(_isIE?a.innerText:a.textContent)},this.setValue=function(a){this.cell.combo_value=a;var b=null;if((b=this.cell._brval)&&"object"==typeof this.cell._brval)if(this.cellType.ismulti){for(var e=(a||"").split(this.cellType.seperator),g=[],h=0;h<e.length;h++)g.push((b.getOption(e[h])||{}).text||"");a=g.join(this.cellType.seperator)}else a=(b.getOption(a)||{}).text||a;else if(b=this.hwReport._cell_combos[this.cell._attrs.sid].obj)if(this.cellType.ismulti){e=(a||"").split(this.cellType.seperator);g=[];for(h=0;h<e.length;h++){var l=b.getOption(e[h])&&b.getOption(e[h]).text;!l&&b.rule&&b.rptStore&&(l=(l=b.rptStore.find(function(a){return a[b.rule.value]+""==e[h]+""}))&&l[b.rule.text]);g.push(l||"")}(g=g.join(this.cellType.seperator))?a=g:this.cellType&&this.cellType.noValueClear&&(a="\x26nbsp;")}else{if(g=b.getOption(a))a=g;else if(b.rule&&b.rptStore)if(g=b.rptStore.find(function(c){return c[b.rule.value]+""==a+""}))a={value:g[b.rule.value]+"",text:g[b.rule.text]+""};else if(this.cellType&&this.cellType.noValueClear&&(a={value:"",text:"\x26nbsp;"},b.rptStore.dataRequestCompleted)){var m=this.hwReport.getOriginCellById(this.cell._attrs.sid),l=m&&m.dsField&&m.dsField[0],m=this.hwReport.queryDatastores.get(m&&m.dsName&&m.dsName[0])||this.hwReport.bindDatastore,n=this.cell.parentNode.idd;m&&l&&m.updateValue(n,l,"");this.cell.combo_value=g||""}a=dhx._isObj(a)?a.text:a}""==(a||"").toString()._dhx_trim()&&(a=null);null!==a?this.setComboCValue(a,this.cell.combo_value):(this.setComboCValue("\x26nbsp;",""),this.cell._clearCell=!0)},this.detach=function(){var a=this,c=this.combo.getParent();if(c.parentNode==this.cell)this.cell.removeChild(c);else return!1;c=this.cell.combo_value;this.combo._confirmSelect("blur");this.cell.style.padding="";this.combo.DOMParent.firstChild.className=this.combo.DOMParent.firstChild.className.replace(/dhxcombo_actv/g,"");if(this.cellType.ismulti){var e=this.combo.getChecked();0==e.length?(this.setComboCValue("\x26nbsp;",""),this.cell._clearCell=!0):(this.setComboCValue(e.map(function(b){return a.combo.getOption(b).text}).join(this.cellType.seperator),e.join(this.cellType.seperator)),this.cell._clearCell=!1);this.cell.combo_value=e.join(this.cellType.seperator)}else this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("\x26nbsp;",""),this.cell._clearCell=!0),this.cell.combo_value=this.combo.getActualValue();this.combo.closeAll();this.grid._still_active=!0;this.grid.setActive(1);return c!=this.cell.combo_value})}eXcell_vmdcombo.prototype=new eXcell;eXcell_vmdcombo.prototype.init=function(a){var b="";a.ismulti&&(b="checkbox");var c=document.createElement("DIV");c.className="dhxcombo_in_grid_parent";var e=new dhtmlXCombo(c,"combo",0,b);e.enableFilteringMode("between");var g=this.grid;e.DOMelem.onmousedown=e.DOMelem.onclick=function(a){a=a||event;a.cancelBubble=!0};e.DOMelem.onselectstart=function(a){a=a||event;return a.cancelBubble=!0};this.grid.attachEvent("onScroll",function(){e._isListVisible()&&e._hideList()});a.ismulti&&e.attachEvent("onCheck",function(b,c){var h=g.editStop;g.editStop=function(){g.editStop=h};var l=e.getChecked();e.DOMelem_input.value=l.map(function(a){return e.getOption(a).text}).join(a.seperator)});return e};eXcell_vmdcombo.prototype.fillCellCombos=function(a,b){var c=a.grid,e=a.getOriginCellById(b);if(a.bindDatastore)for(var g=0;g<c.rowsCol.length;g++){var h=c.cells3(c.rowsCol[g],e.index);h.refreshCell&&h.refreshCell()}else for(g=0;g<e.childs.length;g++)h=c.cells.apply(c,e.childs[g].split("_")),h.refreshCell&&h.refreshCell()};eXcell_vmdcombo.prototype.setComboCValue=function(a,b){""!=this._combo_pre&&(a="\x3cdiv style\x3d'width:100%;position:relative;height:100%;overflow:hidden;'\x3e"+this._combo_pre+"\x3cspan\x3e"+a+"\x3c/span\x3e\x3c/div\x3e");this.cell._editorshow?(this.cell.innerHTML=this.combo.DOMParent.outerHTML,this.cell.firstChild.firstChild.firstChild.value="\x26nbsp;"==a?"":a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,b])):this.setCValue(a,b)};eXcell_vmdcombo.prototype.refreshCell=function(){this.setValue(this.getValue())};dhtmlXCombo.prototype.modes.checkbox.image=!1;function eXcell_vmdapprove(a){var b=this;a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.hwReport=this.grid.hwReport,a._approve||(a._approve=b.grid._approve_render(a)),this.hwReport.approveCells=this.hwReport.approveCells||{},this.hwReport.approveCells[a.parentNode.idd+"_"+a._cellIndex]=a,this.hwReport.approve_onReportRendered_id||(this.hwReport.approve_onReportRendered_id=this.hwReport.attachEvent("onRendered",function(){if(!b.hwReport.isEmpty(b.hwReport.approveCells))for(var a in b.hwReport.approveCells){var e=b.hwReport.approveCells[a];e._approve.doLayout();e._disabled&&e._approve.setDisabled()}})));this.edit=function(){this.cell.className=this.cell.className.replace(/editable/g," ")};this.detach=function(){this.grid.editor=null};this.setValue=function(a){};this.setDisabled=function(){this.cell._disabled=!0;this.cell._approve.setDisabled()};this.getValue=function(a){return this.cell._approve.getValue(a)};this.updateValue=function(){this.cell._approve.updateValue()}}eXcell_vmdapprove.prototype=new eXcell;dhtmlXGridObject.prototype._approve_render=function(a){a._d&&a._d.parentNode.removeChild(a._d);var b=this,c=document.createElement("DIV");c.style.cssText="position:relative;overflow:hidden;";c.className="dhx_approve ";a.innerHTML="";a.className+=" "+this.hwReport.reportId+"-p-0";a._d=c;a.appendChild(c);var c=this.hwReport.getOriginCellById(a._attrs.sid),c=this.hwReport.cellTypes.get(c.fillcelltype),e=new dhtmlXApprove(this.hwReport,a,c.items);e.render();e.attachEvent("onApproval",function(){var c=e.getAllValue();b.callEvent("onCellChanged",[a.parentNode.idd,a._cellIndex,c]);b.callEvent("onEditCell",[2,a.parentNode.idd,a._cellIndex,c,e.oldValues]);var h=[],l;for(l in c)c.hasOwnProperty(l)&&h.push({key:l,value:c[l]});h=h.map(function(a){return a.key+"\x3d"+a.value});b.hwReport.callEvent("onApproval",[b,a.parentNode.idd,a._cellIndex,e.result,c]);c="myApproveAgree";this.ApproveAgreeClickName&&(c=this.ApproveAgreeClickName);if(Ext.isFunction(window[c]))window[c](h.join("\x26"));if(Ext.isFunction(window[this.hwReport.reportId+"_myApproveAgree"]))window[this.hwReport.reportId+"_myApproveAgree"](h.join("\x26"))});e.attachEvent("onValueCalculated",function(){b.callEvent("onValueCalculated",[a.parentNode.idd,a._cellIndex,e.getAllValue()])});return e};function dhtmlXApprove(a,b,c){this.cell=b;this.oldValues={department:"",opinions:"",seal:"",person:"",date:"",result:""};this.defaultOptions={padding:10,personMaxHeight:25,sealMaxHeight:120,buttonWidth:60,buttonHeight:25,buttonPadding:20,dateInputWidth:80,dateInputHeight:25};window.dhx4._eventable(this);this.hwReport=a;this.options=c;this._items={};this.container="string"==typeof b._d?document.getElementById(b._d):b._d;this.render=function(){this.result="";this.bindQueryStore={};var a=this.findOptions("Agree"),b=this.findOptions("DisAgree"),c=this.findOptions("SenBack"),a=dhx.trim(a.value||b.value||c.value||"");0==a.indexOf("\x3d")&&(this.cansetDisabled=!1,a=this.hwReport.getValue(a.replace("\x3d","")));this.result=a;this.oldValues.result=a;this.initDepartment();this.initComment();this.initDate();this.initAgreeButton();this.initDisAgreeButton();this.initSenBackButton();this.initPerson();this.initSeal();this.result&&this.setComplete()};this.initDepartment=function(){var a=this.findOptions("ApprovalDepartment");if(null!=a&&"0"!=a.isshow){var b=this._items.department=document.createElement("div");b.style=this.getFontStyle(a)+";position:absolute;text-align:left";var c=dhx.trim(a.labelvalue||"");0==c.indexOf("\x3d")&&(c=this.hwReport.getValue(c.replace("\x3d","")));a=dhx.trim(a.value||"");0==a.indexOf("\x3d")&&(a=this.hwReport.getValue(a.replace("\x3d","")));this.oldValues.department=a;b.innerHTML="\x3cspan\x3e"+c+"\x3c/span\x3e\x3cspan\x3e"+a+"\x3c/span\x3e";this.container.appendChild(b)}};this.initComment=function(){var a=this.findOptions("ApprovalComment");if(null!=a&&"0"!=a.isshow){var b=this._items.comment=document.createElement("div");b.style=this.getFontStyle(a)+";position:absolute;text-align:left";var c=dhx.trim(a.labelvalue||"");0==c.indexOf("\x3d")&&(c=this.hwReport.getValue(c.replace("\x3d","")));var l=dhx.trim(a.value||"");0==l.indexOf("\x3d")&&(l=this.hwReport.getValue(l.replace("\x3d","")));this.oldValues.opinions=l;b.innerHTML="\x3cspan style\x3d'position: relative;line-height:1;vertical-align:top;top: 3px'\x3e"+c+"\x3c/span\x3e\x3ctextarea  class\x3d'approve_options' style\x3d'"+this.getFontStyle(a)+"'\x3e"+l+"\x3c/textarea\x3e";this.container.appendChild(b)}};this.initSeal=function(){var a=this,b=this.findOptions("ApprovalSeal"),c=this._items.seal=document.createElement("div");c.style=this.getFontStyle(b)+";position:absolute;text-align:left;";var l=dhx.trim(b.labelvalue||"");0==l.indexOf("\x3d")&&(l=this.hwReport.getValue(l.replace("\x3d","")));c.innerHTML="\x3cspan style\x3d'display: inline-block;vertical-align: middle'\x3e"+l+"\x3c/span\x3e";b.src&&(b=dhx.trim(b.src||""),0==b.indexOf("\x3d")&&(b=this.hwReport.getValue(b.replace("\x3d",""))),l=c._image=new Image,l.onload=function(){a.doLayout()},l.src=b,this.oldValues.seal=b,l.style="display: inline-block;vertical-align: middle;",this.result||(l.style.visibility="hidden"),c.appendChild(l));this.container.appendChild(c)};this.initPerson=function(){var a=this,b=this.findOptions("ApprovalPerson"),c=this._items.person=document.createElement("div");c.style=this.getFontStyle(b)+";position:absolute;text-align:left;";var l=dhx.trim(b.labelvalue||"");0==l.indexOf("\x3d")&&(l=this.hwReport.getValue(l.replace("\x3d","")));var m=dhx.trim(b.value||"");0==m.indexOf("\x3d")&&(m=this.hwReport.getValue(m.replace("\x3d","")));this.oldValues.person=m;c.innerHTML="\x3cspan style\x3d'display: inline-block;vertical-align: middle'\x3e"+l+"\x3c/span\x3e\x3cspan style\x3d'display: inline-block;vertical-align: middle'\x3e"+m+"\x3c/span\x3e";b.namepicture&&(b=dhx.trim(b.namepicture||""),0==b.indexOf("\x3d")&&(b=this.hwReport.getValue(b.replace("\x3d",""))),l=c._image=new Image,l.onload=function(){a.doLayout()},l.src=b,l.style="display: inline-block;vertical-align: middle;",this.result||(l.style.visibility="hidden"),c.appendChild(l));this.container.appendChild(c)};this.initDate=function(){var a=this.findOptions("ApprovalDate");if(null!=a&&"0"!=a.isshow){var b=this._items.date=document.createElement("div");b.style=this.getFontStyle(a)+";position:absolute;text-align:left;z-index:1;";var c=dhx.trim(a.labelvalue||"");0==c.indexOf("\x3d")&&(c=this.hwReport.getValue(c.replace("\x3d","")));var l=dhx.trim(a.value||"");0==l.indexOf("\x3d")&&(l=this.hwReport.getValue(l.replace("\x3d","")));var m=this.getFormat(a.dateformat||"%Y-%m-%d");b.innerHTML="\x3cspan style\x3d'display: inline-block;vertical-align: middle;'\x3e"+c+"\x3c/span\x3e\x3cinput class\x3d'approve_date' unselectable\x3don style\x3d'"+this.getFontStyle(a)+"'\x3e";this._laydate=laydate.render({elem:b.children[1],format:m,type:this.getType(m),done:function(a,b){}}).laydate;l=this._laydate.parse(0,this.strToDateJSON(l));b.children[1].value=l;this.oldValues.date=l;this.container.appendChild(b)}};this.initAgreeButton=function(){var a=this,b=this.findOptions("Agree");if(null!=b&&"0"!=b.isshow&&!this.result){var c=this._items.agree_button=document.createElement("input");c.type="button";c.className="approve_btn approve_agree";c.style=this.getFontStyle(b)+";position:absolute;;width:"+(b.width&&!isNaN(b.width)?b.width:this.defaultOptions.buttonWidth)+"px;height:"+(b.height&&!isNaN(b.height)?b.height:this.defaultOptions.buttonHeight)+"px";c.value=b.labelvalue||"";c.onclick=function(){a.result=1;a.setComplete();a.callEvent("onApproval",[])};this.container.appendChild(c)}};this.initDisAgreeButton=function(){var a=this,b=this.findOptions("DisAgree");if(null!=b&&"0"!=b.isshow&&!this.result){var c=this._items.disagree_button=document.createElement("input");c.type="button";c.className="approve_btn approve_disagree";c.style=this.getFontStyle(b)+";position:absolute;;width:"+(b.width&&!isNaN(b.width)?b.width:this.defaultOptions.buttonWidth)+"px;height:"+(b.height&&!isNaN(b.height)?b.height:this.defaultOptions.buttonHeight)+"px";c.value=b.labelvalue||"";c.onclick=function(){a.result=2;a.setComplete();a.callEvent("onApproval",[])};this.container.appendChild(c)}};this.initSenBackButton=function(){var a=this,b=this.findOptions("SenBack");if(null!=b&&"0"!=b.isshow&&!this.result){var c=this._items.senback_button=document.createElement("input");c.type="button";c.className="approve_btn approve_back";c.style=this.getFontStyle(b)+";position:absolute;;width:"+(b.width&&!isNaN(b.width)?b.width:this.defaultOptions.buttonWidth)+"px;height:"+(b.height&&!isNaN(b.height)?b.height:this.defaultOptions.buttonHeight)+"px";c.value=b.labelvalue||"";c.onclick=function(){a.result=3;a.setComplete();a.callEvent("onApproval",[])};this.container.appendChild(c)}};this.doLayout=function(){this.container.style.width=this.container.parentNode.clientWidth+"px";this.container.style.height=this.container.parentNode.clientHeight+"px";var a=this.findOptions("ApprovalDepartment"),b=this.findOptions("ApprovalComment"),c=this.findOptions("ApprovalSeal"),l=this.findOptions("ApprovalPerson"),m=this.findOptions("ApprovalDate"),n=this.findOptions("Agree"),q=this.findOptions("DisAgree"),r=this.findOptions("SenBack"),v=this._items.department,u=this._items.comment,x=this._items.seal,w=this._items.person,A=this._items.agree_button,y=this._items.disagree_button,C=this._items.senback_button,F=this._items.date,D=0,E=0;v&&(D=this.defaultOptions.padding+(!a.x||isNaN(a.x)?0:parseInt(a.x)),E=this.defaultOptions.padding+(!a.y||isNaN(a.y)?0:parseInt(a.y)),v.style.left=D+"px",v.style.top=E+"px");a=D=0;if(F){var D=!m.width||isNaN(m.width)||0==parseInt(m.width)?this.defaultOptions.dateInputWidth:parseInt(m.width),H=!m.width||isNaN(m.width)||0==parseInt(m.width)?this.defaultOptions.dateInputWidth+F.children[0].offsetWidth:parseInt(m.width),a=!m.height||isNaN(m.height)||0==parseInt(m.height)?this.defaultOptions.dateInputHeight:parseInt(m.height);F.children[1].style.height=a+"px";F.children[1].style.width=D+"px";D=this.container.clientWidth-H-this.defaultOptions.padding+(!m.x||isNaN(m.x)?0:parseInt(m.x));a=this.container.clientHeight-a-this.defaultOptions.padding+(!m.y||isNaN(m.y)?0:parseInt(m.y));F.style.left=D+"px";F.style.top=a+"px"}m=F=0;w&&(w.children[2]?(F=!l.width||isNaN(l.width)||0==parseInt(l.width)?0:parseInt(l.width),m=!l.height||isNaN(l.height)||0==parseInt(l.height)?0:parseInt(l.height),F&&(w.children[2].style.width=F+"px"),m&&(w.children[2].style.height=m+"px"),F||m||(m=this.defaultOptions.personMaxHeight,w.children[2].style.height=this.defaultOptions.personMaxHeight+"px"),F=this.container.clientWidth-(w.children[0].clientWidth+w.children[1].clientWidth+w.children[2].clientWidth)-this.defaultOptions.padding+(!l.x||isNaN(l.x)?0:parseInt(l.x)),m=(a||this.container.clientHeight)-Math.max(m,w.children[2].clientHeight)+(!l.y||isNaN(l.y)?0:parseInt(l.y))):(F=this.container.clientWidth-(w.children[0].clientWidth+w.children[1].clientWidth)-this.defaultOptions.padding+(!l.x||isNaN(l.x)?0:parseInt(l.x)),m=(a||this.container.clientHeight)-Math.max(w.children[0].clientHeight,w.children[1].clientHeight)+(!l.y||isNaN(l.y)?0:parseInt(l.y))),w.style.left=F+"px",w.style.top=m+"px");w=l=0;x&&(x.children[1]?(l=!c.width||isNaN(c.width)||0==parseInt(c.width)?0:parseInt(c.width),w=!c.height||isNaN(c.height)||0==parseInt(c.height)?0:parseInt(c.height),l&&(x.children[1].style.width=l+"px"),w&&(x.children[1].style.height=w+"px"),w||w||(w=this.defaultOptions.sealMaxHeight,x.children[1].style.height=w+"px"),l=this.container.clientWidth-(x.children[0].clientWidth+x.children[1].clientWidth)-this.defaultOptions.padding+(!c.x||isNaN(c.x)?0:parseInt(c.x)),w=this.container.clientHeight-Math.max(w,x.children[0].clientHeight)-this.defaultOptions.padding+(!c.y||isNaN(c.y)?0:parseInt(c.y))):(l=this.container.clientWidth-x.children[0].clientWidth-this.defaultOptions.padding+(!c.x||isNaN(c.x)?0:parseInt(c.x)),w=this.container.clientHeight-x.children[0].clientHeight-this.defaultOptions.padding+(!c.y||isNaN(c.y)?0:parseInt(c.y))),x.style.left=l+"px",x.style.top=w+"px");c=l=0;A&&(l=this.defaultOptions.padding+(!n.x||isNaN(n.x)?0:parseInt(n.x)),c=this.container.clientHeight-A.offsetHeight-this.defaultOptions.padding+(!n.y||isNaN(n.y)?0:parseInt(n.y)),A.style.left=l+"px",A.style.top=c+"px");n=x=0;y&&(x=l+(A?A.offsetWidth:0)+(A?this.defaultOptions.buttonPadding:this.defaultOptions.padding)+(!q.x||isNaN(q.x)?0:parseInt(q.x)),n=this.container.clientHeight-y.offsetHeight-this.defaultOptions.padding+(!q.y||isNaN(q.y)?0:parseInt(q.y)),y.style.left=x+"px",y.style.top=n+"px");q=l=0;C&&(l=x+(y?y.offsetWidth:0)+(A||y?this.defaultOptions.buttonPadding:this.defaultOptions.padding)+(!r.x||isNaN(r.x)?0:parseInt(r.x)),q=this.container.clientHeight-y.offsetHeight-this.defaultOptions.padding+(!r.y||isNaN(r.y)?0:parseInt(r.y)),C.style.left=l+"px",C.style.top=q+"px");A=r=0;y=[a,m,c,n,q].filter(function(a){return 0<a});u&&(r=this.defaultOptions.padding+(!b.x||isNaN(b.x)?0:parseInt(b.x)),A=E+(v?v.clientHeight:0)+this.defaultOptions.padding+(!b.y||isNaN(b.y)?0:parseInt(b.y)),v=!b.width||isNaN(b.width)||0==parseInt(b.width)?this.container.clientWidth-2*this.defaultOptions.padding-u.children[0].offsetWidth:parseInt(b.width),b=!b.height||isNaN(b.height)||0==parseInt(b.height)?Math.min.apply(null,y)-this.defaultOptions.padding-A:parseInt(b.height),u.style.left=r+"px",u.style.top=A+"px",u.children[1].style.width=v-6+"px",u.children[1].style.height=b-6+"px")};this.setDisabled=function(){if(0!=this.cansetDisabled&&!this.result){var a=this._items.comment,b=this._items.seal,c=this._items.person,l=this._items.agree_button,m=this._items.disagree_button,n=this._items.senback_button,q=this._items.date;a&&(a.style.display="none");b&&(b.style.display="none");c&&(c.style.display="none");l&&(l.style.display="none");m&&(m.style.display="none");n&&(n.style.display="none");q&&(q.children[0].innerHTML="\u5e74    \u6708    \u65e5\uff08\u516c\u7ae0\uff09",q.children[1].style.display="none")}};this.setComplete=function(){var a=this._items.comment,b=this._items.seal,c=this._items.person,l=this._items.agree_button,m=this._items.disagree_button,n=this._items.senback_button,q=this._items.date;a&&(a.children[1].setAttribute("readonly","readonly"),a.children[1].setAttribute("disabled","disabled"),a.children[1].style.border="0px",a.children[1].style.backgroundColor="transparent",a.children[1].style.cursor="default",a.children[1].style.overflow="auto");b&&b.children[1]&&(b.children[1].style.visibility="");c&&c.children[2]&&(c.children[2].style.visibility="");q&&(q.style.zIndex="",q.children[1].setAttribute("disabled","disabled"),q.children[1].style.backgroundColor="transparent",q.children[1].style.cursor="default",q.children[1].style.borderWidth="0px");l&&(l.style.display="none");m&&(m.style.display="none");n&&(n.style.display="none")};this.updateValue=function(){var a=this._items.department,b=this._items.comment,c=this._items.seal,l=this._items.person,m=this._items.date,n=this.findOptions("ApprovalDepartment"),q=this.findOptions("ApprovalComment"),r=this.findOptions("ApprovalSeal"),v=this.findOptions("ApprovalPerson"),u=this.findOptions("ApprovalDate"),x=this.findOptions("Agree"),w=this.findOptions("DisAgree"),A=this.findOptions("SenBack");if(a){var y=dhx.trim(n.labelvalue||"").replace("\x3d","");"ds"==this.hwReport.checkParamType(y)&&(a.children[0].innerHTML=this.hwReport.getValue(y));n=dhx.trim(n.value||"").replace("\x3d","");"ds"==this.hwReport.checkParamType(n)&&(n=this.hwReport.getValue(n),n=this._laydate.parse(0,this.strToDateJSON(n)),this.oldValues.department=n,a.children[1].innerHTML=n,this.callEvent("onValueCalculated",[]))}b&&(y=dhx.trim(q.labelvalue||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(y)&&(b.children[0].innerHTML=this.hwReport.getValue(y)),n=dhx.trim(q.value||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(n)&&(n=this.hwReport.getValue(n),this.oldValues.opinions=n,b.children[1].value=n,this.callEvent("onValueCalculated",[])));c&&(y=dhx.trim(r.labelvalue||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(y)&&(c.children[0].innerHTML=this.hwReport.getValue(y)),a=dhx.trim(r.src||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(a)&&(a=this.hwReport.getValue(a),this.oldValues.seal=a,c._image.src=a,this.callEvent("onValueCalculated",[])));l&&(y=dhx.trim(v.labelvalue||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(y)&&(l.children[0].innerHTML=this.hwReport.getValue(y)),n=dhx.trim(v.value||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(n)&&(n=this.hwReport.getValue(n),this.oldValues.person=n,l.children[1].innerHTML=n,this.callEvent("onValueCalculated",[])),c=dhx.trim(v.namepicture||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(c)&&(c=this.hwReport.getValue(c),this.oldValues.person=c,l._image.src=c,this.callEvent("onValueCalculated",[])));m&&(y=dhx.trim(u.labelvalue||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(y)&&(m.children[0].innerHTML=this.hwReport.getValue(y)),n=dhx.trim(u.value||"").replace("\x3d",""),"ds"==this.hwReport.checkParamType(n)&&(n=this._laydate.parse(0,this.strToDateJSON(this.hwReport.getValue(n))),this.oldValues.date=n,m.children[1].value=n,this.callEvent("onValueCalculated",[])));n=(x.value||w.value||A.value||"").replace("\x3d","");"ds"==this.hwReport.checkParamType(n)&&(l=this.hwReport.getQueryStoreByName(n.split(".")[0]),this.result=n=this.hwReport.getValue(n),this.oldValues.result=n,this.result?this.setComplete():l.dataRequestSuccess&&(this.cansetDisabled=!0,this.cell._disabled&&this.setDisabled()),this.callEvent("onValueCalculated",[]));this.doLayout()};this.getValue=function(a){return this.getAllValue()[a]||""};this.getAllValue=function(){var a=this._items.department,b=this._items.comment,c=this._items.seal,l=this._items.person,m=this._items.date;return{department:a&&a.children[1].innerHTML||"",opinions:b&&b.children[1].value||"",seal:c.children[1]&&c.children[1].src||"",person:l.children[1]&&l.children[1].innerHTML||l.children[2]&&l.children[2].src||"",date:m&&m.children[1].value,result:this.result}};this.getFontStyle=function(a){if(!a)return"";var b="";a.fontcolor&&(b+=";color:"+a.fontcolor);a.fontname&&(b+=";font-family:"+a.fontname);a.fontsize&&(b+=";font-size:"+parseInt(a.fontsize)+"px");window.dhx4.s2b(a.italic)&&(b+=";font-style:italic");window.dhx4.s2b(a.fontweight)&&(b+=";font-weight: bold");window.dhx4.s2b(a.underline)&&(b+=";text-decoration: underline");return b};this.findOptions=function(a){for(var b=0;b<this.options.length;b++)if(this.options[b].type==a)return this.options[b];return null}}dhtmlXApprove.prototype.getFormat=function(a){return a?a.replace(/%Y/g,"yyyy").replace(/%y/g,"y").replace(/%m/g,"MM").replace(/%n/g,"M").replace(/%d/g,"dd").replace(/%j/g,"d").replace(/%H/g,"HH").replace(/%G/g,"H").replace(/%i/g,"mm").replace(/%s/g,"ss"):"yyyy-MM-dd"};dhtmlXApprove.prototype.getType=function(a){var b="date";0<=a.indexOf("y")&&(b="year");0<=a.indexOf("M")&&(b="month");0<=a.indexOf("d")&&(b="date");0<=a.indexOf("H")&&0<=a.indexOf("d")&&(b="datetime");0<=a.indexOf("H")&&0>a.indexOf("d")&&(b="time");return b};dhtmlXApprove.prototype.strToDateJSON=function(a){var b={},c=this._laydate,e=a?new Date(a):new Date;if("NaN"!=e&&"Invalid Date"!=e)return b.year=e.getFullYear(),b.month=e.getMonth(),b.date=e.getDate(),b.hours=e.getHours(),b.minutes=e.getMinutes(),b.seconds=e.getSeconds(),b;for(var e=[100,2E5],g=(a.match(c.EXP_SPLIT)||[]).slice(1),h,l=0;l<c.format.length;l++){var m=c.format[l],n=parseFloat(g[l]);g[l].length<m.length&&(h=!0);/yyyy|y/.test(m)?(n<e[0]&&(n=e[0],h=!0),b.year=n):/MM|M/.test(m)?(1>n&&(n=1,h=!0),b.month=n-1):/dd|d/.test(m)?(1>n&&(n=1,h=!0),b.date=n):/HH|H/.test(m)?(0>n&&(n=0,h=!0),b.hours=n):/mm|m/.test(m)?(0>n&&(n=0,h=!0),b.minutes=n):/ss|s/.test(m)&&(0>n&&(n=0,h=!0),b.seconds=n)}h&&(e=new Date(a),b.year=e.getFullYear(),b.month=e.getMonth(),b.date=e.getDate(),b.hours=e.getHours(),b.minutes=e.getMinutes(),b.seconds=e.getSeconds());return b};dhx4.attachEvent("onGridCreated",function(a){window.dhx_globalImgPath||(window.dhx_globalImgPath=a.imgURL);var b=a.hwReport;if(b){var c=!1;b.cellTypes.each(function(a,b,e){"vmdeditor"==b.getType()&&(c=!0)});if(c){var e=vmd.MicService.getDasIp(),g=vmd.projectInfo&&vmd.projectInfo.docIp||"",h=!!g,l=h?new HwFao(g,"wdk"):new HwFao(e,"vmd"),m=(vmd.previewMode?"modules/":"release/")+vmd.projectInfo.projectId+"/editorfile",e=l.getUploadUrl(m);if(!b._ueditor){var n=document.createElement("DIV");n.id=b.reportId+"_ueditor";n.style.cssText="position:absolute; top: -9999px;";n.className="dhx_editor ";a.objBox.appendChild(n);var q=b.dhtmxlUrl+"/lib/ueditor/",e=UE.getEditor(n.id,{isShow:!1,UEDITOR_HOME_URL:q,serverUrl:e,theme:"default",themePath:q+"themes/",dialogPath:b.dhtmxlUrl+"/lib/ueditor/themes/",listiconpath:q+"themes/ueditor-list/"});e.addListener("afterexeccommand",function(b,c){if(-1!="paragraph fontfamily fontsize customstyle forecolor backcolor imagefloat lineheight lineheight insertunorderedlist insertorderedlist inserttable rowspacing anchor link".split(" ").indexOf(c)){var e=a.editStop;a.editStop=function(){a.editStop=e}}});e.on("dialogdragstop",function(){var b=a.editStop;a.editStop=function(){a.editStop=b}});e.filepath=m;e.getBasePath=function(){return h?"http://"+g+"/wdk/":vmd.virtualPath+"/"};e.getDirs=function(a,b,c){l.getDirs(m,a,b,c)};b._ueditor=e}}}});function eXcell_vmdeditor(a){a&&(this.cell=a,this.grid=a.parentNode.grid,this.hwReport=this.grid.hwReport,this._combo_pre="",this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled},this.edit=function(){var a=this.val=this.getValue();this.cell.innerHTML="";this.cell.className=this.cell.className.replace(/editable/g," ");this.cell.className+=" "+this.hwReport.reportId+"-p-0";/ueditor/g.test(this.cell.className)||(this.cell.className+=" ueditor");var c=this.hwReport._ueditor;c.setContent(a);c.setPosition(this.cell.offsetLeft,this.cell.offsetTop);c.setShow();c.setWidth(this.cell.clientWidth-2);c.setHeight(this.cell.clientHeight-2,!1,!0)},this.getValue=function(){return this.cell.innerHTML||""},this.detach=function(){var a=this.hwReport._ueditor,c=a.getContent();this.setCValue(c);this.cell.className=this.cell.className.replace(new RegExp(this.hwReport.reportId+"-p-0","gi")," ");a.setHide()})}eXcell_vmdeditor.prototype=new eXcell;function eXcell_vmdlaydate(a){var b=this;a&&(this.cell=a,this.grid=a.parentNode.grid,this.hwReport=this.grid.hwReport,a=this.hwReport.getOriginCellById(this.cell._attrs.sid),this.cellType=this.hwReport.cellTypes.get(a.fillcelltype),this.format=this.cellType.format,this.cell.DOMParent||(this.cell.DOMParent=document.createElement("DIV"),this.cell.DOMParent.className="dhxcombo_in_grid_parent",this.cell.DOMParent.innerHTML="\x3cdiv class\x3d'dhxcombo_material'\x3e\x3cinput type\x3d'text' class\x3d'dhxcombo_input' autocomplete\x3d'off'\x3e\x3cdiv class\x3d'dhxcombo_select_button'\x3e\x3cdiv class\x3d'dhxcalendar_select_img'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",this.cell.DOMelem=this.cell.DOMParent.firstChild,this.cell.DOMelem_input=this.cell.DOMelem.firstChild,this.cell.DOMelem_icon=this.cell.DOMelem.children[1],(this.grid._disabled||this.isDisabled())&&this.cell.DOMelem_input.setAttribute("disabled","disabled"),this.cell.DOMelem_icon.onclick=function(a){a||(a=event);a.cancelBubble=!0;b.grid.selectCell(b.cell.parentNode,b.cell._cellIndex,!0,!1,!0);b.cell.DOMelem_input.focus();return!0},this.cell.DOMelem_input.onmousedown=function(a){b.cell._editorshow&&!1!==b.grid._doClick(a||window.event)&&(b.grid._sclE?b.grid.editCell(a||window.event):b.grid.editStop());(a||event).cancelBubble=!0},this.cell.DOMelem_input.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0},this.cell._laydate=laydate.render({elem:this.cell.DOMelem_input,format:this.toLaydateFormat(this.format),type:this.getType(this.format),ready:function(){},done:function(a,e){b.cell.DOMelem_input.value=a;b.grid.editStop()}}).laydate),this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled},this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);(this.cell._disabled=a)?this.cell.DOMelem_input.setAttribute("disabled","disabled"):this.cell.DOMelem_input.removeAttribute("disabled")},this.edit=function(){this.val=this.getValue();this.cell._editorshow?(this.cell.DOMelem_input.onclick=function(a){a||(a=event);return a.cancelBubble=!0},this.cell._laydate.elemID&&lay("#"+this.cell._laydate.elemID)&&0<lay("#"+this.cell._laydate.elemID).length||this.cell.DOMelem_input.focus()):(this.cell.innerHTML="",this.cell.className+=" "+this.hwReport.reportId+"-p-0",this.cell.DOMelem.style.width=this.cell.clientWidth+"px",this.cell.DOMelem_input.style.width=this.cell.clientWidth-24+"px",this.cell.DOMelem_input.value=this.val,this.cell.appendChild(this.cell.DOMParent),this.cell.DOMelem.style.top=(this.cell.DOMParent.clientHeight-this.cell.DOMelem.clientHeight)/2+"px",this.cell.DOMelem_input.focus());/dhxcombo_actv/g.test(this.cell.DOMelem.className)||(this.cell.DOMelem.className+=" dhxcombo_actv")},this.showEditor=function(){var a=this,b=this.getValue();this.cell.innerHTML="";this.cell.DOMelem.style.width=this.cell.clientWidth+"px";this.cell.DOMelem_input.style.width=this.cell.clientWidth-24+"px";this.cell.DOMelem_input.value=b;this.cell.appendChild(this.cell.DOMParent);b=(this.cell.DOMParent.clientHeight-this.cell.DOMelem.clientHeight)/2;1>b&&(b=0);this.cell.DOMelem.style.top=b+"px";this.cell._editorshow=!0;this.grid.attachEvent("onSetSizes",function(){a.cell.DOMelem.style.width=a.cell.clientWidth+"px";a.cell.DOMelem_input.style.width=a.cell.clientWidth-24+"px"})},this.setValue=function(a){a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=this.strToDate(a),a=dhx4.date2str(this.cell.val,this.toDhtmlxFormat(this.format))):"0"==this.cellType.isdefultdate?(a="\x26nbsp",this.cell._clearCell=!0,this.cell.val=null):(this.cell.val=this.strToDate(),a=dhx4.date2str(this.cell.val,this.toDhtmlxFormat(this.format)),this.cell._clearCell=!1);this.cell._editorshow?this.cell.firstChild.firstChild.firstChild.value="\x26nbsp"==a?"":a:(this.cell.DOMParent.parentNode&&this.cell.removeChild(this.cell.DOMParent),this.cell.innerHTML=a);this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,this.getValue()])},this.getValue=function(){return this.cell._clearCell?"":this.cell._editorshow?this.cell.firstChild.firstChild.firstChild.value:this.cell.innerHTML.toString()._dhx_trim()},this.getDate=function(){return this.cell.val},this.detach=function(){this.cell._laydate.remove();this.cell._laydate.elem=this.cell.DOMelem_input.onclick=null;this.cell.DOMelem.className=this.cell.DOMelem.className.replace(/dhxcombo_actv/g,"");this.cell.className=this.cell.className.replace(new RegExp(this.hwReport.reportId+"-p-0","gi")," ");this.setValue(this.cell.DOMelem_input.value)})}eXcell_vmdlaydate.prototype=new eXcell;eXcell_vmdlaydate.prototype.toDhtmlxFormat=function(a){return a?/%/g.test(a)?a:a.replace(/yyyy/g,"%Y").replace(/y/g,"%y").replace(/MM/g,"%m").replace(/M/g,"%n").replace(/dd/g,"%D").replace(/d/g,"%j").replace(/%D/g,"%d").replace(/HH/g,"%H").replace(/(?<!%)(H)/g,"%G").replace(/mm/g,"%i").replace(/ss/g,"%s"):"%Y-%m-%d"};eXcell_vmdlaydate.prototype.toLaydateFormat=function(a){return a?a.replace(/%Y/g,"yyyy").replace(/%y/g,"y").replace(/%m/g,"MM").replace(/%n/g,"M").replace(/%d/g,"dd").replace(/%j/g,"d").replace(/%H/g,"HH").replace(/%G/g,"H").replace(/%i/g,"mm").replace(/%s/g,"ss"):"yyyy-MM-dd"};eXcell_vmdlaydate.prototype.getType=function(a){a=this.toLaydateFormat(a);var b="date";0<=a.indexOf("y")&&(b="year");0<=a.indexOf("M")&&(b="month");0<=a.indexOf("d")&&(b="date");0<=a.indexOf("H")&&0<=a.indexOf("d")&&(b="datetime");0<=a.indexOf("H")&&0>a.indexOf("d")&&(b="time");return b};eXcell_vmdlaydate.prototype.strToDate=function(a){if(!a)return new Date;if("object"===typeof a&&a instanceof Date)return a;a=dhx.trim(a).replace(/\//g,"-");var b,c,e,g,h,l,m=0,n=!0;/\d{4}(-\d{1,2}){1,2}\s{1,}\d{1,2}(:\d{1,2}){1,2}(\.\d+){0,1}/.test(a)?(g=a.split(/\s+/).filter(function(a){return null!=a},null),e=g[0].split("-").map(function(a){return parseInt(a.trim(),10)},null),l=g[1].split(":").map(function(a){return parseInt(a.trim(),10)},null),b=e[0],c=e[1],e=e[2],g=l[0],h=l[1],l=l[2],-1!=a.indexOf(".")&&(m=parseInt(a.split(".")[1],10))):/\d{1,2}-([a-zA-Z]+)-\d{2,4}\s{1,}\d{1,2}(:\d{1,2}){2}(\.\d+){0,1}/.test(a)?(g=a.split(/\s+/).filter(function(a){return null!=a},null),e=g[0].split("-").map(function(a){return a.trim()},null),b=parseInt(2==e[2].length?"20"+e[2]:e[2],10),c={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12,jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}[e[1].toLowerCase()],e=parseInt(e[0]),l=g[1].split(":").map(function(a){return parseInt(a.trim(),10)},null),g=l[0],h=l[1],l=l[2],-1!=a.indexOf(".")&&(m=parseInt(a.split(".")[1],10))):/\d{4}(-\d{1,2}){1,2}/.test(a)?(e=a.split("-").map(function(a){return parseInt(a.trim(),10)},null),b=e[0],c=e[1],e=e[2]):/^\d{1,2}(:\d{1,2}){1,2}(\.\d+){0,1}$/.test(a)?(l=a.split(":").map(function(a){return parseInt(a.trim(),10)}),g=l[0],h=l[1],l=l[2],-1!=a.indexOf(".")&&(m=parseInt(a.split(".")[1],10))):/^\d{4,8}$/.test(a)?(b=parseInt(a.substr(0,4),10),c=parseInt(a.substr(4,2),10),e=parseInt(a.substr(6,2),10)):n=!1;return n?(b=isNaN(b)?2E3:b,c=isNaN(c)?1:c,e=isNaN(e)?1:e,g=isNaN(g)?0:g,h=isNaN(h)?0:h,l=isNaN(l)?0:l,a=new Date,a.setFullYear(b),a.setMonth(c-1),a.setMonth(c-1),a.setDate(e),a.setHours(g),a.setMinutes(h),a.setSeconds(l),a.setMilliseconds(m),a):dhx4.str2date(a,this.toDhtmlxFormat(this.format))};function eXcell_vmdpassw(a){var b=this;a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.hwReport=this.grid.hwReport,a=this.hwReport.getOriginCellById(this.cell._attrs.sid),this.cellType=this.hwReport.cellTypes.get(a.fillcelltype),this.cell.DOMelem_input||(this.cell.atag="INPUT",this.cell.DOMelem_input=document.createElement(this.cell.atag),this.cell.DOMelem_input.setAttribute("autocomplete","off"),this.cell.DOMelem_input.className="dhx_combo_edit",this.cell.DOMelem_input.type="password",this.cell.DOMelem_input.wrap="soft",this.cell.DOMelem_input.style.marginLeft="0px",this.cell.DOMelem_input.style.textAlign=this.cell.style.textAlign,(this.grid._disabled||this.isDisabled())&&this.cell.DOMelem_input.setAttribute("readonly","readonly"),this.cell.DOMelem_input.onclick=function(a){(a||event).cancelBubble=!0},this.cell.DOMelem_input.onmousedown=function(a){b.cell._editorshow&&!1!==b.grid._doClick(a||window.event)&&(b.grid._sclE?b.grid.editCell(a||window.event):b.grid.editStop());(a||event).cancelBubble=!0},this.cell.DOMelem_input.onselectstart=function(a){a||(a=event);return a.cancelBubble=!0}));this.isDisabled=function(){return this.grid._disabled?!0:this.cell._disabled};this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1);(this.cell._disabled=a)?this.cell.DOMelem_input.setAttribute("readonly","readonly"):this.cell.DOMelem_input.removeAttribute("readonly")};this.edit=function(){this.val=this.getValue();this.cell._editorshow?_isIE&&(this.cell.DOMelem_input.focus(),this.cell.DOMelem_input.blur()):(this.cell.className+=" "+this.hwReport.reportId+"-p-0",this.cell.DOMelem_input.style.width=this.cell.clientWidth+"px",this.cell.DOMelem_input.style.height=this.cell.clientHeight-3+"px",this.cell.DOMelem_input.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.cell.DOMelem_input));this.cell.DOMelem_input.focus();/dhxcombo_actv/g.test(this.cell.DOMelem_input.className)||(this.cell.DOMelem_input.className+=" dhxcombo_actv")};this.showEditor=function(){var a=this.getValue();this.cell.DOMelem_input.onclick=null;this.cell.DOMelem_input.style.width=this.cell.clientWidth+"px";this.cell.DOMelem_input.value=a;this.cell.innerHTML="";this.cell.appendChild(this.cell.DOMelem_input);this.cell._editorshow=!0};this.getValue=function(){return this.cell._rval};this.setValue=function(a){this.cell._editorshow?this.cell.DOMelem_input.value=a:this.cell.innerHTML="******";this.cell._rval=a;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,this.cell._clearCell?"":a])};this.detach=function(){this.cell.DOMelem_input.className=this.cell.DOMelem_input.className.replace(/dhxcombo_actv/g,"");this.cell.className=this.cell.className.replace(new RegExp(this.hwReport.reportId+"-p-0","gi")," ");this.setValue(this.cell.DOMelem_input.value);return this.val!=this.getValue()}}eXcell_vmdpassw.prototype=new eXcell;dhtmlXGridObject.prototype.enableBlockSelection=function(a){if("undefined"==typeof this._bs_mode){var b=this;this.obj.onmousedown=function(a){b._bs_mode&&b._OnSelectionStart(a||event,this);return!0};this._CSVRowDelimiter=this.csv.row;this.attachEvent("onResize",function(){b._HideSelection();return!0});this.attachEvent("onGridReconstructed",function(){b._HideSelection();return!0});this.attachEvent("onFilterEnd",this._HideSelection)}if(!1===a)return this._bs_mode=!1,this._HideSelection();this._bs_mode=!0;window.dhx4.isIPad||(a=this._clip_area=document.createElement("textarea"),a.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",a.onkeydown=function(a){a=a||event;86==a.keyCode&&(a.ctrlKey||a.metaKey)&&b.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){!b.editor&&b._clip_area&&b._clip_area.select()}))};dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=dhx4.s2b(a)};dhtmlXGridObject.prototype.selectBlock=function(a,b,c,e){b=this.getRowIndex(b);e=this.getRowIndex(e);this._CreateSelection(b,a);this._selectionArea=this._RedrawSelectionPos(this.cells2(b,a).cell,this.cells2(e,c).cell);this._ShowSelection()};dhtmlXGridObject.prototype._OnSelectionStart=function(a,b){var c=this;if(2!=a.button){var e=a.srcElement||a.target;if(this.editor){if(e.tagName&&("INPUT"==e.tagName||"TEXTAREA"==e.tagName))return;this.editStop()}c.setActive(!0);var g=this.getPosition(this.obj),h=a.clientX-g[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),g=a.clientY-g[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));this._CreateSelection(h-4,g-4);if(e==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;e&&(!e.tagName||"td"!=e.tagName.toLowerCase());)e=e.parentNode;this._startSelectionCell=e}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(a){c._blsTimer&&window.clearTimeout(c._blsTimer)};this.obj.onmmold=this.obj.onmousemove;this._init_pos=[h,g];this._selectionObj.onmousemove=this.obj.onmousemove=function(b){b=b||a;b.preventDefault?b.preventDefault():b.returnValue=!1;c._OnSelectionMove(b)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(b){b=b||a;c._OnSelectionStop(b,this);return!0};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return!1}}};dhtmlXGridObject.prototype._getCellByPos=function(a,b){this._fake&&(a+=this._fake.objBox.scrollWidth);for(var c=0,e=0;e<this.obj.rows.length;e++)if(b-=this.obj.rows[e].offsetHeight,0>=b){c=this.obj.rows[e];break}if(!c||!c.idd)return null;for(e=0;e<this._cCount;e++)if(a-=this.getColWidth(e),0>=a)for(;;)if(c._childIndexes&&c._childIndexes[e+1]==c._childIndexes[e])c=c.previousSibling;else return this.cells(c.idd,e).cell;return null};dhtmlXGridObject.prototype._OnSelectionMove=function(a){var b=this;this._ShowSelection();var c=this.getPosition(this.obj),e=a.clientX-c[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),c=a.clientY-c[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(50>Math.abs(this._init_pos[0]-e)&&50>Math.abs(this._init_pos[1]-c))return this._HideSelection();var g=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(a.srcElement||a.target,"TD");else if(a.srcElement||a.target)if("dhtmlxGrid_selection"==(a.srcElement||a.target).className)this._endSelectionCell=this._getCellByPos(e,c)||this._endSelectionCell;else{var h=this.getFirstParentOfType(a.srcElement||a.target,"TD");h.parentNode.idd&&(this._endSelectionCell=h)}this._endSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])&&(this._endSelectionCell=g);var g=this.objBox.scrollLeft+this.objBox.clientWidth,h=this.objBox.scrollTop+this.objBox.clientHeight,l=this.objBox.scrollLeft,m=this.objBox.scrollTop,n=!1;this._blsTimer&&window.clearTimeout(this._blsTimer);e+20>=g?(this.objBox.scrollLeft+=20,n=!0):e-20<l&&(this.objBox.scrollLeft-=20,n=!0);c+20>=h&&!this._realfake?(this.objBox.scrollTop+=20,n=!0):c-20<m&&!this._realfake&&(this.objBox.scrollTop-=20,n=!0);this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);if(n){var q=a.clientX,r=a.clientY;this._blsTimer=window.setTimeout(function(){b._OnSelectionMove({clientX:q,clientY:r})},100)}};dhtmlXGridObject.prototype._OnSelectionStop=function(a){var b=this;this._blsTimer&&window.clearTimeout(this._blsTimer);this.obj.onmousedown=function(c){b._bs_mode&&b._OnSelectionStart(c||a,this);return!0};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(2>parseInt(this._selectionObj.style.width)&&2>parseInt(this._selectionObj.style.height))this._HideSelection();else{var c=this.getFirstParentOfType(a.srcElement||a.target,"TD");c&&c.parentNode.idd||(c=this._endSelectionCell);for(;c&&(!c.tagName||"td"!=c.tagName.toLowerCase());)c=c.parentNode;if(!c)return this._HideSelection();this._stopSelectionCell=c;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}};dhtmlXGridObject.prototype._RedrawSelectionPos=function(a,b){if(a.parentNode.grid!=b.parentNode.grid)return this._selectionArea;var c={};c.LeftTopCol=a._cellIndex;c.LeftTopRow=this.getRowIndex(a.parentNode.idd);c.RightBottomCol=b._cellIndex;c.RightBottomRow=this.getRowIndex(b.parentNode.idd);var e=a.offsetWidth,g=a.offsetHeight;a=this.getPosition(a,this.obj);var h=b.offsetWidth,l=b.offsetHeight;b=this.getPosition(b,this.obj);if(a[0]<b[0])var m=a[0],e=b[0]+h;else h=c.RightBottomCol,c.RightBottomCol=c.LeftTopCol,c.LeftTopCol=h,m=b[0],e=a[0]+e;a[1]<b[1]?(h=a[1],g=b[1]+l):(h=c.RightBottomRow,c.RightBottomRow=c.LeftTopRow,c.LeftTopRow=h,h=b[1],g=a[1]+g);this._selectionObj.style.left=m-1+"px";this._selectionObj.style.top=h-1+"px";this._selectionObj.style.width=e-m+"px";this._selectionObj.style.height=g-h+"px";return c};dhtmlXGridObject.prototype._CreateSelection=function(a,b){if(null==this._selectionObj){var c=document.createElement("div");c.style.position="absolute";c.style.display="none";c.className="dhtmlxGrid_selection";this._selectionObj=c;this._selectionObj.onclick=function(a){(a||event).cancelBubble=!0;this.parentNode.grid._HideSelection();return!1};this._selectionObj.onmousedown=function(a){a=a||event;if(2==a.button||_isMacOS&&a.ctrlKey)return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",a])};this._selectionObj.oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=a+"px";this._selectionObj.style.top=b+"px";this._selectionObj.startX=a;this._selectionObj.startY=b};dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")};dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none");this._selectionArea=null;this._clip_area&&(this._clip_area.value="",this._clip_area.blur())};dhtmlXGridObject.prototype.deleteBlock=function(){if(this._clip_area&&null!=this._selectionArea){this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";for(var a=this._selectionArea.LeftTopRow;a<=this._selectionArea.RightBottomRow;a++)this._serializeRowToCVS(this.rowsBuffer[a],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1,!0)}};dhtmlXGridObject.prototype.copyBlockToClipboard=function(a){if(this._clip_area&&null!=this._selectionArea){var b=[];this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";this._serialize_visible=!0;for(var c=this._selectionArea.LeftTopRow;c<=this._selectionArea.RightBottomRow;c++){var e=this._serializeRowToCVS(this.rowsBuffer[c],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1,a);b[b.length]=this._csvAID?e:e.substr(e.indexOf(this.csv.cell)+1)}b=b.join(this._CSVRowDelimiter);this._clip_area.value=b;this._clip_area.select();this._serialize_visible=!1}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(this._clip_area){this._clip_area.select();var a=this;window.setTimeout(function(){a._pasteBlockFromClipboard();a=null},1)}};dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var a=this._clip_area.value;if(a){if(null!=this._selectionArea)var b=this._selectionArea.LeftTopRow,c=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;b=this.getRowIndex(this.cell.parentNode.idd);c=this.cell._cellIndex}var a=this.csvParser.unblock(a,this.csv.cell,this.csv.row),e=b+a.length,g=c+a[0].length;g>this._cCount&&(g=this._cCount);for(var h=0;b<e;b++){var l=this.render_row(b);if(-1!=l){for(var m=0,n=c;n<g;n++)if(this._hrrar[n]&&!this._fake)g=Math.min(g+1,this._cCount);else{var q=this.cells3(l,n);if(q.isDisabled())m++;else{this._onEditUndoRedo&&this._onEditUndoRedo(2,l.idd,n,a[h][m],q.getValue());if(q.combo&&q.editable){for(var r=q.combo.values||[],v=0;v<r.length;v++)if(a[h][m]==r[v]){q.setValue(q.combo.keys[v]);r=null;break}null!=r&&q.editable?q.setValue(a[h][m++]):m++}else q[q.setImage?"setLabel":"setValue"](a[h][m++]);q.cell.wasChanged=!0}}this.callEvent("onRowPaste",[l.idd]);h++}}}};dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null};dhtmlXGridObject.prototype.enableSmartRendering=function(a,b,c){2<arguments.length&&(b&&!this.rowsBuffer[b-1]&&(this.rowsBuffer[b-1]=0),b=c);this._srnd=dhx4.s2b(a);this._srdh=this._srdh||20;this._dpref=b||0};dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)};dhtmlXGridObject.prototype.forceFullLoading=function(a,b){for(var c=0;c<this.rowsBuffer.length;c++)if(!this.rowsBuffer[c]){var e=a||this.rowsBuffer.length-c;if(this.callEvent("onDynXLS",[c,e])){var g=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart\x3d"+c+"\x26count\x3d"+e,function(){window.setTimeout(function(){g.forceFullLoading(a,b)},100)},this._data_type)}return}b&&b.call(this)};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this._srdh=parseInt(a)};dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};dhtmlXGridObject.prototype._add_filler=function(a,b,c,e){if(!b)return null;var g=this._prepareRow("__filler__");g.firstChild.style.width="1px";g.firstChild.style.borderWidth=g.firstChild.style.padding=g.firstChild.style.margin="0px";for(var h=1;h<g.childNodes.length;h++)g.childNodes[h].style.display="none";g.firstChild.style.height=b*this._srdh+"px";(c=c||this.rowsCol[a])&&c.nextSibling?c.parentNode.insertBefore(g,c.nextSibling):_isKHTML?this.obj.appendChild(g):this.obj.rows[0].parentNode.appendChild(g);this.callEvent("onAddFiller",[a,b,g,c,e]);return[a,b,g]};dhtmlXGridObject.prototype._update_srnd_view=function(){var a=Math.floor(this.objBox.scrollTop/this._srdh),b=a+this._get_view_size();if(this.multiLine){b=this.objBox.scrollTop;for(a=0;0<b;)b-=this.rowsCol[a]?this.rowsCol[a].offsetHeight:this._srdh,a++;b=a+this._get_view_size();0<a&&a--}b+=this._srnd_pr||0;b>this.rowsBuffer.length&&(b=this.rowsBuffer.length);for(;a<b;a++)if(!this.rowsCol[a]){if(-1==this._add_from_buffer(a)){this.xmlFileUrl&&(this._dpref&&this.rowsBuffer[b-1]?(a=Math.max(0,Math.min(a,b-this._dpref)),this._current_load=[a,b-a]):this._current_load=[a,this._dpref?this._dpref:b-a],this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart\x3d"+this._current_load[0]+"\x26count\x3d"+this._current_load[1],this._data_type));return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[a].idd],this.rowsBuffer[a]),this._updateParentLine(this._h2.get[this.rowsBuffer[a].idd],this.rowsBuffer[a]));a&&a==(this._realfake?this._fake:this)._r_select&&this.selectCell(a,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)};dhtmlXGridObject.prototype._add_from_buffer=function(a){var b=this.render_row(a);if(-1==b)return-1;if(b._attrs.selected||b._attrs.select)this.selectRow(b,!1,!0),b._attrs.selected=b._attrs.select=null;if(!this._cssSP)this._cssEven&&0==a%2?b.className=this._cssEven+(-1!=b.className.indexOf("rowselected")?" rowselected ":" ")+(b._css||""):this._cssUnEven&&1==a%2&&(b.className=this._cssUnEven+(-1!=b.className.indexOf("rowselected")?" rowselected ":" ")+(b._css||""));else if(this._h2){var c=this._h2.get[b.idd];b.className+=" "+(c.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+c.level+(this.rowsAr[c.id]._css||"")}for(c=0;c<this._fillers.length;c++){var e=this._fillers[c];if(e&&e[0]<=a&&e[0]+e[1]>a){var g=a-e[0];0==g?(this._insert_before(a,b,e[2]),this._update_fillers(c,-1,1)):g==e[1]-1?(this._insert_after(a,b,e[2]),this._update_fillers(c,-1,0)):(this._fillers.push(this._add_filler(a+1,e[1]-g-1,e[2],1)),this._insert_after(a,b,e[2]),this._update_fillers(c,-e[1]+g,0));break}}};dhtmlXGridObject.prototype._update_fillers=function(a,b,c){var e=this._fillers[a];e[1]+=b;e[0]+=c;e[1]?(e[2].firstChild.style.height=parseFloat(e[2].firstChild.style.height)+b*this._srdh+"px",this.callEvent("onUpdateFiller",[e[2]])):(this.callEvent("onRemoveFiller",[e[2]]),e[2].parentNode.removeChild(e[2]),this._fillers.splice(a,1))};dhtmlXGridObject.prototype._insert_before=function(a,b,c){c.parentNode.insertBefore(b,c);this.rowsCol[a]=b;this.callEvent("onRowInserted",[b,null,c,"before"])};dhtmlXGridObject.prototype._insert_after=function(a,b,c){c.nextSibling?c.parentNode.insertBefore(b,c.nextSibling):c.parentNode.appendChild(b);this.rowsCol[a]=b;this.callEvent("onRowInserted",[b,null,c,"after"])};dhtmlXGridObject.prototype.enableMarkedCells=function(a){this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=[];this.lastMarkedColumn=this.lastMarkedRow=null;this.markedCells=!0;this.lastMarkMethod=0;0<arguments.length&&!dhx4.s2b(a)&&(this.markedCells=!1)};dhtmlXGridObject.prototype.doMark=function(a,b){var c=a.parentNode.idd;this.setActive(!0);if(c){this.editStop();this.cell=a;this.row=a.parentNode;var e=a._cellIndex;b||(b=0);if(0==b)this.unmarkAll();else if(1==b){if(this.lastMarkedRow)for(var g=Math.min(this.getRowIndex(c),this.getRowIndex(this.lastMarkedRow)),h=Math.max(this.getRowIndex(c),this.getRowIndex(this.lastMarkedRow)),l=Math.min(e,this.lastMarkedColumn),m=Math.max(e,this.lastMarkedColumn);g<h+1;g++)for(var n=l;n<m+1;n++)this.mark(this.getRowId(g),n,!0)}else if(2==b&&-1!=this.markedRowsArr._dhx_find(c))for(h=0;h<this.markedCellsArr[c].length;h++)if(this.markedCellsArr[c][h]==e)return this.mark(c,e,!1),!0;this.markedCellsArr[c]||(this.markedCellsArr[c]=new dhtmlxArray(0));1!=b&&this.mark(c,e);this.moveToVisible(this.cells(c,e).cell);this.lastMarkedRow=c;this.lastMarkedColumn=e;this.lastMarkMethod=b}};dhtmlXGridObject.prototype.mark=function(a,b,c){if(2<arguments.length&&!dhx4.s2b(c)){this.cells(a,b).cell.className=this.cells(a,b).cell.className.replace(/cellselected/g,"");if(-1!=this.markedRowsArr._dhx_find(a)){var e=this.markedCellsArr[a]._dhx_find(b);-1!=e&&(this.markedCellsArr[a]._dhx_removeAt(e),0==this.markedCellsArr[a].length&&this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(a)),this.callEvent("onCellUnMarked",[a,b]))}return!0}this.cells(a,b).cell.className+=" cellselected";-1==this.markedRowsArr._dhx_find(a)&&(this.markedRowsArr[this.markedRowsArr.length]=a);this.markedCellsArr[a]||(this.markedCellsArr[a]=new dhtmlxArray(0));-1==this.markedCellsArr[a]._dhx_find(b)&&(this.markedCellsArr[a][this.markedCellsArr[a].length]=b,this.callEvent("onCellMarked",[a,b]))};dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var a=0;a<this.markedRowsArr.length;a++){var b=this.markedRowsArr[a];if(this.rowsAr[b])for(var c=0;c<this.markedCellsArr[b].length;c++)this.callEvent("onCellUnMarked",[b,this.markedCellsArr[b][c]]),this.cells(b,this.markedCellsArr[b][c]).cell.className=this.cells(b,this.markedCellsArr[b][c]).cell.className.replace(/cellselected/g,"")}this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=[]}return!0};dhtmlXGridObject.prototype.getMarked=function(){var a=[];if(this.markedRowsArr)for(var b=0;b<this.markedRowsArr.length;b++)for(var c=this.markedRowsArr[b],e=0;e<this.markedCellsArr[c].length;e++)a[a.length]=[c,this.markedCellsArr[c][e]];return a};function eXcell_math(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.edit=function(){this.grid.editor=new eXcell_ed(this.cell);this.grid.editor.fix_self=!0;this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue;this.grid.editor.setValue=this.setValue;this.grid.editor.edit()};this.isDisabled=function(){return!this.grid._mathEdit};this.setValue=function(a){a=this.grid._compileSCL(a,this.cell,this.fix_self);this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(a):(this.setCValue(a),this.cell._clearCell=!1)};this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}eXcell_math.prototype=new eXcell;dhx4.attachEvent("onGridCreated",function(a){a._reset_math();a.attachEvent("onClearAll",a._reset_math);a.attachEvent("onCellChanged",function(a,c){if(this._mat_links[a]){var b=this._mat_links[a][c];if(b)for(var g=0;g<b.length;g++)b[g].parentNode&&this.cells5(b[g]).setValue(this._calcSCL(b[g]))}!this._parsing&&this._aggregators[c]&&(b=this._h2.get[a].parent.id,0!=b&&(b=this.cells(b,c),b.setValue(this._calcSCL(b.cell))))});a.attachEvent("onAfterRowDeleted",function(a,c){if(0!=c&&!this._parsing&&this._aggregators.length)for(var b=0;b<this._aggregators.length;b++)if(this._aggregators[b]){var g=this.cells(c,b);g.setValue(this._calcSCL(g.cell))}return!0});a.attachEvent("onXLE",a._refresh_math)});dhtmlXGridObject.prototype._reset_math=function(){this._mat_links={};this._aggregators=[]};dhtmlXGridObject.prototype._refresh_math=function(){for(var a=0;a<this._aggregators.length;a++)this._aggregators[a]&&this._h2.forEachChild(0,function(b){0!=b.childs.length&&(b=this.cells(b.id,a),b.setValue(this._calcSCL(b.cell)))},this)};dhtmlXGridObject.prototype.refreshMath=function(a){this._mat_links={};for(var b=0;b<this.getColumnsNum();b++)"math"==this.getColType(b)&&this.forEachRow(function(a){a=this.cells(a,b);a.setValue(a.cell.original||a.getValue())})};dhtmlXGridObject.prototype.enableMathSerialization=function(a){this._mathSerialization=dhx4.s2b(a)};dhtmlXGridObject.prototype.setMathRound=function(a){this._roundDl=a;this._roundD=Math.pow(10,a)};dhtmlXGridObject.prototype.enableMathEditing=function(a){this._mathEdit=dhx4.s2b(a)};dhtmlXGridObject.prototype._calcSCL=function(a){if(!a._code)return this.cells5(a).getValue();try{dhtmlx.agrid=this;var b=eval(a._code)}catch(e){return"#SCL"}if(this._roundD){a=1>Math.abs(b)?"0":"";0>b&&(a="-"+a);b=Math.round(Math.abs(b)*this._roundD).toString();if(0==b)return 0;if(0<this._roundDl){var c=b.length-this._roundDl;0>c&&(b=("000000000"+b).substring(9+c),c=0);return a+b.substring(0,c)+"."+b.substring(c,b.length)}return a+b}return b};dhtmlXGridObject.prototype._countTotal=function(a,b){for(var c=0,e=this._h2.get[a],g=0;g<e.childs.length&&e.childs[g].buff;g++){if(e.childs[g].buff._parser){c=0;this._h2.forEachChild(a,function(a){0==a.childs.length&&(a=parseFloat(this._get_cell_value(a.buff,b),10))&&(c+=a)},this);break}var h=parseFloat(this._get_cell_value(e.childs[g].buff,b),10);h&&(c+=h)}return c};dhtmlXGridObject.prototype._compileSCL=function(a,b,c){if(null===a||a===window.undefined)return a;a=a.toString();if(0!=a.indexOf("\x3d")||!b.parentNode)return this._reLink([],b),c&&(b._code=b.original=null),a;b.original=a;var e=null;a=a.replace("\x3d","");if(-1!=a.indexOf("sum"))return a=a.replace("sum","(dhtmlx.agrid._countTotal('"+b.parentNode.idd+"',"+b._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[b._cellIndex]="sum",b._code=a,this._parsing?"":this._calcSCL(b);-1!=a.indexOf("[[")&&(c=/(\[\[([^\,]*)\,([^\]]*)]\])/g,dhtmlx.agrid=this,e=e||[],a=a.replace(c,function(a,c,g,n){"-"==g&&(g=b.parentNode.idd);0==g.indexOf("#")&&(g=dhtmlx.agrid.getRowId(g.replace("#","")));e[e.length]=[g,n];return'(parseFloat(dhtmlx.agrid.cells("'+g+'",'+n+").getValue(),10))"}));if(-1!=a.indexOf(":")){c=/:(\w+)/g;dhtmlx.agrid=this;var g=b.parentNode.idd,e=e||[];a=a.replace(c,function(a,b,c,n){e[e.length]=[g,dhtmlx.agrid.getColIndexById(b)];return'(parseFloat(dhtmlx.agrid.cells("'+g+'",dhtmlx.agrid.getColIndexById("'+b+'")).getValue(),10))'})}else c=/c([0-9]+)/g,dhtmlx.agrid=this,g=b.parentNode.idd,e=e||[],a=a.replace(c,function(a,b,c,n){e[e.length]=[g,b];return'(parseFloat(dhtmlx.agrid.cells("'+g+'",'+b+").getValue(),10))"});this._reLink(e,b);b._code=a;return this._calcSCL(b)};dhtmlXGridObject.prototype._reLink=function(a,b){if(a.length)for(var c=0;c<a.length;c++){this._mat_links[a[c][0]]||(this._mat_links[a[c][0]]={});var e=this._mat_links[a[c][0]];e[a[c][1]]||(e[a[c][1]]=[]);e[a[c][1]].push(b)}};_isKHTML&&function(){var a=String.prototype.replace;String.prototype.replace=function(b,c){if("function"!=typeof c)return a.apply(this,arguments);var e=""+this,g=c;if(!(b instanceof RegExp)){var h=e.indexOf(b);return-1==h?e:a.apply(e,[b,g(b,h,e)])}for(var l=b,m=[],n=l.lastIndex,q;null!=(q=l.exec(e));)if(h=q.index,q=q.concat(h,e),m.push(e.slice(n,h),g.apply(null,q).toString()),l.global)n=l.lastIndex;else{n+=RegExp.lastMatch.length;break}m.push(e.slice(n));return m.join("")}}();dhtmlXGridObject.prototype.insertColumn=function(a,b,c,e,g,h,l,m,n){a=parseInt(a);a>this._cCount&&(a=this._cCount);this._cMod||(this._cMod=this._cCount);this._processAllArrays(this._cCount,a-1,[b||"\x26nbsp;",e||100,c||"ed",h||"left",l||"",g||"na",n||"","",this._cMod,e||100]);this._processAllRows("_addColInRow",a);if("object"==typeof b)for(c=1;c<this.hdr.rows.length;c++)if("#rspan"==b[c-1]){e=c-1;for(g=!1;!g;){h=this.hdr.rows[e];for(var q=0;q<h.cells.length;q++)if(h.cells[q]._cellIndex==a){g=q;break}e--}this.hdr.rows[e+1].cells[q].rowSpan=(this.hdr.rows[e].cells[q].rowSpan||1)+1}else this.setHeaderCol(a,b[c-1]||"\x26nbsp;",c);else this.setHeaderCol(a,b||"\x26nbsp;");this.hdr.rows[0].cells[a];this._cCount++;this._cMod++;this._master_row=null;this.setSizes()};dhtmlXGridObject.prototype.deleteColumn=function(a){a=parseInt(a);0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),a>=this._cCount||(this._processAllArrays(a,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",a),this._cCount--,this._master_row=null,this.setSizes()))};dhtmlXGridObject.prototype._processAllRows=function(a,b,c){this[a](this.obj.rows[0],b,c,0);for(var e=this.hdr.rows.length,g=0;g<e;g++)this[a](this.hdr.rows[g],b,c,g);if(this.ftr)for(e=this.ftr.firstChild.rows.length,g=0;g<e;g++)this[a](this.ftr.firstChild.rows[g],b,c,g);this.forEachRow(function(e){if(this.rowsAr[e]&&"TR"==this.rowsAr[e].tagName)this[a](this.rowsAr[e],b,c,-1)})};dhtmlXGridObject.prototype._processAllArrays=function(a,b,c){var e="hdrLabels initCellWidth cellType cellAlign cellVAlign fldSort columnColor _hrrar _c_order".split(" ");this.cellWidthPX.length&&e.push("cellWidthPX");this.cellWidthPC.length&&e.push("cellWidthPC");this._col_combos&&e.push("_col_combos");this._mCols&&(e[e.length]="_mCols");this.columnIds&&(e[e.length]="columnIds");this._maskArr&&e.push("_maskArr");this._drsclmW&&e.push("_drsclmW");this._RaSeCol&&e.push("_RaSeCol");this._hm_config&&e.push("_hm_config");this._drsclmn&&e.push("_drsclmn");this.clists&&e.push("clists");this._validators&&this._validators.data&&e.push(this._validators.data);e.push("combos");this._customSorts&&e.push("_customSorts");this._aggregators&&e.push("_aggregators");var g=a<=b;if(!this._c_order){this._c_order=[];for(var h=this._cCount,l=0;l<h;l++)this._c_order[l]=l}for(l=0;l<e.length;l++)if(h=this[e[l]]||e[l]){if(g){for(var m=h[a],n=a;n<b;n++)h[n]=h[n+1];h[b]=m}else{m=h[a];for(n=a;n>b+1;n--)h[n]=h[n-1];h[b+1]=m}c&&(h[b+(g?0:1)]=c[l])}};dhtmlXGridObject.prototype.moveColumn=function(a,b){b--;a=parseInt(a);b=parseInt(b);var c=b<a?b+1:b;if(!this.callEvent("onBeforeCMove",[a,c]))return!1;a!=c&&(this.editStop(),this._processAllRows("_moveColInRow",a,b),this._processAllArrays(a,b),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[a,c]))};dhtmlXGridObject.prototype._swapColumns=function(a){for(var b=[],c=0;c<this._cCount;c++){var e=a[this._c_order[c]];"undefined"==typeof e&&(e="");b[c]=e}return b};dhtmlXGridObject.prototype._moveColInRow=function(a,b,c){b=a.childNodes[b];c=a.childNodes[c+1];if(b)for(c?a.insertBefore(b,c):a.appendChild(b),c=0;c<a.childNodes.length;c++)a.childNodes[c]._cellIndex=a.childNodes[c]._cellIndexS=c};dhtmlXGridObject.prototype._addColInRow=function(a,b,c,e){c=b;if(a._childIndexes){if(a._childIndexes[b-1]!=a._childIndexes[b]&&a.childNodes[a._childIndexes[b-1]])for(g=a._childIndexes.length;g>=b;g--)a._childIndexes[g]=g?a._childIndexes[g-1]+1:0;else{for(var g=a._childIndexes.length;g>=b;g--)a._childIndexes[g]=g?a._childIndexes[g-1]+1:0;a._childIndexes[b]--}c=a._childIndexes[b]}var g=a.childNodes[c],h=document.createElement(e?"TD":"TH");e?h._attrs={}:h.style.width=(parseInt(this.cellWidthPX[b])||"100")+"px";g?a.insertBefore(h,g):a.appendChild(h);this.dragAndDropOff&&a.idd&&this.dragger.addDraggableItem(a.childNodes[c],this);for(g=c+1;g<a.childNodes.length;g++)a.childNodes[g]._cellIndex=a.childNodes[g]._cellIndexS=a.childNodes[g]._cellIndex+1;a.childNodes[c]&&(a.childNodes[c]._cellIndex=a.childNodes[c]._cellIndexS=b);a.idd||"undefined"!=typeof a.idd?(this.cells3(a,b).setValue(""),h.align=this.cellAlign[b],h.style.verticalAlign=this.cellVAlign[b],h.bgColor=this.columnColor[b]):"TD"==h.tagName&&(h.innerHTML=!a.idd&&this.forceDivInHeader?"\x3cdiv class\x3d'hdrcell'\x3e\x26nbsp;\x3c/div\x3e":"\x26nbsp;")};dhtmlXGridObject.prototype._deleteColInRow=function(a,b){var c=b;a._childIndexes&&(b=a._childIndexes[b]);var e=a.childNodes[b];if(e){if(e.colSpan&&1<e.colSpan&&e.parentNode.idd){var c=e.colSpan-1,g=this.cells4(e).getValue();this.setColspan(e.parentNode.idd,e._cellIndex,1);if(1<c){var h=1*e._cellIndex;this.setColspan(e.parentNode.idd,h+1,c);this.cells(e.parentNode.idd,1*e._cellIndex+1).setValue(g);a._childIndexes.splice(h,1);for(c=h;c<a._childIndexes.length;c++)--a._childIndexes[c]}}else if(a._childIndexes)for(a._childIndexes.splice(c,1);c<a._childIndexes.length;c++)a._childIndexes[c]--;e&&a.removeChild(e);for(c=b;c<a.childNodes.length;c++)a.childNodes[c]._cellIndex=a.childNodes[c]._cellIndexS=a.childNodes[c]._cellIndex-1}};dhtmlXGridObject.prototype.enableColumnMove=function(a,b){this._mCol=dhx4.s2b(a);"undefined"!=typeof b&&(this._mCols=b.split(","));this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)};dhtmlXGridObject.prototype._startColumnMove=function(a){a=a||event;for(var b=a.target||a.srcElement,c=b;"TABLE"!=c.tagName;)c=c.parentNode;if(c=c.grid)if(c.setActive(),c._mCol&&2!=a.button){b=c.getFirstParentOfType(b,"TD");if("default"!=b.style.cursor)return!0;c&&!c._colInMove&&(c.resized=null,c._mCols&&"true"!=c._mCols[b._cellIndex]||(c._colInMove=b._cellIndex+1));c._colInMovePos={x:a.clientX,y:a.clientY};return!0}};dhtmlXGridObject.prototype._onColumnMove=function(a){a=a||event;var b=window.globalActiveDHTMLGridObject;if(b&&b._colInMove){if(20>Math.max(Math.abs(a.clientX-b._colInMovePos.x),Math.abs(a.clientY-b._colInMovePos.y)))return;b._hideHContext&&b._hideHContext();if("object"!=typeof b._colInMove){var c=document.createElement("DIV");c._aIndex=b._colInMove-1;c._bIndex=null;c.innerHTML=b.getHeaderCol(c._aIndex);c.className="dhx_dragColDiv";c.style.position="absolute";document.body.appendChild(c);b._colInMove=c}c=[];c[0]=document.body.scrollLeft||document.documentElement.scrollLeft;c[1]=document.body.scrollTop||document.documentElement.scrollTop;b._colInMove.style.left=a.clientX+c[0]+8+"px";b._colInMove.style.top=a.clientY+c[1]+8+"px";for(var e=a.target||a.srcElement;e&&"undefined"==typeof e._cellIndexS;)e=e.parentNode;b._colInMove._oldHe&&(b._colInMove._oldHe.className=b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),b._colInMove._oldHe=null,b._colInMove._bIndex=null);if(e){var g=b.hdr.rows[1]._childIndexes?b.hdr.rows[1].cells[b.hdr.rows[1]._childIndexes[e._cellIndexS]]:b.hdr.rows[1].cells[e._cellIndexS],c=a.clientX-(dhx4.absLeft(g)-b.hdrBox.scrollLeft);.5<c/g.offsetWidth?(g.className+=" columnTargetR",b._colInMove._bIndex=e._cellIndexS):(g.className+=" columnTargetL",b._colInMove._bIndex=e._cellIndexS-1);g.offsetLeft<b.objBox.scrollLeft+20&&(b.objBox.scrollLeft=Math.max(0,g.offsetLeft-20));g.offsetLeft+g.offsetWidth-b.objBox.scrollLeft>b.objBox.offsetWidth-20&&(b.objBox.scrollLeft=Math.min(b.objBox.scrollLeft+g.offsetWidth+20,b.objBox.scrollWidth-b.objBox.offsetWidth));b._colInMove._oldHe=g}a.cancelBubble=!0;return!1}return!0};dhtmlXGridObject.prototype._stopColumnMove=function(a){(a=window.globalActiveDHTMLGridObject)&&a._colInMove&&("object"==typeof a._colInMove&&(a._colInMove.parentNode.removeChild(a._colInMove),null!=a._colInMove._bIndex&&a.moveColumn(a._colInMove._aIndex,a._colInMove._bIndex+1),a._colInMove._oldHe&&(a._colInMove._oldHe.className=a._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),a._colInMove._oldHe=null,a._colInMove.grid=null,a.resized=!0),a._colInMove=0);return!0};dhx4.attachEvent("onGridCreated",function(a){a._split_later&&a.splitAt(a._split_later)});dhtmlXGridObject.prototype.splitAt=function(a){function b(a){var b=A.objBox;if(2<b.scrollHeight-b.offsetHeight){var c=a.wheelDelta/-40;a.wheelDelta===window.undefined&&(c=a.detail);b.scrollTop+=40*c;a.preventDefault&&a.preventDefault()}}function c(a,b){var c=b.nextSibling,e=b.parentNode;a.parentNode.insertBefore(b,a);c?e.insertBefore(a,c):e.appendChild(a);c=a.style.display;a.style.display=b.style.display;a._attrs=b._attrs;a.style.whiteSpace=b.style.whiteSpace;b.style.whiteSpace="nowrap";b.style.display=c}function e(b,e,g,h){var l=this,m=Array(a).join(this.delim),n=[];if(2==b){for(var q=0;q<a;q++){var y=e[b-1].cells[e[b-1]._childIndexes?e[b-1]._childIndexes[q]:q];y.rowSpan&&1<y.rowSpan&&(n[y._cellIndex]=y.rowSpan-1,h[b-1].cells[h[b-1]._childIndexes?h[b-1]._childIndexes[q]:q].rowSpan=y.rowSpan,y.rowSpan=1)}var y=_isIE?e[b-1].offsetHeight:e[b-1].clientHeight,r=_isIE?h[b-1].offsetHeight:h[b-1].clientHeight;h[b-1].style.height=Math.max(y,r)+"px";e[b-1].style.height=Math.max(y,r)+"px";this.noHeaderResize=!0}for(b;b<e.length;b++){y=Array.apply(null,Array(a)).map(function(a,c,e){return(a=l.hwReport.getOriginCellById(b-1+"_"+c))?a.getClassName():""});this._fake.attachHeader(m,null,g,y);h=h||this._fake.ftr.childNodes[0].rows;for(var y=a,r=0,q=1,C=0;C<y;C+=q)if(n[C]){--n[C];if(_isIE||_isOpera)q=document.createElement("TD"),_isFF&&(q.style.display="none"),e[b].insertBefore(q,e[b].cells[0]);r++;q=1}else{var v=e[b].cells[C-(_isIE?0:r)],u=v.rowSpan;c(h[b].cells[C-r],v);if(1<u){if(1<h[b].cells[C-r].colSpan)for(q=1;q<h[b].cells[C-r].colSpan;q++)n[C+q]=u-1;n[C]=u-1;v.rowSpan=u}if(1<h[b].cells[C-r].colSpan)for(e[b].cells[C-r].colSpan=h[b].cells[C-r].colSpan,q=1;q<h[b].cells[C-r].colSpan;q++)h[b].removeChild(h[b].cells[C-r+1]);q=h[b].cells[C-r].colSpan;r+=h[b].cells[C-r].colSpan-1}y=_isIE?e[b].offsetHeight:e[b].clientHeight;r=_isIE?h[b].offsetHeight:h[b].clientHeight;h[b].style.height=Math.max(y,r)+"px";e[b].style.height=Math.max(y,r)+"px";this.noHeaderResize=!0}}function g(a,b,c,e){for(var g=e.shiftKey?-1:1,h=e.shiftKey?-1:c._cCount,l=a+g;l!=h;l+=g)if(a=c.smartTabOrder?c.cells2(b,l).isDisabled()?!1:l:l,!1!==a)return c.selectCell(b,a,!1,!1,!c._key_events.k_other,!0),e.cancelBubble=!0,e.preventDefault&&e.preventDefault(),!0}if(!this.obj.rows[0])return this._split_later=a;a=parseInt(a);var h=document.createElement("DIV");this.entBox.appendChild(h);var l=document.createElement("DIV");this.entBox.appendChild(l);for(var m=this.entBox.childNodes.length-3;0<=m;m--)l.insertBefore(this.entBox.childNodes[m],l.firstChild);this.entBox.style.position="relative";this.globalBox=this.entBox;this.entBox=l;l.grid=this;h.style.cssText+="border:0px solid red !important;";l.style.cssText+="border:0px solid red !important;";l.style.top="0px";l.style.position="absolute";h.style.position="absolute";h.style.top="0px";h.style.left="0px";h.style.zIndex=11;l.style.height=h.style.height=this.globalBox.clientHeight;this._fake=new dhtmlXGridObject(h);this._fake.hwReport=this.hwReport;this._fake.__class=this.__class||[];this._fake.__attrs=this.__attrs||[];var n=this._fake.setColumnLabel;this._fake.setColumnLabel=function(a,b,c,e){n.apply(this,[a,b,c,e]);c=(e||this.hdr).rows[c||1];e=c._childIndexes?c._childIndexes[a]:a;c.cells[e]&&!this.useImagesInHeader&&(this.__class[a]&&(c.cells[e].className=this.__class[a]),this.__attrs[a]&&(c.cells[e]._attrs=this.__attrs[a],c.cells[e].firstChild._attrs=this.__attrs[a],(a=this.hwReport.getOriginCellById(this.__attrs[a].sid))&&"vmdlink"==a.getType()&&(c.cells[e].grid=this,c.cells[e].firstChild._cellType=a.getType(),(a=this.cells4(c.cells[e].firstChild))&&a.setValue(b))))};this.globalBox=this._fake.globalBox=this.globalBox;this._fake._fake=this;this._fake._realfake=!0;this._treeC=this.cellType._dhx_find("tree");this._fake.delim=this.delim;this._fake.customGroupFormat=this.customGroupFormat;this._fake.setImagesPath(this._imgURL);this._fake.iconURL=this.iconURL;this._fake._customSorts=this._customSorts;this._fake.noHeader=this.noHeader;this._fake._enbTts=this._enbTts;this._fake._drsclmW=this._drsclmW;this._fake._htkebl=this._htkebl;this._fake.clists=this.clists;this._fake.fldSort=[];this._fake.selMultiRows=this.selMultiRows;this._fake.multiLine=this.multiLine;this._fake._key_events=this._key_events;this._fake.smartTabOrder=this.smartTabOrder;this._fake._RaSeCol=this._RaSeCol;if(this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight);this.attachEvent("onRowAdded",this._correctRowHeight);var q=function(){this.forEachRow(function(a){this._correctRowHeight(a)})};this.attachEvent("onPageChanged",q);this.attachEvent("onXLE",q);this.attachEvent("onResizeEnd",q);this._ads_count||this.attachEvent("onAfterSorting",q);this.attachEvent("onFilterEnd",q);this.attachEvent("onDistributedEnd",q)}this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop});this._fake.loadedKidsHash=this.loadedKidsHash;this._h2&&(this._fake._h2=this._h2);this._fake._dInc=this._dInc;var q=[[],[],[],[],[],[],[]],r="hdrLabels initCellWidth cellType cellAlign cellVAlign fldSort columnColor".split(" "),v="setHeader setInitWidths setColTypes setColAlign setColVAlign setColSorting setColumnColor".split(" ");this._fake.callEvent=function(){var a=!0;this._fake._split_event=!0;var b="onScroll"==arguments[0];("onGridReconstructed"==arguments[0]||b)&&this._fake.callEvent.apply(this,arguments);b||(a=this._fake.callEvent.apply(this._fake,arguments));this._fake._split_event=!1;return a};this._elmn&&this._fake.enableLightMouseNavigation(!0);(this._cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()});this._fake._cssSP=this._cssSP;this._fake.isEditable=this.isEditable;this._fake._edtc=this._edtc;this._sst&&this._fake.enableStableSorting(!0);this._fake._sclE=this._sclE;this._fake._dclE=this._dclE;this._fake._f2kE=this._f2kE;this._fake._maskArr=this._maskArr;this._fake._dtmask=this._dtmask;this._fake.combos=this.combos;for(var u=0,x=this.globalBox.offsetWidth,m=0;m<a;m++){for(var w=0;w<r.length;w++)this[r[w]]&&(q[w][m]=this[r[w]][m]),"string"==typeof q[w][m]&&(q[w][m]=q[w][m].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(q[1][m]*=1);"%"==this.cellWidthType?(q[1][m]=Math.round(parseInt(this[r[1]][m])*x/100),u+=q[1][m]):u+=parseInt(this[r[1]][m]);this.setColumnHidden(m,!0)}for(w=0;w<r.length;w++)if(m=q[w].join(this.delim),"setHeader"!=v[w]){if(""!=m)this._fake[v[w]](m)}else this._fake[v[w]](m,null,this._hstyles);this._fake._strangeParams=this._strangeParams;this._fake._drsclmn=this._drsclmn;u=Math.min(this.globalBox.offsetWidth,u);l.style.left=u+"px";h.style.width=u+"px";l.style.width=Math.max(this.globalBox.offsetWidth-u,0);this._ecspn&&(this._fake._ecspn=!0);this._fake.init();this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this);this._fake.objBox.style.overflow="hidden";dhtmlx.$customScroll?this._fake.objBox._custom_scroll_mode="":this._fake.objBox.style.overflowX="scroll";this._fake._srdh=this._srdh||20;this._fake._srnd=this._srnd;this._fake._cssEven=this._cssEven;this._fake._cssUnEven=this._cssUnEven;this.skin_name!=this._fake.skin_name&&this._fake.setSkin(this.skin_name);var A=this;dhtmlxEvent(this._fake.objBox,"mousewheel",b);dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",b);2<this.hdr.rows.length&&e.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows);this.ftr&&(e.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px");this.saveSizeToCookie&&(this.saveSizeToCookie=function(b,c){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);b||(b=this.entBox.id);for(var e=[],g=0;g<this.cellWidthPX.length;g++)e[g]=g<a?this._fake.cellWidthPX[g]:this.cellWidthPX[g];e=e.join(",");this.setCookie(b,c,0,e);e=(this.initCellWidth||[]).join(",");this.setCookie(b,c,1,e);return!0},this.loadSizeFromCookie=function(b){b||(b=this.entBox.id);var c=this._getCookie(b,1);if(c){this.initCellWidth=c.split(",");c=this._getCookie(b,0);this.cellWidthType="px";b=0;if(c&&c.length)for(var c=c.split(","),e=0;e<c.length;e++)e<a?(this._fake.cellWidthPX[e]=c[e],b+=1*c[e]):this.cellWidthPX[e]=c[e];this._fake.entBox.style.width=b+"px";this._fake.objBox.style.width=b+"px";c=this.globalBox.childNodes[1];c.style.left=b-0+"px";this.ftr&&(this.ftr.style.left=b-0+"px");c.style.width=this.globalBox.offsetWidth-b+"px";this.setSizes();return!0}},this._fake.onRSE=this.onRSE);this.setCellTextStyleA=this.setCellTextStyle;this.setCellTextStyle=function(b,c,e){c<a&&this._fake.setCellTextStyle(b,c,e);this.setCellTextStyleA(b,c,e)};this.setRowTextBoldA=this.setRowTextBold;this.setRowTextBold=function(a){this.setRowTextBoldA(a);this._fake.setRowTextBold(a)};this.setRowColorA=this.setRowColor;this.setRowColor=function(a,b){this.setRowColorA(a,b);this._fake.setRowColor(a,b)};this.setRowHiddenA=this.setRowHidden;this.setRowHidden=function(a,b){this.setRowHiddenA(a,b);this._fake.setRowHidden(a,b)};this.setRowTextNormalA=this.setRowTextNormal;this.setRowTextNormal=function(a){this.setRowTextNormalA(a);this._fake.setRowTextNormal(a)};this.getChangedRows=function(a){function b(a){for(var b=0;b<a.childNodes.length;b++)if(a.childNodes[b].wasChanged)return c[c.length]=a.idd}var c=[];this.forEachRow(function(e){var g=this.rowsAr[e];e=this._fake.rowsAr[e];"TR"==g.tagName&&e&&"TR"==e.tagName&&(a&&g._added?c[c.length]=g.idd:b(g)||b(e))});return c.join(this.delim)};this.setRowTextStyleA=this.setRowTextStyle;this.setRowTextStyle=function(a,b){this.setRowTextStyleA(a,b);this._fake.rowsAr[a]&&this._fake.setRowTextStyle(a,b)};this.lockRowA=this.lockRow;this.lockRow=function(a,b){this.lockRowA(a,b);this._fake.lockRow(a,b)};this.getColWidth=function(b){return b<a?parseInt(this._fake.cellWidthPX[b]):parseInt(this.cellWidthPX[b])};this.getColumnLabel=function(b){return this._fake.getColumnLabel.apply(b<a?this._fake:this,arguments)};this.setColWidthA=this._fake.setColWidthA=this.setColWidth;this.setColWidth=function(b,c){b*=1;b<a?this._fake.setColWidthA(b,c):this.setColWidthA(b,c);b+1<=a&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))};this.adjustColumnSizeA=this.adjustColumnSize;this.setColumnLabelA=this.setColumnLabel;this.setColumnLabel=function(b,c,e,g){var h=this;b<a&&(h=this._fake);return this.setColumnLabelA.apply(h,[b,c,e,g])};this.adjustColumnSize=function(b,c){if(b<a)_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(b,c),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit();else return this.adjustColumnSizeA(b,c)};h="cells";this._bfs_cells=this[h];this[h]=function(){return arguments[1]<a?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)};this._bfs_isColumnHidden=this.isColumnHidden;this.isColumnHidden=function(){return parseInt(arguments[0])<a?this._fake.isColumnHidden.apply(this._fake,arguments):this._bfs_isColumnHidden.apply(this,arguments)};this._bfs_setColumnHidden=this.setColumnHidden;this.setColumnHidden=function(){return parseInt(arguments[0])<a?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};h="cells2";this._bfs_cells2=this[h];this[h]=function(){return arguments[1]<a?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};h="cells3";this._bfs_cells3=this[h];this[h]=function(b,c){if(arguments[1]<a&&this._fake.rowsAr[arguments[0].idd]){if(this._fake.rowsAr[b.idd]&&0==this._fake.rowsAr[b.idd].childNodes.length)return this._bfs_cells3.apply(this,arguments);arguments[0]=arguments[0].idd;return this._fake.cells.apply(this._fake,arguments)}return this._bfs_cells3.apply(this,arguments)};h="changeRowId";this._bfs_changeRowId=this[h];this[h]=function(){this._bfs_changeRowId.apply(this,arguments);this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)};this._fake.getRowById=function(a){var b=this.rowsAr[a];!b&&this._fake.rowsAr[a]&&(b=this._fake.getRowById(a));if(b){if("TR"!=b.tagName){for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==a)return this.render_row(c);if(this._h2)return this.render_row(null,b.idd)}return b}return null};this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(a){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[a.idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(a){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[a.idd]]);this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll();this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll();this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(a){return this._fake._updateTGRState(a)});this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var a=this.grid;a._setRowHoverA.apply(this,arguments);var b=_isIE?event.srcElement:arguments[0].target;(b=a._fake.rowsAr[a.getFirstParentOfType(b,"TD").parentNode.idd])&&a._fake._setRowHoverA.apply(a._fake.obj,[{target:b.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){var a=arguments[1]?this:this.grid;a._unsetRowHoverA.apply(this,arguments);a._fake._unsetRowHoverA.apply(a._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss));this._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),this._fake.rowsAr[a.id]&&this._fake.rowsAr[a.id].imgTag&&(this._fake.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),a.update=!1)};this.copy_row=function(b){for(var c=b.cloneNode(!0),e=0;e<c.childNodes.length;e++)c.childNodes[e]._cellIndex=b.childNodes[e]._cellIndex;c._skipInsert=b._skipInsert;c._locked=b._locked;var g=a;c._attrs={};c._css=b._css;if(this._ecspn)for(e=g=0;g<c.childNodes.length&&e<a;e+=c.childNodes[g].colSpan||1)g++;for(;c.childNodes.length>g;)c.removeChild(c.childNodes[c.childNodes.length-1]);for(e=0;e<g;e++)this.dragAndDropOff&&this.dragger.addDraggableItem(c.childNodes[e],this),c.childNodes[e].style.display=this._fake._hrrar?this._fake._hrrar[e]?"none":"":"",c.childNodes[e].combo_value=b.childNodes[e].combo_value,c.childNodes[e]._clearCell=b.childNodes[e]._clearCell,c.childNodes[e]._cellType=b.childNodes[e]._cellType,c.childNodes[e]._brval=b.childNodes[e]._brval,c.childNodes[e].val=b.childNodes[e].val,c.childNodes[e]._combo=b.childNodes[e]._combo,c.childNodes[e]._disabled=b.childNodes[e]._disabled,c.childNodes[e]._attrs=b.childNodes[e]._attrs,c.childNodes[e].chstate=b.childNodes[e].chstate,b._attrs.style&&(c.childNodes[e].style.cssText=b._attrs.style+";"+c.childNodes[e].style.cssText),1<c.childNodes[e].colSpan&&(c._childIndexes=b._childIndexes);this._h2&&this._treeC<a&&(e=this._h2.get[b.idd],c.imgTag=c.childNodes[this._treeC].childNodes[0].childNodes[e.level],c.valTag=c.childNodes[this._treeC].childNodes[0].childNodes[e.level+2]);c.idd=b.idd;c.grid=this._fake;return c};h="_insertRowAt";this._bfs_insertRowAt=this[h];this[h]=function(){var a=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var b=this._fake._insertRowAt.apply(this._fake,arguments);a._fhd&&(b.parentNode.removeChild(b),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(b)),a._fhd=!1);return a};this._bfs_setSizes=this.setSizes;this.setSizes=function(){if(!this._notresize){this._bfs_setSizes(this,arguments);this.sync_headers();this.sync_scroll()&&this._ahgr&&this.setSizes();var a=this.dontSetSizes?this.entBox.offsetHeight+"px":this.entBox.style.height;this._fake.entBox.style.height=a;this._fake.objBox.style.height=this.objBox.style.height;this._fake.hdrBox.style.height=this.hdrBox.style.height;this._fake.objBox.scrollTop=this.objBox.scrollTop;this._fake.setColumnSizes(this._fake.entBox.clientWidth);this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width);this.dontSetSizes||(this.globalBox.style.height=a)}};this.sync_scroll=this._fake.sync_scroll=function(a){var b=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!a)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden";this._fake.objBox.style.overflowX="hidden"}else dhtmlx.$customScroll||(this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll");return b!=this.objBox.style.overflowX};this.sync_headers=this._fake.sync_headers=function(){if(!this.noHeader&&this._fake.hdr.scrollHeight!=this.hdr.offsetHeight&&!this.noHeaderResize){for(var b=1;b<this.hdr.rows.length;b++){for(var c=a;!this.hdr.rows[b].childNodes[c];)c--;var e=Math.min(this.hdr.rows[b].childNodes[c].scrollHeight+2,this.hdr.rows[b].scrollHeight),g=this._fake.hdr.rows[b].scrollHeight;e!=g&&(this._fake.hdr.rows[b].style.height=this.hdr.rows[b].style.height=Math.max(e,g)+"px");if(window._KHTMLrv){for(var h=0;this._fake._hrrar[h];)h++;this._fake.hdr.rows[b].childNodes[h].style.height=this.hdr.rows[b].childNodes[c].style.height=Math.max(e,g)+"px"}}this._fake.sync_headers}};this._fake._bfs_setSizes=this._fake.setSizes;this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};h="_doOnScroll";this._bfs__doOnScroll=this[h];this[h]=function(){this._bfs__doOnScroll.apply(this,arguments);this._fake.objBox.scrollTop=this.objBox.scrollTop;this._fake._doOnScroll.apply(this._fake,arguments)};h="selectAll";this._bfs__selectAll=this[h];this[h]=function(){this._bfs__selectAll.apply(this,arguments);this._bfs__selectAll.apply(this._fake,arguments)};h="doClick";this._bfs_doClick=this[h];this[h]=function(){this._bfs_doClick.apply(this,arguments);if("TD"==arguments[0].tagName){var b=arguments[0]._cellIndex>=a;arguments[0].parentNode.idd&&(b||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),arguments[0]=this._fake.cells(arguments[0].parentNode.idd,b?0:arguments[0]._cellIndex).cell,b&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),b?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),b?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop)}};this._fake._bfs_doClick=this._fake[h];this._fake[h]=function(){this._bfs_doClick.apply(this,arguments);if("TD"==arguments[0].tagName){var b=arguments[0]._cellIndex<a;arguments[0].parentNode.idd&&(arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,b?a:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),b&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop))}};this.clearSelectionA=this.clearSelection;this.clearSelection=function(a){a&&this._fake.clearSelection();this.clearSelectionA()};this.moveRowUpA=this.moveRowUp;this.moveRowUp=function(a){this._h2||this._fake.moveRowUp(a);this.moveRowUpA(a);this._h2&&this._fake._h2syncModel()};this.moveRowDownA=this.moveRowDown;this.moveRowDown=function(a){this._h2||this._fake.moveRowDown(a);this.moveRowDownA(a);this._h2&&this._fake._h2syncModel()};this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)};this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)};this.getSortingStateA=this.getSortingState;this.getSortingState=function(){var a=this.getSortingStateA();return 0!=a.length?a:this._fake.getSortingState()};this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState;this.setSortImgState=function(b,c,e,g){this.setSortImgStateA(b,c,e,g);1*c<a?(this._fake.setSortImgStateA(b,c,e,g),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)};this._fake.doColResizeA=this._fake.doColResize;this._fake.doColResize=function(b,c,e,g,h){var l=-1,m;arguments[1]._cellIndex==a-1?(l=this._initalSplR+(b.clientX-g),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||0<b.clientX-g)&&(arguments[3]=this._initalSplF||arguments[3])):this.obj.offsetWidth<this.entBox.offsetWidth&&(l=this.obj.offsetWidth);m=this.doColResizeA.apply(this,arguments);!1!==m&&(this._correctSplit(l),this.resized=this._fake.resized=1);return m};this._fake.changeCursorState=function(a){var b=a.target||a.srcElement;"TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD"));if("TD"!=b.tagName||!this._drsclmn||this._drsclmn[b._cellIndex]){var c=(a.layerX||0)+(_isIE||"DIV"!=a.target.tagName?0:b.offsetLeft),e=parseInt(this.getPosition(b,this.hdrBox));b.style.cursor=b.offsetWidth-(a.offsetX||-1*(e-c))<(_isOpera?20:10)||this.entBox.offsetWidth-(a.offsetX?a.offsetX+b.offsetLeft:c)+this.objBox.scrollLeft-0<(_isOpera?20:10)?"E-resize":"default";_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}};this._fake.startColResizeA=this._fake.startColResize;this._fake.startColResize=function(a){a=this.startColResizeA(a);this._initalSplR=this.entBox.offsetWidth;this._initalSplF=null;if(this.entBox.onmousemove){var b=this.entBox.parentNode;if(b._aggrid)return a;b._aggrid=b.grid;b.grid=this;this.entBox.parentNode.onmousemove=this.entBox.onmousemove;this.entBox.onmousemove=null}return a};this._fake.stopColResizeA=this._fake.stopColResize;this._fake.stopColResize=function(a){if(this.entBox.parentNode.onmousemove){var b=this.entBox.parentNode;b.grid=b._aggrid;b._aggrid=null;this.entBox.onmousemove=this.entBox.parentNode.onmousemove;this.entBox.parentNode.onmousemove=null;this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(a)};this.doKeyA=this.doKey;this._fake.doKeyA=this._fake.doKey;this._fake.doKey=this.doKey=function(a){if(!a||this._htkebl)return!0;if((a.target||a.srcElement).value!==window.undefined){var b=a.target||a.srcElement;if(!b.parentNode||-1==b.parentNode.className.indexOf("editable"))return!0}switch(a.keyCode){case 9:b=this._realfake?this._fake:this;if(!b.callEvent("onTab",[!0]))return!0;if(this.cell){for(var c=this.cell._cellIndex,e=b.getRowIndex(this.cell.parentNode.idd);!g(c,e,b,a);){e+=a.shiftKey?-1:1;if(0>e||e>=b.rowsBuffer.length)break;c=a.shiftKey?b._cCount:-1}return}}return this.doKeyA(a)};this.editCellA=this.editCell;this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()};this.deleteRowA=this.deleteRow;this.deleteRow=function(a,b){if(!1===this.deleteRowA(a,b))return!1;this._fake.rowsAr[a]&&this._fake.deleteRow(a)};this.clearAllA=this.clearAll;this.clearAll=function(){this.clearAllA();this._fake.clearAll()};this.editStopA=this.editStop;this.editStop=function(a){this._fake.editor?this._fake.editStop(a):this.editStopA(a)};this.attachEvent("onAfterSorting",function(b,c,e){b>=a&&this._fake.setSortImgState(!1)});this._fake.sortField=function(a,b,c){this._fake.sortField.call(this._fake,a,b,this._fake.hdr.rows[0].cells[a]);"na"!=this.fldSort[a]&&this._fake.fldSorted&&(b=this._fake.getSortingState()[1],this._fake.setSortImgState(!1),this.setSortImgState(!0,a,b))};this.sortTreeRowsA=this.sortTreeRows;this._fake.sortTreeRowsA=this._fake.sortTreeRows;this.sortTreeRows=this._fake.sortTreeRows=function(a,b,c,e){if(this._realfake)return this._fake.sortTreeRows(a,b,c,e);this.sortTreeRowsA(a,b,c,e);this._fake._h2syncModel();this._fake.setSortImgStateA(!1);this._fake.fldSorted=null};this._fake._fillers=[];this._fake.rowsBuffer=this.rowsBuffer;this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer});this._add_filler_s=this._add_filler;this._add_filler=function(a,b,c,e){this._fake._fillers||(this._fake._fillers=[]);if(this._realfake||!e){var g;c&&c.idd?g=this._fake.rowsAr[c.idd]:c&&c.nextSibling?(g={},g.nextSibling=this._fake.rowsAr[c.nextSibling.idd],g.parentNode=g.nextSibling.parentNode):this._fake._fillers.length&&(g=this._fake._fillers[this._fake._fillers.length-1][2]);this._fake._fillers.push(this._fake._add_filler(a,b,g))}return this._add_filler_s.apply(this,arguments)};this._add_from_buffer_s=this._add_from_buffer;this._add_from_buffer=function(){var a=this._add_from_buffer_s.apply(this,arguments);-1!=a&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd));return a};this._fake.render_row=function(a){a=this._fake.render_row(a);return-1==a?-1:a?this.rowsAr[a.idd]=this.rowsAr[a.idd]||this._fake.copy_row(a):null};this._reset_view_s=this._reset_view;this._reset_view=function(){this._fake._reset_view(!0);this._fake._fillers=[];this._reset_view_s()};this.moveColumn_s=this.moveColumn;this.moveColumn=function(b,c){if(c>=a)return this.moveColumn_s(b,c)};this.attachEvent("onCellChanged",function(b,c,e){if(this._split_event&&c<a&&this.rowsAr[b]){var g=this._fake.rowsAr[b];g&&(g._childIndexes?(b=this.rowsAr[b].childNodes[g._childIndexes[c]],g=g.childNodes[g._childIndexes[c]]):(b=this.rowsAr[b].childNodes[c],g=g.childNodes[c]),b._treeCell&&b.firstChild.lastChild?b.firstChild.lastChild.innerHTML=e:b.innerHTML=g.innerHTML,b._clearCell=!1,b.combo_value=g.combo_value,b.chstate=g.chstate)}});this._fake.combos=this.combos;this.setSizes();this.rowsBuffer[0]&&this._reset_view();this.attachEvent("onXLE",function(){this._fake._correctSplit()});this._fake._correctSplit()};dhtmlXGridObject.prototype._correctSplit=function(a){a=a||this.obj.scrollWidth-this.objBox.scrollLeft;a=Math.min(this.globalBox.offsetWidth,a);if(-1<a){this.entBox.style.width=a+"px";this.objBox.style.width=a+"px";var b=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;this._fake.entBox.style.left=a+"px";this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-a-(this.quirks?0:2)*b)+"px";this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width);if(_isIE){var c=_isIE&&!window.xmlHttpRequest,b=this.globalBox.offsetWidth-this.globalBox.clientWidth;this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(c?b:0)-a)+"px"}}};dhtmlXGridObject.prototype._correctRowHeight=function(a,b){if(this.rowsAr[a]&&this._fake.rowsAr[a]){var c=parseInt(this.rowsAr[a].style.height)||this.rowsAr[a].offsetHeight,e=parseInt(this._fake.rowsAr[a].style.height)||this._fake.rowsAr[a].offsetHeight;if(c=Math.max(c,e)-(this.rowsAr[a].delta_fix||0))if(this.rowsAr[a].style.height=this._fake.rowsAr[a].style.height=Math.round(c)+"px",this.rowsAr[a].delta_fix=0,window._KHTMLrv)for(var c=this._fake._cCount,g;!g&&0<=c;)g=this.rowsAr[a].childNodes[c],--c}};dhtmlXGridObject.prototype.enableUndoRedo=function(){var a=this;this.attachEvent("onEditCell",function(){return a._onEditUndoRedo.apply(a,arguments)});this.attachEvent("onCheckbox",function(b,c,e){return a._onEditUndoRedo.apply(a,[2,b,c,e?1:0,e?0:1])});this._IsUndoRedoEnabled=!0;this._UndoRedoData=[];this._UndoRedoPos=-1};dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1;this._UndoRedoData=[];this._UndoRedoPos=-1};dhtmlXGridObject.prototype._onEditUndoRedo=function(a,b,c,e,g){this._IsUndoRedoEnabled&&2==a&&g!=e&&(-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&0<this._UndoRedoData.length&&(this._UndoRedoData=[]),this._UndoRedoData.push({old_value:g,new_value:e,row_id:b,cell_index:c}),this._UndoRedoPos++);return!0};dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var a=this._UndoRedoData[this._UndoRedoPos--],b=this.cells(a.row_id,a.cell_index);"tree"==this.getColType(a.cell_index)?b.setLabel(a.old_value):b.setValue(a.old_value);this.callEvent("onUndo",[a.row_id])};dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var a=this._UndoRedoData[++this._UndoRedoPos];this.cells(a.row_id,a.cell_index).setValue(a.new_value);this.callEvent("onUndo",[a.row_id])};dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)};dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)};dhtmlXGridObject.prototype._process_json_row=function(a,b){a._attrs=b;for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};if(b.userdata)for(var e in b.userdata)this.setUserData(a.idd,e,b.userdata[e]);b=this._c_order?this._swapColumns(b.data):b.data;for(c=0;c<b.length;c++)"object"==typeof b[c]&&null!=b[c]&&(a.childNodes[c]._attrs=b[c],b[c].type&&(a.childNodes[c]._cellType=b[c].type),b[c]=b[c].value);this._fillRow(a,b);return a};dhtmlXGridObject.prototype._process_js_row=function(a,b){a._attrs=b;for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};if(b.userdata)for(var e in b.userdata)this.setUserData(a.idd,e,b.userdata[e]);c=[];for(e=0;e<this.columnIds.length;e++)c[e]=b[this.columnIds[e]],"object"==typeof c[e]&&null!=c[e]&&(a.childNodes[e]._attrs=c[e],c[e].type&&(a.childNodes[e]._cellType=c[e].type),c[e]=c[e].value),c[e]||0===c[e]||(c[e]="");this._fillRow(a,c);return a};dhtmlXGridObject.prototype.updateFromJSON=function(a,b,c,e){"undefined"==typeof b&&(b=!0);this._refresh_mode=[!0,b,c];this.load(a,e,"json")};dhtmlXGridObject.prototype._refreshFromJSON=function(a){this._f_rowsBuffer&&this.filterBy(0,"");reset=!1;window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(a){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(a):this.setValueX(a)});var b=this.cellType._dhx_find("tree"),c=a.parent||0,e={};this._refresh_mode[2]&&(-1!=b?this._h2.forEachChild(c,function(a){e[a.id]=!0},this):this.forEachRow(function(a){e[a]=!0}));a=a.rows;for(b=0;b<a.length;b++){var g=a[b],h=g.id;e[h]=!1;if(this.rowsAr[h]&&"TR"!=this.rowsAr[h].tagName)this._h2?this._h2.get[h].buff.data=g:this.rowsBuffer[this.getRowIndex(h)].data=g,this.rowsAr[h]=g;else if(this.rowsAr[h])this._process_json_row(this.rowsAr[h],g,-1),this._postRowProcessing(this.rowsAr[h],!0);else if(this._refresh_mode[1]){var l={idd:h,data:g,_parser:this._process_json_row,_locator:this._get_json_data},m=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(l),m=0):this.rowsBuffer.push(l);this._h2&&(reset=!0,this._h2.add(h,c).buff=this.rowsBuffer[this.rowsBuffer.length-1]);this.rowsAr[h]=g;g=this.render_row(m);this._insertRowAt(g,m?-1:0)}}if(this._refresh_mode[2])for(h in e)e[h]&&this.rowsAr[h]&&this.deleteRow(h);this._refresh_mode=null;window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX);reset&&this._renderSort();this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())};dhtmlXGridObject.prototype._process_js=function(a){return this._process_json(a,"js")};dhtmlXGridObject.prototype._parseHeadJson=function(a){if(a.head&&a.head.length){var b=a.head,c=a.settings,e="setInitWidths";a=!1;c&&"%"==c.colwidth&&(e="setInitWidthsP");c&&"%"==c.splitat&&(a=c.splitat);0<this.hdr.rows.length&&this.clearAll(!0);for(var c=[[],[],[],[],[],[],[]],g="value width type align sort hidden id".split(" "),h=["",e,"setColTypes","setColAlign","setColSorting","","setColumnIds"],e=0;e<b.length;e++)for(var l=0;l<g.length;l++)c[l].push(b[e][g[l]]);this.setHeader(c[0]);for(e=0;e<h.length;e++)if(h[e])this[h[e]](c[e].join(this.delim));for(e=0;e<b.length;e++)if(g=b[e].options,b[e].options)if("clist"==this.cellType[e])this.registerCList(e,g);else for(h=this.getCombo(e),l=0;l<g.length;l++)h.put(g[l].id,g[l].value);this.init();b=c[5].join(this.delim);this.setColHidden&&""!=b.replace(/,/g,"")&&this.setColHidden(b);a&&this.splitAt&&this.splitAt(a)}};dhtmlXGridObject.prototype._process_json=function(a,b){this._parsing=!0;try{a=a.responseText||a,"string"==typeof a&&(eval("dhtmlx.temp\x3d"+a+";"),a=dhtmlx.temp)}catch(n){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",a.xmlDoc||a,this]),a={rows:[]}}if(this._refresh_mode)return this._refreshFromJSON(a);a.head&&this._parseHeadJson(a);var c=parseInt(a.pos||0),e=parseInt(a.total_count||0),g=!1;e&&(this.rowsBuffer[e-1]||(this.rowsBuffer.length&&(g=!0),this.rowsBuffer[e-1]=null),e<this.rowsBuffer.length&&(this.rowsBuffer.splice(e,this.rowsBuffer.length-e),g=!0));var e="js"===b?a.userdata:a,h;for(h in e)"js"!==b&&"rows"==h||this.setUserData("",h,e[h]);if("js"==b&&a.collections)for(var l in a.collections){var m=this.getColIndexById(l);h=a.collections[l];if(m!==window.undefined)if("clist"==this.cellType[m]){colplaindata=[];for(e=0;e<h.length;e++)colplaindata.push(h[e].label);this.registerCList(m,colplaindata)}else for(m=this.getCombo(m),e=0;e<h.length;e++)m.put(h[e].value,h[e].label)}if(this.isTreeGrid())return this._process_tree_json(a,null,null,b);if("js"==b)for(a.data&&(a=a.data),l=0;l<a.length;l++)this.rowsBuffer[l+c]||(h=a[l],e=h.id||l+1,this.rowsBuffer[l+c]={idd:e,data:h,_parser:this._process_js_row,_locator:this._get_js_data},this.rowsAr[e]=a[l]);else for(l=0;l<a.rows.length;l++)this.rowsBuffer[l+c]||(e=a.rows[l].id,this.rowsBuffer[l+c]={idd:e,data:a.rows[l],_parser:this._process_json_row,_locator:this._get_json_data},this.rowsAr[e]=a.rows[l]);this.callEvent("onDataReady",[]);g&&this._srnd?(c=this.objBox.scrollTop,this._reset_view(),this.objBox.scrollTop=c):this.render_dataset();this._parsing=!1};dhtmlXGridObject.prototype._get_json_data=function(a,b){var c=a.data[b];return"object"==typeof c?c?c.value:"":c};dhtmlXGridObject.prototype._process_tree_json=function(a,b,c,e){this._parsing=!0;var g=!1;b||(this.render_row=this.render_row_tree,g=!0,b=a,c=b.parent||0,"0"==c&&(c=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2));if("js"==e)for(b.data&&!c&&(a=b.data),b.rows&&(b=b.rows),a=0;a<b.length;a++){var h=b[a].id,l=this._h2.add(h,c);l.buff={idd:h,data:b[a],_parser:this._process_js_row,_locator:this._get_js_data};b[a].open&&(l.state="minus");this.rowsAr[h]=l.buff;this._process_tree_json(b[a],b[a],h,e)}else if(b.rows)for(a=0;a<b.rows.length;a++)h=b.rows[a].id,l=this._h2.add(h,c),l.buff={idd:h,data:b.rows[a],_parser:this._process_json_row,_locator:this._get_json_data},b.rows[a].open&&(l.state="minus"),this.rowsAr[h]=l.buff,this._process_tree_json(b.rows[a],b.rows[a],h,e);g&&(0!=c&&this._h2.change(c,"state","minus"),this._updateTGRState(this._h2.get[c]),this._h2_to_buff(),this.callEvent("onDataReady",[]),0!=c&&(this._srnd||this.pagingOn)?this._renderSort():this.render_dataset(),!1===this._slowParse&&this.forEachRow(function(a){this.render_row_tree(0,a)}),this._parsing=!1,0==c||this._srnd||this.callEvent("onOpenEnd",[c,1]))};dhtmlXGridObject.prototype.enableAccessKeyMap=function(){this._select_ifpossible=function(){this.editor&&this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()};this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this._key_events.k9_0_1.call(this)},k13_0_0:function(){this._key_events.k9_0_0.call(this)},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.pagingOn&&this.showRow(a.parentNode.idd),this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0);this._select_ifpossible()},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1]))return!0;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0);this._select_ifpossible()},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!1,!1,!0);this._select_ifpossible()},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!1,!1,!0);this._select_ifpossible()},k38_1_0:function(){this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k40_1_0:function(){this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k38_0_1:function(){var a=this.getRowIndex(this.row.idd),a=this._nextRow(a,-1);if(!a||a._sRow||a._rLoad)return!1;this.selectCell(a,this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k40_0_1:function(){var a=this.getRowIndex(this.row.idd),a=this._nextRow(a,1);if(!a||a._sRow||a._rLoad)return!1;this.selectCell(a,this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k38_1_1:function(){for(var a=this.getRowIndex(this.row.idd);0<=a;a--)this.selectCell(this.rowsCol[a],this.cell._cellIndex,!0,!1,!0)},k40_1_1:function(){for(var a=this.getRowIndex(this.row.idd)+1;a<this.rowsCol.length;a++)this.selectCell(this.rowsCol[a],this.cell._cellIndex,!0,!1,!0)},k40_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var a=a=this.getRowIndex(this.row.idd)+1;if(this.rowsBuffer[a])a=this._nextRow(a-1,1),this.pagingOn&&a&&this.showRow(a.idd),this._Opera_stop=0,this.selectCell(a,this.cell._cellIndex,!0,!1,!0);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}this._still_active=!0},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0,!1,!0);this._select_ifpossible()},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0,!1,!0);this._select_ifpossible()},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var a=a=this.getRowIndex(this.row.idd)+1;-1!=a?(a=this._nextRow(a-1,-1),this._Opera_stop=0,this.pagingOn&&a&&this.showRow(a.idd),this.selectCell(a,this.cell._cellIndex,!0,!1,!0)):this._key_events.k33_0_0.apply(this,[])}this._still_active=!0}}};dhtmlXGridObject.prototype.enableExcelKeyMap=function(){this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this.editStop();this._key_events.k38_0_0.call(this)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0;this._key_events.k40_0_0.call(this)},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0]))return!0;if(!(this.cell&&this.cell._cellIndex+1>=this._cCount)){var a=this._getNextCell(null,1);a&&this.row==a.parentNode&&(this.selectCell(a.parentNode,a._cellIndex,!0),this._still_active=!0)}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1]))return!0;if(!this.cell||0!=this.cell._cellIndex){var a=this._getNextCell(null,-1);a&&this.row==a.parentNode&&(this.selectCell(a.parentNode,a._cellIndex,!0),this._still_active=!0)}},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||!1===a.changeState())return!1},k27_0_0:function(){this.editStop(!0);this._still_active=!0},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!0)},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!0)},k38_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0)},k40_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0)},k38_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var a=this._nextRow(this.row.rowIndex-1,-1);if(!a||a._sRow||a._rLoad)return!1;this.selectCell(a,this.cell._cellIndex,!0,!0)},k40_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var a=this._nextRow(this.row.rowIndex-1,1);if(!a||a._sRow||a._rLoad)return!1;this.selectCell(a,this.cell._cellIndex,!0,!0)},k38_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var a=this.row.rowIndex-1;0<=a;a--)this.selectCell(this.rowsCol[a],this.cell._cellIndex,!0,!0)},k40_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var a=this.row.rowIndex;a<this.rowsCol.length;a++)this.selectCell(this.rowsCol[a],this.cell._cellIndex,!0,!0)},k40_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(this.editor)return!1;var b=Math.max(a._r_select||0,this.getRowIndex(this.row.idd));if(b=this._nextRow(b,1))a._r_select=null,this.selectCell(b,this.cell._cellIndex,!0),a.pagingOn&&a.showRow(b.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0)},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(this.editor)return!1;if(this.row.idd){var b=this.getRowIndex(this.row.idd)+1;-1==b||this.pagingOn&&1==b?this._key_events.k33_0_0.apply(this,[]):(b=this._nextRow(b-1,-1),this.selectCell(b,this.cell._cellIndex,!0),a.pagingOn&&b&&a.showRow(b.idd))}}},k_other:function(a){if(this.editor)return!1;if(!a.ctrlKey&&40<=a.keyCode&&(91>a.keyCode||95<a.keyCode&&111>a.keyCode||187<a.keyCode)&&this.cell){a=this.cells4(this.cell);if(a.isDisabled())return!1;var b=a.getValue();!1!==a.editable&&a.setValue("");this.editCell();this.editor?(this.editor.val=b,this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()):a.setValue(b)}}}};dhtmlXGridObject.prototype.loadCSVFile=function(a,b){this.load(a,b,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this._csvAID=dhx4.s2b(a)};dhtmlXGridObject.prototype.enableCSVHeader=function(a){this._csvHdr=dhx4.s2b(a)};dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a};dhtmlXGridObject.prototype._csvAID=!0;dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,"csv")};dhtmlXGridObject.prototype.serializeToCSV=function(a){this.editStop();this._agetm=this._mathSerialization?"getMathValue":this._strictText||a?"getTitle":"getValue";a=[];if(this._csvHdr)for(var b=1;b<this.hdr.rows.length;b++){for(var c=[],e=0;e<this._cCount;e++)this._srClmn&&!this._srClmn[e]||c.push(this.getColumnLabel(e,b-1));a.push(this.csvParser.str(c,this.csv.cell,this.csv.row))}e=0;b=this.rowsBuffer.length;for(e;e<b;e++)c=this._serializeRowToCVS(null,e),""!=c&&a.push(c);return this.csvParser.block(a,this.csv.row)};dhtmlXGridObject.prototype._serializeRowToCVS=function(a,b,c,e,g){var h=[];a||(a=this.render_row(b),this._fake&&!this._fake.rowsAr[a.idd]&&this._fake.render_row(b));this._csvAID||(h[h.length]=a.idd);c=c||0;e=e||this._cCount;b=!1;for(var l=c;a.childNodes[a._childIndexes?a._childIndexes[c]:c]._cellIndex>l&&c;)c--;for(;l<e&&a.childNodes[a._childIndexes?a._childIndexes[c]:c];c++){var m=a.childNodes[a._childIndexes?a._childIndexes[c]:c]._cellIndex;if(this._srClmn&&!this._srClmn[m]||this._serialize_visible&&this._hrrar[m])l++;else{for(var n=a.childNodes[a._childIndexes?a._childIndexes[c]:c],q=this.cells(a.idd,m);l!=m&&!(l++,h.push(""),l>=e););if(l>=e)break;c=l;l++;q.cell?(zxVal=q[this._agetm](),g&&q.setValue("")):zxVal="";this._chAttr&&q.wasChanged()&&(b=!0);h[h.length]=null===zxVal?"":zxVal;if(this._ecspn&&n.colSpan&&1<n.colSpan)for(n=n.colSpan-1,m=0;m<n;m++)h[h.length]="",l++}}return this._onlChAttr&&!b?"":this.csvParser.str(h,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(a){window.clipboardData?window.clipboardData.setData("Text",a):(new Clipboard).copy(a)};dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()};dhtmlXGridObject.prototype.cellToClipboard=function(a,b){if(!a||!b&&0!==b){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd;b=this.cell._cellIndex}var c=this.cells(a,b);this.toClipBoard(((c.getLabel?c.getLabel():c.getValue())||"").toString())};dhtmlXGridObject.prototype.updateCellFromClipboard=function(a,b){if(!a||!b){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd;b=this.cell._cellIndex}var c=this.cells(a,b);c[c.setImage?"setLabel":"setValue"](this.fromClipBoard())};dhtmlXGridObject.prototype.rowToClipboard=function(a){var b="";this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";this._serialize_visible=!this._fake;if(a)b=this._serializeRowToCVS(this.getRowById(a));else{a=[];for(var c=0;c<this.selectedRows.length;c++)a[a.length]=this._serializeRowToCVS(this.selectedRows[c]),b=this.csvParser.block(a,this.csv.row)}this._serialize_visible=!1;this.toClipBoard(b)};dhtmlXGridObject.prototype.updateRowFromClipboard=function(a){var b=this.fromClipBoard();if(b&&(a=a?this.getRowById(a):this.selectedRows[0])){b=this.csvParser.unblock(b,this.csv.cell,this.csv.row)[0];this._csvAID||b.splice(0,1);for(var c=0;c<b.length;c++){var e=this.cells3(a,c);e[e.setImage?"setLabel":"setValue"](b[c])}}};dhtmlXGridObject.prototype.csvParser={block:function(a,b){return a.join(b)},unblock:function(a,b,c){a=(a||"").split(c);for(c=0;c<a.length;c++)a[c]=(a[c]||"").split(b);b=a.length-1;1==a[b].length&&""==a[b][0]&&a.splice(b,1);return a},str:function(a,b,c){return a.join(b)}};dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('""',"g"),block:function(a,b){return a.join(b)},unblock:function(a,b,c){var e=[[]],g=0;if(!a)return e;var h=/^[ ]*"/,l=/"[ ]*$/,m=new RegExp(".*"+c+".*$");a=a.split(b);for(b=0;b<a.length;b++)if(a[b].match(h)){for(var n=a[b].replace(h,"");!a[b].match(l);)b++,n+=a[b];e[g].push(n.replace(l,"").replace(this._quote_esc,'"'))}else a[b].match(m)?(n=a[b].indexOf(c),e[g].push(a[b].substr(0,n)),g++,e[g]=[],a[b]=a[b].substr(n+1),b--):(a[b]||b!=a.length-1)&&e[g].push(a[b]);c=e.length-1;0<c&&!e[c].length&&e.splice(c,1);return e},str:function(a,b,c){for(c=0;c<a.length;c++)a[c]='"'+a[c].replace(this._quote,'""')+'"';return a.join(b)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(a)for(var b=this.csvParser.unblock(a,this.csv.cell,this.csv.row),c=0;c<b.length;c++)b[c]&&(a=b[c],a.length&&(this._csvAID?this.addRow(this.getRowsNum()+2,a):(this.rowsAr[a[0]]&&(a[0]=this.uid()),this.addRow(a[0],a.slice(1)))))};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();a&&this.loadCSVString(a)};dhtmlXGridObject.prototype.getXLS=function(a){this.xslform||(this.xslform=document.createElement("FORM"),this.xslform.action=(a||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform),a=document.createElement("INPUT"),a.type="hidden",a.name="csv",this.xslform.appendChild(a),a=document.createElement("INPUT"),a.type="hidden",a.name="csv_header",this.xslform.appendChild(a));a=this.serializeToCSV();this.xslform.childNodes[0].value=a;a=[];for(var b=this._cCount,c=0;c<b;c++)a.push(this.getHeaderCol(c));a=a.join(",");this.xslform.childNodes[1].value=a;this.xslform.submit()};dhtmlXGridObject.prototype.printView=function(a,b){var c="\x3cstyle\x3eTD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  \x3c/style\x3e",e=null;if(this._fake)for(var e=[].concat(this._hrrar),g=0;g<this._fake._cCount;g++)this._hrrar[g]=null;g=document.location.port;c+="\x3cbase  href\x3d'"+(document.location.protocol+"//"+document.location.hostname+(g?":"+g:"")+document.location.pathname)+"'\x3e\x3c/base\x3e";this.parentGrid||(c+=a||"");for(var c=c+'\x3ctable width\x3d"100%" border\x3d"2px" cellpadding\x3d"0" cellspacing\x3d"0"\x3e',h=Math.max(this.rowsBuffer.length,this.rowsCol.length),l=this._cCount,m=this._printWidth(),c=c+'\x3ctr class\x3d"header_row_1"\x3e',g=0;g<l;g++)if(!this._hrrar||!this._hrrar[g]){for(var n=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(g)]:g],q=n.colSpan||1,r=n.rowSpan||1,n=1;n<q;n++)m[g]+=m[n];c+='\x3ctd rowspan\x3d"'+r+'" width\x3d"'+m[g]+'%" style\x3d"background-color:lightgrey;" colspan\x3d"'+q+'"\x3e'+this.getHeaderCol(g)+"\x3c/td\x3e";g+=q-1}c+="\x3c/tr\x3e";for(g=2;g<this.hdr.rows.length;g++)if(_isIE){c+="\x3ctr style\x3d'background-color:lightgrey' class\x3d'header_row_"+g+"'\x3e";m=this.hdr.rows[g].childNodes;for(n=0;n<m.length;n++)this._hrrar&&this._hrrar[m[n]._cellIndex]||(c+=m[n].outerHTML);c+="\x3c/tr\x3e"}else c+="\x3ctr class\x3d'header_row_"+g+"' style\x3d'background-color:lightgrey'\x3e"+(this._fake?this._fake.hdr.rows[g].innerHTML:"")+this.hdr.rows[g].innerHTML+"\x3c/tr\x3e";for(g=0;g<h;g++)if(c+="\x3ctr\x3e",this.rowsCol[g]&&this.rowsCol[g]._cntr)c+=this.rowsCol[g].innerHTML.replace(/<img[^>]*>/gi,"")+"\x3c/tr\x3e";else if(!this.rowsCol[g]||"none"!=this.rowsCol[g].style.display){if(this.rowsCol[g])m=this.rowsCol[g].idd;else if(this.rowsBuffer[g])m=this.rowsBuffer[g].idd;else continue;for(n=0;n<l;n++)if(!this._hrrar||!this._hrrar[n]){if(this.rowsAr[m]&&"TR"==this.rowsAr[m].tagName)var v=this.cells(m,n),q=v._setState?"":v.getContent?v.getContent():v.getImage||v.combo?v.cell.innerHTML:v.getValue();else q=this._get_cell_value(this.rowsBuffer[g],n);var r=this.columnColor[n]?"background-color:"+this.columnColor[n]+";":"",u=this.cellAlign[n]?"text-align:"+this.cellAlign[n]+";":"",x=v.getAttribute("colspan"),c=c+('\x3ctd style\x3d"'+r+u+'" '+(x?'colSpan\x3d"'+x+'"':"")+"\x3e"+(""===q?"\x26nbsp;":q)+"\x3c/td\x3e");x&&(n+=x-1)}c+="\x3c/tr\x3e";this.rowsCol[g]&&this.rowsCol[g]._expanded&&(n=this.cells4(this.rowsCol[g]._expanded.ctrl),c=n.getSubGrid?c+('\x3ctr\x3e\x3ctd colspan\x3d"'+l+'"\x3e'+n.getSubGrid().printView()+"\x3c/td\x3e\x3c/tr\x3e"):c+('\x3ctr\x3e\x3ctd colspan\x3d"'+l+'"\x3e'+this.rowsCol[g]._expanded.innerHTML+"\x3c/td\x3e\x3c/tr\x3e"))}if(this.ftr)for(g=1;g<this.ftr.childNodes[0].rows.length;g++)c+="\x3ctr style\x3d'background-color:lightgrey'\x3e"+(this._fake?this._fake.ftr.childNodes[0].rows[g].innerHTML:"")+this.ftr.childNodes[0].rows[g].innerHTML+"\x3c/tr\x3e";c+="\x3c/table\x3e";if(this.parentGrid)return c;c+=b||"";v=window.open("","_blank");v.document.write(c);v.document.write("\x3cscript\x3ewindow.onerror\x3dfunction(){return true;}\x3c/script\x3e");v.document.close();this._fake&&(this._hrrar=e)};dhtmlXGridObject.prototype._printWidth=function(){for(var a=[],b=0,c=0;c<this._cCount;c++){var e=this.getColWidth(c);a.push(e);b+=e}for(var e=[],g=0,c=0;c<a.length;c++){var h=Math.floor(a[c]/b*100),g=g+h;e.push(h)}e[e.length-1]+=100-g;return e};dhtmlXGridObject.prototype._build_master_row=function(){var a=document.createElement("DIV"),b=["\x3ctable\x3e\x3ctr\x3e"];if(this.cellStyles&&0<this.cellStyles.length)for(var c=0;c<this._cCount;c++)b.push("\x3ctd "+(this.cellStyles[c]?"style\x3d'"+this.cellStyles[c]+"'":"")+"\x3e\x3c/td\x3e");else for(c=0;c<this._cCount;c++)b.push("\x3ctd\x3e\x3c/td\x3e");b.push("\x3c/tr\x3e\x3c/table\x3e");a.innerHTML=b.join("");this._master_row=a.firstChild.rows[0]};dhtmlXGridObject.prototype.setColStyles=function(a){this.cellStyles="string"===typeof a?dhtmlxArray(a.split(this.delim)):a};dhtmlXGridObject.prototype.setColClassName=function(a){this.cellClassNames="string"===typeof a?dhtmlxArray(a.split(this.delim)):a};dhtmlXGridObject.prototype.setColExtypeStore=function(a){this.cellExtypeStores=a};dhtmlXGridObject.prototype.setDataRowHeight=function(a){if((this.dataRowHeight=a)||0==a)this._srdh=parseInt(a)};dhtmlXGridObject.prototype.attachHeader=function(a,b,c,e,g){"string"==typeof a&&(a=this._eSplit(a));"string"==typeof b&&(b=b.split(this.delim));c=c||"_aHead";if(this.hdr.rows.length)if(a)this._createHRow([a,b,e,g],this["_aHead"==c?"hdr":"ftr"]);else{if(this[c])for(a=0;a<this[c].length;a++)this.attachHeader.apply(this,this[c][a])}else this[c]||(this[c]=[]),this[c][this[c].length]=[a,b,c,e,g]};dhtmlXGridObject.prototype._createHRow=function(a,b){if(!b){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative");var c=document.createElement("DIV");c.className="ftr";this.entBox.appendChild(c);var e=document.createElement("TABLE");e.cellPadding=e.cellSpacing=0;_isIE&&8!=_isIE||(e.width="100%",e.style.paddingRight="20px");e.style.marginRight="20px";e.style.tableLayout="fixed";c.appendChild(e);e.appendChild(document.createElement("TBODY"));this.ftr=b=e;for(var c=e.insertRow(0),g=1>=this.hdrLabels.length?a[0].length:this.hdrLabels.length,h=0;h<g;h++)c.appendChild(document.createElement("TH")),c.childNodes[h]._cellIndex=h;_isIE&&8>_isIE?c.style.position="absolute":c.style.height="auto"}var g=a[1],l=a[2],m=a[3],c=document.createElement("TR");b.rows[0].parentNode.appendChild(c);isNaN(window.judgedRowNum)||judgedRowNum++;for(h=0;h<a[0].length;h++)if("#cspan"==a[0][h]){var n=c.cells[c.cells.length-1];n.colSpan=(n.colSpan||1)+1;"subGridHeaderTop"==b.parentNode.parentNode.parentNode.id&&"#cspan"==a[0][h]&&"#cspan"!=a[0][h-1]&&this.setCheckBox(c,g,h,"#master_checkbox")}else if("#rspan"==a[0][h]&&1<b.rows.length){for(var e=b.rows.length-2,q=!1,n=null,r=!1;!q;){for(var n=b.rows[e],v=0;v<n.cells.length;v++){if(n.cells[v]._cellIndexS==h){q=v+1;break}if(h>=n.cells[v]._cellIndexS&&h<n.cells[v]._cellIndexS+n.cells[v].colSpan){r=!0;break}}if(r)break;e--}r||(n=n.cells[q-1],n.rowSpan=(n.rowSpan||1)+1)}else{n=document.createElement("TD");n._cellIndex=n._cellIndexS=h;this._hrrar&&this._hrrar[h]&&!_isIE&&(n.style.display="none");if("object"==typeof a[0][h])n.appendChild(a[0][h]);else if(n.innerHTML=this.forceDivInHeader?"\x3cdiv class\x3d'hdrcell'\x3e"+(a[0][h]||"\x26nbsp;")+"\x3c/div\x3e":a[0][h]||"\x26nbsp;",-1!=(a[0][h]||"").indexOf("#")&&(e=a[0][h].match(/(^|{)#([^}]+)(}|$)/)))if(q="_in_header_"+e[2],this[q])this[q](this.forceDivInHeader?n.firstChild:n,h,a[0][h].split(e[0]));g&&(n.style.cssText=g[h]);l&&l[h]&&(n.className=l[h]);m&&m[h]&&(n._attrs=m[h],n.firstChild._attrs=m[h],(e=this.hwReport.getOriginCellById(m[h].sid))&&-1!=["vmdlink","vmdch"].indexOf(e.getType())&&(n.grid=this,n.firstChild._cellType=e.getType(),e=this.cells4(n.firstChild),(n.idd=e)&&e.setValue(a[0][h])));c.appendChild(n)}_isKHTML&&(b._kTimer&&window.clearTimeout(b._kTimer),b._kTimer=window.setTimeout(function(){b.rows[1].style.display="none";window.setTimeout(function(){b.rows[1].style.display=""},1)},500))};dhtmlXGridObject.prototype._get_custom_json_data=function(a,b){return a.data[b]};dhtmlXGridObject.prototype._process_custom_json=function(a){this._parsing=!0;try{a=a.responseText||a,"string"==typeof a&&(eval("dhtmlx.temp\x3d"+a+";"),a=dhtmlx.temp)}catch(h){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",a.xmlDoc||a,this]),a={rows:[]}}var b=parseInt(a.pos||0),c=parseInt(a.rowcount||0),e=!1;c&&(this.rowsBuffer[c-1]||(this.rowsBuffer.length&&(e=!0),this.rowsBuffer[c-1]=null),c<this.rowsBuffer.length&&(this.rowsBuffer.splice(c,this.rowsBuffer.length-c),e=!0));var c=a,g;for(g in c)"datas"!=g&&this.setUserData("",g,c[g]);if(a.datas)for(g=0;g<a.datas.length;g++)this.rowsBuffer[g+b]||(c=a.datas[g].id||g+b+"",this.rowsBuffer[g+b]={idd:c,data:a.datas[g],_parser:this._process_custom_json_row,_locator:this._get_custom_json_data},this.rowsAr[c]=a.datas[g]);this.rowSpanFlags=[];this.callEvent("onDataReady",[]);e&&this._srnd?(a=this.objBox.scrollTop,this._reset_view(),this.objBox.scrollTop=a):this.render_dataset(b);this._parsing=!1};dhtmlXGridObject.prototype._process_custom_json_row=function(a,b,c){for(var e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};if(b.userdata)for(var g in b.userdata)this.setUserData(a.idd,g,b.userdata[g]);g=this.getUserData(null,"abbrkeys");var h;if(g){h={};for(var l in g)g.hasOwnProperty(l)&&(h[g[l]]=l)}g=[];for(var m=!1,n=!1,q,r,v=this._hasSetFirstRow,u=0;u<b.length;u+=q)if("object"==typeof b[u]&&null!=b[u]){if(h)for(l in b[u])b[u].hasOwnProperty(l)&&h[l]&&(b[u][h[l]]=b[u][l]);this.hwReport.fixedColCount&&u<this.hwReport.fixedColCount&&u+parseInt(b[u].colspan)>this.hwReport.fixedColCount&&b[u+1]&&(b[u+1].colspan=u+parseInt(b[u].colspan)-this.hwReport.fixedColCount,b[u+1].data=b[u].data,b[u+1].sid=b[u].sid,b[u].colspan=this.hwReport.fixedColCount-u);q=parseInt(b[u].colspan||1);r=parseInt(b[u].rowspan||1);var x=(e=this.hwReport.getOriginCellById(b[u][h&&h.sid||"sid"]))&&this.hwReport.aligns.get(e.align),x=x&&"1"==x.escapelabel?!0:!1;if(e){var w=[];0<c&&v?w.push("firstRow"):0<e.rptRow.height&&(this._hasSetFirstRow=!0);e.isFirstCol&&!m?m=!0:w.push("firstCol");e.isLastCol&&!n?n=!0:w.push("lastCol");b[u]["class"]=(b[u]["class"]||"")+" "+e.getClassName(w);b[u].style=(b[u].style||"")+";"+e.getCSS(["border","font","align"]);b[u].type=e.getType();b[u].disabled=e.getIsDisabled()}if(!e||this.rowSpanFlags[u]&&1!=this.rowSpanFlags[u].rowspan)this.rowSpanFlags[u]?this.rowSpanFlags[u].rowspan--:this.rowSpanFlags[u]={rowId:a.idd,rowspan:1};else for(e.childs.push(a.idd+"_"+a.childNodes[u]._cellIndex),b[u].highlight&&(this.hwReport.highlightCells=this.hwReport.highlightCells||[],this.hwReport.highlightCells.push(a.idd+"_"+a.childNodes[u]._cellIndex)),e=0;e<q;e++)this.rowSpanFlags[u+e]={rowId:a.idd,rowspan:r};for(e=0;e<q;e++)b[u+e]._cRowId=this.rowSpanFlags[u+e].rowId,b[u+e]._cIndex=u,b[u+e]._sRowId=a.idd,b[u+e]._sIndex=u+e,a.childNodes[u+e]._attrs=b[u+e],a.childNodes[u+e]._cellType=b[u+e].type?b[u+e].type:"ro",a.childNodes[u+e]._disabled=b[u+e].disabled,g[u+e]=b[u+e].data?this.hwReport.replaceToHtmltag(b[u+e].data,x):""}else a.childNodes[u]._attrs=this.hwReport.getPatchCell(c,u),a.childNodes[u]._cellType="ro",q=1;a._attrs=b;this._fillRow(a,g);return a};dhtmlXGridObject.prototype._process_store_row=function(a,b){for(var c=[],e=0;e<this.columnIds.length;e++)c[e]=b[this.columnIds[e]];for(e=0;e<a.childNodes.length;e++){var g=this.cellAttrs&&this.cellAttrs[e]||{};a.childNodes[e].className=this.cellClassNames&&this.cellClassNames[e]||"";a.childNodes[e]._attrs=g;g=this.hwReport&&this.hwReport.getOriginCellById(g.sid);a.childNodes[e]._disabled=g&&g.getIsDisabled()}a._attrs=b;this._fillRow(a,c)};dhtmlXGridObject.prototype.render_row=function(a){if(!this.rowsBuffer[a])return-1;if(this.rowsBuffer[a]._parser){var b=this.rowsBuffer[a];if(this.rowsAr[b.idd]&&"TR"==this.rowsAr[b.idd].tagName)return this.rowsBuffer[a]=this.rowsAr[b.idd];var c=this._prepareRow(b.idd);this.rowsBuffer[a]=c;this.rowsAr[b.idd]=c;b._parser.call(this,c,b.data,a);this._postRowProcessing(c);return c}return this.rowsBuffer[a]};dhtmlXGridObject.prototype.setColAttrs=function(a){this.cellAttrs=[];for(var b=0;b<a.length;b++)this.cellAttrs[b]=a[b]};dhtmlXGridObject.prototype.setColStyles=function(a){this.cellStyles="string"===typeof a?dhtmlxArray(a.split(this.delim)):a};dhtmlXGridObject.prototype.setColClassName=function(a){this.cellClassNames="string"===typeof a?dhtmlxArray(a.split(this.delim)):a};dhtmlXGridObject.prototype.setColExtypeStore=function(a){this.cellExtypeStores=a};dhtmlXGridObject.prototype.setDataRowHeight=function(a){if((this.dataRowHeight=a)||0==a)this._srdh=parseInt(a)};dhtmlXGridObject.prototype.addRowCustom=function(a,b,c){if(-1==c||"undefined"==typeof c)c=this.rowsBuffer.length;this.rowsBuffer._dhx_insertAt(c,{idd:a,data:b,_parser:this._process_custom_json_row,_locator:this._get_custom_json_data});b=this.render_row(c);c=this._insertRowAt(b,c);this.dragContext||this.callEvent("onRowAdded",[a]);this.pagingOn&&this.changePage(this.currentPage);this._srnd&&this._update_srnd_view();c._added=!0;this._srnd&&!this._fillers&&(this._fillers=[]);this._ahgr&&this.setSizes();this.callEvent("onGridReconstructed",[]);return c};dhtmlXGridObject.prototype.isCheckedAll=function(a){for(var b in this.rowsAr)if(this.rowsAr[b]&&this.rowsAr[b].idd){var c=this.cells(this.rowsAr[b].idd,a);if(c.changeState&&0==c.getValue())return!1}return!0};dhtmlXGridObject.prototype.setDisabled=function(a){this._disabled=0==a?!1:!0};dhtmlXGridObject.prototype.getRowHeight=function(a){return this.rowsAr[a]?this.rowsAr[a].offsetHeight:-1};dhtmlXGridObject.prototype.getRowsHeight=function(){for(var a=[],b=this.noHeader?[]:this.hdr.rows,c=1;c<b.length;c++)a.push(b[c].offsetHeight);for(c=0;c<this.rowsBuffer.length;c++)b=this.rowsBuffer[c],this.rowsAr[b.idd]&&"TR"==this.rowsAr[b.idd].tagName?a.push(this.rowsAr[b.idd].parentNode?this.rowsAr[b.idd].offsetHeight:this._srdh):a.push(this._srdh);return a};dhtmlXGridObject.prototype.getColsWidth=function(){return this._fake?this._fake.cellWidthPX.concat(this.cellWidthPX.slice(this._fake.cellWidthPX.length)).map(function(a){return parseInt(a)}):this.cellWidthPX.map(function(a){return parseInt(a)})};dhtmlXGridObject.prototype.forEachCellsA=function(a,b){for(var c,e=0;e<this._cCount;e+=c){var g=this.cells(a,e);c=g.cell.colSpan;b.apply(this,[g,a,e])}};dhtmlXGridObject.prototype.forEachCellsB=function(a,b,c){var e=[];c=c||this.rowsBuffer.length;for(b=b||0;b<c;b++)for(var g,h=0;h<this._cCount;h+=g)if(e[h])--e[h],g=1;else{var l=this.cells2(b,h);if(1<l.cell.rowSpan&&(e[h]=l.cell.rowSpan-1,1<l.cell.colSpan))for(g=1;g<l.cell.colSpan;g++)e[h+g]=l.cell.rowSpan-1;g=l.cell.colSpan;a.apply(this,[l,b,h])}};dhtmlXGridObject.prototype.enabledSelecteStates=function(a){this.rowSelecteStates=dhx4.s2b(a)};dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL});this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var a=this;this.aToolBar.attachEvent("onClick",function(b){b=b.split("_");switch(b[0]){case "leftabs":a.changePage(1);break;case "left":a.changePage(a.currentPage-1);break;case "rightabs":a.changePage(99999);break;case "right":a.changePage(a.currentPage+1);break;case "perpagenum":if(b[1]===this.undefined)break;a.rowsBufferOutSize=parseInt(b[1]);a.changePage();a.aToolBar.setItemText("perpagenum",b[1]+" "+a.i18n.paging.perpage);break;case "pages":b[1]!==this.undefined&&(a.changePage(b[1]),a.aToolBar.setItemText("pages",a.i18n.paging.page+b[1]))}});this._WTDef[0]&&(this.aToolBar.addButton("leftabs",NaN,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",NaN,null,"ar_left.gif","ar_left_dis.gif"));this._WTDef[1]&&(this.aToolBar.addText("results",NaN,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results"));this._WTDef[0]&&(this.aToolBar.addButton("right",NaN,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",NaN,null,"ar_right_abs.gif","ar_right_abs_dis.gif"));this._WTDef[2]&&("dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",NaN,"select page",[],"paging_pages.gif",null,!1,!0,10));var b;if(b=this._WTDef[3]){"dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator();this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],"paging_rows.gif",null,!1,!0,10);"object"!=typeof b&&(b=[5,10,15,20,25,30]);for(var c={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],e=0;e<b.length;e++)this.aToolBar.addListOption("perpagenum","perpagenum_"+b[e],NaN,"button","\x3cspan style\x3d'padding: 0px "+c+"px 0px 0px;'\x3e"+b[e]+" "+this.i18n.paging.perpage+"\x3c/span\x3e","paging_page.gif")}return this.aToolBar};dhtmlXGridCellObject.prototype.doLayout=function(){};dhtmlXWindows.prototype.createConfirmWindow=function(a,b,c,e,g,h){var l={};if(1==arguments.length&&"object"==typeof a)l=a;else{l.id=a;l.left=b;l.top=c;l.width=e;l.height=g;if("undefined"==typeof l.id||null==l.id)l.id=window.dhx4.newId();for(;null!=this.w[l.id];)l.id=window.dhx4.newId()}null==l.left&&(l.left=0);null==l.top&&(l.top=0);l.move=null!=l.move&&0==window.dhx4.s2b(l.move)?!1:null!=l.deny_move&&1==window.dhx4.s2b(l.deny_move)?!1:!0;l.park=null!=l.park&&0==window.dhx4.s2b(l.park)?!1:null!=l.deny_park&&1==window.dhx4.s2b(l.deny_park)?!1:!0;l.resize=null!=l.resize&&0==window.dhx4.s2b(l.resize)?!1:null!=l.deny_resize&&1==window.dhx4.s2b(l.deny_resize)?!1:!0;l.keep_in_viewport=null!=l.keep_in_viewport&&window.dhx4.s2b(l.keep_in_viewport);l.modal=null!=l.modal&&window.dhx4.s2b(l.modal);l.center=null!=l.center&&window.dhx4.s2b(l.center);l.text=null!=l.text?l.text:null!=l.caption?l.caption:"dhtmlxWindow";l.header=!(null!=l.header&&0==window.dhx4.s2b(l.header));var m=document.createElement("DIV");m.className="dhxwin_active";m.style.viosibility="hidden";this.vp.appendChild(m);m._isWindow=!0;m._idd=l.id;var n=document.createElement("DIV");n.className="dhxwin_hdr";n.style.zIndex=0;n.innerHTML="\x3cdiv class\x3d'dhxwin_icon'\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxwin_text'\x3e\x3cdiv class\x3d'dhxwin_text_inside'\x3e"+l.text+"\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'dhxwin_btns'\x3e\x3c/div\x3e";m.appendChild(n);n.onselectstart=function(a){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};n.oncontextmenu=function(a){a=a||event;a.cancelBubble=!0;return!1};n._isWinHdr=!0;n.firstChild._isWinIcon=!0;var q=document.createElement("DIV");q.className="dhxwin_brd";m.appendChild(q);var r=document.createElement("DIV");r.className="dhxwin_ftr";r.style.zIndex=0;r.innerHTML="\x3cdiv class\x3d'dhxwin_btns'\x3e\x3c/div\x3e";m.appendChild(r);var v=document.createElement("DIV");v.className="dhxwin_fr_cover";v.innerHTML="\x3ciframe class\x3d'dhxwin_fr_cover_inner' frameborder\x3d'0' border\x3d'0'\x3e\x3c/iframe\x3e\x3cdiv class\x3d'dhxwin_fr_cover_inner'\x3e\x3c/div\x3e";m.appendChild(v);this.w[l.id]={win:m,hdr:n,ftr:r,brd:q,fr_cover:v,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,footer:!0,text:l.text,keep_in_vp:l.keep_in_viewport,allow_move:l.move,allow_park:l.park,allow_resize:l.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var m={help:{title:"Help",visible:!1},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}},u;for(u in m)q=new dhtmlXWindowsButton(this,l.id,u,m[u].title,!1),0==m[u].visible&&q.hide(),n.lastChild.appendChild(q.button),this.w[l.id].b[u]=q,q=null;this._winAdjustTitle(l.id);this.w[l.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[l.id].conf.z_id);n=new dhtmlXWindowsCell(l.id,this);this.w[l.id].win.insertBefore(n.cell,v);this.w[l.id].cell=n;"function"==typeof window.addEventListener?(this.w[l.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[l.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[l.id].win.addEventListener("dblclick",this._winOnMouseDown,!1)):(this.w[l.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[l.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&this.w[l.id].win.attachEvent("ondblclick",this._winOnMouseDown));this._winInitFRM(l.id);this._winSetPosition(l.id,l.left,l.top);this._winSetSize(l.id,l.width,l.height);this._winMakeActive(l.id);1==l.center&&this.w[l.id].cell.center();1==l.modal&&this.w[l.id].cell.setModal(!0);0==l.header&&this.w[l.id].cell.hideHeader();r=m=n=q=v=n=null;return this.w[l.id].cell};window.dhtmlXCalendarObject&&(dhtmlXCalendarObject.prototype.lang="ch",dhtmlXCalendarObject.prototype.langData.ch={dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),monthesSNames:"\u4e00 \u4e8c \u4e09 \u56db \u4e94 \u516d \u4e03 \u516b \u4e5d \u5341 \u5341\u4e00 \u5341\u4e8c".split(" "),daysFNames:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),daysSNames:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),weekstart:1,weekname:"\u5468",today:"\u4eca\u5929",clear:"\u6e05\u9664"});dhtmlXGridObject.prototype._fixHiddenRowsAll=function(a,b,c,e,g){g=g||"_cellIndex";var h=a.rows.length;if(!this.hwReport||b<this.hwReport.fixedColCount&&!this.userSetColumnHidden)for(var l=0;l<h;l++){var m=a.rows[l].childNodes;if(m.length!=this._cCount)for(var n=0;n<m.length;n++){if(m[n][g]==b){m[n].style[c]=e;break}}else m[b].style[c]=e}else for(g=g||"_cellIndex",h=a.rows.length,l=0;l<h;l++)if(m=a.rows[l].childNodes,this.hwReport.oldColWidths&&b<m.length&&(m[b].style.width=this.hwReport.oldColWidths[b]+"px"),m.length!=this._cCount)for(n=0;n<m.length;n++)if(1==m.length&&m[n]._cellIndex!=m[n]._cellIndexS&&0==m[n]._cellIndexS&&""==e&&(m[n].colSpan+=1),m[n][g]==b)if(1<m[n].colSpan&&"none"==e)a&&a.grid&&a.grid._split_later&&a.grid._split_later>b?f_width&&0==f_width&&(--m[n].colSpan,m[n].style[c]=""):(--m[n].colSpan,m[n].style[c]="");else{if(m[n].style[c]=e,""==e)if(m[n+1]){if(1<m[n+1][g]-m[n][g])if(1<l&&a.rows[l-1]&&a.rows[l-1].childNodes){var q=a.rows[l-1].childNodes;1==q.length&&(m[n].colSpan=m[n+1][g]-m[n][g]);q[n]&&q[n][g]==m[n][g]&&q[n+1]&&q[n+1][g]==m[n+1][g]?m[n].colSpan=m[n+1][g]-m[n][g]:void 0==q[n]&&void 0==q[n+1]?m[n].colSpan=m[n+1][g]-m[n][g]:q[n]&&q[n][g]<b&&q[n+1]&&q[n+1][g]<b&&(m[n].colSpan=m[n+1][g]-m[n][g])}else m[n].colSpan=m[n+1][g]-m[n][g]}else n==m.length-1&&m[n]._cellIndex!=m[n]._cellIndexS&&(m[n].colSpan=m[n]._cellIndex+1-m[n][g])}else if(1<m[n].colSpan&&"none"==e)m[n][g]<b&&m[n][g]+m[n].colSpan-1>=b?a&&a.grid&&a.grid._split_later&&a.grid._split_later>b?f_width&&0==f_width?(--m[n].colSpan,m[n].style[c]=""):m[n].style[c]=e:(--m[n].colSpan,m[n].style[c]=""):m[n][g]<b&&m[n+1]&&1<m[n+1][g]-m[n][g]&&m[n+1][g]>b&&1<m[n].colSpan&&(a&&a.grid&&a.grid._split_later&&a.grid._split_later>b?f_width&&0==f_width&&(--m[n].colSpan,m[n].style[c]=""):(--m[n].colSpan,m[n].style[c]=""));else if(m[n][g]<b&&m[n+1]){if(1<m[n+1][g]-m[n][g])if(""==e){if(m[n+1][g]>b)1<l&&a.rows[l-1]&&a.rows[l-1].childNodes&&(q=a.rows[l-1].childNodes,1==q.length&&(m[n].colSpan=m[n+1][g]-m[n][g]),q[n]&&q[n][g]==m[n][g]&&q[n+1]&&q[n+1][g]==m[n+1][g]?m[n].colSpan=m[n+1][g]-m[n][g]:void 0==q[n]&&void 0==q[n+1]?m[n].colSpan=m[n+1][g]-m[n][g]:q[n]&&q[n][g]<b&&q[n+1]&&q[n+1][g]<b&&(m[n].colSpan=m[n+1][g]-m[n][g]));else if(m[n+1][g]==b)continue;m[n].style[c]="";n==m.length-1&&1<m[n].colSpan&&m[n][g]+m[n].colSpan-1<m.length-1&&(m[n].colSpan=m.length-m[n][g])}else m[n][g]<b&&m[n][g]+m[n+1][g]-m[n][g]-1>=b&&(m[n].style[c]=e)}else m[n][g]<b&&void 0==m[n+1]&&""==e&&(1<l&&a.rows[l-1]&&a.rows[l-1].childNodes&&(q=a.rows[l-1].childNodes,1==q.length?m[n].colSpan+=1:q.lastChild&&(q.lastChild[g]>b||q.lastChild[g]<b&&q.lastChild[g]+q.lastChild.colSpan-1>b)&&(m[n].colSpan+=1)),m[n].style[c]="");else m[b].style[c]=e};dhtmlXGridObject.prototype.changeHeaderHeight=function(){if(this.hdr){var a=this.hdr.parentNode;a&&this.hdr.offsetHeight>a.offsetHeight&&(a.style.height=this.hdr.offsetHeight+"px")}this._fake&&0!=this._fake.hdr.rows.length&&this._fake.hdr&&(a=this._fake.hdr.parentNode)&&this._fake.hdr.offsetHeight>a.offsetHeight&&(a.style.height=this._fake.hdr.offsetHeight+"px")};dhtmlXGridObject.prototype.setColumnHiddenExp=function(a,b){this.userSetColumnHidden=!0;this._fake&&(this._fake.userSetColumnHidden=!0);this.setColumnHidden(a,b);this._fake?this.setLockCellBorderClassExp(a,b):this.setCellBorderClassExp(a,b)};dhtmlXGridObject.prototype.hideColNextCol=function(a,b){var c=!0;this._fake&&(c=!1);if(this._cCount==b.length)c=this.getNextColIndex(a,c,b);else{if(this._fake){for(var c=!0,e=0;e<this._fake._cCount;e++)if(0<this._fake.cellWidthPX[e]){c=!1;a=e;break}if(c)for(e=0;e<this._cCount;e++)0<this.cellWidthPX[e]&&(a=e)}c=this.getMergedGcellColIndex(a,b)}return c};dhtmlXGridObject.prototype.getMergedGcellColIndex=function(a,b){for(var c=a,e=!0,g=0;g<a;g++)if(this._fake)if(this._fake._cCount>g){if(0<this._fake.cellWidthPX[g]){c=g;e=!1;break}}else{if(0<this.cellWidthPX[g]){c=g;e=!1;break}}else if(0<this.cellWidthPX[g]){c=g;e=!1;break}if(e)for(e=0;e<b.length;e++){if(b[e]._cellIndex<=a&&e+1<b.length&&b[e+1]._cellIndex>a){for(var g=!1,h=b[e]._cellIndex;h<b[e+1]._cellIndex;h++)if(this._fake)if(h<this._fake._cCount){if(0<this._fake.cellWidthPX[h]){g=!0;break}}else{if(0<this.cellWidthPX[h]){g=!0;break}}else if(0<this.cellWidthPX[h]){g=!0;break}if(g)c=e;else for(g=b[e+1]._cellIndex;g<this.cellWidthPX.length;g++)if(this._fake)if(g>this._fake._cCount){if(0<this._fake.cellWidthPX[g]){c=this.getMergedGcellColIndex(g,b);break}}else{if(0<this.cellWidthPX[g]){c=this.getMergedGcellColIndex(g,b);break}}else if(0<this.cellWidthPX[g]){c=this.getMergedGcellColIndex(g,b);break}}}else c=this.getMergedGcellColIndex(c,b);return c};dhtmlXGridObject.prototype.getNextColIndex=function(a,b,c){var e,g=!0;if(b){for(b=0;b<a;b++)if(0<this.cellWidthPX[b]){e=b;g=!1;break}g&&(e=a+1);this.cellWidthPX&&this.cellWidthPX.length>e&&0==this.cellWidthPX[e]&&(e=this.hideColNextCol(e,c))}else if(a>=this._fake._cCount){g=!0;for(b=0;b<a;b++)if(0<this.cellWidthPX[b]){e=b;g=!1;break}g&&(e=a+1);this.cellWidthPX&&this.cellWidthPX.length>e&&0==this.cellWidthPX[e]&&(e=this.hideColNextCol(e,c))}else{a=this._fake._cCount;g=!0;for(b=0;b<a;b++)if(0<this._fake.cellWidthPX[b]){e=b;g=!1;break}g&&(e=a);this._fake.cellWidthPX&&this._fake.cellWidthPX.length>e&&0==this._fake.cellWidthPX[e]&&(e=this.hideColNextCol(e,c))}return e};dhtmlXGridObject.prototype.setCellBorderClassExp=function(a,b){if(b){if(this.removeCFirstClass(),!(0<this.cellWidthPX[0]&&0<=a)){for(var c=0;c<this.hdr.rows.length;c++){var e=this.hdr.rows[c];if(e.children&&0<e.children.length){var g=this.hideColNextCol(a,e.children);this._fake&&this.hwReport.floatTitleContainer&&0==g&&(g=1);vmd(e.children[g]).addClass("c-first")}}for(c=0;c<this.obj.rows.length;c++)e=this.obj.rows[c],e.children&&0<e.children.length&&(g=this.hideColNextCol(a,e.children),vmd(e.children[g]).addClass("c-first"))}}else{this.removeCFirstClass();for(c=0;c<this._cCount;c++)if(0<this.cellWidthPX[c]){a=c;break}1<=a&&--a;this.setCellBorderClassExp(a,!0)}};dhtmlXGridObject.prototype.setLockCellBorderClassExp=function(a,b){if(b){this.removeCFirstClass();for(var c=0;c<this._fake.hdr.rows.length;c++){var e=this._fake.hdr.rows[c];if(e.children&&0<e.children.length){var g=this.hideColNextCol(a,e.children);g>=this._fake._cCount?this.setCellBorderClassExp(g,!1):vmd(e.children[g]).addClass("c-first")}}for(c=0;c<this._fake.obj.rows.length;c++)e=this._fake.obj.rows[c],e.children&&0<e.children.length&&(g=this.hideColNextCol(a,e.children),g>=this._fake._cCount?this.setCellBorderClassExp(g,!1):vmd(e.children[g]).addClass("c-first"))}else{this.removeCFirstClass();c=!0;for(e=0;e<this._fake._cCount;e++)if(0<this._fake.cellWidthPX[e]){a=e;c=!1;break}c?this.setCellBorderClassExp(a,!0):(1<=a&&--a,this.setLockCellBorderClassExp(a,!0))}};dhtmlXGridObject.prototype.removeCFirstClass=function(){if(this._fake){for(var a=0;a<this._fake.hdr.rows.length;a++){var b=this._fake.hdr.rows[a];if(b.children&&0<b.children.length)for(var c=0;c<b.children.length;c++)0<c&&vmd(b.children[c]).hasClass("c-first")&&vmd(b.children[c]).removeClass("c-first")}for(a=0;a<this._fake.obj.rows.length;a++)if(b=this._fake.obj.rows[a],b.children&&0<b.children.length)for(c=0;c<b.children.length;c++)0<c&&vmd(b.children[c]).hasClass("c-first")&&vmd(b.children[c]).removeClass("c-first")}for(a=0;a<this.hdr.rows.length;a++)if(b=this.hdr.rows[a],b.children&&0<b.children.length)for(c=0;c<b.children.length;c++)0<c&&vmd(b.children[c]).hasClass("c-first")&&vmd(b.children[c]).removeClass("c-first");for(a=0;a<this.obj.rows.length;a++)if(b=this.obj.rows[a],b.children&&0<b.children.length)for(c=0;c<b.children.length;c++)0<c&&vmd(b.children[c]).hasClass("c-first")&&vmd(b.children[c]).removeClass("c-first")};dhtmlXGridObject.prototype.configRefresh=function(a){hwDas.ajax({type:"get",url:vmd.virtualPath+"/"+a.xmlModelXml,dataType:"json",success:function(b){new HwRao(vmdSettings.vmdReportIp,"report");vmd.isCheckFileExist("/"+a.configFile.rptHeaderPath,function(c){if(c&&c.hiddenFields&&0<c.hiddenFields.length){b.main.body.columns.oldwidth=dhx4._copyObj(b.main.body.columns.width);b.main.body.columns.hiddenFields=c.hiddenFields;for(var e=0;e<c.hiddenFields.length;e++)b.main.body.columns.width[c.hiddenFields[e]]=0}a.loadJSON(Ext.encode(b),function(){a.headerdefine=b;a.vmdreport.myMask.hide()});a.vmdreport.myMask.hide()},!0,vmd.virtualPath,function(){a.loadJSON(Ext.encode(b),function(){a.headerdefine=b;a.vmdreport.myMask.hide()});a.vmdreport.myMask.hide();return!0})},error:function(){a.vmdreport.myMask.hide();a.vmdreport.loading=!1;Ext.Msg.alert("\u9519\u8bef\u4fe1\u606f","\u627e\u4e0d\u5230\u6a21\u677f\u6587\u4ef6\uff0c\u8def\u5f84\u4e3a\uff1a"+a.xmlModelXml,function(){});return!0}})};dhtmlXGridObject.prototype.setCheckBox=function(a,b,c,e){a=a.lastChild;a._cellIndex=a._cellIndexS=c-1;a.innerHTML="\x3cdiv class\x3d'hdrcell'\x3e"+a.innerText+"\x3c/div\x3e";this._hrrar&&this._hrrar[c]&&!_isIE&&(a.style.display="none");if(-1!=(e||"").indexOf("#")){var g=e.match(/(^|{)#([^}]+)(}|$)/);if(g){var h="_in_header_"+g[2];if(this[h])this[h](a.firstChild,c,e.split(g[0]))}}b&&(a.style.cssText=b[c-1])};dhtmlXGridObject.prototype._in_header_master_checkbox=function(a,b,c){a.innerText="#master_checkbox"==a.innerText?"":a.innerText+"\x3cbr/\x3e";a.innerHTML=b<lockColNum?c[0]+a.innerText+"\x3cinput type\x3d'checkbox' disabled/\x3e"+c[1]:c[0]+a.innerText+"\x3cinput type\x3d'checkbox'/\x3e"+c[1];var e=this;a.getElementsByTagName("input")[0].onclick=function(b){b=a.parentNode.parentNode.rowIndex;var c=a.parentNode._cellIndex,g=!0;this.checked||(g=!1);b!=a.parentNode.parentNode.parentNode.childNodes[a.parentNode.parentNode.parentNode.childNodes.length-1].rowIndex?g?e.setChecked(c,a,b):e.setNoChecked(c,a,b):g?e.setDisperseRelateColsChecked(c,a,b):e.setDisperseRelateColsNoChecked(c,a,b)}};dhtmlXGridObject.prototype.setDisperseRelateColsChecked=function(a,b,c){b=b.parentNode.parentNode.parentNode.childNodes;for(var e=this.hwReport.headers,g=0;g<e.length;g++){var h=e[g];if("string"==typeof h[0]){var l=h[0].split(",");h[0]=l}}c=parseInt(c);h=a=parseInt(a);this.delHiddenFields(a);if(c==b.length-1){a=this.getRowStar(c,h,e);for(var l=this.getRowEnd(c,h,e),m=0,n=!1,g=a;g<=l;g++)b[c].childNodes[g].getElementsByTagName("input")[0].checked&&(n=!0);if(n)for(var q=0;q<=l;q++)e[c-2][0][q].match(/^(?!#cspan|#rspan).*/i)&&e[c-2][0][q].match(/^(?!#cspan|#rspan).*/i)[0]&&(q>=a&&q<=l&&m<b[c-2].childNodes.length&&b[c-2].childNodes[m].getElementsByTagName("input")[0]&&(b[c-2].childNodes[m].getElementsByTagName("input")[0].checked=!0),m++);else for(q=0;q<=l;q++)e[c-2][0][q].match(/[^#cspan|#rspan]*/gi)&&e[c-2][0][q].match(/[^#cspan|#rspan]*/gi)[0]&&(q>=a&&q<=l&&m<b[c-2].childNodes.length&&(b[c-2].childNodes[m].getElementsByTagName("input")[0].checked=!1),m++)}for(g=c-3;2<=g;g--){l=a=0;for(c=h;0<=c;c--)if(e[g-2][0][c].match(/#[^c]span|[^#cspan]*/)&&e[g-2][0][c].match(/#[^c]span|[^#cspan]*/)[0]){a=c;break}for(c=h+1;c<e[g][0].length;c++)if(e[g-2][0][c].match(/#[^c]span|[^#cspan]*/)&&e[g-2][0][c].match(/#[^c]span|[^#cspan]*/)[0]){l=c-1;break}else l=c;h==e[g][0].length-1&&(l=h);for(q=m=0;q<=l;q++)e[g-1][0][q].match(/[^#cspan|#rspan]*/gi)&&e[g-1][0][q].match(/[^#cspan|#rspan]*/gi)[0]&&(q>=a&&q<=l&&b[g+1].childNodes[m].getElementsByTagName("input")[0]&&b[g+1].childNodes[m].getElementsByTagName("input")[0].checked&&(n=!0),m++);if(n)for(q=c=0;q<=l;q++)m=e[g-2][0][q],""==e[g-2][0][q]&&(e[g-2][0][q]="true"),e[g-2][0][q].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][q].match(/[^#cspan|#rspan]*/gi)[0]&&(e[g-2][0][q]=m,q>=a&&q<=l&&b[g].childNodes[c].getElementsByTagName("input")[0]&&(b[g].childNodes[c].getElementsByTagName("input")[0].checked=!0),c++);else for(q=c=0;q<=l;q++)e[g-2][0][q].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][q].match(/[^#cspan|#rspan]*/gi)[0]&&(q>=a&&q<=l&&b[g].childNodes[c].getElementsByTagName("input")[0]&&(b[g].childNodes[c].getElementsByTagName("input")[0].checked=!1),c++)}};dhtmlXGridObject.prototype.setDisperseRelateColsNoChecked=function(a,b,c){b=b.parentNode.parentNode.parentNode.childNodes;for(var e=this.hwReport.headers,g=0;g<e.length;g++){var h=e[g];if("string"==typeof h[0]){var l=h[0].split(",");h[0]=l}}c=parseInt(c);h=a=parseInt(a);this.addHiddenFields(a);if(c==b.length-1){var m,n;for(a=h;0<=a;a--)if(e[c-2][0][a].match(/#[^c]span|[^#cspan]*/)&&e[c-2][0][a].match(/#[^c]span|[^#cspan]*/)[0]){m=a;break}for(a=h+1;a<e[c-2][0].length;a++)if(e[c-2][0][a].match(/#[^c]span|[^#cspan]*/)&&e[c-2][0][a].match(/#[^c]span|[^#cspan]*/)[0]){n=a-1;break}var l=0,q=!1;for(a=m;a<=n;a++)b[c].childNodes[a].getElementsByTagName("input")[0].checked&&(q=!0);if(q)for(a=0;a<=n;a++)e[c-2][0][a].match(/^(?!#cspan|#rspan).*/i)&&e[c-2][0][a].match(/^(?!#cspan|#rspan).*/i)[0]&&(a>=m&&a<=n&&b[c-2].childNodes[l].getElementsByTagName("input")[0]&&(b[c-2].childNodes[l].getElementsByTagName("input")[0].checked=!0),l++);else for(a=0;a<=n;a++)e[c-2][0][a].match(/^(?!#cspan|#rspan).*/i)&&e[c-2][0][a].match(/^(?!#cspan|#rspan).*/i)[0]&&(a>=m&&a<=n&&l<b[c-2].childNodes.length&&b[c-2].childNodes[l].getElementsByTagName("input")[0]&&(b[c-2].childNodes[l].getElementsByTagName("input")[0].checked=!1),l++)}for(g=c-3;2<=g;g--){for(a=h;0<=a;a--)if(e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)[0]){m=a;break}for(a=h+1;a<e[g-2][0].length;a++)if(e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)[0]){n=a-1;break}else n=a;h==e[g][0].length-1&&(n=h);for(a=l=0;a<=n;a++)e[g-1][0][a].match(/^(?!#cspan|#rspan).*/i)&&e[g-1][0][a].match(/^(?!#cspan|#rspan).*/i)[0]&&(a>=m&&a<=n&&l<b[g+1].childNodes.length&&b[g+1].childNodes[l].getElementsByTagName("input")[0]&&b[g+1].childNodes[l].getElementsByTagName("input")[0].checked&&(q=!0),l++);for(a=m;a<=n;a++)b[c].childNodes[a].getElementsByTagName("input")[0].checked&&(q=!0);if(q)for(a=l=0;a<=n;a++)e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)[0]&&(a>=m&&a<=n&&b[g].childNodes[l].getElementsByTagName("input")[0]&&(b[g].childNodes[l].getElementsByTagName("input")[0].checked=!0),l++);else{var l=0,r;for(a=0;a<=n;a++)r=e[g-2][0][a],""==e[g-2][0][a]&&(e[g-2][0][a]="true"),e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][a].match(/[^#cspan|#rspan]*/gi)[0]&&(e[g-2][0][a]=r,a>=m&&a<=n&&b[g].childNodes[l].getElementsByTagName("input")[0]&&(b[g].childNodes[l].getElementsByTagName("input")[0].checked=!1),l++)}}};dhtmlXGridObject.prototype.setChecked=function(a,b,c){b=b.parentNode.parentNode.parentNode.childNodes;for(var e=this.hwReport.headers,g=0;g<e.length;g++){var h=e[g];if("string"==typeof h[0]){var l=h[0].split(",");h[0]=l}}l=1;c=parseInt(c);a=parseInt(a);for(g=a+1;g<e[c-2][0].length;g++)if(e[c-2][0][g].match(/#cspan*/)&&e[c-2][0][g].match(/#cspan*/)[0])l++;else break;h=a;l=a+l-1;for(g=c-1;g<e.length-1;g++){a=0;for(var m=h;m<=l;m++)e[g][0][m].match(/^(?!#cspan|#rspan).*/i)&&e[g][0][m].match(/^(?!#cspan|#rspan).*/i)[0]&&(b[g+2].childNodes[a].getElementsByTagName("input")[0]&&(b[g+2].childNodes[a].getElementsByTagName("input")[0].checked=!0),a++)}for(g=h;g<=l;g++)b[b.length-1].childNodes[g].getElementsByTagName("input")[0]&&(b[b.length-1].childNodes[g].getElementsByTagName("input")[0].checked=!0),this.delHiddenFields(g);for(g=c;2<=g;g--)for(a=0,m=h;0<=m;m--)if(e[g-2][0][m].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][m].match(/[^#cspan|#rspan]*/gi)[0]){c=m;for(m=0;m<=c;m++)l=e[g-2][0][m],""==e[g-2][0][m]&&(e[g-2][0][m]="true"),e[g-2][0][m].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][m].match(/[^#cspan|#rspan]*/gi)[0]&&(e[g-2][0][m]=l,a++);b[g].childNodes[a-1].getElementsByTagName("input")[0]&&(b[g].childNodes[a-1].getElementsByTagName("input")[0].checked=!0);break}};dhtmlXGridObject.prototype.setNoChecked=function(a,b,c){b=b.parentNode.parentNode.parentNode.childNodes;for(var e=this.hwReport.headers,g=0;g<e.length;g++){var h=e[g];if("string"==typeof h[0]){var l=h[0].split(",");h[0]=l}}var m=1;c=parseInt(c);a=parseInt(a);l=b.length-1;for(g=a+1;g<e[c-2][0].length;g++)if(e[parseInt(c)-2][0][g].match(/#cspan*/)&&e[parseInt(c)-2][0][g].match(/#cspan*/)[0])m++;else break;h=a;a=a+m-1;for(g=c-1;g<e.length-1;g++)for(var m=0,n=h;n<=a;n++)e[g][0][n].match(/^(?!#cspan|#rspan).*/i)&&e[g][0][n].match(/^(?!#cspan|#rspan).*/i)[0]&&(b[g+2].childNodes[m].getElementsByTagName("input")[0]&&(b[g+2].childNodes[m].getElementsByTagName("input")[0].checked=!1),m++);for(g=h;g<=a;g++)b[b.length-1].childNodes[g].getElementsByTagName("input")[0]&&(b[b.length-1].childNodes[g].getElementsByTagName("input")[0].checked=!1),this.addHiddenFields(g);for(g=c-1;2<=g;g--){for(var m=0,q,r,n=h;0<=n;n--)if(e[g-2][0][n].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][n].match(/[^#cspan|#rspan]*/gi)[0]){q=n;break}for(c=a;c<e[g-2][0].length;c++)if(e[g-2][0][c].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][c].match(/[^#cspan|#rspan]*/gi)[0]){r=c-1;break}else r=c;c=!1;for(n=0;n<=r;n++)e[g-1][0][n].match(/[^#cspan|#rspan]*/gi)&&e[g-1][0][n].match(/[^#cspan|#rspan]*/gi)[0]&&(n>=q&&n<=r&&b[g+1].childNodes[m].getElementsByTagName("input")[0]&&b[g+1].childNodes[m].getElementsByTagName("input")[0].checked&&(c=!0),m++);for(m=q;m<=r;m++)b[l].childNodes[m].getElementsByTagName("input")[0].checked&&(c=!0);m=0;if(c)for(n=0;n<=r;n++)e[g-2][0][n].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][n].match(/[^#cspan|#rspan]*/gi)[0]&&(n>=q&&n<=r&&b[g].childNodes[m].getElementsByTagName("input")[0]&&(b[g].childNodes[m].getElementsByTagName("input")[0].checked=!0),m++);else for(n=0;n<=r;n++)c=e[g-2][0][n],""==e[g-2][0][n]&&(e[g-2][0][n]="true"),e[g-2][0][n].match(/[^#cspan|#rspan]*/gi)&&e[g-2][0][n].match(/[^#cspan|#rspan]*/gi)[0]&&(e[g-2][0][n]=c,n>=q&&n<=r&&(b[g].childNodes[m].getElementsByTagName("input")[0].checked=!1),m++)}};dhtmlXGridObject.prototype.addHiddenFields=function(a){var b=!1;if(hiddenFields){for(var c=0;c<hiddenFields.length;c++)hiddenFields[c]==a&&(b=!0);b||hiddenFields.push(a)}else hiddenFields.push(a);gridHeaderBottom&&gridHeaderBottom.grid.setColumnHiddenForHeader(a,!0)};dhtmlXGridObject.prototype.getRowStar=function(a,b,c){for(;0<=b;b--)if(c[a-3][0][b].match(/#[^c]span|[^#cspan]*/)&&c[a-3][0][b].match(/#[^c]span|[^#cspan]*/)[0])return rowStar=b};dhtmlXGridObject.prototype.getRowEnd=function(a,b,c){var e=0;for(a-=3;0<=a;a--){for(var g=b;g<c[a][0].length;g++)if(c[a][0][g].match(/#[^c]span|[^#cspan]*/)&&c[a][0][g].match(/#[^c]span|[^#cspan]*/)[0])return b=g;e++}};dhtmlXGridObject.prototype.delHiddenFields=function(a){for(var b=0;b<hiddenFields.length;b++)hiddenFields[b]==a&&hiddenFields.splice(b,1);gridHeaderBottom&&gridHeaderBottom.grid.setColumnHiddenForHeader(a,!1)};dhtmlXGridObject.prototype.setColumnHiddenForHeader=function(a,b){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[a]=b;this.fldSorted&&this.fldSorted.cellIndex==a&&b&&(this.sortImg.style.display="none");if(convertStringToBoolean(b)){if(!this._hrrar)this._hrrar=[];else if(this._hrrar[a])return;this._hrrar[a]="display:none;";this._hideShowColumnForHeader(a,"none")}else{if(!this._hrrar||!this._hrrar[a])return;this._hrrar[a]="";this._hideShowColumnForHeader(a,"")}this.fldSorted&&this.fldSorted.cellIndex==a&&!b&&(this.sortImg.style.display="inline");this.setSortImgPos();this.setSizes();this.callEvent("onColumnHidden",[a,b])};function convertStringToBoolean(a){"string"==typeof a&&(a=a.toLowerCase());switch(a){case "1":case "true":case "yes":case "y":case 1:case !0:return!0;default:return!1}}dhtmlXGridObject.prototype._hideShowColumnForHeader=function(a,b){if("none"==b){this.hdr.rows[0].cells[a]._oldWidth=this.hdr.rows[0].cells[a].style.width||this.initCellWidth[a]+"px";this.hdr.rows[0].cells[a]._oldWidthP=this.cellWidthPC[a];this.obj.rows[0].cells[a].style.width="0px";var c={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&c.rows.push(this.rowsAr[a])});this._fixHiddenRowsAll(c,a,"display","none");this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"none");_isOpera&&9>_OperaRv||_isKHTML||_isFF?this._fixHiddenRowsAll(this.hdr,a,"display","none","_cellIndexS"):this._fixHiddenRowsAll(this.hdr,a,"display","none");this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","none");this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","nowrap","_cellIndexS");this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth));this.cellWidthPX[a]&&(this.cellWidthPX[a]=0);this.cellWidthPC[a]&&(this.cellWidthPC[a]=0)}else if(this.hdr.rows[0].cells[a]._oldWidth){var e=this.hdr.rows[0].cells[a];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","","_cellIndexS");this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","");c={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&c.rows.push(this.rowsAr[a])});this._fixHiddenRowsAll(c,a,"display","");this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"");this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","normal","_cellIndexS");e._oldWidthP&&(this.cellWidthPC[a]=e._oldWidthP);e._oldWidth&&(this.cellWidthPX[a]=parseInt(e._oldWidth))}this.setSizeForHeader();_isIE||_isFF||(this.obj.border=1,this.obj.border=0)};dhtmlXGridObject.prototype.setSizeForHeader=function(){if(this.hdr.rows[0]){var a=this.quirks=_isIE&&"BackCompat"==document.compatMode,b=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){var c=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){var e=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x;this.entBox.style.width=Math.max(0,this.globalBox.clientWidth+(a?2*c:0)-this._fake.entBox.clientWidth)+"px";e!=this.globalBox.clientWidth&&this._fake._correctSplit(this._fake.entBox.clientWidth)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(a?2*c:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*b+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);window.clearTimeout(this._sizeTime);if(this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth){var g=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||a?0:2,h=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||a?0:2;this._sizeFix&&(g-=this._sizeFix,h-=this._sizeFix);var c=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,e=dhtmlx.$customScroll?0:18,l=this.entBox.clientWidth-(this.skin_h_correction||0)*(a?0:1)-g,g=this.entBox.clientWidth-(this.skin_h_correction||0)-g,m=this.entBox.clientHeight-h,n=this.setColumnSizes(g-(c?e:0)-(this._correction_x||0)),q=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX,h=this.hdr.clientHeight,r=this.ftr?this.ftr.clientHeight:0,v=m-h-r;this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(q=0);this._ahgr&&(v=this._ahgrMA?this.entBox.parentNode.clientHeight-h-r:this.obj.offsetHeight+(q?e:0)+(this._correction_y||0),this._ahgrM&&(v=this._ahgrF?Math.min(this._ahgrM,v+h+r)-h-r:Math.min(this._ahgrM,v)),c&&v>=this.obj.scrollHeight+(q?e:0)&&(c=!1,this.setColumnSizes(g-(this._correction_x||0))));this._awdth&&this._awdth[0]&&("%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(n+=this._fake.entBox.clientWidth),l=Math.min(Math.max(n+(c?e:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0),this.objBox.style.overflowX=!c&&this.objBox.scrollWidth<=l?"hidden":"auto",this._fake&&(l-=this._fake.entBox.clientWidth));v=Math.max(0,v);this._ff_size_delta=.1==this._ff_size_delta?.2:.1;_isFF||(this._ff_size_delta=0);this.dontSetSizes||(this.entBox.style.width=Math.max(0,l+(a?2:0)*b+this._ff_size_delta)+"px",this.entBox.style.height=v+(a?2:0)*b+h+r+"px");this.objBox.style.height=v+"px";this.hdrBox.style.height=h+"px";v!=m&&this.doOnScroll(0,!this._srnd);(a=this["setSizes_"+this.skin_name])&&a.call(this);this.setSortImgPos();h==this.hdr.clientHeight&&this._ahgr&&this.setSizeForHeader(judge);this.callEvent("onSetSizes",[])}else this._sizeTime=window.setTimeout(function(){self.setSizes&&self.setSizes()},250)}};dhtmlXGridObject.prototype.setAllCheckBoxChecked=function(){for(var a=arguments.length?arguments[0]:1,b=getCheckBox(),c=b[b.length-1].parentNode.parentNode.parentNode.childNodes,e=b[b.length-1].parentNode.parentNode.parentNode.parentNode.childNodes.length,b=b[b.length-1].parentNode.parentNode.parentNode.parentNode.childNodes,g=this.hwReport.headers,h=0;h<g.length;h++){var l=g[h];if("string"==typeof l[0]){var m=l[0].split(",");l[0]=m}}if(a){for(h=2;h<e&&!(h-2>=g.length);h++){for(m=a=0;m<lockColNum;m++)l=g[h-2][0][m],""==g[h-2][0][m]&&(g[h-2][0][m]="true"),g[h-2][0][m].match(/^(?!#cspan|#rspan).*/i)&&g[h-2][0][m].match(/^(?!#cspan|#rspan).*/i)[0]&&(g[h-2][0][m]=l,a++);for(l=lockColNum;l<c.length;l++)g[h-2][0][l].match(/^(?!#cspan|#rspan).*/i)&&g[h-2][0][l].match(/^(?!#cspan|#rspan).*/i)[0]&&(b[h].childNodes[a].getElementsByTagName("input")[0]&&(b[h].childNodes[a].getElementsByTagName("input")[0].checked=!0),a++)}for(h=0;h<c.length;h++)h<lockColNum||(c[h].getElementsByTagName("input")[0].checked=!0);for(h=lockColNum;h<c.length;h++)this.delHiddenFields(h)}else{for(h=2;h<e&&!(h-2>=g.length);h++){for(m=a=0;m<lockColNum;m++)l=g[h-2][0][m],""==g[h-2][0][m]&&(g[h-2][0][m]="true"),g[h-2][0][m].match(/^(?!#cspan|#rspan).*/i)&&g[h-2][0][m].match(/^(?!#cspan|#rspan).*/i)[0]&&(g[h-2][0][m]=l,a++);for(l=lockColNum;l<c.length;l++)g[h-2][0][l].match(/^(?!#cspan|#rspan).*/i)&&g[h-2][0][l].match(/^(?!#cspan|#rspan).*/i)[0]&&(b[h].childNodes[a].getElementsByTagName("input")[0]&&(b[h].childNodes[a].getElementsByTagName("input")[0].checked=!1),a++)}for(h=0;h<c.length;h++)h<lockColNum||(c[h].getElementsByTagName("input")[0].checked=!1);for(h=lockColNum;h<c.length;h++)this.addHiddenFields(h)}};dhtmlXGridObject.prototype._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),a.update=!1)};dhtmlXGridObject.prototype.doExpand=function(a){this.editStop();a=a.parentNode.parentNode.parentNode;var b=this._h2.get[a.idd];this.callEvent("onOpen",[a.idd,"plus"==b.state?-1:1])&&("plus"==b.state?this.expandKids(a):"minus"!=b.state||b._closeable||this.collapseKids(a))};dhtmlXGridObject.prototype._createHierarchy=function(){this._emptyLineImg||(this._emptyLineImg="blank");return new dhtmlxHierarchy({_emptyLineImg:this._emptyLineImg})};function dhtmlxHierarchy(a){var b={id:0,childs:[],level:-1,parent:null,index:0,state:a._emptyLineImg};this.order=[b];this.get={0:b};this.swap=function(a,b){var c=a.parent,e=a.index;c.childs[e]=b;c.childs[b.index]=a;a.index=b.index;b.index=e};this.forEachChildF=function(a,b,g,h){a=this.get[a];for(var c=0;c<a.childs.length;c++)b.apply(g||this,[a.childs[c]])&&(a.childs[c].childs.length&&this.forEachChildF(a.childs[c].id,b,g,h),h&&h.call(g||this,a.childs[c]))};this.forEachChild=function(a,b,g){a=this.get[a];for(var c=0;c<a.childs.length;c++)b.apply(g||this,[a.childs[c]]),a.childs[c].childs.length&&this.forEachChild(a.childs[c].id,b,g)};this.change=function(a,b,g){a=this.get[a];a[b]!=g&&(a[b]=g,a.update=!0)};this.add=function(a,b){return this.addAfter(a,b)};this.addAfter=function(b,e,g,h){var c=this.get[e||0];h=g?this.get[g].index+(h?0:1):c.childs.length;var m={id:b,childs:[],level:c.level+1,parent:c,index:h,state:a._emptyLineImg};c.state==a._emptyLineImg&&this.change(e,"state",0==e?"minus":"plus");if(g){for(e=h;e<c.childs.length;e++)c.childs[e].index++;c.childs=c.childs.slice(0,h).concat([m]).concat(c.childs.slice(h,c.childs.length))}else c.childs.push(m);return this.get[b]=m};this.addBefore=function(a,b,g){return this.addAfter(a,b,g,!0)};this.remove=function(a){for(var b=this.get[a||0],c=0;c<b.childs.length;c++)this.deleteAll(b.childs[c].id);b.childs=[];b.parent.childs=b.parent.childs.slice(0,b.index).concat(b.parent.childs.slice(b.index+1));for(c=b.index;c<b.parent.childs.length;c++)b.parent.childs[c].index--;delete this.get[a]};this.deleteAll=function(a){for(var b=this.get[a||0],c=0;c<b.childs.length;c++)this.deleteAll(b.childs[c].id);b.childs=[];delete this.get[a]};return this}dhtmlXGridObject.prototype._getOpenLenght=function(a,b){var c=this._h2.get[a].childs;b+=c.length;for(var e=0;e<c.length;e++)c[e].childs.length&&"minus"==c[e].state&&(b+=this._getOpenLenght(c[e].id,0));return b};dhtmlXGridObject.prototype.collapseKids=function(a){var b=this._h2.get[a.idd];if("minus"==b.state&&this.callEvent("onOpenStart",[a.idd,1])){var c=a.rowIndex;0>c&&(c=this.rowsCol._dhx_find(a)+1);this._h2.change(b.id,"state","plus");this._updateTGRState(b);if(this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var b=this._getOpenLenght(this.rowsCol[c-1].idd,0),e=0;e<b;e++)this.rowsCol[c+e].parentNode.removeChild(this.rowsCol[c+e]);this.rowsCol.splice(c,b)}this.callEvent("onGridReconstructed",[]);this.setSizes();this._h2_to_buff();this.callEvent("onOpenEnd",[a.idd,-1])}};dhtmlXGridObject.prototype._massInsert=function(a,b,c,e){e=[];var g=_isKHTML?this.obj:this.obj.rows[0].parentNode;this._h2_to_buff();if(this._srnd||this.pagingOn)return this._renderSort();for(var h=this._getOpenLenght(a.id,0),l=0;l<h;l++){var m=this.render_row(c+l);b?b.parentNode.insertBefore(m,b):g.appendChild(m);e.push(m)}this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,c).concat(e).concat(this.rowsCol.slice(c)));return a.childs.length+e.length};dhtmlXGridObject.prototype.expandKids=function(a,b){var c=this._h2.get[a.idd];if((c.childs.length||c._xml_await)&&"plus"==c.state&&(c._loading||b||this.callEvent("onOpenStart",[c.id,-1]))){var e=this.getRowIndex(c.id)+1;c.childs.length?(c._loading=!1,this._h2.change(c.id,"state","minus"),this._updateTGRState(c),this._massInsert(c,this.rowsCol[e],e),this.callEvent("onGridReconstructed",[])):c._xml_await&&(c._loading=!0,this.callEvent("onDynXLS",[c.id])&&this.load(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?"\x26":"?")+"id\x3d"+encodeURIComponent(c.id),this._data_type));this.setSizes();c._loading||this.callEvent("onOpenEnd",[c.id,1]);this._fixAlterCss()}};dhtmlXGridObject.prototype.kidsXmlFile="";dhtmlXGridObject.prototype.sortTreeRows=function(a,b,c){var e="getValue";this.cells5({parentNode:{grid:this}},this.getColType(a)).getDate&&(e="getDate",b="str");this.forEachRow(function(c){if(c=this._h2.get[c]){var g=this._get_cell_value(c.buff,a,e);"int"==b?(c._sort=parseFloat(g),c._sort=isNaN(c._sort)?-99999999999999:c._sort):c._sort=g}});var g=this,h=1,l=-1;"des"==c&&(h=-1,l=1);var m=null;"function"==typeof b?m=function(a,e){return b(a._sort,e._sort,c,a.id,e.id)}:("cus"==b&&(m=function(b,e){return g._customSorts[a](b._sort,e._sort,c,b.id,e.id)}),"str"==b&&(m=function(a,b){return a._sort<b._sort?l:a._sort==b._sort?0:h}),"int"==b&&(m=function(a,b){return a._sort<b._sort?l:a._sort==b._sort?0:h}),"date"==b&&(m=function(a,b){return(Date.parse(new Date(a._sort||"01/01/1900"))-Date.parse(new Date(b._sort||"01/01/1900")))*h}));this._sortTreeRows(m,0);this._renderSort(0,!0);this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._sortTreeRows=function(a,b){var c=this._h2.get[b].childs;this.rowsCol.stablesort?this.rowsCol.stablesort.call(c,a):c.sort(a);for(var e=0;e<c.length;e++)c[e].childs.length&&this._sortTreeRows(a,c[e].id),c[e].index=e};dhtmlXGridObject.prototype._renderSort=function(a,b){this._h2_to_buff();var c=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=c};dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(a){if("TR"==a.buff.tagName){var b=(this._cssSP?a.level%2:a.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[a.id].className=b+(this._cssSU?" "+b+"_"+a.level:"")+" "+(this.rowsAr[a.id]._css||"")+(-1!=this.rowsAr[a.id].className.indexOf("rowselected")?" rowselected":"")}},this)};dhtmlXGridObject.prototype.moveRowUDTG=function(a,b){var c=this._h2.get[a],e=c.parent.childs[c.index+b];if(e&&e.parent==c.parent){var g=[c.state,e.state];this.collapseKids(this.rowsAr[c.id]);this.collapseKids(this.rowsAr[e.id]);var h=this.rowsCol._dhx_find(this.rowsAr[a]),l=this.rowsBuffer._dhx_find(this.rowsAr[a]),m=this.obj.rows[0].parentNode.removeChild(this.rowsCol[h]),n=this.rowsCol[h+(1==b?2:b)];n?n.parentNode.insertBefore(m,n):this.obj.rows[0].parentNode.appendChild(m);this.rowsCol._dhx_swapItems(h,h+b);this.rowsBuffer._dhx_swapItems(l,l+b);this._h2.swap(e,c);"minus"==g[0]&&this.expandKids(this.rowsAr[c.id]);"minus"==g[1]&&this.expandKids(this.rowsAr[e.id]);this._fixAlterCss(Math.min(h,h+b))}};function eXcell_tree(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid);this.isDisabled=function(){return this.cell._disabled||this.grid._edtc};this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="\x3c"+this.cell.atag+" class\x3d'dhx_combo_edit' type\x3d'text' style\x3d'height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'\x3e\x3c/"+this.cell.atag+"\x3e",this.er.childNodes[0].onmousedown=function(a){(a||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(a){a||(a=event);return a.cancelBubble=!0},this.er.className+=" editable",this.er.firstChild.onclick=function(a){(a||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())};this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value);this.er.className=this.er.className.replace("editable","");var a=this.val!=this.er.innerHTML;this.obj=this.er=null;return a}};this.getValue=function(){return this.getLabel()};this.setImage=function(a){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+a;this.grid._h2.get[this.cell.parentNode.idd].image=a};this.setIcon=function(a){this.grid._h2.get[this.cell.parentNode.idd].icon=a;this.cell.parentNode.imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+a};this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image};this.getIcon=function(){return this.grid._h2.get[this.cell.parentNode.idd].icon};this.setLabel=function(a){this.setValueA(a)};this.getLabel=function(a){return this.cell.parentNode.valTag.innerHTML}}eXcell_tree.prototype=new eXcell;eXcell_tree.prototype.setValueA=function(a){this.cell.parentNode.valTag.innerHTML=a;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])};eXcell_tree.prototype.setValue=function(a){if(this.cell.parentNode.imgTag)return this.setLabel(a);if(null==this.grid._tgc.iconTree||this.grid._tgc.iconTree!=this.grid.iconTree){var b={};b.spacer="\x3cimg src\x3d'"+this.grid.iconTree+"blank.gif'  align\x3d'top' class\x3d'space'\x3e";b.imst="\x3cimg class\x3d'grid_collapse_icon' src\x3d'"+this.grid.iconTree;b.imsti="\x3cimg style\x3d'padding-top:2px;'  src\x3d'"+(this.grid.iconURL||this.grid.iconTree);b.imact="' align\x3d'top' onclick\x3d'this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble\x3dtrue;'\x3e";b.plus=b.imst+"plus.gif"+b.imact;b.minus=b.imst+"minus.gif"+b.imact;b.blank=b.imst+"blank.gif"+b.imact;b.start="\x3cdiv class\x3d'treegrid_cell' style\x3d'overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'\x3e";b.itemim="' align\x3d'top' "+(this.grid._img_height?' height\x3d"'+this.grid._img_height+'"':"")+(this.grid._img_width?' width\x3d"'+this.grid._img_width+'"':"")+" \x3e";b.itemne="\x3cspan id\x3d'nodeval'\x3e";b.close="\x3c/span\x3e\x3c/div\x3e";this.grid._tgc=b}var b=this.grid._tgc,c=this.cell.parentNode.idd,e=this.grid._h2.get[c];if(this.grid.kidsXmlFile||this.grid._slowParse)e.has_kids=e.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=e.state,e._xml_await=!!e.has_kids;e.image=e.image||this.cell._attrs.image||"leaf.gif";e.icon=e.icon||this.cell._attrs.icon||(this.grid.iconset?"file-o":"");e.label=a;for(var g=[b.start],h=0;h<e.level;h++)g.push(b.spacer);e.has_kids?(g.push(b.plus),e.state="plus"):g.push(b.imst+e.state+".gif"+b.imact);e.icon?g.push("\x3ci class\x3d'dhx_treegrid_icon fa fa-"+e.icon+"'\x3e\x3c/i\x3e"):(g.push(b.imsti),g.push(e.image),g.push(b.itemim));g.push(b.itemne);g.push(e.label);g.push(b.close);this.cell.innerHTML=g.join("");this.cell._treeCell=!0;this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[e.level];this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[e.level+2];_isKHTML&&(this.cell.vAlign="top");0!=e.parent.id&&"plus"==e.parent.state&&(this.grid._updateTGRState(e.parent,!1),this.cell.parentNode._skipInsert=!0);this.grid.callEvent("onCellChanged",[c,this.cell._cellIndex,a])};dhtmlXGridObject.prototype._process_tree_xml=function(a,b){this._parsing=!0;var c=!1;b||(this.render_row=this.render_row_tree,c=!0,b=a.getAttribute("parent")||0,"0"==b&&(b=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2));var e=dhx4.ajax.xpath(this.xml.row,a);this._open=this._open||[];for(var g=0;g<e.length;g++){var h=e[g].getAttribute("id");h||(h=this.uid(),e[g].setAttribute("id",h));var l=this._h2.add(h,b);l.buff={idd:h,data:e[g],_parser:this._process_xml_row,_locator:this._get_xml_data};e[g].getAttribute("open")&&(l.state="minus",this._open.push(h));this.rowsAr[h]=l.buff;this._process_tree_xml(e[g],h)}if(c){e.length?0==b||this._srnd||this._h2.change(b,"state","minus"):this._h2.change(b,"state",this._emptyLineImg);for(g=0;g<this._open.length;g++)c=this._h2.get[this._open[g]],c.childs.length||(c.state=this._emptyLineImg);this._updateTGRState(this._h2.get[b]);this._h2_to_buff();0!=b&&this._srnd?this.openItem(b):this.pagingOn?this._renderSort():this.render_dataset();if(this.kidsXmlFile)for(g=0;g<this._open.length;g++)c=this._h2.get[this._open[g]],c._xml_await&&this.expandKids({idd:c.id});this._open=[];!1===this._slowParse&&this.forEachRow(function(a){this.render_row_tree(0,a)});this._parsing=!1;0==b||this._srnd||this.callEvent("onOpenEnd",[b,1])}};dhtmlXGridObject.prototype._h2_to_buff=function(a){a||(a=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake&&(this._fake.rowsBuffer=this.rowsBuffer));for(var b=0;b<a.childs.length;b++)this.rowsBuffer.push(a.childs[b].buff),"minus"==a.childs[b].state&&this._h2_to_buff(a.childs[b])};dhtmlXGridObject.prototype.render_row_tree=function(a,b){if(b)var c=this._h2.get[b],c=c?c.buff:c;else c=this.rowsBuffer[a];if(!c)return-1;if(c._parser){if(this.rowsAr[c.idd]&&"TR"==this.rowsAr[c.idd].tagName)return this._h2.get[c.idd].buff=this.rowsBuffer[a]=this.rowsAr[c.idd];var e=this._prepareRow(c.idd);this.rowsAr[c.idd]=e;b||(this.rowsBuffer[a]=e);this._h2.get[c.idd].buff=e;c._parser.call(this,e,c.data);this._postRowProcessing(e);return e}return c};dhtmlXGridObject.prototype._removeTrGrRow=function(a,b){if(b)this._h2.forEachChild(b.id,function(a){this._removeTrGrRow(null,a);delete this.rowsAr[a.id]},this);else{var c=this.getRowIndex(a.idd);b=this._h2.get[a.idd];if(-1!=c&&c!==this.undefined){var e=1;b&&"minus"==b.state&&(e+=this._getOpenLenght(b.id,0));for(var g=0;g<e;g++)this.rowsCol[g+c]&&this.rowsCol[g+c].parentNode.removeChild(this.rowsCol[g+c]);if(this._fake){for(g=0;g<e;g++)this._fake.rowsCol[g+c]&&this._fake.rowsCol[g+c].parentNode.removeChild(this._fake.rowsCol[g+c]);1<e&&this._fake.rowsCol.splice(c+1,e-1)}this.rowsCol.splice(c,e);this.rowsBuffer.splice(c,e)}b&&(this._removeTrGrRow(null,b),delete this.rowsAr[b.id],1==b.parent.childs.length&&(this._h2.change(b.parent.id,"state",this._emptyLineImg),this._updateTGRState(b.parent)),this._h2.remove(b.id))}};dhtmlXGridObject.prototype.openItem=function(a){var b=this._h2.get[a||0];if(a=this.getRowById(a||0))b.parent&&0!=b.parent.id&&this.openItem(b.parent.id),this.expandKids(a)};dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow;dhtmlXGridObject.prototype.addRow=function(a,b,c,e,g,h){if(!this._h2)return this._addRowClassic(a,b,c);e=e||0;this.cellType._dhx_find("tree");"string"==typeof b&&(b=b.split(this.delim));var l=this._h2.get[a];l||(0==e?c=this.rowsBuffer.length:(c=this.getRowIndex(e)+1,"minus"==this._h2.get[e].state?c+=this._getOpenLenght(e,0):this._skipInsert=!0));l=l||this._h2.add(a,e);l.image=g;l.has_kids=h;return l.buff=this._addRowClassic(a,b,c)};dhtmlXGridObject.prototype.addRowBefore=function(a,b,c,e,g){if(this.rowsAr[c]){if(!this._h2)return this.addRow(a,b,this.getRowIndex(c));var h=this._h2.get[c].parent.id,l=this.getRowIndex(c);-1==l&&(this._skipInsert=!0);this._h2.addBefore(a,h,c);return this.addRow(a,b,l,this._h2.get[c].parent.id,e,g)}};dhtmlXGridObject.prototype.addRowAfter=function(a,b,c,e,g){if(this.rowsAr[c]){if(!this._h2)return this.addRow(a,b,this.getRowIndex(c)+1);var h=this._h2.get[c].parent.id,l=this.getRowIndex(c);-1==l&&(this._skipInsert=!0);"minus"==this._h2.get[c].state?l+=this._getOpenLenght(c,0)+1:l++;this._h2.addAfter(a,h,c);return this.addRow(a,b,l,h,e,g)}};dhtmlXGridObject.prototype.enableSmartXMLParsing=function(a){this._slowParse=dhx4.s2b(a)};dhtmlXGridObject.prototype._copyTreeGridRowContent=function(a,b,c){var e=this.cellType._dhx_find("tree");for(i=0;i<a.cells.length;i++)i!=e?this.cells(c,i).setValue(this.cells(b,i).getValue()):this.cells(c,i).setValueA(this.cells(b,i).getValue())};dhtmlXGridObject.prototype.closeItem=function(a){(a=this.getRowById(a))&&this.collapseKids(a)};dhtmlXGridObject.prototype.deleteChildItems=function(a){if(a=this._h2.get[a])for(;a.childs.length;)this.deleteRow(a.childs[0].id)};dhtmlXGridObject.prototype.getAllSubItems=function(a){var b=[];if(a=this._h2.get[a||0])for(var c=0;c<a.childs.length;c++)b.push(a.childs[c].id),a.childs[c].childs.length&&(b=b.concat(this.getAllSubItems(a.childs[c].id).split(this.delim)));return b.join(this.delim)};dhtmlXGridObject.prototype.getChildItemIdByIndex=function(a,b){var c=this._h2.get[a||0];return c?c.childs[b]?c.childs[b].id:null:null};dhtmlXGridObject.prototype.getItemText=function(a){return this.cells(a,this.cellType._dhx_find("tree")).getLabel()};dhtmlXGridObject.prototype.getOpenState=function(a){if(a=this._h2.get[a||0])return"minus"==a.state?!0:!1};dhtmlXGridObject.prototype.getParentId=function(a){return(a=this._h2.get[a||0])&&a.parent?a.parent.id:null};dhtmlXGridObject.prototype.getSubItems=function(a){var b=[];if(a=this._h2.get[a||0])for(var c=0;c<a.childs.length;c++)b.push(a.childs[c].id);return b.join(this.delim)};dhtmlXGridObject.prototype.expandAll=function(a){this._renderAllExpand(a||0);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);this._redrawLines&&this._redrawLines()};dhtmlXGridObject.prototype._renderAllExpand=function(a){a=this._h2.get[a].childs;for(var b=0;b<a.length;b++)a[b].childs.length&&(this._h2.change(a[b].id,"state","minus"),this._updateTGRState(a[b]),this._renderAllExpand(a[b].id))};dhtmlXGridObject.prototype.collapseAll=function(a){this._h2.forEachChild(a||0,function(a){a&&"minus"==a.state&&(a.state="plus",a.update=!0,this._updateTGRState(a))},this);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);this._redrawLines&&this._redrawLines()};dhtmlXGridObject.prototype.hasChildren=function(a){return(a=this._h2.get[a])&&a.childs.length?a.childs.length:a._xml_await?-1:0};dhtmlXGridObject.prototype.setItemCloseable=function(a,b){var c=this._h2.get[a];c&&(c._closeable=!dhx4.s2b(b))};dhtmlXGridObject.prototype.setItemText=function(a,b){return this.cells(a,this.cellType._dhx_find("tree")).setLabel(b)};dhtmlXGridObject.prototype.setItemImage=function(a,b){this._h2.get[a].image=b;this.rowsAr[a].imgTag.nextSibling.src=(this.iconURL||"")+b};dhtmlXGridObject.prototype.setItemIcon=function(a,b){this._h2.get[a].icon=b;this.rowsAr[a].imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+b};dhtmlXGridObject.prototype.getItemImage=function(a){this.getRowById(a);return this._h2.get[a].image};dhtmlXGridObject.prototype.getItemIcon=function(a){this.getRowById(a);return this._h2.get[a].icon};dhtmlXGridObject.prototype.setImageSize=function(a,b){this._img_width=a;this._img_height=b};dhtmlXGridObject.prototype._getRowImage=function(a){return this._h2.get[a.idd].image};dhtmlXGridObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXGridObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXGridObject.prototype.enableTreeCellEdit=function(a){this._edtc=!dhx4.s2b(a)};dhtmlXGridObject.prototype.getLevel=function(a){return(a=this._h2.get[a||0])?a.level:-1};dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(a,b){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[a].style.display=b)};dhtmlXGridObject.prototype._updateLine=function(a,b){if(b=b||this.rowsAr[a.id]){var c=b.imgTag;if(c){if("blank"==a.state)return c.src=this.iconTree+"blank.gif";c.src=this.iconTree+a.state+(0==a.index?0==a.level?a.parent.childs.length-1>a.index?3:1:a.parent.childs.length-1>a.index?3:2:a.parent.childs.length-1>a.index?3:2)+".gif"}}};dhtmlXGridObject.prototype._updateParentLine=function(a,b){if(b=b||this.rowsAr[a.id]){var c=b.imgTag;if(c)for(var e=a.level;0<e&&0!=a.id;e--)c=c.previousSibling,a=a.parent,c.src=a.parent.childs.length-1>a.index?this.iconTree+"line1.gif":this.iconTree+"blank.gif"}};dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort;dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments);this._redrawLines(0)};dhtmlXGridObject.prototype._redrawLines=function(a){this._tgle&&this._h2.forEachChild(a||0,function(a){this._updateLine(a);this._updateParentLine(a)},this)};dhtmlXGridObject.prototype.enableTreeGridLines=function(){this._emptyLineImg="line";this._updateTGRState=function(a,b){!b&&a.update&&0!=a.id&&(this._tgle&&this._updateLine(a,this.rowsAr[a.id]),a.update=!1)};this._tgle=!0;this.attachEvent("onXLE",function(a,b,c){this._redrawLines(c)});this.attachEvent("onOpenEnd",function(a){this._redrawLines(a)});this.attachEvent("onRowAdded",function(a){a=this._h2.get[a];this._updateLine(a);this._updateParentLine(a);a.index<a.parent.childs.length-1?(a=a.parent.childs[a.index+1],this._updateLine(a),this._updateParentLine(a)):0!=a.index&&(a=a.parent.childs[a.index-1],this._updateLine(a),this._updateParentLine(a),a.childs.length&&this._h2.forEachChild(a.id,function(a){this._updateParentLine(a)},this))});this.attachEvent("onOpen",function(a,b){if(b)for(var c=this._h2.get[a],e=0;e<c.childs.length;e++)this._updateParentLine(c.childs[e]);return!0});this.attachEvent("onBeforeRowDeleted",function(a){var b=this,c=this._h2.get[a],e=null;0!=c.index&&(e=c.parent.childs[c.index-1]);c=c.parent;window.setTimeout(function(){if(c=b._h2.get[c.id])b._updateLine(c),b._updateParentLine(c),e&&(b._updateLine(e),"minus"==e.state&&b._h2.forEachChild(e.id,function(a){b._updateParentLine(a)},b))},1);return!0})};dhtmlXGridObject.prototype.setFiltrationLevel=function(a,b,c){this._tr_strfltr=a;this._tr_fltr_c=b;this._tr_fltr_d=c;this.refreshFilters()};dhtmlXGridObject.prototype.filterTreeBy=function(a,b,c){var e=this._h2;"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1);this._f_rowsBuffer?c||(this._h2=this._f_rowsBuffer,this._fake&&(this._fake._h2=this._h2)):this._f_rowsBuffer=this._h2;this.dma(!0);this._fbf={};if("object"==typeof a)for(c=0;c<b.length;c++)this._filterTreeA(a[c],b[c]);else this._filterTreeA(a,b);this._fbf=null;this.dma(!1);this._fix_filtered_images(this._h2,e);this._renderSort();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._filterTreeA=function(a,b){if(""!=b){var c=!0;"function"==typeof b?c=!1:b=(b||"").toString().toLowerCase();var e=function(a,b,c){var g=c.get[a.parent.id];g||(g=e(a.parent,b,c));c=h.get[a.id];c||(c={id:a.id,childs:[],level:a.level,parent:g,index:g.childs.length,image:a.image,state:a.state,buff:a.buff,has_kids:a.has_kids,_xml_await:a._xml_await},g.childs.push(c),h.get[c.id]=c);return c},g=this._fbf,h=this._createHierarchy(),l,m=this._tr_strfltr,n=this,q=function(a){for(var b=0;b<a.childs.length;b++)n.temp(a.childs[b])};switch(m.toString()){case "-2":l=function(a){if(g[a.id])return!1;q(a);return!0};break;case "-1":l=function(a){return!a.childs.length};break;default:l=function(a){return m==a.level}}this.temp=function(n){if(0!=n.id&&l(n)){if(c?-1!=this._get_cell_value(n.buff,a).toString().toLowerCase().indexOf(b):b(this._get_cell_value(n.buff,a),n.id))return e(n,this._h2,h),n.childs&&-2!=m&&this._h2.forEachChild(n.id,function(a){e(a,this._h2,h)},this),!0;g[n.id]=!0;this._tr_fltr_c&&e(n.parent,this._h2,h);return!1}this._tr_fltr_d&&this._tr_strfltr>n.level&&0!=n.id&&e(n,this._h2,h);q(n)};this.temp(this._h2.get[0]);this._h2=h;this._fake&&(this._fake._h2=this._h2)}};dhtmlXGridObject.prototype._fix_filtered_images=function(a,b){a.forEachChild(0,function(a){if(!a.childs.length&&!a.has_kids)a.state!=this._emptyLineImg&&(a.state=this._emptyLineImg,a.update=!0,this._updateTGRState(a));else if("TR"==a.buff.tagName){var c=b.get[a.id];c&&c.state!=this._emptyLineImg&&(a.state=c.state);a.update=!0;this._updateTGRState(a)}},this)};dhtmlXGridObject.prototype.collectTreeValues=function(a){"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1);this.dma(!0);this._build_m_order();a=this._m_order?this._m_order[a]:a;var b={},c=[];(this._f_rowsBuffer||this._h2).forEachChild(0,function(c){(-2==this._tr_strfltr||-1==this._tr_strfltr&&!c.childs.length||this._tr_strfltr==c.level)&&(c=this._get_cell_value(c.buff,a))&&(b[c]=!0)},this);this.dma(!1);var e=this.combos[a],g;for(g in b)!0===b[g]&&c.push(e?e.get(g)||g:g);return c.sort()};dhtmlXGridObject.prototype._in_header_stat_tree_total=function(a,b,c){this._stat_in_header(a,function(){var a=0;this._build_m_order();var c=this._m_order?this._m_order[b]:b;this._h2.forEachChild(0,function(b){b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));a+=isNaN(b)?0:b},this);return this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100},b,c,c)};dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(a,b,c){this._stat_in_header(a,function(){var a=0;this._build_m_order();var c=this._m_order?this._m_order[b]:b;this._h2.forEachChild(0,function(b){b.childs.length||(b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c)),a+=isNaN(b)?0:b)},this);return this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100},b,c,c)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(a,b,c){var e=c[1].split(":");c[1]="";this._stat_in_header(a,function(){var a=0;this._h2.forEachChild(0,function(b){b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],e[0]))*parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],e[1]));a+=isNaN(b)?0:b},this);return this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100},b,c,c)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(a,b,c){var e=c[1].split(":");c[1]="";this._stat_in_header(a,function(){var a=0;this._h2.forEachChild(0,function(b){b.childs.length||(b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],e[0]))*parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],e[1])),a+=isNaN(b)?0:b)},this);return this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100},b,c,c)};dhtmlXGridObject.prototype._in_header_stat_tree_max=function(a,b,c){this._stat_in_header(a,function(){var a=-999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(b){b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));isNaN(b)||(a=Math.max(a,b))},this);return this._maskArr[b]?this._aplNF(a,b):a},b,c)};dhtmlXGridObject.prototype._in_header_stat_tree_min=function(a,b,c){this._stat_in_header(a,function(){var a=999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(b){b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));isNaN(b)||(a=Math.min(a,b))},this);return this._maskArr[b]?this._aplNF(a,b):a},b,c)};dhtmlXGridObject.prototype._in_header_stat_tree_average=function(a,b,c){this._stat_in_header(a,function(){var a=0,c=0;this._build_m_order();var h=this._m_order?this._m_order[b]:b;this._h2.forEachChild(0,function(b){b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],h));a+=isNaN(b)?0:b;c++},this);return this._maskArr[b]?this._aplNF(a,b):Math.round(a/c*100)/100},b,c)};dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(a,b,c){this._stat_in_header(a,function(){var a=-999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(b){b.childs.length||(b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c)),isNaN(b)||(a=Math.max(a,b)))},this);return this._maskArr[b]?this._aplNF(a,b):a},b,c)};dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(a,b,c){this._stat_in_header(a,function(){var a=999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(b){b.childs.length||(b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c)),isNaN(b)||(a=Math.min(a,b)))},this);return this._maskArr[b]?this._aplNF(a,b):a},b,c)};dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(a,b,c){this._stat_in_header(a,function(){var a=0,c=0;this._build_m_order();var h=this._m_order?this._m_order[b]:b;this._h2.forEachChild(0,function(b){b.childs.length||(b=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],h)),a+=isNaN(b)?0:b,c++)},this);return this._maskArr[b]?this._aplNF(a,b):Math.round(a/c*100)/100},b,c)};dhtmlXGridObject.prototype._in_header_stat_tree_count=function(a,b,c){this._stat_in_header(a,function(){var a=0;this._h2.forEachChild(0,function(b){a++},this);return a},b,c)};dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(a,b,c){this._stat_in_header(a,function(){var a=0;this._h2.forEachChild(0,function(b){b.childs.length||a++},this);return a},b,c)};dhtmlXGridObject.prototype._stat_in_header=function(a,b,c,e){var g=function(){this.dma(!0);a.innerHTML=(e[0]?e[0]:"")+b.call(this)+(e[1]?e[1]:"");this.dma(!1);this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var a=0;a<this._stat_events.length;a++)for(var b=0;4>b;b++)this.detachEvent(this._stat_events[a][b]);this._stat_events=[]}}));this._stat_events.push([this.attachEvent("onGridReconstructed",g),this.attachEvent("onXLE",g),this.attachEvent("onFilterEnd",g),this.attachEvent("onEditCell",function(a,b,e){2==a&&e==c&&g.call(this);return!0})]);a.innerHTML=""};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++)this._m_order[this._c_order[a]]=a}};function dhtmlXForm(a,b,c){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var e=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize="material"==a?"14px":"dhx_terrace"==a?"13px":"12px";this._updateBlocks();this.forEachItem(function(b){var c=e.getItemType(b);"undefined"!=typeof e.items[c]&&"function"==typeof e.items[c].setSkin&&e.doWithItem(b,"setSkin",a)})};this.skin=c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"material";this.separator=",";this.live_validate=!1;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont="object"==typeof a?a:document.getElementById(a);a._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize="material"==this.skin?"14px":"dhx_terrace"==this.skin?"13px":"12px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(a){a=a||event;if(13==a.keyCode){var b=a.target||a.srcElement;("undefined"==typeof b.tagName||"textarea"!=String(b.tagName).toLowerCase()||a.ctrlKey)&&e.callEvent("onEnter",[])}});this.b_index=null;this.base=[];this._prepare=function(a,b){null==this.b_index?this.b_index=0:this.b_index++;var c=null,e=null;if(null!=b){0>b&&(b=0);for(var g=0,h=0;h<this.cont.childNodes.length;h++)for(var l=0;l<this.cont.childNodes[h].childNodes.length;l++)null==e&&1!=this.cont.childNodes[h].childNodes[l]._isNestedForm&&(g==b&&(c=this.cont.childNodes[h].nextSibling,e=this.cont.childNodes[h].childNodes[l]),g++)}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";"undefined"!=typeof a&&(this.base[this.b_index].style.cssText+=" margin-left:"+a+"px!important;");null!=c?this.cont.insertBefore(this.base[this.b_index],c):this.cont.appendChild(this.base[this.b_index]);if(null!=e)for(;null!=e;)c=e,e=e.nextSibling,this.base[this.b_index].appendChild(c)};this.setSizes=function(){};this._mergeSettings=function(a){var b=-1,c={type:"settings"},e;for(e in this.idef)c[e]=this.idef[e];for(var g=0;g<a.length;g++)if("undefined"!=typeof a[g]&&"settings"==a[g].type){for(e in a[g])c[e]=a[g][e];b=g}a[0<=b?b:a.length]=c;return a};this._genStr=function(a){for(var b="dhxId_",c=0;c<a;c++)b+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return b};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=this._parentForm?this._genStr(12)+"_":a._rId;this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(a,b,c,g,q,r,v){this.items[a]._index&&(this.getForm()._indexId.push(b),this.getForm()._idIndex[b]={ind:this.getForm()._indexId.length-1});a||(a=this._type);if("list"==a&&null!=q&&null!=this.itemPull[this.idPrefix+q]&&"function"==typeof this.itemPull[this.idPrefix+q]._addSubListNode)q=this.itemPull[this.idPrefix+q]._addSubListNode();else if("newcolumn"==a)q={};else{null==this.b_index&&this._prepare();var h=this.base[this.b_index],l=null;if("undefined"!=typeof r&&!isNaN(r)&&"list"!=a)for(r=Math.max(parseInt(r),0)+1,q=0;q<this.cont.childNodes.length;q++)for(var m=0;m<this.cont.childNodes[q].childNodes.length;m++)null==l&&1!=this.cont.childNodes[q].childNodes[m]._isNestedForm&&(r--,0==r&&(l=this.cont.childNodes[q].childNodes[m],h=this.cont.childNodes[q]));else if("list"==a)for(var n in this.itemPull)n==this.idPrefix+b&&(l=this.itemPull[n].nextSibling,null!=this.itemPull[n]._listBase&&0<this.itemPull[n]._listBase.length&&(l=this.itemPull[n]._listBase[this.itemPull[n]._listBase.length-1]));q=document.createElement("DIV");1==v&&null!=l&&(l=l.nextSibling);null!=l?h.insertBefore(q,l):h.appendChild(q)}q._idd=b;q._rId=this._rId;"undefined"!=typeof q.style&&("undefined"==typeof c.offsetLeft&&0<this.idef.offsetLeft&&(c.offsetLeft=this.idef.offsetLeft),"undefined"==typeof c.offsetTop&&0<this.idef.offsetTop&&(c.offsetTop=this.idef.offsetTop),v="","undefined"!=typeof c.offsetLeft&&(v+=" padding-left:"+c.offsetLeft+"px!important;"),"undefined"!=typeof c.offsetTop&&(v+=" padding-top:"+c.offsetTop+"px!important;"),q.style.cssText+=v);"block"==a&&isNaN(c.blockOffset)&&(c.blockOffset=this.idef.blockOffset);if("list"==a)return"undefined"==typeof q._ofsNested&&(q._ofsNested=this.idef_const.offsetNested),null!=g&&(q._sId=g),a=this.items[a].render(q,this.skin),this.itemPull[this.idPrefix+b]._listObj||(this.itemPull[this.idPrefix+b]._listObj=[]),this.itemPull[this.idPrefix+b]._list||(this.itemPull[this.idPrefix+b]._list=[]),this.itemPull[this.idPrefix+b]._listBase||(this.itemPull[this.idPrefix+b]._listBase=[]),this.itemPull[this.idPrefix+b]._listObj.push(a[0]),this.itemPull[this.idPrefix+b]._list.push(a[1]),this.itemPull[this.idPrefix+b]._listBase.push(q),a[1].checkEvent=function(a){return e.checkEvent(a)},a[1].callEvent=function(a,b){return e.callEvent(a,b)},a[1].getForm=function(){return e.getForm()},a[1]._initObj(this._mergeSettings(c)),q._inBlcok&&(q.className+=" in_block"),a[1];if("newcolumn"==a)this._prepare(c.offset,r);else{"label"==a&&0==this._ic++&&(c._isTopmost=!0);c.position=this.apos_css[c.position&&this.apos_css[c.position]?c.position:this.idef.position];q.className=c.position+("string"==typeof c.className?" "+c.className:"");c.labelWidth||(c.labelWidth=this.idef.labelWidth);c.labelHeight||(c.labelHeight=this.idef.labelHeight);"undefined"!=typeof c.wrap&&(c.wrap=window.dhx4.s2b(c.wrap));c.labelAlign=this.align_css[c.labelAlign]?this.align_css[c.labelAlign]:this.align_css[this.idef.labelAlign];c.inputWidth=c.width?c.width:c.inputWidth?c.inputWidth:this.idef.inputWidth;c.inputHeight||(c.inputHeight=this.idef.inputHeight);"undefined"!=typeof c.note&&(null!=c.note.length&&null!=c.note[0]&&(c.note=c.note[0]),"undefined"==typeof c.note.width&&(c.note.width=this.idef.noteWidth),"auto"==c.note.width&&(c.note.width=c.inputWidth));q.checkEvent=function(a){return e.checkEvent(a)};q.callEvent=function(a,b){return e.callEvent(a,b)};q.getForm=function(){return e.getForm()};q._autoCheck=function(a){e._autoCheck(a)};"string"==typeof c.readonly&&(c.readonly=window.dhx4.s2b(c.readonly));"string"==typeof c.autoStart&&(c.autoStart=window.dhx4.s2b(c.autoStart));"string"==typeof c.autoRemove&&(c.autoRemove=window.dhx4.s2b(c.autoRemove));"string"==typeof c.titleScreen&&(c.titleScreen=window.dhx4.s2b(c.titleScreen));"string"==typeof c.info&&(c.info=window.dhx4.s2b(c.info));"string"==typeof c.hidden&&(c.hidden=window.dhx4.s2b(c.hidden));"string"==typeof c.checked&&(c.checked=window.dhx4.s2b(c.checked));if("undefined"!=typeof c.userdata)for(n in c.userdata)this.getForm().setUserData(b,n,c.userdata[n]);c.validate&&(q._validate=!typeof("undefined"!=c.validate)||"function"!=typeof c.validate&&"function"!=typeof window[c.validate]?String(c.validate).split(this.separator):[c.validate]);"undefined"!=typeof c.required&&("string"==typeof c.required&&(c.required=window.dhx4.s2b(c.required)),q._required=1==c.required);if(q._required){q._validate||(q._validate=[]);g=!1;for(m=0;m<q._validate.length;m++)g=g||"NotEmpty"==q._validate[m];g||q._validate.push("NotEmpty")}q._ll=c.position==this.apos_css["label-left"]||c.position==this.apos_css["label-top"];this.objPull[this.idPrefix+b]=this.items[a].render(q,c);this.itemPull[this.idPrefix+b]=q}};this._initObj=function(a,b){if("undefined"!=typeof a.data){var c=null;"undefined"!=typeof b&&(c=b.match(/(\?|\&)id\=([a-z0-9_\-]*)/i),null!=c&&null!=c[0]&&(c=c[0].split("\x3d")[1]));!0===this.callEvent("onBeforeDataLoad",[c,window.dhx4._copyObj(a.data)])&&(this.formId=c,this._last_load_data=a,this.setFormData(a.data),this.resetDataProcessor("updated"))}else{this._prepare();for(c=0;c<a.length;c++)if("undefined"!=typeof a[c]&&"settings"==a[c].type)for(var e in a[c])this.idef[e]=a[c][e];for(c=0;c<a.length;c++)this._prepareItem(a[c]);this._autoCheck()}};this._prepareItem=function(a,b,c){var e=null!=a&&null!=a.type?a.type:"";if(this.items[e]){a.name||(a.name=this._genStr(12));var g=a.name;if(null!=this.objPull[this.idPrefix+g]||"radio"==e)g=this._genStr(12);a.label=a.label||"";a.value=a.value;a.checked=window.dhx4.s2b(a.checked);a.disabled=window.dhx4.s2b(a.disabled);a.name=a.name||this._genStr(12);a.options=a.options||[];a.rows=a.rows||"none";a.uid=this._genStr(12);this._addItem(e,g,a,null,null,b,c);!1===this._parentEnabled&&this._disableItem(g);for(b=0;b<a.options.length;b++)null!=a.options[b].list&&(a.options[b].value||(a.options[b].value=this._genStr()),c=this._addItem("list",g,a.options[b].list,a.options[b].value,null),c._subSelect=!0,c._subSelectId=a.options[b].value);null!=a.list&&(a.listParent||(a.listParent=a.name),this._addItem("list",g,a.list,null,a.listParent))}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(a,b){"undefined"==typeof b&&(b=!0);if(b)var c=a.getElementsByTagName("items"),c=null!=c&&null!=c[0]?c[0]:null,e=a.getElementsByTagName("data"),e=null!=e&&null!=e[0]?e[0]:null;else c=a;var g=b?[]:{};if(null!=c)for(var h=0;h<c.childNodes.length;h++)if("undefined"!=typeof c.childNodes[h].tagName){var l=c.childNodes[h].tagName;if(null!=this._xmlSubItems[l]){l=this._xmlSubItems[l];"undefined"==typeof g[l]&&(g[l]=[]);for(var u=c.childNodes[h],x={},w=0;w<u.attributes.length;w++)x[u.attributes[w].name]=u.attributes[w].value;"note"==l&&(x.text=u.firstChild.nodeValue);"_userdata"==l&&(x.value=null!=u.firstChild&&null!=u.firstChild.nodeValue?u.firstChild.nodeValue:"");var u=this._xmlToObject(u,!1),A;for(A in u)if("_userdata"==A)for(x.userdata||(x.userdata={}),w=0;w<u[A].length;w++)x.userdata[u[A][w].name]=u[A][w].value;else x[A]=u[A];b?g.push(x):g[l].push(x)}}if(null!=e)for(g={data:{}},h=0;h<e.childNodes.length;h++)"undefined"!=typeof e.childNodes[h].tagName&&(g.data[e.childNodes[h].tagName]=null!=e.childNodes[h].firstChild?e.childNodes[h].firstChild.nodeValue:"");return g};this._autoCheck=function(a){!0===this._locked?a=!1:"undefined"==typeof a&&(a=!0);for(var b in this.itemPull){var c=a&&!0!==this.itemPull[b]._udis;this[c?"_enableItem":"_disableItem"](this.itemPull[b]._idd);null!=this.getForm()._idIndex[this.itemPull[b]._idd]&&(this.getForm()._idIndex[this.itemPull[b]._idd].enabled=c);c=c&&("boolean"==typeof this.itemPull[b]._checked?this.itemPull[b]._checked:!0);if(this.itemPull[b]._list)for(var e=0;e<this.itemPull[b]._list.length;e++){var g=!0;if(1==this.itemPull[b]._list[e]._subSelect){var g=!1,h=this.getItemValue(this.itemPull[b]._idd);if("object"!=typeof h||"number"!=typeof h.length)h=[h];for(var v=0;v<h.length;v++)g=h[v]==this.itemPull[b]._list[e]._subSelectId||g;this.itemPull[b]._listObj[e][g?"show":"hide"](this.itemPull[b]._listBase[e])}this.itemPull[b]._list[e]._autoCheck(c&&g)}}};this.doWithItem=function(a,b,c,e,g,r){if("object"==typeof a){var h=a[0],l=a[1],m=null,n;for(n in this.itemPull){if((this.itemPull[n]._value==l||null===l)&&this.itemPull[n]._group==h)return this.objPull[n][b](this.itemPull[n],c,e,g,r);if(null!=this.itemPull[n]._list&&!m)for(var q=0;q<this.itemPull[n]._list.length;q++)m=this.itemPull[n]._list[q].doWithItem(a,b,c,e,g)}if(null!=m)return m;if("getType"==b)return this.doWithItem(a[0],"getType")}else if(this.itemPull[this.idPrefix+a]){if((h=this.objPull[this.idPrefix+a])&&h[b])return h[b](this.itemPull[this.idPrefix+a],c,e,g,r)}else{m=null;for(n in this.itemPull)if(this.itemPull[n]._list&&!m)for(q=0;q<this.itemPull[n]._list.length;q++)null==m&&(m=this.itemPull[n]._list[q].doWithItem(a,b,c,e,g,r));return m}};this._removeItem=function(a,b){null!=b?a=this.doWithItem([a,b],"destruct"):this.doWithItem(a,"destruct");this._clearItemData(a)};this._clearItemData=function(a){if(this.itemPull[this.idPrefix+a]){a=this.idPrefix+a;try{this.objPull[a]=null,this.itemPull[a]=null,delete this.objPull[a],delete this.itemPull[a]}catch(n){}}else for(var b in this.itemPull)if(this.itemPull[b]._list)for(var c=0;c<this.itemPull[b]._list.length;c++)this.itemPull[b]._list[c]._clearItemData(a)};this.isItem=function(a,b){null!=b&&(a=[a,b]);return this.doWithItem(a,"isExist")};this.getItemType=function(a,b){a=[a,b||null];return this.doWithItem(a,"getType")};this.forEachItem=function(a){for(var b in this.objPull)if("radio"==this.objPull[b].t?a(this.itemPull[b]._group,this.itemPull[b]._value):a(String(b).replace(this.idPrefix,"")),this.itemPull[b]._list)for(var c=0;c<this.itemPull[b]._list.length;c++)this.itemPull[b]._list[c].forEachItem(a)};this.setItemLabel=function(a,b,c){null!=c?a=[a,b]:c=b;this.doWithItem(a,"setText",c)};this.getItemLabel=function(a,b){null!=b&&(a=[a,b]);return this.doWithItem(a,"getText")};this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(a,b){null!=b&&(a=[a,b]);this.doWithItem(a,"check");this._autoCheck()};this.uncheckItem=function(a,b){null!=b&&(a=[a,b]);this.doWithItem(a,"unCheck");this._autoCheck()};this.isItemChecked=function(a,b){null!=b&&(a=[a,b]);return this.doWithItem(a,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(a,b){for(var c in this.itemPull){if(this.itemPull[c]._group==a&&(null==b||this.itemPull[c]._value==b))return this.itemPull[c]._idd;if(null!=this.itemPull[c]._list)for(var e=0;e<this.itemPull[c]._list.length;e++){var g=this.itemPull[c]._list[e]._getRGroup(a,b);if(null!=g)return g}}return null};this.setItemValue=function(a,b){this.resetValidateCss(a,b);return"radio"==this.getItemType(a)?(null!=this._getRGroup(a,b)?this.checkItem(a,b):this.uncheckItem(a,this.getCheckedValue(a)),null):this.doWithItem(a,"setValue",b)};this.getItemValue=function(a,b){return"radio"==this.getItemType(a)?this.getCheckedValue(a):this.doWithItem(a,"getValue",b)};this.updateValues=function(){this._updateValues()};this.showItem=function(a,b){null!=b&&(a=[a,b]);this.doWithItem(a,"show")};this.hideItem=function(a,b){null!=b&&(a=[a,b]);this.doWithItem(a,"hide")};this.isItemHidden=function(a,b){null!=b&&(a=[a,b]);return this.doWithItem(a,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(a,b){this.doWithItem(a,"setWidth",b)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(a,b){this.doWithItem(a,"setHeight",b)};this.setItemFocus=function(a,b){null!=b&&(a=[a,b]);this.doWithItem(a,"setFocus")};this._updateValues=function(){for(var a in this.itemPull)if(this.objPull[a]&&"function"==typeof this.objPull[a].updateValue&&this.objPull[a].updateValue(this.itemPull[a]),this.itemPull[a]._list)for(var b=0;b<this.itemPull[a]._list.length;b++)this.itemPull[a]._list[b]._updateValues()};this._getItemByName=function(a){for(var b in this.itemPull){if(this.itemPull[b]._idd==a)return this.itemPull[b];if(null!=this.itemPull[b]._list)for(var c=0;c<this.itemPull[b]._list.length;c++){var e=this.itemPull[b]._list[c]._getItemByName(a);if(null!=e)return e}}return null};this._resetValidateCss=function(a){a.className=a.className.replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,b,c){if(a=this._getItemByName(a))null!=a._vcss&&this._resetValidateCss(a),a._vcss="string"==typeof c?c:"validate_"+(!0===b?"ok":"error"),a.className+=" "+a._vcss};this.resetValidateCss=function(a){for(var b in this.itemPull)if(null!=this.itemPull[b]._vcss&&this._resetValidateCss(this.itemPull[b]),null!=this.itemPull[b]._list)for(a=0;a<this.itemPull[b]._list.length;a++)this.itemPull[b]._list[a].resetValidateCss()};this._validateLoop=function(a){for(var b in this.objPull)if(a(String(b).replace(this.idPrefix,"")),this.itemPull[b]._list)for(var c=0;c<this.itemPull[b]._list.length;c++)this.itemPull[b]._list[c]._validateLoop(a)};this.validate=function(a){if(0!=this.callEvent("onBeforeValidate",[])){var b=!0;this._validateLoop(function(a,c){var g=e.doWithItem(a,"_validate");"boolean"!=typeof g&&(g=!0);b=g&&b},!0);this.callEvent("onAfterValidate",[b]);return b}};this.validateItem=function(a,b){"undefined"!=typeof b&&(a=[a,b]);return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=1==a};this.setReadonly=function(a,b){this.doWithItem(a,"setReadonly",b)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(a){for(var b=0;b<this._indexId.length;b++){var c=!0;if(1==a){var e=this.getItemType(this._indexId[b]);dhtmlXForm.prototype.items[e].setFocus||(c=!1)}if(c&&this._idIndex[this._indexId[b]].enabled)return this._indexId[b]}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(!0);null!=a&&this.setItemFocus(a)};this.enableItem=function(a,b){null!=b&&(a=[a,b]);this.doWithItem(a,"userEnable");this._autoCheck()};this.disableItem=function(a,b){null!=b&&(a=[a,b]);this.doWithItem(a,"userDisable");this._autoCheck()};this.isItemEnabled=function(a,b){null!=b&&(a=[a,b]);return this.doWithItem(a,"isUserEnabled")};this.clear=function(){var a={};this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");for(var b in this.itemPull){var c=this.itemPull[b]._idd;"ch"==this.itemPull[b]._type&&this.uncheckItem(c);this.itemPull[b]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(c,"");"combo"==this.itemPull[b]._type&&(this.itemPull[b]._apiChange=!0,this.getCombo(c).selectOption(0),this.itemPull[b]._apiChange=!1);if("se"==this.itemPull[b]._type){var e=this.getOptions(c);0<e.length&&(e[0].selected=!0)}"ra"==this.itemPull[b]._type&&(e=this.itemPull[b]._group,a[e]||(this.checkItem(e,this.doWithItem(c,"_getFirstValue")),a[e]=!0));if(this.itemPull[b]._list)for(e=0;e<this.itemPull[b]._list.length;e++)this.itemPull[b]._list[e].clear();if(this["setFormData_"+this.itemPull[b]._type])this["setFormData_"+this.itemPull[b]._type](c,"")}this._parentForm&&this._autoCheck();this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var a in this.objPull)this._removeItem(String(a).replace(this.idPrefix,""));this._ccTm&&window.clearTimeout(this._ccTm);this._formLS=null;for(var b=0;b<this.base.length;b++){for(;0<this.base[b].childNodes.length;)this.base[b].removeChild(this.base[b].childNodes[0]);this.base[b].parentNode&&this.base[b].parentNode.removeChild(this.base[b]);this.base[b]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(a in this)this[a]=null;e=null};for(var g in this.items)this.items[g].t=g,"undefined"==typeof this.items[g]._index&&(this.items[g]._index=!0),this.items[g].show||(this.items[g].show=function(a){a.style.display="";if(a._listObj)for(var b=0;b<a._listObj.length;b++)a._listObj[b].show(a._listBase[b])}),this.items[g].hide||(this.items[g].hide=function(a){a.style.display="none";if(a._listObj)for(var b=0;b<a._listObj.length;b++)a._listObj[b].hide(a._listBase[b])}),this.items[g].isHidden||(this.items[g].isHidden=function(a){return"none"==a.style.display}),this.items[g].userEnable||(this.items[g].userEnable=function(a){a._udis=!1}),this.items[g].userDisable||(this.items[g].userDisable=function(a){a._udis=!0}),this.items[g].isUserEnabled||(this.items[g].isUserEnabled=function(a){return!0!==a._udis}),this.items[g].getType||(this.items[g].getType=function(){return this.t}),this.items[g].isExist||(this.items[g].isExist=function(){return!0}),this.items[g]._validate||(this.items[g]._validate=function(a){if(!a._validate||!a._enabled)return!0;if("ch"==a._type||"ra"==a._type){var b=this.isChecked(a)?this.getValue(a):0;"ra"==a._type&&"undefined"==typeof b&&(b=0)}else b=this.getValue(a);for(var c=!0,e=0;e<a._validate.length;e++){var g="is"+a._validate[e];if(null!=b&&0!=b.length||"isNotEmpty"==g||"container"==a._type)g=dhtmlxValidation[g],"container"==a._type&&"function"==typeof g&&(g=function(){return!0}),"function"!=typeof g&&"function"==typeof a._validate[e]&&(g=a._validate[e]),"function"!=typeof g&&"function"==typeof window[a._validate[e]]&&(g=window[a._validate[e]]),c=("function"==typeof g?g(b,a._idd):(new RegExp(a._validate[e])).test(b))&&c,g=null}!1!==a.callEvent("onValidate"+(c?"Success":"Error"),[a._idd,b,c])&&a.getForm().setValidateCss(a._idd,c);return c});this._locked=!1;this._doLock=function(a){a=!0===a?!0:!1;this._locked!=a&&(this._locked=a,this._autoCheck(!this._locked))};this.lock=function(){this._doLock(!0)};this.unlock=function(){this._doLock(!1)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(a,b,c,e){return this.doWithItem(a,"setNumberFormat",b,c,e)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:!0,data:!0});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(a,b){this.callEvent("onButtonClick",[a,b])});this._updateBlocks=function(){this.forEachItem(function(a){"block"!=e.getItemType(a)&&"combo"!=e.getItemType(a)||e.doWithItem(a,"_setCss",e.skin,e.cont.style.fontSize)})};this._isObj=function(a){return null!=a&&"object"==typeof a&&"undefined"==typeof a.length};this._copyObj=function(a){if(this._isObj(a)){var b={},c;for(c in a)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c]}else for(b=[],c=0;c<a.length;c++)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c];return b};null!=b&&"object"==typeof b&&this._initObj(this._copyObj(b));this._parentForm&&this._updateBlocks();this._ccActive=!1;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={getInput:function(a){return a.getElementsByTagName("INPUT")[0]},render:function(a,b){a._type="ch";a._enabled=!0;a._checked=!1;a._value="undefined"==typeof b.value?null:String(b.value);a._ro=1==b.readonly;!1!==b._autoInputWidth&&(b.inputWidth=14);this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var c=document.createElement("DIV");c.className="dhxform_img chbx0";a.appendChild(c);isNaN(b.inputLeft)||(a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+"px");isNaN(b.inputTop)||(a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px");a.childNodes[a._ll?1:0].appendChild(c);a.childNodes[a._ll?1:0].firstChild.value=String(b.value);a._updateImgNode=function(a,b){a.childNodes[a._ll?1:0].lastChild.className=(b?"dhxform_actv_c":"dhxform_img")+" "+(a._checked?"chbx1":"chbx0")};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._idd])};1==b.checked&&this.check(a);1==b.hidden&&this.hide(a);1==b.disabled&&this.userDisable(a);this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(a,b){var c=document.createElement("DIV");c.className="dhxform_label "+b.labelAlign;1==b.wrap&&(c.style.whiteSpace="normal");a._ll?a.insertBefore(c,a.firstChild):a.appendChild(c);"undefined"!=typeof b.tooltip&&(c.title=b.tooltip);c.innerHTML="\x3cdiv class\x3d'dhxform_label_nav_link' onfocus\x3d'if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur\x3d'if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress\x3d'var e\x3devent||window.arguments[0];if(e.keyCode\x3d\x3d32||e.charCode\x3d\x3d32){e.cancelBubble\x3dtrue;if(e.preventDefault)e.preventDefault();else e.returnValue\x3dfalse;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup\x3d'var e\x3devent||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown\x3d'var e\x3devent||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart\x3d'var e\x3devent;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role\x3d'link' tabindex\x3d'0'\x3e"+b.label+(b.info?"\x3cspan class\x3d'dhxform_info'\x3e[?]\x3c/span\x3e":"")+(a._required?"\x3cspan class\x3d'dhxform_item_required'\x3e*\x3c/span\x3e":"")+"\x3c/div\x3e";isNaN(b.labelWidth)||(c.firstChild.style.width=parseInt(b.labelWidth)+"px");isNaN(b.labelHeight)||(c.firstChild.style.height=parseInt(b.labelHeight)+"px");isNaN(b.labelLeft)||(c.style.left=parseInt(b.labelLeft)+"px");isNaN(b.labelTop)||(c.style.top=parseInt(b.labelTop)+"px")},doAddInput:function(a,b,c,e,g,h,l){var m=document.createElement("DIV");m.className="dhxform_control";a._ll?a.appendChild(m):a.insertBefore(m,a.firstChild);var n=document.createElement(c);n.className=l;n.name=a._idd;n._idd=a._idd;n.id=b.uid;"string"==typeof e&&(n.type=e);if("INPUT"==c||"TEXTAREA"==c)n.onkeyup=function(b){b=b||event;a.callEvent("onKeyUp",[this,b,this._idd])},n.onkeydown=function(b){b=b||event;a.callEvent("onKeyDown",[this,b,this._idd])};"SELECT"==c&&"select"==b.type&&"material"==a.getForm().skin&&(window.dhx4.isOpera||window.dhx4.isChrome?n.className+=" dhxform_arrow_fix_webkit":window.dhx4.isEdge?n.className+=" dhxform_arrow_fix_edge":window.dhx4.isFF&&(n.className+=" dhxform_fix_ff"));m.appendChild(n);g&&(isNaN(b.inputLeft)||(m.style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(m.style.top=parseInt(b.inputTop)+"px"));e="";c=!1;h&&(isNaN(b.inputWidth)||(e+="width:"+parseInt(b.inputWidth)+"px;",c=!0),isNaN(b.inputHeight)||(e+="height:"+parseInt(b.inputHeight)+"px;"));"string"==typeof b.style&&(e+=b.style);n.style.cssText=e;b.maxLength&&n.setAttribute("maxLength",b.maxLength);b.connector&&n.setAttribute("connector",b.connector);h=null!=dhtmlXForm.prototype.items[this.t]?1==dhtmlXForm.prototype.items[this.t]._dimFix:!1;c&&(1=={input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]||h)&&(null==dhtmlXForm.prototype.items[this.t]._dim&&(dhtmlXForm.prototype.items[this.t]._dim=a.getForm()._checkDim(m,n)),n.style.width=parseInt(n.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px");"object"==typeof b.note&&(h=document.createElement("DIV"),h.className="dhxform_note",h.style.width=(isNaN(b.note.width)?n.offsetWidth:parseInt(b.note.width))+"px",h._w=b.note.width,h.innerHTML=b.note.text,m.appendChild(h),h=null);b.readonly&&this.setReadonly(a,!0);1==b.disabled&&this.userDisable(a);1==b.hidden&&"combo"!=this.t&&this.hide(a)},doUnloadNestedLists:function(a){if(a._list){for(var b=0;b<a._list.length;b++)a._list[b].unload(),a._list[b]=null,a._listObj[b]=null,a._listBase[b].parentNode.removeChild(a._listBase[b]),a._listBase[b]=null;a._list=null;a._listObj=null;a._listBase=null}},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;for(a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a)},doAttachEvents:function(a){var b=this;a.childNodes[a._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;a.preventDefault&&a.preventDefault();var c=a.target||a.srcElement;if(!this.parentNode._enabled||this.parentNode._ro||"undefined"!=typeof c.className&&"dhxform_note"==c.className)return a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1;b.doClick(this.parentNode)};a.childNodes[a._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;a.preventDefault&&a.preventDefault();if(!this.parentNode.parentNode._enabled)return a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1;var c=a.target||a.srcElement;if("undefined"!=typeof c.className&&"dhxform_info"==c.className)return this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,a]),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1;b.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();!a._enabled||a._ro||a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])||(this.setChecked(a,!a._checked),a._autoCheck(),a.callEvent("onChange",[a._idd,a._value,a._checked]))},doCheckValue:function(a){a._checked&&a._enabled?(a.childNodes[a._ll?1:0].firstChild.name=String(a._idd),a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)):(a.childNodes[a._ll?1:0].firstChild.name="",a.childNodes[a._ll?1:0].firstChild.value="")},setChecked:function(a,b){a._checked=!0===b?!0:!1;a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,!0)},unCheck:function(a){this.setChecked(a,!1)},isChecked:function(a){return a._checked},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1;null!=a._updateImgNode&&a._updateImgNode(a,!1);a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,b){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"\x3cspan class\x3d'dhxform_item_required'\x3e*\x3c/span\x3e":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,b){this.setChecked(a,!0===b||1==parseInt(b)||"true"==b||a._value===b)},getValue:function(a,b){return"realvalue"==b?a._value:"undefined"==typeof a._value||null==a._value?a._checked?1:0:a._value},setReadonly:function(a,b){a._ro=!0===b},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(a,b,c){a._type="ra";a._enabled=!0;a._checked=!1;a._group=b.name;a._value=b.value;a._uid=c;a._ro=1==b.readonly;a._rName=a._rId+a._group;this.r[a._idd]=a;b.inputWidth=14;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";c=document.createElement("DIV");c.className="dhxform_img rdbt0";a.appendChild(c);isNaN(b.inputLeft)||(a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+"px");isNaN(b.inputTop)||(a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px");a.childNodes[a._ll?1:0].appendChild(c);a.childNodes[a._ll?1:0].firstChild.name="";a.childNodes[a._ll?1:0].firstChild.value="";a._updateImgNode=function(a,b){a.childNodes[a._ll?1:0].lastChild.className=(b?"dhxform_actv_r":"dhxform_img")+" "+(a._checked?"rdbt1":"rdbt0")};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._group,a._value])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._group,a._value])};a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._group,this._value])};null==this.input[a._rName]&&(c=document.createElement("INPUT"),c.type="HIDDEN",c.name=b.name,c.firstValue=a._value,a.appendChild(c),this.input[a._rName]=c);this.firstValue[a._rName]||(this.firstValue[a._rName]=b.value);1==b.checked&&this.check(a);1==b.hidden&&this.hide(a);1==b.disabled&&this.userDisable(a);this.doAttachEvents(a);return this},destruct:function(a,b){if(a.lastChild==this.input[a._rName]){var c=!1,e;for(e in this.r)c||this.r[e]._group!=a._group||this.r[e]._idd==a._idd||(this.r[e].appendChild(this.input[a._rName]),c=!0);c||(this.input[a._rName].parentNode.removeChild(this.input[a._rName]),this.input[a._rName]=null,this.firstValue[a._rName]=null)}this.r[a._idd]=null;delete this.r[a._idd];a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a);return a._idd},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(a._enabled&&!a._checked&&!a._ro){var b=[a._group,a._value,!0];a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",b)||(this.setChecked(a,!0),a.getForm()._autoCheck(),a.callEvent("onChange",b))}},doCheckValue:function(a){var b=null,c;for(c in this.r)this.r[c]._checked&&this.r[c]._group==a._group&&this.r[c]._rId==a._rId&&(b=this.r[c]._value);null!=b&&this.r[c]._enabled?(this.input[a._rName].name=String(a._group),this.input[a._rName].value=b):(this.input[a._rName].name="",this.input[a._rName].value="");this.input[a._rName]._value=b},setChecked:function(a,b){b=!0===b;for(var c in this.r)if(this.r[c]._group==a._group&&this.r[c]._rId==a._rId){var e=!1;this.r[c]._idd==a._idd?this.r[c]._checked!=b&&(this.r[c]._checked=b,e=!0):this.r[c]._checked&&(this.r[c]._checked=!1,e=!0);e&&(e=this.r[c].childNodes[this.r[c]._ll?1:0].childNodes[1],e.className=e.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[c]._checked?" rdbt1":" rdbt0"))}this.doCheckValue(a)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,b){}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[a]=dhtmlXForm.prototype.items.checkbox[a]})();dhtmlXForm.prototype.items.select={render:function(a,b){a._type="se";a._enabled=!0;a._value=null;a._newValue=null;this.doAddLabel(a,b);this.doAddInput(a,b,"SELECT",null,!0,!0,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,b);null!=b.connector&&this.doLoadOptsConnector(a,b.connector);"undefined"!=typeof b.value&&null!=b.value&&this.setValue(a,b.value);return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;for(a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a)},doAddLabel:function(a,b){var c=document.createElement("DIV");c.className="dhxform_label "+b.labelAlign;c.innerHTML="\x3clabel for\x3d'"+b.uid+"'\x3e"+b.label+(b.info?"\x3cspan class\x3d'dhxform_info'\x3e[?]\x3c/span\x3e":"")+(a._required?"\x3cspan class\x3d'dhxform_item_required'\x3e*\x3c/span\x3e":"")+"\x3c/label\x3e";1==b.wrap&&(c.style.whiteSpace="normal");"undefined"!=typeof b.tooltip&&(c.title=b.tooltip);a.appendChild(c);if("undefined"==typeof b.label||null==b.label||0==b.label.length)c.style.display="none";isNaN(b.labelWidth)||(c.style.width=parseInt(b.labelWidth)+"px");isNaN(b.labelHeight)||(c.style.height=parseInt(b.labelHeight)+"px");isNaN(b.labelLeft)||(c.style.left=parseInt(b.labelLeft)+"px");isNaN(b.labelTop)||(c.style.top=parseInt(b.labelTop)+"px");b.info&&(c.onclick=function(a){a=a||event;var b=a.target||a.srcElement;if("undefined"!=typeof b.className&&"dhxform_info"==b.className)return this.parentNode.callEvent("onInfo",[this.parentNode._idd,a]),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1})},doAttachEvents:function(a){var b=a.childNodes[a._ll?1:0].childNodes[0],c=this;b.onclick=function(){c.doOnChange(this)};b.onkeydown=function(a){a=a||event;c.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,a,this.parentNode.parentNode._idd])};b.onchange=function(){c.doOnChange(this)};b.onkeyup=function(a){a=a||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,a,this.parentNode.parentNode._idd])};b=null;this.doAttachChangeLS(a)},doAttachChangeLS:function(a){a=a.childNodes[a._ll?1:0].childNodes[0];a.onfocus=function(){var a=this.parentNode.parentNode;a.getForm()._ccActivate(a._idd,this,a.getForm().getItemValue(a._idd,!0));a.getForm().callEvent("onFocus",[a._idd])};a.onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd);a.getForm().callEvent("onBlur",[a._idd])};a=null},doValidate:function(a){a.getForm().live_validate&&this._validate(a)},doLoadOpts:function(a,b,c){var e=a.childNodes[a._ll?1:0].childNodes[0];b=b.options;for(var g=!1,h=0;h<b.length;h++){var l=b[h].text||b[h].label;l&&"undefined"!=typeof l||(l="");l=new Option(l,b[h].value);"string"==typeof b[h].img_src&&l.setAttribute("img_src",b[h].img_src);e.options.add(l);"undefined"!=typeof b[h].selected&&1==window.dhx4.s2b(b[h].selected)&&(l.selected=!0,a._value=b[h].value,g=!0);"undefined"!=typeof b[h].checked&&1==window.dhx4.s2b(b[h].checked)&&l.setAttribute("checked","1");"undefined"!=typeof b[h].img&&l.setAttribute("img",b[h].img);"undefined"!=typeof b[h].img_dis&&l.setAttribute("img_dis",b[h].img_dis);"undefined"!=typeof b[h].css&&l.setAttribute("css",b[h].css)}!g&&0<=e.selectedIndex&&(a._value=e.options[e.selectedIndex].value);!0===c&&a.callEvent("onOptionsLoaded",[a._idd]);this._checkNoteWidth(a)},doLoadOptsConnector:function(a,b){var c=this;a._connector_working=!0;window.dhx4.ajax.get(b,function(b){b=b.xmlDoc.responseXML;if(null!=b&&(b=b.getElementsByTagName("data"),null!=b&&null!=b[0])){b=b[0];for(var e=[],h=0;h<b.childNodes.length;h++)if("undefined"!=typeof b.childNodes[h].tagName&&"item"==String(b.childNodes[h].tagName).toLowerCase()){var l=b.childNodes[h];e.push({label:l.getAttribute("label"),value:l.getAttribute("value"),selected:null!=l.getAttribute("selected")})}c.doLoadOpts(a,{options:e},!0);a._connector_working=!1;null!=a._connector_value&&(c.setValue(a,a._connector_value),a._connector_value=null);c=a=null}})},doOnChange:function(a){var b=a.parentNode.parentNode;b._newValue=0<=a.selectedIndex?a.options[a.selectedIndex].value:null;if(b._newValue!=b._value){if(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])){for(var c=0;c<a.options.length;c++)a.options[c].value==b._value&&(a.options[c].selected=!0);return}b._value=b._newValue;b.callEvent("onChange",[b._idd,b._value]);"se"==b._type&&b.getForm().live_validate&&this._validate(b)}b._autoCheck()},setText:function(a,b){b||(b="");a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"\x3cspan class\x3d'dhxform_item_required'\x3e*\x3c/span\x3e":"");a.childNodes[a._ll?0:1].style.display=0==b.length||null==b?"none":""},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1;a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(a,b){if(a._connector_working)a._connector_value=b;else{for(var c=this.getOptions(a),e=0;e<c.length;e++)c[e].value==b&&(c[e].selected=!0,a._value=c[e].value);null!=a._list&&0<a._list.length&&a.getForm()._autoCheck();a.getForm()._ccReload(a._idd,a._value)}},getValue:function(a){var b=-1;a=this.getOptions(a);for(var c=0;c<a.length;c++)a[c].selected&&(b=a[c].value);return b},setWidth:function(a,b){a.childNodes[a._ll?1:0].childNodes[0].style.width=b+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(a){var b;null!=a.childNodes[a._ll?1:0].childNodes[1]&&(b=a.childNodes[a._ll?1:0].childNodes[1],null!=b.className&&0<=b.className.search(/dhxform_note/gi)&&"auto"==b._w&&(b.style.width=a.childNodes[a._ll?1:0].childNodes[0].offsetWidth+"px"))}};(function(){for(var a in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[a]=dhtmlXForm.prototype.items.checkbox[a]})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(a,b,c){var e=a.childNodes[a._ll?1:0].childNodes[0];e.multiple=!0;isNaN(b.size)||(e.size=Number(b.size));a._value=[];a._newValue=[];b=b.options;for(var g=0;g<b.length;g++){var h=new Option(b[g].text||b[g].label,b[g].value);e.options.add(h);if(1==b[g].selected||"true"==b[g].selected)h.selected=!0,a._value.push(b[g].value)}!0===c&&a.callEvent("onOptionsLoaded",[a._idd]);this._checkNoteWidth(a)},doAttachEvents:function(a){a=a.childNodes[a._ll?1:0].childNodes[0];var b=this;a.onfocus=function(){b.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd])};a.onblur=function(){b.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onBlur",[a._idd])};a.onclick=function(){b.doOnChange(this);this.parentNode.parentNode._autoCheck()}},doOnChange:function(a){var b=a.parentNode.parentNode;b._newValue=[];for(var c=0;c<a.options.length;c++)a.options[c].selected&&b._newValue.push(a.options[c].value);if(b._value.sort().toString()!=b._newValue.sort().toString()){if(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])){for(var e={},c=0;c<b._value.length;c++)e[b._value[c]]=!0;for(c=0;c<a.options.length;c++)a.options[c].selected=1==e[a.options[c].value];return}b._value=[];for(c=0;c<b._newValue.length;c++)b._value.push(b._newValue[c]);b.callEvent("onChange",[b._idd,b._value])}b._autoCheck()},setValue:function(a,b){var c={};"string"==typeof b&&(b=b.split(","));"object"!=typeof b&&(b=[b]);for(var e=0;e<b.length;e++)c[b[e]]=!0;for(var g=this.getOptions(a),e=0;e<g.length;e++)g[e].selected=1==c[g[e].value];a._autoCheck()},getValue:function(a){var b=[];a=this.getOptions(a);for(var c=0;c<a.length;c++)a[c].selected&&b.push(a[c].value);return b}};(function(){for(var a in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[a]||(dhtmlXForm.prototype.items.multiselect[a]=dhtmlXForm.prototype.items.select[a])})();
dhtmlXForm.prototype.items.input={render:function(a,b){var c=!isNaN(b.rows);a._type="ta";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,c?"TEXTAREA":"INPUT",c?null:"TEXT",!0,!0,"dhxform_textarea");this.doAttachEvents(a);c&&(a.childNodes[a._ll?1:0].childNodes[0].rows=Number(b.rows)+(window.dhx4.isIE6?1:0));if("undefined"!=typeof b.numberFormat){var e=null,g=null;"string"!=typeof b.numberFormat?(c=b.numberFormat[0],e=b.numberFormat[1]||null,g=b.numberFormat[2]||null):(c=b.numberFormat,"string"==typeof b.groupSep&&(e=b.groupSep),"string"==typeof b.decSep&&(g=b.decSep));this.setNumberFormat(a,c,e,g,!1)}this.setValue(a,b.value);return this},doAttachEvents:function(a){a=a.childNodes[a._ll?1:0].childNodes[0];if("undefined"!=typeof a.tagName&&1=={input:1,textarea:1,select:1}[a.tagName.toLowerCase()]){var b=this;a.onfocus=function(){var a=this.parentNode.parentNode;null!=a._df&&(this.value=a._value||"");a.getForm()._ccActivate(a._idd,this,this.value);a.getForm().callEvent("onFocus",[a._idd])};a.onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd);b.updateValue(a,!0);a.getForm().live_validate&&b._validate(a);a.getForm().callEvent("onBlur",[a._idd])}}a=null},updateValue:function(a,b){var c=a.childNodes[a._ll?1:0].childNodes[0].value,e=a.getForm();if(1==e._ccActive&&null!=e._formLS&&null!=e._formLS[a._idd]||null==a._df||c!=window.dhx4.template._getFmtValue(a._value,a._df))if(b||null==a._df||a._value!=c||c!=window.dhx4.template._getFmtValue(c,a._df))a._value!=c?a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,c])?null!=a._df?this.setValue(a,a._value):a.childNodes[a._ll?1:0].childNodes[0].value=a._value:(null!=a._df&&b?this.setValue(a,c):a._value=c,a.callEvent("onChange",[a._idd,c])):null!=a._df&&b&&this.setValue(a,a._value)},setValue:function(a,b){a._value="undefined"!=typeof b&&null!=b?b:"";var c=String(a._value)||"",e=a.childNodes[a._ll?1:0].childNodes[0];null!=a._df&&(c=window.dhx4.template._getFmtValue(c,a._df));e.value!=c&&(e.value=c,a.getForm()._ccReload(a._idd,c))},getValue:function(a){var b=a.getForm();b._formLS&&null!=b._formLS[a._idd]&&this.updateValue(a);return"undefined"!=typeof a._value&&null!=a._value?a._value:""},setReadonly:function(a,b){a._ro=!0===b;a._ro?a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true"):a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(a){a._ro||(a._ro=!1);return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(a,b,c,e,g){"boolean"!=typeof g&&(g=!0);if(""==b)return a._df=null,g&&this.setValue(a,a._value),!0;if("string"==typeof b){b=window.dhx4.template._parseFmt(b,c,e);if(0==b)return!1;a._df=b;g&&this.setValue(a,a._value);return!0}}};(function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[a]=dhtmlXForm.prototype.items.select[a]})();dhtmlXForm.prototype.items.password={render:function(a,b){a._type="pw";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","PASSWORD",!0,!0,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,b.value);return this}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[a]=dhtmlXForm.prototype.items.input[a]})();dhtmlXForm.prototype.items.file={render:function(a,b){a._type="fl";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","FILE",!0,!1,"dhxform_textarea");var c=a.childNodes[a._ll?1:0].childNodes[0],e=this;c.onfocus=function(){var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd])};c.onblur=function(){var a=this.parentNode.parentNode;a.getForm().live_validate&&e._validate(a);a.getForm().callEvent("onBlur",[a._idd])};c=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=function(){a.callEvent("onChange",[a._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[a]=dhtmlXForm.prototype.items.input[a]})();dhtmlXForm.prototype.items.label={_index:!1,render:function(a,b){a._type="lb";a._enabled=!0;a._checked=!0;var c=document.createElement("DIV");c.className="dhxform_txt_label2"+(b._isTopmost?" topmost":"");c.innerHTML=b.label;a.appendChild(c);1==b.hidden&&this.hide(a);1==b.disabled&&this.userDisable(a);isNaN(b.labelWidth)||(c.style.width=parseInt(b.labelWidth)+"px");isNaN(b.labelHeight)||(c.style.height=parseInt(b.labelHeight)+"px");isNaN(b.labelLeft)||(c.style.left=parseInt(b.labelLeft)+"px");isNaN(b.labelTop)||(c.style.top=parseInt(b.labelTop)+"px");return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a)},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1},setText:function(a,b){a.firstChild.innerHTML=b},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[a]=dhtmlXForm.prototype.items.checkbox[a]})();dhtmlXForm.prototype.items.button={render:function(a,b){a._type="bt";a._enabled=!0;a._name=b.name;a.className=String(a.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[0].childNodes[0],b,this._idd])};a.innerHTML='\x3cdiv class\x3d"dhxform_btn" role\x3d"link" tabindex\x3d"0" dir\x3d"ltr"\x3e\x3cdiv class\x3d"dhxform_btn_txt"\x3e'+b.value+'\x3c/div\x3e\x3cdiv class\x3d"dhxform_btn_filler" disabled\x3d"true"\x3e\x3c/div\x3e\x3c/div\x3e';if(!isNaN(b.width)){var c=Math.max(b.width,10);null==dhtmlXForm.prototype.items[this.t]._dim&&(a.firstChild.style.width=c+"px",dhtmlXForm.prototype.items[this.t]._dim=a.getForm()._checkDim(a,a.firstChild));a.firstChild.style.width=c-dhtmlXForm.prototype.items[this.t]._dim+"px";a.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}isNaN(b.inputLeft)||(a.childNodes[0].style.left=parseInt(b.inputLeft)+"px");isNaN(b.inputTop)||(a.childNodes[0].style.top=parseInt(b.inputTop)+"px");1==b.hidden&&this.hide(a);1==b.disabled&&this.userDisable(a);"undefined"!=typeof b.tooltip&&(a.firstChild.title=b.tooltip);a.onselectstart=function(a){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};a.firstChild.onselectstart=function(a){a=a||event;a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};a.firstChild.onkeypress=function(a){a=a||event;if((32==a.keyCode||32==a.charCode||13==a.keyCode||13==a.charCode)&&!this.parentNode._busy)return this.parentNode._busy=!0,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]),!1};a.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};a.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};a.firstChild.onkeyup=function(a){this.parentNode._doOnKeyUpDown("onKeyUp",a||event)};a.firstChild.onkeydown=function(a){this.parentNode._doOnKeyUpDown("onKeyDown",a||event)};a.firstChild.onmouseover=function(){this.parentNode._enabled&&(this._isOver=!0,this.className="dhxform_btn dhxform_btn_over")};a.firstChild.onmouseout=function(){this.parentNode._enabled&&(this.className="dhxform_btn",this._isOver=this._pressed=this._allowClick=!1)};a.firstChild.ontouchstart=a.firstChild.onmousedown=function(a){a=a||event;"touchstart"==a.type&&a.preventDefault&&a.preventDefault();2<=a.button||this._pressed||!this.parentNode._enabled||(this.className="dhxform_btn dhxform_btn_pressed",this._pressed=this._allowClick=!0)};a.firstChild.ontouchend=a.firstChild.onmouseup=function(a){a=a||event;2<=a.button||!this._pressed||(a=this.parentNode,a._enabled&&(a._busy=!1,this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":""),this._pressed&&this._allowClick&&a.callEvent("_onButtonClick",[a._name,a._cmd]),this._pressed=this._allowClick=!1))};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.ontouchend=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;for(a.firstChild.onmouseup=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a)},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role","link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[a]=dhtmlXForm.prototype.items.checkbox[a]})();dhtmlXForm.prototype.items.hidden={_index:!1,render:function(a,b){a.style.display="none";a._name=b.name;a._type="hd";a._enabled=!0;var c=document.createElement("INPUT");c.type="HIDDEN";c.name=b.name;c.value=b.value||"";a.appendChild(c);return this},destruct:function(a){for(this.doUnloadNestedLists(a);0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a)},enable:function(a){a._enabled=!0;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=!1;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(a,b){a.childNodes[0].value=b},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[a]=dhtmlXForm.prototype.items.checkbox[a]})();dhtmlXForm.prototype.items.list={_index:!1,render:function(a,b){a._type="list";a._enabled=!0;a._isNestedForm=!0;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a,null,b)]},destruct:function(a){}};dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(a,b){a._type="fs";parseInt(b.inputWidth);a._width=b.width;a._enabled=!0;a._checked=!0;a.className="fs_"+b.position+("string"==typeof b.className?" "+b.className:"");var c=document.createElement("FIELDSET");c.className="dhxform_fs";var e=String(b.labelAlign).replace("align_","");c.innerHTML="\x3clegend class\x3d'fs_legend' align\x3d'"+e+"' style\x3d'text-align:"+e+"'\x3e"+b.label+"\x3c/legend\x3e";a.appendChild(c);isNaN(b.inputLeft)||(c.style.left=parseInt(b.inputLeft)+"px");isNaN(b.inputTop)||(c.style.top=parseInt(b.inputTop)+"px");"auto"==b.inputWidth||isNaN(b.inputWidth)||(c.style.width=parseInt(b.inputWidth)+"px",e=parseInt(c.style.width),c.offsetWidth>e&&(c.style.width=e+(e-c.offsetWidth)+"px"));a._addSubListNode=function(){var a=document.createElement("DIV");a._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(a);return a};1==b.hidden&&this.hide(a);1==b.disabled&&this.userDisable(a);return this},destruct:function(a){this.doUnloadNestedLists(a);a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;for(a.getForm=null;0<a.childNodes.length;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a)},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=!0;0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""))},disable:function(a){a._enabled=!1;0>String(a.className).search("disabled")&&(a.className+=" disabled")},setWidth:function(a,b){a.childNodes[0].style.width=b+"px";a._width=b},getWidth:function(a){return a._width}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[a]=dhtmlXForm.prototype.items.checkbox[a]})();dhtmlXForm.prototype.items.block={_index:!1,render:function(a,b){a._type="bl";a._width=b.width;a._enabled=!0;a._checked=!0;a.className="block_"+b.position+("string"==typeof b.className?" "+b.className:"");var c=document.createElement("DIV");c.className="dhxform_obj_"+a.getForm().skin+" dhxform_block";c.style.fontSize=a.getForm().cont.style.fontSize;b.style&&(c.style.cssText=b.style);"undefined"!=typeof b.id&&(c.id=b.id);a.appendChild(c);isNaN(b.inputLeft)||(c.style.left=parseInt(b.inputLeft)+"px");isNaN(b.inputTop)||(c.style.top=parseInt(b.inputTop)+"px");"auto"==b.inputWidth||isNaN(b.inputWidth)||(c.style.width=parseInt(b.inputWidth)+"px");isNaN(b.blockOffset)||(a._ofsNested=b.blockOffset);a._addSubListNode=function(){var a=document.createElement("DIV");a._inBlcok=!0;"undefined"!=typeof this._ofsNested&&(a._ofsNested=this._ofsNested);this.childNodes[0].appendChild(a);return a};1==b.hidden&&this.hide(a);1==b.disabled&&this.userDisable(a);return this},_setCss:function(a,b,c){a.firstChild.className="dhxform_obj_"+b+" dhxform_block";a.firstChild.style.fontSize=c}};(function(){for(var a in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[a]=dhtmlXForm.prototype.items.fieldset[a]})();dhtmlXForm.prototype.items.newcolumn={_index:!1};dhtmlXForm.prototype.items.template={render:function(a,b){isNaN(b.rows);a._type="tp";a._enabled=!0;null!=b.format&&("function"==typeof b.format?a.format=b.format:"string"==typeof b.format&&"function"==typeof window[b.format]&&(a.format=window[b.format]));null==a.format&&(a.format=function(a,b){return b});this.doAddLabel(a,b);this.doAddInput(a,b,"DIV",null,!0,!0,"dhxform_item_template");this.setValue(a,b.value||"");return this},destruct:function(a){a.format=null;this.d2(a)},setValue:function(a,b){a._value=b;a.childNodes[a._ll?1:0].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1}};(function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[a]=dhtmlXForm.prototype.items.select[a]})();dhtmlXForm.prototype._ulToObject=function(a,b){for(var c=[],e=0;e<a.childNodes.length;e++){if("li"==String(a.childNodes[e].tagName||"").toLowerCase()){for(var g={},h=a.childNodes[e],l=0;l<b.length;l++)null!=h.getAttribute(b[l])&&(g[String(b[l]).replace("ftype","type")]=h.getAttribute(b[l]));if(!g.label)try{g.label=h.firstChild.nodeValue}catch(m){}l=h.getElementsByTagName("UL");null!=l[0]&&(g["select"==g.type?"options":"list"]=dhtmlXForm.prototype._ulToObject(l[0],b));for(l=0;l<h.childNodes.length;l++)"userdata"==String(h.childNodes[l].tagName||"").toLowerCase()&&(g.userdata||(g.userdata={}),g.userdata[h.childNodes[l].getAttribute("name")]=h.childNodes[l].firstChild.nodeValue);c[c.length]=g}if("div"==String(a.childNodes[e].tagName||"").toLowerCase()){g={type:"label"};try{g.label=a.childNodes[e].firstChild.nodeValue}catch(m){}c[c.length]=g}}return c};dhtmlXForm.prototype.setUserData=function(a,b,c,e){if("undefined"!=typeof e){var g=this.doWithItem([a,b],"_getId");null!=g&&(a=g,b=c,c=e)}this._userdata||(this._userdata={});this._userdata[a]=this._userdata[a]||{};this._userdata[a][b]=c};dhtmlXForm.prototype.getUserData=function(a,b,c){if("undefined"!=typeof c){var e=this.doWithItem([a,b],"_getId");null!=e&&(a=e,b=c)}return null!=this._userdata&&"undefined"!=typeof this._userdata[a]&&"undefined"!=typeof this._userdata[a][b]?this._userdata[a][b]:""};dhtmlXForm.prototype.setRTL=function(a){(this._rtl=!0===a?!0:!1)?0>String(this.cont).search(/dhxform_rtl/gi)&&(this.cont.className+=" dhxform_rtl"):0<=String(this.cont).search(/dhxform_rtl/gi)&&(this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,""))};_dhxForm_doClick=function(a,b){if("object"==typeof b){var c=b[1];b=b[0]}if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent(b,!0,!1);a.dispatchEvent(e)}else document.createEventObject&&(e=document.createEventObject(),e.button=1,a.fireEvent("on"+b,e));c&&window.setTimeout(function(){_dhxForm_doClick(a,c)},100)};dhtmlXForm.prototype.setFormData=function(a){for(var b in a){var c=this.getItemType(b);switch(c){case "checkbox":this[1==a[b]||1==parseInt(a[b])||"true"==a[b]||a[b]==this.getItemValue(b,"realvalue")?"checkItem":"uncheckItem"](b);break;case "radio":this.checkItem(b,a[b]);break;case "input":case "textarea":case "password":case "select":case "multiselect":case "hidden":case "template":case "combo":case "calendar":case "colorpicker":case "editor":this.setItemValue(b,a[b]);break;default:if(this["setFormData_"+c])this["setFormData_"+c](b,a[b]);else this.hId||(this.hId=this._genStr(12)),this.setUserData(this.hId,b,a[b])}}};dhtmlXForm.prototype.getFormData=function(a,b){var c={},e;for(e in this.itemPull){var g=this.itemPull[e]._idd,h=this.itemPull[e]._type;"ch"==h&&(c[g]=this.isItemChecked(g)?this.getItemValue(g):0);"ra"!=h||c[this.itemPull[e]._group]||(c[this.itemPull[e]._group]=this.getCheckedValue(this.itemPull[e]._group));h in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(c[g]=this.getItemValue(g,a));this["getFormData_"+h]&&(c[g]=this["getFormData_"+h](g));if("up"==h){var g=this.getItemValue(g),l;for(l in g)c[l]=g[l]}if(this.itemPull[e]._list)for(g=0;g<this.itemPull[e]._list.length;g++){var h=this.itemPull[e]._list[g].getFormData(a,b),m;for(m in h)c[m]=h[m]}}if(!b&&this.hId&&this._userdata[this.hId])for(e in this._userdata[this.hId])c[e]||(c[e]=this._userdata[this.hId][e]);return c};dhtmlXForm.prototype.adjustParentSize=function(){for(var a=0,b=-1,c=0;c<this.base.length;c++)a+=this.base[c].firstChild.offsetWidth,this.base[c].offsetHeight>b&&(b=this.base[c].offsetHeight);c=!1;try{if(c=1==this.cont.parentNode.parentNode.parentNode.parentNode._isCell)var e=this.cont.parentNode.parentNode.parentNode.parentNode}catch(h){}if(c&&"undefined"!=typeof e)0<a&&e.setWidth(a+10),0<b&&e.setHeight(b+e.firstChild.firstChild.offsetHeight+5);else{e=!1;try{if(e=1==this.cont.parentNode.parentNode.parentNode._isWindow){var g=this.cont.parentNode.parentNode;"function"==typeof g.callEvent&&(this.cont.style.display="none",g.callEvent("_setCellSize",[a+15,b+15]),this.cont.style.display="")}}catch(h){}}};dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))};dhtmlXForm.prototype.send=function(a,b,c,e){"function"==typeof b?(c=b,b="post"):b="get"==b?"get":"post";if(!0===e||this.validate()){var g=this.getFormData(!0);e=[];for(var h in g)e.push(h+"\x3d"+encodeURIComponent(g[h]));h=function(a){c&&c.call(this,a,a.xmlDoc.responseText)};"get"==b?window.dhx4.ajax.get(a+(-1==a.indexOf("?")?"?":"\x26")+e.join("\x26"),h):window.dhx4.ajax.post(a,e.join("\x26"),h)}};dhtmlXForm.prototype.save=function(a,b){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(a,b){this.formId=b};dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(a,c){var b=this.obj.getFormData(!0);b[this.action_param]=this.obj.getUserData(a,this.action_param);return b};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(a,c,e,g){"inserted"!=c&&"updated"!=c&&"error"!=c&&"invalid"!=c||this.obj.resetDataProcessor("updated");if("inserted"==c||"updated"==c)this.obj._last_load_data=this.obj.getFormData(!0);this.obj.callEvent("onAfterSave",[this.obj.formId,g]);return!0});a.autoUpdate=!1;a.setTransactionMode("POST",!0);this.dp=a;this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,a))};dhtmlXForm.prototype._ccActivate=function(a,b,c){this._formLS||(this._formLS={});this._formLS[a]||(this._formLS[a]={input:b,value:c});this._ccActive||(this._ccActive=!0,this._ccDo())};dhtmlXForm.prototype._ccDeactivate=function(a){this._ccTm&&window.clearTimeout(this._ccTm);this._ccActive=!1;null!=this._formLS&&null!=this._formLS[a]&&(this._formLS[a].input=null,this._formLS[a]=null,delete this._formLS[a])};dhtmlXForm.prototype._ccDo=function(){this._ccTm&&window.clearTimeout(this._ccTm);for(var a in this._formLS){var b=this._formLS[a].input;if("select"==String(b.tagName).toLowerCase()){var c="";0<=b.selectedIndex&&b.selectedIndex<b.options.length&&(c=b.options[b.selectedIndex].value)}else c=b.value;c!=this._formLS[a].value&&(this._formLS[a].value=c,this.callEvent("onInputChange",[b._idd,c,this]));b=null}if(this._ccActive){var e=this;this._ccTm=window.setTimeout(function(){e._ccDo();e=null},100)}};dhtmlXForm.prototype._ccReload=function(a,b){this._formLS&&this._formLS[a]&&(this._formLS[a].value=b)};dhtmlXForm.prototype._checkDim=function(a,b){var c=document.createElement("DIV");c.className="dhxform_obj_"+this.skin;c.style.cssText+=1==dhx4.isIE6?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;";document.body.appendChild(c);var e=a.parentNode,g=a.nextSibling;c.appendChild(a);var h=parseInt(b.style.width),h=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?b.offsetWidth:b.clientWidth)-h;null!=g?e.insertBefore(a,g):e.appendChild(a);c.parentNode.removeChild(c);return h};(function(){var a="ftype name value label check checked disabled text rows select selected width style className labelWidth labelHeight labelLeft labelTop inputWidth inputHeight inputLeft inputTop position size".split(" ");dhtmlXForm.prototype.loadStructHTML=function(b){b="string"===typeof b?document.getElementById(b):b;this.loadStruct(this._ulToObject(b,a))};dhtmlXForm.prototype._autoload=function(){for(var b=document.getElementsByTagName("UL"),c=[],e=0;e<b.length;e++)if("dhtmlxForm"==b[e].className){var g=document.createElement("DIV");c[c.length]={nodeUL:b[e],nodeForm:g,data:dhtmlXForm.prototype._ulToObject(b[e],a),name:b[e].getAttribute("name")||null}}for(e=0;e<c.length;e++)if(c[e].nodeUL.parentNode.insertBefore(c[e].nodeForm,c[e].nodeUL),b=new dhtmlXForm(c[e].nodeForm,c[e].data),null!==c[e].name&&(window[c[e].name]=b),b=c[e].nodeUL.getAttribute("oninit")||null,c[e].nodeUL.parentNode.removeChild(c[e].nodeUL),c[e].nodeUL=null,c[e].nodeForm=null,c[e].data=null,c[e]=null,b)if("function"==typeof b)b();else if("function"==typeof window[b])window[b]();"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXForm.prototype._autoload,!1):window.detachEvent("onload",dhtmlXForm.prototype._autoload)};"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXForm.prototype._autoload,!1):window.attachEvent("onload",dhtmlXForm.prototype._autoload)})();"undefined"!=typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachForm=function(a){this.callEvent("_onBeforeContentAttach",["form"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";window.dhtmlx&&dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(b):b.style.overflow="auto";this._attachObject(b);this.dataType="form";this.dataObj=new dhtmlXForm(b,a,this.conf.skin);this.callEvent("_onContentAttach",[]);return this.dataObj});dhtmlXForm.prototype.items.combo={render:function(a,b){a._type="combo";a._enabled=!0;a._value=null;a._newValue=null;var c=a.getForm().skin;"undefined"!=typeof b.inputWidth&&"material"==c&&null!=String(b.inputWidth).match(/^\d*$/)&&(b.inputWidth=parseInt(b.inputWidth)+2);this.doAddLabel(a,b);this.doAddInput(a,b,"SELECT",null,!0,!0,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,b);a.onselectstart=function(a){return!0};a.childNodes[a._ll?1:0].childNodes[0].setAttribute("mode",b.comboType||"");b.comboImagePath&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("imagePath",b.comboImagePath);b.comboDefaultImage&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("defaultImage",b.comboDefaultImage);b.comboDefaultImageDis&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("defaultImageDis",b.comboDefaultImageDis);a._combo=new dhtmlXComboFromSelect(a.childNodes[a._ll?1:0].childNodes[0]);a._combo.setSkin(c);a._combo._currentComboValue=a._combo.getSelectedValue();a._combo.getInput().id=b.uid;"material"==c&&(a._combo.list.className+=" dhxform_obj_"+c);var e=this;a._combo.attachEvent("onChange",function(){e.doOnChange(this)});b.connector&&this.doLoadOptsConnector(a,b.connector);b.filtering?a._combo.enableFilteringMode(!0):b.serverFiltering&&a._combo.enableFilteringMode(!0,b.serverFiltering,b.filterCache,b.filterSubLoad);1==b.readonly&&this.setReadonly(a,!0);1==b.hidden&&this.hide(a);b.style&&(a._combo.DOMelem_input.style.cssText+=b.style);a._combo.attachEvent("onFocus",function(){var a=this.cont.parentNode.parentNode,b=a.getForm();("dhx_terrace"==b.skin||"material"==b.skin)&&0>this.cont.className.search(/combo_in_focus/)&&(this.cont.className+=" combo_in_focus");b.callEvent("onFocus",[a._idd])});a._combo.attachEvent("onBlur",function(){var a=this.cont.parentNode.parentNode,b=a.getForm();("dhx_terrace"==b.skin||"material"==b.skin)&&0<=this.cont.className.search(/combo_in_focus/)&&(this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,""));b.callEvent("onBlur",[a._idd])});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.d2(a)},doAttachEvents:function(a){var b=this;a.childNodes[a._ll?1:0].childNodes[0].onchange=function(){b.doOnChange(this);b.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){a.getForm().hot_validate&&this._validate(a)},doOnChange:function(a){var b=a.base.parentNode.parentNode.parentNode;if(!b._apiChange){a._newComboValue=a.getSelectedValue();if(a._newComboValue!=a._currentComboValue){if(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,a._currentComboValue,a._newComboValue]))return window.setTimeout(function(){a.setComboValue(a._currentComboValue)},1),!1;a._currentComboValue=a._newComboValue;b.callEvent("onChange",[b._idd,a._currentComboValue])}b._autoCheck()}},doLoadOptsConnector:function(a,b){var c=this,e=a;a._connector_working=!0;a._apiChange=!0;a._combo.load(b,function(){e.callEvent("onOptionsLoaded",[e._idd]);e._connector_working=!1;null!=e._connector_value&&(c.setValue(e,e._connector_value),e._connector_value=null);e._apiChange=!1;c=e=null})},enable:function(a){0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a._enabled=!0;a._combo.enable()},disable:function(a){0>String(a.className).search("disabled")&&(a.className+=" disabled");a._enabled=!1;a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,b){a._connector_working?a._connector_value=b:(a._apiChange=!0,a._combo.setComboValue(b),a._combo._currentComboValue=a._combo.getActualValue(),a._apiChange=!1)},getValue:function(a){return a._combo.getActualValue()},setWidth:function(a,b){a.childNodes[a._ll?1:0].childNodes[0].style.width=b+"px"},setReadonly:function(a,b){a._combo&&(a._combo_ro=b,a._combo.readonly(a._combo_ro))},isReadonly:function(a,b){return a._combo_ro||!1},setFocus:function(a){a._enabled&&a._combo.setFocus()},_setCss:function(a,b,c){a._combo.setFontSize(c,c)}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1})dhtmlXForm.prototype.items.combo[a]=dhtmlXForm.prototype.items.select[a]})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")};dhtmlXForm.prototype.items.container={render:function(a,b){a._type="container";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,"DIV",null,!0,!0,"dhxform_container");return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=!0;0<=String(a.className).search("disabled")&&(a.className=String(a.className).replace(/disabled/gi,""));a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=!1;0>String(a.className).search("disabled")&&(a.className+=" disabled");a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")};(function(){for(var a in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.container[a]||(dhtmlXForm.prototype.items.container[a]=dhtmlXForm.prototype.items.input[a])})();dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(a,b){var c=this;a._type="colorpicker";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea");a._value=b.value||"";a.childNodes[a._ll?1:0].childNodes[0].value=a._value;var e={input:a.childNodes[a._ll?1:0].childNodes[0],custom_colors:1==window.dhx4.s2b(b.enableCustomColors),skin:a.getForm().skin};this.colorpicker[a._idd]=new dhtmlXColorPicker(e);this.colorpicker[a._idd]._nodes[0].valueColor=null;this.colorpicker[a._idd].base.className+=" dhtmlxcp_in_form";"undefined"!=typeof b.customColors&&this.colorpicker[a._idd].setCustomColors(b.customColors);"string"==typeof b.cpPosition&&this.colorpicker[a._idd].setPosition(b.cpPosition);this.colorpicker[a._idd].attachEvent("onSelect",function(b){a._value!=b&&(a.checkEvent("onBeforeChange")&&!0!==a.callEvent("onBeforeChange",[a._idd,a._value,b])?a.childNodes[a._ll?1:0].childNodes[0].value=a._value:(a._value=b,c.setValue(a,b),a.callEvent("onChange",[a._idd,a._value])))});this.colorpicker[a._idd].attachEvent("onHide",function(b){b=a.childNodes[a._ll?1:0].childNodes[0];b.value!=a._value&&(b.value=a._value)});a.childNodes[a._ll?1:0].childNodes[0]._idd=a._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){this.colorpicker[a._idd].unload&&this.colorpicker[a._idd].unload();this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.d2(a)},setSkin:function(a,b){this.colorpicker[a._idd].setSkin(b)}};(function(){for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.colorpicker[a]=dhtmlXForm.prototype.items.input[a]})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")};(function(){var a={assert:function(b,c){b||a.assert_error(c)},assert_error:function(b){a.log("error",b);a.message&&"string"==typeof b&&a.message({type:"debug",text:b,expire:-1});!1!==a.debug&&eval("debugger;")},assert_core_ready:function(){window.dhx_on_core_ready&&dhx_on_core_ready()},codebase:"./",name:"Core",clone:function(b){var c=a.clone._function;c.prototype=b;return new c}};a.clone._function=function(){};a.extend=function(b,c,e){a.assert(b,"Invalid mixing target");a.assert(c,"Invalid mixing source");if(b._dhx_proto_wait)return a.PowerArray.insertAt.call(b._dhx_proto_wait,c,1),b;for(var g in c)if(!b[g]||e)b[g]=c[g];c.defaults&&a.extend(b.defaults,c.defaults);c.$init&&c.$init.call(b);return b};a.copy=function(b){a.assert(b,"Invalid mixing target");if(1<arguments.length){var c=arguments[0];b=arguments[1]}else c=a.isArray(b)?[]:{};for(var e in b)b[e]&&"object"==typeof b[e]&&!a.isDate(b[e])?(c[e]=a.isArray(b[e])?[]:{},a.copy(c[e],b[e])):c[e]=b[e];return c};a.single=function(a){var b=null;return function(c){b||(b=new a({}));b._reinit&&b._reinit.apply(b,arguments);return b}};a.protoUI=function(){a.debug_proto&&a.log("UI registered: "+arguments[0].name);var b=arguments[0].name,c=function(e){if(!c)return a.ui[b].prototype;var g=c._dhx_proto_wait;if(g){for(var h=[g[0]],l=1;l<g.length;l++)h[l]=g[l],h[l]._dhx_proto_wait&&(h[l]=h[l].call(a,h[l].name)),h[l].prototype&&h[l].prototype.name&&(a.ui[h[l].prototype.name]=h[l]);a.ui[b]=a.proto.apply(a,h);if(c._dhx_type_wait)for(l=0;l<c._dhx_type_wait.length;l++)a.Type(a.ui[b],c._dhx_type_wait[l]);c=null}return this!=a?new a.ui[b](e):a.ui[b]};c._dhx_proto_wait=Array.prototype.slice.call(arguments,0);return a.ui[b]=c};a.proto=function(){a.debug_proto&&a.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var b=arguments,c=b[0],e=!!c.$init,g=[];a.assert(c,"Invalid mixing target");for(var h=b.length-1;0<h;h--){a.assert(b[h],"Invalid mixing source");"function"==typeof b[h]&&(b[h]=b[h].prototype);b[h].$init&&g.push(b[h].$init);if(b[h].defaults){var l=b[h].defaults;c.defaults||(c.defaults={});for(var m in l)a.isUndefined(c.defaults[m])&&(c.defaults[m]=l[m])}if(b[h].type&&c.type)for(m in b[h].type)c.type[m]||(c.type[m]=b[h].type[m]);for(var n in b[h])c[n]||(c[n]=b[h][n])}e&&g.push(c.$init);c.$init=function(){for(var a=0;a<g.length;a++)g[a].apply(this,arguments)};e=function(b){this.$ready=[];a.assert(this.$init,"object without init method");this.$init(b);this._parseSettings&&this._parseSettings(b,this.defaults);for(b=0;b<this.$ready.length;b++)this.$ready[b].call(this)};e.prototype=c;c=b=null;return e};a.bind=function(a,c){return function(){return a.apply(c,arguments)}};a.require=function(b,c,e,g,h){if("string"!=typeof b){var l=b.length||0,m=c;if(l)c=function(){if(l)l--,a.require(b[b.length-l-1],c,e);else return m.apply(this,arguments)},c();else{for(var n in b)l++;c=function(){l--;0===l&&m.apply(this,arguments)};for(n in b)a.require(n,c,e)}}else!0!==a._modules[b]&&(".css"==b.substr(-4)?(g=a.html.create("LINK",{type:"text/css",rel:"stylesheet",href:a.codebase+b}),document.head.appendChild(g),c&&c.call(e||window)):c?a._modules[b]?a._modules[b].push([c,e]):(a._modules[b]=[[c,e]],a.ajax(a.codebase+b,function(c){a.exec(c);c=a._modules[b];a._modules[b]=!0;for(var e=0;e<c.length;e++)c[e][0].call(c[e][1]||window,!e)})):(a.exec(a.ajax().sync().get(a.codebase+b).responseText),a._modules[b]=!0))};a._modules={};a.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};a.wrap=function(a,c){return a?function(){var b=a.apply(this,arguments);c.apply(this,arguments);return b}:c};a.isUndefined=function(a){return"undefined"==typeof a};a.delay=function(a,c,e,g){return window.setTimeout(function(){var b=a.apply(c,e||[]);a=c=e=null;return b},g||1)};a.uid=function(){this._seed||(this._seed=(new Date).valueOf());this._seed++;return this._seed};a.toNode=function(a){return"string"==typeof a?document.getElementById(a):a};a.toArray=function(b){return a.extend(b||[],a.PowerArray,!0)};a.toFunctor=function(a){return"string"==typeof a?eval(a):a};a.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};a.isDate=function(a){return a instanceof Date};a._events={};a.event=function(b,c,e,g){b=a.toNode(b);var h=a.uid();g&&(e=a.bind(e,g));a._events[h]=[b,c,e];b.addEventListener?b.addEventListener(c,e,!1):b.attachEvent&&b.attachEvent("on"+c,e);return h};a.eventRemove=function(b){if(b){a.assert(this._events[b],"Removing non-existing event");var c=a._events[b];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]);delete this._events[b]}};a.log=function(a,c,e){1==arguments.length&&(c=a,a="log");if(window.console&&console.log){a=a.toLowerCase();if(window.console[a])window.console[a](c||"unknown error");else window.console.log(a+": "+c);e&&window.console.log(e)}};a.log_full_time=function(b){a._start_time_log=new Date;a.log("Timing start ["+b+"]");window.setTimeout(function(){a.log("Timing end ["+b+"]:"+((new Date).valueOf()-a._start_time_log.valueOf())/1E3+"s")},1)};a.log_time=function(b){var c="_start_time_log"+b;a[c]?(a.log("Info","Timing end ["+b+"]:"+((new Date).valueOf()-a[c].valueOf())/1E3+"s"),a[c]=null):(a[c]=new Date,a.log("Info","Timing start ["+b+"]"))};a.debug_code=function(b){b.call(a)};a.EventSystem={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(b){a.extend(this._evs_map,b,!0)},on_setter:function(a){if(a)for(var b in a)"function"==typeof a[b]&&this.attachEvent(b,a[b])},callEvent:function(b,c){if(this._evs_events._block)return!0;b=b.toLowerCase();var e=this._evs_events[b.toLowerCase()],g=!0;a.debug&&a.log("info","["+this.name+"] event:"+b,c);if(e)for(var h=0;h<e.length;h++)!1===e[h].apply(this,c||[])&&(g=!1);this._evs_map[b]&&!this._evs_map[b].callEvent(b,c)&&(g=!1);return g},attachEvent:function(b,c,e){a.assert(c,"Invalid event handler for "+b);b=b.toLowerCase();e=e||a.uid();c=a.toFunctor(c);var g=this._evs_events[b]||a.toArray();g.push(c);this._evs_events[b]=g;this._evs_handlers[e]={f:c,t:b};return e},detachEvent:function(a){this._evs_handlers[a]&&(this._evs_events[this._evs_handlers[a].t].remove(this._evs_handlers[a].f),delete this._evs_handlers[a])},hasEvent:function(a){a=a.toLowerCase();return this._evs_events[a]?!0:!1}};a.extend(a,a.EventSystem);a.PowerArray={removeAt:function(a,c){0<=a&&this.splice(a,c||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,c){if(c||0===c){var b=this.splice(c,this.length-c);this[c]=a;this.push.apply(this,b)}else this.push(a)},find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},each:function(a,c){for(var b=0;b<this.length;b++)a.call(c||this,this[b])},map:function(a,c){for(var b=0;b<this.length;b++)this[b]=a.call(c||this,this[b]);return this},filter:function(a,c){for(var b=0;b<this.length;b++)a.call(c||this,this[b])||(this.splice(b,1),b--);return this}};a.env={};(function(){-1!=navigator.userAgent.indexOf("Mobile")&&(a.env.mobile=!0);if(a.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))a.env.touch=!0;-1!=navigator.userAgent.indexOf("Opera")?a.env.isOpera=!0:(a.env.isIE=!!document.all,a.env.isFF=!document.all,a.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),a.env.isSafari=a.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac"));-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(a.env.isAndroid=!0);a.env.transform=!1;a.env.transition=!1;for(var b={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","OTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","OTransition","msTransition"]},c=document.createElement("DIV"),e=0;e<b.names.length;e++)for(var g=b[b.names[e]],h=0;h<g.length;h++)if("undefined"!=typeof c.style[g[h]]){a.env[b.names[e]]=g[h];break}c.style[a.env.transform]="translate3d(0,0,0)";a.env.translate=c.style[a.env.transform]?"translate3d":"translate";b="";c=!1;a.env.isOpera&&(b="-o-",c="O");a.env.isFF&&(b="-Moz-");a.env.isWebKit&&(b="-webkit-");a.env.isIE&&(b="-ms-");a.env.transformCSSPrefix=b;a.env.transformPrefix=c||a.env.transformCSSPrefix.replace(/-/gi,"");a.env.transitionEnd="-Moz-"==a.env.transformCSSPrefix?"transitionend":a.env.transformPrefix+"TransitionEnd"})();a.env.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");a.html={_native_on_selectstart:0,denySelect:function(){a._native_on_selectstart||(a._native_on_selectstart=document.onselectstart);document.onselectstart=a.html.stopEvent},allowSelect:function(){0!==a._native_on_selectstart&&(document.onselectstart=a._native_on_selectstart||null);a._native_on_selectstart=0},index:function(a){for(var b=0;a=a.previousSibling;)b++;return b},_style_cache:{},createCss:function(b){var c="",e;for(e in b)c+=e+":"+b[e]+";";b=this._style_cache[c];b||(b="s"+a.uid(),this.addStyle("."+b+"{"+c+"}"),this._style_cache[c]=b);return b},addStyle:function(a){var b=document.createElement("style");b.setAttribute("type","text/css");b.setAttribute("media","screen");b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(b)},create:function(a,c,e){c=c||{};a=document.createElement(a);for(var b in c)a.setAttribute(b,c[b]);c.style&&(a.style.cssText=c.style);c["class"]&&(a.className=c["class"]);e&&(a.innerHTML=e);return a},getValue:function(b){return(b=a.toNode(b))?a.isUndefined(b.value)?b.innerHTML:b.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,c,e){a&&(c&&c.parentNode?c.parentNode.insertBefore(a,c):e.appendChild(a))},locate:function(a,c){if(a.tagName)var b=a;else a=a||event,b=a.target||a.srcElement;for(;b;){if(b.getAttribute){var g=b.getAttribute(c);if(g)return g}b=b.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){a=a.getBoundingClientRect();var b=document.body,e=document.documentElement,g=a.top+(window.pageYOffset||e.scrollTop||b.scrollTop)-(e.clientTop||b.clientTop||0),b=a.left+(window.pageXOffset||e.scrollLeft||b.scrollLeft)-(e.clientLeft||b.clientLeft||0);return{y:Math.round(g),x:Math.round(b)}}for(b=g=0;a;)g+=parseInt(a.offsetTop,10),b+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:g,x:b}},posRelative:function(b){b=b||event;return a.isUndefined(b.offsetX)?{x:b.layerX,y:b.layerY}:{x:b.offsetX,y:b.offsetY}},pos:function(b){b=b||event;if(b.pageX||b.pageY)return{x:b.pageX,y:b.pageY};var c=a.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:b.clientX+c.scrollLeft-c.clientLeft,y:b.clientY+c.scrollTop-c.clientTop}},preventEvent:function(b){b&&b.preventDefault&&b.preventDefault();return a.html.stopEvent(b)},stopEvent:function(a){(a||event).cancelBubble=!0;return!1},addCss:function(a,c){a.className+=" "+c},removeCss:function(a,c){a.className=a.className.replace(RegExp(" "+c,"g"),"")}};a.ready=function(a){this._ready?a.call():this._ready_code.push(a)};a._ready_code=[];(function(){var b=document.getElementsByTagName("SCRIPT");a.assert(b.length,"Can't locate codebase");b.length&&(b=(b[b.length-1].getAttribute("src")||"").split("/"),b.splice(b.length-1,1),a.codebase=b.slice(0,b.length).join("/")+"/");a.event(window,"load",function(){dhx4.callEvent("onReady",[]);a.delay(function(){a._ready=!0;for(var b=0;b<a._ready_code.length;b++)a._ready_code[b].call();a._ready_code=[]})})})();a.locale=a.locale||{};a.assert_core_ready();a.ready(function(){a.event(document.body,"click",function(a){dhx4.callEvent("onClick",[a||event])})});(function(){var b={},c=RegExp("(\\r\\n|\\n)","g"),e=RegExp('(\\")',"g");a.Template=function(g){if("function"==typeof g)return g;if(b[g])return b[g];g=(g||"").toString();if(-1!=g.indexOf("-\x3e"))switch(g=g.split("-\x3e"),g[0]){case "html":g=a.html.getValue(g[1])}g=(g||"").toString();g=g.replace(c,"\\n");g=g.replace(e,'\\"');g=g.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');g=g.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");g=g.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');g=g.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');g=g.replace("{obj}",'"+obj+"');g=g.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{b[g]=Function("obj","common",'return "'+g+'";')}catch(h){a.assert_error("Invalid template:"+g)}return b[g]};a.Template.empty=function(){return""};a.Template.bind=function(b){return a.bind(a.Template(b),this)};a.Type=function(b,c){if(b._dhx_proto_wait)b._dhx_type_wait||(b._dhx_type_wait=[]),b._dhx_type_wait.push(c);else{"function"==typeof b&&(b=b.prototype);b.types||(b.types={"default":b.type},b.type.name="default");var e=c.name,g=b.type;e&&(g=b.types[e]=a.clone(c.baseType?b.types[c.baseType]:b.type));for(var h in c)0===h.indexOf("template")?g[h]=a.Template(c[h]):g[h]=c[h];return e}}})();a.Settings={$init:function(){this._settings=this.config={}},define:function(a,c){return"object"==typeof a?this._parseSeetingColl(a):this._define(a,c)},_define:function(a,c){var b=this[a+"_setter"];return this._settings[a]=b?b.call(this,c,a):c},_parseSeetingColl:function(a){if(a)for(var b in a)this._define(b,a[b])},_parseSettings:function(b,c){var e={};c&&(e=a.extend(e,c));"object"!=typeof b||b.tagName||a.extend(e,b,!0);this._parseSeetingColl(e)},_mergeSettings:function(a,c){for(var b in c)switch(typeof a[b]){case "object":a[b]=this._mergeSettings(a[b]||{},c[b]);break;case "undefined":a[b]=c[b]}return a},debug_freid_c_id:!0,debug_freid_a_name:!0};a.ajax=function(b,c,e){if(0!==arguments.length){var g=new a.ajax;e&&(g.master=e);return g.get(b,null,c)}return this.getXHR?this:new a.ajax};a.ajax.count=0;a.ajax.prototype={master:null,getXHR:function(){return a.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(b,c,e){var g=this.getXHR();a.isArray(e)||(e=[e]);if("object"==typeof c){var h=[],l;for(l in c){var m=c[l];if(null===m||m===a.undefined)m="";h.push(l+"\x3d"+encodeURIComponent(m))}c=h.join("\x26")}c&&"GET"===this.request&&(b=b+(-1!=b.indexOf("?")?"\x26":"?")+c,c=null);g.open(this.request,b,!this._sync);"POST"===this.request&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded");var n=this;g.onreadystatechange=function(){if(!g.readyState||4==g.readyState){a.debug_time&&a.log_full_time("data_loading");a.ajax.count++;if(e&&n)for(var b=0;b<e.length;b++)if(e[b]){var c=e[b].success||e[b];if(400<=g.status||!g.status&&!g.responseText)c=e[b].error;c&&c.call(n.master||n,g.responseText,g.responseXML,g)}n&&(n.master=null);e=n=null}};g.send(c||null);return g},get:function(a,c,e){2==arguments.length&&(e=c,c=null);this.request="GET";return this.send(a,c,e)},post:function(a,c,e){this.request="POST";return this.send(a,c,e)},put:function(a,c,e){this.request="PUT";return this.send(a,c,e)},del:function(a,c,e){this.request="DELETE";return this.send(a,c,e)},sync:function(){this._sync=!0;return this},bind:function(a){this.master=a;return this}};a.send=function(b,c,e,g){b=a.html.create("FORM",{target:g||"_self",action:b,method:e||"POST"},"");for(var h in c)e=a.html.create("INPUT",{type:"hidden",name:h,value:c[h]},""),b.appendChild(e);b.style.display="none";document.body.appendChild(b);b.submit();document.body.removeChild(b)};a.AtomDataLoader={$init:function(a){this.data={};a&&(this._settings.datatype=a.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0;this._settings.url&&this.url_setter(this._settings.url);this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){if(!this._ready_for_data)return a;this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data)return a;this.parse(a,this._settings.datatype);return!0},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(b,c,e){if(b.$proxy)b.load(this,"string"==typeof c?c:"json");else return this.callEvent("onXLS",[]),"string"==typeof c?(this.data.driver=a.DataDriver[c],c=e):this.data.driver||(this.data.driver=a.DataDriver.json),e=[{success:this._onLoad,error:this._onLoadError}],c&&(a.isArray(c)?e.push.apply(e,c):e.push(c)),a.ajax(b,e,this)},parse:function(b,c){this.callEvent("onXLS",[]);this.data.driver=a.DataDriver[c||"json"];this._onLoad(b,null)},_onLoad:function(a,c,e,g){g=this.data.driver;var b=g.toObject(a,c);b?(c=g.getRecords(b)[0],this.data=g?g.getDetails(c):a):this._onLoadError(a,c,e);this.callEvent("onXLE",[])},_onLoadError:function(a,c,e){this.callEvent("onXLE",[]);this.callEvent("onLoadError",arguments);dhx4.callEvent("onLoadError",[a,c,e,this])},_check_data_feed:function(b){if(!this._settings.dataFeed||this._ignore_feed||!b)return!0;var c=this._settings.dataFeed;if("function"==typeof c)return c.call(this,b.id||b,b);c=c+(-1==c.indexOf("?")?"?":"\x26")+"action\x3dget\x26id\x3d"+encodeURIComponent(b.id||b);this.callEvent("onXLS",[]);a.ajax(c,function(b,c,h){this._ignore_feed=!0;var e=a.DataDriver.toObject(b,c);e?this.setValues(e.getDetails(e.getRecords()[0])):this._onLoadError(b,c,h);this._ignore_feed=!1;this.callEvent("onXLE",[])},this);return!1}};a.DataDriver={};a.DataDriver.json={toObject:function(b){b||(b="[]");if("string"==typeof b){try{eval("dhx.temp\x3d"+b)}catch(g){return a.assert_error(g),null}b=a.temp}if(b.data){var c=b.data.config={},e;for(e in b)"data"!=e&&(c[e]=b[e]);b=b.data}return b},getRecords:function(b){return b&&!a.isArray(b)?[b]:b},getDetails:function(b){return"string"==typeof b?{id:a.uid(),value:b}:b},getInfo:function(a){return(a=a.config)?{_size:a.total_count||0,_from:a.pos||0,_parent:a.parent||0,_config:a.config,_key:a.dhx_security}:{}},child:"data"};a.DataDriver.html={toObject:function(b){if("string"==typeof b){var c=null;-1==b.indexOf("\x3c")&&(c=a.toNode(b));c||(c=document.createElement("DIV"),c.innerHTML=b);return c.getElementsByTagName(this.tag)}return b},getRecords:function(a){for(var b=[],e=0;e<a.childNodes.length;e++){var g=a.childNodes[e];1==g.nodeType&&b.push(g)}return b},getDetails:function(b){return a.DataDriver.xml.tagToObject(b)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};a.DataDriver.jsarray={toObject:function(b){return"string"==typeof b?(eval("dhx.temp\x3d"+b),a.temp):b},getRecords:function(a){return a},getDetails:function(a){for(var b={},e=0;e<a.length;e++)b["data"+e]=a[e];return b},getInfo:function(a){return{_size:0,_from:0}}};a.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},e=0;e<a.length;e++)b["data"+e]=a[e];return b},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","};a.DataDriver.xml={_isValidXML:function(a){return a&&a.documentElement&&!a.getElementsByTagName("parsererror").length?a:null},toObject:function(a,c){if(this._isValidXML(b))return b;var b="string"==typeof a?this.fromString(a.replace(/^[\s]+/,"")):a;return this._isValidXML(b)?b:null},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){var b=this.xpath(a,this.config),b=b.length?this.assignTypes(this.tagToObject(b[0],{})):null;return{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_parent:a.documentElement.getAttribute("parent")||0,_config:b,_key:a.documentElement.getAttribute("dhx_security")||null}},xpath:function(a,c){if(window.XPathResult){var b=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var g=[],b=a.evaluate(c,b,null,XPathResult.ANY_TYPE,null),h=b.iterateNext();h;)g.push(h),h=b.iterateNext();return g}g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(l){}if(g)return a.selectNodes(c);g=c.split("/").pop();return a.getElementsByTagName(g)},assignTypes:function(a){for(var b in a){var e=a[b];"object"==typeof e?this.assignTypes(e):"string"==typeof e&&""!==e&&("true"==e?a[b]=!0:"false"==e?a[b]=!1:e==1*e&&(a[b]*=1))}return a},tagToObject:function(b,c){c=c||{};var e=!1,g=b.attributes;if(g&&g.length){for(var h=0;h<g.length;h++)c[g[h].name]=g[h].value;e=!0}g=b.childNodes;for(h=0;h<g.length;h++)1==g[h].nodeType&&(e=g[h].tagName,"undefined"!=typeof c[e]?(a.isArray(c[e])||(c[e]=[c[e]]),c[e].push(this.tagToObject(g[h],{}))):c[g[h].tagName]=this.tagToObject(g[h],{}),e=!0);if(!e)return this.nodeValue(b);c.value=c.value||this.nodeValue(b);return c},nodeValue:function(a){return a.firstChild?a.firstChild.data:""},fromString:function(b){try{if(window.DOMParser)return(new DOMParser).parseFromString(b,"text/xml");if(window.ActiveXObject){var c=new ActiveXObject("Microsoft.xmlDOM");c.loadXML(b);return c}}catch(e){return a.assert_error(e),null}a.assert_error("Load from xml string is not supported")}};a.DataLoader=a.proto({$init:function(b){this._ajax_queue=a.toArray();this.data=new a.DataStore;this.data.attachEvent("onClearAll",a.bind(this._call_onclearall,this));this.data.attachEvent("onServerConfig",a.bind(this._call_on_config,this));this.data.feed=this._feed},_feed:function(a,c,e){if(this._load_count)return this._load_count=[a,c,e];this._load_count=!0;this._feed_last=[a,c];this._feed_common.call(this,a,c,e)},_feed_common:function(a,c,e){var b=this.data.url;0>a&&(a=0);this.load(b+(-1==b.indexOf("?")?"?":"\x26")+(this.dataCount()?"continue\x3dtrue\x26":"")+"start\x3d"+a+"\x26count\x3d"+c,[this._feed_callback,e])},_feed_callback:function(){var a=this._load_count,c=this._feed_last;this._load_count=!1;"object"!=typeof a||a[0]==c[0]&&a[1]==c[1]||this.data.feed.apply(this,a)},load:function(b,c){var e=a.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(e);this.data.url||(this.data.url=b)},loadNext:function(b,c,e,g,h){this._settings.datathrottle&&!h?(this._throttle_request&&window.clearTimeout(this._throttle_request),this._throttle_request=a.delay(function(){this.loadNext(b,c,e,g,!0)},this,0,this._settings.datathrottle)):(c||0===c||(c=this.dataCount()),this.data.url=this.data.url||g,this.callEvent("onDataRequest",[c,b,e,g])&&this.data.url&&this.data.feed.call(this,c,b,e))},_maybe_loading_already:function(a,c){var b=this._feed_last;return this._load_count&&b&&b[0]<=c&&b[1]+b[0]>=a+c?!0:!1},_onLoad:function(a,c,e){this._ajax_queue.remove(e);var b=this.data.driver.toObject(a,c);if(b)this.data._parse(b);else return this._onLoadError(a,c,e);this._call_onready();this.callEvent("onXLE",[])},removeMissed_setter:function(a){return this.data._removeMissed=a},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(b){this.data.attachEvent("onBeforeFilter",a.bind(function(a,b){if(this._settings.dataFeed){var c={};if(a||b){if("function"==typeof a){if(!b)return;a(b,c)}else c={text:b};this.clearAll();var e=this._settings.dataFeed,l=[];if("function"==typeof e)return e.call(this,b,c);for(var m in c)l.push("dhx_filter["+m+"]\x3d"+encodeURIComponent(c[m]));this.load(e+(0>e.indexOf("?")?"?":"\x26")+l.join("\x26"),this._settings.datatype);return!1}}},this));return b},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var b=a.toFunctor(this._settings.ready);b&&a.delay(b,this,arguments);this._ready_was_used=!0}},_call_onclearall:function(){for(var b=0;b<this._ajax_queue.length;b++)this._ajax_queue[b].abort();this._ajax_queue=a.toArray()},_call_on_config:function(a){this._parseSeetingColl(a)}},a.AtomDataLoader);a.DataStore=function(){this.name="DataStore";a.extend(this,a.EventSystem);this.setDriver("json");this.pull={};this.order=a.toArray();this._marks={}};a.DataStore.prototype={setDriver:function(b){a.assert(a.DataDriver[b],"incorrect DataDriver");this.driver=a.DataDriver[b]},_parse:function(b,c){this.callEvent("onParse",[this.driver,b]);this._filter_order&&this.filter();var e=this.driver.getInfo(b);e._key&&(a.securityKey=e._key);e._config&&this.callEvent("onServerConfig",[e._config]);var g=this.driver.getRecords(b);this._inner_parse(e,g);this._scheme_group&&this._group_processing&&this._group_processing(this._scheme_group);this._scheme_sort&&(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent());this.callEvent("onStoreLoad",[this.driver,b]);this.refresh()},_inner_parse:function(b,c){var e=1*(b._from||0),g=!0,h=!1;if(0===e&&this.order[0]){if(this._removeMissed)for(var h={},l=0;l<this.order.length;l++)h[this.order[l]]=!0;g=!1;e=this.order.length}for(var m=0,l=0;l<c.length;l++){var n=this.driver.getDetails(c[l]),q=this.id(n);this.pull[q]?g&&this.order[m+e]&&m++:(this.order[m+e]=q,m++);this.pull[q]?(a.extend(this.pull[q],n,!0),this._scheme_update&&this._scheme_update(this.pull[q]),h&&delete h[q]):(this.pull[q]=n,this._scheme_init&&this._scheme_init(n))}if(h){this.blockEvent();for(var r in h)this.remove(r);this.unblockEvent()}this.order[b._size-1]||(this.order[b._size-1]=a.undefined)},id:function(b){return b.id||(b.id=a.uid())},changeId:function(a,c){this.pull[a]&&(this.pull[c]=this.pull[a]);this.pull[c].id=c;this.order[this.order.find(a)]=c;this._filter_order&&(this._filter_order[this._filter_order.find(a)]=c);this._marks[a]&&(this._marks[c]=this._marks[a],delete this._marks[a]);this.callEvent("onIdChange",[a,c]);this._render_change_id&&this._render_change_id(a,c);delete this.pull[a]},item:function(a){return this.pull[a]},update:function(b,c){a.isUndefined(c)&&(c=this.item(b));this._scheme_update&&this._scheme_update(c);if(!1===this.callEvent("onBeforeUpdate",[b,c]))return!1;this.pull[b]=c;this.callEvent("onStoreUpdated",[b,c,"update"])},refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a,c){this._skip_refresh=!0;a.call(c||this);this._skip_refresh=!1},getRange:function(a,c){a=a?this.indexById(a):this.$min||this.startOffset||0;c?c=this.indexById(c):(c=Math.min(this.$max||this.endOffset||Infinity,this.dataCount()-1),0>c&&(c=0));if(a>c){var b=c;c=a;a=b}return this.getIndexRange(a,c)},getIndexRange:function(b,c){c=Math.min(c||Infinity,this.dataCount()-1);for(var e=a.toArray(),g=b||0;g<=c;g++)e.push(this.item(this.order[g]));return e},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(b,c){a.assert(0<=b&&0<=c,"DataStore::move","Incorrect indexes");var e=this.idByIndex(b),g=this.item(e);this.order.removeAt(b);this.order.insertAt(e,Math.min(this.order.length,c));this.callEvent("onStoreUpdated",[e,g,"move"])},scheme:function(a){this._scheme={};this._scheme_init=a.$init;this._scheme_update=a.$update;this._scheme_serialize=a.$serialize;this._scheme_group=a.$group;this._scheme_sort=a.$sort;for(var b in a)"$"!=b.substr(0,1)&&(this._scheme[b]=a[b])},sync:function(b,c,e){"string"==typeof b&&(b=$$("source"));"function"!=typeof c&&(e=c,c=null);a.debug_bind&&(this.debug_sync_master=b,a.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" \x3c\x3d "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));this._backbone_source=!1;"DataStore"!=b.name&&(b.data&&"DataStore"==b.data.name?b=b.data:this._backbone_source=!0);var g=a.bind(function(g,l,m){if(this._backbone_source){if(!g)return;if(0===g.indexOf("change")){"change"==g&&(this.pull[l.id]=l.attributes,this.refresh(l.id));return}"reset"==g&&(m=l);this.order=[];this.pull={};this._filter_order=null;for(g=0;g<m.models.length;g++)l=m.models[g].id,this.order.push(l),this.pull[l]=m.models[g].attributes}else this._filter_order=null,this.order=a.toArray([].concat(b.order)),this.pull=b.pull;c&&this.silent(c);this._on_sync&&this._on_sync();a.debug_bind&&a.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" \x3c\x3d "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id);this.callEvent("onSyncApply",[]);e?e=!1:this.refresh()},this);this._backbone_source?b.bind("all",g):this._sync_events=[b.attachEvent("onStoreUpdated",g),b.attachEvent("onIdChange",a.bind(function(a,b){this.changeId(a,b)},this))];g()},add:function(b,c,e){if(this._scheme)for(var g in this._scheme)a.isUndefined(b[g])&&(b[g]=this._scheme[g]);this._scheme_init&&this._scheme_init(b);g=this.id(b);e=e||this.order;var h=e.length;if(a.isUndefined(c)||0>c)c=h;c>h&&(a.log("Warning","DataStore:add","Index of out of bounds"),c=Math.min(e.length,c));if(!1===this.callEvent("onBeforeAdd",[g,b,c]))return!1;a.assert(!this.exists(g),"Not unique ID");this.pull[g]=b;e.insertAt(g,c);this._filter_order&&(e=this._filter_order.length,!c&&this.order.length&&(e=0),this._filter_order.insertAt(g,e));this.callEvent("onAfterAdd",[g,c]);this.callEvent("onStoreUpdated",[g,b,"add"]);return g},remove:function(b){if(a.isArray(b))for(var c=0;c<b.length;c++)this.remove(b[c]);else{if(!1===this.callEvent("onBeforeDelete",[b]))return!1;a.assert(this.exists(b),"Not existing ID in remove command"+b);c=this.item(b);this.order.remove(b);this._filter_order&&this._filter_order.remove(b);delete this.pull[b];this._marks[b]&&delete this._marks[b];this.callEvent("onAfterDelete",[b]);this.callEvent("onStoreUpdated",[b,c,"delete"])}},clearAll:function(){this.pull={};this.order=a.toArray();this._filter_order=this.url=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(b){(b>=this.order.length||0>b)&&a.log("Warning","DataStore::idByIndex Incorrect index");return this.order[b]},indexById:function(b){var c=this.order.find(b);this.pull[b]||a.log("Warning","DataStore::indexById Non-existing ID: "+b);return c},next:function(a,c){return this.order[this.indexById(a)+(c||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,c){return this.order[this.indexById(a)-(c||1)]},sort:function(a,c,e){var b=a;"function"==typeof a?b={as:a,dir:c}:"string"==typeof a&&(b={by:a.replace(/#/g,""),dir:c,as:e});a=[b.by,b.dir,b.as];this.callEvent("onBeforeSort",a)&&(this._sort_core(b),this.refresh(),this.callEvent("onAfterSort",a))},_sort_core:function(b){if(this.order.length){b=this._sort._create(b);var c=this.getRange(this.first(),this.last());c.sort(b);this.order=c.map(function(b){a.assert(b,"Client sorting can't be used with dynamic loading");return this.id(b)},this)}},_filter_reset:function(a){this._filter_order&&!a&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(b,c,e){for(var g=a.toArray(),h=0;h<this.order.length;h++){var l=this.order[h];b(this.item(l),c)&&g.push(l)}e&&this._filter_order||(this._filter_order=this.order);this.order=g},filter:function(b,c,e){if(this.callEvent("onBeforeFilter",[b,c])&&(this._filter_reset(e),this.order.length)){if(b){var g=b;c=c||"";"string"==typeof b&&(b=b.replace(/#/g,""),"function"==typeof c?g=function(a){return c(a[b])}:(c=c.toString().toLowerCase(),g=function(c,e){a.assert(c,"Client side filtering can't be used with dynamic loading");return-1!=(c[b]||"").toString().toLowerCase().indexOf(e)}));this._filter_core(g,c,e,this._filterMode)}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(a,c){for(var b=0;b<this.order.length;b++)a.call(c||this,this.item(this.order[b]))},_methodPush:function(a,c){return function(){return a[c].apply(a,arguments)}},addMark:function(a,c,e,g){var b=this._marks[a]||{};this._marks[a]=b;b[c]||(b[c]=g||!0,e&&(this.item(a).$css=(this.item(a).$css||"")+" "+c,this.refresh(a)));return b[c]},removeMark:function(a,c,e){var b=this._marks[a];b&&b[c]&&delete b[c];e&&(e=this.item(a).$css)&&(this.item(a).$css=e.replace(c,""),this.refresh(a))},hasMark:function(a,c){var b=this._marks[a];return b&&b[c]},provideApi:function(a,c){this.debug_bind_master=a;c&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});for(var b="sort add remove exists idByIndex indexById item update refresh dataCount filter next previous clearAll first last serialize sync addMark removeMark hasMark".split(" "),g=0;g<b.length;g++)a[b[g]]=this._methodPush(this,b[g])},serialize:function(a){for(var b=this.order,e=[],g=0;g<b.length;g++){var h=this.pull[b[g]];if(this._scheme_serialize){if(h=this._scheme_serialize(h),!1===h)continue}else if(a)for(var l in a)h[l]=h[a[l]]+"";e.push(h)}return e},_sort:{_create:function(a){return this._dir(a.dir,this._by(a.by,a.as))},_as:{date:function(a,c){a-=0;c-=0;return a>c?1:a<c?-1:0},"int":function(a,c){a*=1;c*=1;return a>c?1:a<c?-1:0},string_strict:function(a,c){a=a.toString();c=c.toString();return a>c?1:a<c?-1:0},string:function(a,c){if(!c)return 1;if(!a)return-1;a=a.toString().toLowerCase();c=c.toString().toLowerCase();return a>c?1:a<c?-1:0}},_by:function(b,c){if(!b)return c;"function"!=typeof c&&(c=this._as[c||"string"]);a.assert(c,"Invalid sorting method");return function(a,g){return c(a[b],g[b])}},_dir:function(a,c){return"asc"!=a&&a?function(a,b){return-1*c(a,b)}:c}}};a.BaseBind={debug_freid_ignore:{id:!0},bind:function(b,c,e){"string"==typeof b&&(b=a.ui.get(b));b._initBindSource&&b._initBindSource();this._initBindSource&&this._initBindSource();b.getBindData||a.extend(b,a.BindSource);if(!this._bind_ready){var g=this.render;if(this.filter){var h=this._settings.id;this.data._on_sync=function(){b._bind_updated[h]=!1}}this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var a=this.callEvent("onBindRequest");this._in_bind_processing=!1;return g.apply(this,!1===a?arguments:[])}};if(this.getValue||this.getValues)this.save=function(){this.validate&&!this.validate()||b.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)};this._bind_ready=!0}b.addBind(this._settings.id,c,e);a.debug_bind&&a.log("[bind] "+this.name+"@"+this._settings.id+" \x3c\x3d "+b.name+"@"+b._settings.id);var l=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return b.getBindData(l)});!this._settings.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",function(){b._bind_updated[l]=!1});this.isVisible(this._settings.id)&&this.refresh()},unbind:function(a){return this._unbind(a)},_unbind:function(a){a.removeBind(this._settings.id);var b=this._sync_events||(this.data?this.data._sync_events:0);if(b&&a.data)for(var e=0;e<b.length;e++)a.data.detachEvent(b[e])}};a.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},saveBatch:function(a){this._do_not_update_binds=!0;a.call(this);this._do_not_update_binds=!1;this._update_binds()},setBindData:function(b,c){c&&(this._ignore_binds[c]=!0);a.debug_bind&&a.log("[bind:save] "+this.name+"@"+this._settings.id+" \x3c\x3d @"+c);if(this.setValue)this.setValue(b);else if(this.setValues)this.setValues(b);else{var e=this.getCursor();e&&(b=a.extend(this.item(e),b,!0),this.update(e,b))}this.callEvent("onBindUpdate",[b,c,e]);this.save&&this.save();c&&(this._ignore_binds[c]=!1)},getBindData:function(b,c){if(this._bind_updated[b])return!1;var e=a.ui.get(b);e.isVisible(e._settings.id)&&(this._bind_updated[b]=!0,a.debug_bind&&a.log("[bind:request] "+this.name+"@"+this._settings.id+" \x3d\x3e "+e.name+"@"+e._settings.id),this._bind_update(e,this._bind_hash[b][0],this._bind_hash[b][1]),c&&e.filter&&e.refresh())},addBind:function(a,c,e){this._bind_hash[a]=[c,e]},removeBind:function(a){delete this._bind_hash[a];delete this._bind_updated[a];delete this._ignore_binds[a]},_bind_specific_rules:function(b){b.filter?a.extend(this,a.CollectionBind):b.setValue?a.extend(this,a.ValueBind):a.extend(this,a.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var a in this._bind_hash)this._ignore_binds[a]||(this._bind_updated[a]=!1,this.getBindData(a,!0))},_bind_update_common:function(b,c,e){b.setValue?b.setValue(e?e[c]:e):b.filter?b.data.silent(function(){this.filter(c,e)}):!e&&b.clear?b.clear():b._check_data_feed(e)&&b.setValues(a.clone(e));b.callEvent("onBindApply",[e,c,this])}};a.DataValue=a.proto({name:"DataValue",isVisible:function(){return!0},$init:function(b){b=(this.data=b)&&b.id?b.id:a.uid();this._settings={id:b};a.ui.views[b]=this},setValue:function(a){this.data=a;this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},a.EventSystem,a.BaseBind);a.DataRecord=a.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(b){this.data=b||{};b=b&&b.id?b.id:a.uid();this._settings={id:b};a.ui.views[b]=this},getValues:function(){return this.data},setValues:function(a){this.data=a;this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},a.EventSystem,a.BaseBind,a.AtomDataLoader,a.Settings);a.DataCollection=a.proto({name:"DataCollection",isVisible:function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1},$init:function(b){this.data.provideApi(this,!0);b=b&&b.id?b.id:a.uid();this._settings.id=b;a.ui.views[b]=this;this.data.attachEvent("onStoreLoad",a.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},a.DataLoader,a.EventSystem,a.BaseBind,a.Settings);a.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(a,c,e){var b=this.getValue()||"";e&&(b=e(b));a.setValue?a.setValue(b):a.filter?a.data.silent(function(){this.filter(c,b)}):(e={},e[c]=b,a._check_data_feed(b)&&a.setValues(e));a.callEvent("onBindApply",[b,c,this])}};a.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(a,c){var b=this.getValues()||null;this._bind_update_common(a,c,b)}};a.CollectionBind={$init:function(){this._cursor=null;this.attachEvent("onSelectChange",function(a){a=this.getSelected();this.setCursor(a?a.id||a:null)});this.attachEvent("onAfterCursorChange",this._update_binds);this.data.attachEvent("onStoreUpdated",a.bind(function(a,c,e){a&&a==this.getCursor()&&"paint"!=e&&this._update_binds()},this));this.data.attachEvent("onClearAll",a.bind(function(){this._cursor=null},this));this.data.attachEvent("onIdChange",a.bind(function(a,c){this._cursor==a&&(this._cursor=c)},this))},setCursor:function(a){a==this._cursor||null!==a&&!this.item(a)||(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=a,this.callEvent("onAfterCursorChange",[a]))},getCursor:function(){return this._cursor},_bind_update:function(a,c){var b=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(a,c,b)}};a.ui||(a.ui={});a.ui.views||(a.ui.views={},a.ui.get=function(b){return b._settings?b:a.ui.views[b]});window.dhtmlx&&(dhtmlx.BaseBind=a.BaseBind);dhtmlXDataStore=function(b){b=new a.DataCollection(b);b._dp_init=function(a){a._methods=["dummy","dummy","changeId","dummy"];this.data._old_names={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(b,c,h){b&&!a._silent&&a.setUpdated(b,!0,this._old_names[h])});a._getRowData=function(a,b){var c=this.obj.data.item(a),e={id:a};e[this.action_param]=this.obj.getUserData(a);if(c)for(var g in c)e[g]=c[g];return e};this.changeId=function(b,c){this.data.changeId(b,c);a._silent=!0;this.data.callEvent("onStoreUpdated",[c,this.item(c),"update"]);a._silent=!1};a._clearUpdateFlag=function(){};this._userdata={}};b.dummy=function(){};b.setUserData=function(a,b,g){this._userdata[a]=g};b.getUserData=function(a,b){return this._userdata[a]};b.dataFeed=function(a){this.define("dataFeed",a)};a.extend(b,a.BindSource);return b};window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1};this._settings=this._settings||this._settings;this._settings.id||(this._settings.id=a.uid());this.unbind=a.BaseBind.unbind;this.unsync=a.BaseBind.unsync;a.ui.views[this._settings.id]=this});window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filtered_state||this._settings.dataFeed?!0:!1};this._settings=this._settings||this._settings;this._settings.id||(this._settings.id=a.uid());this.unbind=a.BaseBind.unbind;this.unsync=a.BaseBind.unsync;a.ui.views[this._settings.id]=this});a.BaseBind.unsync=function(b){return a.BaseBind._unbind.call(this,b)};a.BaseBind.unbind=function(b){return a.BaseBind._unbind.call(this,b)};a.BaseBind.legacyBind=function(){return a.BaseBind.bind.apply(this,arguments)};a.BaseBind.legacySync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();this.attachEvent("onAfterEditStop",function(a){this.save(a);return!0});this.attachEvent("onDataRequest",function(b,c){for(var e=b;e<b+c;e++)if(!a.data.order[e])return a.loadNext(c,b),!1});this.save=function(b){b||(b=this.getCursor());var c=this.item(b),e=a.item(b),l;for(l in c)0!==l.indexOf("$")&&(e[l]=c[l]);a.refresh(b)};return a&&"DataCollection"==a.name?a.data.sync.apply(this.data,arguments):this.data.sync.apply(this.data,arguments)};window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(b){a.BaseBind.bind.apply(this,arguments);b.getBindData(this._settings.id)},dhtmlXForm.prototype.unbind=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXForm.prototype._initBindSource=function(){a.isUndefined(this._settings)&&(this._settings={id:a.uid(),dataFeed:this._server_feed},a.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var b=this._settings.dataFeed;if("function"==typeof b)return b.call(this,a.id||a,a);b=b+(-1==b.indexOf("?")?"?":"\x26")+"action\x3dget\x26id\x3d"+encodeURIComponent(a.id||a);this.load(b);return!1},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(a){return!0});window.scheduler&&(window.Scheduler||(window.Scheduler={}),Scheduler.$syncFactory=function(b){b.sync=function(c,e){this._initBindSource&&this._initBindSource();c._initBindSource&&c._initBindSource();var g=function(g){b.clearAll();g=c.data.order;for(var h=c.data.pull,m=[],n=0;n<g.length;n++)m[n]=e&&e.copy?a.clone(h[g[n]]):h[g[n]];b._process_loading(m);b.callEvent("onSyncApply",[])};this.save=function(b){b||(b=this.getCursor());var e=this.item(b),g=c.item(b);this.callEvent("onStoreSave",[b,e,g])&&(a.extend(c.item(b),e,!0),c.update(b))};this.item=function(a){return this.getEvent(a)};this._sync_events=[c.data.attachEvent("onStoreUpdated",function(a,b,c){g.call(this)}),c.data.attachEvent("onIdChange",function(a,c){b.changeEventId(a,c)})];this.attachEvent("onEventChanged",function(a){this.save(a)});this.attachEvent("onEventAdded",function(a,b){c.data.pull[a]||c.add(b)});this.attachEvent("onEventDeleted",function(a){c.data.pull[a]&&c.remove(a)});g()};b.unsync=function(b){a.BaseBind._unbind.call(this,b)};b._initBindSource=function(){this._settings||(this._settings={id:a.uid()})}},Scheduler.$syncFactory(window.scheduler));window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){a.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.prototype.unbind=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXCombo.prototype.unsync=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXCombo.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXCombo.prototype.filterByDataStore=function(a,c){var b=this.datastore.serialize(this.rule).filter(function(b){return a(b,c)?!0:!1});this.clearAll(!1);this.addOption(b)},dhtmlXCombo.prototype.sync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();var b=this;b.rule=c;b.datastore=a;var g=function(a){b.clearAll(b._ishideList);b.addOption(this.serialize(c));b.callEvent("onSyncApply",[])};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,b,c){g.call(this)}),a.data.attachEvent("onIdChange",function(a,c){b.changeOptionId(a,c)})];g.call(a)},dhtmlXCombo.prototype._initBindSource=function(){a.isUndefined(this._settings)&&(this._settings={id:a.uid(),dataFeed:this._server_feed},a.ui.views[this._settings.id]=this,this.data={silent:a.bind(function(a){a.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=function(a){return this.getOption(a)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return this.optionsArr.length||this._settings.dataFeed?!0:!1},dhtmlXCombo.prototype.refresh=function(){this.render(!0)});window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(b,c,e){a.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXGridObject.prototype.unsync=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXGridObject.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXGridObject.prototype.filterByDataStore=function(a,c){var b=this.datastore.serialize().filter(function(b){return a(b,c)?!0:!1});this.clearAll();var g=b.length;if(g){this._parsing=!0;for(var h={},l=0;l<g;l++){var m=this.rule&&this.rule.value&&b[l][this.rule.value];isNaN(h[m])?h[m]=1:(h[m]++,m=m+"__"+h[m]+"__");this.rowsBuffer[l]={idd:m,data:b[l]};this.rowsBuffer[l]._parser=this._process_store_row;this.rowsBuffer[l]._locator=this._get_store_data;this.rowsAr[m]=b[l]}this.render_dataset();this._parsing=!1}},dhtmlXGridObject.prototype.sync=function(b,c){this._initBindSource&&this._initBindSource();b._initBindSource&&b._initBindSource();var e=this;this.datastore=b;this.rule=c;this.save=function(c){"object"!=typeof c&&(c||(c=this.getCursor()),a.extend(b.item(c),this.item(c),!0),b.update(c))};var g=function(a){a=e.getCursor?e.getCursor():null;var b=0;e._legacy_ignore_next?(b=e._legacy_ignore_next,e._legacy_ignore_next=!1):e.clearAll();var g=this.dataCount();if(g){e._parsing=!0;for(var h={},q=b;q<g;q++){var r=this.order[q],v=c&&c.value&&this.pull[r][c.value]||r;isNaN(h[v])?h[v]=1:(h[v]++,v=v+"__"+h[v]+"__");!r||b&&e.rowsBuffer[q]||(e.rowsBuffer[q]={idd:v,data:this.pull[r]},e.rowsBuffer[q]._parser=e._process_store_row,e.rowsBuffer[q]._locator=e._get_store_data,e.rowsAr[v]=this.pull[r])}e.rowsBuffer[g-1]||(e.rowsBuffer[g-1]=dhtmlx.undefined,e.xmlFileUrl=e.xmlFileUrl||this.url);e.pagingOn?e.changePage():e._srnd&&e._fillers?e._update_srnd_view():(e.render_dataset(),e.callEvent("onXLE",[]));e._parsing=!1}a&&e.setCursor&&e.setCursor(e.rowsAr[a]?a:null);e.callEvent("onSyncApply",[])};this._sync_events=[b.data.attachEvent("onStoreUpdated",function(a,b,c){"delete"==c?(e.deleteRow(a),e.data.callEvent("onStoreUpdated",[a,b,c])):"update"==c?(e.callEvent("onSyncUpdate",[b,c]),e.update(a,b),e.data.callEvent("onStoreUpdated",[a,b,c])):"add"==c?(e.callEvent("onSyncUpdate",[b,c]),e.add(a,b,this.indexById(a)),e.data.callEvent("onStoreUpdated",[a,b,c])):g.call(this)}),b.data.attachEvent("onStoreLoad",function(a,c){e.xmlFileUrl=b.data.url;e._legacy_ignore_next=a.getInfo(c)._from}),b.data.attachEvent("onIdChange",function(a,b){e.changeRowId(a,b)})];e.attachEvent("onDynXLS",function(a,c){for(var h=a;h<a+c;h++)if(!b.data.order[h])return b.loadNext(c,a),!1;e._legacy_ignore_next=a;g.call(b.data)});g.call(b.data);e.attachEvent("onEditCell",function(a,b,c,e,g){2==a&&e!=g&&this.save(b);return!0});e.attachEvent("onClearAll",function(){this._f_rowsBuffer=null});c&&c.sort&&e.attachEvent("onBeforeSorting",function(a,c,g){if("connector"==c)return!1;var h=this.getColumnId(a);b.sort("#"+h+"#","asc"==g?"asc":"desc","int"==c?c:"string");e.setSortImgState(!0,a,g);return!1});c&&c.filter&&(e.attachEvent("onFilterStart",function(a,c){if(e._con_f_used&&e._con_f_used.length)return!1;b.data.silent(function(){b.filter();for(var g=0;g<a.length;g++)if(""!=c[g]){var h=e.getColumnId(a[g]);b.filter("#"+h+"#",c[g],0!=g)}});b.refresh();return!1}),e.collectValues=function(a){a=this.getColumnId(a);return function(a){var b=[],c={};this.data.each(function(e){e=e[a];c[e]||(c[e]=!0,b.push(e))});b.sort();return b}.call(b,a)});c&&c.select&&e.attachEvent("onRowSelect",function(a){b.setCursor(a)});e.clearAndLoad=function(a){b.clearAll();b.load(a)}},dhtmlXGridObject.prototype._initBindSource=function(){if(a.isUndefined(this._settings)){this._settings={id:a.uid(),dataFeed:this._server_feed};a.ui.views[this._settings.id]=this;this.data={silent:a.bind(function(a){a.call(this)},this)};dhx4._eventable(this.data);for(var b=0;b<this._cCount;b++)this.columnIds[b]||(this.columnIds[b]="cell"+b);this.attachEvent("onSelectStateChanged",function(a){this.callEvent("onSelectChange",[a])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(a,b){2===a&&this.getCursor&&b&&b==this.getCursor()&&this._update_binds();return!0});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(b){if(null===b)return null;var c=this.getRowById(b);if(!c)return null;c=a.copy(c._attrs);c.id=b;for(var e=this.getColumnsNum(),g=0;g<e;g++)c[this.columnIds[g]]=this.cells(b,g).getValue();return c},dhtmlXGridObject.prototype.update=function(b,c){for(var e=0;e<this.columnIds.length;e++){var g=this.columnIds[e];a.isUndefined(c[g])||this.cells(b,e).setValue(c[g])}e=this.getRowById(b)._attrs;for(g in c)e[g]=c[g];this.callEvent("onBindUpdate",[c,null,b])},dhtmlXGridObject.prototype.add=function(b,c,e){for(var g=[],h=0;h<this.columnIds.length;h++){var l=this.columnIds[h];g[h]=a.isUndefined(c[l])?"":c[l]}this.addRow(b,g,e);this.getRowById(b)._attrs=a.copy(c)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){return this.rowsBuffer.length||this._f_rowsBuffer||this._settings.dataFeed?!0:!1},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(b,c){if(this._settings.dataFeed){var e={};if(!b&&!c)return;if("function"==typeof b){if(!c)return;b(c,e)}else a.isUndefined(b)?e=c:e[b]=c;this.clearAll();var g=this._settings.dataFeed;if("function"==typeof g)return g.call(this,c,e);var h=[],l;for(l in e)h.push("dhx_filter["+l+"]\x3d"+encodeURIComponent(e[l]));this.load(g+(0>g.indexOf("?")?"?":"\x26")+h.join("\x26"));return!1}if(null===c)return this.filterBy(0,function(){return!1});this.filterBy(0,function(a,e){return b.call(this,e,c)})});window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){a.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXTreeObject.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXTreeObject.prototype._initBindSource=function(){a.isUndefined(this._settings)&&(this._settings={id:a.uid(),dataFeed:this._server_feed},a.ui.views[this._settings.id]=this,this.data={silent:a.bind(function(a){a.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onSelect",function(a){this.callEvent("onSelectChange",[a])}),this.attachEvent("onEdit",function(a,c){2===a&&c&&c==this.getCursor()&&this._update_binds();return!0}))},dhtmlXTreeObject.prototype.item=function(a){return null===a?null:{id:a,text:this.getItemText(a)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(b,c){if(this._settings.dataFeed){var e={};if(b||c){if("function"==typeof b){if(!c)return;b(c,e)}else a.isUndefined(b)?e=c:e[b]=c;this.deleteChildItems(0);var g=this._settings.dataFeed;if("function"==typeof g)return g.call(this,[data.id||data,data]);var h=[],l;for(l in e)h.push("dhx_filter["+l+"]\x3d"+encodeURIComponent(e[l]));this.loadXML(g+(0>g.indexOf("?")?"?":"\x26")+h.join("\x26"));return!1}}},dhtmlXTreeObject.prototype.update=function(b,c){a.isUndefined(c.text)||this.setItemText(b,c.text)});window.dhtmlXMenuObject&&(dhtmlXMenuObject.prototype.bind=function(){a.BaseBind.bind.apply(this,arguments)},dhtmlXMenuObject.prototype.unbind=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXMenuObject.prototype.unsync=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXMenuObject.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXMenuObject.prototype.serializeTreeData=function(a){for(var b=this.rule,e=[],g={},h=0;h<a.length;h++){var l=a[h],m=l[b.id||"id"];g[m]={};for(var n in b)g[m][n]=l[b[n]]+""}for(h=0;h<a.length;h++)l=a[h],m=l[b.id||"id"],l=g[m],(m=g[l.pid])?(!m.items&&(m.items=[]),m.items.push(l)):e.push(l);return e},dhtmlXMenuObject.prototype.filter=function(a,c){var b=this.datastore.serialize().filter(function(b){return a(b,c)?!0:!1});this.clearAll();this.loadStruct(this.serializeTreeData(b))},dhtmlXMenuObject.prototype.sync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();var b=this;b.rule=c;b.datastore=a;var g=function(a){b.clearAll();b.loadStruct(b.serializeTreeData(this.serialize()));b.callEvent("onSyncApply",[])};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,b,c){g.call(this)}),a.data.attachEvent("onIdChange",function(a,b){combo.changeOptionId(a,b)})];g.call(a)},dhtmlXMenuObject.prototype._initBindSource=function(){a.isUndefined(this._settings)&&(this._settings={id:a.uid(),dataFeed:this._server_feed},a.ui.views[this._settings.id]=this,this.data={silent:a.bind(function(a){a.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXMenuObject.prototype.item=function(a){return null===a?null:{id:a,text:this.getItemText(a)}},dhtmlXMenuObject.prototype.isVisible=function(){return this.optionsArr.length||this._settings.dataFeed?!0:!1});window.dhtmlXTreeView&&(dhtmlXTreeView.prototype.bind=function(){a.BaseBind.bind.apply(this,arguments)},dhtmlXTreeView.prototype.unbind=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXTreeView.prototype.serializeTreeData=function(a){var b=[],e=this.rule.id,g=this.rule.text,h=this.rule.pId;hash={};id=e;text=g;pid=h;j=i=0;for(len=a.length;i<len;i++)a[i]={id:a[i][id],text:a[i][text]+"",pid:a[i][pid],data:a[i]},hash[a[i].id]=a[i];for(;j<len;j++)e=a[j],(g=hash[e.pid])?(!g.items&&(g.items=[]),g.items.push(e)):b.push(e);return b},dhtmlXTreeView.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXTreeView.prototype._initBindSource=function(){a.isUndefined(this._settings)&&(this._settings={id:a.uid(),dataFeed:this._server_feed},a.ui.views[this._settings.id]=this,this.data={silent:a.bind(function(a){a.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onSelect",function(a){this.callEvent("onSelectChange",[a])}),this.attachEvent("onEdit",function(a,c){2===a&&c&&c==this.getCursor()&&this._update_binds();return!0}))},dhtmlXTreeView.prototype.filterByDataStore=function(a,c){var b=this.datastore.serialize(this.rule).filter(function(b){return a(b,c)?!0:!1});this.clearAllNodes();this.loadStruct(this.serializeTreeData(b))},dhtmlXTreeView.prototype.sync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();var b=this;b.rule=c;b.datastore=a;var g=function(a){b.clearAllNodes();b.loadStruct(b.serializeTreeData(this.serialize()));b.callEvent("onSyncApply",[])};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,b,c){g.call(this)}),a.data.attachEvent("onIdChange",function(a,b){combo.changeOptionId(a,b)})];g.call(a)},dhtmlXTreeView.prototype.clearAllNodes=function(){for(var a in this.items)void 0==this.items[a].pId&&this._removeItem(a)},dhtmlXTreeView.prototype.item=function(a){return null===a?null:{id:a,text:this.getItemText(a)}},dhtmlXTreeView.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeView.prototype.isVisible=function(){return!0},dhtmlXTreeView.prototype.refresh=function(){},dhtmlXTreeView.prototype.filter=function(b,c){if(this._settings.dataFeed){var e={};if(b||c){if("function"==typeof b){if(!c)return;b(c,e)}else a.isUndefined(b)?e=c:e[b]=c;this.deleteChildItems(0);var g=this._settings.dataFeed;if("function"==typeof g)return g.call(this,[data.id||data,data]);var h=[],l;for(l in e)h.push("dhx_filter["+l+"]\x3d"+encodeURIComponent(e[l]));this.loadXML(g+(0>g.indexOf("?")?"?":"\x26")+h.join("\x26"));return!1}}},dhtmlXTreeView.prototype.update=function(b,c){a.isUndefined(c.text)||this.setItemText(b,c.text)});window.dhtmlXCheckBox&&(dhtmlXCheckBox.prototype.bind=function(){a.BaseBind.bind.apply(this,arguments)},dhtmlXCheckBox.unbind=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXCheckBox.unsync=function(b){a.BaseBind._unbind.call(this,b)},dhtmlXCheckBox.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXCheckBox.prototype.sync=function(a,c,e){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();var b=this;b.rule=c;b.datastore=a;var h=function(g){b.clearAll();g=e.getValue().split(",").map(function(a){return dhx4.trim(a)});for(var h=a.data.order,l=[],q=0;q<h.length;q++){var r=a.data.pull[h[q]];l.push({id:h[q],text:r[c.text]+"",value:r[c.value]+"",checked:"-1"==g.indexOf(r[c.value])?!1:!0})}b.addOption(l,c)};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,b,c){h.call(this)}),a.data.attachEvent("onIdChange",function(a,c){b.changeOptionId(a,c)})];a.attachEvent("onXLE",function(){b.callEvent("onXLE",[])});h.call(a)},dhtmlXCheckBox.prototype._initBindSource=function(){a.isUndefined(this._settings)&&(this._settings={id:a.uid(),dataFeed:this._server_feed},a.ui.views[this._settings.id]=this,this.data={silent:a.bind(function(a){a.call(this)},this)},this.dhtmlxEventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCheckBox.prototype.dhtmlxEventable=function(a){a.attachEvent=function(a,b,g){a="ev_"+a.toLowerCase();this[a]||(this[a]=new this.eventCatcher(g||this));return a+":"+this[a].addEvent(b)};a.callEvent=function(a,b){a="ev_"+a.toLowerCase();return this[a]?this[a].apply(this,b):!0};a.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]};a.eventCatcher=function(a){var b=[],c=function(){for(var c=!0,e=0;e<b.length;e++)if(null!=b[e])var g=b[e].apply(a,arguments),c=c&&g;return c};c.addEvent=function(a){"function"!=typeof a&&(a=eval(a));return a?b.push(a)-1:!1};c.removeEvent=function(a){b[a]=null};return c};a.detachEvent=function(a){0!=a&&(a=a.split(":"),this[a[0]].removeEvent(a[1]))};a.detachAllEvents=function(){for(var a in this)0==a.indexOf("ev_")&&(this.detachEvent(a),this[a]=null)};a=null});window.dhtmlXFileUpload&&(dhtmlXFileUpload.prototype.serializeUploadData=function(a){for(var b=[],e=0;e<a.length;e++)b.push({id:a[e].id,name:a[e][this.rule.name]||"",size:a[e][this.rule.size]||"",extend:a[e][this.rule.ext]||"",path:a[e][this.rule.path]||"",docid:a[e][this.rule.docid]||""});return b},dhtmlXFileUpload.prototype.sync=function(a,c){this._initBindSource&&this._initBindSource();a._initBindSource&&a._initBindSource();var b=this;b.rule=c;b.datastore=a;var g=function(a){a=b.serializeUploadData(this.serialize());b.setDatas(a);b.addItems()};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,b,c){g.call(this)})];g.call(a)})})();