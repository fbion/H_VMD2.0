function dtmlXMLLoaderObject(a,b,c,d){return this.xmlDoc="",this.async="undefined"!=typeof c?c:!0,this.onloadAction=a||null,this.mainObject=b||null,this.waitCall=null,this.rSeed=d||!1,this}function callerFunction(a,b){return this.handler=function(c){return c||(c=window.event),a(c,b),!0},this.handler}function getAbsoluteLeft(a){return getOffset(a).left}function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}}function getOffsetRect(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}}function getOffset(a){return a.getBoundingClientRect?getOffsetRect(a):getOffsetSum(a)}function convertStringToBoolean(a){switch("string"==typeof a&&(a=a.toLowerCase()),a){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(a){return-1!=a.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function _dhtmlxError(){return this.catches||(this.catches=new Array),this}function dhtmlXHeir(a,b){for(var c in b)"function"==typeof b[c]&&(a[c]=b[c]);return a}function dhtmlxEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function dataProcessor(a){return this.serverProcessor=a,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this}function dhtmlXCellObject(a,b){this.cell=document.createElement("DIV"),this.cell.className="dhx_cell"+(b||""),this._idd=a,this._isCell=!0,this.conf={borders:!0,idx:{},css:b||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar"},ofs_nodes:{t:{},b:{}}},this.dataNodes={},this.views={};var c=document.createElement("DIV");return c.className="dhx_cell_cont"+this.conf.css,this.cell.appendChild(c),c=null,this._updateIdx=function(){for(var a in this.conf.idx)this.conf.idx[a]=null,delete this.conf.idx[a];for(var b=0;b<this.cell.childNodes.length;b++){var c=this.cell.childNodes[b].className;for(var a in this.conf.idx_data){var d=new RegExp(this.conf.idx_data[a]);null!=c.match(d)&&(this.conf.idx[a]=b)}}this.callEvent("_onIdxUpdated",[])},this._adjustAttached=function(){for(var a in this.dataNodes)null!=this.dataNodes[a]&&"function"==typeof this.dataNodes[a].setSizes&&this.dataNodes[a].setSizes();null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&this.dataObj.setSizes.apply(this.dataObj,arguments)},this._setSize=function(a,b,c,d,e,f,g){this.conf.size||(this.conf.size={}),this.conf.size.x=a,this.conf.size.y=b,this.conf.size.w=c,this.conf.size.h=d,this.cell.style.left=a+"px",this.cell.style.top=b+"px",this.cell.style.width=c+"px",this.cell.style.height=d+"px",this.callEvent("_onSetSize",[]),f!==!0?this._adjustCont(e,g):this._adjustAttached(e),this._adjustProgress()},this._adjustCont=function(a,b){var c=this.cell.childNodes[this.conf.idx.cont],d=0;for(var e in this.conf.ofs_nodes.t){var f=this.conf.ofs_nodes.t[e];d+="func"==f?this[e]():1==f?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0}var g=0;for(var e in this.conf.ofs_nodes.b){var f=this.conf.ofs_nodes.b[e];g+="func"==f?this[e]():1==f?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0}c.style.left="0px",c.style.top=d+"px",this.conf.cells_cont||(this.conf.cells_cont={},c.style.width=this.cell.offsetWidth+"px",c.style.height=Math.max(this.cell.offsetHeight-d-g,0)+"px",this.conf.cells_cont.w=parseInt(c.style.width)-c.offsetWidth,this.conf.cells_cont.h=parseInt(c.style.height)-c.offsetHeight),c.style.left="0px",c.style.top=d+"px",c.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px",c.style.height=Math.max(this.conf.size.h-d-g+this.conf.cells_cont.h,0)+"px",c=null,this._adjustAttached(a),"expand"==b&&"editor"==this.dataType&&null!=this.dataObj&&this.dataObj._prepareContent(!0)},this._mtbUpdBorder=function(){for(var a=["menu","toolbar"],b=0;b<a.length;b++)if(null!=this.conf.idx[a[b]]){var c=this.cell.childNodes[this.conf.idx[a[b]]],d="dhx_cell_"+a[b]+"_no_borders",e="dhx_cell_"+a[b]+"_def";c.className=c.className.replace(new RegExp(this.conf.borders?d:e),this.conf.borders?e:d),c=null}},this._resetSizeState=function(){this.conf.cells_cont=null},this.conf.view="def",this.conf.views_loaded={},this.conf.views_loaded[this.conf.view]=!0,this._viewSave=function(a){this.views[a]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};for(var b=this.cell.childNodes[this.conf.idx.cont];b.childNodes.length>0;)this.views[a].cellCont.push(b.firstChild),b.removeChild(b.firstChild);this.dataType=null,this.dataObj=null;for(var c in this.dataNodes){for(var d in this.conf.ofs_nodes)"undefined"!=typeof this.conf.ofs_nodes[d][c]&&(this.views[a].ofs_nodes[d][c]=this.conf.ofs_nodes[d][c],this.conf.ofs_nodes[d][c]=null,delete this.conf.ofs_nodes[d][c]);this.views[a].dataNodesCont[c]=this.cell.childNodes[this.conf.idx[c]],this.cell.removeChild(this.cell.childNodes[this.conf.idx[c]]),this.views[a].dataNodes[c]=this.dataNodes[c],this.dataNodes[c]=null,delete this.dataNodes[c],this._updateIdx()}this.callEvent("_onViewSave",[a])},this._viewRestore=function(a){if(null!=this.views[a]){this.dataObj=this.views[a].dataObj,this.dataType=this.views[a].dataType;for(var b=0;b<this.views[a].cellCont.length;b++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[a].cellCont[b]);for(var c in this.views[a].dataNodes)this.dataNodes[c]=this.views[a].dataNodes[c],"menu"==c&&this.cell.insertBefore(this.views[a].dataNodesCont[c],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),"toolbar"==c&&this.cell.insertBefore(this.views[a].dataNodesCont[c],this.cell.childNodes[this.conf.idx.cont]),"sb"==c&&this.cell.appendChild(this.views[a].dataNodesCont[c]),this._updateIdx();for(var c in this.views[a].ofs_nodes)for(var d in this.views[a].ofs_nodes[c])this.conf.ofs_nodes[c][d]=this.views[a].ofs_nodes[c][d];this.conf.borders!=this.views[a].borders&&this[this.views[a].borders?"_showBorders":"_hideBorders"](!0),this.callEvent("_onViewRestore",[a]),this._viewDelete(a)}},this._viewDelete=function(a){if(null!=this.views[a]){this.views[a].borders=null;for(var b in this.views[a].ofs_nodes){for(var c in this.views[a].ofs_nodes[b])this.views[a].ofs_nodes[b][c]=null;this.views[a].ofs_nodes[b]=null}this.views[a].dataType=null,this.views[a].dataObj=null;for(var d=0;d<this.views[a].cellCont.length;d++)this.views[a].cellCont[d]=null;this.views[a].cellCont=null;for(var b in this.views[a].dataNodes)this.views[a].dataNodes[b]=null,this.views[a].dataNodesCont[b]=null;this.views[a].dataNodes=this.views[a].dataNodesCont=null,this.views[a]=null,delete this.views[a]}},window.dhx4._eventable(this),this._updateIdx(),this}function dhtmlXCalendarObject(a,b){this.i={};var c=null;if("string"==typeof a)var d=document.getElementById(a);else var d=a;d&&"object"==typeof d&&d.tagName&&"input"!=String(d.tagName).toLowerCase()&&(c=d),d=null,"object"==typeof a&&a.length||(a=[a]);for(var e=0;e<a.length;e++)"string"==typeof a[e]&&(a[e]=document.getElementById(a[e])||null),null!=a[e]&&a[e].tagName&&"input"==String(a[e].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:a[e]}:a[e]instanceof Array||!(a[e]instanceof Object)||null==a[e].input&&null==a[e].button||(null!=a[e].input&&"string"==typeof a[e].input&&(a[e].input=document.getElementById(a[e].input)),null!=a[e].button&&"string"==typeof a[e].button&&(a[e].button=document.getElementById(a[e].button)),this.i[window.dhx4.newId()]=a[e]),a[e]=null;this.conf={skin:b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"dhx_skyblue",zi:window.dhx4.newId(),touch:"undefined"!=typeof window.ontouchstart},this.setSkin=function(a,b){(this.conf.skin!=a||b)&&(this.conf.skin=a,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),null!=c?(this._hasParent=!0,c.appendChild(this.base),c=null):document.body.appendChild(this.base),this.setParent=function(a){this._hasParent&&("object"==typeof a?a.appendChild(this.base):"string"==typeof a&&document.getElementById(a).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.conf.touch?this.base.ontouchstart=function(a){a=a||event,a.preventDefault&&a.preventDefault(),a.cancelBubble=!0}:(this.base.onclick=function(a){a=a||event,a.cancelBubble=!0},this.base.onmousedown=function(){return!1}),this.loadUserLanguage=function(a){if(this.langData[a]&&(this.lang=a,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont))for(var b=0,c=0;c<this.msCont.childNodes.length;c++)for(var d=0;d<this.msCont.childNodes[c].childNodes.length;d++)this.msCont.childNodes[c].childNodes[d].innerHTML=this.langData[this.lang].monthesSNames[b++]},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(a){return a=a||event,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth);var f=document.createElement("UL");f.className="dhtmlxcalendar_line",this.contMonth.appendChild(f);var g=document.createElement("LI");g.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",g.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>",f.appendChild(g);var h=this;g[this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event;var b=a.target||a.srcElement;if(b.className&&0===b.className.indexOf("dhtmlxcalendar_month_arrow")){h._hideSelector();var c=b.parentNode.firstChild==b?-1:1,d=new Date(h._activeMonth);return h._drawMonth(new Date(h._activeMonth.getFullYear(),h._activeMonth.getMonth()+c,1,0,0,0,0)),void h._evOnArrowClick([d,new Date(h._activeMonth)])}return b.className&&"dhtmlxcalendar_month_label_month"==b.className?(a.cancelBubble=!0,void h._showSelector("month",Math.round(b.offsetLeft+b.offsetWidth/2),b.offsetTop+b.offsetHeight+2,"selector_month",!0)):b.className&&"dhtmlxcalendar_month_label_year"==b.className?(a.cancelBubble=!0,void h._showSelector("year",Math.round(b.offsetLeft+b.offsetWidth/2),b.offsetTop+b.offsetHeight+2,"selector_year",!0)):void h._hideSelector()},this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(a){0==a&&(a=7),this._wStart=Math.min(Math.max(isNaN(a)?1:a,1),7),this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){var a=document.createElement("UL");a.className="dhtmlxcalendar_line",this.contDays.appendChild(a)}else var a=this.contDays.firstChild;var b=this._wStart,c=this.langData[this.lang].daysSNames;c.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var d=0;8>d;d++){if(null==a.childNodes[d]){var e=document.createElement("LI");a.appendChild(e)}else var e=a.childNodes[d];0==d?(e.className="dhtmlxcalendar_cell_wn",e.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(e.className="dhtmlxcalendar_cell"+(b>=6?" dhtmlxcalendar_day_weekday_cell":"")+(1==d?"_first":""),e.innerHTML=c[b],++b>7&&(b=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates[this.conf.touch?"ontouchend":"onclick"]=function(a){a=a||event;var b=a.target||a.srcElement;if(null!=b.parentNode&&null!=b.parentNode._date&&(b=b.parentNode),null!=b._date&&!b._css_dis){var c=h._activeDate.getHours(),d=h._activeDate.getMinutes(),e=b._date;if(h.checkEvent("onBeforeChange")&&!h.callEvent("onBeforeChange",[new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),c,d)]))return;null!=h._activeDateCell&&(h._activeDateCell._css_date=!1,h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w));var f=h._activeDate.getFullYear()+"_"+h._activeDate.getMonth()!=e.getFullYear()+"_"+e.getMonth();h._nullDate=!1,h._activeDate=new Date(e.getFullYear(),e.getMonth(),e.getDate(),c,d),h._activeDateCell=b,h._activeDateCell._css_date=!0,h._activeDateCell._css_hover=!1,h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w),f&&h._drawMonth(h._activeDate),h._activeInp&&h.i[h._activeInp]&&null!=h.i[h._activeInp].input&&(h.i[h._activeInp].input.value=h._dateToStr(new Date(h._activeDate.getTime()))),h._hasParent||h._hide(),h._evOnClick([new Date(h._activeDate.getTime())])}},this.conf.touch||(this.contDates.onmouseover=function(a){a=a||event;var b=a.target||a.srcElement;if(null!=b.parentNode&&null!=b.parentNode._date&&(b=b.parentNode),null!=b._date){if(h._lastHover==b||b._css_hover)return;b._css_hover=!0,h._updateCellStyle(b._q,b._w),h._lastHover=b,h._evOnMouseOver([new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),0,0,0,0),a]),b=null}},this.contDates.onmouseout=function(a){h._clearDayHover(a||event)}),this._lastHover=null,this._clearDayHover=function(a){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),h._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a]),this._lastHover=null)};for(var e=0;6>e;e++){var f=document.createElement("UL");f.className="dhtmlxcalendar_line",this.contDates.appendChild(f);for(var i=0;7>=i;i++){var g=document.createElement("LI");g.className=0==i?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",f.appendChild(g),g[this.conf.touch?"ontouchend":"onclick"]=function(){h._activeDate=this._date,h._doOnSelectorChange()}}}this.contTime=document.createElement("DIV"),this.contTime.className="dhtmlxcalendar_time_cont",this.base.firstChild.appendChild(this.contTime),this.showTime=function(){this.contTime.style.display="",this._ifrSize()},this.hideTime=function(){this.contTime.style.display="none",this._ifrSize()};var f=document.createElement("UL");f.className="dhtmlxcalendar_line",this.contTime.appendChild(f);var g=document.createElement("LI");g.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr",g.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'> : </span><span class='dhtmlxcalendar_label_minutes'></span>",f.appendChild(g),g[this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event;var b=a.target||a.srcElement;if(null!=b.tagName&&"span"==b.tagName.toLowerCase()&&1==b._par&&null!=b.parentNode&&(b=b.parentNode),b.className&&"dhtmlxcalendar_label_hours"==b.className){a.cancelBubble=!0;var c=h.contMonth.offsetHeight+h.contDays.offsetHeight+h.contDates.offsetHeight+b.offsetTop;return void h._showSelector("hours",Math.round(b.offsetLeft+b.offsetWidth/2),c-2,"selector_hours",!0)}if(b.className&&"dhtmlxcalendar_label_minutes"==b.className){if(a.cancelBubble=!0,1==h._minutesInterval){var d=h.getFormatedDate("%i");b.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+d.charAt(0)+"</span>"+d.charAt(1),b.firstChild._par=!0,h._selectorMode=1}var c=h.contMonth.offsetHeight+h.contDays.offsetHeight+h.contDates.offsetHeight+b.offsetTop;return void h._showSelector("minutes",Math.round(b.offsetLeft+b.offsetWidth/2),c-2,"selector_minutes",!0)}h._hideSelector()},this._activeMonth=null,this._activeDate=new Date,this._activeDateCell=null,this.setDate=function(a){this._nullDate="undefined"==typeof a||""===a||!a,a instanceof Date||(a=this._strToDate(String(a||"")),"Invalid Date"==a&&(a=new Date));var b=a.getTime();this._isOutOfRange(b)||(this._activeDate=new Date(b),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())},this.getDate=function(a){if(this._nullDate)return null;var b=new Date(this._activeDate.getTime());return a?this._dateToStr(b):b},this._drawMonth=function(a){if(a instanceof Date){isNaN(a.getFullYear())&&(a=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeMonth=new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0),this._activeDateCell=null;var b=new Date(this._activeMonth.getTime()),c=b.getDay(),d=c-this._wStart;0>d&&(d+=7),b.setDate(b.getDate()-d);for(var e=a.getMonth(),f=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),g=0,h=0;6>h;h++)for(var i=this._wStart,j=0;7>=j;j++)if(0==j){var k=this.getWeekNumber(new Date(b.getFullYear(),b.getMonth(),b.getDate()+g,0,0,0,0));this.contDates.childNodes[h].childNodes[j].innerHTML="<div class='dhtmlxcalendar_label'>"+k+"</div>"}else{var l=new Date(b.getFullYear(),b.getMonth(),b.getDate()+g,0,0,0,0),m=(l.getDay(),l.getTime()),n="dhtmlxcalendar_label";null!=this._tipData[m]?(this._tipData[m].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[h].childNodes[j].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[h].childNodes[j].setAttribute("title",this._tipData[m].text),this._tipData[m].showIcon&&(n+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[h].childNodes[j].removeAttribute("title"),this.contDates.childNodes[h].childNodes[j].innerHTML="<div class='"+n+"'>"+l.getDate()+"</div>",this.contDates.childNodes[h].childNodes[j]._date=new Date(m),this.contDates.childNodes[h].childNodes[j]._q=h,this.contDates.childNodes[h].childNodes[j]._w=j,this.contDates.childNodes[h].childNodes[j]._css_month=l.getMonth()==e,this.contDates.childNodes[h].childNodes[j]._css_date=!this._nullDate&&m==f,this.contDates.childNodes[h].childNodes[j]._css_weekend=i>=6,this.contDates.childNodes[h].childNodes[j]._css_dis=this._isOutOfRange(m),this.contDates.childNodes[h].childNodes[j]._css_holiday=1==this._holidays[m],this._updateCellStyle(h,j),m==f&&(this._activeDateCell=this.contDates.childNodes[h].childNodes[j]),++i>7&&(i=1),g++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(a)}},this._updateCellStyle=function(a,b){var c=this.contDates.childNodes[a].childNodes[b],d="dhtmlxcalendar_cell dhtmlxcalendar_cell";d+=c._css_month?"_month":"",d+=c._css_date?"_date":"",d+=c._css_weekend?"_weekend":"",d+=c._css_holiday?"_holiday":"",d+=c._css_dis?"_dis":"",d+=c._css_hover&&!c._css_dis?"_hover":"",c.className=d,c=null},this._minutesInterval=5,this._initSelector=function(a,b){if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this.conf.touch||(this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(a){a=a||event;var b=a.target||a.srcElement;b._cell===!0&&(h._selHover!=b&&h._clearSelHover(),null!=String(b.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(b.className+=" dhtmlxcalendar_selector_cell_hover",h._selHover=b))},this._sel.onmouseout=function(){h._clearSelHover()}),this._sel.firstChild.firstChild.firstChild.childNodes[0][this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event,a.cancelBubble=!0,h._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2][this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event,a.cancelBubble=!0,h._scrollYears(1)},this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),1!=this._sel._ta[a]){if("month"==a){this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);var c=this;window.setTimeout(function(){c._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(c.msCont)},10);for(var d=0,e=0;4>e;e++){var f=document.createElement("UL");f.className="dhtmlxcalendar_selector_line",this.msCont.appendChild(f);for(var g=0;3>g;g++){var i=document.createElement("LI");i.innerHTML=this.langData[this.lang].monthesSNames[d],i.className="dhtmlxcalendar_selector_cell",f.appendChild(i),i._month=d,i._cell=!0,this._msCells[d++]=i}}this.msCont[this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;null!=b._month&&(h._hideSelector(),h._updateActiveMonth(),h._drawMonth(new Date(h._activeMonth.getFullYear(),b._month,1,0,0,0,0)),h._doOnSelectorChange())}}if("year"==a){this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);var c=this;window.setTimeout(function(){c._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(c.ysCont)},10);for(var e=0;4>e;e++){var f=document.createElement("UL");f.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(f);for(var g=0;3>g;g++){var i=document.createElement("LI");i.className="dhtmlxcalendar_selector_cell",i._cell=!0,f.appendChild(i)}}this.ysCont[this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;null!=b._year&&(h._hideSelector(),h._drawMonth(new Date(b._year,h._activeMonth.getMonth(),1,0,0,0,0)),h._doOnSelectorChange())}}if("hours"==a){this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(var d=0,e=0;4>e;e++){var f=document.createElement("UL");f.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(f);for(var g=0;6>g;g++){var i=document.createElement("LI");i.innerHTML=this._fixLength(d,2),i.className="dhtmlxcalendar_selector_cell",f.appendChild(i),i._hours=d,i._cell=!0,this._hsCells[d++]=i}}this.hsCont[this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;null!=b._hours&&(h._hideSelector(),h._activeDate.setHours(b._hours),h._updateActiveHours(),h._updateVisibleHours(),h._doOnSelectorChange())}}if("minutes"==a){var j=4,k=3,l=2;1==this._minutesInterval&&(1==this._selectorMode?(j=2,k=3,l=1):(j=2,k=5,l=1,b+="5")),10==this._minutesInterval&&(j=2),15==this._minutesInterval&&(j=1,k=4,b+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(var d=0,e=0;j>e;e++){var f=document.createElement("UL");f.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(f);for(var g=0;k>g;g++){var i=document.createElement("LI");i.innerHTML=l>1?this._fixLength(d,l):d,i.className="dhtmlxcalendar_selector_cell",f.appendChild(i),i._minutes=d,i._cell=!0,this._rsCells[d]=i,d+=this._minutesInterval}}this.rsCont[this.conf.touch?"ontouchstart":"onclick"]=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;if(null!=b._minutes){if(1==h._minutesInterval){var c=h.getFormatedDate("%i");if(c=1==h._selectorMode?b._minutes.toString()+c.charAt(1):c.charAt(0)+b._minutes.toString(),h._activeDate.setMinutes(Number(c)),h._hideSelector(),1==h._selectorMode)return h._updateVisibleMinutes(!0),h._selectorMode=2,h._showSelector("minutes",h._sel._x,h._sel._y,"selector_minutes",!0),void h._updateActiveMinutes();h._selectorMode=1}else h._hideSelector(),h._activeDate.setMinutes(b._minutes),h._updateActiveMinutes();h._updateVisibleMinutes(),h._doOnSelectorChange()}}}this._sel._ta[a]=!0}},this._showSelector=function(a,b,c,d,e){if(e===!0&&null!=this._sel&&this._isSelectorVisible()&&a==this._sel._t)return void this._hideSelector();"dhx_terrace"==this.conf.skin&&(b+=12),this._sel&&this._sel._ta[a]||this._initSelector(a,d),a!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=b,this._sel._y=c,this._sel.style.visibility="hidden",this._sel.style.display="";var f=this.base.offsetWidth-2;this._selCover.style.width=0>f?"":f+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px";var g=this.contDates.offsetHeight+this.contDays.offsetHeight-1;this._selCover.style.height=0>g?"":g+"px",this._selCover.style.display="",this._sel._t=a,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+d,this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==a?"":"none";var h=Math.max(0,b-Math.round(this._sel.offsetWidth/2));h+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(h=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=h+"px",this._sel.style.top="hours"==a||"minutes"==a?c-this._sel.offsetHeight+"px":c+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(a)},this._doOnSelectorShow=function(a){"month"==a&&this._updateActiveMonth(),"year"==a&&this._updateYearsList(this._activeMonth),"hours"==a&&this._updateActiveHours(),"minutes"==a&&this._updateActiveMinutes()},this._hideSelector=function(){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none","minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))},this._isSelectorVisible=function(){return this._sel?"none"!=this._sel.style.display:!1},this._doOnSelectorChange=function(a){null!=this._dateFormat&&-1==this._dateFormat.indexOf("%d")&&(this._activeDate=this._activeMonth),this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),a===!0])},this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)},this._unloadSelector=function(a){if(this._sel&&this._sel._ta[a]){if("month"==a){this.msCont.onclick=this.msCont.ontouchstart=null,this._msActive=null;for(var b in this._msCells)this._msCells[b]._cell=null,this._msCells[b]._month=null,this._msCells[b].parentNode.removeChild(this._msCells[b]),this._msCells[b]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont),this.msCont=null}if("year"==a){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var b in this._ysCells)this._ysCells[b]._cell=null,this._ysCells[b]._year=null,this._ysCells[b].parentNode.removeChild(this._ysCells[b]),this._ysCells[b]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont),this.ysCont=null}if("hours"==a){this.hsCont.onclick=this.hsCont.ontouchstart=null,this._hsActive=null;for(var b in this._hsCells)this._hsCells[b]._cell=null,this._hsCells[b]._hours=null,this._hsCells[b].parentNode.removeChild(this._hsCells[b]),this._hsCells[b]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont),this.hsCont=null}if("minutes"==a){this.rsCont.onclick=this.rsCont.ontouchstart=null,this._rsActive=null;for(var b in this._rsCells)this._rsCells[b]._cell=null,this._rsCells[b]._minutes=null,this._rsCells[b].parentNode.removeChild(this._rsCells[b]),this._rsCells[b]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont),this.rsCont=null}this._sel._ta[a]=null}},this.setMinutesInterval=function(a){(1==a||5==a||10==a||15==a)&&(this._minutesInterval=a,this._unloadSelector("minutes"))},this._updateActiveMonth=function(){"undefined"!=typeof this._msActive&&"undefined"!=typeof this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"),this._msActive=this._activeMonth.getMonth(),this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active",this._enblkbrd&&(this.focusObj="month")},this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();this._ysActive=a,this._ysCells[a]&&(this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"),this._enblkbrd&&(this.focusObj="year")
},this._updateYearsList=function(a){for(var b in this._ysCells)this._ysCells[b]=null,delete this._ysCells[b];for(var c=12*Math.floor(a.getFullYear()/12),d=0;4>d;d++)for(var e=0;3>e;e++)this.ysCont.childNodes[d].childNodes[e].innerHTML=c,this.ysCont.childNodes[d].childNodes[e]._year=c,this.ysCont.childNodes[d].childNodes[e].className="dhtmlxcalendar_selector_cell",this._ysCells[c++]=this.ysCont.childNodes[d].childNodes[e];this._updateActiveYear()},this._scrollYears=function(a){var b=(0>a?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a,c=new Date(b,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(c)},this._updateActiveHours=function(){"undefined"!=typeof this._hsActive&&"undefined"!=typeof this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"),this._hsActive=this._activeDate.getHours(),this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)},this._updateActiveMinutes=function(){null!=this._rsActive&&"undefined"!=typeof this._rsActive&&"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"),this._rsActive=1==this._minutesInterval?this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._activeDate.getMinutes(),"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateVisibleMinutes=function(a){var b=this._fixLength(this._activeDate.getMinutes(),2).toString();1==a&&(b=b.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+b.charAt(1)+"</span>"),this.contTime.firstChild.firstChild.childNodes[3].innerHTML=b,1==a&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)},this._fixLength=function(a,b){for(;String(a).length<b;)a="0"+String(a);return a},this._dateFormat="",this._dateFormatRE=null,this.setDateFormat=function(a){var b={};if(null!=this._strToDate)for(var c in this.i)if(null!=this.i[c].input&&this.i[c].input.value.length>0){var d=this._strToDate(this.i[c].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");d instanceof Date&&(b[c]=d)}this._dateFormat=a;var e=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){var b=a.replace(/%/,"");switch(b){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+f.langData[f.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+f.langData[f.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM"}return a});this._dateFormatRE=new RegExp(e,"i");for(var c in b)this.i[c].input.value=this._dateToStr(b[c]);b=null;var f=this;if(!this.attachEvent||"%Y-%m"!=a&&"%Y%m"!=a&&"%Y"!=a)-1!=a.indexOf("%d")&&null!=arguments[1]&&(this._type=arguments[1],this.contDates.style.display="",this.contDays.style.display="",this.contTime.style.display=-1!=a.indexOf("%i")?"":"none",this.contMonth.style.width="211px",this.contMonth.firstChild.firstChild.style.width="211px",this.contMonth.firstChild.firstChild.childNodes[1].firstChild.style.display="");else{type=arguments[1],this._type=arguments[1];for(var c in f.i)null!=f.i[c].input&&dhtmlx.event(f.i[c].input,"click",function(){"%Y"==a&&(f.contMonth.firstChild.firstChild.childNodes[1].firstChild.style.display="none",window.setTimeout(function(){f.contMonth.firstChild.firstChild.childNodes[1].firstChild.style.display="none",f.contMonth.firstChild.firstChild.childNodes[1].lastChild.click()},20))});var g=function(b){var c=f.getFormatedDate(a,b);for(var d in f.i)null!=f.i[d].input&&(f.i[d].input.value=c);f._activeDate=b;var e=f._type;null!=e&&("cell"==e[0]&&e[2]&&("cell"==e[0]&&(e[2]._grid_calendarA._last_operation_calendar=!0),e[2].editor&&(f._type[3]=e[2].editor),e[2].editor||(e[2].editor=f._type[3],e[2].cell._cediton=!0),e[1].call(e[2])),"form"==e[0]&&e[1].call(e[2],e[2],b,e[3]))},h=function(){f.attachEvent("onArrowClick",function(a,b){"%Y"==f._dateFormat&&(f.contMonth.firstChild.firstChild.childNodes[1].firstChild.style.display="none"),g(f.nowDate||b),f._doOnSelectorChange(),f._ifrSize()})};f.dhxEvent||(f.dhxEvent=new Object),f.dhxEvent.arrowClick||(f.dhxEvent.arrowClick=h,f.dhxEvent.arrowClick());var i=function(){for(var a=f._sel.firstChild.firstChild.firstChild.childNodes[1].childNodes,b=0;b<a.length;b++)-1!=a[b].className.indexOf(f._sel._t)&&dhtmlx.event(a[b],"click",function(){g(f._activeMonth),(null==f._type||"%Y-%m"==f._dateFormat||"%Y%m"==f._dateFormat)&&f._hide()})},j=function(){for(var a=f._sel.firstChild.firstChild.firstChild.childNodes[1].childNodes,b=0;b<a.length;b++)-1!=a[b].className.indexOf(f._sel._t)&&dhtmlx.event(a[b],"click",function(){"%Y"==f._dateFormat&&f._hide(),"%Y"==f._dateFormat&&(f.contMonth.firstChild.firstChild.childNodes[1].firstChild.style.display="none"),g(f._activeMonth),f._ifrSize()})};if(dhtmlx.event(this.contMonth.firstChild.firstChild,"click",function(){f._ifr&&f._sel&&(f._ifr.style.height=f.base.clientHeight+f._sel.clientHeight+"px"),f.dhxEvent||(f.dhxEvent=new Object),f._sel&&("month"==f._sel._t?f.dhxEvent.monthClick||(f.dhxEvent.monthClick=i,f.dhxEvent.monthClick()):"year"==f._sel._t&&(f.dhxEvent.yearClick||(f.dhxEvent.yearClick=j,f.dhxEvent.yearClick()),"%Y"==a&&(f._selCover.nextSibling.style.width="150px",parseInt(f._selCover.nextSibling.style.left)<0&&(f._selCover.nextSibling.style.left="-20px"))))}),"%Y-%m"==a||"%Y%m"==a)this.contDates.style.display="none",this.contDays.style.display="none",this.contTime.style.display="none",this.contMonth.style.width="150px",this.contMonth.firstChild.firstChild.style.width="150px";else if("%Y"==a){this.contDates.style.display="none",this.contDays.style.display="none",this.contTime.style.display="none",this.contMonth.style.width="150px",this.contMonth.firstChild.firstChild.style.width="150px";var c=!1;for(c in f.i);"boolean"==typeof c&&(this.contMonth.firstChild.firstChild.childNodes[1].firstChild.style.display="none",this.contMonth.firstChild.firstChild.childNodes[1].lastChild.click());var k=function(){dhtmlx.event(f.contMonth.firstChild.firstChild.firstChild,"click",function(){var a=f._activeDate,b=a.getFullYear(),c=parseInt(b-1,10),d=new Date(c,1);f.nowDate=d,f._activeMonth=d})},l=function(){dhtmlx.event(f.contMonth.firstChild.firstChild.lastChild,"click",function(){var a=f._activeDate,b=a.getFullYear(),c=parseInt(b+1,10),d=new Date(c,1);f.nowDate=d,f._activeMonth=d})};f.dhxEvent.leftArrowClick||(f.dhxEvent.leftArrowClick=k,f.dhxEvent.leftArrowClick()),f.dhxEvent.rightArrowClick||(f.dhxEvent.rightArrowClick=l,f.dhxEvent.rightArrowClick())}}},this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this._getInd=function(a,b){for(var c=0;c<b.length;c++)if(b[c].toLowerCase()==a)return c;return-1},this._updateDateStr=function(a){if(this._dateFormatRE&&a.match(this._dateFormatRE)&&a!=this.getFormatedDate()){var b=this._strToDate(a);if(b instanceof Date){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds())]))return void(null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()));this._nullDate=!1,this._activeDate=b,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)}}},this.showMonth=function(a){"string"==typeof a&&(a=this._strToDate(a)),a instanceof Date&&this._drawMonth(a)},this.setFormatedDate=function(a,b,c,d){var e=this._strToDate(b,a);return d?e:void this.setDate(e)},this.getFormatedDate=function(a,b){if(!(b&&b instanceof Date)){if(null!=this._strToDate)for(var c in this.i)if(null!=this.i[c].input&&0==dhx4.trim(this.i[c].input.value).length)return"";if(this._nullDate)return"";b=new Date(this._activeDate)}return this._dateToStr(b,a)},this.getWeekNumber=function(a){if("string"==typeof a&&(a=this._strToDate(a)),!(a instanceof Date))return"Invalid Date";"undefined"==typeof this._ftDay&&(this._ftDay=4);var b=this._wStart,c=4,d=new Date(a.getFullYear(),0,1,0,0,0,0),e=d.getDay();0==e&&(e=7),b>c&&(c+=7,e+=7);var f=0;e>=b&&c>=e||(f=1);var g=e-b,h=new Date(a.getFullYear(),0,1-g+7*f,0,0,0,0),i=6048e5,j=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,0,0,0,0),k=Math.ceil((j.getTime()-h.getTime())/i);return k},this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"},this.hideWeekNumbers=function(){this.base.firstChild.className=""},this.show=function(a){if(!a&&this._hasParent)return void this._show();if("object"==typeof a&&"undefined"!=typeof a._dhtmlxcalendar_uid&&this.i[a._dhtmlxcalendar_uid]==a)return void this._show(a._dhtmlxcalendar_uid);if("undefined"==typeof a)for(var b in this.i)a||(a=b);a&&this._show(a)},this.hide=function(){this._isVisible()&&this._hide()},this.isVisible=function(){return this._isVisible()},this._activeInp=null,this.pos="bottom",this.setPosition=function(a,b){if(this._px=null,this._py=null,"right"==a||"bottom"==a)this.pos=a;else{if(this.pos="int","undefined"!=typeof a&&!isNaN(a)){this.base.style.left=a+"px";var c=this;window.setTimeout(function(){var b=parseInt(c.contMonth.style.width,10);a+b+5>document.body.clientWidth&&(c.base.style.left=document.body.clientWidth-b-5+"px")},10),this._px=a}"undefined"==typeof b||isNaN(b)||(this.base.style.top=b+"px",this._py=b),this._ifrSize()}},this._show=function(a,b){if(b===!0&&this._activeInp==a&&this._isVisible())return void this._hide();if(this.base.style.visibility="hidden",this.base.style.display="",a){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=" dhtmlxcalendar_in_input");var c=this.i[a].input||this.i[a].button,d=-1!=navigator.appVersion.indexOf("MSIE"),e=Math.max((d?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),f=e+(d?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight);if("right"==this.pos)this.base.style.left=this._getLeft(c)+c.offsetWidth+"px",this.base.style.top=Math.min(this._getTop(c),f-this.base.offsetHeight)+"px";else if("bottom"==this.pos){var g=this._getTop(c)+c.offsetHeight+1;g+this.base.offsetHeight>f&&(g=this._getTop(c)-this.base.offsetHeight),this.base.style.left=this._getLeft(c)+"px",this.base.style.top=g+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=a,c=null}else this._px&&this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector(),this.base.style.visibility="visible",this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this._ifrSize(),this._ifr&&(this._ifr.style.display=""),this.callEvent("onShow",[]),this._enblkbrd&&this.base.lastChild.select()},this._hide=function(){this._hideSelector(),this.base.style.display="none",window.dhx4.zim.clear(this.conf.zi),this.base.className.indexOf("dhtmlxcalendar_in_input")>=0&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")),this._activeInp=null,this._ifr&&(this._ifr.style.display="none"),this.callEvent("onHide",[]),this._enblkbrd&&(this.focusObj=null,this._clearCss(),this.keyActiveCell=null,this.keyActiveCell_month=null,this.keyActiveCell_year=null)},this._isVisible=function(){return"none"!=this.base.style.display},this._getLeft=function(a){return this._posGetOffset(a).left},this._getTop=function(a){return this._posGetOffset(a).top},this._posGetOffsetSum=function(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}},this._posGetOffsetRect=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},this._posGetOffset=function(a){return this[a.getBoundingClientRect?"_posGetOffsetRect":"_posGetOffsetSum"](a)},this._rangeActive=!1,this._rangeFrom=null,this._rangeTo=null,this._rangeSet={},this.setInsensitiveDays=function(a){for(var b=this._extractDates(a),c=0;c<b.length;c++)this._rangeSet[new Date(b[c].getFullYear(),b[c].getMonth(),b[c].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this.clearInsensitiveDays=function(){this._clearRangeSet(),this._drawMonth(this._activeMonth)},this._holidays={},this.setHolidays=function(a){if(null==a)this._clearHolidays();else if(null!=a)for(var b=this._extractDates(a),c=0;c<b.length;c++)this._holidays[new Date(b[c].getFullYear(),b[c].getMonth(),b[c].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this._extractDates=function(a){("string"==typeof a||a instanceof Date)&&(a=[a]);for(var b=[],c=0;c<a.length;c++)if("string"==typeof a[c])for(var d=a[c].split(","),e=0;e<d.length;e++)b.push(this._strToDate(d[e]));else a[c]instanceof Date&&b.push(a[c]);return b},this._clearRange=function(){this._rangeActive=!1,this._rangeType=null,this._rangeFrom=null,this._rangeTo=null},this._clearRangeSet=function(){for(var a in this._rangeSet)this._rangeSet[a]=null,delete this._rangeSet[a]},this._clearHolidays=function(){for(var a in this._holidays)this._holidays[a]=null,delete this._holidays[a]},this._isOutOfRange=function(a){if(1==this._rangeSet[a])return!0;if(this._rangeActive){if("in"==this._rangeType&&(a<this._rangeFrom||a>this._rangeTo))return!0;if("out"==this._rangeType&&a>=this._rangeFrom&&a<=this._rangeTo)return!0;if("from"==this._rangeType&&a<this._rangeFrom)return!0;if("to"==this._rangeType&&a>this._rangeTo)return!0}var b=new Date(a);return this._rangeWeek&&this._rangeWeekData[b.getDay()]===!0?!0:this._rangeMonth&&this._rangeMonthData[b.getDate()]===!0?!0:this._rangeYear&&this._rangeYearData[b.getMonth()+"_"+b.getDate()]===!0?!0:!1},this.clearSensitiveRange=function(){this._clearRange(),this._drawMonth(this._activeMonth)},this.setSensitiveRange=function(a,b,c){var d=!1;if(null!=a&&null!=b){if(a instanceof Date||(a=this._strToDate(a)),b instanceof Date||(b=this._strToDate(b)),a.getTime()>b.getTime())return;this._rangeFrom=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="in",d=!0}d||null==a||null!=b||(a instanceof Date||(a=this._strToDate(a)),this._rangeFrom=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),this._rangeTo=null,c===!0&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",d=!0),d||null!=a||null==b||(b instanceof Date||(b=this._strToDate(b)),this._rangeFrom=null,this._rangeTo=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0).getTime(),c===!0&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",d=!0),d&&this._drawMonth(this._activeMonth)},this.setInsensitiveRange=function(a,b){if(null!=a&&null!=b){if(a instanceof Date||(a=this._strToDate(a)),b instanceof Date||(b=this._strToDate(b)),a.getTime()>b.getTime())return;return this._rangeFrom=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="out",void this._drawMonth(this._activeMonth)}return null!=a&&null==b?void this.setSensitiveRange(null,a,!0):null==a&&null!=b?void this.setSensitiveRange(b,null,!0):void 0},this.disableDays=function(a,b){if("week"==a){"object"!=typeof b&&"undefined"==typeof b.length&&(b=[b]),this._rangeWeekData||(this._rangeWeekData={});for(var c in this._rangeWeekData)this._rangeWeekData[c]=!1,delete this._rangeWeekData[c];for(var d=0;d<b.length;d++)this._rangeWeekData[b[d]]=!0,7==b[d]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==a){"object"!=typeof b&&"undefined"==typeof b.length&&(b=[b]),this._rangeMonthData||(this._rangeMonthData={});for(var c in this._rangeMonthData)this._rangeMonthData[c]=!1,delete this._rangeMonthData[c];for(var d=0;d<b.length;d++)this._rangeMonthData[b[d]]=!0;this._rangeMonth=!0}if("year"==a){var e=this._extractDates(b);this._rangeYearData||(this._rangeYearData={});for(var c in this._rangeYearData)this._rangeYearData[c]=!1,delete this._rangeYearData[c];for(var d=0;d<e.length;d++)this._rangeYearData[e[d].getMonth()+"_"+e[d].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)},this.enableDays=function(a){"week"==a&&(this._rangeWeek=!1),"month"==a&&(this._rangeMonth=!1),"year"==a&&(this._rangeYear=!1),this._drawMonth(this._activeMonth)},this._tipData={},this._tipTM=null,this._tipTMTime=400,this._tipEvs=!1,this._tipPopup=null,this._tipCellDate=null,this._tipCellDim=null,this.setTooltip=function(a,b,c,d){for(var e=this._extractDates(a),f=0;f<e.length;f++){var g=new Date(e[f].getFullYear(),e[f].getMonth(),e[f].getDate(),0,0,0,0).getTime();this._tipData[g]={text:b,showIcon:c,usePopup:d}}this._drawMonth(this._activeMonth)},this.clearTooltip=function(a){for(var b=this._extractDates(a),c=0;c<b.length;c++){var d=new Date(b[c].getFullYear(),b[c].getMonth(),b[c].getDate(),0,0,0,0).getTime();this._tipData[d]=null,delete this._tipData[d]}this._drawMonth(this._activeMonth)},this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime();null!=this._tipData[b]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=a,this._tipCellDim=this.getCellDimension(a),this._tipText=this._tipData[b].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)},this._showTooltipPopup=function(){h._tipPopup||(h._tipPopup=new dhtmlXPopup({mode:"top"})),h._tipPopup.attachHTML(h._tipText),h._tipPopup.show(h._tipCellDim.x,h._tipCellDim.y,h._tipCellDim.w,h._tipCellDim.h),h.callEvent("onPopupShow",[h._tipCellDate])},this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM),null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))},this.getPopup=function(){return this._tipPopup},this.getCellDimension=function(a){if("string"==typeof a&&(a=this._strToDate(a)),!(a instanceof Date))return null;for(var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),c=null,d=0;d<this.contDates.childNodes.length;d++)for(var e=0;e<this.contDates.childNodes[d].childNodes.length;e++){var f=this.contDates.childNodes[d].childNodes[e];null!=f._date&&f._date.getTime()==b&&(c={x:this._getLeft(f),y:this._getTop(f),w:f.offsetWidth,h:f.offsetHeight}),f=null}return c},this._updateFromInput=function(a){if(this._nullInInput&&0==a.value.replace(/\s/g,"").length){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null]))return void(null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()));this.setDate(null)}else this._updateDateStr(a.value);a=null},this._doOnClick=function(a){a=a||event;var b=a.target||a.srcElement;return b._dhtmlxcalendar_uid&&b._dhtmlxcalendar_uid!=h._activeInp&&h._isVisible()&&h._activeInp?void h._hide():void(b._dhtmlxcalendar_uid&&h.i[b._dhtmlxcalendar_uid]||(h._isSelectorVisible()?h._hideSelector():!h._hasParent&&h._isVisible()&&h._hide()))},this._doOnKeyDown=function(a){a=a||event,(27==a.keyCode||13==a.keyCode)&&(h._isSelectorVisible()?h._hideSelector():h._isVisible()&&!h._hasParent&&h._hide())},this._doOnInpClick=function(a){a=a||event;var b=a.target||a.srcElement;b._dhtmlxcalendar_uid&&(h._listenerEnabled||h._updateFromInput(b),h._show(b._dhtmlxcalendar_uid,!0))},this._doOnInpKeyUp=function(a){a=a||event;var b=a.target||a.srcElement;13!=a.keyCode&&b._dhtmlxcalendar_uid&&(h._listenerEnabled||h._updateFromInput(b))},this._doOnBtnClick=function(a){a=a||event;var b=a.target||a.srcElement;b._dhtmlxcalendar_uid&&(null!=h.i[b._dhtmlxcalendar_uid].input&&h._updateFromInput(h.i[b._dhtmlxcalendar_uid].input),h._show(b._dhtmlxcalendar_uid,!0))},this._doOnUnload=function(){h&&h.unload&&h.unload()},"function"==typeof window.addEventListener?(document.body.addEventListener(this.conf.touch?"touchstart":"click",h._doOnClick,!1),window.addEventListener("keydown",h._doOnKeyDown,!1),window.addEventListener("unload",h._doOnUnload,!1)):(document.body.attachEvent("onclick",h._doOnClick),document.body.attachEvent("onkeydown",h._doOnKeyDown),window.attachEvent("onunload",h._doOnUnload));for(var j in this.i)null!=this.i[j].input&&dhtmlx.event(this.i[j].input,"keydown",function(a){a=a||event;var b=a.target||a.srcElement;b._dhtmlxcalendar_uid&&40==a.keyCode&&h.i[j].input.click()});this.attachObj=function(a){var b=window.dhx4.newId();return"string"==typeof a?this.i[b]={input:document.getElementById(a)}:"undefined"!=typeof a.tagName?this.i[b]={input:a}:"object"!=typeof a||null==a.input&&null==a.button||(this.i[b]={},null!=a.input&&(this.i[b].input="string"==typeof a.input?document.getElementById(a.input):a.input),null!=a.button&&(this.i[b].button="string"==typeof a.button?document.getElementById(a.button):a.button)),this._attachEventsToObject(b),b},this.detachObj=function(a){var b=null;if(null!=this.i[a]?b=a:"string"==typeof a?(a=document.getElementById(a),b=a._dhtmlxcalendar_uid):"undefined"!=typeof a.tagName?b=a._dhtmlxcalendar_uid:"object"!=typeof a||null==a.input&&null==a.button||(null==b&&null!=a.input&&(b=("string"==typeof a.input?document.getElementById(a.input):a.input)._dhtmlxcalendar_uid),null==b&&null!=a.button&&(b=("string"==typeof a.button?document.getElementById(a.button):a.button)._dhtmlxcalendar_uid)),null!=b&&null!=this.i[b]){this._detachEventsFromObject(b);for(var c in this.i[c])this.i[b][c]._dhtmlxcalendar_uid=null,this.i[b][c]=null,delete this.i[b][c];return this.i[b]=null,delete this.i[b],!0}return!1},this._attachEventsToObject=function(a){null!=this.i[a].button?(this.i[a].button._dhtmlxcalendar_uid=a,"function"==typeof window.addEventListener?this.i[a].button.addEventListener(this.conf.touch?"touchstart":"click",h._doOnBtnClick,!1):this.i[a].button.attachEvent("onclick",h._doOnBtnClick)):null!=this.i[a].input&&(this.i[a].input._dhtmlxcalendar_uid=a,"function"==typeof window.addEventListener?(this.i[a].input.addEventListener(this.conf.touch?"touchstart":"click",h._doOnInpClick,!1),this.i[a].input.addEventListener("keyup",h._doOnInpKeyUp,!1)):(this.i[a].input.attachEvent("onclick",h._doOnInpClick),this.i[a].input.attachEvent("onkeyup",h._doOnInpKeyUp)))},this._detachEventsFromObject=function(a){null!=this.i[a].button?"function"==typeof window.addEventListener?this.i[a].button.removeEventListener(this.conf.touch?"touchstart":"click",h._doOnBtnClick,!1):this.i[a].button.detachEvent("onclick",h._doOnBtnClick):null!=this.i[a].input&&("function"==typeof window.addEventListener?(this.i[a].input.removeEventListener(this.conf.touch?"touchstart":"click",h._doOnInpClick,!1),this.i[a].input.removeEventListener("keyup",h._doOnInpKeyUp,!1)):(this.i[a].input.detachEvent("onclick",h._doOnInpClick),this.i[a].input.detachEvent("onkeyup",h._doOnInpKeyUp)))},this.enableListener=function(a){a&&("function"==typeof window.addEventListener?(a.addEventListener("focus",h._listenerEvFocus,!1),a.addEventListener("blur",h._listenerEvBlur,!1)):(a.attachEvent("onfocus",h._listenerEvFocus),a.attachEvent("onblur",h._listenerEvBlur)),a=null)},this.disableListener=function(a){a&&(a._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),"function"==typeof window.addEventListener?(a.removeEventListener("focus",h._listenerEvFocus,!1),a.removeEventListener("blur",h._listenerEvBlur,!1)):(a.detachEvent("onfocus",h._listenerEvFocus),a.detachEvent("onblur",h._listenerEvBlur)),a=null)},this._startListener=function(a){this._tmListener&&window.clearTimeout(this._tmListener),"undefined"==typeof a._v1&&(a._v1=a.value),a._v1!=a.value&&(this._updateFromInput(a),a._v1=a.value),a._f0&&(this._tmListener=window.setTimeout(function(){h._startListener(a)},100))},this._listenerEvFocus=function(a){a=a||event;var b=a.target||a.srcElement;b._f0=!0,h._startListener(b),b=null},this._listenerEvBlur=function(a){a=a||event;var b=a.target||a.srcElement;b._f0=!1,b=null};for(var j in this.i)this._attachEventsToObject(j);return window.dhx4._eventable(this),this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)},this._evOnClick=function(a){return this.callEvent("onClick",a)},this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)},this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",a)},this.unload=function(){this._activeDate=null,this._activeDateCell=null,this._activeInp=null,this._activeMonth=null,this._dateFormat=null,this._dateFormatRE=null,this._lastHover=null,this._tmListener&&window.clearTimeout(this._tmListener),this._tmListener=null,"function"==typeof window.addEventListener?(document.body.removeEventListener(this.conf.touch?"touchstart":"click",h._doOnClick,!1),window.removeEventListener("keydown",h._doOnKeyDown,!1),window.removeEventListener("unload",h._doOnUnload,!1)):(document.body.detachEvent("onclick",h._doOnClick),document.body.detachEvent("onkeydown",h._doOnKeyDown),window.detachEvent("onunload",h._doOnKeyDown)),this._doOnClick=null,this._doOnKeyDown=null,this._doOnUnload=null;for(var a in this.i)this.i[a]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(a),this.disableListener(this.i[a].input),this.i[a]=null,delete this.i[a];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){for(;this.contDates.lastChild.childNodes.length>0;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(var a in this._sel._ta)this._sel._ta[a]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel),this._sel=null}this.base.onclick=null,this.base.onmousedown=null,this.base.ontouchstart=null,this.base.onmouseout=null,this.base.parentNode.removeChild(this.base),this.base=null,this._clearDayHover=null,this._clearSelHover=null,this._doOnSelectorChange=null,this._doOnSelectorShow=null,this._drawMonth=null,this._fixLength=null,this._getLeft=null,this._getTop=null,this._ifrSize=null,this._hide=null,this._hideSelector=null,this._initSelector=null,this._isSelectorVisible=null,this._isVisible=null,this._posGetOffset=null,this._posGetOffsetRect=null,this._posGetOffsetSum=null,this._scrollYears=null,this._show=null,this._showSelector=null,this._strToDate=null,this._updateActiveHours=null,this._updateActiveMinutes=null,this._updateActiveMonth=null,this._updateActiveYear=null,this._updateCellStyle=null,this._updateDateStr=null,this._updateVisibleHours=null,this._updateVisibleMinutes=null,this._updateYearsList=null,this.enableIframe=null,this.hide=null,this.hideTime=null,this.setDate=null,this.setDateFormat=null,this.setYearsRange=null,this.show=null,this.showTime=null,this.unload=null,null!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null);for(var a in this)delete this[a];a=h=null},this.setDate(this._activeDate),this}function dhtmlXCombo(a,b,c,d){var e=this,f=null,g=null;"object"!=typeof a||a.tagName||(f=a,a=f.parent,c=f.width,b=f.name,d=f.mode,g=f.skin),this.cont="string"==typeof a?document.getElementById(a):a,this.conf={skin:null,form_name:b||"dhxcombo",combo_width:(parseInt(c)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof d&&"undefined"!=typeof this.modes[d]?d:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,enabled:!0,img_path:"",img_def:"",img_def_dis:!0,template:{input:"#text#",option:"#text#"},f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,sp:{dhx_skyblue:{list_ofs:1},dhx_web:{list_ofs:0},dhx_terrace:{list_ofs:1}}},this.conf.combo_image=1==this.modes[this.conf.opts_type].image,this.t={},this.base=document.createElement("DIV"),this.base.style.width=this.conf.combo_width+"px",this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px;"+(this.conf.combo_image?"margin-left:23px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":""),this.cont.appendChild(this.base),this.list=document.createElement("DIV"),this.list.style.display="none",document.body.insertBefore(this.list,document.body.firstChild),this.setSkin(g||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"dhx_skyblue"),this._updateTopImage=function(a){this.conf.combo_image&&(this.base.lastChild.innerHTML=null!=a?this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))
},this._filterOpts=function(a){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var b=String(this.base.firstChild.value).replace(new RegExp(this.conf.f_ac_text+"$","i"),"");if(this.conf.f_server_last==b.toLowerCase())return void this._checkForMatch();if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))return this.conf.f_server_last=b.toLowerCase(),void this.callEvent("onDynXLS",[b]);if(null!=this.conf.f_url){if(0==b.length)return this.conf.f_server_last=b.toLowerCase(),void this.clearAll();if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[b]){this.clearAll(),this.conf.f_server_last=b.toLowerCase();for(var c=0;c<this.conf.f_cache_data[b].data.length;c++)this.load(this.conf.f_cache_data[b].data[c]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[b].dyn_end,this.conf.f_mask=this.conf.f_cache_data[b].mask),a!==!0&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){e.conf.f_server_last=b.toLowerCase(),e.conf.f_mask=b;var c="mask="+encodeURIComponent(b);e.conf.f_dyn&&(c+="&pos=0",e.conf.f_dyn_end=!1);var d=function(c){if(e.conf.f_cache&&(e.conf.f_cache_data[b]||(e.conf.f_cache_data[b]={data:[],dyn_end:!1,mask:b}),e.conf.f_cache_data[b].data.push(c.xmlDoc.responseXML)),e.clearAll(),e.load(c.xmlDoc.responseXML),e.conf.f_ac&&"start"==e.conf.f_mode&&0==e.conf.clear_bsp&&null!=e.list.firstChild){var f=e.list.firstChild._optId,g=String(e.t[f].obj.getText(e.list.firstChild,!0));0===String(g).toLowerCase().indexOf(String(b).toLowerCase())&&(e.base.firstChild.value=g,e._selectRange(b.length,g.length))}a!==!0&&(e._showList(!0),e._checkForMatch()),d=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(e.conf.f_url,c,d):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(e.conf.f_url+(String(e.conf.f_url).indexOf("?")>=0?"&":"?")+c,d)},200)}else{this.conf.f_server_last=b.toLowerCase();var d=0==b.length?!0:new RegExp(("start"==this.conf.f_mode?"^":"")+b,"i"),f=null;for(var g in this.t){var h=this.t[g].obj.getText(this.t[g].item,!0);d===!0||1==d.test(h)?(this.t[g].item.style.display="",null==f&&b.length>0&&(f=String(this.t[g].obj.getText(this.t[g].item,!0)))):this.t[g].item.style.display="none"}if(this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=f&&(this.conf.f_ac_text=f.replace(new RegExp("^"+b,"i"),""),this.base.firstChild.value=f,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)),"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0),"grid"==this.conf.opts_type){var i=this.grid;if(!i.getAllRowIds())return;for(var j=i.getAllRowIds().split(","),k=this.conf.valueField,l=this.conf.displayField,m=0,n=0;n<j.length;n++){var o=j[n];if(i.rowsAr[o]){var p=i.cells(o,i.getColIndexById(k)).cell.innerHTML,q=i.cells(o,i.getColIndexById(l)).cell.innerHTML;1==d||1==d.test(p)||1==d.test(q)?(1e3>m&&(i.rowsAr[o].style.display=""),m++):i.rowsAr[o].style.display="none"}}}a!==!0&&(this._showList(!0),this._checkForMatch())}},this._initObj=function(a){"tree"==this.conf.opts_type&&this.tree?("object"==typeof a?"undefined"==typeof this.tree.loadJSONObject?alert("ȱ��dhtmlxtree_json.js�����ļ�!"):this.tree.loadJSONObject(a):this.tree.loadXMLString(a),this.tree.checkBoxOff&&(this.tree.dhxevs.data.onclick=null,delete this.dhxevs.data.onclick)):("undefined"!=typeof a.template&&this.setTemplate(a.template),this.addOption(a.options))},this._xmlToObj=function(a,b){var c={options:[]},d=1==b?a:a.getElementsByTagName("complete");if(d.length>0){for(var e=d[0].childNodes,f=0;f<e.length;f++)if("undefined"!=typeof e[f].tagName){if("template"==String(e[f].tagName).toLowerCase())for(var g=0;g<e[f].childNodes.length;g++)if(null!=e[f].childNodes[g].tagName){var h=e[f].childNodes[g].tagName;"undefined"!=typeof this.conf.template[h]&&(this.conf.template[h]=null!=e[f].childNodes[g].firstChild?e[f].childNodes[g].firstChild.nodeValue:"")}if("option"==String(e[f].tagName).toLowerCase()){var i=!1;i=1==b?window.dhx4.s2b(e[f].selected)||null!=e[f].getAttribute("selected"):window.dhx4.s2b(e[f].getAttribute("selected"));var j={value:e[f].getAttribute("value"),text:null!=e[f].firstChild?e[f].firstChild.nodeValue:"",selected:i,checked:window.dhx4.s2b(e[f].getAttribute("checked"))};for(var k in{img:1,img_dis:1,img_src:1,img_src_dis:1})null!=e[f].getAttribute(k)&&(j[k]=e[f].getAttribute(k));for(var g=0;g<e[f].childNodes.length;g++)if(null!=e[f].childNodes[g].tagName&&"text"==String(e[f].childNodes[g].tagName).toLowerCase()){j.text={};for(var l=e[f].childNodes[g],m=0;m<l.childNodes.length;m++)null!=l.childNodes[m].tagName&&(j.text[l.childNodes[m].tagName]=null!=l.childNodes[m].firstChild?l.childNodes[m].firstChild.nodeValue:"")}c.options.push(j)}}d=e=null}return c},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0}),window.dhx4._eventable(this),this._getNearItem=function(a,b){for(var c=null;null!=a;)a=a[0>b?"previousSibling":"nextSibling"],null==c&&null!=a&&""==a.style.display&&null!=a._optId&&(c=a,a=null);return c},this.setName(this.conf.form_name),this._doOnListMouseMove=function(a){a=a||event;for(var b=a.target||a.srcElement;null!=b&&b!=this;)"undefined"!=typeof b._optId&&(e.conf.tm_hover&&window.clearTimeout(e.conf.tm_hover),e._setSelected(b._optId)),b=b.parentNode;b=null},this._doOnListMouseDown=function(a){a=a||event,a.cancelBubble=!0,e.conf.clear_click=!0,window.setTimeout(function(){e.base.firstChild.focus()},1)},this._doOnListMouseUp=function(a){a=a||event;for(var b=a.target||a.srcElement;null!=b&&b!=this;){if("undefined"!=typeof b._optId){var c=!0;"function"==typeof e.t[b._optId].obj.optionClick&&e.t[b._optId].obj.optionClick(b,a,e)!==!0&&(c=!1),c&&"checkbox"!=e.conf.opts_type&&(e._setSelected(b._optId,null,!0),e._confirmSelect("click"))}b=b.parentNode}b=null},this._doOnListMouseOut=function(){e.conf.tm_hover&&window.clearTimeout(e.conf.tm_hover),e.conf.tm_hover=window.setTimeout(function(){var a=e.conf.last_match||e.conf.last_selected;null==e.conf.last_match&&null!=e.t[a]&&e.base.firstChild.value!=e.t[a].obj.getText(e.t[a].item,!0)&&(a=null),e._setSelected(a,null,!0)},1)},this._doOnBaseMouseDown=function(a){if(e.conf.enabled){e.conf.clear_click=!0,a=a||event;var b=a.target||a.srcElement;if(b!=this.firstChild){window.setTimeout(function(){e.base.firstChild.focus()},1);for(var c=b;c!=this&&null!=c;)if(c==this.lastChild){if("function"==typeof e.modes[e.conf.opts_type].topImageClick){var d=e.conf.last_hover||e.conf.last_selected,f=null!=d?e.t[d].item:null;if(e.modes[e.conf.opts_type].topImageClick(f,e)!==!0)return void(d=f=null)}c=null}else c=c.parentNode}e._isListVisible()?e._hideList():(b!=this.firstChild&&(e.conf.clear_blur=!0),e._showList(),e._setSelected(e.conf.last_selected,!0,!0)),b=null}},this._doOnBodyMouseDown=function(){return e.conf.clear_click?void(e.conf.clear_click=!1):void e._confirmSelect("blur")},this._doOnInputFocus=function(){e.conf.clear_blur=!1,e.conf.tm_confirm_blur&&window.clearTimeout(e.conf.tm_confirm_blur),0==e.conf.combo_focus&&(e.conf.combo_focus=!0,e.callEvent("onFocus",[]))},this._doOnInputBlur=function(){return 1==e.conf.clear_blur?void(e.conf.clear_blur=!1):(e.conf.tm_confirm_blur&&window.clearTimeout(e.conf.tm_confirm_blur),void(e.conf.tm_confirm_blur=window.setTimeout(function(){0==e.conf.clear_click&&(e._confirmSelect("blur"),e.conf.combo_focus=!1,e.callEvent("onBlur",[]))},20)))},this._doOnInputKeyUp=function(a){return a=a||event,0!=e.conf.f_mode?(e.conf.clear_bsp=8==a.keyCode||46==a.keyCode,void e._filterOpts()):void e._checkForMatch()},this._doOnInputKeyDown=function(a){a=a||event,38!=a.keyCode&&40!=a.keyCode||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,e._keyOnUpDown(38==a.keyCode?-1:1)),113==a.keyCode&&(e._isListVisible()||(e._showList(),e.base.firstChild.value==e.conf.last_text?(e._setSelected(e.conf.last_selected,!0,!0),e.base.firstChild.value=e.conf.last_text,e.conf.f_server_last=e.base.firstChild.value.toLowerCase()):(e.conf.f_server_last=e.base.firstChild.value.toLowerCase(),0==e.conf.f_mode&&e._checkForMatch()))),27==a.keyCode&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,e._cancelSelect()),13==a.keyCode&&(a.preventDefault&&a.preventDefault(),e._confirmSelect("kbd")),e.conf.clear_key=!0,e.callEvent("onKeyPressed",[a.keyCode||a.charCode])},this._doOnInputKeyPress=function(a){return e.conf.clear_key?void(e.conf.clear_key=!1):(a=a||event,void e.callEvent("onKeyPressed",[a.keyCode||a.charCode]))},this._keyOnUpDown=function(a){var b=null;if(this.conf.last_hover?b=this.t[this.conf.last_hover].item:this.conf.last_selected&&(b=this.t[this.conf.last_selected].item),(b||0!=this._getListVisibleCount())&&(null!=b&&""!=b.style.display&&(b=null),this._showList(),null!=b?this.t[b._optId].obj.isSelected(b)&&(b=this._getNearItem(b,a)):(b=this.list.firstChild,""!=b.style.display&&(b=this._getNearItem(b,1))),null!=b)){if(this._setSelected(b._optId,!0,!0),"tree"==this.conf.opts_type)return this.tree._enblkbrd&&(this.conf.clear_blur=!0,this.DOMlist.lastChild.select(),this.tree.DOMelem_input=this.DOMelem_input),void(b=null);if(0==this.conf.f_mode)this.base.firstChild.value=this.t[b._optId].obj.getText(b,!0);else{var c=String(this.t[b._optId].obj.getText(b,!0));"start"==this.conf.f_mode&&1==this.conf.f_ac?0===c.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=c.substring(this.conf.f_server_last.length,c.length),this.base.firstChild.value=c,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=c,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=c,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())}b=null}},this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var h=0;h<this.conf.evs_nodes.length;h++)for(var i in this.conf.evs_nodes[h].evs)window.addEventListener?this.conf.evs_nodes[h].node.addEventListener(i,this[this.conf.evs_nodes[h].evs[i]],!1):this.conf.evs_nodes[h].node.attachEvent("on"+i,this[this.conf.evs_nodes[h].evs[i]]);return this.unload=function(){this.clearAll(),this.t=null;for(var a=0;a<this.conf.evs_nodes.length;a++){for(var b in this.conf.evs_nodes[a].evs)window.addEventListener?this.conf.evs_nodes[a].node.removeEventListener(b,this[this.conf.evs_nodes[a].evs[b]],!1):this.conf.evs_nodes[a].node.detachEvent("on"+b,this[this.conf.evs_nodes[a].evs[b]]),this.conf.evs_nodes[a].evs[b]=null,delete this.conf.evs_nodes[a].evs[b];this.conf.evs_nodes[a].node=null,this.conf.evs_nodes[a].evs=null,delete this.conf.evs_nodes[a].node,delete this.conf.evs_nodes[a].evs,this.conf.evs_nodes[a]=null}window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.DOMelem_input=this.DOMelem_button=this.DOMlist=null;for(var b in this.conf)this.conf[b]=null,delete this.conf[b];this.conf=null,this.base.parentNode.removeChild(this.base),this.list.parentNode.removeChild(this.list),this.base=this.list=this.cont=null,this.modes=null;for(var b in this)"function"==typeof this[b]&&(this[b]=null);e=null},this.DOMelem_input=this.base.firstChild,this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)],this.DOMlist=this.list,this.DOMelem=this.base,this.DOMParent=a,a=null,null!=f&&(null!=f.filter&&("string"==typeof f.filter?this.enableFilteringMode(!0,f.filter,window.dhx4.s2b(f.filter_cache),window.dhx4.s2b(f.filter_sub_load)):this.enableFilteringMode(!0)),null!=f.image_path&&this.setImagePath(f.image_path),(null!=f.default_image||null!=f.default_image_dis)&&this.setDefaultImage(f.default_image,f.default_image_dis),(f.items||f.options)&&this.addOption(f.items||f.options),(f.xml||f.json)&&this.load(f.xml||f.json),"undefined"!=typeof f.readonly&&this.readonly(f.readonly),f=null),this}function dhtmlXComboFromSelect(a){"string"==typeof a&&(a=document.getElementById(a));var b=a.offsetWidth,c=a.getAttribute("name")||null,d=document.createElement("SPAN");a.parentNode.insertBefore(d,a);var e=a.getAttribute("mode")||a.getAttribute("opt_type")||"option",f=new dhtmlXCombo(d,c,b,e);d=null;var g=a.getAttribute("imagePath");g&&f.setImagePath(g);var h=a.getAttribute("defaultImage"),i=a.getAttribute("defaultImageDis");1==window.dhx4.s2b(i)&&(i=!0),(null!=h||null!=i)&&f.setDefaultImage(h,i);var j=f._xmlToObj([a],!0);return j.options.length>0&&f.addOption(j.options),j=null,a.parentNode.removeChild(a),a=null,f}function dhtmlXComboExtend(a,b){for(var c in dhtmlXCombo.prototype.modes[b])"undefined"==typeof dhtmlXCombo.prototype.modes[a][c]&&(dhtmlXCombo.prototype.modes[a][c]=dhtmlXCombo.prototype.modes[b][c])}function dhtmlXColorPicker(a){if(!(this instanceof dhtmlXColorPicker))return new dhtmlXColorPicker(a);dhx4._eventable(this);var b,c,d,e=this,f=void 0,g=null;switch(this._nodes=[],this.activeNode=null,this._inputListenerId=null,this.base=null,this._globalNode=null,this.memory=null,this.skin=null,this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0},this.value={red:null,blue:null,green:null,hue:null,sat:null,lum:null},this._initMoveSelection=function(a){return a=a||event,"function"==typeof window.addEventListener?(e._controllerNodes.colorArea.addEventListener("mousemove",e._setMoveSelection,!1),document.body.addEventListener("mouseup",e._cleanMoveSelection,!1)):(e._controllerNodes.colorArea.attachEvent("onmousemove",e._setMoveSelection),document.body.attachEvent("onmouseup",e._cleanMoveSelection)),e._setMoveSelection(a,e._controllerNodes.colorArea),!1},this._cleanMoveSelection=function(){return"function"==typeof window.removeEventListener?(e._controllerNodes.colorArea.removeEventListener("mousemove",e._setMoveSelection,!1),document.body.removeEventListener("mouseup",e._cleanMoveSelection,!1)):(e._controllerNodes.colorArea.detachEvent("onmousemove",e._setMoveSelection),document.body.detachEvent("onmouseup",e._cleanMoveSelection)),!1},this._setMoveSelection=function(a){a=a||event;var b=e._getOffsetPosition(a,e._controllerNodes.colorArea);return e._controllerNodes.fr_cover?setTimeout(function(){e._setColorAreaXY(b.x,b.y),e._setColorByXYC()},0):(e._setColorAreaXY(b.x,b.y),e._setColorByXYC()),!1},this._initMoveContrast=function(a){a=a||event,"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",e._setMoveContrast,!1),document.body.addEventListener("mouseup",e._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",e._setMoveContrast),document.body.attachEvent("onmouseup",e._cleanMoveContrast)),e._setMoveContrast(a,e._controllerNodes.contrastArea)},this._cleanMoveContrast=function(){"function"==typeof window.removeEventListener?(document.body.removeEventListener("mousemove",e._setMoveContrast,!1),document.body.removeEventListener("mouseup",e._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",e._setMoveContrast),document.body.detachEvent("onmouseup",e._cleanMoveContrast))},this._setMoveContrast=function(a){a=a||event;var b=e._getOffsetPosition(a,e._controllerNodes.contrastArea);e._setContrastY(b.y),e._setColorByXYC(!0)},this._doOnSelectColor=function(){var a=e.colorAIP.rgb2hex({r:e.value.red,g:e.value.green,b:e.value.blue});null!=e.activeNode&&(e.activeNode.valueCont&&(e.activeNode.valueCont.value=a),e.activeNode.valueColor&&(e.activeNode.valueColor.style.backgroundColor=a)),(e.base._dhx_remove||e.conf.hideOnSelect)&&e.hide(),e.callEvent("onSelect",[a,e.activeNode?e.activeNode.node:null])},this._doOnCancel=function(){1==e.callEvent("onCancel",[e.activeNode?e.activeNode.node:null])&&1==e.conf.closeable&&e.hide()},this._doOnFocusByInput=function(){var a=this!=window?this:event.srcElement,b=e.activeNode&&e.activeNode.valueCont&&e.activeNode.valueCont==a?e.activeNode:e._getNodeByValueCont(a);e.activeNode=b,b&&b==e.activeNode&&e._initListenerInput()},this._doOnBlurByInput=function(){var a=this!=window?this:event.srcElement,b=e.activeNode&&e.activeNode.valueCont&&e.activeNode.valueCont==a?e.activeNode:e._getNodeByValueCont(a);b&&b==e.activeNode&&e._removeListenerInput()},this._doOnClickByNode=function(a){a=a||event;var b=this!=window?this:event.srcElement;e.activeNode=e.activeNode.node!=b?e._getNodeByElement(b):e.activeNode,e.isVisible()||e.show()},this.saveColor=function(){e.memory.setValue(e.value)},this._onSelectMemoryEl=function(a){var b;e._refreshCoordinatesByHSL(a.value.hue,a.value.sat,a.value.lum);for(b in a.value)e.value[b]=a.value[b];e._refreshContrast(),e._refreshInputValues(),e._refreshColorValue()},this._doOnClickByBody=function(a){a=a||event;var b=!0,c=a.target||a.srcElement;e._isBaseNode(c)&&(b=!1),b&&e.activeNode&&(e.activeNode.node==c||e.activeNode.valueCont==c)&&(b=!1),b&&e.hide()},this._doOnChangeHSL=function(){var a,b=parseInt(e._controllerNodes.hue.value),c=parseInt(e._controllerNodes.sat.value),d=parseInt(e._controllerNodes.lum.value);isNaN(b)||b>359||0>b?e._controllerNodes.hue.value=e.value.hue:e.value.hue=b,isNaN(c)||c>100||0>c?e._controllerNodes.sat.value=e.value.sat:e.value.sat=c,isNaN(d)||d>100||0>d?e._controllerNodes.lum.value=e.value.lum:e.value.lum=d,a=e.colorAIP.hsl2rgb(e.value.hue,e.value.sat/100,e.value.lum/100),e.value.red=Math.round(255*a.r),e.value.green=Math.round(255*a.g),e.value.blue=Math.round(255*a.b),e._refreshCoordinatesByHSL(e.value.hue,e.value.sat,e.value.lum),e._refreshContrast(),e._refreshInputValues(),e._refreshColorValue()},this._doOnChangeRGB=function(){var a,b=parseInt(e._controllerNodes.red.value),c=parseInt(e._controllerNodes.green.value),d=parseInt(e._controllerNodes.blue.value);isNaN(b)||b>255||0>b?e._controllerNodes.red.value=e.value.red:e.value.red=b,isNaN(c)||c>255||0>c?e._controllerNodes.green.value=e.value.green:e.value.green=c,isNaN(d)||d>255||0>d?e._controllerNodes.blue.value=e.value.blue:e.value.blue=d,a=e.colorAIP.rgb2hsl(e.value.red/255,e.value.green/255,e.value.blue/255),e.value.hue=Math.round(a.h),e.value.sat=Math.round(100*a.s),e.value.lum=Math.round(100*a.l),e._refreshCoordinatesByHSL(e.value.hue,e.value.sat,e.value.lum),e._refreshContrast(),e._refreshInputValues(),e._refreshColorValue()},this._doOnChangeHSV=function(){e._controllerNodes.hsv.value=e.setColor(e._controllerNodes.hsv.value)},this._checkType=function(a){var b;if(!(a instanceof Array))return void 0==a?null:"string"==typeof a?"string":a.tagName&&"input"==a.tagName.toLowerCase()?"input":a.tagName&&"textarea"==a.tagName.toLowerCase()?"textarea":a.tagName?"container":"object"==typeof a?"object":void 0;switch(b=e._checkType(a[0])){case"string":return"array_string";case"input":case"textarea":return"array_input";case"object":return"array_object";default:return void 0}},this._initByObject=function(a){a.parent&&a.parent.tagName?e.base=a.parent:"string"==typeof a.parent?e.base=document.getElementById(a.parent):(e.base=document.createElement("div"),e.base._dhx_remove=!0),a.color&&(e.conf.selectedColor=a.color),"undefined"!=typeof a.closeable&&(this.conf.closeable=dhx4.s2b(a.closeable)),a.custom_colors&&(this._tempInitCC=function(){var b,c;if(this.initMemoryColors(),this.conf.customColors=!0,a.custom_colors instanceof Array)for(c=a.custom_colors.length,b=0;c>b;b++)this.setCustomColors(a.custom_colors[b]);this.base.parentNode&&this.showMemory(),delete this._tempInitCC}),a.hide&&(e.conf.hide=!0),a.input&&e._addNode(a.input,a.target_color,a.target_value);var b=a.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"dhx_skyblue";e.setSkin(b),a.colors&&(e.initMemoryColors(),e.conf.customColors=!0),a.link&&e._addNode(a.link)},this.unload=function(){var a,b,c;for(this.isVisible()&&this.hide(),this.destructMemory(),b=this._nodes.length,a=0;b>a;a++){this._detachEventsFromNode(this._nodes[a]);for(c in this._nodes[a])this._nodes[a][c]=null;delete this._nodes[a]}this._nodes=null,this.base._dhx_remove?delete this.base._dhx_remove:this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,""),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV)),this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),delete this._controllerNodes.fr_cover),dhx4.zim.clear(this.conf.cp_id),dhx4._eventable(this,"clear");for(c in this)this[c]=null;e=null,g=null,d=null},f=this._checkType(a)){case"object":e._initByObject(a);break;case"input":case"textarea":e._initByObject({}),this._addNode(a);break;case"string":return g=document.getElementById(a),new dhtmlXColorPicker(g);case"container":e._initByObject({parent:a});break;case null:e._initByObject({});break;case"array_string":case"array_input":for(e._initByObject({}),c=a.length,b=0;c>b;b++)this._addNode(a[b]);break;case"array_object":for(e._initByObject({}),c=a.length,b=0;c>b;b++)d=this._addNode(a[b].input,a[b].target_color,a[b].target_value).conf,d.customColors=void 0!=a[b].custom_colors?dhx4.s2b(a[b].custom_colors):d.customColors,d.selectedColor=void 0!=a[b].color?a[b].color:d.selectedColor}if(this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"</button></div></div>",this._globalNode=this.base.firstChild,this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},"function"==typeof this._tempInitCC&&this._tempInitCC(),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)),this.conf.selectedColor?this.setColor(this.conf.selectedColor):(this._setColorAreaXY(10,10),this._setContrastY(10),e._setColorByXYC()),this._nodes.length)for(var b=0;b<this._nodes.length;b++)this._attachEventsToNode(this._nodes[b]);this.conf.hide&&this.hide(),"function"==typeof this._cpInitFRM&&this._cpInitFRM()}function dhtmlXSlider(a){var b=this;this.conf={size:null,skin:null,vertical:!1,min:0,max:99,value:0,step:1,margin:2,border:1,disabled:!1,tooltip:!1,visible:!0,linkTo:void 0},this._attachedNode={},this.base=null;var c=null;if(arguments.length>1)return new dhtmlXSlider(this._renderArgumets(arguments));if("string"==typeof a||"object"==typeof a&&a.tagName)return new dhtmlXSlider({parent:a});this.base="string"==typeof a.parent?document.getElementById(a.parent):a.parent,this._mergeConfig(this._readAttFormNode(this.base)),this._mergeConfig(a),(null==this.conf.size||void 0==this.conf.size)&&(this.conf.size=this.conf.vertical?this.base.offsetHeight:this.base.offsetWidth);var d=this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxslider")||"dhx_skyblue";return this.setSkin(d),this.base.innerHTML="<div class='dhxsl_container'><div class='dhxsl_track'></div><div class='dhxsl_runner'></div></div>",this._nodes={cont:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1]},this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=function(a){return a=a||event,"function"==typeof a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.conf.value=this._normalize(this.conf.value),this._setOrient(this.conf.vertical),this.setSize(this.conf.size),this._initMover=function(a){return a=a||event,c={},c.value=b.conf.value,c.coord=b.conf.vertical?a.clientY:a.clientX,0==b.conf.disabled&&("function"==typeof window.addEventListener?(window.addEventListener("mousemove",b._move,!1),window.addEventListener("mouseup",b._cleanMove,!1)):(document.body.attachEvent("onmousemove",b._move),document.body.attachEvent("onmouseup",b._cleanMove))),b.callEvent("_onRunnerMouseDown",[]),!1},this._move=function(a){a=a||event;var d=b.conf.vertical?b._nodes.runner.offsetHeight:b._nodes.runner.offsetWidth,e=b.conf.max-b.conf.min,f=b.conf.vertical?a.clientY:a.clientX,g=c.value+(f-c.coord)*e/(b.conf.size-d);b.setValue(Math.round(g),!0)},this._cleanMove=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",b._move,!1),window.removeEventListener("mouseup",b._cleanMove,!1)):(document.body.detachEvent("onmousemove",b._move),document.body.detachEvent("onmouseup",b._cleanMove)),c=null,b.callEvent("onSlideEnd",[b.conf.value]),b.callEvent("_onRunnerMouseUp",[])},this._doOnSetValue=function(a){if(c)return!1;
a=a||event;var d=b.conf.vertical?a.offsetY||a.layerY:a.offsetX||a.layerX,e=(b.conf.vertical?b._nodes.runner.offoffsetHeightsetHe:b._nodes.runner.offsetWidth,b.conf.max-b.conf.min),f=d*e/b.conf.size+b.conf.min;return b.setValue(Math.round(f),!0),c||b._initMover(a),!1},this._doOnChangeInput=function(a){a=a||event;var c=a.target||a.srcElement;b.setValue(c.value)},this._doOnKeyDown=function(a){a=a||event;var c=a.target||a.srcElement;13==a.keyCode&&b.setValue(c.value)},this._attachEvents(this._nodes),this.unload=function(){dhx4._eventable(this,"clear"),this._detachNode(),this._detachEvents(this._nodes),this.base.removeChild(this._nodes.cont),this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=null,delete this._nodes.cont,delete this._nodes.track,delete this._nodes.max,delete this._nodes.min,delete this._nodes.runner,/\s?dhtmlxslider_\S*/.test(this.base.className)&&(this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,""));for(var a in this)this[a]=null;b=null},dhx4._eventable(this),this.conf.disabled&&this.disable(),this.conf.tooltip&&this.enableTooltip(),this.conf.visible||this.hide(),this.conf.linkTo&&this.linkTo(this.conf.linkTo),this}function dhtmlXPopup(a){var b=this;if(this.conf=a||{},a=null,this.mode=this.conf.mode||"bottom",this.conf.zi=window.dhx4.newId(),this.conf.isIE=navigator.userAgent.indexOf("MSIE")>=0,this.p=document.createElement("DIV"),this.p.style.display="none",this.p.innerHTML="<div class='dhx_popup_area"+(this.conf.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>",document.body.appendChild(this.p),this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}},this.p.onclick=function(a){if(a=a||event,b._clearClick=!0,null!=b._nodeObj)return b.callEvent("onContentClick",[]),!0;for(var c=a.target||a.srcElement,d=null;c!=b.p&&null!=c;)"undefined"==typeof c._idd||c._isSeparator?c=c.parentNode:(d=c._idd,c=null);c=null,null!=d&&(b.callEvent("onClick",[d]),null!=b&&null!=b.isVisible&&b.isVisible()&&b.callEvent("onBeforeHide",["select",a,d])===!0&&(a.cancelBubble=!0,b.hide()))},this.separator="DHXSEP_"+window.dhx4.newId(),this.tpl=[],this._setTemplate=function(a){this.tpl=a.split(",")},this.show=function(a){var b=null;if(1==arguments.length){if(a){if(!this._idExists(a))return}else a=this.conf.id[0];this.conf.toolbar&&(b=this.conf.toolbar._getItemDim(a)),this.conf.ribbon&&(b=this.conf.ribbon._getItemDim(a)),this.conf.form&&(b=this.conf.form._getItemDim(a))}else 4==arguments.length&&(this._clearClick=!0,b={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]},a=null);b&&(this.p.style.visibility="hidden",this.p.style.display="",this._setPos(b),this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this.p.style.visibility="visible",this._lastId=a,this.callEvent("onShow",[a]))},this._setPos=function(a,b){var c=a.left,d=a.top,e=a.width,f=a.height;this._posData={left:c,top:d,width:e,height:f};var g=window.dhx4.screenDim(),h=b||this.mode;"undefined"==typeof b&&(b=!1);var i={top:d-this.p.offsetHeight-g.top,bottom:g.bottom-(d+f+this.p.offsetHeight),left:c-this.p.offsetWidth-g.left,right:g.right-(c+e+this.p.offsetWidth)};if(!b&&i[h]<0){var j=this._getAvailPos(h,i);if(j!==!1)return void this._setPos(a,j)}if("top"==h||"bottom"==h){var k=this.skinParams[this.conf.skin].t2,l=this.skinParams[this.conf.skin].t3,m=Math.round(this.p.offsetWidth/2),n=Math.round(this.p.lastChild.offsetWidth/2);if(c<g.left){var o=Math.min(c+e,g.left);e=c+e-o,c=o}c+e>g.right&&(e=g.right-c);var p=Math.round(c+e/2),q=p-m,r=p-k-n,s=p+n+k-this.p.offsetWidth;q<g.left-l?q=Math.min(g.left-l,r):q+this.p.offsetWidth>g.right+l&&(q=Math.max(s,g.right+l-this.p.offsetWidth)),this.p.style.left=q+"px",this.p.style.top=("top"==h?d-this.p.offsetHeight:d+f)+"px",p=p-q-n,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+h,this.p.lastChild.style.top=("top"==h?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px",this.p.lastChild.style.left=p+"px"}if("left"==h||"right"==h){var k=this.skinParams[this.conf.skin].t0,l=this.skinParams[this.conf.skin].t1,t=Math.round(this.p.offsetHeight/2),u=Math.round(this.p.lastChild.offsetHeight/2);if(d<g.top){var v=Math.min(d+f,g.top);f=d+f-v,d=v}d+f>g.bottom&&(f=g.bottom-d);var p=Math.round(d+f/2),w=p-t,x=p-k-u,y=p+u+k-this.p.offsetHeight;w<g.top-l?w=Math.min(g.top-l,x):w+this.p.offsetHeight>g.bottom+l&&(w=Math.max(y,g.bottom+l-this.p.offsetHeight)),this.p.style.left=("left"==h?c-this.p.offsetWidth:c+e)+"px",this.p.style.top=w+"px",p=p-w-u,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+h,this.p.lastChild.style.left=("left"==h?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px",this.p.lastChild.style.top=p+"px"}if(this._IEDisp&&null!=this._nodeId){var z=document.getElementById(this._nodeId);window.setTimeout(function(){z.style.visibility="visible",z=null},1)}},this._getAvailPos=function(a,b){for(var c={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]},d=null,e=0;e<c[a].length;e++)null==d&&b[c[a][e]]>0&&(d=c[a][e]);if(null==d){d="bottom";for(var f in b)b[f]>b[d]&&(d=f)}return d==a?!1:d},this._repaint=function(){this.isVisible()&&this._setPos(this._posData)},this.clear=function(){if(this._nodeObj&&(this.conf.isIE&&"undefined"!=typeof dhtmlXLayoutObject&&this._nodeObj instanceof dhtmlXLayoutObject&&(this.p.onmousedown=null),this._nodeObj.unload?this._nodeObj.unload():this._nodeObj.destruct&&this._nodeObj.destruct(),this._nodeObj=this._nodeId=null,null!=this._nodeObjEv)){for(var a=0;a<this._nodeObjEv.length;a++)this.detachEvent(this._nodeObjEv[a]);this._nodeObjEv=null}this._IEHoverInited&&this._IEHoverClear();for(var b=this.p.firstChild.firstChild.firstChild;b.childNodes.length>0;)b.removeChild(b.lastChild);b=null,this.itemData={}},this.hide=function(){if("none"!=this.p.style.display){this.p.style.display="none",window.dhx4.zim.clear(this.conf.zi);var a=this._lastId;this._lastId=null,this.callEvent("onHide",[a])}},this.isVisible=function(){return""==this.p.style.display},this.itemData={},this.getItemData=function(a){return a?this.itemData[a]?this.itemData[a]:{}:this.itemData},this.setSkin=function(a){this.conf.skin=a,this.p.className="dhx_popup_"+this.conf.skin,null!=this._nodeObj&&"function"==typeof this._nodeObj.setSkin&&this._nodeObj.setSkin(this.conf.skin),this._repaint()},this.attachList=function(a,b){this._setTemplate(a),this.clear();for(var c=this.p.firstChild.firstChild.firstChild,d=0;d<b.length;d++){var e=document.createElement("TR");if(b[d]!=this.separator){if("undefined"==typeof b[d].id||null==b[d].id)for(e._idd=window.dhx4.newId();null!=this.itemData[e._idd];)e._idd=window.dhx4.newId();else e._idd=b[d].id;this.itemData[e._idd]=b[d]}if(c.appendChild(e),b[d]==this.separator){e.className="dhx_popup_sep",e._isSeparator=!0;var f=document.createElement("TD");f.className="dhx_popup_sep",f.colSpan=this.tpl.length,f.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>",e.appendChild(f),f=null}else{for(var g=0;g<this.tpl.length;g++){var h="dhx_popup_td";!this._IEFirstLast||1!=this.tpl.length&&0!=g&&g!=this.tpl.length-1||(h+=1==this.tpl.length?" dhx_popup_td_single":0==g?" dhx_popup_td_first":" dhx_popup_td_last");var f=document.createElement("TD");f.className=h,f.innerHTML=b[d][this.tpl[g]]||"&nbsp;",e.appendChild(f),f=null}this._IEHover&&(e._IEHover=!0,this._IEHoverInited||this._IEHoverInit())}e=null}c=null,this._repaint()},this._attachNode=function(a,b){this.clear(),this._nodeId="dhxpopup_node_"+window.dhx4.newId();var c=this.p.firstChild.firstChild.firstChild,d=document.createElement("TR");d.className="dhxnode",c.appendChild(d);var e=document.createElement("TD");return e.className="dhx_popup_td",e.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>",b.width&&(e.firstChild.style.width=b.width+"px"),b.height&&(e.firstChild.style.height=b.height+"px"),d.appendChild(e),e=d=c=null,"function"==typeof this["_attach_init_"+a]&&(this["_attach_init_"+a](b),this._enableIEVFix()),this._repaint(),this._nodeObj},this.unload=function(){if("function"==typeof window.addEventListener?(window.removeEventListener("click",this._doOnClick,!1),window.removeEventListener("keyup",this._doOnKeyUp,!1),window.removeEventListener("unload",this._doOnUnload,!1)):(document.body.detachEvent("onclick",this._doOnClick,!1),document.body.detachEvent("onkeyup",this._doOnKeyUp,!1),document.body.detachEvent("onunload",this._doOnUnload,!1)),this.clear(),this._doOnClick=null,this._doOnUnload=null,this._doOnKeyUp=null,null!=this.conf.toolbarEvent&&null!=this.conf.toolbar&&(null!=this.conf.toolbar.detachEvent?this.conf.toolbar.detachEvent(this.conf.toolbarEvent):this.conf.toolbar._getItemDim=null),null!=this.conf.ribbonEvent&&null!=this.conf.ribbon&&(null!=this.conf.ribbon.detachEvent?this.conf.ribbon.detachEvent(this.conf.ribbonEvent):this.conf.ribbon._getItemDim=null),this.conf.slider){for(var a=0;a<this.conf.slider_events.length;a++)this.conf.slider.detachEvent(this.conf.slider_events[a]);this.conf.slider_events=null,this._sliderShow=this._sliderHide=null,this.conf.slider=null}window.dhx4._eventable(this,"clear"),this.attachList=this.attachAccordion=this.attachCalendar=this.attachForm=this.attachGrid=this.attachLayout=this.attachTabbar=this.attachTree=this.attachHTML=this.attachObject=this._attachNode=null,this.show=this.hide=this.isVisible=this._setTemplate=this._repaint=this._setPos=this.getItemData=this.clear=this._idExists=this._doOnToolbarClick=this._doOnRibbonClick=this.setSkin=null,this.tpl=this.itemData=this.separator=this.mode=null,this._clearClick=this._lastId=this._posData=this.skinParams=this.skinParent=null,this.p.onclick=null,this.p.parentNode.removeChild(this.p),this.p=null,this.conf.toolbar=this.conf.toolbarEvent=this.conf.ribbon=this.conf.ribbonEvent=this.conf.form=this.conf.id=null,this.conf=null,this._IEHover=this._IEHoverTM=this._IEHoverInit=this._IEHoverClear=this._IEHoverRender=this._IEHoverInited=null,this._IEDisp=null,this.unload=null,b=null},window.dhx4._eventable(this),this._doOnClick=function(a){if(a=a||event,b._clearClick)return void(b._clearClick=!1);if(null!=b.conf.form){var c,d=a.target||a.srcElement;if("option"==(d.tagName||"").toLowerCase()&&(d=d.parentNode),null!=d.className&&d.className.search("dhxform")>=0)null!=d.parentNode&&null!=d.parentNode.parentNode&&null!=d.parentNode.parentNode._idd&&(c=d.parentNode.parentNode._idd,"ra"==d.parentNode.parentNode._type&&(c=[d.parentNode.parentNode._group,d.parentNode.parentNode._value]));else{for(var e=!0,f=!1;e&&!f;){var g=(d.className||"").toLowerCase();g.length>0&&(f="dhxform_btn"==g||g.search(/dhxeditor_inside/gi)>=0||"dhxcombo_input"==g||g.search(/dhxcombolist/gi)>=0),d=d.parentNode,e=null!=d}if(f)return}if(d=null,null!=c&&b._idExists(c))return}b.isVisible()&&b.callEvent("onBeforeHide",["click",a])===!0&&b.hide()},this._doOnKeyUp=function(a){a=a||event,27==a.keyCode&&b.isVisible()&&b.callEvent("onBeforeHide",["esc",a])===!0&&b.hide()},this._doOnUnload=function(){b.unload()},"function"==typeof window.addEventListener?(window.addEventListener("click",this._doOnClick,!1),window.addEventListener("keyup",this._doOnKeyUp,!1),window.addEventListener("unload",this._doOnUnload,!1)):(document.body.attachEvent("onclick",this._doOnClick,!1),document.body.attachEvent("onkeyup",this._doOnKeyUp,!1),document.body.attachEvent("onunload",this._doOnUnload,!1)),this._idExists=function(a){for(var b=!1,c=0;c<this.conf.id.length;c++)b=this.conf.id[c]instanceof Array?b||this.conf.id[c][0]==a[0]&&this.conf.id[c][1]==a[1]:b||this.conf.id[c]==a;return b},this._IEDisp=this.conf.isIE&&(navigator.userAgent.search("MSIE 6.0")>=0||"CSS1Compat"!=document.compatMode),this._IEHover=this.conf.isIE&&navigator.userAgent.search("MSIE 6.0")>=0,this._IEHover&&(this._IEHoverInit=function(){this.p.onmouseover=function(){for(var a=event.srcElement;a!=this&&1!=a._IEHover;)a=a.parentNode;if(a._IEHover){if(b._IEHoverTM&&window.clearTimeout(b._IEHoverTM),b._lastIEHover==a)return;b._IEHoverRender(a),a=null}},this.p.onmouseout=function(){b._IEHoverTM&&window.clearTimeout(b._IEHoverTM),b._IEHoverTM=window.setTimeout(function(){b._IEHoverRender(null)},1)},this._IEHoverRender=function(a){null!=this._lastIEHover&&this._lastIEHover.className.search(/tr_hover/gi)>=0&&(this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,""),this._lastIEHover=null),null!=a&&a.className.search(/tr_hover/gi)<0&&(a.className+=" tr_hover",b._lastIEHover=a)},this._IEHoverInited=!0},this._IEHoverClear=function(){this.p.onmouseover=null,this.p.onmouseout=null,this._IEHoverInited=!1}),this._IEFirstLast=this.conf.isIE&&navigator.userAgent.search(/MSIE [6,7,8]\.0/i)>=0,this._enableIEVFix=function(){if(this.conf.isIE&&navigator.userAgent.search("MSIE 6.0")>=0){var a=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"}),b=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(a,b)}},"undefined"!=typeof window.dhtmlXToolbarObject&&null!=this.conf.toolbar&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.toolbar.conf.skin,this._doOnToolbarClick=function(a){for(var c=0;c<b.conf.id.length;c++)a==b.conf.id[c]&&a!=b._lastId&&(b.show(a),b._clearClick=!0)},"undefined"==typeof dhtmlXToolbarObject.prototype._getItemDim&&(dhtmlXToolbarObject.prototype._getItemDim=function(a){var b=this.objPull[this.idPrefix+a],c={left:window.dhx4.absLeft(b.obj),top:window.dhx4.absTop(b.obj),width:b.obj.offsetWidth+(b.arw?b.arw.offsetWidth:0),height:b.obj.offsetHeight};return b=null,c}),this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)),"undefined"!=typeof window.dhtmlXRibbon&&null!=this.conf.ribbon&&this.conf.ribbon instanceof window.dhtmlXRibbon&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.ribbon.conf.skin,this._doOnRibbonClick=function(a){for(var c=0;c<b.conf.id.length;c++)a==b.conf.id[c]&&a!=b._lastId&&(b.show(a),b._clearClick=!0)},"undefined"==typeof dhtmlXRibbon.prototype._getItemDim&&(dhtmlXRibbon.prototype._getItemDim=function(a){var b=this._items[a].base,c={left:window.dhx4.absLeft(b),top:window.dhx4.absTop(b),width:b.offsetWidth,height:b.offsetHeight};return b=null,c}),this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)),"undefined"!=typeof window.dhtmlXForm&&null!=this.conf.form&&this.conf.form instanceof window.dhtmlXForm&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.conf.mode||(this.mode="right"),this.skinParent=this.conf.form.skin,"undefined"==typeof dhtmlXForm.prototype._getItemDim)){dhtmlXForm.prototype._getItemDim=function(a){return this.doWithItem(a,"_getDim")};for(var c in{input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1})null!=dhtmlXForm.prototype.items[c]&&(dhtmlXForm.prototype.items[c]._getDim=function(a){var b=a;({ta:!0,pw:!0,se:!0,calendar:!0,colorpicker:1,editor:!0})[a._type]&&(b=a.childNodes[a._ll?1:0].childNodes[0]),{ch:!0,ra:!0,btn2state:!0}[a._type]&&(b=a.childNodes[a._ll?1:0].childNodes[1]),{bt:!0}[a._type]&&(b=a.firstChild),{combo:!0}[a._type]&&(b=a._combo.DOMParent.firstChild);var c={left:window.dhx4.absLeft(b),top:window.dhx4.absTop(b),width:b.offsetWidth,height:b.offsetHeight};return b=null,c})}return"undefined"!=typeof window.dhtmlXSlider&&null!=this.conf.slider&&this.conf.slider instanceof window.dhtmlXSlider&&(this.conf.mode||(this.mode="top"),this.conf.slider_tm=null,this._sliderShow=function(){b.conf.slider_tm&&window.clearTimeout(b.conf.slider_tm);var a=b.conf.slider._nodes.runner,c={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};b.show(c.left,c.top,c.width,c.height)},this._sliderHide=function(){b.conf.slider_tm=window.setTimeout(function(){b.hide()},200)},this.conf.slider_events=[this.conf.slider.attachEvent("_onRunnerMouseDown",this._sliderShow),this.conf.slider.attachEvent("_onRunnerMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]),this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"dhx_skyblue"),this}function dhtmlXMenuObject(a,b){var c=this;if(this.conf={skin:b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"dhx_skyblue",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",arrow_ff_fix:navigator.userAgent.indexOf("MSIE")>=0&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]},"object"==typeof a&&null!=a&&"undefined"==typeof a.tagName){(null!=a.icons_path||null!=a.icon_path)&&(this.conf.icons_path=a.icons_path||a.icon_path),null!=a.skin&&(this.conf.skin=a.skin),a.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:a.visible_area.x1,x2:a.visible_area.x2,y1:a.visible_area.y1,y2:a.visible_area.y2});for(var d in{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1})null!=a[d]&&(this.conf.autoload[d]=a[d]);a=a.parent}if(null==a)this.base=document.body;else{var e="string"==typeof a?document.getElementById(a):a;null!=e?(this.base=e,this.base.id||(this.base.id=(new Date).valueOf()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.base.oncontextmenu=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1}):this.base=document.body}this.idPrefix="",this.topId="dhxWebMenuTopId",this.idPull={},this.itemPull={},this.userData={},this.radio={},this.setSkin=function(a){var b=this.conf.skin;switch(this.conf.skin=a,this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2,this.conf.tl_rmarg=1,this.conf.tl_ofsleft=1;break;case"dhx_terrace":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+b+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle");for(var c in this.idPull)this.idPull[c].className=String(this.idPull[c].className).replace(b,this.conf.skin)},this.setSkin(this.conf.skin),this._addSubItemToSelected=function(a,b){for(var c=!0,d=0;d<this.conf.selected_sub.length;d++)this.conf.selected_sub[d][0]==a&&this.conf.selected_sub[d][1]==b&&(c=!1);return 1==c&&this.conf.selected_sub.push(new Array(a,b)),c},this._removeSubItemFromSelected=function(a,b){for(var c=new Array,d=!1,e=0;e<this.conf.selected_sub.length;e++)this.conf.selected_sub[e][0]==a&&this.conf.selected_sub[e][1]==b?d=!0:c[c.length]=this.conf.selected_sub[e];return 1==d&&(this.conf.selected_sub=c),d},this._getSubItemToDeselectByPolygon=function(a){for(var b=new Array,c=0;c<this.conf.selected_sub.length;c++)if(this.conf.selected_sub[c][1]==a){b[b.length]=this.conf.selected_sub[c][0],b=b.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[c][0]));for(var d=!0,e=0;e<this.conf.opened_poly.length;e++)this.conf.opened_poly[e]==this.conf.selected_sub[c][0]&&(d=!1);1==d&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[c][0]),this.conf.selected_sub[c][0]=-1,this.conf.selected_sub[c][1]=-1}return b},this._hidePolygon=function(a){if(null!=this.idPull["polygon_"+a]){if(null!=this.idPull["polygon_"+a]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+a]._zId),"undefined"!=typeof this._menuEffect&&this._menuEffect!==!1)this._hidePolygonEffect("polygon_"+a);else{if("none"==this.idPull["polygon_"+a].style.display)return;this.idPull["polygon_"+a].style.display="none",null!=this.idPull["arrowup_"+a]&&(this.idPull["arrowup_"+a].style.display="none"),null!=this.idPull["arrowdown_"+a]&&(this.idPull["arrowdown_"+a].style.display="none"),this._updateItemComplexState(a,!0,!1),window.dhx4.isIE6&&null!=this.idPull["polygon_"+a+"_ie6cover"]&&(this.idPull["polygon_"+a+"_ie6cover"].style.display="none")}a=String(a).replace(this.idPrefix,""),a==this.topId&&(a=null),this.callEvent("onHide",[a]),null!=a&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+a,!0)}},this._showPolygon=function(a,b){var c=this._countVisiblePolygonItems(a);if(0!=c){var d="polygon_"+a;if(null!=this.idPull[d]&&null!=this.idPull[a]){if(this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&!this.idPull[a]._mouseOver&&b==this.conf.dir_toplv)return;this.conf.fixed_pos||this._autoDetectVisibleArea();var e=0,f=0,g=null,h=null;if(null==this.idPull[d]._zId&&(this.idPull[d]._zId=window.dhx4.newId()),this.idPull[d]._zInd=window.dhx4.zim.reserve(this.idPull[d]._zId),this.idPull[d].style.visibility="hidden",this.idPull[d].style.left="0px",this.idPull[d].style.top="0px",this.idPull[d].style.display="",this.idPull[d].style.zIndex=this.idPull[d]._zInd,this.conf.auto_overflow)if(this.idPull[d].firstChild.offsetHeight>this.conf.v.y1+this.conf.v.y2){var i=Math.floor((this.conf.v.y2-this.conf.v.y1-35)/24);this.conf.overflow_limit=i}else this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+a]&&this._removeUpArrow(String(a).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+a]&&this._removeDownArrow(String(a).replace(this.idPrefix,""));if(this.conf.overflow_limit>0&&this.conf.overflow_limit<c&&(null==this.idPull["arrowup_"+a]&&this._addUpArrow(String(a).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+a]&&this._addDownArrow(String(a).replace(this.idPrefix,"")),g=this.idPull["arrowup_"+a],g.style.display="none",h=this.idPull["arrowdown_"+a],h.style.display="none"),this.conf.overflow_limit>0&&(this.conf.overflow_limit<c?(this.idPull[d].childNodes[1].style.height=24*this.conf.overflow_limit+"px",g.style.width=h.style.width=this.idPull[d].childNodes[1].style.width=this.idPull[d].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[d].childNodes[1].scrollTop=0,g.style.display="",e=g.offsetHeight,h.style.display="",f=h.offsetHeight):(this.idPull[d].childNodes[1].style.height="",this.idPull[d].childNodes[1].style.width="")),null!=this.itemPull[a]){"polygon_"+this.itemPull[a].parent}else if(this.conf.context){this.idPull[this.idPrefix+this.topId]}var j=null!=this.idPull[a].tagName?window.dhx4.absLeft(this.idPull[a]):this.idPull[a][0],k=null!=this.idPull[a].tagName?window.dhx4.absTop(this.idPull[a]):this.idPull[a][1],l=null!=this.idPull[a].tagName?this.idPull[a].offsetWidth:0,m=null!=this.idPull[a].tagName?this.idPull[a].offsetHeight:0,n=0,o=0,p=this.idPull[d].offsetWidth,q=this.idPull[d].childNodes[1].offsetHeight+e+f;if("bottom"==b&&(n=this.conf.rtl?j+(null!=l?l:0)-p:"right"==this.conf.align?j+l-p:j-1+(b==this.conf.dir_toplv?this.conf.tl_rmarg:0),o=k-1+m+this.conf.tl_botmarg),"right"==b&&(n=j+l-1,o=k+2),"left"==b&&(n=j-this.idPull[d].offsetWidth+2,o=k+2),"top"==b&&(n=j-1,o=k-q+2),this.conf.fixed_pos)var r=65536,s=65536;else{var r=null!=this.conf.v.x2?this.conf.v.x2:0,s=null!=this.conf.v.y2?this.conf.v.y2:0;0==r&&(window.innerWidth?(r=window.innerWidth,s=window.innerHeight):(r=document.body.offsetWidth,s=document.body.scrollHeight))}if(n+p>r&&!this.conf.rtl&&(n=j-p+2),n<this.conf.v.x1&&this.conf.rtl&&(n=j+l-2),0>n&&(n=0),o+q>s&&null!=this.conf.v.y2&&(o=Math.max(k+m-q+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==a&&null!=h&&(o-=2),null==this.itemPull[a]||this.conf.context||this.itemPull[a].parent==this.idPrefix+this.topId&&(o-=this.base.offsetHeight)),this.idPull[d].style.left=n+"px",this.idPull[d].style.top=o+"px","undefined"!=typeof this._menuEffect&&this._menuEffect!==!1)this._showPolygonEffect(d);else if(this.idPull[d].style.visibility="",this.conf.overflow_limit>0&&this.conf.overflow_limit<c&&(this.idPull[d].childNodes[1].scrollTop=0,this._checkArrowsState(a)),window.dhx4.isIE6){var t=d+"_ie6cover";if(null==this.idPull[t]){var u=document.createElement("IFRAME");u.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,u.frameBorder=0,u.setAttribute("src","javascript:false;"),document.body.insertBefore(u,document.body.firstChild),this.idPull[t]=u}this.idPull[t].style.left=n+"px",this.idPull[t].style.top=o+"px",this.idPull[t].style.width=this.idPull[d].offsetWidth+"px",this.idPull[t].style.height=this.idPull[d].offsetHeight+"px",this.idPull[t].style.zIndex=this.idPull[d].style.zIndex-1,this.idPull[t].style.display=""}a=String(a).replace(this.idPrefix,""),a==this.topId&&(a=null),this.callEvent("onShow",[a]),null!=a&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+a,!1)}}},this._redistribSubLevelSelection=function(a,b){for(;this.conf.opened_poly.length>0;)this.conf.opened_poly.pop();var c=this._getSubItemToDeselectByPolygon(b);this._removeSubItemFromSelected(-1,-1);for(var d=0;d<c.length;d++)null!=this.idPull[c[d]]&&c[d]!=a&&"enabled"==this.itemPull[c[d]].state&&(this.idPull[c[d]].className="sub_item");for(var d=0;d<this.conf.opened_poly.length;d++)this.conf.opened_poly[d]!=b&&this._hidePolygon(this.conf.opened_poly[d]);if("enabled"==this.itemPull[a].state){if(this.idPull[a].className="sub_item_selected",this.itemPull[a].complex&&this.conf.dload&&"no"==this.itemPull[a].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(a,!0),this.itemPull[a].loaded="get";var e=a.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var a={params:{}};a.params[this.conf.dload_pid]=e;for(var b in this.conf.dload_params)a.params[b]=this.conf.dload_params[b];return a},this.loadStruct(this.conf.dload_url)}(this.itemPull[a].complex||this.conf.dload&&"yes"==this.itemPull[a].loaded)&&this.itemPull[a].complex&&null!=this.idPull["polygon_"+a]&&(this._updateItemComplexState(a,!0,!0),this._showPolygon(a,this.conf.dir_sublv)),this._addSubItemToSelected(a,b),this.conf.selected=a}},this._doOnClick=function(a,b,c){if(this.conf.last_click=a,null!=this.itemPull[this.idPrefix+a].href_link&&"enabled"==this.itemPull[this.idPrefix+a].state){var d=document.createElement("FORM"),e=String(this.itemPull[this.idPrefix+a].href_link).split("?");if(d.action=e[0],null!=e[1])for(var f=String(e[1]).split("&"),g=0;g<f.length;g++){var h=String(f[g]).split("="),i=document.createElement("INPUT");i.type="hidden",i.name=h[0]||"",i.value=h[1]||"",d.appendChild(i)}return null!=this.itemPull[this.idPrefix+a].href_target&&(d.target=this.itemPull[this.idPrefix+a].href_target),d.style.display="none",document.body.appendChild(d),d.submit(),void(null!=d&&(document.body.removeChild(d),d=null))}if("c"!=b.charAt(0)&&"d"!=b.charAt(1)&&"s"!=b.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[a,this.conf.ctx_zoneid,c]);else if("d"==b.charAt(1)||"win"==this.conf.mode&&"t"==b.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}},this._doOnTouchMenu=function(a){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[a]))},this._searchMenuNode=function(a,b){for(var c=new Array,d=0;d<b.length;d++)if("object"==typeof b[d]){5==b[d].length&&"object"!=typeof b[d][0]&&b[d][0].replace(this.idPrefix,"")==a&&0==d&&(c=b);var e=this._searchMenuNode(a,b[d]);e.length>0&&(c=e)}return c},this._getMenuNodes=function(a){var b=new Array;for(var c in this.itemPull)this.itemPull[c].parent==a&&(b[b.length]=c);return b},this._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",d=0;a>d;d++)b+=c.charAt(Math.round(Math.random()*(c.length-1)));return b},this.getItemType=function(a){return a=this.idPrefix+a,null==this.itemPull[a]?null:this.itemPull[a].type},this.forEachItem=function(a){for(var b in this.itemPull)a(String(b).replace(this.idPrefix,""))},this._clearAndHide=function(){for(c.conf.selected=-1,c.conf.last_click=-1;c.conf.opened_poly.length>0;)c.conf.opened_poly.pop();for(var a=0;a<c.conf.selected_sub.length;a++){var b=c.conf.selected_sub[a][0];null!=c.idPull[b]&&"enabled"==c.itemPull[b].state&&("sub_item_selected"==c.idPull[b].className&&(c.idPull[b].className="sub_item"),c.idPull[b].className=="dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Selected"&&(c.idPull[b].className=null!=c.itemPull[b].cssNormal?c.itemPull[b].cssNormal:"dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Normal")),c._hidePolygon(b)}c.conf.is_touched=!1,c.conf.context&&c.conf.ctx_hideall&&c._hidePolygon(c.idPrefix+c.topId)},this._showSubLevelItem=function(a,b){null!=document.getElementById("arrow_"+this.idPrefix+a)&&(document.getElementById("arrow_"+this.idPrefix+a).style.display=b?"none":""),null!=document.getElementById("image_"+this.idPrefix+a)&&(document.getElementById("image_"+this.idPrefix+a).style.display=b?"none":""),null!=document.getElementById(this.idPrefix+a)&&(document.getElementById(this.idPrefix+a).style.display=b?"":"none")},this._hideSubLevelItem=function(a){this._showSubLevelItem(a,!0)},this.idPrefix=this._genStr(12)+"_",this._bodyClick=function(a){a=a||event,2==a.button||window.dhx4.isOpera&&1==a.ctrlKey||(c.conf.context?c.conf.ctx_autohide&&(!window.dhx4.isOpera||c._isContextMenuVisible()&&window.dhx4.isOpera)&&c._hideContextMenu():c._clearAndHide&&c._clearAndHide())},this._bodyContext=function(a){a=a||event;var b=String((a.srcElement||a.target).className);if(-1==b.search("dhtmlxMenu")||-1==b.search("SubLevelArea")){for(var d=!0,e=a.target||a.srcElement;null!=e;)null!=e.id&&c.isContextZone(e.id)&&(d=!1),e==document.body&&(d=!1),e=e.parentNode;d&&c.hideContextMenu()}},"undefined"!=typeof window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)),this.unload=function(){window.dhx4._eventable(this,"clear"),dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(a){}if(this.conf.live_id=null,"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.conf.context)for(var b in this.conf.ctx_zones)this.removeContextZone(b);null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null),null!=this.base&&(this.base.className="",this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null);
for(var b in this)this[b]=null;c=null},dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this,window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0}),window.dhx4._eventable(this),1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu(),null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload);for(var d in{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[d]&&("function"==typeof this.conf.autoload[d]?this.attachEvent(d,this.conf.autoload[d]):"function"==typeof window[this.conf.autoload[d]]&&this.attachEvent(d,window[this.conf.autoload[d]]));null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text),null!=this.conf.autoload.align&&this.setAlign(this.conf.autoload.align),null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode),null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow);for(var d in this.conf.autoload)this.conf.autoload[d]=null,delete this.conf.autoload[d];return this.conf.autoload=null,this}function dhtmlXRibbon(a){var b,c,d=this;this.conf={type:"ribbon",icons_path:a&&a.icons_path?a.icons_path:"",skin:"dhx_skyblue"},this._eventHandlers={},this._base=null,this._items={},this._tabbar=null,this.childIds=[],"string"==typeof a?c=a:a&&a.tagName?c=a:a&&a.parent&&(a.parent.tagName||"string"==typeof a.parent)&&(c=a.parent),this._doOnHighlight0=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];return e.conf.disable?void 0:d.items[e.type]&&"function"==typeof d.items[e.type].mouseover&&1!=d.items[e.type].mouseover(e,d,a)?!1:void(/dhxrb_highlight0/.test(c.className)||(c.className+=" dhxrb_highlight0"))},this._doOffHighlight0=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];if(!e.conf.disable){if(d.items[e.type]&&"function"==typeof d.items[e.type].mouseout&&1!=d.items[e.type].mouseout(e,d,a))return!1;/dhxrb_highlight1/.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_highlight1/,"")),/dhxrb_highlight0/.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_highlight0/,""))}},this._doOnHighlight1=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];return e.conf.disable?void 0:(d.callEvent("_showPopup",[e.id]),d.items[e.type]&&"function"==typeof d.items[e.type].mousedown&&1!=d.items[e.type].mousedown(e,d,a)?!1:void(/dhxrb_highlight1/.test(c.className)||(c.className+=" dhxrb_highlight1")))},this._doOffHighlight1=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];return e.conf.disable?void 0:d.items[e.type]&&"function"==typeof d.items[e.type].mouseup&&1!=d.items[e.type].mouseup(e,d,a)?!1:void(/dhxrb_highlight1/.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_highlight1/,"")))},this._doOnClick=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];e.conf.disable||d.items[e.type]&&"function"==typeof d.items[e.type].click&&d.items[e.type].click(e,d,a)},this._doOnFocus=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];e.conf.disable||(d.callEvent("_showPopup",[e.id]),d.items[e.type]&&"function"==typeof d.items[e.type].focus&&d.items[e.type].focus(e,d,a))},this._doOnBlur=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];e.conf.disable||d.items[e.type]&&"function"==typeof d.items[e.type].blur&&d.items[e.type].blur(e,d,a)},this._doOnChange=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];e.conf.disable||d.items[e.type]&&"function"==typeof d.items[e.type].change&&d.items[e.type].change(e,d,a)},this._doOnKeydown=function(a){a=a||event;var b=a.target||a.srcElement,c=d._findItemByNode(b),e=d._items[c._dhx_ribbonId];e.conf.disable||d.items[e.type]&&"function"==typeof d.items[e.type].keydown&&d.items[e.type].keydown(e,d,a)},this._tabCustomApi={enable:function(a,b){var c=null,e=null;if(b=b||!1,1!=b){c=d._items[this._idd];for(e in c.childIds)e=parseInt(e),d.enable(c.childIds[e])}return d._tabOriginalApi.enable.apply(this,[a])},disable:function(a,b){var c=null,e=null;if(0!=b){c=d._items[this._idd];for(e in c.childIds)e=parseInt(e),d.disable(c.childIds[e])}return d._tabOriginalApi.disable.apply(this,[a])},close:function(a){var b,c=d._items[this._idd];d._removeTab(c),d._tabOriginalApi.close.apply(this,[a]);for(b in d._tabOriginalApi)this[b]=null}},this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return d.callEvent("onSelect",arguments)}),this._tabbar.attachEvent("onTabClick",function(){return d.callEvent("onTabClick",arguments)}),this._tabbar.attachEvent("onTabClose",function(){return d.callEvent("onTabClose",arguments)})},"string"==typeof c?this._base=document.getElementById(c):c&&c.tagName?this._base=c:(this._base=document.createElement("div"),this._base._dhx_remove=!0,document.body.firstChild?document.body.insertBefore(this._base,document.body.firstChild):document.body.appendChild(this._base)),b=dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"dhx_skyblue","object"==typeof a&&a.skin&&(b=a.skin),this.setSkin(b),dhx4._eventable(this),dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:!0}),this.attachEvent("_onHeightChanged",function(){this.conf.inited=!0}),this._base.className+=" dhxrb_without_tabbar",this._base.innerHTML="<div class='dhxrb_background_area'></div>",null!=a&&(a.json?this.loadStruct(a.json,a.onload):a.xml?this.loadStruct(a.xml,a.onload):this._renderData(a)),this.unload=function(){var a=null,b=[];for(a in this.childIds)a=parseInt(a),b.push(this.childIds[a]);dhx4._enableDataLoading(this,null,null,null,"clear"),dhx4._eventable(this,"clear");for(a in b)a=parseInt(a),"tab"==this._items[b[a]].type?this.tabs(b[a]).close(!1):this.removeItem(b[a]);this._tabbar&&(this._tabbar.unload(),this._tabbar=null),this._base.innerHTML="",this._base._dhx_remove?this._base.parentNode.removeChild(this._base):this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/gi,"");for(a in this)this[a]=null;d=null}}function dhtmlXToolbarObject(a,b){var c=this;for(this.conf={skin:b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue",align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null},"object"==typeof a&&null!=a&&"undefined"==typeof a.tagName&&((null!=a.icons_path||null!=a.icon_path)&&(this.conf.icons_path=a.icons_path||a.icon_path),null!=a.icons_size&&(this.conf.icons_size_autoload=a.icons_size),null!=a.json&&(this.conf.json_autoload=a.json),null!=a.xml&&(this.conf.xml_autoload=a.xml),null!=a.onload&&(this.conf.onload_autoload=a.onload),null!=a.items&&(this.conf.items_autoload=a.items),null!=a.skin&&(this.conf.skin=a.skin),null!=a.align&&(this.conf.align_autostart=a.align),a=a.parent),this.cont="object"!=typeof a?document.getElementById(a):a;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);return a=null,this.cont.dir="ltr",this.base=document.createElement("DIV"),this.base.className="dhxtoolbar_float_left",this.cont.appendChild(this.base),window.dhx4.isIPad&&(this.cont.ontouchstart=function(a){return a=a||event,"input"==String(a.target.tagName||"").toLowerCase()?!0:(a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,!1)}),this.setSkin(this.conf.skin),this.objPull={},this.anyUsed="none",this._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",d=0;a>d;d++)b+=c.charAt(Math.round(Math.random()*(c.length-1)));return b},this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput"),this.idPrefix=this._genStr(12),window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0}),window.dhx4._eventable(this),this._getObj=function(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)null!=a.childNodes[d].tagName&&String(a.childNodes[d].tagName).toLowerCase()==String(b).toLowerCase()&&(c=a.childNodes[d]);return c},this._addImgObj=function(a){var b=document.createElement("IMG");return a.childNodes.length>0?a.insertBefore(b,a.childNodes[0]):a.appendChild(b),b},this._setItemImage=function(a,b,c){if(1==c?a.imgEn=b:a.imgDis=b,!(!a.state&&1==c||a.state&&0==c)){var d=this._getObj(a.obj,"img");null==d&&(d=this._addImgObj(a.obj)),d.src=this.conf.icons_path+b}},this._clearItemImage=function(a,b){if(1==b?a.imgEn="":a.imgDis="",!(!a.state&&1==b||a.state&&0==b)){var c=this._getObj(a.obj,"img");null!=c&&c.parentNode.removeChild(c)}},this._setItemText=function(a,b){var c=this._getObj(a.obj,"div");return null==b||0==b.length?void(null!=c&&c.parentNode.removeChild(c)):(null==c&&(c=document.createElement("DIV"),c.className="dhxtoolbar_text",a.obj.appendChild(c)),void(c.innerHTML=b))},this._getItemText=function(a){var b=this._getObj(a.obj,"div");return null!=b?b.innerHTML:""},this._enableItem=function(a){if(!a.state){a.state=!0,"buttonTwoState"==this.objPull[a.id].type&&1==this.objPull[a.id].obj.pressed?(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",a.obj.renderAs=a.obj.className),a.arw&&(a.arw.className=String(a.obj.className).replace("btn","arw"));var b=this._getObj(a.obj,"img");""!=a.imgEn?(null==b&&(b=this._addImgObj(a.obj)),b.src=this.conf.icons_path+a.imgEn):null!=b&&b.parentNode.removeChild(b)}},this._disableItem=function(a){if(a.state){a.state=!1,a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+("buttonTwoState"==this.objPull[a.id].type&&a.obj.pressed?"pres_":"")+"dis",a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",a.arw&&(a.arw.className=String(a.obj.className).replace("btn","arw"));var b=this._getObj(a.obj,"img");""!=a.imgDis?(null==b&&(b=this._addImgObj(a.obj)),b.src=this.conf.icons_path+a.imgDis):null!=b&&b.parentNode.removeChild(b),null!=a.polygon&&"none"!=a.polygon.style.display&&(window.dhx4.zim.clear(a.polygon._idd),a.polygon.style.display="none",a.polygon._ie6cover&&(a.polygon._ie6cover.style.display="none"),"dhx_terrace"==this.conf.skin&&this._improveTerraceButtonSelect(a.id,!0)),this.anyUsed="none"}},this.clearAll=function(){for(var a in this.objPull)this._removeItem(String(a).replace(this.idPrefix,""))},this._doOnClick=function(){c&&c.forEachItem&&c.forEachItem(function(a){if("buttonSelect"==c.objPull[c.idPrefix+a].type){var b=c.objPull[c.idPrefix+a];b.arw._skip===!0?b.arw._skip=!1:"none"!=b.polygon.style.display&&(b.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",b.obj.className=b.obj.renderAs,b.arw.className=String(b.obj.renderAs).replace("btn","arw"),c.anyUsed="none",window.dhx4.zim.clear(b.polygon._idd),b.polygon.style.display="none",b.polygon._ie6cover&&(b.polygon._ie6cover.style.display="none"),"dhx_terrace"==c.conf.skin&&c._improveTerraceButtonSelect(b.id,!0))}})},window.dhx4.isIPad?document.addEventListener("touchstart",this._doOnClick,!1):"undefined"!=typeof window.addEventListener?window.addEventListener("mousedown",this._doOnClick,!1):document.body.attachEvent("onmousedown",this._doOnClick),null!=this.conf.icons_size_autoload&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null),null!=this.conf.items_autoload?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):null!=this.conf.json_autoload?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):null!=this.conf.xml_autoload&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=null),this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null),this}function dhtmlXEditor(a,b){var c=this;for(this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:!1,toolbar:!1,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click"]},this._doOnFocusChanged=null,this._doOnAccess=null,"object"==typeof a&&null!=a&&null==a.tagName&&(b=a.skin,null!=a.content&&(this.conf.content=a.content),null!=a.contentHTML&&(this.conf.contentHTML=a.contentHTML),null!=a.iconsPath&&(this.conf.iconsPath=a.iconsPath),null!=a.toolbar&&(this.conf.toolbar=window.dhx4.s2b(a.toolbar)),null!=a.onFocusChanged&&(this._doOnFocusChanged=a.onFocusChanged),null!=a.onAccess&&(this._doOnAccess=a.onAccess),a=a.parent),this.conf.skin=b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"dhx_skyblue","string"==typeof a&&(a=document.getElementById(a)),this.base=a,this.base.className+=" dhxeditor_"+this.conf.skin;this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);var d=window.dhx4.isIE?this.base.currentStyle.position:window.getComputedStyle(this.base,null).getPropertyValue("position");"relative"!=d&&"absolute"!=d&&(this.base.style.position="relative"),this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this),this.base.appendChild(this.cell.cell),this.setSizes(),this.cBlock=document.createElement("DIV"),this.cBlock.className="dhxcont_content_blocker",this.cBlock.style.display="none",this.base.appendChild(this.cBlock),this.editor=document.createElement("IFRAME"),this.editor.className="dhxeditor_mainiframe",this.editor.frameBorder=0,window.dhx4.isOpera&&(this.editor.scrolling="yes");var e=this.editor;return"undefined"!=typeof window.addEventListener?e.onload=function(){for(var a=0;a<c.conf.evs.length;a++)e.contentWindow.addEventListener(c.conf.evs[a],c._ev,!1)}:e.onreadystatechange=function(){if("undefined"!=typeof e.readyState&&"complete"==e.readyState)try{for(var a=0;a<c.conf.evs.length;a++)e.contentWindow.document.body.attachEvent("on"+c.conf.evs[a],c._ev)}catch(b){}},this._ev=function(a){a=a||event;var b=a.type;c.callEvent("onAccess",[b,a]),"function"==typeof c._doOnAccess?c._doOnAccess(b,a):"string"==typeof c._doOnAccess&&"function"==typeof window[c._doOnAccess]&&window[c._doOnAccess](b,a)},this._focus=function(){window.dhx4.isIE?this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()},this.cell.attachObject(this.editor),this.edWin=this.editor.contentWindow,this.edDoc=this.edWin.document,this._prepareContent=function(a,b){var c="";a===!0&&null!=this.getContent&&(c=this.getContent());var d=this.editor.contentWindow.document;if(d.open("text/html","replace"),d.write(window.dhx4.isOpera?"<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(b!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>":window.dhx4.isKHTML?"<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(b!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>":window.dhx4.isIE?"<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color: #ffffff; outline: none;} </style></head><body "+(b!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>":"<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(b!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>"),d.close(),window.dhx4.isIE?d.contentEditable=b!==!0:d.designMode=b!==!0?"On":"Off",window.dhx4.isFF)try{d.execCommand("useCSS",!1,!0)}catch(e){}a===!0&&null!=this.setContent&&this.setContent(c)},this._prepareContent(),this._doOnResize=function(){window.clearTimeout(c.conf.resizeTM),c.conf.resizeTM=window.setTimeout(function(){c.setSizes&&c.setSizes()},c.conf.resizeTMTime)},this._runCommand=function(a,b){if(this.conf.roMode!==!0){arguments.length<2&&(b=null),window.dhx4.isIE&&this.edWin.focus();try{var c=this.editor.contentWindow.document;c.execCommand(a,!1,b)}catch(d){}if(window.dhx4.isIE){this.edWin.focus();var e=this;window.setTimeout(function(){e.edWin.focus(),e=null},1)}}},this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.clearFormatting=function(){this._runCommand("RemoveFormat")},this._doOnClick=function(a){var b=a||window.event,d=b.target||b.srcElement;c._showInfo(d)},this._doOnMouseDown=function(a){var b=a||window.event,d=b.target||b.srcElement;c._showInfo(d)},this._doOnKeyUp=function(a){var b=a||window.event,d=b.keyCode,e=b.target||b.srcElement;1=={37:1,38:1,39:1,40:1,13:1}[d]&&c._showInfo(e)},this._getParentByTag=function(a,b){b=b.toLowerCase();var c=a;do if(""==b||c.nodeName.toLowerCase()==b)return c;while(c=c.parentNode);return a},this._isStyleProperty=function(a,b,c,d){b=b.toLowerCase();var e=a;do if(e.nodeName.toLowerCase()==b&&e.style[c]==d)return!0;while(e=e.parentNode);return!1},this._setStyleProperty=function(a,b){this.style[b]=!1;var c=this._getParentByTag(a,b);c&&c.tagName.toLowerCase()==b&&(this.style[b]=!0),"del"==b&&this._getParentByTag(a,"strike")&&"strike"==this._getParentByTag(a,"strike").tagName.toLowerCase()&&(this.style.del=!0)},this._showInfo=function(a){var a=this._getSelectionBounds().end?this._getSelectionBounds().end:a;if(a&&this._setStyleProperty)try{if(this.edWin.getComputedStyle){var b=this.edWin.getComputedStyle(a,null),c=401==b.getPropertyValue("font-weight")?700:b.getPropertyValue("font-weight");this.style={fontStyle:b.getPropertyValue("font-style"),fontSize:b.getPropertyValue("font-size"),textDecoration:b.getPropertyValue("text-decoration"),fontWeight:c,fontFamily:b.getPropertyValue("font-family"),textAlign:b.getPropertyValue("text-align")},window.dhx4.isKHTML&&(this.style.fontStyle=b.getPropertyValue("font-style"),this.style.vAlign=b.getPropertyValue("vertical-align"),this.style.del=this._isStyleProperty(a,"span","textDecoration","line-through"),this.style.u=this._isStyleProperty(a,"span","textDecoration","underline"))}else{var b=a.currentStyle;this.style={fontStyle:b.fontStyle,fontSize:b.fontSize,textDecoration:b.textDecoration,fontWeight:b.fontWeight,fontFamily:b.fontFamily,textAlign:b.textAlign}}this._setStyleProperty(a,"h1"),this._setStyleProperty(a,"h2"),this._setStyleProperty(a,"h3"),this._setStyleProperty(a,"h4"),window.dhx4.isKHTML||(this._setStyleProperty(a,"del"),this._setStyleProperty(a,"sub"),this._setStyleProperty(a,"sup"),this._setStyleProperty(a,"u")),this.callEvent("onFocusChanged",[this.style,b])}catch(d){return null}},this._getSelectionBounds=function(){var a,b,c,d;if(this.edWin.getSelection){var e=this.edWin.getSelection();return a=e.getRangeAt(e.rangeCount-1),c=a.startContainer,d=a.endContainer,b=a.commonAncestorContainer,"#text"==c.nodeName&&(b=b.parentNode),"#text"==c.nodeName&&(c=c.parentNode),"body"==c.nodeName.toLowerCase()&&(c=c.firstChild),"#text"==d.nodeName&&(d=d.parentNode),"body"==d.nodeName.toLowerCase()&&(d=d.lastChild),c==d&&(b=c),{root:b,start:c,end:d}}if(this.edWin.document.selection){if(a=this.edDoc.selection.createRange(),!a.duplicate)return null;b=a.parentElement();var f=a.duplicate(),g=a.duplicate();return f.collapse(!0),g.moveToElementText(f.parentElement()),g.setEndPoint("EndToStart",f),c=f.parentElement(),f=a.duplicate(),g=a.duplicate(),g.collapse(!1),f.moveToElementText(g.parentElement()),f.setEndPoint("StartToEnd",g),d=g.parentElement(),"body"==c.nodeName.toLowerCase()&&(c=c.firstChild),"body"==d.nodeName.toLowerCase()&&(d=d.lastChild),c==d&&(b=c),{root:b,start:c,end:d}}return null},this.getContent=function(){return this.edDoc.body?window.dhx4.isFF?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):window.dhx4.isIE&&0==this.edDoc.body.innerText.length?"":this.edDoc.body.innerHTML:""},this.setContent=function(a){if(a=a||"",this.edDoc.body){var b=!1;if(window.dhx4.isFF){var d=navigator.userAgent.match(/Firefox\/(\d*)/);b=null!=d&&d[1]<28}b?("undefined"==typeof this.conf.ffTest&&(this.editor.contentWindow.document.body.innerHTML="",this._runCommand("InsertHTML","test"),this.conf.ffTest=this.editor.contentWindow.document.body.innerHTML.length>0),this.conf.ffTest?this.editor.contentWindow.document.body.innerHTML=a:(this.editor.contentWindow.document.body.innerHTML="",0==a.length&&(a=" "),this._runCommand("InsertHTML",a))):this.editor.contentWindow.document.body.innerHTML=a,this.callEvent("onContentSet",[])}else this.conf.firstLoadEv||(this.conf.firstLoadEv=!0,this.conf.firstLoadData=a,this._onFirstLoad=function(){c.setContent(c.conf.firstLoadData),"function"==typeof window.addEventListener?c.edWin.removeEventListener("load",c._onFirstLoad,!1):c.edWin.detachEvent("onload",c._onFirstLoad),c.conf.firstLoadData=null,c.conf.firstLoadEv=!1,c._onFirstLoad=null},"function"==typeof window.addEventListener?this.edWin.addEventListener("load",this._onFirstLoad,!1):this.edWin.attachEvent("onload",this._onFirstLoad))},this.setContentHTML=function(a){window.dhx4.ajax.get(a,function(a){null!=a.xmlDoc.responseText&&c.setContent(a.xmlDoc.responseText)})},window.dhx4._eventable(this),this.attachEvent("onFocusChanged",function(a){"function"==typeof this._doOnFocusChanged?this._doOnFocusChanged(a):"string"==typeof this._doOnFocusChanged&&"function"==typeof window[this._doOnFocusChanged]&&window[this._doOnFocusChanged](a)}),"function"==typeof window.addEventListener?(window.addEventListener("resize",this._doOnResize,!1),this.edDoc.addEventListener("click",this._doOnClick,!1),this.edDoc.addEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.addEventListener("mousedown",this._doOnMouseDown,!1)):(window.attachEvent("onresize",this._doOnResize),this.edDoc.attachEvent("onclick",this._doOnClick),this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)),this.unload=function(){if("function"==typeof window.addEventListener){window.removeEventListener("resize",this._doOnResize,!1),this.edDoc.removeEventListener("click",this._doOnClick,!1),this.edDoc.removeEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,!1);for(var a=0;a<c.conf.evs.length;a++)e.contentWindow.removeEventListener(c.conf.evs[a],c._ev,!1)}else{window.detachEvent("onresize",this._doOnResize,!1),this.edDoc.detachEvent("onclick",this._doOnClick),this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var a=0;a<c.conf.evs.length;a++)e.contentWindow.document.body.detachEvent("on"+c.conf.evs[a],c._ev)}for(this._doOnAccess=null,this._doOnFocusChanged=null,"function"==typeof window.addEventListener?this.editor.onload=null:this.editor.onreadystatechange=null,this.editor.parentNode.removeChild(this.editor),this.editor=null,this.edDoc=null,this.edWin=null,this.cell._unload(),this.cell=null,this.tb=null,window.dhx4._eventable(this,"clear"),this.cBlock.parentNode.removeChild(this.cBlock),this.cBlock=null,this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);this.base=null,this._doOnClick=null,this._doOnKeyUp=null,this._doOnMouseDown=null,this._ev=null,this._focus=null,this._prepareContent=null,this._doOnResize=null,this.setIconsPath=null,this.init=null,this.setSizes=null,this._runCommand=null,this.applyBold=null,this.applyItalic=null,this.applyUnderscore=null,this.clearFormatting=null,this._showInfo=null,this._getSelectionBounds=null,this.getContent=null,this.setContent=null,this.setContentHTML=null,this.setReadonly=null,this.isReadonly=null,this.unload=null,c=e=null},1==this.conf.toolbar&&"function"==typeof this.attachToolbar&&"function"==typeof window.dhtmlXToolbarObject&&this.attachToolbar(this.conf.iconsPath),this.setIconsPath=function(a){this.conf.iconsPath=a},this.conf.content.length>0?(this.setContent(this.conf.content),this.conf.content=""):this.conf.contentHTML.length>0&&(this.setContentHTML(this.conf.contentHTML),this.conf.contentHTML=""),this}function xmlPointer(a){this.d=a}function dhtmlXTreeObject(a,b,c,d){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}this.parentObject="object"!=typeof a?document.getElementById(a):a,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=b,this.height=c,this.rootId=d,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="24px",this._dragged=new Array,this._selected=new Array,this.style_pointer="pointer",this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=new Array,this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"),this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"),this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"),this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"),this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"),this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif"),this.cutImg=new Array(0,0,0),this.cutImage="but_cut.gif",dhtmlxEventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var f=this;return this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(a){return f._doContClick(a||window.event,!0)}),this.allTree.onmousedown=function(a){return f._doContClick(a||window.event)},this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),_isIE&&this.preventIECashing(!0),this.selectionBar=document.createElement("DIV"),this.selectionBar.className="selectionBar",this.selectionBar.innerHTML="&nbsp;",this.selectionBar.style.display="none",this.allTree.appendChild(this.selectionBar),window.addEventListener&&window.addEventListener("unload",function(){try{f.destructor()}catch(a){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{f.destructor()}catch(a){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function cObject(){return this}function dhtmlXTreeItemObject(a,b,c,d,e,f){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=d,this.label=b,this.parentObject=c,this.actionHandler=e,this.images=new Array(d.imageArray[0],d.imageArray[1],d.imageArray[2]),this.id=d._globalIdStorageAdd(a,this),this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,f):this.treeNod._createItem(0,this,f),this.htmlNode.objBelong=this,this}function dhx_dragSomethingInTree(){this.lWin=window,this._createDragNode=function(a){var b=document.createElement("div");return b.style.position="absolute",b.innerHTML=a.innerHTML||a.value,b.className="dragSpanDiv",b},this._preventNsDrag=function(a){return(a||window.event).cancelBubble=!0,a&&a.preventDefault?(a.preventDefault(),!1):!1},this._nonTrivialNode=function(a,b,c,d){if(this._customDrop)return this._customDrop(a,d.img.id,b.id,c?c.id:null);var e=d.img.getAttribute("image")||"",f=d.img.id||"new",g=d.img.getAttribute("text")||(_isIE?d.img.innerText:d.img.textContent);a[c?"insertNewNext":"insertNewItem"](c?c.id:b.id,f,g,"",e,e,e)}}function jsonPointer(a,b){this.d=a,this.dp=b}function dhtmlXTreeFromHTML(obj){"object"!=typeof obj&&(obj=document.getElementById(obj));for(var n=obj,id=n.id,cont="",j=0;j<obj.childNodes.length;j++)if("1"==obj.childNodes[j].nodeType){if("XMP"==obj.childNodes[j].tagName)for(var cHead=obj.childNodes[j],m=0;m<cHead.childNodes.length;m++)cont+=cHead.childNodes[m].data;else"ul"==obj.childNodes[j].tagName.toLowerCase()&&(cont=dhx_li2trees(obj.childNodes[j],new Array,0));break}obj.innerHTML="";var t=new dhtmlXTreeObject(obj,"100%","100%",0),z_all=new Array;for(b in t)z_all[b.toLowerCase()]=b;for(var atr=obj.attributes,a=0;a<atr.length;a++)if(0==atr[a].name.indexOf("set")||0==atr[a].name.indexOf("enable")){var an=atr[a].name;t[an]||(an=z_all[atr[a].name]),t[an].apply(t,atr[a].value.split(","))}if("object"==typeof cont){t.XMLloadingWarning=1;for(var i=0;i<cont.length;i++){var n=t.insertNewItem(cont[i][0],cont[i][3],cont[i][1]);cont[i][2]&&t._setCheck(n,cont[i][2])}t.XMLloadingWarning=0,t.lastLoadedXMLId=0,t._redrawFrom(t)}else t.loadXMLString("<tree id='0'>"+cont+"</tree>");window[id]=t;var oninit=obj.getAttribute("oninit");return oninit&&eval(oninit),t}function dhx_init_trees(){for(var a=document.getElementsByTagName("div"),b=0;b<a.length;b++)"dhtmlxTree"==a[b].className&&dhtmlXTreeFromHTML(a[b])}function dhx_li2trees(a,b,c){for(var d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(1==e.nodeType&&"li"==e.tagName.toLowerCase()){for(var f="",g=null,h=e.getAttribute("checked"),i=0;i<e.childNodes.length;i++){var j=e.childNodes[i];3==j.nodeType?f+=j.data:"ul"!=j.tagName.toLowerCase()?f+=dhx_outer_html(j):g=j}b[b.length]=[c,f,h,e.id||b.length+1],g&&(b=dhx_li2trees(g,b,e.id||b.length))}}return b}function dhx_outer_html(a){if(a.outerHTML)return a.outerHTML;var b=document.createElement("DIV");return b.appendChild(a.cloneNode(!0)),b=b.innerHTML}function setCookie(a,b){document.cookie=a+"="+b}function getCookie(a){var b=a+"=";if(document.cookie.length>0){var c=document.cookie.indexOf(b);if(-1!=c){c+=b.length;var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),document.cookie.substring(c,d)}}}function dhtmlxArray(a){return dhtmlXHeir(a||new Array,dhtmlxArray._master)}function dhtmlXGridObject(id){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}id?"object"==typeof id?(this.entBox=id,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(id):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()),this.entBox.innerHTML="",dhtmlxEventable(this);
var self=this;this._wcorr=0,this.fontWidth=7,this.cell=null,this.row=null,this.iconURL="",this.editor=null,this._f2kE=!0,this._dclE=!0,this.combos=new Array(0),this.defVal=new Array(0),this.rowsAr={},this.rowsBuffer=dhtmlxArray(),this.rowsCol=dhtmlxArray(),this._data_cache={},this._ecache={},this._ud_enabled=!0,this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,!0,this.no_cashe),this._maskArr=[],this.selectedRows=dhtmlxArray(),this.UserData={},this._sizeFix=this._borderFix=0,this.entBox.className+=" gridbox",this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%",this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%",this.entBox.style.cursor="default",this.entBox.onselectstart=function(){return!1};var t_creator=function(a){var b=document.createElement("TABLE");return b.cellSpacing=b.cellPadding=0,b.style.cssText="width:100%;table-layout:fixed;",b.className=a.substr(2),b};return this.obj=t_creator("c_obj"),this.hdr=t_creator("c_hdr"),this.hdr.style.marginRight="20px",this.hdr.style.paddingRight="20px",this.objBox=document.createElement("DIV"),this.objBox.style.width="100%",this.objBox.style.overflow="auto",this.objBox.appendChild(this.obj),this.objBox.className="objbox",dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),this.hdrBox=document.createElement("DIV"),this.hdrBox.style.width="100%",this.hdrBox.style.height="25px",this.hdrBox.style.overflow="hidden",this.hdrBox.className="xhdr",this.preloadImagesAr=new Array(0),this.sortImg=document.createElement("DIV"),this.sortImg.style.display="none",this.hdrBox.appendChild(this.sortImg),this.hdrBox.appendChild(this.hdr),this.hdrBox.style.position="relative",this.entBox.appendChild(this.hdrBox),this.entBox.appendChild(this.objBox),this.entBox.grid=this,this.objBox.grid=this,this.hdrBox.grid=this,this.obj.grid=this,this.hdr.grid=this,this.cellWidthPX=[],this.cellWidthPC=[],this.cellWidthType=this.entBox.cellwidthtype||"px",this.delim=this.entBox.delimiter||",",this._csvDelim=",",this.hdrLabels=[],this.columnIds=[],this.columnColor=[],this._hrrar=[],this.cellType=dhtmlxArray(),this.cellAlign=[],this.initCellWidth=[],this.fldSort=[],this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20,this.imgURL=window.dhx_globalImgPath||"",this.isActive=!1,this.isEditable=!0,this.useImagesInHeader=!1,this.pagingOn=!1,this.rowsBufferOutSize=0,dhtmlxEvent(window,"unload",function(){try{self.destructor&&self.destructor()}catch(a){}}),this.setSkin=function(a){this.skin_name=a,this._imgURL&&this.setImagePath(this._imgURL);var b=this.entBox.className.split(" gridbox")[0];switch(this.entBox.className=b+" gridbox gridbox_"+a+(_isIE?" isIE":" isModern"),this.skin_h_correction=0,this.enableAlterCss("ev_"+a,"odd_"+a,this.isTreeGrid()),this._fixAlterCss(),a){case"clear":this._topMb=document.createElement("DIV"),this._topMb.className="topMumba",this._topMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinC_top_left.gif'><img style='right:20px' src='"+this.imgURL+"skinC_top_right.gif'>",this.entBox.appendChild(this._topMb),this._botMb=document.createElement("DIV"),this._botMb.className="bottomMumba",this._botMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinD_bottom_left.gif'><img style='right:20px' src='"+this.imgURL+"skinD_bottom_right.gif'>",this.entBox.appendChild(this._botMb),"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative"),this.skin_h_correction=20;break;case"dhx_terrace":this._srdh=33,this.forceDivInHeader=!0;break;case"dhx_skyblue":case"dhx_web":case"glassy_blue":case"dhx_black":case"dhx_blue":case"modern":case"light":this._srdh=29,this.forceDivInHeader=!0;break;case"xp":this.forceDivInHeader=!0,this._srdh=_isIE&&"BackCompat"!=document.compatMode?26:22;break;case"mt":this._srdh=_isIE&&"BackCompat"!=document.compatMode?26:22;break;case"gray":_isIE&&"BackCompat"!=document.compatMode&&(this._srdh=22);break;case"sbdark":}if(_isIE&&this.hdr){var c=this.hdr.parentNode;c.removeChild(this.hdr),c.appendChild(this.hdr)}this.setSizes()},_isIE&&this.preventIECaching(!0),window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject),this._doOnScroll=function(a,b){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]),this.doOnScroll(a,b)},this.doOnScroll=function(a,b){this.hdrBox.scrollLeft=this.objBox.scrollLeft,this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft),b||this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){self._update_srnd_view&&self._update_srnd_view()},100))},this.attachToObject=function(a){a.appendChild(this.globalBox?this.globalBox:this.entBox),this.setSizes()},this.init=function(a){if(this.isTreeGrid()&&!this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null}),this._hstyles){if(this.skin_name||this.setSkin("dhx_skyblue"),this.editStop(),this.lastClicked=null,this.resized=null,this.fldSorted=this.r_fldSorted=null,this.cellWidthPX=[],this.cellWidthPC=[],this.hdr.rows.length>0){var b=this.xmlFileUrl;this.clearAll(!0),this.xmlFileUrl=b}for(var c=this.hdr.insertRow(0),d=0;d<this.hdrLabels.length;d++)c.appendChild(document.createElement("TH")),c.childNodes[d]._cellIndex=d,c.childNodes[d].style.height="0px";_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?c.style.position="absolute":c.style.height="auto";var c=this.hdr.insertRow(_isKHTML?2:1);c._childIndexes=new Array;for(var e=0,d=0;d<this.hdrLabels.length;d++)c._childIndexes[d]=d-e,this.hdrLabels[d]!=this.splitSign||0==d?(c.insertCell(d-e),c.childNodes[d-e]._cellIndex=d,c.childNodes[d-e]._cellIndexS=d,this.setColumnLabel(d,this.hdrLabels[d])):(_isKHTML&&c.insertCell(d-e),c.cells[d-e-1].colSpan=(c.cells[d-e-1].colSpan||1)+1,c.childNodes[d-e-1]._cellIndex++,e++,c._childIndexes[d]=d-e);0==e&&(c._childIndexes=null),this._cCount=this.hdrLabels.length,_isIE&&window.setTimeout(function(){self.setSizes&&self.setSizes()},1),this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));var f=this.obj.firstChild;if(!f.firstChild){f.appendChild(document.createElement("TR")),f=f.firstChild,_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?f.style.position="absolute":f.style.height="auto";for(var d=0;d<this.hdrLabels.length;d++)f.appendChild(document.createElement("TH")),f.childNodes[d].style.height="0px"}this._c_order=null,1!=this.multiLine&&(this.obj.className+=" row20px"),this.sortImg.style.position="absolute",this.sortImg.style.display="none",this.sortImg.className="dhxgrid_sort_desc",this.sortImg.defLeft=0,this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1,this._ivizcol&&this.setColHidden(),this.attachHeader(),this.attachHeader(0,0,"_aFoot"),this.setSizes(),a&&this.parseXML(),this.obj.scrollTop=0,this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this),this._initDrF&&this._initD(),this._init_point&&this._init_point()}},this.setColumnSizes=function(a){for(var b=0,c=[],d=0,e=0;e<this._cCount;e++)if("*"!=this.initCellWidth[e]||this._hrrar[e]){if("%"==this.cellWidthType){"undefined"==typeof this.cellWidthPC[e]&&(this.cellWidthPC[e]=this.initCellWidth[e]);var f=a*this.cellWidthPC[e]/100||0;d>.5&&(f++,d--);var g=this.cellWidthPX[e]=Math.floor(f),d=d+f-g}else"undefined"==typeof this.cellWidthPX[e]&&(this.cellWidthPX[e]=this.initCellWidth[e]);this._hrrar[e]||(b+=1*this.cellWidthPX[e])}else this._awdth=!1,c.push(e);if(c.length){var h=Math.floor((a-b)/c.length);0>h&&(h=1);for(var e=0;e<c.length;e++){var i=Math.max(this._drsclmW?this._drsclmW[c[e]]||0:0,h);this.cellWidthPX[c[e]]=i,b+=i}if(a>b){var j=c[c.length-1];this.cellWidthPX[j]=this.cellWidthPX[j]+(a-b),b=a}this._setAutoResize()}return this.obj.style.width=b+"px",this.hdr.style.width=b+"px",this.ftr&&(this.ftr.style.width=b+"px"),this.chngCellWidth(),b},this.setSizes=function(){if(this.hdr.rows[0]){var a=this.quirks=_isIE&&"BackCompat"==document.compatMode,b=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){var c=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){var d=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x,this.entBox.style.width=Math.max(0,this.globalBox.clientWidth+(a?2*c:0)-this._fake.entBox.clientWidth)+"px",d!=this.globalBox.clientWidth&&this._fake._correctSplit(this._fake.entBox.clientWidth)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(a?2*c:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*b+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);if(window.clearTimeout(this._sizeTime),!(this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth))return void(this._sizeTime=window.setTimeout(function(){self.setSizes&&self.setSizes()},250));var e=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||a?0:2,f=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||a?0:2;this._sizeFix&&(e-=this._sizeFix,f-=this._sizeFix);var g=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,h=dhtmlx.$customScroll?0:18,i=this.entBox.clientWidth-(this.skin_h_correction||0)*(a?0:1)-e,j=this.entBox.clientWidth-(this.skin_h_correction||0)-e,k=this.entBox.clientHeight-f,l=this.setColumnSizes(j-(g?h:0)-(this._correction_x||0)),m=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX,n=this.hdr.clientHeight,o=this.ftr?this.ftr.clientHeight:0,p=i,q=k-n-o;if(this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(m=0),this._ahgr&&(q=this._ahgrMA?this.entBox.parentNode.clientHeight-n-o:this.obj.offsetHeight+(m?h:0)+(this._correction_y||0),this._ahgrM&&(q=this._ahgrF?Math.min(this._ahgrM,q+n+o)-n-o:Math.min(this._ahgrM,q)),g&&q>=this.obj.scrollHeight+(m?h:0)&&(g=!1,this.setColumnSizes(j-(this._correction_x||0)))),this._awdth&&this._awdth[0]){"%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(l+=this._fake.entBox.clientWidth);var p=Math.min(Math.max(l+(g?h:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=!g&&this.objBox.scrollWidth<=p?"hidden":"auto",this._fake&&(p-=this._fake.entBox.clientWidth)}q=Math.max(0,q),this._ff_size_delta=.1==this._ff_size_delta?.2:.1,_isFF||(this._ff_size_delta=0),this.dontSetSizes||(this.entBox.style.width=Math.max(0,p+(a?2:0)*b+this._ff_size_delta)+"px",this.entBox.style.height=q+(a?2:0)*b+n+o+"px"),this.objBox.style.height=q+(a&&!g?2:0)*b+"px",this.hdrBox.style.height=n+"px",q!=k&&this.doOnScroll(0,!this._srnd);var r=this["setSizes_"+this.skin_name];r&&r.call(this),this.setSortImgPos(),n!=this.hdr.clientHeight&&this._ahgr&&this.setSizes(),this.callEvent("onSetSizes",[])}},this.setSizes_clear=function(){var a=this.hdr.offsetHeight,b=this.entBox.offsetWidth,c=a+this.objBox.offsetHeight;this._topMb.style.top=(a||0)+"px",this._topMb.style.width=b+20+"px",this._botMb.style.top=c-3+"px",this._botMb.style.width=b+20+"px"},this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var a=this._cCount,b=0;a>b;b++)this.hdr.rows[0].cells[b].style.width=this.cellWidthPX[b]+"px",this.obj.rows[0].childNodes[b].style.width=this.cellWidthPX[b]+"px",this.ftr&&(this.ftr.rows[0].cells[b].style.width=this.cellWidthPX[b]+"px")},this.setDelimiter=function(a){this.delim=a},this.setInitWidthsP=function(a){this.cellWidthType="%",this.initCellWidth=a.split(this.delim.replace(/px/gi,"")),arguments[1]||this._setAutoResize()},this._setAutoResize=function(){if(!this._realfake){var a=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(a._resize_timer),a._setAutoResize&&(a._resize_timer=window.setTimeout(function(){a.setSizes&&a.setSizes(),a._fake&&a._fake._correctSplit()},100))})}},this.setInitWidths=function(a){if(this.cellWidthType="px",this.initCellWidth=a.split(this.delim),_isFF)for(var b=0;b<this.initCellWidth.length;b++)"*"!=this.initCellWidth[b]&&(this.initCellWidth[b]=parseInt(this.initCellWidth[b]))},this.enableMultiline=function(a){this.multiLine=convertStringToBoolean(a)},this.enableMultiselect=function(a){this.selMultiRows=convertStringToBoolean(a)},this.setImagePath=function(a){this._imgURL=a,this.imgURL=a+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/",this.iconTree=this.imgURL+"tree/"},this.setImagesPath=this.setImagePath,this.setIconPath=function(a){this.iconURL=a},this.setIconsPath=this.setIconPath,this.changeCursorState=function(a){var b=a.target||a.srcElement;if("TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD")),b){if("TD"==b.tagName&&this._drsclmn&&!this._drsclmn[b._cellIndex])return b.style.cursor="default";var c=(a.layerX||0)+(_isIE||"DIV"!=a.target.tagName?0:b.offsetLeft);b.style.cursor=b.offsetWidth-(a.offsetX||-1*(parseInt(this.getPosition(b,this.hdrBox))-c))<(_isOpera?20:10)?"E-resize":"default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this.startColResize=function(a){this.resized&&this.stopColResize(),this.resized=null;var b=a.target||a.srcElement;"TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD"));var c=a.clientX,d=this.hdr.offsetWidth,e=parseInt(b.offsetWidth);if("TD"==b.tagName&&"default"!=b.style.cursor){if(this._drsclmn&&!this._drsclmn[b._cellIndex])return;self._old_d_mm=document.body.onmousemove,self._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(a){self&&self.doColResize(a||window.event,b,e,c,d)},document.body.onmouseup=function(){self&&self.stopColResize()}}},this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"",document.body.onmouseup=self._old_d_mu||"",this.setSizes(),this.doOnScroll(0,1),this.callEvent("onResizeEnd",[this])},this.doColResize=function(a,b,c,d,e){b.style.cursor="E-resize",this.resized=b;{var f=c+(a.clientX-d);e+(a.clientX-d)}if(this.callEvent("onResize",[b._cellIndex,f,this])){if(_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft),b.colSpan>1){for(var g=new Array,h=0;h<b.colSpan;h++)g[h]=Math.round(f*this.hdr.rows[0].childNodes[b._cellIndexS+h].offsetWidth/b.offsetWidth);for(var h=0;h<b.colSpan;h++)this._setColumnSizeR(b._cellIndexS+1*h,g[h])}else this._setColumnSizeR(b._cellIndex,f);this.doOnScroll(0,1),this.setSizes(),this._fake&&this._awdth&&this._fake._correctSplit()}},this._setColumnSizeR=function(a,b){if(b>(this._drsclmW&&!this._notresize?this._drsclmW[a]||10:10)){if(this.obj.rows[0].childNodes[a].style.width=b+"px",this.hdr.rows[0].childNodes[a].style.width=b+"px",this.ftr&&(this.ftr.rows[0].childNodes[a].style.width=b+"px"),"px"==this.cellWidthType)this.cellWidthPX[a]=b;else{var c=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(c-=17);var d=Math.round(b/c*100);this.cellWidthPC[a]=d}"none"!=this.sortImg.style.display&&this.setSortImgPos()}},this.setSortImgState=function(a,b,c,d){if(c=(c||"asc").toLowerCase(),!convertStringToBoolean(a))return this.sortImg.style.display="none",void(this.fldSorted=this.r_fldSorted=null);this.sortImg.className="asc"==c?"dhxgrid_sort_asc":"dhxgrid_sort_desc",this.sortImg.style.display="",this.fldSorted=this.hdr.rows[0].childNodes[b];var e=this.hdr.rows[d||1];if(e){for(var f=0;f<e.childNodes.length;f++)if(e.childNodes[f]._cellIndexS==b)return this.r_fldSorted=e.childNodes[f],this.setSortImgPos();return this.setSortImgState(a,b,c,(d||1)+1)}},this.setSortImgPos=function(a,b,c,d){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:a]){if(!d)if(a)var d=this.hdr.rows[c||0].cells[a];else var d=this.r_fldSorted;if(null!=d){var e=this.getPosition(d,this.hdrBox),f=d.offsetWidth;this.sortImg.style.left=Number(e[0]+f-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(e[1]+5)+"px",this.useImagesInHeader||b||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"}}},this.setActive=function(a){if(0==arguments.length)var a=!0;1==a?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))},this._doClick=function(a){var b=0,c=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(c&&c.parentNode&&c.parentNode.idd){var d=!0;if(this.markedCells){var e=0;return(a.shiftKey||a.metaKey)&&(e=1),a.ctrlKey&&(e=2),this.doMark(c,e),!0}0!=this.selMultiRows&&(a.shiftKey&&null!=this.row&&this.selectedRows.length&&(b=1),(a.ctrlKey||a.metaKey)&&(b=2)),this.doClick(c,d,b,!1)}},this._doContClick=function(a){var b=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(!b||"undefined"==typeof b.parentNode.idd)return this.callEvent("onEmptyClick",[a]),!0;if(2==a.button||_isMacOS&&a.ctrlKey){if(!this.callEvent("onRightClick",[b.parentNode.idd,b._cellIndex,a])){var c=function(a){return(a||event).cancelBubble=!0,!1};return(a.srcElement||a.target).oncontextmenu=c,c(a)}if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[b.parentNode.idd,b._cellIndex,this]))return!0;if(_isIE&&(a.srcElement.oncontextmenu=function(){return event.cancelBubble=!0,!1}),this._ctmndx.showContextMenu){var d=window.document.documentElement,e=window.document.body,f=new Array(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);if(_isIE)var g=a.clientX+f[0],h=a.clientY+f[1];else var g=a.pageX,h=a.pageY;this._ctmndx.showContextMenu(g-1,h-1),this.contextID=this._ctmndx.contextMenuZoneId=b.parentNode.idd+"_"+b._cellIndex,this._ctmndx._skip_hide=!0}else b.contextMenuId=b.parentNode.idd+"_"+b._cellIndex,b.contextMenu=this._ctmndx,b.a=this._ctmndx._contextStart,b.a(b,a),b.a=null;return a.cancelBubble=!0,!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0},this.doClick=function(a,b,c,d){this.selMultiRows||(c=0);var e=this.row?this.row.idd:0;if(this.setActive(!0),c||(c=0),null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")),"TD"==a.tagName){if(this.checkEvent("onSelectStateChanged"))var f=this.getSelectedId();var g=this.row;if(1==c){var h=this.rowsCol._dhx_find(a.parentNode),i=this.rowsCol._dhx_find(this.lastClicked);if(h>i)var j=i,k=h;else var j=h,k=i;for(var l=0;l<this.rowsCol.length;l++)if(l>=j&&k>=l){if(!this.rowsCol[l]||this.rowsCol[l]._sRow)return this.clearSelection(),this.doClick(a,b,0,d);-1==this.rowsCol[l].className.indexOf("rowselected")&&(this._realfake||this.callEvent("onBeforeSelect",[this.rowsCol[l].idd,e,a._cellIndex]))&&(this.rowsCol[l].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[l])}}else if(2==c&&-1!=a.parentNode.className.indexOf("rowselected")){a.parentNode.className=a.parentNode.className.replace(/rowselected/g,""),this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(a.parentNode));var m=!0;d=!1}if(this.editStop(),"undefined"==typeof a.parentNode.idd)return!0;if(m||a.parentNode._sRow||(this._realfake||this.callEvent("onBeforeSelect",[a.parentNode.idd,e,a._cellIndex])?this.getSelectedRowId()!=a.parentNode.idd?(0==c&&this.clearSelection(),this.cell=a,g==a.parentNode&&this._chRRS&&(b=!1),this.row=a.parentNode,this.row.className+=" rowselected",-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=a,this.row=a.parentNode):b=!1),this.cell&&-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"),1!=c&&!this.row)return;this.lastClicked=a.parentNode;var n=this.row.idd,o=this.cell;if(b&&"undefined"!=typeof n&&o&&!m?self.onRowSelectTime=setTimeout(function(){self.callEvent&&self.callEvent("onRowSelect",[n,o._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[n]),this.checkEvent("onSelectStateChanged")){var p=this.getSelectedId();f!=p&&this.callEvent("onSelectStateChanged",[p,f])}}this.isActive=!0,d!==!1&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)},this.selectAll=function(){this.clearSelection();var a=this.rowsBuffer;this.pagingOn&&(a=this.rowsCol);for(var b=0;b<a.length;b++)this.render_row(b).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(a)),this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]),this._fake&&!this._realfake&&this._fake.selectAll()},this.selectCell=function(a,b,c,d,e,f){if(c||(c=!1),"object"!=typeof a&&(a=this.render_row(a)),!a||-1==a)return null;if(a._childIndexes)var g=a.childNodes[a._childIndexes[b]];else var g=a.childNodes[b];g||(g=a.childNodes[0]),this.markedCells?this.doMark(g,d?2:0):d?this.doClick(g,c,3,f):this.doClick(g,c,0,f),e&&this.editCell()},this.moveToVisible=function(a,b){if(this.pagingOn){var c=Math.floor(this.getRowIndex(a.parentNode.idd)/this.rowsBufferOutSize)+1;c!=this.currentPage&&this.changePage(c)}try{if(a.offsetHeight){var d=a.offsetLeft+a.offsetWidth+20,e=0;d>this.objBox.offsetWidth+this.objBox.scrollLeft?a.offsetLeft>this.objBox.scrollLeft&&(e=a.offsetLeft-(this.objBox.offsetWidth-a.offsetWidth)+5):a.offsetLeft<this.objBox.scrollLeft&&(d-=2*a.offsetWidth/3,d<this.objBox.scrollLeft&&(e=a.offsetLeft-5)),e&&!b&&(this.objBox.scrollLeft=e)}if(a.offsetHeight)d=a.offsetTop;else{var f=this._realfake?this._fake.rowsAr[a.parentNode.idd]:a.parentNode;d=this.rowsBuffer._dhx_find(f)*this._srdh}var g=d+a.offsetHeight+38;if(g>this.objBox.offsetHeight+this.objBox.scrollTop)var h=d;else if(d<this.objBox.scrollTop)var h=d-5;h&&(this.objBox.scrollTop=h)}catch(i){}},this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){if(this.editStop(),1!=this.isEditable||!this.cell)return!1;var a=this.cell;if(a.parentNode._locked)return!1;if(this.editor=this.cells4(a),null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),a.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}},this.editStop=function(a){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),a){var b=this.editor.val;return this.editor.detach(),this.editor.setValue(b),this.editor=null,void this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,b])}this.editor.detach()&&(this.cell.wasChanged=!0);var c=this.editor;this.editor=null;var d=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,c.getValue(),c.val]);"string"==typeof d||"number"==typeof d?c[c.setImage?"setLabel":"setValue"](d):d||c[c.setImage?"setLabel":"setValue"](c.val),this._ahgr&&this.multiLine&&this.setSizes()}},this._nextRowCell=function(a,b,c){return a=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(a),b),a?a.childNodes[a._childIndexes?a._childIndexes[c]:c]:null},this._getNextCell=function(a,b,c){a=a||this.cell;var d=a.parentNode;if(this._tabOrder)c=this._tabOrder[a._cellIndex],"undefined"!=typeof c&&(a=0>c?this._nextRowCell(d,b,Math.abs(c)-1):d.childNodes[c]);else{var c=a._cellIndex+b;c>=0&&c<this._cCount?(d._childIndexes&&(c=d._childIndexes[a._cellIndex]+b),a=d.childNodes[c]):a=this._nextRowCell(d,b,1==b?0:this._cCount-1)}return a?"none"==a.style.display||this.smartTabOrder&&this.cells(a.parentNode.idd,a._cellIndex).isDisabled()?this._getNextCell(a,b):a:(1==b&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==b&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null)},this._nextRow=function(a,b){var c=this.render_row(a+b);return c&&-1!=c?c&&"none"==c.style.display?this._nextRow(a+b,b):c:null},this.scrollPage=function(a){if(this.rowsBuffer.length){var b=this._realfake?this._fake:this,c=Math.floor((b._r_select||this.getRowIndex(this.row.idd)||0)+a*this.objBox.offsetHeight/(this._srdh||20));0>c&&(c=0),c>=this.rowsBuffer.length&&(c=this.rowsBuffer.length-1),this._srnd&&!this.rowsBuffer[c]?(this.objBox.scrollTop+=Math.floor(a*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),b._r_select=c):(this.selectCell(c,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(c)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)),b._r_select=null)}},this.doKey=function(a){if(!a)return!0;if((a.target||a.srcElement).value!==window.undefined){var b=a.target||a.srcElement;if(!b.parentNode||-1==b.parentNode.className.indexOf("editable"))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(a);if(0==this.isActive)return!0;if(this._htkebl)return!0;if(!this.callEvent("onKeyPress",[a.keyCode,a.ctrlKey,a.shiftKey,a]))return!1;var c="k"+a.keyCode+"_"+(a.ctrlKey?1:0)+"_"+(a.shiftKey?1:0);if(this.cell){if(this._key_events[c])return!1===this._key_events[c].call(this)?!0:(a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1);this._key_events.k_other&&this._key_events.k_other.call(this,a)}return!0},this.selectRow=function(a,b,c,d){"object"!=typeof a&&(a=this.render_row(a)),this.selectCell(a,0,b,c,!1,d)},this.wasDblClicked=function(a){var b=this.getFirstParentOfType(_isIE?a.srcElement:a.target,"TD");if(b){var c=b.parentNode.idd;return this.callEvent("onRowDblClicked",[c,b._cellIndex,a])}},this._onHeaderClick=function(a,b){var c=this.grid;if(b=b||c.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD"),null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[b._cellIndexS,a||window.event]))return!1;c.sortField(b._cellIndexS,!1,b)}this.grid.resized=null},this.deleteSelectedRows=function(){var a=this.selectedRows.length;if(0!=a){var b=this.selectedRows;this.selectedRows=dhtmlxArray();for(var c=a-1;c>=0;c--){var d=b[c];if(this.deleteRow(d.idd,d)){if(d==this.row)var e=c}else this.selectedRows[this.selectedRows.length]=d}if(e)try{e+1>this.rowsCol.length&&e--,this.selectCell(e,0,!0)}catch(f){this.row=null,this.cell=null}}},this.getSelectedRowId=function(){for(var a=new Array(0),b={},c=0;c<this.selectedRows.length;c++){var d=this.selectedRows[c].idd;b[d]||(a[a.length]=d,b[d]=!0)}return 0==a.length?null:a.join(this.delim)},this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1},this.getColWidth=function(a){return parseInt(this.cellWidthPX[a])},this.setColWidth=function(a,b){if("*"==b)this.initCellWidth[a]="*";else{if(this._hrrar[a])return;"px"==this.cellWidthType?this.cellWidthPX[a]=parseInt(b):this.cellWidthPC[a]=parseInt(b)}this.setSizes()},this.getRowIndex=function(a){for(var b=0;b<this.rowsBuffer.length;b++)if(this.rowsBuffer[b]&&this.rowsBuffer[b].idd==a)return b;return-1},this.getRowId=function(a){return this.rowsBuffer[a]?this.rowsBuffer[a].idd:this.undefined},this.setRowId=function(a,b){this.changeRowId(this.getRowId(a),b)},this.changeRowId=function(a,b){if(a!=b){var c=this.rowsAr[a];c.idd=b,this.UserData[a]&&(this.UserData[b]=this.UserData[a],this.UserData[a]=null),this._h2&&this._h2.get[a]&&(this._h2.get[b]=this._h2.get[a],this._h2.get[b].id=b,delete this._h2.get[a]),this.rowsAr[a]=null,this.rowsAr[b]=c;for(var d=0;d<c.childNodes.length;d++)c.childNodes[d]._code&&(c.childNodes[d]._code=this._compileSCL(c.childNodes[d]._val,c.childNodes[d]));if(this._mat_links&&this._mat_links[a]){var e=this._mat_links[a];delete this._mat_links[a];for(var f in e)for(var d=0;d<e[f].length;d++)this._compileSCL(e[f][d].original,e[f][d])}this.callEvent("onRowIdChange",[a,b])}},this.setColumnIds=function(a){this.columnIds=a.split(this.delim)},this.setColumnId=function(a,b){this.columnIds[a]=b},this.getColIndexById=function(a){for(var b=0;b<this.columnIds.length;b++)if(this.columnIds[b]==a)return b},this.getColumnId=function(a){return this.columnIds[a]},this.getColumnLabel=function(a,b,c){for(var d=(c||this.hdr).rows[(b||0)+1],e=0;e<d.cells.length;e++)if(d.cells[e]._cellIndexS==a)return _isIE?d.cells[e].innerText:d.cells[e].textContent;return""},this.getColLabel=this.getColumnLabel,this.getFooterLabel=function(a,b){return this.getColumnLabel(a,b,this.ftr)},this.setRowTextBold=function(a){var b=this.getRowById(a);b&&(b.style.fontWeight="bold")},this.setRowTextStyle=function(a,b){var c=this.getRowById(a);if(c)for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d]._attrs.style||"";this._hrrar&&this._hrrar[d]&&(e="display:none;"),c.childNodes[d].style.cssText=_isIE?e+"width:"+c.childNodes[d].style.width+";"+b:e+"width:"+c.childNodes[d].style.width+";"+b}},this.setRowColor=function(a,b){for(var c=this.getRowById(a),d=0;d<c.childNodes.length;d++)c.childNodes[d].bgColor=b},this.setCellTextStyle=function(a,b,c){var d=this.getRowById(a);if(d){var e=d.childNodes[d._childIndexes?d._childIndexes[b]:b];if(e){var f="";this._hrrar&&this._hrrar[b]&&(f="display:none;"),e.style.cssText=_isIE?f+"width:"+e.style.width+";"+c:f+"width:"+e.style.width+";"+c}}},this.setRowTextNormal=function(a){var b=this.getRowById(a);b&&(b.style.fontWeight="normal")},this.doesRowExist=function(a){return null!=this.getRowById(a)?!0:!1},this.getColumnsNum=function(){return this._cCount},this.moveRowUp=function(a){var b=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,-1);var c=this.rowsCol._dhx_find(b);if(b.previousSibling&&0!=c){b.parentNode.insertBefore(b,b.previousSibling),this.rowsCol._dhx_swapItems(c,c-1),this.setSizes();var d=this.rowsBuffer._dhx_find(b);this.rowsBuffer._dhx_swapItems(d,d-1),this._cssEven&&this._fixAlterCss(c-1)}},this.moveRowDown=function(a){var b=this.getRowById(a);if(this.isTreeGrid())return this.moveRowUDTG(a,1);var c=this.rowsCol._dhx_find(b);if(b.nextSibling){this.rowsCol._dhx_swapItems(c,c+1),b.nextSibling.nextSibling?b.parentNode.insertBefore(b,b.nextSibling.nextSibling):b.parentNode.appendChild(b),this.setSizes();var d=this.rowsBuffer._dhx_find(b);this.rowsBuffer._dhx_swapItems(d,d+1),this._cssEven&&this._fixAlterCss(c)}},this.getCombo=function(a){return this.combos[a]||(this.combos[a]=new dhtmlXGridComboObject),this.combos[a]},this.setUserData=function(a,b,c){a||(a="gridglobaluserdata"),this.UserData[a]||(this.UserData[a]=new Hashtable),this.UserData[a].put(b,c)},this.getUserData=function(a,b){a||(a="gridglobaluserdata"),this.getRowById(a);var c=this.UserData[a];return c?c.get(b):""},this.setEditable=function(a){this.isEditable=convertStringToBoolean(a)},this.selectRowById=function(a,b,c,d){d||(d=!1),this.selectCell(this.getRowById(a),0,d,b,!1,c)},this.clearSelection=function(){this.editStop();for(var a=0;a<this.selectedRows.length;a++){var b=this.rowsAr[this.selectedRows[a].idd];b&&(b.className=b.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray(),this.row=null,null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null),this.callEvent("onSelectionCleared",[])},this.copyRowContent=function(a,b){var c=this.getRowById(a);if(this.isTreeGrid())this._copyTreeGridRowContent(c,a,b);else for(var d=0;d<c.cells.length;d++)this.cells(b,d).setValue(this.cells(a,d).getValue());_isIE||(this.getRowById(a).cells[0].height=c.cells[0].offsetHeight)
},this.setFooterLabel=function(a,b,c){return this.setColumnLabel(a,b,c,this.ftr)},this.setColumnLabel=function(a,b,c,d){var e=(d||this.hdr).rows[c||1],f=e._childIndexes?e._childIndexes[a]:a;if(e.cells[f]){if(this.useImagesInHeader){e.cells[f].style.textAlign="left",e.cells[f].innerHTML="<img src='"+b+"'>";var g=new Image;g.src=""+b.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=g;var h=new Image;h.src=""+b.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=h}else{var i="<div class='hdrcell'>";if(-1!=b.indexOf("img:[")){var j=b.replace(/.*\[([^>]+)\].*/,"$1");b=b.substr(b.indexOf("]")+1,b.length),i+="<img width='18px' height='18px' align='absmiddle' src='"+j+"' hspace='2'>"}i+=b,i+="</div>",e.cells[f].innerHTML=i,this._hstyles[f]&&(e.cells[f].style.cssText=this._hstyles[f])}if(-1!=(b||"").indexOf("#")){var k=b.match(/(^|{)#([^}]+)(}|$)/);if(k){var l="_in_header_"+k[2];this[l]&&this[l](this.forceDivInHeader?e.cells[f].firstChild:e.cells[f],f,b.split(k[0]))}}}},this.setColLabel=function(a,b,c,d){return this.setColumnLabel(a,b,(c||0)+1,d)},this.clearAll=function(a){if(this.obj.rows[0]){this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2)),this.limit=this._limitC=0,this.editStop(!0),this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);var b=this.rowsCol.length;b=this.obj.rows.length;for(var c=b-1;c>0;c--){var d=this.obj.rows[c];d.parentNode.removeChild(d)}if(a){this._master_row=null,this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var c=this.hdr.rows.length-1;c>=0;c--){var d=this.hdr.rows[c];d.parentNode.removeChild(d)}this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null),this._aHead=this.ftr=this.cellWidth=this._aFoot=null,this.cellType=dhtmlxArray(),this._hrrar=[],this.columnIds=[],this.combos=[],this._strangeParams=[],this.defVal=[],this._ivizcol=null}this.row=null,this.cell=null,this.rowsCol=dhtmlxArray(),this.rowsAr={},this._RaSeCol=[],this.rowsBuffer=dhtmlxArray(),this.UserData=[],this.selectedRows=dhtmlxArray(),(this.pagingOn||this._srnd)&&(this.xmlFileUrl=""),this.pagingOn&&this.changePage(1),this._contextCallTimer&&window.clearTimeout(this._contextCallTimer),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,this.setSortImgState(!1),this.setSizes(),this.callEvent("onClearAll",[])}},this.sortField=function(a,b,c){if(0==this.getRowsNum())return!1;var d=this.hdr.rows[0].cells[a];if(d&&"TH"==d.tagName&&this.fldSort.length-1>=d._cellIndex&&"na"!=this.fldSort[d._cellIndex]){var e=this.getSortingState(),f=e[0]==a&&"asc"==e[1]?"des":"asc";if(!this.callEvent("onBeforeSorting",[a,this.fldSort[a],f]))return;if(this.sortImg.className="dhxgrid_sort_"+("asc"==f?"asc":"desc"),this.useImagesInHeader){var g=this.hdr.rows[1].cells[d._cellIndex].firstChild;if(null!=this.fldSorted){var h=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;h.src=h.src.replace(/(\.asc\.)|(\.des\.)/,".")}g.src=g.src.replace(/(\.[a-z]+)$/,"."+f+"$1")}this.sortRows(d._cellIndex,this.fldSort[d._cellIndex],f),this.fldSorted=d,this.r_fldSorted=c;{var i=this.hdr.rows[1],i=c.parentNode;i._childIndexes?i._childIndexes[d._cellIndex]:d._cellIndex}this.setSortImgPos(!1,!1,!1,c)}},this.setCustomSorting=function(func,col){this._customSorts||(this._customSorts=new Array),this._customSorts[col]="string"==typeof func?eval(func):func,this.fldSort[col]="cus"},this.enableHeaderImages=function(a){this.useImagesInHeader=a},this.setHeader=function(a,b,c){if("object"!=typeof a)var d=this._eSplit(a);else d=[].concat(a);for(var e=new Array(0),f=new dhtmlxArray(0),g=new Array(0),h=new Array(0),i=new Array(0),j=0;j<d.length;j++)e[e.length]=Math.round(100/d.length),f[f.length]="ed",g[g.length]="left",h[h.length]="middle",i[i.length]="na";this.splitSign=b||"#cspan",this.hdrLabels=d,this.cellWidth=e,this.initCellWidth.length||this.setInitWidthsP(e.join(this.delim),!0),this.cellType=f,this.cellAlign=g,this.cellVAlign=h,this.fldSort=i,this._hstyles=c||[]},this._eSplit=function(a){if(![].push)return a.split(this.delim);var b="r"+(new Date).valueOf(),c=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(a||"").replace(RegExp(c,"g"),b).replace(RegExp("\\\\"+b,"g"),this.delim).split(b)},this.getColType=function(a){return this.cellType[a]},this.getColTypeById=function(a){return this.cellType[this.getColIndexById(a)]},this.setColTypes=function(a){this.cellType=dhtmlxArray(a.split(this.delim)),this._strangeParams=new Array;for(var b=0;b<this.cellType.length;b++){if(-1!=this.cellType[b].indexOf("[")){var c=this.cellType[b].split(/[\[\]]+/g);this.cellType[b]=c[0],this.defVal[b]=c[1],0==c[1].indexOf("=")&&(this.cellType[b]="math",this._strangeParams[b]=c[0])}window["eXcell_"+this.cellType[b]]||dhtmlxError.throwError("Configuration","Incorrect cell type: "+this.cellType[b],[this,this.cellType[b]])}},this.setColSorting=function(a){this.fldSort=a.split(this.delim);for(var b={str:1,"int":1,date:1},c=0;c<this.fldSort.length;c++)b[this.fldSort[c]]||"function"!=typeof window[this.fldSort[c]]||(this._customSorts||(this._customSorts=new Array),this._customSorts[c]=window[this.fldSort[c]],this.fldSort[c]="cus")},this.setColAlign=function(a){this.cellAlign=a.split(this.delim);for(var b=0;b<this.cellAlign.length;b++)this.cellAlign[b]=this.cellAlign[b]._dhx_trim()},this.setColVAlign=function(a){this.cellVAlign=a.split(this.delim)},this.setNoHeader=function(a){this.noHeader=convertStringToBoolean(a)},this.showRow=function(a){this.getRowById(a),this._h2&&this.openItem(this._h2.get[a].parent.id);for(var b=this.getRowById(a).childNodes[0];b&&"none"==b.style.display;)b=b.nextSibling;b&&this.moveToVisible(b,!0)},this.setStyle=function(a,b,c,d){this.ssModifier=[a,b,c,c,d];for(var e=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],f=0;!_isIE;){try{{document.styleSheets[f].cssRules.length}}catch(g){f++;continue}break}for(var h=0;h<e.length;h++)this.ssModifier[h]&&(_isIE?document.styleSheets[0].addRule(e[h],this.ssModifier[h]):document.styleSheets[f].insertRule(e[h]+(" { "+this.ssModifier[h]+" }"),document.styleSheets[f].cssRules.length))},this.setColumnColor=function(a){this.columnColor=a.split(this.delim)},this.enableAlterCss=function(a,b,c,d){(a||b)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss(),this._fake&&this._fake._fixAlterCss()}),this._cssSP=c,this._cssSU=d,this._cssEven=a,this._cssUnEven=b},this._fixAlterCss=function(a){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(a);if(this._cssEven||this._cssUnEven){a=a||0;for(var b=a,c=a;c<this.rowsCol.length;c++)if(this.rowsCol[c]&&"none"!=this.rowsCol[c].style.display){if(this.rowsCol[c]._cntr){b=1;continue}this.rowsCol[c].className=-1!=this.rowsCol[c].className.indexOf("rowselected")?b%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[c]._css||""):this._cssEven+" rowselected "+(this.rowsCol[c]._css||""):b%2==1?this._cssUnEven+" "+(this.rowsCol[c]._css||""):this._cssEven+" "+(this.rowsCol[c]._css||""),b++}}},this.clearChangedState=function(){for(var a=0;a<this.rowsCol.length;a++){var b=this.rowsCol[a];if(b&&b.childNodes)for(var c=b.childNodes.length,d=0;c>d;d++)b.childNodes[d].wasChanged=!1}},this.getChangedRows=function(a){var b=new Array;return this.forEachRow(function(c){var d=this.rowsAr[c];if("TR"==d.tagName){var e=d.childNodes.length;if(a&&d._added)b[b.length]=d.idd;else for(var f=0;e>f;f++)if(d.childNodes[f].wasChanged){b[b.length]=d.idd;break}}}),b.join(this.delim)},this._sUDa=!1,this._sAll=!1,this.setSerializationLevel=function(a,b,c,d,e,f){this._sUDa=a,this._sAll=b,this._sConfig=c,this._chAttr=d,this._onlChAttr=e,this._asCDATA=f},this.setSerializableColumns=function(a){if(!a)return void(this._srClmn=null);this._srClmn=(a||"").split(",");for(var b=0;b<this._srClmn.length;b++)this._srClmn[b]=convertStringToBoolean(this._srClmn[b])},this._serialise=function(){this.editStop();var a=[],b="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(b){var c=this._serializeRow(this.render_row_tree(-1,b.id));return a.push(c),c?!0:!1},this,function(){a.push(b)});else for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]){if(this._chAttr&&this.rowsBuffer[c]._locator)continue;var d=this._serializeRow(this.render_row(c));a.push(d),d&&a.push(b)}return[a.join("")]},this._serializeRow=function(a,b){var c=[],d=this.xml.row_attrs,e=this.xml.cell_attrs;if(c.push("<"+this.xml.s_row),c.push(" id='"+a.idd+"'"),this._sAll&&-1!=this.selectedRows._dhx_find(a)&&c.push(" selected='1'"),this._h2&&"minus"==this._h2.get[a.idd].state&&c.push(" open='1'"),d.length)for(var b=0;b<d.length;b++)c.push(" "+d[b]+"='"+a._attrs[d[b]]+"'");if(c.push(">"),this._sUDa&&this.UserData[a.idd]){keysAr=this.UserData[a.idd].getKeys();for(var f=0;f<keysAr.length;f++)c.push("<userdata name='"+keysAr[f]+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[a.idd].get(keysAr[f])+(this._asCDATA?"]]>":"")+"</userdata>")}for(var g=!1,h=0;h<this._cCount;h++)if(!this._srClmn||this._srClmn[h]){var i=this.cells3(a,h);if(c.push("<cell"),e.length)for(var b=0;b<e.length;b++)c.push(" "+e[b]+"='"+i.cell._attrs[e[b]]+"'");if(zxVal=i[this._agetm](),this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]>"),this._ecspn&&i.cell.colSpan&&i.cell.colSpan>1&&c.push(' colspan="'+i.cell.colSpan+'" '),this._chAttr?i.wasChanged()&&(c.push(' changed="1"'),g=!0):this._onlChAttr&&i.wasChanged()&&(g=!0),c.push(this._sAll&&"tree"==this.cellType[h]?(this._h2?" image='"+this._h2.get[a.idd].image+"'":"")+">"+zxVal+"</cell>":">"+zxVal+"</cell>"),this._ecspn&&i.cell.colSpan)for(var j=0;j<i.cell.colSpan-1;j++)c.push("<cell/>"),h++}return!this._onlChAttr||g||a._added?c.join(""):""},this._serialiseConfig=function(){for(var a="<head>",b=0;b<this.hdr.rows[0].cells.length;b++)if(!this._srClmn||this._srClmn[b]){var c=this.fldSort[b];"cus"==c&&(c=this._customSorts[b].toString(),c=c.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),a+="<column width='"+this.getColWidth(b)+"' align='"+this.cellAlign[b]+"' type='"+this.cellType[b]+"' sort='"+(c||"na")+"' color='"+this.columnColor[b]+"'"+(this.columnIds[b]?" id='"+this.columnIds[b]+"'":"")+">",a+=this._asCDATA?"<![CDATA["+this.getHeaderCol(b)+"]]>":this.getHeaderCol(b);var d=this.getCombo(b);if(d)for(var e=0;e<d.keys.length;e++)a+="<option value='"+d.keys[e]+"'>"+d.values[e]+"</option>";a+="</column>"}return a+="</head>"},this.serialize=function(){var a='<?xml version="1.0"?><rows>';if(this._agetm=this._mathSerialization?"getMathValue":"getValue",this._sUDa&&this.UserData.gridglobaluserdata)for(var b=this.UserData.gridglobaluserdata.getKeys(),c=0;c<b.length;c++)a+="<userdata name='"+b[c]+"'>"+this.UserData.gridglobaluserdata.get(b[c])+"</userdata>";return this._sConfig&&(a+=this._serialiseConfig()),a+=this._serialise(),a+="</rows>"},this.getPosition=function(a,b){if(!b){var c=getOffset(a);return[c.left,c.top]}b=b||document.body;for(var d=a,e=0,f=0;d&&d!=b;)e+=d.offsetLeft-d.scrollLeft,f+=d.offsetTop-d.scrollTop,d=d.offsetParent;return b==document.body&&(_isIE?(f+=document.body.offsetTop||document.documentElement.offsetTop,e+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(e+=document.body.offsetLeft,f+=document.body.offsetTop)),[e,f]},this.getFirstParentOfType=function(a,b){for(;a&&a.tagName!=b&&"BODY"!=a.tagName;)a=a.parentNode;return a},this.objBox.onscroll=function(){this.grid._doOnScroll()},this.objBox.ontouchend=function(){this.hdrBox.scrollLeft=this.objBox.scrollLeft},this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)},(!_isOpera||_OperaRv>8.5)&&(this.hdr.onmousemove=function(a){this.grid.changeCursorState(a||window.event)},this.hdr.onmousedown=function(a){return this.grid.startColResize(a||window.event)}),this.obj.onmousemove=this._drawTooltip,this.objBox.onclick=function(a){(a||event).cancelBubble=!0},this.obj.onclick=function(a){this.grid._doClick(a||window.event),this.grid._sclE?this.grid.editCell(a||window.event):this.grid.editStop(),(a||event).cancelBubble=!0},_isMacOS?this.entBox.oncontextmenu=function(a){a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=this.grid;return b._realfake&&(b=b._fake),b._doContClick(a||window.event)}:(this.entBox.onmousedown=function(a){return this.grid._doContClick(a||window.event)},this.entBox.oncontextmenu=function(a){return this.grid._ctmndx&&((a||event).cancelBubble=!0),!this.grid._ctmndx}),this.obj.ondblclick=function(a){if(!this.grid.wasDblClicked(a||window.event))return!1;if(this.grid._dclE){var b=this.grid.getFirstParentOfType(_isIE?event.srcElement:a.target,"TR");b==this.grid.row&&this.grid.editCell(a||window.event)}return(a||event).cancelBubble=!0,_isOpera?!1:void 0},this.hdr.onclick=this._onHeaderClick,this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])},this.hdr.ondblclick=this._onHeaderDblClick,document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,"keydown",function(a){return globalActiveDHTMLGridObject?globalActiveDHTMLGridObject.doKey(a||window.event):void 0}),document.body._dhtmlxgrid_onkeydown=!0),dhtmlxEvent(document.body,"click",function(){self.editStop&&self.editStop(),self.isActive&&self.setActive(!1)}),-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height),-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width),(this._delta_x||this._delta_y)&&this._setAutoResize(),this.setColHidden=this.setColumnsVisibility,this.enableCollSpan=this.enableColSpan,this.setMultiselect=this.enableMultiselect,this.setMultiLine=this.enableMultiline,this.deleteSelectedItem=this.deleteSelectedRows,this.getSelectedId=this.getSelectedRowId,this.getHeaderCol=this.getColumnLabel,this.isItemExists=this.doesRowExist,this.getColumnCount=this.getColumnsNum,this.setSelectedRow=this.selectRowById,this.setHeaderCol=this.setColumnLabel,this.preventIECashing=this.preventIECaching,this.enableAutoHeigth=this.enableAutoHeight,this.getUID=this.uid,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function dhtmlXGridCellObject(a){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null,null},this.cell=a,this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell.innerHTML._dhx_trim()},this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()},this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),("bold"==this.cell.style.fontWeight||"bold"==this.cell.parentNode.style.fontWeight)&&(arOut[1]="bold"),("italic"==this.cell.style.fontStyle||"italic"==this.cell.parentNode.style.fontWeight)&&(arOut[1]+="italic"),arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"",arOut.join("-")},this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"},this.getBgColor=function(){return this.cell.bgColor?this.cell.bgColor:"#FFFFFF"},this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"},this.getWidth=function(){return this.cell.scrollWidth},this.setFont=function(a){fntAr=a.split("-"),this.cell.style.fontFamily=fntAr[0],this.cell.style.fontSize=fntAr[fntAr.length-1],3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))},this.setTextColor=function(a){this.cell.style.color=a},this.setBgColor=function(a){""==a&&(a=null),this.cell.bgColor=a},this.setHorAlign=function(a){this.cell.style.textAlign=1==a.length?"c"==a?"center":"l"==a?"left":"right":a},this.wasChanged=function(){return this.cell.wasChanged?!0:!1},this.isCheckbox=function(){var a=this.cell.firstChild;return a&&"INPUT"==a.tagName?(type=a.type,"radio"==type||"checkbox"==type?!0:!1):!1},this.isChecked=function(){return this.isCheckbox()?this.cell.firstChild.checked:void 0},this.isDisabled=function(){return this.cell._disabled},this.setChecked=function(a){this.isCheckbox()&&("true"!=a&&1!=a&&(a=!1),this.cell.firstChild.checked=a)},this.setDisabled=function(a){"true"!=a&&1!=a&&(a=!1),this.isCheckbox()&&(this.cell.firstChild.disabled=a,this.disabledF&&this.disabledF(a)),this.cell._disabled=a}}function eXcell(){this.obj=null,this.val=null,this.changeState=function(){return!1},this.edit=function(){this.val=this.getValue()},this.detach=function(){return!1},this.getPosition=function(a){for(var b=a,c=0,d=0;"BODY"!=b.tagName;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;return new Array(c,d)}}function eXcell_ed(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.val=this.getValue(),this.obj=document.createElement(this.cell.atag),this.obj.setAttribute("autocomplete","off"),this.obj.style.height=this.cell.offsetHeight-(_isIE?4:4)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(a){(a||event).cancelBubble=!0},this.obj.onmousedown=function(a){(a||event).cancelBubble=!0},this.obj.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.obj),this.obj.onselectstart=function(a){return a||(a=event),a.cancelBubble=!0,!0},_isIE&&(this.obj.focus(),this.obj.blur()),this.obj.focus()},this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(a){a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0),this.setCTxtValue(a)}}function eXcell_edn(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){var a=this.obj.value;return this.setValue(a),this.val!=this.getValue()}}function eXcell_ch(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(a){a!==!0||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0)),!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.setValue("1"==this.val?"0":"1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()?!0:!1},this.setChecked=function(a){this.setValue(a.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function eXcell_ra(a){this.base=eXcell_ch,this.base(a),this.grid=a.parentNode.grid,this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")},this.changeState=function(a){(a!==!1||1!=this.getValue())&&(!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.setValue("1"==this.val?"0":"1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null))},this.edit=null}function eXcell_txt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_textarea",this.obj.onclick=function(a){(a||event).cancelBubble=!0};var a=this.grid.getPosition(this.cell);if(this.obj.value=this.val,this.obj.style.display="",this.obj.style.textAlign=this.cell.style.textAlign,_isFF){var b=document.createElement("DIV");b.appendChild(this.obj),b.style.overflow="auto",b.className="dhx_textarea",this.obj.style.margin="0px 0px 0px 0px",this.obj.style.border="0px",this.obj=b}if(document.body.appendChild(this.obj),_isOpera&&(this.obj.onkeypress=function(a){return 9==a.keyCode?!1:void 0}),this.obj.onkeydown=function(a){var b=a||event;return 9==b.keyCode?(globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:b.keyCode,shiftKey:b.shiftKey,srcElement:"0"}),!1):void 0},this.obj.style.left=a[0]+"px",this.obj.style.top=a[1]+this.cell.offsetHeight+"px",this.cell.offsetWidth<200)var c=200;else var c=this.cell.offsetWidth;this.obj.style.width=c+(_isFF?18:16)+"px",_isFF&&(this.obj.firstChild.style.width=parseInt(this.obj.style.width)+"px",this.obj.firstChild.style.height=this.obj.offsetHeight-3+"px"),_isIE&&(this.obj.select(),this.obj.value=this.obj.value),_isFF?this.obj.firstChild.focus():this.obj.focus()},this.detach=function(){var a="";return a=_isFF?this.obj.firstChild.value:this.obj.value,this.cell._clearCell=""==a?!0:!1,this.setValue(a),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()},this.getValue=function(){return this.obj?_isFF?this.obj.firstChild.value:this.obj.value:this.cell._clearCell?"":"undefined"!=typeof this.cell._brval?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(a){this.cell._brval=a,a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0),this.setCTxtValue(a)}}function eXcell_co(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0),this.shiftNext=function(){var a=this.list.options[this.list.selectedIndex+1];return a&&(a.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0},this.shiftPrev=function(){if(0!=this.list.selectedIndex){var a=this.list.options[this.list.selectedIndex-1];a&&(a.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text}return!0},this.edit=function(){this.val=this.getValue(),this.text=this.getText()._dhx_trim();var a=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_combo_edit",this.obj.style.height=this.cell.offsetHeight-4+"px",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(a){(a||event).cancelBubble=!0},this.obj.onmousedown=function(a){(a||event).cancelBubble=!0},this.obj.value=this.text,this.obj.onselectstart=function(a){return a||(a=event),a.cancelBubble=!0,!0};var b=this;this.obj.onkeyup=function(a){var c=(a||event).keyCode;if(38!=c&&40!=c&&9!=c)for(var d=this.readonly?String.fromCharCode(c):this.value,e=b.list.options,f=0;f<e.length;f++)if(0==e[f].text.indexOf(d))return e[f].selected=!0},this.list=document.createElement("SELECT"),this.list.className="dhx_combo_select",this.list.style.width=this.cell.offsetWidth+"px",this.list.style.left=a[0]+"px",this.list.style.top=a[1]+this.cell.offsetHeight+"px",this.list.onclick=function(a){var c=a||window.event,d=c.target||c.srcElement;"OPTION"==d.tagName&&(d=d.parentNode),b.editable=!1,b.grid.editStop(),c.cancelBubble=!0};for(var c=this.combo.getKeys(),d=!1,e=0,f=0;f<c.length;f++){var g=this.combo.get(c[f]);this.list.options[this.list.options.length]=new Option(g,c[f]),c[f]==this.val&&(e=this.list.options.length-1,d=!0)}0==d&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),e=this.list.options.length-1),document.body.appendChild(this.list),this.list.size="6",this.cstate=1,this.editable?this.cell.innerHTML="":(this.obj.style.width="1px",this.obj.style.height="1px"),this.cell.appendChild(this.obj),this.list.options[e].selected=!0,(!_isFF||this.editable)&&(this.obj.focus(),this.obj.focus()),this.editable||(this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(a){return a=a||window.event,b.grid.setActive(!0),a.keyCode<30?b.grid.doKey({target:b.cell,keyCode:a.keyCode,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey}):void 0})},this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value},this.detach=function(){if(this.val!=this.getValue()&&(this.cell.wasChanged=!0),null!=this.list.parentNode)if(this.editable){var a=this.list.options[this.list.selectedIndex];if(a&&a.text==this.obj.value)this.setValue(this.list.value);else{var b=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),c=b.values._dhx_find(this.obj.value);this.setValue(-1!=c?b.keys[c]:this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);return this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(a){this.base=eXcell_co,this.base(a),this.editable=!1}function eXcell_cotxt(a){this.base=eXcell_co,this.base(a)}function eXcell_corotxt(a){this.base=eXcell_co,this.base(a),this.editable=!1}function eXcell_cp(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("SPAN"),this.obj.style.border="1px solid black",this.obj.style.position="absolute";var a=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj),document.body.appendChild(this.obj),this.obj.style.left=a[0]+"px",this.obj.style.zIndex=1e3,this.obj.style.top=a[1]+this.cell.offsetHeight+"px"},this.toolDNum=function(a){return 1==a.length&&(a="0"+a),a},this.colorPanel=function(a,b){var c=document.createElement("TABLE");b.appendChild(c),c.cellSpacing=0,c.editor_obj=this,c.style.cursor="default",c.onclick=function(a){var b=a||window.event,c=b.target||b.srcElement,d=c.parentNode.parentNode.parentNode.editor_obj;d.setValue(c._bg),d.grid.editStop()};for(var d=256/a,e=0;256/d>=e;e++)for(var f=c.insertRow(e),g=0;256/d>=g;g++)for(var h=0;256/d>=h;h++){R=new Number(d*e)-(0==e?0:1),G=new Number(d*g)-(0==g?0:1),B=new Number(d*h)-(0==h?0:1);var i=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+this.toolDNum(B.toString(16)),j=f.insertCell(g);j.width="10px",j.innerHTML="&nbsp;",j.title=i.toUpperCase(),j.style.backgroundColor="#"+i,j._bg="#"+i,null!=this.val&&"#"+i.toUpperCase()==this.val.toUpperCase()&&(j.style.border="2px solid white")}},this.getValue=function(){return this.cell.firstChild._bg||""},this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))},this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))},this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))},this.detach=function(){return null!=this.obj.offsetParent&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var a=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");return a+="^"+this.cell.lnk,this.cell.trg&&(a+="^"+this.cell.trg),a}},this.isDisabled=function(){return!0}}function eXcell_price(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}function eXcell_ro(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}function eXcell_rotxt(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(a){a?this.cell._clearCell=!1:(a=" ",this.cell._clearCell=!0),this.setCTxtValue(a)},this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(a,b){for(var c=0;c<this.keys.length;c++)if(this.keys[c]==a)return this.values[c]=b,!0;this.values[this.values.length]=b,this.keys[this.keys.length]=a},this.get=function(a){for(var b=0;b<this.keys.length;b++)if(this.keys[b]==a)return this.values[b];return null},this.clear=function(){this.keys=new dhtmlxArray,this.values=new dhtmlxArray},this.remove=function(a){for(var b=0;b<this.keys.length;b++)if(this.keys[b]==a)return this.keys._dhx_removeAt(b),this.values._dhx_removeAt(b),!0},this.size=function(){for(var a=0,b=0;b<this.keys.length;b++)null!=this.keys[b]&&a++;return a},this.getKeys=function(){for(var a=new Array(0),b=0;b<this.keys.length;b++)null!=this.keys[b]&&(a[a.length]=this.keys[b]);return a},this.save=function(){this._save=new Array;for(var a=0;a<this.keys.length;a++)this._save[a]=[this.keys[a],this.values[a]]},this.restore=function(){if(this._save){this.keys[a]=new Array,this.values[a]=new Array;for(var a=0;a<this._save.length;a++)this.keys[a]=this._save[a][0],this.values[a]=this._save[a][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dragContext(a,b,c,d,e,f,g,h,i,j){return this.source=a||"grid",this.target=b||"grid",this.mode=c||"move",this.dropmode=d||"child",this.sid=e||0,this.tid=f,this.sobj=g||null,this.tobj=h||null,this.sExtra=i||null,this.tExtra=j||null,this
}function eXcell_stree(a){if(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._sub_trees)return;if(this._sub=this.grid._sub_trees[a._cellIndex],!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val},this.setValue=function(a){this.cell._val=a,a=this._sub.getItemText(this.cell._val),this.setCValue(a||"&nbsp;",a)},this.edit=function(){this._sub.parentObject.style.display="block";var a=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=a[1]+"px",this._sub.parentObject.style.left=a[0]+"px",this._sub.parentObject.style.position="absolute";var b=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=b},this.detach=function(){if(this._sub.parentObject.style.display="none",null!=this.grid._sub_id){var a=this.cell._val;return this.setValue(this._sub.getSelectedItemId()),this.grid._sub_id=null,this.cell._val!=a}}}function eXcell_link(a){this.cell=a,this.grid=this.cell.parentNode.grid,this.isDisabled=function(){return!0},this.edit=function(){},this.getValue=function(){if(this.cell.firstChild.getAttribute){var a=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(a?"^"+a:"")}return""},this.setValue=function(a){if("number"!=typeof a&&(!a||""==a.toString()._dhx_trim()))return this.setCValue("&nbsp;",b),this.cell._clearCell=!0;var b=a.split("^");1==b.length?b[1]="":b.length>1&&(b[1]="href='"+b[1]+"'",b[1]+=3==b.length?" target='"+b[2]+"'":" target='_blank'"),this.setCValue("<a "+b[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+b[0]+"</a>",b)}}function eXcell_grid(a){if(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._sub_grids)return;if(this._sub=this.grid._sub_grids[a._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return this.cell.val},this.setValue=function(a){this.cell.val=a,this._sub.getRowById(a)&&(a=this._sub.cells(a,this._sindex),a=a?a.getValue():""),this.setCValue(a||"&nbsp;",a)},this.edit=function(){this.val=this.cell.val,this._sub.entBox.style.display="block";var a=this.grid.getPosition(this.cell);this._sub.entBox.style.top=a[1]+"px",this._sub.entBox.style.left=a[0]+"px",this._sub.entBox.style.position="absolute",this._sub.setSizes();var b=this.grid.editStop;this.grid.editStop=function(){},this._sub.getRowById(this.cell.val)&&this._sub.setSelectedRow(this.cell.val),this._sub.setActive(!0),this.grid.editStop=b},this.detach=function(){var a=this.cell.val;return this._sub.entBox.style.display="none",null===this._sub.getSelectedId()?!1:(this.setValue(this._sub.getSelectedId()),this.grid.setActive(!0),this.cell.val!=a)}}function eXcell_dhxCalendar(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var b=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[b]);var c=this.grid;b.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){c.editStop()},1),!0});var d=function(a){(a||event).cancelBubble=!0};dhtmlxEvent(b.base,"click",d),b=null}}function eXcell_dhxCalendarA(a){if(a&&(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var b=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[b]);var c=this.grid;b.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){c.editStop()},1),!0});var d=function(a){(a||event).cancelBubble=!0};dhtmlxEvent(b.base,"click",d)}}function eXcell_cntr(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEn",function(){this.resetCounter(a._cellIndex)});var b=function(){var b=this;return window.setTimeout(function(){b.resetCounter&&(b._fake&&!b._realfake&&a._cellIndex<b._fake._cCount?b._fake.resetCounter(a._cellIndex):b.resetCounter(a._cellIndex))},1),!0};this.grid.attachEvent("onBeforeSorting",b),this.grid.attachEvent("onFilterEnd",b)}this.edit=function(){},this.getValue=function(){return this.cell.innerHTML},this.setValue=function(){this.cell.style.paddingRight="2px";var a=this.cell;window.setTimeout(function(){if(a.parentNode){var b=a.parentNode.rowIndex;(a.parentNode.grid.currentPage||0>b||a.parentNode.grid._srnd)&&(b=a.parentNode.grid.rowsBuffer._dhx_find(a.parentNode)+1),0>=b||(a.innerHTML=b,a.parentNode.grid._fake&&a._cellIndex<a.parentNode.grid._fake._cCount&&a.parentNode.grid._fake.rowsAr[a.parentNode.idd]&&a.parentNode.grid._fake.cells(a.parentNode.idd,a._cellIndex).setCValue(b),a=null)}},100)}}function eXcell_acheck(a){try{this.cell=a,this.grid=this.cell.parentNode.grid,this.cell.obj=this}catch(b){}this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.setValue("1"==this.val?"<checkbox state='false'>":"<checkbox state='true'>"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){try{return this.cell.chstate.toString()}catch(a){return null}},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()?!0:!1},this.setChecked=function(a){this.setValue(a.toString())},this.detach=function(){return this.val!=this.getValue()},this.drawCurrentState=function(){return 1==this.cell.chstate?"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>":"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}function eXcell_context(a){if(a){if(this.cell=a,this.grid=this.cell.parentNode.grid,!this.grid._sub_context)return;if(this._sub=this.grid._sub_context[a._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(a){this.cell._val=a;var b=this._sub.itemPull[this._sub.idPrefix+this.cell._val];a=b?b.title:a,this.setCValue(a||"&nbsp;",a)},this.edit=function(){var a=this.grid.getPosition(this.cell);this._sub.showContextMenu(a[0]+this.cell.offsetWidth,a[1]);var b=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=b},this.detach=function(){if(null!=this.grid._sub_id){var a=this.cell._val;return this.setValue(this.grid._sub_id),this.grid._sub_id=null,this.cell._val!=a}this._sub.hideContextMenu()}}function eXcell_hwch(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.disabledF=function(a){this.cell.innerHTML=1==a||1==a?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(a){if(a!==!0||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!1)),this.grid.isEditable&&!this.cell.parentNode._locked&&!this.isDisabled())if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])){this.val=this.getValue(),this.setValue("1"==this.val?"0":"1");var b=this.grid.getCheckedRows(0),c=b.split(",");if("0"==this.val)for(var d=0;d<c.length;d++)this.cell.parentNode.className=this.cell.parentNode.className+" rowselected";else-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.parentNode.className=this.cell.parentNode.className.replace(/rowselected/g,""));this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])}else this.editor=null},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()?!0:!1},this.setChecked=function(a){this.setValue(a.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function dhtmlXGridFromTable(obj,init){"object"!=typeof obj&&(obj=document.getElementById(obj));var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?obj.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).width:obj.currentStyle?obj.currentStyle.width:0)),w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?obj.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).height:obj.currentStyle?obj.currentStyle.height:0)),w.className=obj.className,obj.className="",obj.id&&(w.id=obj.id);var mr=obj,drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||"name_"+(new Date).valueOf(),windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit"),acs2=mr.getAttribute("oninit");acs&&eval(acs),windowf.setImagePath(windowf.imgURL||mr.getAttribute("imgpath")||mr.getAttribute("image_path")||"");var skin=mr.getAttribute("skin");skin&&windowf.setSkin(skin),init&&init(windowf);for(var hrow=mr.rows[0],za="",zb="",zc="",zd="",ze="",i=0;i<hrow.cells.length;i++){za+=(za?",":"")+hrow.cells[i].innerHTML;var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null).width:hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0);zb+=(zb?",":"")+("*"==width?width:parseInt(width)),zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left"),zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed"),ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");f_a&&(-1!=hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")?windowf._dtmask=f_a:windowf.setNumberFormat(f_a,i))}windowf.setHeader(za),windowf.setInitWidths(zb),windowf.setColAlign(zc),windowf.setColTypes(zd),windowf.setColSorting(ze),"auto"==obj.getAttribute("gridHeight")&&windowf.enableAutoHeigth(!0),obj.getAttribute("multiline")&&windowf.enableMultiline(!0);var lmn=mr.getAttribute("lightnavigation");lmn&&windowf.enableLightMouseNavigation(lmn);var evr=mr.getAttribute("evenrow"),uevr=mr.getAttribute("unevenrow");return(evr||uevr)&&windowf.enableAlterCss(evr,uevr),drag&&windowf.enableDragAndDrop(!0),windowf.init(),obj.getAttribute("split")&&windowf.splitAt(obj.getAttribute("split")),windowf._process_inner_html(mr,1),acs2&&eval(acs2),obj.parentNode&&obj.parentNode.removeChild&&obj.parentNode.removeChild(obj),windowf}function eXcell_math(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){this.grid.editor=new eXcell_ed(this.cell),this.grid.editor.fix_self=!0,this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue,this.grid.editor.setValue=this.setValue,this.grid.editor.edit()},this.isDisabled=function(){return!this.grid._mathEdit},this.setValue=function(a){a=this.grid._compileSCL(a,this.cell,this.fix_self),this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(a):(this.setCValue(a),this.cell._clearCell=!1)},this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}function eXcell_time(a){this.base=eXcell_ed,this.base(a),this.getValue=function(){return this.cell.innerHTML.toString()},this.setValue=function(a){var b=new RegExp(" ","i");if(a=a.replace(b,":"),""==a)a="00:00";else{var b=new RegExp("[a-zA-Z]","i"),c=a.match(b);if(c)a="00:00";else{var b=new RegExp("[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+","i"),c=a.search(b);if(-1!=c){var b=new RegExp("[\\./\\;\\-\\,\\_\\]\\[ \\?]","i");a=a.replace(b,":")}else{var b=new RegExp("[^0-9]","i");if(res1=a.search(b),c=a.match(b))a="00:00";else if(1==a.length)a="00:0"+a;else if(parseInt(a)<60)a="00:"+a;else if(a.length<5){var d=parseInt(a),e=Math.floor(d/60);d-=60*e;for(var e=e.toString(),d=d.toString();e.length<2;)e="0"+e;for(;d.length<2;)d="0"+d;a=e+":"+d}}}}this.cell.innerHTML=a}}function eXcell_sub_row(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")},this._setState=function(a,b){(b||this.cell).innerHTML="<img src='"+this.grid.imgURL+a+"' width='18' height='18' />",(b||this.cell).firstChild.onclick=this.grid._expandMonolite},this.open=function(){this.cell.firstChild.onclick(null,!0)},this.close=function(){this.cell.firstChild.onclick(null,!1,!0)},this.isOpen=function(){return!!this.cell.parentNode._expanded},this.setValue=function(a){a&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a),this._setState(a?"plus.gif":"blank.gif")},this.setContent=function(a){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=a,this.resize()):(this.cell._previous_content=null,this.setValue(a),this.cell._sub_row_type=null)},this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)},this.isDisabled=function(){return!0},this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}function eXcell_sub_row_ajax(a){this.base=eXcell_sub_row,this.base(a),this.setValue=function(a){a&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a),this.cell._sub_row_type="ajax",this.cell._previous_content=null,this._setState(a?"plus.gif":"blank.gif")}}function eXcell_sub_row_grid(a){this.base=eXcell_sub_row,this.base(a),this.setValue=function(a){a&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",a),this.cell._sub_row_type="grid",this._setState(a?"plus.gif":"blank.gif")},this.getSubGrid=function(){return a._sub_grid?a._sub_grid:null}}function eXcell_ra_str(a){a&&(this.base=eXcell_ra,this.base(a),this.grid=a.parentNode.grid)}function eXcell_combo(a){a&&(this.cell=a,this.grid=a.parentNode.grid,this._combo_pre="",this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL),this.val=this.getValue();var a=this.getText();this.cell._clearCell&&(a=""),this.cell.innerHTML="",this.combo=this.cell._brval?this.cell._brval:(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex],this.cell.appendChild(this.combo.DOMParent),this.combo.DOMParent.style.margin="0",this.combo.DOMelem_input.focus(),this.combo.setSize(this.cell.offsetWidth-2),this.combo._xml?this.combo.setComboText(a):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(a)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(a).value)):this.combo.setComboText(a),this.combo.openSelect()},this.selectComboOption=function(a,b){b.selectOption(b.getIndexByValue(b.getOptionByLabel(a).value))},this.getValue=function(){return this.cell.combo_value||""},this.getText=function(){var a=this.cell;return""==this._combo_pre&&a.childNodes[1]?a=a.childNodes[1]:a.childNodes[0].childNodes[1],_isIE?a.innerText:a.textContent},this.setValue=function(a){if("object"==typeof a){this.cell._brval=this.initCombo();var b=this.cell._cellIndex,c=this.cell.parentNode.idd;a.firstChild?this.cell.combo_value=a.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0),this.setComboOptions(this.cell._brval,a,this.grid,b,c)}else{this.cell.combo_value=a;var d=null;(d=this.cell._brval)&&"object"==typeof this.cell._brval?a=(d.getOption(a)||{}).text||a:(d=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(d=this.grid._fake._col_combos[this.cell._cellIndex]))&&(a=(d.getOption(a)||{}).text||a),""==(a||"").toString()._dhx_trim()&&(a=null),null!==a?this.setComboCValue(a):(this.setComboCValue("&nbsp;",""),this.cell._clearCell=!0)}},this.detach=function(){this.cell.removeChild(this.combo.DOMParent);var a=this.cell.combo_value;return this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("&nbsp;"),this.cell._clearCell=!0),this.combo._confirmSelect(),this.cell.combo_value=this.combo.getActualValue(),this.combo.closeAll(),this.grid._still_active=!0,this.grid.setActive(1),a!=this.cell.combo_value})}function eXcell_clist(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue();var a=this.cell._combo||this.grid.clists[this.cell._cellIndex];if(a){this.obj=document.createElement("DIV");for(var b=this.val.split(","),c="",d=0;d<a.length;d++){for(var e=!1,f=0;f<b.length;f++)a[d]==b[f]&&(e=!0);c+=e?"<div><input type='checkbox' id='dhx_clist_"+d+"' checked='true' /><label for='dhx_clist_"+d+"'>"+a[d]+"</label></div>":"<div><input type='checkbox' id='dhx_clist_"+d+"'/><label for='dhx_clist_"+d+"'>"+a[d]+"</label></div>"}c+="<div><input type='button' value='"+(this.grid.applyButtonText||"Apply")+"' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>",this.obj.editor=this,this.obj.innerHTML=c,document.body.appendChild(this.obj),this.obj.style.position="absolute",this.obj.className="dhx_clist",this.obj.onclick=function(a){return(a||event).cancelBubble=!0,!0};var g=this.grid.getPosition(this.cell);this.obj.style.left=g[0]+"px",this.obj.style.top=g[1]+this.cell.offsetHeight+"px",this.obj.getValue=function(){for(var a="",b=0;b<this.childNodes.length-1;b++)this.childNodes[b].childNodes[0].checked&&(a&&(a+=","),a+=this.childNodes[b].childNodes[1].innerHTML);return a.replace(/&amp;/g,"&")}}},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g,"&")},this.detach=function(){return this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null),this.val!=this.getValue()}}function eXcell_calck(a){try{this.cell=a,this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue();var a=this.grid.getPosition(this.cell);this.obj=new calcX(a[0],a[1]+this.cell.offsetHeight,this,this.val)},this.getValue=function(){return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){return this.obj&&(this.setValue(this.obj.inputZone.value),this.obj.removeSelf()),this.obj=null,this.val!=this.getValue()}}function calcX(left,top,onReturnSub,val){if(this.top=top||0,this.left=left||0,this.onReturnSub=onReturnSub||null,this.operandA=0,this.operandB=0,this.operatorA="",this.state=0,this.dotState=0,this.calckGo=function(){return eval(this.operandA+"*1"+this.operatorA+this.operandB+"*1")},this.isNumeric=function(a){return-1==a.search(/[^1234567890]/gi)?!0:!1},this.isOperation=function(a){return-1==a.search(/[^\+\*\-\/]/gi)?!0:!1},this.onCalcKey=function(a){that=this.calk;var b=this.innerHTML,c=that.inputZone;0!=that.state&&2!=that.state||!that.isNumeric(b)||("0"!=c.value?c.value+=b:c.value=b),0!=that.state&&2!=that.state||"."!=b||0!=that.dotState||(that.dotState=1,c.value+=b),"C"==b&&(c.value=0,that.dotState=0,that.state=0),0==that.state&&that.isOperation(b)&&(that.operatorA=b,that.operandA=c.value,that.state=1),2==that.state&&that.isOperation(b)&&(that.operandB=c.value,c.value=that.calckGo(),that.operatorA=b,that.operandA=c.value,that.state=1),2==that.state&&"="==b&&(that.operandB=c.value,c.value=that.calckGo(),that.operatorA=b,that.operandA=c.value,that.state=3),1==that.state&&that.isNumeric(b)&&(c.value=b,that.state=2,that.dotState=0),3==that.state&&that.isNumeric(b)&&(c.value=b,that.state=0),3==that.state&&that.isOperation(b)&&(that.operatorA=b,that.operandA=c.value,that.state=1),"e"==b&&(c.value=Math.E,1==that.state&&(that.state=2),that.dotState=0),"p"==b&&(c.value=Math.PI,1==that.state&&(that.state=2),that.dotState=0),"Off"==b&&that.topNod.parentNode.removeChild(that.topNod),(a||event)&&((a||event).cancelBubble=!0)},this.sendResult=function(){if(that=this.calk,2==that.state){var a=that.inputZone;that.operandB=a.value,a.value=that.calckGo(),that.operatorA=b,that.operandA=a.value,that.state=3}var b=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod),that.onReturnSub.grid.editStop(!1)},this.removeSelf=function(){this.topNod.parentNode&&this.topNod.parentNode.removeChild(this.topNod)},this.keyDown=function(){this.className="calcPressed"},this.keyUp=function(){this.className="calcButton"},this.init_table=function(){var a=this.topNod.childNodes[0];if(a&&"TABLE"==a.tagName){for(i=1;i<a.childNodes[0].childNodes.length;i++)for(j=0;j<a.childNodes[0].childNodes[i].childNodes.length;j++)a.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey,a.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown,a.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp,a.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp,a.childNodes[0].childNodes[i].childNodes[j].calk=this;this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0],this.onReturnSub?(this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult,this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this):this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=""}},this.drawSelf=function(){var a=document.createElement("div");a.className="calcTable",a.style.position="absolute",a.style.top=this.top+"px",a.style.left=this.left+"px",a.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden;'><input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'></td><td class='calkSubmit'>=</td></tr></table></td></tr><tr><td class='calcButton' width='25%'>Off</td><td class='calcButton' width='25%'>p</td><td class='calcButton' width='25%'>e</td><td class='calcButton' width='25%'>/</td></tr><tr><td class='calcButton'>7</td><td class='calcButton'>8</td><td class='calcButton'>9</td><td class='calcButton'>*</td></tr><tr><td class='calcButton'>4</td><td class='calcButton'>5</td><td class='calcButton'>6</td><td class='calcButton'>+</td></tr><tr><td class='calcButton'>1</td><td class='calcButton'>2</td><td class='calcButton'>3</td><td class='calcButton'>-</td></tr><tr><td class='calcButton'>0</td><td class='calcButton'>.</td><td class='calcButton'>C</td><td class='calcButton'>=</td></tr></table>",a.onclick=function(a){(a||event).cancelBubble=!0},document.body.appendChild(a),this.topNod=a},this.drawSelf(),this.init_table(),val){var rZone=this.inputZone;rZone.value=1*val,this.operandA=1*val,this.state=3}return this}function dhtmlxHierarchy(){var a={id:0,childs:[],level:-1,parent:null,index:0,state:dhtmlXGridObject._emptyLineImg};return this.order=[a],this.get={0:a},this.swap=function(a,b){var c=a.parent,d=a.index;c.childs[d]=b,c.childs[b.index]=a,a.index=b.index,b.index=d},this.forEachChildF=function(a,b,c,d){for(var e=this.get[a],f=0;f<e.childs.length;f++)b.apply(c||this,[e.childs[f]])&&(e.childs[f].childs.length&&this.forEachChildF(e.childs[f].id,b,c,d),d&&d.call(c||this,e.childs[f]))},this.forEachChild=function(a,b,c){for(var d=this.get[a],e=0;e<d.childs.length;e++)b.apply(c||this,[d.childs[e]]),d.childs[e].childs.length&&this.forEachChild(d.childs[e].id,b,c)},this.change=function(a,b,c){var d=this.get[a];d[b]!=c&&(d[b]=c,d.update=!0)},this.add=function(a,b){return this.addAfter(a,b)},this.addAfter=function(a,b,c,d){var e=this.get[b||0];if(c)var f=this.get[c].index+(d?0:1);else var f=e.childs.length;var g={id:a,childs:[],level:e.level+1,parent:e,index:f,state:dhtmlXGridObject._emptyLineImg};if(e.state==dhtmlXGridObject._emptyLineImg&&this.change(b,"state",0==b?"minus":"plus"),c){for(var h=f;h<e.childs.length;h++)e.childs[h].index++;e.childs=e.childs.slice(0,f).concat([g]).concat(e.childs.slice(f,e.childs.length))}else e.childs.push(g);return this.get[a]=g,g},this.addBefore=function(a,b,c){return this.addAfter(a,b,c,!0)},this.remove=function(a){for(var b=this.get[a||0],c=0;c<b.childs.length;c++)this.deleteAll(b.childs[c].id);b.childs=[],b.parent.childs=b.parent.childs.slice(0,b.index).concat(b.parent.childs.slice(b.index+1));for(var c=b.index;c<b.parent.childs.length;c++)b.parent.childs[c].index--;delete this.get[a]},this.deleteAll=function(a){for(var b=this.get[a||0],c=0;c<b.childs.length;c++)this.deleteAll(b.childs[c].id);b.childs=[],delete this.get[a]},this}function eXcell_tree(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.isDisabled=function(){return this.cell._disabled||this.grid._edtc},this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'></"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(a){(a||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(a){return a||(a=event),a.cancelBubble=!0,!0},this.er.className+=" editable",this.er.firstChild.onclick=function(a){(a||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())},this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value),this.er.className=this.er.className.replace("editable","");var a=this.val!=this.er.innerHTML;return this.obj=this.er=null,a}},this.getValue=function(){return this.getLabel()},this.setImage=function(a){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+a,this.grid._h2.get[this.cell.parentNode.idd].image=a},this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image},this.setLabel=function(a){this.setValueA(a)},this.getLabel=function(){return this.cell.parentNode.valTag.innerHTML}}function dhtmlXForm(a,b,c){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20},this.idef_const={offsetNested:20},this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"},this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var d=this;this.setSkin=function(a){this.skin=a,this.cont.className="dhxform_obj_"+this.skin,this.cont.style.fontSize="dhx_terrace"==a?"13px":"12px",this._updateBlocks(),this.forEachItem(function(b){var c=d.getItemType(b);"undefined"!=typeof d.items[c]&&"function"==typeof d.items[c].setSkin&&d.doWithItem(b,"setSkin",a)})},this.skin=c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"dhx_skyblue",this.separator=",",this.live_validate=!1,this._type="checkbox",this._rGroup="default",this._idIndex={},this._indexId=[],this.cont="object"==typeof a?a:document.getElementById(a),a._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize="dhx_terrace"==this.skin?"13px":"12px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(a){this.cont.style.fontSize=a,this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(a){if(a=a||event,13==a.keyCode){var b=a.target||a.srcElement;if("undefined"!=typeof b.tagName&&"textarea"==String(b.tagName).toLowerCase()&&!a.ctrlKey)return;d.callEvent("onEnter",[])}}),this.b_index=null,this.base=[],this._prepare=function(a,b){null==this.b_index?this.b_index=0:this.b_index++;var c=null,d=null;if(null!=b){0>b&&(b=0);for(var e=0,f=0;f<this.cont.childNodes.length;f++)for(var g=0;g<this.cont.childNodes[f].childNodes.length;g++)null==d&&1!=this.cont.childNodes[f].childNodes[g]._isNestedForm&&(e==b&&(c=this.cont.childNodes[f].nextSibling,d=this.cont.childNodes[f].childNodes[g]),e++)}if(this.base[this.b_index]=document.createElement("DIV"),this.base[this.b_index].className="dhxform_base","undefined"!=typeof a&&(this.base[this.b_index].style.cssText+=" margin-left:"+a+"px!important;"),null!=c?(this.cont.insertBefore(this.base[this.b_index],c),c=null):this.cont.appendChild(this.base[this.b_index]),null!=d)for(;null!=d;){var h=d;d=d.nextSibling,this.base[this.b_index].appendChild(h),h=null}},this.setSizes=function(){},this._mergeSettings=function(a){var b=-1,c={type:"settings"};for(var d in this.idef)c[d]=this.idef[d];for(var e=0;e<a.length;e++)if("undefined"!=typeof a[e]&&"settings"==a[e].type){for(var d in a[e])c[d]=a[e][d];b=e}return a[b>=0?b:a.length]=c,a},this._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b},this.idPrefix="dhxForm_"+this._genStr(12)+"_",this._rId=this._parentForm?this._genStr(12)+"_":a._rId,this.objPull={},this.itemPull={},this._ic=0,this._addItem=function(a,b,c,e,f,g,h){if(this.items[a]._index&&(this.getForm()._indexId.push(b),this.getForm()._idIndex[b]={ind:this.getForm()._indexId.length-1}),a||(a=this._type),"list"==a&&null!=f&&null!=this.itemPull[this.idPrefix+f]&&"function"==typeof this.itemPull[this.idPrefix+f]._addSubListNode)var i=this.itemPull[this.idPrefix+f]._addSubListNode();else if("newcolumn"==a)var i={};else{var j=this.base[this.b_index],k=null;if("undefined"==typeof g||isNaN(g)||"list"==a){if("list"==a)for(var l in this.itemPull)l==this.idPrefix+b&&(k=this.itemPull[l].nextSibling,null!=this.itemPull[l]._listBase&&this.itemPull[l]._listBase.length>0&&(k=this.itemPull[l]._listBase[this.itemPull[l]._listBase.length-1]))}else{g=Math.max(parseInt(g),0)+1;for(var m=0;m<this.cont.childNodes.length;m++)for(var n=0;n<this.cont.childNodes[m].childNodes.length;n++)null==k&&1!=this.cont.childNodes[m].childNodes[n]._isNestedForm&&(g--,0==g&&(k=this.cont.childNodes[m].childNodes[n],j=this.cont.childNodes[m]))}var i=document.createElement("DIV");1==h&&null!=k&&(k=k.nextSibling),null!=k?j.insertBefore(i,k):j.appendChild(i)}if(i._idd=b,i._rId=this._rId,"undefined"!=typeof i.style){"undefined"==typeof c.offsetLeft&&this.idef.offsetLeft>0&&(c.offsetLeft=this.idef.offsetLeft),"undefined"==typeof c.offsetTop&&this.idef.offsetTop>0&&(c.offsetTop=this.idef.offsetTop);var o="";"undefined"!=typeof c.offsetLeft&&(o+=" padding-left:"+c.offsetLeft+"px!important;"),"undefined"!=typeof c.offsetTop&&(o+=" padding-top:"+c.offsetTop+"px!important;"),i.style.cssText+=o
}if("block"==a&&isNaN(c.blockOffset)&&(c.blockOffset=this.idef.blockOffset),"list"==a){"undefined"==typeof i._ofsNested&&(i._ofsNested=this.idef_const.offsetNested),null!=e&&(i._sId=e);var p=this.items[a].render(i,this.skin);return this.itemPull[this.idPrefix+b]._listObj||(this.itemPull[this.idPrefix+b]._listObj=[]),this.itemPull[this.idPrefix+b]._list||(this.itemPull[this.idPrefix+b]._list=[]),this.itemPull[this.idPrefix+b]._listBase||(this.itemPull[this.idPrefix+b]._listBase=[]),this.itemPull[this.idPrefix+b]._listObj.push(p[0]),this.itemPull[this.idPrefix+b]._list.push(p[1]),this.itemPull[this.idPrefix+b]._listBase.push(i),p[1].checkEvent=function(a){return d.checkEvent(a)},p[1].callEvent=function(a,b){return d.callEvent(a,b)},p[1].getForm=function(){return d.getForm()},p[1]._initObj(this._mergeSettings(c)),i._inBlcok&&(i.className+=" in_block"),p[1]}if("newcolumn"==a)return void this._prepare(c.offset,g);if("label"==a&&0==this._ic++&&(c._isTopmost=!0),c.position=this.apos_css[c.position&&this.apos_css[c.position]?c.position:this.idef.position],i.className=c.position+("string"==typeof c.className?" "+c.className:""),c.labelWidth||(c.labelWidth=this.idef.labelWidth),c.labelHeight||(c.labelHeight=this.idef.labelHeight),"undefined"!=typeof c.wrap&&(c.wrap=window.dhx4.s2b(c.wrap)),c.labelAlign=this.align_css[c.labelAlign]?this.align_css[c.labelAlign]:this.align_css[this.idef.labelAlign],c.inputWidth=c.width?c.width:c.inputWidth?c.inputWidth:this.idef.inputWidth,c.inputHeight||(c.inputHeight=this.idef.inputHeight),"undefined"!=typeof c.note&&(null!=c.note.length&&null!=c.note[0]&&(c.note=c.note[0]),"undefined"==typeof c.note.width&&(c.note.width=this.idef.noteWidth),"auto"==c.note.width&&(c.note.width=c.inputWidth)),i.checkEvent=function(a){return d.checkEvent(a)},i.callEvent=function(a,b){return d.callEvent(a,b)},i.getForm=function(){return d.getForm()},i._autoCheck=function(a){d._autoCheck(a)},"string"==typeof c.readonly&&(c.readonly=window.dhx4.s2b(c.readonly)),"string"==typeof c.autoStart&&(c.autoStart=window.dhx4.s2b(c.autoStart)),"string"==typeof c.autoRemove&&(c.autoRemove=window.dhx4.s2b(c.autoRemove)),"string"==typeof c.titleScreen&&(c.titleScreen=window.dhx4.s2b(c.titleScreen)),"string"==typeof c.info&&(c.info=window.dhx4.s2b(c.info)),"string"==typeof c.hidden&&(c.hidden=window.dhx4.s2b(c.hidden)),"string"==typeof c.checked&&(c.checked=window.dhx4.s2b(c.checked)),"undefined"!=typeof c.userdata)for(var l in c.userdata)this.getForm().setUserData(b,l,c.userdata[l]);if(c.validate&&(i._validate="function"==typeof c.validate||"function"==typeof window[c.validate]?[c.validate]:String(c.validate).split(this.separator)),"undefined"!=typeof c.required&&("string"==typeof c.required&&(c.required=window.dhx4.s2b(c.required)),i._required=1==c.required),i._required){i._validate||(i._validate=[]);var q=!1;for(n=0;n<i._validate.length;n++)q=q||"NotEmpty"==i._validate[n];q||i._validate.push("NotEmpty")}i._ll=c.position==this.apos_css["label-left"]||c.position==this.apos_css["label-top"],this.objPull[this.idPrefix+b]=this.items[a].render(i,c),this.itemPull[this.idPrefix+b]=i},this._initObj=function(a,b){if("undefined"!=typeof a.data){var c=null;return"undefined"!=typeof b&&(c=b.match(/(\?|\&)id\=([a-z0-9_\-]*)/i),null!=c&&null!=c[0]&&(c=c[0].split("=")[1])),void(this.callEvent("onBeforeDataLoad",[c,window.dhx4._copyObj(a.data)])===!0&&(this.formId=c,this._last_load_data=a,this.setFormData(a.data),this.resetDataProcessor("updated")))}this._prepare();for(var d=0;d<a.length;d++)if("undefined"!=typeof a[d]&&"settings"==a[d].type)for(var e in a[d])this.idef[e]=a[d][e];for(var d=0;d<a.length;d++)this._prepareItem(a[d]);this._autoCheck()},this._prepareItem=function(a,b,c){var d=null!=a&&null!=a.type?a.type:"";if(this.items[d]){a.name||(a.name=this._genStr(12));var e=a.name;(null!=this.objPull[this.idPrefix+e]||"radio"==d)&&(e=this._genStr(12));var f=a;f.label=f.label||"",f.value=f.value,f.checked=window.dhx4.s2b(f.checked),f.disabled=window.dhx4.s2b(f.disabled),f.name=f.name||this._genStr(12),f.options=f.options||[],f.rows=f.rows||"none",f.uid=this._genStr(12),this._addItem(d,e,f,null,null,b,c),b=null,this._parentEnabled===!1&&this._disableItem(e);for(var g=0;g<f.options.length;g++)if(null!=f.options[g].list){f.options[g].value||(f.options[g].value=this._genStr());var h=this._addItem("list",e,f.options[g].list,f.options[g].value,null);h._subSelect=!0,h._subSelectId=f.options[g].value}if(null!=a.list){a.listParent||(a.listParent=f.name);var h=this._addItem("list",e,a.list,null,a.listParent)}}},this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"},this._xmlToObject=function(a,b){if("undefined"==typeof b&&(b=!0),b){var c=a.getElementsByTagName("items");c=null!=c&&null!=c[0]?c[0]:null;var d=a.getElementsByTagName("data");d=null!=d&&null!=d[0]?d[0]:null}else c=a;var e=b?[]:{};if(null!=c)for(var f=0;f<c.childNodes.length;f++)if("undefined"!=typeof c.childNodes[f].tagName){var g=c.childNodes[f].tagName;if(null!=this._xmlSubItems[g]){var h=this._xmlSubItems[g];"undefined"==typeof e[h]&&(e[h]=[]);for(var i={},j=0;j<c.childNodes[f].attributes.length;j++){var k=c.childNodes[f].attributes[j].name,l=c.childNodes[f].attributes[j].value;i[k]=l}"note"==h&&(i.text=c.childNodes[f].firstChild.nodeValue),"_userdata"==h&&(i.value=c.childNodes[f].firstChild.nodeValue);var m=this._xmlToObject(c.childNodes[f],!1);for(var n in m)if("_userdata"==n){i.userdata||(i.userdata={});for(var j=0;j<m[n].length;j++)i.userdata[m[n][j].name]=m[n][j].value}else i[n]=m[n];b?e.push(i):e[h].push(i)}}if(null!=d){e={data:{}};for(var f=0;f<d.childNodes.length;f++)if("undefined"!=typeof d.childNodes[f].tagName){var o=d.childNodes[f].tagName,p=null!=d.childNodes[f].firstChild?d.childNodes[f].firstChild.nodeValue:"";e.data[o]=p}}return e},this._autoCheck=function(a){this._locked===!0?a=!1:"undefined"==typeof a&&(a=!0);for(var b in this.itemPull){var c=a&&this.itemPull[b]._udis!==!0;this[c?"_enableItem":"_disableItem"](this.itemPull[b]._idd),null!=this.getForm()._idIndex[this.itemPull[b]._idd]&&(this.getForm()._idIndex[this.itemPull[b]._idd].enabled=c);var d=c&&("boolean"==typeof this.itemPull[b]._checked?this.itemPull[b]._checked:!0);if(this.itemPull[b]._list)for(var e=0;e<this.itemPull[b]._list.length;e++){var f=!0;if(1==this.itemPull[b]._list[e]._subSelect){f=!1;var g=this.getItemValue(this.itemPull[b]._idd);("object"!=typeof g||"number"!=typeof g.length)&&(g=[g]);for(var h=0;h<g.length;h++)f=g[h]==this.itemPull[b]._list[e]._subSelectId||f;this.itemPull[b]._listObj[e][f?"show":"hide"](this.itemPull[b]._listBase[e])}this.itemPull[b]._list[e]._autoCheck(d&&f)}}},this.doWithItem=function(a,b,c,d,e,f){if("object"!=typeof a){if(this.itemPull[this.idPrefix+a])return this.objPull[this.idPrefix+a][b](this.itemPull[this.idPrefix+a],c,d,e,f);var g=null;for(var h in this.itemPull)if(this.itemPull[h]._list&&!g)for(var i=0;i<this.itemPull[h]._list.length;i++)null==g&&(g=this.itemPull[h]._list[i].doWithItem(a,b,c,d,e,f));return g}var j=a[0],k=a[1],g=null;for(var h in this.itemPull){if((this.itemPull[h]._value==k||null===k)&&this.itemPull[h]._group==j)return this.objPull[h][b](this.itemPull[h],c,d,e,f);if(null!=this.itemPull[h]._list&&!g)for(var i=0;i<this.itemPull[h]._list.length;i++)g=this.itemPull[h]._list[i].doWithItem(a,b,c,d,e)}return null!=g?g:"getType"==b?this.doWithItem(a[0],"getType"):void 0},this._removeItem=function(a,b){null!=b?a=this.doWithItem([a,b],"destruct"):this.doWithItem(a,"destruct"),this._clearItemData(a)},this._clearItemData=function(a){if(this.itemPull[this.idPrefix+a]){a=this.idPrefix+a;try{this.objPull[a]=null,this.itemPull[a]=null,delete this.objPull[a],delete this.itemPull[a]}catch(b){}}else for(var c in this.itemPull)if(this.itemPull[c]._list)for(var d=0;d<this.itemPull[c]._list.length;d++)this.itemPull[c]._list[d]._clearItemData(a)},this.isItem=function(a,b){return null!=b&&(a=[a,b]),this.doWithItem(a,"isExist")},this.getItemType=function(a,b){return a=[a,b||null],this.doWithItem(a,"getType")},this.forEachItem=function(a){for(var b in this.objPull)if("radio"==this.objPull[b].t?a(this.itemPull[b]._group,this.itemPull[b]._value):a(String(b).replace(this.idPrefix,"")),this.itemPull[b]._list)for(var c=0;c<this.itemPull[b]._list.length;c++)this.itemPull[b]._list[c].forEachItem(a)},this.setItemLabel=function(a,b,c){null!=c?a=[a,b]:c=b,this.doWithItem(a,"setText",c)},this.getItemLabel=function(a,b){return null!=b&&(a=[a,b]),this.doWithItem(a,"getText")},this._enableItem=function(a){this.doWithItem(a,"enable")},this._disableItem=function(a){this.doWithItem(a,"disable")},this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")},this.checkItem=function(a,b){null!=b&&(a=[a,b]),this.doWithItem(a,"check"),this._autoCheck()},this.uncheckItem=function(a,b){null!=b&&(a=[a,b]),this.doWithItem(a,"unCheck"),this._autoCheck()},this.isItemChecked=function(a,b){return null!=b&&(a=[a,b]),this.doWithItem(a,"isChecked")},this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")},this._getRGroup=function(a,b){for(var c in this.itemPull){if(this.itemPull[c]._group==a&&(null==b||this.itemPull[c]._value==b))return this.itemPull[c]._idd;if(null!=this.itemPull[c]._list)for(var d=0;d<this.itemPull[c]._list.length;d++){var e=this.itemPull[c]._list[d]._getRGroup(a,b);if(null!=e)return e}}return null},this.setItemValue=function(a,b){return"radio"==this.getItemType(a)?(null!=this._getRGroup(a,b)?this.checkItem(a,b):this.uncheckItem(a,this.getCheckedValue(a)),null):this.doWithItem(a,"setValue",b)},this.getItemValue=function(a,b){return"radio"==this.getItemType(a)?this.getCheckedValue(a):this.doWithItem(a,"getValue",b)},this.updateValues=function(){this._updateValues()},this.showItem=function(a,b){null!=b&&(a=[a,b]),this.doWithItem(a,"show")},this.hideItem=function(a,b){null!=b&&(a=[a,b]),this.doWithItem(a,"hide")},this.isItemHidden=function(a,b){return null!=b&&(a=[a,b]),this.doWithItem(a,"isHidden")},this.getOptions=function(a){return this.doWithItem(a,"getOptions")},this.setItemWidth=function(a,b){this.doWithItem(a,"setWidth",b)},this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")},this.setItemHeight=function(a,b){this.doWithItem(a,"setHeight",b)},this.setItemFocus=function(a,b){null!=b&&(a=[a,b]),this.doWithItem(a,"setFocus")},this._updateValues=function(){for(var a in this.itemPull)if(this.objPull[a]&&"function"==typeof this.objPull[a].updateValue&&this.objPull[a].updateValue(this.itemPull[a]),this.itemPull[a]._list)for(var b=0;b<this.itemPull[a]._list.length;b++)this.itemPull[a]._list[b]._updateValues()},this._getItemByName=function(a){for(var b in this.itemPull){if(this.itemPull[b]._idd==a)return this.itemPull[b];if(null!=this.itemPull[b]._list)for(var c=0;c<this.itemPull[b]._list.length;c++){var d=this.itemPull[b]._list[c]._getItemByName(a);if(null!=d)return d}}return null},this._resetValidateCss=function(a){a.className=a.className.replace(a._vcss,""),a._vcss=null},this.setValidateCss=function(a,b,c){var d=this["radio"==this.getItemType(a)?"_getRGroup":"_getItemByName"](a);d&&(null!=d._vcss&&this._resetValidateCss(d),d._vcss="string"==typeof c?c:"validate_"+(b===!0?"ok":"error"),d.className+=" "+d._vcss)},this.resetValidateCss=function(){for(var a in this.itemPull)if(null!=this.itemPull[a]._vcss&&this._resetValidateCss(this.itemPull[a]),null!=this.itemPull[a]._list)for(var b=0;b<this.itemPull[a]._list.length;b++)this.itemPull[a]._list[b].resetValidateCss()},this.validate=function(){if(0!=this.callEvent("onBeforeValidate",[])){var a=!0;return this.forEachItem(function(b,c){"undefined"!=typeof c&&(b=[b,c]);var e=d.doWithItem(b,"_validate");"boolean"!=typeof e&&(e=!0),a=e&&a}),this.callEvent("onAfterValidate",[a]),a}},this.validateItem=function(a,b){return"undefined"!=typeof b&&(a=[a,b]),this.doWithItem(a,"_validate")},this.enableLiveValidation=function(a){this.live_validate=1==a},this.setReadonly=function(a,b){this.doWithItem(a,"setReadonly",b)},this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")},this.getFirstActive=function(a){for(var b=0;b<this._indexId.length;b++){var c=!0;if(1==a){var d=this.getItemType(this._indexId[b]);dhtmlXForm.prototype.items[d].setFocus||(c=!1)}if(c&&this._idIndex[this._indexId[b]].enabled)return this._indexId[b]}return null},this.setFocusOnFirstActive=function(){var a=this.getFirstActive(!0);null!=a&&this.setItemFocus(a)},this.enableItem=function(a,b){null!=b&&(a=[a,b]),this.doWithItem(a,"userEnable"),this._autoCheck()},this.disableItem=function(a,b){null!=b&&(a=[a,b]),this.doWithItem(a,"userDisable"),this._autoCheck()},this.isItemEnabled=function(a,b){return null!=b&&(a=[a,b]),this.doWithItem(a,"isUserEnabled")},this.clear=function(){var a={};this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted");for(var b in this.itemPull){var c=this.itemPull[b]._idd;if("ch"==this.itemPull[b]._type&&this.uncheckItem(c),this.itemPull[b]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(c,""),"combo"==this.itemPull[b]._type){this.itemPull[b]._apiChange=!0;var d=this.getCombo(c);d.selectOption(0),d=null,this.itemPull[b]._apiChange=!1}if("se"==this.itemPull[b]._type){var e=this.getOptions(c);e.length>0&&(e[0].selected=!0)}if("ra"==this.itemPull[b]._type){var f=this.itemPull[b]._group;a[f]||(this.checkItem(f,this.doWithItem(c,"_getFirstValue")),a[f]=!0)}if(this.itemPull[b]._list)for(var g=0;g<this.itemPull[b]._list.length;g++)this.itemPull[b]._list[g].clear();this["setFormData_"+this.itemPull[b]._type]&&this["setFormData_"+this.itemPull[b]._type](c,"")}a=null,this._parentForm&&this._autoCheck(),this.resetValidateCss()},this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear");for(var a in this.objPull)this._removeItem(String(a).replace(this.idPrefix,""));this._ccTm&&window.clearTimeout(this._ccTm),this._formLS=null;for(var b=0;b<this.base.length;b++){for(;this.base[b].childNodes.length>0;)this.base[b].removeChild(this.base[b].childNodes[0]);this.base[b].parentNode&&this.base[b].parentNode.removeChild(this.base[b]),this.base[b]=null}this.base=null,this.cont.onkeypress=null,this.cont.className="",this.cont=null;for(var a in this)this[a]=null;d=null};for(var e in this.items)this.items[e].t=e,"undefined"==typeof this.items[e]._index&&(this.items[e]._index=!0),this.items[e].show||(this.items[e].show=function(a){if(a.style.display="",a._listObj)for(var b=0;b<a._listObj.length;b++)a._listObj[b].show(a._listBase[b])}),this.items[e].hide||(this.items[e].hide=function(a){if(a.style.display="none",a._listObj)for(var b=0;b<a._listObj.length;b++)a._listObj[b].hide(a._listBase[b])}),this.items[e].isHidden||(this.items[e].isHidden=function(a){return"none"==a.style.display}),this.items[e].userEnable||(this.items[e].userEnable=function(a){a._udis=!1}),this.items[e].userDisable||(this.items[e].userDisable=function(a){a._udis=!0}),this.items[e].isUserEnabled||(this.items[e].isUserEnabled=function(a){return a._udis!==!0}),this.items[e].getType||(this.items[e].getType=function(){return this.t}),this.items[e].isExist||(this.items[e].isExist=function(){return!0}),this.items[e]._validate||(this.items[e]._validate=function(a){if(!a._validate||!a._enabled)return!0;if("ch"==a._type)var b=this.isChecked(a)?this.getValue(a):0;else var b=this.getValue(a);for(var c=!0,d=0;d<a._validate.length;d++){var e="is"+a._validate[d];if(null!=b&&0!=b.length||"isNotEmpty"==e||"container"==a._type){var f=dhtmlxValidation[e];"container"==a._type&&"function"==typeof f&&(f=function(){return!0}),"function"!=typeof f&&"function"==typeof a._validate[d]&&(f=a._validate[d]),"function"!=typeof f&&"function"==typeof window[a._validate[d]]&&(f=window[a._validate[d]]),c=("function"==typeof f?f(b,a._idd):new RegExp(a._validate[d]).test(b))&&c,f=null}else;}return a.callEvent("onValidate"+(c?"Success":"Error"),[a._idd,b,c])!==!1&&a.getForm().setValidateCss(a._idd,c),c});return this._locked=!1,this._doLock=function(a){var b=a===!0?!0:!1;this._locked!=b&&(this._locked=b,this._autoCheck(!this._locked))},this.lock=function(){this._doLock(!0)},this.unlock=function(){this._doLock(!1)},this.isLocked=function(){return this._locked},this.setNumberFormat=function(a,b,c,d){return this.doWithItem(a,"setNumberFormat",b,c,d)},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:!0,data:!0}),window.dhx4._eventable(this),this.attachEvent("_onButtonClick",function(a,b){this.callEvent("onButtonClick",[a,b])}),this._updateBlocks=function(){this.forEachItem(function(a){("block"==d.getItemType(a)||"combo"==d.getItemType(a))&&d.doWithItem(a,"_setCss",d.skin,d.cont.style.fontSize)})},this._isObj=function(a){return null!=a&&"object"==typeof a&&"undefined"==typeof a.length},this._copyObj=function(a){if(this._isObj(a)){var b={};for(var c in a)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c]}else for(var b=[],c=0;c<a.length;c++)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c];return b},null!=b&&"object"==typeof b&&this._initObj(this._copyObj(b)),this._parentForm&&this._updateBlocks(),this._ccActive=!1,this._ccTm=null,this}function dhtmlXFileUploader(p,swfPath,swfUrl,mode,swfLogs,slXap,slUrl,slLogs,multiple){var that=this;if("string"==typeof mode&&"function"==typeof this[mode])this.engine=mode;else{this.engine="html4";var k=null;if("undefined"!=typeof window.FormData&&"undefined"!=typeof window.XMLHttpRequest&&(k=new XMLHttpRequest,"undefined"==typeof k.upload&&(k=null)),null!=k)this.engine="html5";else if("undefined"!=typeof window.swfobject||k===!1){var k=swfobject.getFlashPlayerVersion();k.major>=10&&(this.engine="flash")}else this._sl_v=this.getSLVersion(),this._sl_v&&(this.engine="sl");k=null}"string"==typeof p&&(p=document.getElementById(p)),this._upload_mp="undefined"!=typeof multiple?1==multiple:!0,this._upload_dnd=!0,this._swf_file_url=swfPath||"",this._swf_upolad_url=swfUrl||"",this._swf_logs=swfLogs,this._sl_xap=slXap,this._sl_upload_url=slUrl,this._sl_logs=slLogs,this.p=document.createElement("DIV"),this.p.className+=" dhx_file_uploader",p.appendChild(this.p),this.p_files=document.createElement("DIV"),this.p_files.className="dhx_upload_files",this.p.appendChild(this.p_files),this.p_controls=document.createElement("DIV"),this.p_controls.className="dhx_upload_controls",this.p.appendChild(this.p_controls),this._files={},this._items={},this._data={},this._autoStart=!1,this._autoRemove=!1,this._titleScreen=!0,this._enabled=!0,this._uploaded_count=0,this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){that._enabled&&(that._uploading||that._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){that._enabled&&(that._uploadStop(),that._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){that._enabled&&that.clear()},tooltip:"Clear list"}},this.buttons={};for(var a in this.b_opts){var b=document.createElement("DIV");b.innerHTML="&nbsp;",b.className="dhx_file_uploader_button button_"+a,b.onclick=this.b_opts[a].onclick,this.b_opts[a].tooltip&&(b.title=this.b_opts[a].tooltip),this.p_controls.appendChild(b),this.buttons[a]=b,b=null}this.buttons.cancel.style.display="none"},this._readableSize=function(a){for(var b=!1,c=["b","Kb","Mb","Gb","Tb","Pb","Eb"],d=0;d<c.length;d++)a>1024?a/=1024:b===!1&&(b=d);return b===!1&&(b=c.length-1),Math.round(100*a)/100+" "+c[b]},this._beforeAddFileToList=function(a,b){return this.callEvent("onBeforeFileAdd",[a,b])===!0},this._addFileToList=function(a,b,c,d,e){this._checkTitleScreen();var f=document.createElement("DIV");f._idd=a,f.className="dhx_file dhx_file_"+d,f.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+e+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>",this.p_files.appendChild(f),f.childNodes[0].style.width=f.offsetWidth-127+"px",this._items[a]=f,this._updateFileNameSize(a),f.childNodes[2].onclick=function(){if(that._enabled){var a=this.parentNode._idd;that._removeFileFromQueue(a)}},this.callEvent("onFileAdd",[b])},this._removeFileFromList=function(a){this._items[a]&&(this._items[a].childNodes[2].onclick=null,this._items[a].parentNode.removeChild(this._items[a]),this._items[a]=null,delete this._items[a],this._data[a]&&(this._data[a]=null,delete this._data[a]),this._checkTitleScreen())},this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(isNaN(this._files[a].size)?"&nbsp;":" ("+this._readableSize(this._files[a].size)+")"),this._items[a].childNodes[0].title=this._files[a].name+(isNaN(this._files[a].size)?"":" ("+this._readableSize(this._files[a].size)+")")},this._updateFileInList=function(a,b,c){this._items[a]&&(this._items[a].className="dhx_file dhx_file_"+b,this._updateProgress(a,b,c),this._updateFileNameSize(a))},this._updateProgress=function(a,b,c){"uploading"==b&&100>c&&"loader"==this._progress_type?(this._items[a].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[a].childNodes[1].innerHTML="&nbsp;"):(this._items[a].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[a].childNodes[1].innerHTML=c+"%"),this._updateFileNameSize(a)},this._removeFilesByState=function(a){for(var b in this._files)(a===!0||this._files[b].state==a)&&this._removeFileFromQueue(b)},this._switchButton=function(a){if(1==a)this.buttons.upload.style.display="none",this.buttons.cancel.style.display="";else{var b=this._uploaded_count;this.buttons.upload.style.display="",this.buttons.cancel.style.display="none",this._uploaded_count=0,b>0&&this.callEvent("onUploadComplete",[b])}},this._uploadStart=function(){if(this._switchButton(!0),!this._uploading)for(var a in this._files)"fail"==this._files[a].state&&(this._files[a].state="added",this._updateFileInList(a,"added",0));this._uploading=!0;var b=!1;for(var a in this._files)b||"added"!=[this._files[a].state]||(b=!0,this._files[a].state="uploading",this._updateFileInList(a,"uploading",0),this._doUploadFile(a));b||(this._uploading=!1,this._switchButton(!1))},this._onUploadSuccess=function(id,serverName,r,extra){if("undefined"!=typeof r&&"flash"==this.engine){dhx4.temp=null;try{eval("dhx4.temp="+r.data)}catch(e){dhx4.temp=null}var t=dhx4.temp;if(dhx4.temp=null,null==t||1!=t.state||null==t.name)return void this._onUploadFail(id,null!=t&&null!=t.extra?t.extra:null);serverName=t.name,null!=t.extra&&(extra=t.extra)}this._uploaded_count++,this._data[id]={realName:this._files[id].name,serverName:serverName},this._files[id].state="uploaded",this._updateFileInList(id,"uploaded",100),this.callEvent("onUploadFile",[this._files[id].name,serverName,extra]),this._autoRemove&&this._removeFileFromQueue(id),this._uploading&&this._uploadStart()},this._onUploadFail=function(a,b){this._files[a].state="fail",this._updateFileInList(a,"fail",0),this.callEvent("onUploadFail",[this._files[a].name,b]),this._uploading&&this._uploadStart()},this._onUploadAbort=function(a){this._uploading=!1,this._files[a].state="added",this._updateFileInList(a,"added",0),this.callEvent("onUploadCancel",[this._files[a].name])},this._checkTitleScreen=function(){var a=0;for(var b in this._files)a++;0==a&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen&&(this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"),(a>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0&&(this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML="")},this.callEvent=function(){},this.upload=function(){this._uploading||this._uploadStart()},this.setAutoStart=function(a){this._autoStart=1==a},this.setAutoRemove=function(a){this._autoRemove=1==a},this.enableTitleScreen=function(a){this._titleScreen=1==a,this._checkTitleScreen()},this.setTitleText=function(a){this._titleText=a,this.p.className.search("dhx_file_uploader_title")>=0&&(this.buttons.info.innerHTML=this._titleText)},this.setURL=function(a){this._url=a},this.setSWFURL=function(a){this._swf_upolad_url=a},this.enable=function(){this._enabled=!0,this.p_files.className="dhx_upload_files",this.p_controls.className="dhx_upload_controls"},this.disable=function(){this._enabled=!1,this.p_files.className="dhx_upload_files dhx_uploader_dis",this.p_controls.className="dhx_upload_controls dhx_uploader_dis"},this.getStatus=function(){var a=0;for(var b in this._files){if("uploaded"!=this._files[b].state)return-1;a=1}return a},this.getData=function(){return this._data},this.clear=function(){this.callEvent("onBeforeClear",[])===!0&&(this._uploading&&that._uploadStop(),that._switchButton(!1),that._removeFilesByState(!0),this.callEvent("onClear",[]))},this.unload=function(){this._removeFilesByState(!0),this._data=null,this._files=null,this._items=null,this._unloadEngine();for(var a in this.buttons)this.buttons[a].onclick=null,this.buttons[a].parentNode.removeChild(this.buttons[a]),this.buttons[a]=null,delete this.buttons[a];this.buttons=null;for(var a in this.b_opts)this.b_opts[a].onclick=null,this.b_opts[a]=null,delete this.b_opts[a];this.b_opts=null,this.p_controls.parentNode.removeChild(this.p_controls),this.p_files.parentNode.removeChild(this.p_files),this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var a in this)this[a]=null;that=a=null};var e=new this[this.engine];for(var a in e)this[a]=e[a],e[a]=null;return a=e=p=null,this._initToolbar(),this._initEngine(),this._checkTitleScreen(),this}function dhtmlXAccordion(a,b){var c=this,d=window.dhx4.transDetect();this.conf={skin:b||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxacc")||"dhx_skyblue",icons_path:"",multi_mode:!1,last_opened:null,on_active_id:null,on_active_click:!1,size_changed:!0,def_height:90,total_count:0,hiden_count:0,base_w:null,fs_mode:!1,fs_tm:null,fs_base_ofs:{w:2,h:2}},this.conf.tr={prop:d.transProp,ev:d.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4",dnd_top:"top 0.16s"},this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between:-1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}}}},this.conf.tr.height_open=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0?this.conf.tr.height_close:this.conf.tr.height_close;var e=null;if("object"==typeof a&&!a.tagName){e={};for(var f in a)e[f]=a[f],a[f]=null;a=e.parent,e.parent=null}if(a==document.body)document.documentElement.className+=" dhxacc_fullscreen",document.body.className+=" dhxacc_fullscreen",this.conf.fs_mode=!0,this.base=document.createElement("DIV"),this.base.className="dhxacc_base_"+this.conf.skin,this.base.style.position="absolute",this.base.style.left=this.conf.fs_base_ofs.w+"px",this.base.style.top=this.conf.fs_base_ofs.h+"px",document.body.appendChild(this.base);else for(this.base="string"==typeof a?document.getElementById(a):a,a=null,this.base.className+=" dhxacc_base_"+this.conf.skin;this.base.childNodes.length>0;)this.base.removeChild(this.base.lastChild);if(null!=this.base._ofs)for(var g in this.ofs.base)if(null!=this.base._ofs[g])for(var f in this.base._ofs[g])this.ofs.base[g][f]=this.base._ofs[g][f];return this._applyOffsets=function(){for(var a in this.ofs.def){var b=this.ofs.def[a],c=null!=this.ofs.skin[this.conf.skin]&&null!=this.ofs.skin[this.conf.skin][a]?this.ofs.skin[this.conf.skin][a]:null,d=null!=this.base._ofs?this.base._ofs[a]:null;for(var e in b)this.ofs[a][e]=null!=c&&null!=c[e]?c[e]:null!=d&&null!=d[e]?d[e]:b[e]}},this._applyOffsets(),this.t={},this.addItem=function(a,b,d,e,f){for(null==a&&(a="a"+window.dhx4.newId());null!=this.t[a];)a="a"+window.dhx4.newId();var g=new dhtmlXAccordionCell(a,this);if(g.conf.skin=this.conf.skin,g.setText(b),null!=f&&g.setIcon(f),g.cell._accId=a,g.cell.childNodes[g.conf.idx.hdr].onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},g.cell.childNodes[g.conf.idx.hdr].onclick=function(a){if(a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,null==c._dnd||1!=c._dnd.ofs){for(var b=a.target||a.srcElement,d=null;b._accId!=this&&null==d;)null!=b._accId?d=b._accId:b=b.parentNode;null!=d&&c._hdrClick(d)}},this.t[a]={cell:g},this.conf.total_count++,this.conf.multi_mode)"undefined"==typeof d&&(d=!0),this.base.appendChild(g.cell),g.conf.opened=1==d,"undefined"==typeof e||null==e||"*"==e?("*"==e&&(g.conf.h_auto=!0),e=this.conf.def_height):e=Math.max(parseInt(e),30),g._setSize(this.ofs.m.left,0,this.conf.base_w||this._getAvailItemWidth(),g.conf.opened?e:g._getHdrHeight()),g.cell.style.marginTop=(g.cell==this.base.firstChild?this.ofs.m.first:this.ofs.m.between)+"px",1!=d&&(g.conf.size.h=e,g._adjustCell(),g.cell.className+=" dhx_cell_closed"),this._adjustOpened(),null!=this._dnd&&this._dndAttachEvent(a);else{d=null==this.conf.last_opened?!0:window.dhx4.s2b(d);var h=this._updateCellsHeight();if(null!=this.conf.last_opened)if(d)this._closeItem(this.conf.last_opened,!1);else{var i=this.t[this.conf.last_opened].cell;i._setSize(i.conf.size.x,i.conf.size.y,i.conf.size.w,h),i=null}this.base.appendChild(g.cell),g.conf.opened=d,g.cell.style.marginTop=String(g.cell==this.base.firstChild?this.ofs.s.first:this.ofs.s.between)+"px",g._setSize(this.ofs.s.left,0,this.conf.base_w||this._getAvailItemWidth(),d?h:g._getHdrHeight()),d?this.conf.last_opened=a:(g.conf.size.h=h,g._adjustCell(),g.cell.className+=" dhx_cell_closed")}return g=null,this.t[a].cell},this.removeItem=function(a){this.t[a]&&(this.conf.last_opened==a&&(this.conf.last_opened=null),this.conf.on_active_id==a&&(this.conf.on_active_id=null),null!=this._dnd&&this._dndClearCell(a),this.conf.total_count--,this.conf.multi_mode||this.t[a].cell.conf.visible||this.conf.hiden_count--,this.t[a].cell._unload(),this.t[a].cell=null,this.t[a]=null,delete this.t[a],this.conf.unloading||(this.conf.multi_mode||this._updateCellsMargin(),this.setSizes()))},this.cells=function(a){return this.t[a].cell},this.enableMultiMode=function(a,b){this.conf.multi_mode=!0,isNaN(b)||(this.conf.def_height=b),"auto"==a||"scroll"==a?(this.base.style.overflowX="hidden",this.base.style.overflowY=a):this.base.style.overflow="visible"},this.forEachItem=function(a){for(var b in this.t)"function"==typeof a?a.apply(this,[this.t[b].cell]):"string"==typeof a&&"function"==typeof window[a]&&window[a].apply(this,[this.t[b].cell])},this._openItem=function(a,b){"undefined"==typeof b&&(b=!0),0==this.t[a].cell.conf.opened&&(this.conf.multi_mode?this.t[a].cell._open(b):0==this.conf.tr.prop?(null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(!1),this.t[a].cell._open(!1),this.conf.last_opened=a):(this.conf.on_active_id=a,this.t[a].cell._open(b),null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(b),this.conf.last_opened=a))},this._closeItem=function(a,b){"undefined"==typeof b&&(b=!0),1==this.t[a].cell.conf.opened&&(this.t[a].cell._close(b),this.conf.last_opened=null)},this._adjustOpened=function(){if(1==this.conf.multi_mode){if(null==this._openCache){var a=this._getDynData();for(var b in a)this.t[b].cell.conf.size.h=a[b],this.t[b].cell.cell.style.height=a[b]+"px"}else{var c=!1;for(var b in this._openCache)c=c||this._openCache[b];if(1==c)return;this._openCache=this._openId=null}var d=this._getAvailItemWidth();for(var b in this.t){var e=!0;d!=this.t[b].cell.conf.size.w||"close"!=this._openMode&&0!=this.t[b].cell.conf.opened||(e=!1),e&&this.t[b].cell._setWidth(d)}this._openMode=null}else if(null!=this.conf.last_opened){var f=this.conf.last_opened;this.t[f].cell._setSize(this.t[f].cell.conf.size.x,this.t[f].cell.conf.size.y,this.t[f].cell.conf.size.w,this.t[f].cell.conf.size.h)
}},this._getDynData=function(a,b){("undefined"==typeof a||null==a)&&(a={}),("undefined"==typeof b||null==b)&&(b={});for(var c={},d=0,e=0,f=0,g=0;g<this.base.childNodes.length;g++){var h=this.base.childNodes[g]._accId,i=this.t[h].cell;if(1==i.conf.visible){var j=this.ofs.m[0==f?"first":"between"];if(1==a[h]||1==b[h]||1==i.conf.opened&&1==i.conf.h_auto)if(1==b[h]){var k=i._getHdrHeight();c[h]=k,e+=k+j}else 1==i.conf.h_auto?(c[h]=!0,e+=j,d++):1==a[h]&&(c[h]=i.conf.size.h,e+=i.conf.size.h+j);else e+=i.cell.offsetHeight+j;f++}i=null}if(d>0){var l=this.base.offsetHeight-e,e=Math.floor(l/d);for(var m in c)1==c[m]&&(d>1?l-=e:e=l,c[m]=e,d--)}return c},this._adjustBase=function(){this.conf.fs_mode&&(this.base.style.width=document.body.offsetWidth-2*this.conf.fs_base_ofs.w+"px",this.base.style.height=document.body.offsetHeight-2*this.conf.fs_base_ofs.h+"px")},this.setSizes=function(){if(this._adjustBase(),1==this.conf.multi_mode)this._adjustOpened();else{this.conf.base_w=null;var a=this._updateCellsHeight();for(var b in this.t)this.t[b].cell._setSize(this.ofs.s.left,0,this.conf.base_w||this._getAvailItemWidth(),this.t[b].cell.conf.opened?a:this.t[b].cell._getHdrHeight()),this.t[b].cell.conf.opened||(this.t[b].cell.conf.size.h=a,this.t[b].cell._adjustCell());this.conf.size_changed=!0}},this.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("\\s{1,}dhxacc_base_"+this.conf.skin+"\\s{0,}$")," dhxacc_base_"+a),this.conf.skin=a;for(var b in this.t)this.t[b].cell.conf.cells_cont=null,this.t[b].cell.conf.skin=this.conf.skin;this._applyOffsets(),this._updateCellsMargin(),this.setSizes()},this.setIconsPath=function(a){this.conf.icons_path=a},this._getAvailItemWidth=function(){var a=this.ofs[this.conf.multi_mode?"m":"s"],b=Math.max(this.base.clientWidth-a.left-a.right,10);return this.conf.base_w=b,a=null,b},this._updateCellsHeight=function(){if(1!=this.conf.multi_mode){var a=this.conf.total_count-this.conf.hiden_count,b=this.base.offsetHeight-this.ofs.s.last;if(0==a)return b;for(var c=!1,d=0;d<this.base.childNodes.length;d++)if(0==c){var e=this.base.childNodes[d]._accId;this.t[e].cell.conf.visible&&(b-=this.t[e].cell._getHdrHeight()*(a-1),c=!0)}b-=(a-1)*this.ofs.s.between+this.ofs.s.first;for(var f in this.t)null!=this.t[f].cell.conf.size&&(this.t[f].cell.conf.size.h=b,this.t[f].cell._adjustCell());return b}},this._updateCellsMargin=function(){for(var a=0,b=0;b<this.base.childNodes.length;b++){var c=this.base.childNodes[b]._accId;this.t[c].cell.conf.visible&&(this.t[c].cell.cell.style.marginTop=String(this.ofs[this.conf.multi_mode?"m":"s"][0==a++?"first":"between"])+"px")}},this._hdrClick=function(a){if(this.conf.multi_mode||!this.t[a].cell.conf.opened){var b=this.t[a].cell.conf.opened;this.callEvent("onBeforeActive",[a,b?!1:!0])===!0&&(this.conf.on_active_click=!0,this[b?"_closeItem":"_openItem"](a),this.conf.multi_mode&&0==this.conf.tr.prop&&this._adjustOpened())}},this.unload=function(){this.conf.unloading=!0;for(var a in this.t)this.removeItem(a);this.t=null,"function"==typeof this._unloadDND&&this._unloadDND(),this.conf.fs_mode&&(this.conf.fs_tm&&window.clearTimeout(this.conf.fs_tm),window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart),this._doOnResizeStart=null,this._doOnResizeEnd=null,this.conf.fs_tm=null),this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.base.className=String(this.base.className).replace(new RegExp("\\s{1,}dhxacc_base_"+this.conf.skin+"\\s{0,}$"),""),this.base=null,this.ofs=this.conf=null;for(var a in this)this[a]=null;c=null},this.setOffset=function(a){this.ofs.s.between=a,this.ofs.m.between=a,this._updateCellsMargin(),this.setSizes()},this._initObj=function(a){if(null!=a.skin&&this.setSkin(a.skin),window.dhx4.s2b(a.multi_mode)&&this.enableMultiMode(),null!=a.icons_path&&this.setIconsPath(a.icons_path),null!=a.icon_path&&this.setIconsPath(a.icon_path),null!=a.items)for(var b=0;b<a.items.length;b++)this.addItem(a.items[b].id,a.items[b].text,a.items[b].open,a.items[b].height,a.items[b].icon||a.items[b].img);1==window.dhx4.s2b(a.dnd)&&"function"==typeof this.enableDND&&this.enableDND()},this._xmlToObj=function(a){var b={items:[]},c=a.getElementsByTagName("accordion")[0];null!=c.getAttribute("skin")&&(b.skin=c.getAttribute("skin")),"multi"==c.getAttribute("mode")&&(b.multi_mode=!0),null!=c.getAttribute("multiMode")&&(b.multi_mode=window.dhx4.s2b(c.getAttribute("multiMode"))),null!=c.getAttribute("iconsPath")&&(b.icons_path=c.getAttribute("iconsPath"));for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d];if("undefined"!=typeof e.tagName&&"cell"==String(e.tagName).toLowerCase()){var f={};null!=e.getAttribute("id")&&(f.id=e.getAttribute("id")),null!=e.getAttribute("icon")&&(f.icon=e.getAttribute("icon")),null!=e.getAttribute("height")&&(f.height=e.getAttribute("height")),null!=e.getAttribute("open")&&(f.open=window.dhx4.s2b(e.getAttribute("open"))),f.text=e.firstChild.nodeValue,b.items.push(f)}e=null}return b},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","accordion",{struct:!0}),window.dhx4._eventable(this),this._callMainEvent=function(a,b){return this.callEvent(a,b)},this.attachEvent("onActive",function(a){null!=this.t[a].cell.dataObj&&"editor"==this.t[a].cell.dataType&&this.t[a].cell.dataObj._prepareContent(!0),1==this.t[a].cell.conf.opened&&this.t[a].cell._adjustProgress()}),this.conf.fs_mode&&(this._adjustBase(),this.conf.fs_tm=null,this._doOnResizeStart=function(){c.conf.fs_tm&&window.clearTimeout(c.conf.fs_tm),c.conf.fs_tm=window.setTimeout(c._doOnResizeEnd,200)},this._doOnResizeEnd=function(){c.setSizes()},window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart)),"function"==typeof window.dhtmlXWindows&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin)),null!=e&&(this._initObj(e),e=null),this}function dhtmlXAccordionCell(a,b){dhtmlXCellObject.apply(this,[a,"_acc"]),this.acc=b,this.conf.visible=!0,this.conf.docked=!0,this.attachEvent("_onCellUnload",function(){this._trDetachEv(),this._unloadDocking(),this.acc=null,this.cell._accObj=null,this.cell.childNodes[this.conf.idx.hdr].onselectstart=null,this.cell.childNodes[this.conf.idx.hdr].onclick=null,this._initHeader=null,this._getHdrHeight=null,this._setWidth=null,this._adjustCell=null,this._open=null,this._close=null,this._isOpened=null,this._trInitEv=null,this._trAttachEv=null,this._trDetachEv=null,this._trOnEnd=null,this._onActiveCall=null,this.setText=null,this.getText=null,this.setIcon=null,this.clearIcon=null,this.show=null,this.hide=null,this.isVisible=null,this.setHeight=null,this.moveOnTop=null}),this.attachEvent("_onContentLoaded",function(){this.acc._callMainEvent("onContentLoaded",arguments)}),this._initHeader(),this.conf.tr={};for(var c in this.acc.conf.tr)this.conf.tr[c]=this.acc.conf.tr[c];return 0!=this.conf.tr.prop&&this.attachEvent("_onIdxUpdated",function(){this._cellSetOpacity(this.conf.opened?"open":"close",!1)}),this.open=function(){this.acc._openItem(this._idd)},this.close=function(){this.acc._closeItem(this._idd)},this._setWidth=function(a){a!=this.conf.size.w&&(this.conf.size.w=a,this.cell.style.width=a+"px"),this._adjustCell()},this._adjustCell=function(){this._adjustCont(),null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&this.dataObj.setSizes()},this._initDocking(),this}function dhtmlXLayoutObject(a,b,c){var d=null;if(null!=a&&"object"==typeof a&&"undefined"==typeof a.tagName&&1!=a._isCell&&(d={},null!=a.autosize&&(d.autosize=a.autosize),null!=a.cells&&(d.cells=a.cells),null!=a.pattern&&(b=a.pattern),null!=a.skin&&(c=a.skin),null!=a.offsets&&(d.offsets=a.offsets),a=a.parent),a==document.body)this.base=a;else if("string"==typeof a)this.base=document.getElementById(a);else{if(1==a._isCell){var e="undefined"!=typeof d&&null!=d?d:{};null==e.pattern&&null!=b&&(e.pattern=b),null==e.skin&&null!=c&&(e.skin=c);var f=a.attachLayout(e);return f}this.base=a}if(this.base!=document.body)for(;this.base.childNodes.length>0;)this.base.removeChild(this.base.lastChild);if(this.cdata={},this.conf={skin:c||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"dhx_skyblue",hh:20,progress:!1,autosize:"b",nextCell:{a:"b",b:"a"},ofs:{t:0,b:0,l:0,r:0},ofs_nodes:{t:{},b:{}},inited:!1,b_size:{w:-1,h:-1}},this.conf.sw=this._detectSW(),this.base.className+=" dhxlayout_base_"+this.conf.skin,this.base==document.body){var g={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.conf.ofs=null!=g[this.conf.skin]?g[this.conf.skin]:g.dhx_skyblue}null!=d&&null!=d.offsets?this.setOffsets(d.offsets):null!=this.base._ofs&&(this.setOffsets(this.base._ofs),this.base._ofs=null,delete this.base._ofs),this.dataNodes={};var h=this;this._getLayout=function(){return this},this.mainInst=null!=a._layoutMainInst?a._layoutMainInst:null,this._getMainInst=function(){return null!=this.mainInst?this.mainInst._getMainInst():this},this._init=function(a){var b="string"==typeof a?this.tplData[a]:a;this.conf.mode=b.mode,"c"==this.conf.mode?this.cdata.a=new dhtmlXLayoutCell("a",this):(this.cdata.a=new dhtmlXLayoutCell("a",this),this.cdata.b=new dhtmlXLayoutCell("b",this));for(var c in this.cdata)this.base.appendChild(this.cdata[c].cell),this.cdata[c].conf.init={w:.5,h:.5};if("c"!=this.conf.mode){var d=this._getMainInst();null==d.conf.sep_idx?d.conf.sep_idx=1:d.conf.sep_idx++,this.sep=new dhtmlXLayoutSepObject(this.conf.mode,d.conf.sep_idx),this.base.appendChild(this.sep.sep),this.sep._getLayout=function(){return h._getLayout()},d=null}if(null!=b.cells)for(var c in b.cells)null!=b.cells[c].width&&(this.cdata[c].conf.init.w=b.cells[c].width),null!=b.cells[c].height&&(this.cdata[c].conf.init.h=b.cells[c].height),null!=b.cells[c].name&&(this.cdata[c].conf.name=b.cells[c].name,this.cdata[c].setText(b.cells[c].name)),null!=b.cells[c].fsize&&(this.cdata[c].conf.fsize=b.cells[c].fsize);this.setSizes();for(var c in this.cdata)this.cdata[c].conf.init={};if(null!=b.cells)for(var c in b.cells)null!=b.cells[c].layout&&(this.cdata[c].dataNested=!0,this.cdata[c]._layoutMainInst=this,this.cdata[c].attachLayout({pattern:b.cells[c].layout}),this.cdata[c]._layoutMainInst=null)},this.setSizes=function(a,b,c,d){var e=1==this.conf.inited&&this._getMainInst()==this&&1==this.checkEvent("onResizeFinish")?{}:!1,f=this.conf.ofs.t;for(var g in this.conf.ofs_nodes.t)f+=1==this.conf.ofs_nodes.t[g]?this.dataNodes[g].offsetHeight:0;var h=this.conf.ofs.b;for(var g in this.conf.ofs_nodes.b)h+=1==this.conf.ofs_nodes.b[g]?this.dataNodes[g].offsetHeight:0;var i=this.conf.ofs.l,j=this.conf.ofs.r,k=this.base.offsetWidth,l=this.base.offsetHeight;if("c"==this.conf.mode){var m=j,n=f,o=k-i-j,p=l-f-h;return this.cdata.a._setSize(m,n,o,p,a,c,d),this.callEvent("_onSetSizes",[]),!e||this.conf.b_size.w==k&&this.conf.b_size.h==l||this._callMainEvent("onResizeFinish",[]),void(this.conf.b_size={w:k,h:l})}if("undefined"==typeof b){{"v"==this.conf.mode?"w":"h"}b=this.conf.autosize,this.cdata.a.conf.collapsed?b="b":this.cdata.b.conf.collapsed?b="a":("a"==a||"b"==a)&&(b=this.conf.nextCell[a])}if("v"==this.conf.mode){if("a"==b){if(null!=this.cdata.b.conf.init.w)var q=Math.round(k*this.cdata.b.conf.init.w-this.conf.sw/2)-j;else var q=this.cdata.b.conf.size.w;var r=k-q-j,s=f,t=l-f-h,m=i,n=s,o=r-m-this.conf.sw,p=t}else{var m=i,n=f;if(null!=this.cdata.a.conf.init.w)var o=Math.round(k*this.cdata.a.conf.init.w-this.conf.sw/2)-m;else var o=this.cdata.a.conf.size.w;var p=l-n-h,r=m+o+this.conf.sw,s=n,q=k-r-j,t=p}this.cdata.a._setSize(m,n,o,p,a,c,d),this.cdata.b._setSize(r,s,q,t,a,c,d),this.sep._setSize(m+o,n,this.conf.sw,p)}else{if("a"==b){if(null!=this.cdata.b.conf.init.h)var t=Math.round((l-f)*this.cdata.b.conf.init.h-this.conf.sw/2);else var t=this.cdata.b.conf.size.h;var r=i,s=l-h-t,q=k-r-j,m=r,n=f,o=q,p=s-n-this.conf.sw}else{var m=i,n=f,o=k-m-j;if(null!=this.cdata.a.conf.init.h)var p=Math.round((l-f)*this.cdata.a.conf.init.h-this.conf.sw/2);else var p=this.cdata.a.conf.size.h;var r=m,s=n+p+this.conf.sw,q=o,t=l-s-h}this.cdata.a._setSize(m,n,o,p,a,c,d),this.cdata.b._setSize(r,s,q,t,a,c,d),this.sep._setSize(m,n+p,o,this.conf.sw)}this.callEvent("_onSetSizes",[]),!e||this.conf.b_size.w==k&&this.conf.b_size.h==l||this._callMainEvent("onResizeFinish",[]),this.conf.b_size={w:k,h:l}},this._getAvailWidth=function(){for(var a=[],b=0;b<this.conf.as_cells.h.length;b++){var c=this.cells(this.conf.as_cells.h[b]),d=c.layout,e=d.conf.autosize;c.conf.collapsed&&(c=d.cdata[d.conf.nextCell[c._idd]],e=d.conf.nextCell[e]),a.push(Math.max(0,c.getWidth()-c._getMinWidth(e))),d=c=null}var f=a.length>0?Math.min.apply(window,a):0;return this.base.offsetWidth-f},this._getAvailHeight=function(){for(var a=[],b=0;b<this.conf.as_cells.v.length;b++){var c=this.cells(this.conf.as_cells.v[b]),d=c.layout,e=d.conf.autosize;c.conf.collapsed&&(c=d.cdata[d.conf.nextCell[c._idd]],e=d.conf.nextCell[e]),a.push(Math.max(0,c.getHeight()-c._getHdrHeight()-c._getMinHeight(e))),d=c=null}var f=Math.min.apply(window,a);return this.base.offsetHeight-f},this.setSkin=function(a){this.base.className=this.base.className.replace(new RegExp("dhxlayout_dhx_"+this.conf.skin,"gi"),"dhxlayout_dhx_"+a),this.conf.skin=a},this.unload=function(){this.conf.unloading=!0,this.mainInst=null,this.parentLayout=null,this._mtbUnload(),this.detachHeader(),this.detachFooter(),window.dhx4._eventable(this,"clear");var a=new RegExp("s{0,}dhxlayout_base_"+this.conf.skin,"gi");if(this.base.className=this.base.className.replace(a,""),null!=this.items){for(var b=0;b<this.items.length;b++)this.items[b]=null;this.items=null}1==this.conf.fs_mode&&(window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart)),null!=this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),null!=this.sep&&(this.sep._unload(),this.sep=null);for(var c in this.cdata)this.cdata[c]._unload();this.base=null;for(var c in this)this[c]=null;h=null},this._getWindowMinDimension=function(a){var b=h._getAvailWidth()+7+7,c=h._getAvailHeight()+7+31,d={w:Math.max(b,200),h:Math.max(c,140)};return a=null,d},this.base==document.body&&(this.conf.fs_mode=!0,this._tmTime=null,this._doOnResizeStart=function(){window.clearTimeout(h._tmTime),h._tmTime=window.setTimeout(h._doOnResizeEnd,200)},this._doOnResizeEnd=function(){h.setSizes()},window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart)),window.dhx4._eventable(this),this._callMainEvent=function(a,b){return this.callEvent(a,b)},this._init(b||"3E");var i=this._availAutoSize[b];if(null!=i&&(this.conf.pattern=b,this.setAutoSize(i.h[i.h.length-1],i.v[i.v.length-1])),"function"==typeof window.dhtmlXWindows&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin)),this.conf.inited=!0,this==this._getMainInst()){var j=0;this.items=[],this.forEachItem(function(a){h.items.push(a),a.conf.index=j++})}if(this==this._getMainInst()&&null!=d&&(null!=d.autosize&&this.setAutoSize.apply(this,d.autosize),null!=d.cells))for(var k=0;k<d.cells.length;k++){var l=d.cells[k],m=this.cells(l.id);l.width&&m.setWidth(l.width),l.height&&m.setHeight(l.height),l.text&&m.setText(l.text),l.collapsed_text&&m.setCollapsedText(l.collapsed_text),l.collapse&&m.collapse(),l.fix_size&&m.fixSize(l.fix_size[0],l.fix_size[1]),"undefined"!=typeof l.header&&0==window.dhx4.s2b(l.header)&&m.hideHeader()}return d=null,this}function dhtmlXLayoutSepObject(a,b){var c=this;return this.conf={mode:a,idx:b,blocked:!1,locked:!1},this._isLayoutSep=!0,this.sep=document.createElement("DIV"),this.sep.className="dhxlayout_sep",this._btnLeft=window.dhx4.isIE&&!window.addEventListener?1:0,window.dhx4.isIE&&(this.sep.onselectstart=function(){return!1}),this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode,this._setSize=function(a,b,c,d){this.sep.style.left=a+"px",this.sep.style.top=b+"px",this.sep.style.width=c+"px",this.sep.style.height=d+"px"},this._lockSep=function(a){this.conf.locked=1==a,this._blockSep()},this._blockSep=function(){var a=this._getLayout(),b=a.cdata.a.conf.collapsed||a.cdata.b.conf.collapsed||this.conf.locked;a=null,this.conf.blocked!=b&&(this.sep.className="dhxlayout_sep"+(b?"":" dhxlayout_sep_resize_"+this.conf.mode),this.conf.blocked=b)},this._beforeResize=function(a){if(!this.conf.blocked&&(null==this.conf.resize||1!=this.conf.resize.active)&&a.button===this._btnLeft){var b=this._getLayout();this.conf.resize={sx:a.clientX,sy:a.clientY,tx:a.layerX,ty:a.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:b.cdata.a._getAvailWidth("a"),min_wb:b.cdata.b._getAvailWidth("b"),min_ha:b.cdata.a._getAvailHeight("a"),min_hb:b.cdata.b._getAvailHeight("b")},this.conf.resize.nx=this.conf.resize.sep_x,this.conf.resize.ny=this.conf.resize.sep_y,window.addEventListener?(document.body.addEventListener("mousemove",this._doOnMouseMove,!1),document.body.addEventListener("mouseup",this._doOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._doOnMouseMove),document.body.attachEvent("onmouseup",this._doOnMouseUp)),b=null}},this._onResize=function(a){if(this.conf.resize.active||(this._initResizeArea(),this.conf.resize.active=!0),"v"==this.conf.mode){var b=this.conf.resize.sx-a.clientX;this.conf.resize.nx=this.conf.resize.sep_x-b,this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb?this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb:this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa&&(this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa),this.r_sep.style.left=this.conf.resize.nx+"px"}else{var b=this.conf.resize.sy-a.clientY;this.conf.resize.ny=this.conf.resize.sep_y-b,this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb?this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb:this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha&&(this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha),this.r_sep.style.top=this.conf.resize.ny+"px"}},this._afterResize=function(a){if(window.addEventListener?(document.body.removeEventListener("mousemove",this._doOnMouseMove,!1),document.body.removeEventListener("mouseup",this._doOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._doOnMouseMove),document.body.detachEvent("onmouseup",this._doOnMouseUp)),!this.conf.resize.active)return void(this.conf.resize=null);if(a.button===this._btnLeft){var b=this._getLayout(),c=b._getMainInst(),d=1==c.checkEvent("onPanelResizeFinish")?{}:!1;d!==!1&&c.forEachItem(function(a){d[a.conf.name]={w:a.conf.size.w,h:a.conf.size.h},a=null});var e=this.conf.resize.nx-this.conf.resize.sep_x,f=this.conf.resize.ny-this.conf.resize.sep_y;if(b.cdata.a._setSize(b.cdata.a.conf.size.x,b.cdata.a.conf.size.y,b.cdata.a.conf.size.w+e,b.cdata.a.conf.size.h+f,"a"),b.cdata.b._setSize(b.cdata.b.conf.size.x+e,b.cdata.b.conf.size.y+f,b.cdata.b.conf.size.w-e,b.cdata.b.conf.size.h-f,"b"),this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height)),window.dhx4.isIE){var g=this;window.setTimeout(function(){g._removeResizeArea(),g=null},1)}else this._removeResizeArea();if(d!==!1){var h=[];c.forEachItem(function(a){var b=d[a.conf.name];(b.w!=a.conf.size.w||b.h!=a.conf.size.h)&&h.push(a.conf.name),a=null}),c._callMainEvent("onPanelResizeFinish",[h])}c=b=null,this.conf.resize.active=!1,this.conf.resize=null}},this._initResizeArea=function(){if(this.r_sep||(this.r_sep=document.createElement("DIV"),this.r_sep.className="dhxlayout_resize_sep",this.r_sep.style.left=this.sep.style.left,this.r_sep.style.top=this.sep.style.top,this.r_sep.style.width=this.sep.style.width,this.r_sep.style.height=this.sep.style.height,this.sep.parentNode.appendChild(this.r_sep),window.dhx4.isIE&&(this.r_sep.onselectstart=function(){return!1})),!this.r_area){if(this.r_area=document.createElement("DIV"),this.r_area.className="dhxlayout_resize_area",this.sep.parentNode.appendChild(this.r_area),window.dhx4.isIE&&(this.r_area.onselectstart=function(){return!1}),"v"==this.conf.mode)var a=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa,b=parseInt(this.r_sep.style.top),c=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width),d=parseInt(this.r_sep.style.height);else var a=parseInt(this.r_sep.style.left),b=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha,c=parseInt(this.r_sep.style.width),d=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height);this.r_area.style.left=a+"px",this.r_area.style.top=b+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover||(dhtmlXLayoutObject.prototype._confGlob.reszieCover={},this.r_area.style.width=c+"px",this.r_area.style.height=d+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth,dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight),this.r_area.style.width=c+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px",this.r_area.style.height=d+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode},this._removeResizeArea=function(){this.r_sep.onselectstart=null,this.r_sep.parentNode.removeChild(this.r_sep),this.r_sep=null,this.r_area.onselectstart=null,this.r_area.parentNode.removeChild(this.r_area),this.r_area=null,document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")},this._doOnMouseDown=function(a){a=a||event,a.preventDefault?a.preventDefault():a.cancelBubble=!0,c._beforeResize(a)},this._doOnMouseMove=function(a){a=a||event,a.preventDefault?a.preventDefault():a.cancelBubble=!0,c._onResize(a)},this._doOnMouseUp=function(a){a=a||event,c._afterResize(a)},"function"==typeof window.addEventListener?this.sep.addEventListener("mousedown",this._doOnMouseDown,!1):this.sep.attachEvent("onmousedown",this._doOnMouseDown),this._unload=function(){"function"==typeof window.addEventListener?this.sep.removeEventListener("mousedown",this._doOnMouseDown,!1):this.sep.detachEvent("onmousedown",this._doOnMouseDown),this.sep.parentNode.removeChild(this.sep),this.sep=null;for(var a in this)this[a]=null;c=null},this}function dhtmlXTabBar(a,b){var c=this;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"dhx_skyblue",fullScreen:!1,fullScreenResize:!1,lastActive:null,closeButton:!1,align:"left",tabsMode:"bottom"==b?"bottom":"top",contZone:!0,transSpeed:"0.15s",baseOfs:{w:2,h:2},tabsOfs:1,tabsTop:0,autoload:{}};var d;null!=a&&"object"==typeof a&&"undefined"==typeof a.tagName?(d=a.parent,"undefined"!=typeof a.skin&&(this.conf.skin=a.skin),"undefined"!=typeof a.mode&&(this.conf.tabsMode="bottom"==a.mode?"bottom":"top"),"undefined"!=typeof a.align&&(this.conf.align="right"==a.align?"right":"left"),"undefined"!=typeof a.close_button&&(this.conf.closeButton=window.dhx4.s2b(a.close_button)),"undefined"!=typeof a.content_zone&&(this.conf.contZone=window.dhx4.s2b(a.content_zone)),"undefined"!=typeof a.xml&&(this.conf.autoload.xml=a.xml),"undefined"!=typeof a.json&&(this.conf.autoload.xml=a.json),"undefined"!=typeof a.tabs&&(this.conf.autoload.tabs=a.tabs),"undefined"!=typeof a.onload&&(this.conf.autoload.tabs=a.tabs)):d=a,d==document.body?(document.documentElement.className+=" dhxtabbar_fullscreen",document.body.className+=" dhxtabbar_fullscreen",this.conf.fullScreen=!0,this.base=document.createElement("DIV"),this.base.className="dhxtabbar_base_"+this.conf.skin,this.base.style.position="absolute",this.base.style.left=this.conf.baseOfs.w+"px",this.base.style.top=this.conf.baseOfs.h+"px",document.body.appendChild(this.base)):(this.base="string"==typeof d?document.getElementById(d):d,d=null,this.base.className+=" dhxtabbar_base_"+this.conf.skin),null!=this.base._ofs&&null!=this.base._ofs.t&&(this.conf.tabsTop=this.base._ofs.t),this.tabsMode=document.createElement("DIV"),this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.base.appendChild(this.tabsMode),this.tabsArea=document.createElement("DIV"),this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>","top"==this.conf.tabsMode&&(this.tabsArea.style.top=this.conf.tabsTop+"px"),this.tabsMode.appendChild(this.tabsArea),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",this.tabsArea.childNodes[0].onclick=function(){c._moveTabs("left"==c.conf.align?1:-1)},this.tabsArea.childNodes[2].onclick=function(){c._moveTabs("left"==c.conf.align?-1:1)},this._onTabsAreaClick=function(a){return this._callMainEvent("onTabClose",[a])},this.tabsArea.onclick=function(a){a=a||event;for(var b=a.target||a.srcElement;null!=b;){if("undefined"!=typeof b._tabCloseId){if(c._onTabsAreaClick(b._tabCloseId)!==!0)return;c.t[b._tabCloseId].conf.remove=!0,c._hideTab(b._tabCloseId),b=null}else"undefined"!=typeof b._tabId&&(c._doOnClick(b._tabId),b=null);null!=b&&(b=b.parentNode,b==this&&(b=null))}},this.tabsArea.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},this._doOnClick=function(a){this.callEvent("onTabClick",[a,this.conf.lastActive]),this.t[a].conf.enabled&&this._setTabActive(a)},this.t={},this.addTab=function(a,b,c,d,e,f){"boolean"!=typeof f&&(f=1==this.conf.closeButton),e=window.dhx4.s2b(e);var g=document.createElement("DIV");g.className="dhxtabbar_tab",g.innerHTML="<div class='dhxtabbar_tab_text"+(f?" dhxtabbar_tab_text_close":"")+"'>"+b+"</div>"+(f?"<div class='dhxtabbar_tab_close'></div>":""),g._tabId=a,f&&(g.childNodes[1]._tabCloseId=a);var h=this.tabsArea.childNodes[1].firstChild;null!=d&&d+1>0&&d+1<h.childNodes.length?h.insertBefore(g,h.childNodes[d+1]):h.appendChild(g);var i=!1;"undefined"==typeof c||null==c||"*"==c?(c=this._getLabelWidth(b,f),i=!0):c=parseInt(c),g.style.width=c+"px";var j=new dhtmlXTabBarCell(a,this);this.tabsMode.appendChild(j.cell),this.t[a]={tab:g,cell:j,conf:{text:b,visible:!0,active:!1,enabled:!0,close:f,width:c,autowidth:i}},h=j=null,e?this._setTabActive(a):this._adjustCell(a)},this.setSizes=function(){this.conf.fullScreen&&(this.base.style.width=document.body.offsetWidth-2*this.conf.baseOfs.w+"px",this.base.style.height=document.body.offsetHeight-2*this.conf.baseOfs.h+"px"),null==this.conf.tabsAreaOfs&&(this.tabsArea.style.width=this.base.offsetWidth+"px",this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth),this.tabsArea.style.width=this.base.offsetWidth+this.conf.tabsAreaOfs+"px",this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px",this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.offsetWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+1+"px",this._adjustCell(this.conf.lastActive),this._adjustTabs()},this._adjustCell=function(a){if(this.conf.contZone&&null!=a){var b=("top"==this.conf.tabsMode?this.tabsArea.offsetHeight:0)+this.conf.tabsTop,c=this.base.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop,d=this.t[a].cell.dataType;"dhx_skyblue"!=this.conf.skin||"layout"!=d&&"tabbar"!=d&&"acc"!=d||("top"==this.conf.tabsMode&&(b-=1),c+=1),a!=this.conf.lastActive&&(b=-5e3,this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.zIndex=0),this.t[a].cell._setSize(0,b,this.base.offsetWidth,c)}},this.setTabsMode=function(a){this.conf.tabsMode="bottom"==a?"bottom":"top",this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.setSizes()},this._tabCss=function(a){var b=this.t[a].conf.active,c=!this.t[a].conf.enabled,d=!this.t[a].conf.visible;return"dhxtabbar_tab"+(d?" dhxtabbar_tab_hidden":b||c?" dhxtabbar_tab"+(b?"_actv":"")+(c?"_dis":""):"")},this._getLabelWidth=function(a,b){this.tabsTextTest||(this.tabsTextTest=document.createElement("SPAN"),this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin),document.body.appendChild(this.tabsTextTest),this.tabsTextTest.innerHTML=a;var c=this.tabsTextTest.offsetWidth;return c+="dhx_terrace"==this.conf.skin?44:35,c+=b?"dhx_terrace"==this.conf.skin?14:9:0,document.body.removeChild(this.tabsTextTest),c},this._adjustTabs=function(){var a=this.tabsArea.childNodes[1];if(a.offsetWidth<5)return void(a=null);for(var b=parseInt(a.childNodes[0].style[this.conf.align]),c=null,d=0;d<a.childNodes[0].childNodes.length;d++){var e=a.childNodes[0].childNodes[d]._tabId;if(null!=e&&this.t[e].conf.visible){var f=this.t[e].tab.offsetWidth-this.conf.tabsOfs;this.t[e].conf.active&&(0>b||a.offsetWidth<f?c={d:1,id:e}:b+f>a.offsetWidth&&(c={d:-1,id:e})),b+=f}}null!=c?this._moveTabs(c.d,c.id):a.offsetWidth>b+1&&(a.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(a.childNodes[0].style[this.conf.align])+(a.offsetWidth-b))+"px"),a=c=null},this._moveTabs=function(a,b){for(var c=this.tabsArea.childNodes[1].childNodes[0],d=0,e=[],f=null,g=0;g<c.childNodes.length;g++){var h=c.childNodes[g]._tabId;null!=h&&this.t[h].conf.visible&&(e.push({id:h,w:this.t[h].tab.offsetWidth-this.conf.tabsOfs,ind:d}),h==b&&(f=d),d++)}for(var i=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]),j=this.tabsArea.offsetWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth,k=null,l=null,g=0;g<e.length;g++)e[g].x=i,null==k&&i>=0&&i+e[g].w>0&&(k=e[g]),j>i&&i+e[g].w<=j&&(l=e[g]),i+=e[g].w;if(null!=f)var m=e[f];else{var m=null;a>0?null==k?e.length>0&&(m=e[e.length-1]):k.ind>0&&e.length>=k.ind&&(m=e[k.ind-1]):null==l?e.length>0&&(m=e[0]):e.length>l.ind&&(m=e[l.ind+1])}null!=m&&(c.style[this.conf.align]=a>0?j>i?Math.min(0,parseInt(c.style[this.conf.align])+(j-i))+"px":parseInt(c.style[this.conf.align])-m.x+"px":parseInt(c.style[this.conf.align])-m.x+j-m.w+"px"),c=m=e=null},this._getNextVisible=function(a,b){return this._getNearVisible(a,b,"next")},this._getPrevVisible=function(a,b){return this._getNearVisible(a,b,"previous")},this._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},this._getNearVisible=function(a,b,c){if("first"==c){var d=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];c="next"}else{if(null==a||null==this.t[a])return b?this._getFirstVisible():null;var d=this.t[a].tab[c+"Sibling"]}for(var e=null;null!=d&&null==e;){var f=d._tabId;null!=f&&null==e&&this.t[f].conf.visible?e=f:d=d[c+"Sibling"]}return d=null,e},this._showTab=function(a,b){!this.t[a]||this.t[a].conf.visible||this.t[a].conf.transActv||(this.conf.transProp!==!1?(this.t[a].conf.transActv=!0,this.t[a].conf.transMode="show",this.t[a].conf.transProp=this.conf.transProp,this.t[a].conf.transActvId=b?a:null,this.t[a].conf.transEv||(this.t[a].tab.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[a].conf.transEv=!0),this.t[a].conf.visible=!0,this.t[a].tab.className=this._tabCss(a),this.t[a].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[a].tab.style.width=this.t[a].conf.width+"px"):(this.t[a].conf.visible=!0,this.t[a].tab.style.display="",b?this._setTabActive(a):this._adjustTabs()))},this._hideTab=function(a,b){if(this.t[a]&&this.t[a].conf.visible&&!this.t[a].conf.transActv){var d=!1;this.conf.lastActive==a&&(this.conf.lastActive=null,this.t[a].conf.active=!1,this.t[a].tab.className=this._tabCss(a),d=!0);var e=this._getPrevVisible(a),f=this._getNextVisible(a),g=d&&b!==!1?(1==b?null:b)||f||e:null;this.conf.transProp!==!1?(this.t[a].conf.transActv=!0,this.t[a].conf.transMode="hide",this.t[a].conf.transProp=this.conf.transProp,this.t[a].conf.transActvId=g,this.t[a].conf.visible=!1,this.t[a].conf.transEv||(this.t[a].tab.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[a].conf.transEv=!0),this.t[a].tab.style.visibility="hidden",this.t[a].tab.className=c._tabCss(a),this.t[a].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[a].tab.style.width="0px"):(this.t[a].tab.style.display="none",this.t[a].conf.visible=!1,this.conf.contZone&&(this.t[a].cell.cell.style.visibility="hidden",this.t[a].cell.cell.style.top="-5000px"),null!=g&&this._setTabActive(g),this._adjustTabs(),this.t[a].conf.remove&&this._removeTab(a))
}},this._isTabVisible=function(a){return 1==this.t[a].conf.visible},this._doOnTrEnd=function(){var a=this._tabId;if(null!=c.t[a]){var b=c.t[a],d=b.conf.transActvId;"hide"==b.conf.transMode?b.conf.remove?c._removeTab(a):(b.tab.style[b.conf.transProp]="",c.conf.contZone&&(b.cell.cell.style.visibility="hidden",b.cell.cell.style.top="-5000px"),b.conf.transActv=!1):"show"==b.conf.transMode&&(b.tab.style[b.conf.transProp]="",b.tab.style.visibility="visible",b.conf.transMode=null,b.conf.transActv=!1),null!=d?c._setTabActive(d):c._adjustTabs(),b=null}},this.enableTabCloseButton=function(a){this.conf.closeButton=window.dhx4.s2b(a)},this.unload=function(){this.clearAll(),this.t=null,this.conf.fullScreen&&(window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart),this._doOnResizeStart=null,this._doOnResizeEnd=null),null!=this.tabsTextTest&&(this.tabsTextTest.parentNode&&this.tabsTextTest.parentNode.removeChild(this.tabsTextTest),this.tabsTextTest=null),window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.tabsArea.childNodes[0].onclick=null,this.tabsArea.childNodes[2].onclick=null,this.tabsArea.onclick=null,this.tabsArea.onselectstart=null,this.tabsArea.parentNode.removeChild(this.tabsArea),this.tabsArea=null,this.tabsMode.parentNode.removeChild(this.tabsMode),this.tabsMode=null,this.conf.fullScreen?(this.base.parentNode.removeChild(this.base),document.documentElement.className=document.documentElement.className.replace("dhxtabbar_fullscreen",""),document.body.className=document.body.className.replace("dhxtabbar_fullscreen","")):this.base.className=this.base.className.replace("dhxtabbar_base_"+this.conf.skin,""),this.base=null;for(var a in this)this[a]=null;c=null},this.enableContentZone=function(a){this.conf.contZone=1==a},this.setSkin=function(a){this.base.className=this.base.className.replace(new RegExp("dhxtabbar_base_"+this.conf.skin),"dhxtabbar_base_"+a),this.conf.skin=a,null!=this.tabsTextTest&&(this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin);for(var b in this.t)this.t[b].cell._resetSizeState(),1==this.t[b].conf.autowidth&&(this.t[b].conf.width=this._getLabelWidth(this.t[b].conf.text,this.t[b].conf.close),this.t[b].conf.visible&&(this.t[b].tab.style.width=this.t[b].conf.width+"px"));this.conf.tabsAreaOfs=null,this._fixTabsOfs(),this.setSizes()},this.setAlign=function(a){return a="left"==a?"left":"right",a==this.conf.align?void(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"):(this.conf.transProp!==!1&&(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="",this.conf.align=a,this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",void(this.conf.transProp!==!1&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos)))},this._initObj=function(a){this.clearAll();var b=!1;if(null!=a.settings&&(null!=a.settings.skin&&this.setSkin(a.settings.skin),null!=a.settings.closeButton&&this.enableTabCloseButton(window.dhx4.s2b(a.settings.closeButton)),null!=a.settings.align&&this.setAlign(a.settings.align),("ajax"==a.settings.hrefmode||"ajax-html"==a.settings.hrefmode)&&(b=!0)),null!=a.tabs)for(var c=0;c<a.tabs.length;c++){var d=a.tabs[c];"undefined"==typeof d.id&&(d.id=window.dhx4.newId()),d.width=isNaN(parseInt(d.width))?null:parseInt(d.width),this.addTab(d.id,d.text||d.label||"",d.width,d.index,window.dhx4.s2b(d.selected)||window.dhx4.s2b(d.active),d.close),null!=d.content&&this.cells(d.id).attachHTMLString(d.content),null!=d.href&&this.cells(d.id).attachURL(d.href,b),"undefined"!=typeof d.enabled&&0==window.dhx4.s2b(d.enabled)?this.tabs(d.id).disable():"undefined"!=typeof d.disabled&&1==window.dhx4.s2b(d.disabled)&&this.tabs(d.id).disable()}},this._xmlToObj=function(a){var b={settings:{},tabs:[]},c=a.getElementsByTagName("tabbar")[0];if(null!=c){for(var d in{skin:1,align:1,closeButton:1,hrefmode:1})null!=c.getAttribute(d)&&(b.settings[d]=c.getAttribute(d));for(var e=c.getElementsByTagName("tab"),f=0;f<e.length;f++){var g={text:e[f].firstChild.nodeValue||""};for(var d in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1})null!=e[f].getAttribute(d)&&(g[d]=e[f].getAttribute(d));var h=e[f].getElementsByTagName("content")[0];if(null!=h){g.content="";for(var i=0;i<h.childNodes.length;i++)g.content+=h.childNodes[i].nodeValue||""}b.tabs.push(g)}}return b},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:!0});var e=window.dhx4.transDetect();return this.conf.transProp=e.transProp,this.conf.transEv=e.transEv,this.conf.transValueWidth="width "+this.conf.transSpeed,e=null,this.conf.transProp!==!1&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos),this._initFullScreenResize=function(){this.conf.fullScreenResize||(this.conf.tmResize=null,this._doOnResizeStart=function(){window.clearTimeout(c.conf.tmResize),c.conf.tmResize=window.setTimeout(c._doOnResizeEnd,200)},this._doOnResizeEnd=function(){c.setSizes()},window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fullScreenResize=!0)},this.conf.fullScreen&&this._initFullScreenResize(),this._callMainEvent=function(a,b){return this.callEvent(a,b)},window.dhx4._eventable(this),null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml?this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload):null!=this.conf.autoload.tabs&&this.loadStruct({tabs:this.conf.autoload.tabs}),this._fixTabsOfs(),this.setSizes(),this}function dhtmlXTabBarInitFromHTML(){for(var z=document.getElementsByTagName("div"),i=0;i<z.length;i++)if(-1!=z[i].className.indexOf("dhtmlxTabBar")){var conf={settings:{},tabs:[]},n=z[i],id=n.id;n.className="";for(var k=new Array,j=0;j<n.childNodes.length;j++)n.childNodes[j].tagName&&"!"!=n.childNodes[j].tagName&&(k[k.length]=n.childNodes[j]);var skin=n.getAttribute("skin");null!=skin&&(conf.settings.skin=skin);var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w,acs=n.getAttribute("onbeforeinit"),acs&&eval(acs),align=n.getAttribute("align"),align&&(conf.settings.align=align);for(var cont={},j=0;j<k.length;j++){var m=k[j],tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")},href=m.getAttribute("href");cont[m.id]=href?{href:href}:{cont:m},conf.tabs.push(tab)}w.loadStruct(conf);for(var a in cont)cont[a].href?(w.cells(a).attachURL(cont[a].href),cont[a].href=null):(w.cells(a).attachObject(cont[a].cont),"none"==cont[a].cont.style.display&&(cont[a].cont.style.display=""),cont[a].cont=null),cont[a]=null;var selId=n.getAttribute("select");if(null!=selId)w.tabs(selId).setActive();else if(null==w.getActiveTab()){var v=w._getFirstVisible();null!=v&&w.cells(v).setActive()}acs=n.getAttribute("oninit"),acs&&eval(acs)}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXWindows(a){var b=this,c={};if("undefined"!=typeof a)for(var d in a)c[d]=a[d];a=null,this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"dhx_skyblue",vp_pos_ofs:20,vp_custom:!1,ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:!1,dblclick_ev:navigator.userAgent.indexOf("MSIE 6.0")>=0||navigator.userAgent.indexOf("MSIE 7.0")>=0||navigator.userAgent.indexOf("MSIE 8.0")>=0,fr_cover:navigator.userAgent.indexOf("MSIE 6.0")>=0};var e=window.dhx4.transDetect();if(this.conf.tr={prop:e.transProp,ev:e.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"},c.viewport?null!=c.viewport.object?this.attachViewportTo(c.viewport.object):null!=c.viewport.left&&null!=c.viewport.top&&null!=c.viewport.width&&null!=c.viewport.height?this.setViewport(c.viewport.left,c.viewport.top,c.viewport.width,c.viewport.height,c.viewport.parent):this.attachViewportTo(document.body):this.attachViewportTo(document.body),this.w={},this.createWindow=function(a,b,c,d,e){var g={};if(1==arguments.length&&"object"==typeof a)g=a;else for(g.id=a,g.left=b,g.top=c,g.width=d,g.height=e,("undefined"==typeof g.id||null==g.id)&&(g.id=window.dhx4.newId());null!=this.w[g.id];)g.id=window.dhx4.newId();null==g.left&&(g.left=0),null==g.top&&(g.top=0),g.move=null!=g.move&&0==window.dhx4.s2b(g.move)?!1:null!=g.deny_move&&1==window.dhx4.s2b(g.deny_move)?!1:!0,g.park=null!=g.park&&0==window.dhx4.s2b(g.park)?!1:null!=g.deny_park&&1==window.dhx4.s2b(g.deny_park)?!1:!0,g.resize=null!=g.resize&&0==window.dhx4.s2b(g.resize)?!1:null!=g.deny_resize&&1==window.dhx4.s2b(g.deny_resize)?!1:!0,g.keep_in_viewport=null!=g.keep_in_viewport&&window.dhx4.s2b(g.keep_in_viewport),g.modal=null!=g.modal&&window.dhx4.s2b(g.modal),g.center=null!=g.center&&window.dhx4.s2b(g.center),g.text=null!=g.text?g.text:null!=g.caption?g.caption:"dhtmlxWindow",g.header=!(null!=g.header&&0==window.dhx4.s2b(g.header));var h=document.createElement("DIV");h.className="dhxwin_active",h.style.viosibility="hidden",this.vp.appendChild(h),h._isWindow=!0,h._idd=g.id;var i=document.createElement("DIV");i.className="dhxwin_hdr",i.style.zIndex=0,i.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+g.text+"</div></div><div class='dhxwin_btns'></div>",h.appendChild(i),i.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},i.oncontextmenu=function(a){return a=a||event,a.cancelBubble=!0,!1},i._isWinHdr=!0,i.firstChild._isWinIcon=!0;var j=document.createElement("DIV");j.className="dhxwin_brd",h.appendChild(j);var k=document.createElement("DIV");k.className="dhxwin_fr_cover",k.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>",h.appendChild(k),this.w[g.id]={win:h,hdr:i,brd:j,fr_cover:k,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,text:g.text,keep_in_vp:g.keep_in_viewport,allow_move:g.move,allow_park:g.park,allow_resize:g.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var l={help:{title:"Help",visible:!1},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}};for(var m in l){var n=new dhtmlXWindowsButton(this,g.id,m,l[m].title,!1);0==l[m].visible&&n.hide(),i.lastChild.appendChild(n.button),this.w[g.id].b[m]=n,n=null}this._winAdjustTitle(g.id),this.w[g.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[g.id].conf.z_id);var o=new dhtmlXWindowsCell(g.id,this);return this.w[g.id].win.insertBefore(o.cell,k),this.w[g.id].cell=o,"function"==typeof window.addEventListener?(this.w[g.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[g.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[g.id].win.addEventListener("dblclick",this._winOnMouseDown,!1)):(this.w[g.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[g.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&this.w[g.id].win.attachEvent("ondblclick",this._winOnMouseDown)),this._winInitFRM(g.id),this._winSetPosition(g.id,g.left,g.top),this._winSetSize(g.id,g.width,g.height),this._winMakeActive(g.id),1==g.center&&this.w[g.id].cell.center(),1==g.modal&&this.w[g.id].cell.setModal(!0),0==g.header&&this.w[g.id].cell.hideHeader(),f=h=i=j=k=o=null,this.w[g.id].cell},this._winOnMouseDown=function(a){a=a||event;for(var c=a.target||a.srcElement,d={press_type:a.type};null!=c&&1!=c._isWindow;)"undefined"!=typeof c.className&&null==d.mode&&("undefined"!=typeof c._buttonName?(d.mode="button",d.button_name=c._buttonName):1==c._isWinHdr?d.mode="hdr":1==c._isWinIcon&&(d.mode="icon")),c=c.parentNode;null==d.mode&&(d.mode="win"),d.id=null!=c&&1==c._isWindow?c._idd:null,c=null,null!=d.id&&b.callEvent("_winMouseDown",[a,d])},this._winOnParkTrans=function(a){a.stopPropagation&&a.stopPropagation();var c=b.w[this._idd];"opacity"==a.propertyName&&b._winCellClearOpacity(this._idd),"height"==a.propertyName&&"park"==c.conf.tr_mode&&"park"==c.conf.tr_mode&&(c.win.style[b.conf.tr.prop]="",c.conf.parked?(c.hdr.style.zIndex=3,b._callMainEvent("onParkUp",this._idd)):(b._winAdjustCell(this._idd),b._callMainEvent("onParkDown",this._idd),c.conf.keep_in_vp&&b._winAdjustPosition(this._idd,c.conf.x,c.conf.y))),c=null},this.unload=function(){this.conf.unloading=!0,this._dndInitModule&&this._dndUnloadModule();for(var a in this.w)this._winClose(a);this.w=null,null!=this.cm&&"function"==typeof this._unloadContextMenu&&this._unloadContextMenu(),window.dhx4._eventable(this,"clear"),this.attachViewportTo(null);for(var a in this.conf)this.conf[a]=null,delete this.conf[a];for(var a in this)this[a]=null;b=a=null},window.dhx4._eventable(this),this.attachEvent("_winMouseDown",this._winMouseDownHandler),this._dndInitModule&&this._dndInitModule(),null!=c.wins)for(var g=0;g<c.wins.length;g++){var h=c.wins[g];this.createWindow(h)}return c=null,this}function dhtmlXWindowsCell(a,b){dhtmlXCellObject.apply(this,[a,"_wins"]),this.wins=b,this.cell._winId=a,this.conf.skin=this.wins.conf.skin,this.attachEvent("_onCellUnload",function(){this._unloadResize&&this._unloadResize(),window.dhx4._eventable(this.cell,"clear"),this.cell._winId=null,this.wins=null,this.setText=null,this.getText=null,this.allowMove=null,this.denyMove=null,this.isMovable=null,this.allowResize=null,this.denyResize=null,this.isResizable=null,this.maximize=null,this.minimize=null,this.isMaximized=null,this.setPosition=null,this.getPosition=null,this.adjustPosition=null,this.park=null,this.isParked=null,this.allowPark=null,this.denyPark=null,this.isParkable=null,this.show=null,this.hide=null,this.isHidden=null,this.stick=null,this.unstick=null,this.isSticked=null,this.setDimension=null,this.getDimension=null,this.setMinDimension=null,this.getMinDimension=null,this.setMaxDimension=null,this.getMaxDimension=null,this.keepInViewport=null,this.center=null,this.centerOnScreen=null,this.bringToTop=null,this.bringToBottom=null,this.isOnTop=null,this.isOnBottom=null,this.showHeader=null,this.hideHeader=null,this.setModal=null,this.isModal=null,this.close=null,this._adjustByCont=null,this.button=null,this.addUserButton=null,this.removeUserButton=null,this.fixed=null,d=null}),this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)}),this.attachEvent("_onContentMouseDown",function(a,b){this.wins.callEvent("_winMouseDown",[b,{id:a,mode:"win"}])}),this._callMainEvent=function(a,b){return this.callEvent(a,b)},this.conf.tr={};for(var c in this.wins.conf.tr)this.conf.tr[c]=this.wins.conf.tr[c];0!=this.conf.tr.prop,this._initResize&&this._initResize(),window.dhx4._eventable(this.cell);var d=this;return this.cell.attachEvent("_setCellSize",function(a,b){var c=d.wins.w[this._winId].conf.w-d.conf.size.w,e=d.wins.w[this._winId].conf.h-d.conf.size.h;d.setDimension(a+c,b+e)}),this}"undefined"==typeof window.dhx4&&(window.dhx4={version:"4.0.3",skin:null,skinDetect:function(a){var b=document.createElement("DIV");b.className=a+"_skin_detect",document.body.firstChild?document.body.insertBefore(b,document.body.firstChild):document.body.appendChild(b);var c=b.offsetWidth;return b.parentNode.removeChild(b),b=null,{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[c]||null},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var a=this.first();for(var b in this.data)a=Math.max(a,this.data[b]);return a},reserve:function(a){return this.data[a]=this.last()+this.step,this.data[a]},clear:function(a){null!=this.data[a]&&(this.data[a]=null,delete this.data[a])}},s2b:function(a){return 1==a||1==a||"true"==a||"1"==a||"yes"==a||"y"==a},trim:function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},template:function(a,b,c){return a.replace(/#([a-zA-Z0-9_-]{1,})#/g,function(a,d){return d.length>0&&"undefined"!=typeof b[d]?1==c?window.dhx4.trim(b[d]):String(b[d]):""})},absLeft:function(a){return"string"==typeof a&&(a=document.getElementById(a)),this._aOfs(a).left},absTop:function(a){return"string"==typeof a&&(a=document.getElementById(a)),this._aOfs(a).top},_aOfsSum:function(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}},_aOfsRect:function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},_aOfs:function(a){return a.getBoundingClientRect?this._aOfsRect(a):this._aOfsSum(a)},_isObj:function(a){return null!=a&&"object"==typeof a&&"undefined"==typeof a.length},_copyObj:function(a){if(this._isObj(a)){var b={};for(var c in a)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c]}else for(var b=[],c=0;c<a.length;c++)b[c]="object"==typeof a[c]&&null!=a[c]?this._copyObj(a[c]):a[c];return b},screenDim:function(){var a=navigator.userAgent.indexOf("MSIE")>=0,b={};return b.left=document.body.scrollLeft,b.right=b.left+(window.innerWidth||document.body.clientWidth),b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),b},selectTextRange:function(a,b,c){a="string"==typeof a?document.getElementById(a):a;var d=a.value.length;if(b=Math.max(Math.min(b,d),0),c=Math.min(c,d),a.setSelectionRange)try{a.setSelectionRange(b,c)}catch(e){}else if(a.createTextRange){var f=a.createTextRange();f.moveStart("character",b),f.moveEnd("character",c-d);try{f.select()}catch(e){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var a={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in a)0==this.transData.transProp&&null!=document.documentElement.style[b]&&(this.transData.transProp=b,this.transData.transEv=a[b]);a=null}return this.transData}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0,window.dhx4.isKHTML=navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0),"undefined"==typeof window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"post",get:function(a,b){this._call("GET",a,null,!0,b)},getSync:function(a){return this._call("GET",a,null,!1)},post:function(a,b,c){1==arguments.length?b="":2!=arguments.length||"function"!=typeof b&&"function"!=typeof window[b]?b=String(b):(c=b,b=""),this._call("POST",a,b,!0,c)},postSync:function(a,b){return b=null==b?"":String(b),this._call("POST",a,b,!1)},getLong:function(a,b){this._call("GET",a,null,!0,b,{url:a})},postLong:function(a,b,c){2==arguments.length&&(c=b,b=""),this._call("POST",a,b,!0,c,{url:a,postData:b})},_call:function(a,b,c,d,e,f){var g=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),h=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);return 1==d&&(g.onreadystatechange=function(){(4==g.readyState&&200==g.status||1==h&&3==g.readyState)&&window.setTimeout(function(){"function"==typeof e&&e.apply(window,[{xmlDoc:g}]),null!=f&&("undefined"!=typeof f.postData?dhx4.ajax.postLong(f.url,f.postData,e):dhx4.ajax.getLong(f.url,e)),e=null,g=null},1)}),"GET"==a&&1!=this.cache&&(b+=(b.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()),g.open(a,b,d),"POST"==a?(g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),1!=this.cache&&(c+=(c.length>0?"&":"")+"dhxr"+(new Date).getTime())):c=null,g.setRequestHeader("X-Requested-With","XMLHttpRequest"),g.send(c),d?void 0:{xmlDoc:g}}}),"undefined"==typeof window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(obj,initObj,xmlToJson,xmlRootTag,mode){if("clear"==mode){for(var a in obj._dhxdataload)obj._dhxdataload[a]=null,delete obj._dhxdataload[a];return obj._loadData=null,obj._dhxdataload=null,obj.load=null,obj.loadStruct=null,void(obj=null)}if(obj._dhxdataload={initObj:initObj,xmlToJson:xmlToJson,xmlRootTag:xmlRootTag,onBeforeXLS:null},obj._loadData=function(data,loadParams,onLoad){2==arguments.length&&(onLoad=loadParams,loadParams=null);var obj=null;if(3==arguments.length&&(onLoad=arguments[2]),"string"==typeof data){var k=data.replace(/^\s{1,}/,"").replace(/\s{1,}$/,""),tag=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(tag.test(k.replace(/^<\?xml[^\?]*\?>\s*/,""))&&(window.DOMParser?obj=(new window.DOMParser).parseFromString(data,"text/xml"):"undefined"!=typeof window.ActiveXObject&&(obj=new window.ActiveXObject("Microsoft.XMLDOM"),obj.async="false",obj.loadXML(data)),null!=obj&&(obj=this[this._dhxdataload.xmlToJson].apply(this,[obj]))),null==obj&&(null!=k.match(/^\{.*\}$/)||null!=k.match(/^\[.*\]$/))){try{eval("dhx4.temp="+k)}catch(e){dhx4.temp=null}obj=dhx4.temp,dhx4.temp=null}if(null==obj){this.callEvent("onXLS",[]);var params=[];if("function"==typeof this._dhxdataload.onBeforeXLS){var k=this._dhxdataload.onBeforeXLS.apply(this,[data]);if(null!=k&&"object"==typeof k&&(null!=k.url&&(data=k.url),null!=k.params))for(var a in k.params)params.push(a+"="+encodeURIComponent(k.params[a]))}var t=this,callBack=function(r){var obj=null;if((r.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=r.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</))obj=t[t._dhxdataload.xmlToJson].apply(t,[r.xmlDoc.responseXML]);else{try{eval("dhx4.temp="+r.xmlDoc.responseText)}catch(e){dhx4.temp=null}obj=dhx4.temp,dhx4.temp=null}null!=obj&&t[t._dhxdataload.initObj].apply(t,[obj,data]),t.callEvent("onXLE",[]),null!=onLoad&&("function"==typeof onLoad?onLoad.apply(t,[]):"function"==typeof window[onLoad]&&window[onLoad].apply(t,[])),callBack=onLoad=null,obj=r=t=null};return params=params.join("&")+("string"==typeof loadParams?"&"+loadParams:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(data,params,callBack):"get"==dhx4.ajax.method&&dhx4.ajax.get(data+(data.indexOf("?")>0?"":"")+params,callBack))}}else obj="object"==typeof data.documentElement||"undefined"!=typeof data.tagName&&"undefined"!=typeof data.getElementsByTagName&&data.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[data]):window.dhx4._copyObj(data);null!=obj&&this[this._dhxdataload.initObj].apply(this,[obj]),null!=onLoad&&("function"==typeof onLoad?onLoad.apply(this,[]):"function"==typeof window[onLoad]&&window[onLoad].apply(this,[]),onLoad=null)},null!=mode){var k={struct:"loadStruct",data:"load"};for(var a in mode)1==mode[a]&&(obj[k[a]]=function(){return this._loadData.apply(this,arguments)})}obj=null}),"undefined"==typeof window.dhx4._eventable&&(window.dhx4._eventable=function(a,b){return"clear"==b?(a.detachAllEvents(),a.dhxevs=null,a.attachEvent=null,a.detachEvent=null,a.checkEvent=null,a.callEvent=null,a.detachAllEvents=null,void(a=null)):(a.dhxevs={data:{}},a.attachEvent=function(a,b){a=String(a).toLowerCase(),this.dhxevs.data[a]||(this.dhxevs.data[a]={});var c=window.dhx4.newId();return this.dhxevs.data[a][c]=b,c},a.detachEvent=function(a){for(var b in this.dhxevs.data){var c=0;for(var d in this.dhxevs.data[b])d==a?(this.dhxevs.data[b][d]=null,delete this.dhxevs.data[b][d]):c++;0==c&&(this.dhxevs.data[b]=null,delete this.dhxevs.data[b])}},a.checkEvent=function(a){return a=String(a).toLowerCase(),null!=this.dhxevs.data[a]},a.callEvent=function(a,b){if(a=String(a).toLowerCase(),null==this.dhxevs.data[a])return!0;var c=!0;for(var d in this.dhxevs.data[a])c=this.dhxevs.data[a][d].apply(this,b)&&c;return c},a.detachAllEvents=function(){for(var a in this.dhxevs.data){for(var b in this.dhxevs.data[a])this.dhxevs.data[a][b]=null,delete this.dhxevs.data[a][b];this.dhxevs.data[a]=null,delete this.dhxevs.data[a]}},void(a=null))}),dhtmlx=function(a){for(var b in a)dhtmlx[b]=a[b];return dhtmlx},dhtmlx.extend_api=function(a,b,c){var d=window[a];d&&(window[a]=function(a){if(a&&"object"==typeof a&&!a.tagName){var c=d.apply(this,b._init?b._init(a):arguments);for(var e in dhtmlx)b[e]&&this[b[e]](dhtmlx[e]);for(var e in a)b[e]?this[b[e]](a[e]):0==e.indexOf("on")&&this.attachEvent(e,a[e])}else var c=d.apply(this,arguments);return b._patch&&b._patch(this),c||this},window[a].prototype=d.prototype,c&&dhtmlXHeir(window[a].prototype,c))},dhtmlxAjax={get:function(a,b){var c=new dtmlXMLLoaderObject(!0);return c.async=arguments.length<3,c.waitCall=b,c.loadXML(a),c},post:function(a,b,c){var d=new dtmlXMLLoaderObject(!0);return d.async=arguments.length<4,d.waitCall=c,d.loadXML(a,!0,b),d},getSync:function(a){return this.get(a,null,!0)},postSync:function(a,b){return this.post(a,b,null,!0)}},dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(a){var b=!0;return this.check=function(){if(a&&null!=a.onloadAction&&(!a.xmlDoc.readyState||4==a.xmlDoc.readyState)){if(!b)return;b=!1,dtmlXMLLoaderObject.count++,"function"==typeof a.onloadAction&&a.onloadAction(a.mainObject,null,null,null,a),a.waitCall&&(a.waitCall.call(this,a),a.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(a,b){if("undefined"==typeof this.xmlDoc.status||this.xmlDoc.status<400){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(a);if(0==c.length&&-1!=a.indexOf(":"))var c=this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]);var d=c[0]}else var d=this.xmlDoc.documentElement;if(d)return this._retry=!1,d;if(!this._retry&&_isIE){this._retry=!0;var b=this.xmlDoc;return this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(a,b)}}return dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),document.createElement("DIV")},dtmlXMLLoaderObject.prototype.loadXMLString=function(a,b){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(a);else{var c=new DOMParser;this.xmlDoc=c.parseFromString(a,"text/xml")}b||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(a,b,c,d){this.rSeed&&(a+=(-1!=a.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=a,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open(b?"POST":"GET",a,this.async),d?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):b&&this.xmlDoc.setRequestHeader("Content-type",this.contenttype||"application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(null||c),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;b._tagvalue=a.firstChild?a.firstChild.nodeValue:"";for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;d&&(b[d]||(b[d]=[]),b[d].push(this.xmlNodeToJSON(a.childNodes[c])))}return b},dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null,a.dragStarter=null,a.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy,a.dragStarter=b,this.addDragLanding(a,b)},dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){return!a&&!window.event||2!=(a||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),a&&a.preventDefault?(a.preventDefault(),!1):!1):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(a){if(a||(a=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(a,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var b=dragger.gldragNode;dragger.gldragNode.old&&(b=dragger.gldragNode.old),b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;if(b.pWindow&&b.pWindow.dhtmlDragAndDrop.lastLanding&&b.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(b.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var d=document.createElement("Div");d.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=d.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),c.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=a.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=a.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",a.srcElement)e=a.srcElement;
else var e=a.target;dragger.checkLanding(e,a)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;if(parent.dhtmlDragAndDrop){var e=parent.dhtmlDragAndDrop.calculateFramePosition(1);c+=1*e.split("_")[0],d+=1*e.split("_")[1]}if(a)return c+"_"+d;this.fx=c,this.fy=d}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&"BODY"!=a.tagName?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){if(dragger=window.dhtmlDragAndDrop,!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null,c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)try{window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){a&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(c){}for(var d=0;d<window.frames.length;d++)try{window.frames[d]!=a&&window.frames[d].dhtmlDragAndDrop&&window.frames[d].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)}catch(c){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(a,b,c,d){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(a,b);if(_isIE)return b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),null!=c&&b.setProperty("SelectionNamespaces","xmlns:xsl='"+c+"'"),"single"==d?b.selectSingleNode(a):b.selectNodes(a)||new Array(0);var e=b;b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),-1!=b.nodeName.indexOf("document")?e=b:(e=b,b=b.ownerDocument);var f=XPathResult.ANY_TYPE;"single"==d&&(f=XPathResult.FIRST_ORDERED_NODE_TYPE);var g=new Array,h=b.evaluate(a,e,function(){return c},f,null);if(f==XPathResult.FIRST_ORDERED_NODE_TYPE)return h.singleNodeValue;for(var i=h.iterateNext();i;)g[g.length]=i,i=h.iterateNext();return g},_dhtmlxError.prototype.catchError=function(a,b){this.catches[a]=b},_dhtmlxError.prototype.throwError=function(a,b,c){return this.catches[a]?this.catches[a](a,b,c):this.catches.ALL?this.catches.ALL(a,b,c):(alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(a,b){var c=a.replace(/[\/]+/gi,"/").split("/"),d=null,e=1;if(!c.length)return[];if("."==c[0])d=[b];else{if(""!=c[0])return[];d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g,"")),e++}for(e;e<c.length;e++)d=this._getAllNamedChilds(d,c[e]);return-1!=c[e-1].indexOf("[")&&(d=this._filterXPath(d,c[e-1])),d},dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){for(var c=new Array,b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),d=0;d<a.length;d++)a[d].getAttribute(b)&&(c[c.length]=a[d]);return c},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=new Array;_isKHTML&&(b=b.toUpperCase());for(var d=0;d<a.length;d++)for(var e=0;e<a[d].childNodes.length;e++)_isKHTML?a[d].childNodes[e].tagName&&a[d].childNodes[e].tagName.toUpperCase()==b&&(c[c.length]=a[d].childNodes[e]):a[d].childNodes[e].tagName==b&&(c[c.length]=a[d].childNodes[e]);return c},dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(a,b,c){c||(c=this.xslDoc),c.responseXML&&(c=c.responseXML);var d=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+a+"']",c,"http://www.w3.org/1999/XSL/Transform","single");null!=d&&(d.firstChild.nodeValue=b)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(a,b){if(a||(a=this.xslDoc),a.responseXML&&(a=a.responseXML),b||(b=this.xmlDoc),b.responseXML&&(b=b.responseXML),_isIE){var c=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(a,c)}catch(d){c=b.transformNode(a)}}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(a));var c=this.XSLProcessor.transformToDocument(b)}return c},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(a,b){var c=this.doXSLTransToObject(a,b);return"string"==typeof c?c:this.doSerialization(c)},dtmlXMLLoaderObject.prototype.doSerialization=function(a){if(a||(a=this.xmlDoc),a.responseXML&&(a=a.responseXML),_isIE)return a.xml;var b=new XMLSerializer;return b.serializeToString(a)},dhtmlxEventable=function(obj){obj.attachEvent=function(a,b,c){return a="ev_"+a.toLowerCase(),this[a]||(this[a]=new this.eventCatcher(c||this)),a+":"+this[a].addEvent(b)},obj.callEvent=function(a,b){return a="ev_"+a.toLowerCase(),this[a]?this[a].apply(this,b):!0},obj.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var a=!0,b=0;b<dhx_catch.length;b++)if(null!=dhx_catch[b]){var c=dhx_catch[b].apply(obj,arguments);a=a&&c}return a};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),ev?dhx_catch.push(ev)-1:!1},z.removeEvent=function(a){dhx_catch[a]=null},z},obj.detachEvent=function(a){if(0!=a){var b=a.split(":");this[b[0]].removeEvent(b[1])}},obj.detachAllEvents=function(){for(var a in this)0==a.indexOf("ev_")&&(this.detachEvent(a),this[a]=null)},obj=null},window.dhtmlx||(dhtmlx={}),dhtmlx.assert=function(a,b){a||dhtmlx.error(b)},dhtmlx.assert_enabled=function(){return!1},dhtmlx.assert_event=function(a,b){a._event_check||(a._event_check={},a._event_check_size={});for(var c in b){a._event_check[c.toLowerCase()]=b[c];var d=-1;for(var e in b[c])d++;a._event_check_size[c.toLowerCase()]=d}},dhtmlx.assert_method_info=function(a,b,c,d){for(var e=[],f=0;f<d.length;f++)e.push(d[f][0]+" : "+d[f][1]+"\n   "+d[f][2].describe()+(d[f][3]?"; optional":""));return a.name+"."+b+"\n"+c+"\n Arguments:\n - "+e.join("\n - ")},dhtmlx.assert_method=function(a,b){for(var c in b)dhtmlx.assert_method_process(a,c,b[c].descr,b[c].args,b[c].min||99,b[c].skip)},dhtmlx.assert_method_process=function(a,b,c,d,e,f){var g=a[b];f||(a[b]=function(){if(arguments.length!=d.length&&arguments.length<e)dhtmlx.log("warn","Incorrect count of parameters\n"+a[b].describe()+"\n\nExpecting "+d.length+" but have only "+arguments.length);else for(var c=0;c<d.length;c++)d[c][3]||d[c][2](arguments[c])||dhtmlx.log("warn","Incorrect method call\n"+a[b].describe()+"\n\nActual value of "+(c+1)+" parameter: {"+typeof arguments[c]+"} "+arguments[c]);return g.apply(this,arguments)}),a[b].describe=function(){return dhtmlx.assert_method_info(a,b,c,d)}},dhtmlx.assert_event_call=function(a,b,c){a._event_check&&(a._event_check[b]?dhtmlx.isNotDefined(c)?dhtmlx.log("warn","Event without parameters :"+b):a._event_check_size[b]!=c.length&&dhtmlx.log("warn","Incorrect event call, expected "+a._event_check_size[b]+" parameter(s), but have "+c.length+" parameter(s), for "+b+" event"):dhtmlx.log("warn","Not expected event call :"+b))},dhtmlx.assert_event_attach=function(a,b){a._event_check&&!a._event_check[b]&&dhtmlx.log("warn","Unknown event name: "+b)},dhtmlx.assert_property=function(a,b){a._settings_check||(a._settings_check={}),dhtmlx.extend(a._settings_check,b)},dhtmlx.assert_check=function(a,b){if("object"==typeof a)for(var c in a)dhtmlx.assert_settings(c,a[c],b)},dhtmlx.assert_settings=function(a,b,c){if(c=c||this._settings_check){if(!c[a])return dhtmlx.log("warn","Unknown propery: "+a);for(var d=!1,e=0;e<c[a].length;e++){var f=c[a][e];if("string"!=typeof f&&("function"==typeof f?d=d||f(b):"object"==typeof f&&"function"==typeof f[1]&&(d=d||f[1](b),d&&f[2]&&dhtmlx.assert_check(b,f[2])),d))break}d||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(a,c)+"\nActual value: {"+typeof b+"} "+b)}},dhtmlx.assert_info=function(a,b){for(var c=b[a],d="",e=[],f=0;f<c.length;f++)"string"==typeof rule?d=c[f]:c[f].describe?e.push(c[f].describe()):c[f][1]&&c[f][1].describe&&e.push(c[f][1].describe());return"Property: "+a+", "+d+" \nExpected value: \n - "+e.join("\n - ")},dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(a){return"string"!=typeof a?!1:0!==a.indexOf("#")?!1:""!==a.substr(1).replace(/[0-9A-F]/gi,"")?!1:!0},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(a){return"function"==typeof a?!0:"string"==typeof a?!0:!1},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},dhtmlx.assert_rule_boolean=function(a){return"boolean"==typeof a?!0:!1},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(a){return"object"==typeof a?!0:!1},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(a){return"string"==typeof a?!0:!1},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(a){return!!dhtmlx.toNode(a)},dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(a){var b=function(b){return a[b]};return b.describe=function(){var b=[];for(var c in a)b.push(c);return"{String} can take one of next values: "+b.join(", ")},b},dhtmlx.assert_rule_dimension=function(a){return 1*a==a&&!isNaN(a)&&a>=0?!0:!1},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(a){return"number"==typeof a?!0:!1},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(a){return"function"==typeof a?!0:!1},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(){return!0},dhtmlx.assert_rule_any.describe=function(){return"Any value"},dhtmlx.assert_rule_mix=function(a,b){var c=function(c){return a(c)||b(c)?!0:!1};return c.describe=function(){return a.describe()},c}),dhtmlx.version="3.0",dhtmlx.codebase="./",dhtmlx.copy=function(a){var b=dhtmlx.copy._function;return b.prototype=a,new b},dhtmlx.copy._function=function(){},dhtmlx.extend=function(a,b){for(var c in b)a[c]=b[c];return dhtmlx.assert_enabled()&&b._assert&&(a._assert(),a._assert=null),dhtmlx.assert(a,"Invalid nesting target"),dhtmlx.assert(b,"Invalid nesting source"),b._init&&a._init(),a},dhtmlx.proto_extend=function(){for(var a=arguments,b=a[0],c=[],d=a.length-1;d>0;d--){"function"==typeof a[d]&&(a[d]=a[d].prototype);for(var e in a[d])"_init"==e?c.push(a[d][e]):b[e]||(b[e]=a[d][e])}a[0]._init&&c.push(a[0]._init),b._init=function(){for(var a=0;a<c.length;a++)c[a].apply(this,arguments)},b.base=a[1];var f=function(a){this._init(a),this._parseSettings&&this._parseSettings(a,this.defaults)};return f.prototype=b,b=a=null,f},dhtmlx.bind=function(a,b){return function(){return a.apply(b,arguments)}},dhtmlx.require=function(a){dhtmlx._modules[a]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText),dhtmlx._modules[a]=!0)},dhtmlx._modules={},dhtmlx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)},dhtmlx.methodPush=function(a,b){return function(){var c=!1;return c=a[b].apply(a,arguments)}},dhtmlx.isNotDefined=function(a){return"undefined"==typeof a},dhtmlx.delay=function(a,b,c,d){setTimeout(function(){var d=a.apply(b,c);return a=b=c=null,d},d||1)},dhtmlx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhtmlx.toNode=function(a){return"string"==typeof a?document.getElementById(a):a},dhtmlx.toArray=function(a){return dhtmlx.extend(a||[],dhtmlx.PowerArray)},dhtmlx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhtmlx._events={},dhtmlx.event=function(a,b,c,d){a=dhtmlx.toNode(a);var e=dhtmlx.uid();return dhtmlx._events[e]=[a,b,c],d&&(c=dhtmlx.bind(c,d)),a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c),e},dhtmlx.eventRemove=function(a){if(a){dhtmlx.assert(this._events[a],"Removing non-existing event");var b=dhtmlx._events[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]),delete this._events[a]}},dhtmlx.log=function(a,b,c){window.console&&console.log&&(a=a.toLowerCase(),window.console[a]?window.console[a](b||"unknown error"):window.console.log(a+": "+b),c&&window.console.log(c))},dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date,dhtmlx.log("Info","Timing start ["+a+"]"),window.setTimeout(function(){var b=new Date;dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx._start_time_log.valueOf())/1e3+"s")},1)},dhtmlx.log_time=function(a){var b="_start_time_log"+a;if(dhtmlx[b]){var c=new Date;dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx[b].valueOf())/1e3+"s"),dhtmlx[b]=null}else dhtmlx[b]=new Date,dhtmlx.log("Info","Timing start ["+a+"]")},dhtmlx.error=function(a,b){dhtmlx.log("error",a,b)},dhtmlx.EventSystem={_init:function(){this._events={},this._handlers={},this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(a,b){if(this._events._block)return!0;a=a.toLowerCase(),dhtmlx.assert_event_call(this,a,b);var c=this._events[a.toLowerCase()],d=!0;if(dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+a,b),c)for(var e=0;e<c.length;e++)c[e].apply(this,b||[])===!1&&(d=!1);return this._map[a]&&!this._map[a].callEvent(a,b)&&(d=!1),d},attachEvent:function(a,b,c){a=a.toLowerCase(),dhtmlx.assert_event_attach(this,a),c=c||dhtmlx.uid(),b=dhtmlx.toFunctor(b);var d=this._events[a]||dhtmlx.toArray();return d.push(b),this._events[a]=d,this._handlers[c]={f:b,t:a},c},detachEvent:function(a){if(this._handlers[a]){var b=this._handlers[a].t,c=this._handlers[a].f,d=this._events[b];d.remove(c),delete this._handlers[a]}}},dhtmlx.PowerArray={removeAt:function(a,b){a>=0&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(b||0===b){var c=this.splice(b,this.length-b);this[b]=a,this.push.apply(this,c)}else this.push(a)},find:function(a){for(i=0;i<this.length;i++)if(a==this[i])return i;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this}},dhtmlx.env={},-1!=navigator.userAgent.indexOf("Opera")?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=9)),dhtmlx.env={},function(){dhtmlx.env.transform=!1,dhtmlx.env.transition=!1;var a={};a.names=["transform","transition"],a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"],a.transition=["transition","WebkitTransition","MozTransition","oTransition"];for(var b=document.createElement("DIV"),c=0;c<a.names.length;c++)for(;p=a[a.names[c]].pop();)"undefined"!=typeof b.style[p]&&(dhtmlx.env[a.names[c]]=!0)}(),dhtmlx.env.transform_prefix=function(){var a;return dhtmlx._isOpera?a="-o-":(a="",dhtmlx._isFF&&(a="-moz-"),dhtmlx._isWebKit&&(a="-webkit-")),a}(),dhtmlx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),dhtmlx.zIndex={drag:1e4},dhtmlx.html={create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);return b.style&&(d.style.cssText=b.style),b["class"]&&(d.className=b["class"]),c&&(d.innerHTML=c),d},getValue:function(a){return a=dhtmlx.toNode(a),a?dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b?b.parentNode.insertBefore(a,b):c.appendChild(a))},locate:function(a,b){a=a||event;for(var c=a.target||a.srcElement;c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{y:Math.round(i),x:Math.round(j)}}for(var i=0,j=0;a;)i+=parseInt(a.offsetTop,10),j+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:i,x:j}},pos:function(a){if(a=a||event,a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=dhtmlx._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault(),dhtmlx.html.stopEvent(a)},stopEvent:function(a){return(a||event).cancelBubble=!0,!1},addCss:function(a,b){a.className+=" "+b},removeCss:function(a,b){a.className=a.className.replace(RegExp(b,"g"),"")}},function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase"),a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),dhtmlx.codebase=a.slice(0,a.length).join("/")+"/")}(),dhtmlx.ui||(dhtmlx.ui={}),dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){},this._htmlmap=null,this._htmlrows=null,this._html&&document.body.appendChild(this._html),this._html=null,this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null),this._obj=this._dataobj=null,this.data=null,this._events=this._handlers={},this.render&&(this.render=function(){})}},dhtmlx.destructors=[],dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var a=0;a<dhtmlx.destructors.length;a++)dhtmlx.destructors[a].destructor();dhtmlx.destructors=[]}for(var b in dhtmlx._events){var c=dhtmlx._events[b];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]),delete dhtmlx._events[b]}}),dhtmlx.ajax=function(a,b,c){if(0!==arguments.length){var d=new dhtmlx.ajax;c&&(d.master=c),d.get(a,null,b)}return this.getXHR?this:new dhtmlx.ajax},dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,b,c){var d=this.getXHR();if("function"==typeof c&&(c=[c]),"object"==typeof b){var e=[];for(var f in b){var g=b[f];(null===g||g===dhtmlx.undefined)&&(g=""),e.push(f+"="+encodeURIComponent(g))}b=e.join("&")}b&&!this.post&&(a=a+(-1!=a.indexOf("?")?"&":"?")+b,b=null),d.open(this.post?"POST":"GET",a,!this._sync),this.post&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");var h=this;return d.onreadystatechange=function(){if(!d.readyState||4==d.readyState){if(c&&h)for(var a=0;a<c.length;a++)c[a]&&c[a].call(h.master||h,d.responseText,d.responseXML,d);h.master=null,c=h=null}},d.send(b||null),d},get:function(a,b,c){return this.post=!1,this.send(a,b,c)},post:function(a,b,c){return this.post=!0,this.send(a,b,c)},sync:function(){return this._sync=!0,this}},dhtmlx.AtomDataLoader={_init:function(a){this.data={},a&&(this._settings.datatype=a.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){return this._ready_for_data?(this.load(a,this._settings.datatype),a):a},data_setter:function(a){return this._ready_for_data?(this.parse(a,this._settings.datatype),!0):a},load:function(a,b){this.callEvent("onXLS",[]),"string"==typeof b?(this.data.driver=dhtmlx.DataDriver[b],b=arguments[2]):this.data.driver=dhtmlx.DataDriver.xml,dhtmlx.ajax(a,[this._onLoad,b],this)},parse:function(a,b){this.callEvent("onXLS",[]),this.data.driver=dhtmlx.DataDriver[b||"xml"],this._onLoad(a,null)},_onLoad:function(a,b){var c=this.data.driver,d=c.getRecords(c.toObject(a,b))[0];this.data=c?c.getDetails(d):a,this.callEvent("onXLE",[])},_check_data_feed:function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var b=this._settings.dataFeed;return"function"==typeof b?b.call(this,a.id||a,a):(b=b+(-1==b.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a),this.callEvent("onXLS",[]),dhtmlx.ajax(b,function(a){this._ignore_feed=!0,this.setValues(dhtmlx.DataDriver.json.toObject(a)[0]),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhtmlx.DataDriver={},dhtmlx.DataDriver.json={toObject:function(data){return data||(data="[]"),"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(a){return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0,_key:a.dhx_security}}},dhtmlx.DataDriver.json_ext={toObject:function(data){if(data||(data="[]"),"string"==typeof data){var temp;eval("temp="+data),dhtmlx.temp=[];for(var header=temp.header,i=0;i<temp.data.length;i++){for(var item={},j=0;j<header.length;j++)"undefined"!=typeof temp.data[i][j]&&(item[header[j]]=temp.data[i][j]);dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0}}},dhtmlx.DataDriver.html={toObject:function(a){if("string"==typeof a){var b=null;return-1==a.indexOf("<")&&(b=dhtmlx.toNode(a)),b||(b=document.createElement("DIV"),b.innerHTML=a),b.getElementsByTagName(this.tag)}return a},getRecords:function(a){return a.tagName?a.childNodes:a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"},dhtmlx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{_size:0,_from:0}}},dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","},dhtmlx.DataDriver.xml={toObject:function(a,b){return b&&(b=this.checkResponse(a,b))?b:"string"==typeof a?this.fromString(a):a},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_key:a.documentElement.getAttribute("dhx_security")}},xpath:function(a,b){if(window.XPathResult){var c=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null),f=e.iterateNext();f;)d.push(f),f=e.iterateNext();return d}var g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(h){}if(g)return a.selectNodes(b);var i=b.split("/").pop();return a.getElementsByTagName(i)},tagToObject:function(a,b){b=b||{};var c=!1,d=a.attributes;if(d&&d.length){for(var e=0;e<d.length;e++)b[d[e].name]=d[e].value;c=!0}for(var f=a.childNodes,e=0;e<f.length;e++)if(1==f[e].nodeType){var g=f[e].tagName;"undefined"!=typeof b[g]?(b[g]instanceof Array||(b[g]=[b[g]]),b[g].push(this.tagToObject(f[e],{}))):b[f[e].tagName]=this.tagToObject(f[e],{}),c=!0}return c?(b.value=this.nodeValue(a),b):this.nodeValue(a)},nodeValue:function(a){return a.firstChild?a.firstChild.wholeText||a.firstChild.data:""},fromString:function(a){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");return b.loadXML(a),b}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(a,b){if(b&&b.firstChild&&"parsererror"!=b.firstChild.tagName)return b;var c=this.fromString(a.replace(/^[\s]+/,""));return c?c:void dhtmlx.error("xml can't be parsed",a)}},dhtmlx.DataLoader={_init:function(a){a=a||"",this.name="DataStore",this.data=a.datastore||new dhtmlx.DataStore,this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a){dhtmlx.AtomDataLoader.load.apply(this,arguments),this.data.feed||(this.data.feed=function(b,c){return this._load_count?this._load_count=[b,c]:(this._load_count=!0,void this.load(a+(-1==a.indexOf("?")?"?":"&")+"posStart="+b+"&count="+c,function(){var a=this._load_count;this._load_count=!1,"object"==typeof a&&this.data.feed.apply(this,a)}))})},_onLoad:function(a,b){this.data._parse(this.data.driver.toObject(a,b)),this.callEvent("onXLE",[]),this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(a){return this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(a,b){if(this._settings.dataFeed){var c={};if(!a&&!c)return;if("function"==typeof a){if(!b)return;a(b,c)}else c={text:b};this.clearAll();var d=this._settings.dataFeed;if("function"==typeof d)return d.call(this,b,c);var e=[];for(var f in c)e.push("dhx_filter["+f+"]="+encodeURIComponent(c[f]));return this.load(d+(d.indexOf("?")<0?"?":"&")+e.join("&"),this._settings.datatype),!1}},this)),a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);a&&a.call&&a.apply(this,arguments)}}},dhtmlx.DataStore=function(){this.name="DataStore",dhtmlx.extend(this,dhtmlx.EventSystem),this.setDriver("xml"),this.pull={},this.order=dhtmlx.toArray()},dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver"),this.driver=dhtmlx.DataDriver[a]},_parse:function(a){this.callEvent("onParse",[this.driver,a]),this._filter_order&&this.filter();var b=this.driver.getInfo(a);b._key&&(dhtmlx.security_key=b._key);var c=this.driver.getRecords(a),d=1*(b._from||0);0===d&&this.order[0]&&(d=this.order.length);for(var e=0,f=0;f<c.length;f++){var g=this.driver.getDetails(c[f]),h=this.id(g);this.pull[h]||(this.order[e+d]=h,e++),this.pull[h]=g,this.extraParser&&this.extraParser(g),this._scheme&&(this._scheme.$init?this._scheme.$update(g):this._scheme.$update&&this._scheme.$update(g))}for(var f=0;f<b._size;f++)if(!this.order[f]){var h=dhtmlx.uid(),g={id:h,$template:"loading"};this.pull[h]=g,this.order[f]=h}this.callEvent("onStoreLoad",[this.driver,a]),this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(a,b){dhtmlx.assert(this.pull[a],"Can't change id, for non existing item: "+a),this.pull[b]=this.pull[a],this.pull[b].id=b,this.order[this.order.find(a)]=b,this._filter_order&&(this._filter_order[this._filter_order.find(a)]=b),this.callEvent("onIdChange",[a,b]),this._render_change_id&&this._render_change_id(a,b)},get:function(a){return this.item(a)},set:function(a,b){return this.update(a,b)},item:function(a){return this.pull[a]},update:function(a,b){return this._scheme&&this._scheme.$update&&this._scheme.$update(b),this.callEvent("onBeforeUpdate",[a,b])===!1?!1:(this.pull[a]=b,void this.refresh(a))},refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a){this._skip_refresh=!0,a.call(this),this._skip_refresh=!1},getRange:function(a,b){if(a=a?this.indexById(a):this.startOffset||0,b?b=this.indexById(b):(b=Math.min(this.endOffset||1/0,this.dataCount()-1),0>b&&(b=0)),a>b){var c=b;b=a,a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(b||1/0,this.dataCount()-1);for(var c=dhtmlx.toArray(),d=a||0;b>=d;d++)c.push(this.item(this.order[d]));return c},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(0>a||0>b)return void dhtmlx.error("DataStore::move","Incorrect indexes");var c=this.idByIndex(a),d=this.item(c);this.order.removeAt(a),this.order.insertAt(c,Math.min(this.order.length,b)),this.callEvent("onStoreUpdated",[c,d,"move"])},scheme:function(a){this._scheme=a},sync:function(a,b,c){"function"!=typeof b&&(c=b,b=null),dhtmlx.debug_bind&&(this.debug_sync_master=a,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));var d=a;"DataStore"!=a.name&&(a=a.data);var e=dhtmlx.bind(function(d,e,f){("update"!=f||b)&&(d=null),d||(this.order=dhtmlx.toArray([].concat(a.order)),this._filter_order=null,this.pull=a.pull,b&&this.silent(b),this._on_sync&&this._on_sync()),dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),c?c=!1:this.refresh(d)
},this);a.attachEvent("onStoreUpdated",e),this.feed=function(a,b){d.loadNext(b,a)},e()},add:function(a,b){if(this._scheme){a=a||{};for(var c in this._scheme)a[c]=a[c]||this._scheme[c];this._scheme&&(this._scheme.$init?this._scheme.$update(a):this._scheme.$update&&this._scheme.$update(a))}var d=this.id(a),e=this.dataCount();if((dhtmlx.isNotDefined(b)||0>b)&&(b=e),b>e&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),b=Math.min(this.order.length,b)),this.callEvent("onBeforeAdd",[d,a,b])===!1)return!1;if(this.exists(d))return dhtmlx.error("Not unique ID");if(this.pull[d]=a,this.order.insertAt(d,b),this._filter_order){var f=this._filter_order.length;!b&&this.order.length&&(f=0),this._filter_order.insertAt(d,f)}return this.callEvent("onafterAdd",[d,b]),this.callEvent("onStoreUpdated",[d,a,"add"]),d},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===!1)return!1;if(!this.exists(a))return dhtmlx.error("Not existing ID",a);var c=this.item(a);this.order.remove(a),this._filter_order&&this._filter_order.remove(a),delete this.pull[a],this.callEvent("onafterdelete",[a]),this.callEvent("onStoreUpdated",[a,c,"delete"])}},clearAll:function(){this.pull={},this.order=dhtmlx.toArray(),this.feed=null,this._filter_order=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(a){return(a>=this.order.length||0>a)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[a]},indexById:function(a){var b=this.order.find(a);return b},next:function(a,b){return this.order[this.indexById(a)+(b||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,b){return this.order[this.indexById(a)-(b||1)]},sort:function(a,b,c){var d=a;"function"==typeof a?d={as:a,dir:b}:"string"==typeof a&&(d={by:a,dir:b,as:c});var e=[d.by,d.dir,d.as];if(this.callEvent("onbeforesort",e)){if(this.order.length){var f=dhtmlx.sort.create(d),g=this.getRange(this.first(),this.last());g.sort(f),this.order=g.map(function(a){return this.id(a)},this)}this.refresh(),this.callEvent("onaftersort",e)}},filter:function(a,b){if(this.callEvent("onBeforeFilter",[a,b])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(a){var c=a;b=b||"","string"==typeof a&&(a=dhtmlx.Template.fromHTML(a),b=b.toString().toLowerCase(),c=function(b,c){return-1!=a(b).toLowerCase().indexOf(c)});for(var d=dhtmlx.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];c(this.item(f),b)&&d.push(f)}this._filter_order=this.order,this.order=d}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(a,b){for(var c=0;c<this.order.length;c++)a.call(b||this,this.item(this.order[c]))},provideApi:function(a,b){this.debug_bind_master=a,b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});for(var c=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"],d=0;d<c.length;d++)a[c[d]]=dhtmlx.methodPush(this,c[d]);dhtmlx.assert_enabled()&&this.assert_event(a)},serialize:function(){for(var a=this.order,b=[],c=0;c<a.length;c++)b.push(this.pull[a[c]]);return b}},dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(a,b){return a=1*a,b=1*b,a>b?1:b>a?-1:0},string_strict:function(a,b){return a=a.toString(),b=b.toString(),a>b?1:b>a?-1:0},string:function(a,b){return a=a.toString().toLowerCase(),b=b.toString().toLowerCase(),a>b?1:b>a?-1:0}},by:function(a,b){return a?("function"!=typeof b&&(b=dhtmlx.sort.as[b||"string"]),a=dhtmlx.Template.fromHTML(a),function(c,d){return b(a(c),a(d))}):b},dir:function(a,b){return"asc"==a?b:function(a,c){return-1*b(a,c)}}},dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(a){a=a||event;var b=a.which||a.keyCode;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[b,a.ctrlKey,a.shiftKey,a])}},dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this)),this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this),this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var b=dhtmlx.html.locate(a,this._id);return b&&!this.callEvent("onBeforeContextMenu",[b,a])?dhtmlx.html.preventEvent(a):void 0},_onMouse:function(a){dhtmlx._isIE&&(a=document.createEventObject(event)),this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer),this.callEvent("onMouseMoving",[a]),this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){"mousemove"==a.type?this._onMouseMove(a):this._onMouseOut(a)},this),500)},_onMouseMove:function(a){this._mouseEvent(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(a,b,c){a=a||event;for(var d=a.target||a.srcElement,e="",f=null,g=!1;d&&d.parentNode;){if(!g&&d.getAttribute&&(f=d.getAttribute(this._id))){if(d.getAttribute("userdata")&&this.callEvent("onLocateData",[f,d]),!this.callEvent("on"+c,[f,a,d]))return;g=!0}if(e=d.className,e&&(e=e.split(" "),e=e[0]||e[1],b[e]))return b[e].call(this,a,f||dhtmlx.html.locate(a,this._id),d);d=d.parentNode}return g}},dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(a,b){return"object"==typeof a?this._parseSeetingColl(a):this._define(a,b)},_define:function(a,b){dhtmlx.assert_settings.call(this,a,b);var c=this[a+"_setter"];return this._settings[a]=c?c.call(this,b):b},_parseSeetingColl:function(a){if(a)for(var b in a)this._define(b,a[b])},_parseSettings:function(a,b){var c=dhtmlx.extend({},b);"object"!=typeof a||a.tagName||dhtmlx.extend(c,a),this._parseSeetingColl(c)},_mergeSettings:function(a,b){for(var c in b)switch(typeof a[c]){case"object":a[c]=this._mergeSettings(a[c]||{},b[c]);break;case"undefined":a[c]=b[c]}return a},_parseContainer:function(a,b,c){"object"!=typeof a||a.tagName||(a=a.container),this._obj=this.$view=dhtmlx.toNode(a),!this._obj&&c&&(this._obj=c(a)),dhtmlx.assert(this._obj,"Incorrect html container"),this._obj.className+=" "+b,this._obj.onselectstart=function(){return!1},this._dataobj=this._obj},_set_type:function(a){return"object"==typeof a?this.type_setter(a):(dhtmlx.assert(this.types,"RenderStack :: Types are not defined"),dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a),this.type=dhtmlx.extend({},this.types[a]),void this.customize())},customize:function(a){a&&dhtmlx.extend(this.type,a),this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type)),this.type._item_end=this.template_item_end(this.type),this.render()},type_setter:function(a){return this._set_type("object"==typeof a?dhtmlx.Type.add(this,a):a),a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){return this._obj.className+=" "+a,a}},dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(a){var b=dhtmlx.Template.setter(a),c=this;return function(){return b.apply(c,arguments)}},fromHTML:function(a){return"function"==typeof a?a:this._cache[a]?this._cache[a]:(a=(a||"").toString(),a=a.replace(/[\r\n]+/g,"\\n"),a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"'),a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"'),a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"'),a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"'),a=a.replace(/\{obj\}/g,'"+obj+"'),a=a.replace(/\{-obj/g,"{obj"),a=a.replace(/\{-common/g,"{common"),a='return "'+a+'";',this._cache[a]=Function("obj","common",a))}},dhtmlx.Type={add:function(a,b){!a.types&&a.prototype.types&&(a=a.prototype),dhtmlx.assert_enabled()&&this.assert_event(b);var c=b.name||"default";return this._template(b),this._template(b,"edit"),this._template(b,"loading"),a.types[c]=dhtmlx.extend(dhtmlx.extend({},a.types[c]||this._default),b),c},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(a,b){b="template"+(b?"_"+b:"");var c=a[b];if(c&&"string"==typeof c){if(-1!=c.indexOf("->"))switch(c=c.split("->"),c[0]){case"html":c=dhtmlx.html.getValue(c[1]).replace(/\"/g,'\\"');break;case"http":c=(new dhtmlx.ajax).sync().get(c[1],{uid:(new Date).valueOf()}).responseText}a[b]=dhtmlx.Template.fromHTML(c)}}},dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){(!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[]))}},dhtmlx.ui.Tooltip=function(a){this.name="Tooltip",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),"string"==typeof a&&(a={template:a}),dhtmlx.extend(this,dhtmlx.Settings),dhtmlx.extend(this,dhtmlx.SingleRender),this._parseSettings(a,{type:"default",dy:0,dx:20}),this._dataobj=this._obj=document.createElement("DIV"),this._obj.className="dhx_tooltip",dhtmlx.html.insertBefore(this._obj,document.body.firstChild)},dhtmlx.ui.Tooltip.prototype={show:function(a,b){this._disabled||(this.data!=a&&(this.data=a,this.render(a)),this._obj.style.top=b.y+this._settings.dy+"px",this._obj.style.left=b.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null,this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty},dhtmlx.AutoTooltip={tooltip_setter:function(a){var b=new dhtmlx.ui.Tooltip(a);return this.attachEvent("onMouseMove",function(a,c){b.show(this.get(a),dhtmlx.html.pos(c))}),this.attachEvent("onMouseOut",function(){b.hide()}),this.attachEvent("onMouseMoving",function(){b.hide()}),b}},dhtmlx.compat=function(a,b){dhtmlx.compat[a]&&dhtmlx.compat[a](b)},function(){if(!window.dhtmlxError){var a=function(){};window.dhtmlxError={catchError:a,throwError:a},window.convertStringToBoolean=function(a){return!!a},window.dhtmlxEventable=function(a){dhtmlx.extend(a,dhtmlx.EventSystem)};var b={getXMLTopNode:function(){},doXPath:function(a){return dhtmlx.DataDriver.xml.xpath(this.xml,a)},xmlDoc:{responseXML:!0}};dhtmlx.compat.dataProcessor=function(a){var c="_sendData",d="_in_progress",e="_tMode",f="_waitMode";a[c]=function(a,c){if(a){if(c&&(this[d][c]=(new Date).valueOf()),!this.callEvent("onBeforeDataSending",c?[c,this.getState(c)]:[]))return!1;var g=this,h=this.serverProcessor;"POST"!=this[e]?dhtmlx.ajax().get(h+(-1!=h.indexOf("?")?"&":"?")+this.serialize(a,c),"",function(a,c){b.xml=dhtmlx.DataDriver.xml.checkResponse(a,c),g.afterUpdate(g,null,null,null,b)}):dhtmlx.ajax().post(h,this.serialize(a,c),function(a,c){b.xml=dhtmlx.DataDriver.xml.checkResponse(a,c),g.afterUpdate(g,null,null,null,b)}),this[f]++}}}}}(),dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachAbstract=function(a,b){var c=document.createElement("DIV");c.id="CustomObject_"+dhtmlx.uid(),c.style.width="100%",c.style.height="100%",c.cmp="grid",document.body.appendChild(c),this.attachObject(c.id),b.container=c.id;var d=this.vs[this.av];d.grid=new window[a](b),d.gridId=c.id,d.gridObj=c,d.grid.setSizes=function(){this.resize?this.resize():this.render()};var e="_viewRestore";return this.vs[this[e]()].grid},dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)},dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)},dhtmlx.compat.layout=function(){},dataProcessor.prototype={setTransactionMode:function(a,b){this._tMode=a,this._tSend=b},escape:function(a){return this._utf?encodeURIComponent(a):escape(a)},enableUTFencoding:function(a){this._utf=convertStringToBoolean(a)},setDataColumns:function(a){this._columns="string"==typeof a?a.split(","):a},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(a){this._endnm=convertStringToBoolean(a)},enablePartialDataSend:function(a){this._changed=convertStringToBoolean(a)},setUpdateMode:function(a,b){this.autoUpdate="cell"==a,this.updateMode=a,this.dnd=b},ignore:function(a,b){this._silent_mode=!0,a.call(b||window),this._silent_mode=!1},setUpdated:function(a,b,c){if(!this._silent_mode){var d=this.findRow(a);c=c||"updated";var e=this.obj.getUserData(a,this.action_param);e&&"updated"==c&&(c=e),b?(this.set_invalid(a,!1),this.updatedRows[d]=a,this.obj.setUserData(a,this.action_param,c),this._in_progress[a]&&(this._in_progress[a]="wait")):this.is_invalid(a)||(this.updatedRows.splice(d,1),this.obj.setUserData(a,this.action_param,"")),b||this._clearUpdateFlag(a),this.markRow(a,b,c),b&&this.autoUpdate&&this.sendData(a)}},_clearUpdateFlag:function(){},markRow:function(a,b,c){var d="",e=this.is_invalid(a);if(e&&(d=this.styles[e],b=!0),this.callEvent("onRowMark",[a,b,c,e])&&(d=this.styles[b?c:"clear"]+d,this.obj[this._methods[0]](a,d),e&&e.details)){d+=this.styles[e+"_cell"];for(var f=0;f<e.details.length;f++)e.details[f]&&this.obj[this._methods[1]](a,f,d)}},getState:function(a){return this.obj.getUserData(a,this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(a,b,c){c&&(b={value:b,details:c,toString:function(){return this.value.toString()}}),this._invalid[a]=b},checkBeforeUpdate:function(){return!0},sendData:function(a){return!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2?(this.obj.editStop&&this.obj.editStop(),"undefined"==typeof a||this._tSend?this.sendAllData():this._in_progress[a]?!1:(this.messages=[],!this.checkBeforeUpdate(a)&&this.callEvent("onValidationError",[a,this.messages])?!1:void this._beforeSendData(this._getRowData(a),a))):void 0},_beforeSendData:function(a,b){return this.callEvent("onBeforeUpdate",[b,this.getState(b),a])?void this._sendData(a,b):!1},serialize:function(a,b){if("string"==typeof a)return a;if("undefined"!=typeof b)return this.serialize_one(a,"");var c=[],d=[];for(var e in a)a.hasOwnProperty(e)&&(c.push(this.serialize_one(a[e],e+this.post_delim)),d.push(e));return c.push("ids="+this.escape(d.join(","))),dhtmlx.security_key&&c.push("dhx_security="+dhtmlx.security_key),c.join("&")},serialize_one:function(a,b){if("string"==typeof a)return a;var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(this.escape((b||"")+d)+"="+this.escape(a[d]));return c.join("&")},_sendData:function(a,b){if(a){if(!this.callEvent("onBeforeDataSending",b?[b,this.getState(b),a]:[null,null,a]))return!1;b&&(this._in_progress[b]=(new Date).valueOf());var c=new dtmlXMLLoaderObject(this.afterUpdate,this,!0),d=this.serverProcessor+(this._user?getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");"POST"!=this._tMode?c.loadXML(d+(-1!=d.indexOf("?")?"&":"?")+this.serialize(a,b)):c.loadXML(d,!0,this.serialize(a,b)),this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var a=!0,b=0;b<this.updatedRows.length;b++)a&=this.checkBeforeUpdate(this.updatedRows[b]);if(!a&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(var b=0;b<this.updatedRows.length;b++)if(!this._in_progress[this.updatedRows[b]]){if(this.is_invalid(this.updatedRows[b]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[b]),this.updatedRows[b]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(){for(var a={},b=!1,c=0;c<this.updatedRows.length;c++){var d=this.updatedRows[c];this._in_progress[d]||this.is_invalid(d)||this.callEvent("onBeforeUpdate",[d,this.getState(d)])&&(a[d]=this._getRowData(d,d+this.post_delim),b=!0,this._in_progress[d]=(new Date).valueOf())}return b?a:null},setVerificator:function(a,b){this.mandatoryFields[a]=b||function(a){return""!=a}},clearVerificator:function(a){this.mandatoryFields[a]=!1},findRow:function(a){var b=0;for(b=0;b<this.updatedRows.length&&a!=this.updatedRows[b];b++);return b},defineAction:function(a,b){this._uActions||(this._uActions=[]),this._uActions[a]=b},afterUpdateCallback:function(a,b,c,d){var e=a,f="error"!=c&&"invalid"!=c;if(f||this.set_invalid(a,c),this._uActions&&this._uActions[c]&&!this._uActions[c](d))return delete this._in_progress[e];"wait"!=this._in_progress[e]&&this.setUpdated(a,!1);var g=a;switch(c){case"inserted":case"insert":b!=a&&(this.obj[this._methods[2]](a,b),a=b);break;case"delete":case"deleted":return this.obj.setUserData(a,this.action_param,"true_deleted"),this.obj[this._methods[3]](a),delete this._in_progress[e],this.callEvent("onAfterUpdate",[a,c,b,d])}"wait"!=this._in_progress[e]?(f&&this.obj.setUserData(a,this.action_param,""),delete this._in_progress[e]):(delete this._in_progress[e],this.setUpdated(b,!0,this.obj.getUserData(a,this.action_param))),this.callEvent("onAfterUpdate",[g,c,b,d])},afterUpdate:function(a,b,c,d,e){if(e.getXMLTopNode("data"),e.xmlDoc.responseXML){for(var f=e.doXPath("//data/action"),g=0;g<f.length;g++){var h=f[g],i=h.getAttribute("type"),j=h.getAttribute("sid"),k=h.getAttribute("tid");a.afterUpdateCallback(j,k,i,h)}a.finalizeUpdate()}},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(a){this.obj=a,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(a){this.attachEvent("onAfterUpdate",a)},enableDebug:function(){},setOnBeforeUpdateHandler:function(a){this.attachEvent("onBeforeDataSending",a)},setAutoUpdate:function(a,b){a=a||2e3,this._user=b||(new Date).valueOf(),this._need_update=!1,this._loader=null,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(a,b,c,d){this.afterAutoUpdate(a,b,c,d)}),this.attachEvent("onFullSync",function(){this.fullSync()});var c=this;window.setInterval(function(){c.loadUpdate()},a)},afterAutoUpdate:function(a,b){return"collision"==b?(this._need_update=!0,!1):!0},fullSync:function(){return 1==this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(a,b){return this._update_busy?!1:(this._update_busy=!0,this._loader=this._loader||new dtmlXMLLoaderObject(!0),this._loader.async=!0,this._loader.waitCall=b,void this._loader.loadXML(a))},_v:function(a){return a.firstChild?a.firstChild.nodeValue:""},_a:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=this._v(a[c]);return b},loadUpdate:function(){var a=this,b=this.obj.getUserData(0,"version"),c=this.serverProcessor+getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+b].join("&");c=c.replace("editing=true&",""),this.getUpdates(c,function(){var b=a._loader.doXPath("//userdata");a.obj.setUserData(0,"version",a._v(b[0]));var c=a._loader.doXPath("//update");if(c.length){a._silent_mode=!0;for(var d=0;d<c.length;d++){var e=c[d].getAttribute("status"),f=c[d].getAttribute("id"),g=c[d].getAttribute("parent");switch(e){case"inserted":a.callEvent("insertCallback",[c[d],f,g]);break;case"updated":a.callEvent("updateCallback",[c[d],f,g]);break;case"deleted":a.callEvent("deleteCallback",[c[d],f,g])}}a._silent_mode=!1}a._update_busy=!1,a=null})}},window.dhtmlXGridObject&&!dhtmlXGridObject.prototype._init_point_connector&&(dhtmlXGridObject.prototype._init_point_connector=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._con_f_used=[].concat(this._con_f_used),dhtmlXGridObject.prototype._con_f_used=[];var a=function(a){return a=a.replace(/(\?|\&)connector[^\f]*/g,""),a+(-1!=a.indexOf("?")?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")},b=function(b){return a.call(this,b)+(this._connector_sorting||"")+(this._connector_filter||"")},c=function(a,c,d){return this._connector_sorting="&dhx_sort["+c+"]="+d,b.call(this,a)},d=function(a,c,d){for(var e=[],f=0;f<c.length;f++)e[f]="dhx_filter["+c[f]+"]="+encodeURIComponent(d[f]);return this._connector_filter="&"+e.join("&"),b.call(this,a)};this.attachEvent("onCollectValues",function(a){return this._con_f_used[a]?"object"==typeof this._con_f_used[a]?this._con_f_used[a]:!1:!0}),this.attachEvent("onDynXLS",function(){return this.xmlFileUrl=b.call(this,this.xmlFileUrl),!0}),this.attachEvent("onBeforeSorting",function(a,b,d){if("connector"==b){var e=this;return this.clearAndLoad(c.call(this,this.xmlFileUrl,a,d),function(){e.setSortImgState(!0,a,d)}),!1}return!0}),this.attachEvent("onFilterStart",function(a,b){var c=this.getSortingState();if(this._con_f_used.length){var e=this;return this.clearAndLoad(d.call(this,this.xmlFileUrl,a,b)),c.length&&e.setSortImgState(!0,c[0],c[1]),!1}return!0}),this.attachEvent("onXLE",function(a,b,c,d){}),this._init_point_connector&&this._init_point_connector()},dhtmlXGridObject.prototype._con_f_used=[],dhtmlXGridObject.prototype._in_header_connector_text_filter=function(a,b){return this._con_f_used[b]||(this._con_f_used[b]=1),this._in_header_text_filter(a,b)},dhtmlXGridObject.prototype._in_header_connector_select_filter=function(a,b){return this._con_f_used[b]||(this._con_f_used[b]=2),this._in_header_select_filter(a,b)},dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(){if(!this._colls_loaded&&this.cellType){for(var a=[],b=0;b<this.cellType.length;b++)(0==this.cellType[b].indexOf("co")||0==this.cellType[b].indexOf("clist")||2==this._con_f_used[b])&&a.push(b);a.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"&":"?")+"connector=true&dhx_colls="+a.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(){if(this._parseHead_connector.apply(this,arguments),!this._colls_loaded){for(var a=this.xmlLoader.doXPath("./coll_options",arguments[0]),b=0;b<a.length;b++){var c=a[b].getAttribute("for"),d=[],e=null;"combo"==this.cellType[c]?e=this.getColumnCombo(c):0==this.cellType[c].indexOf("co")&&(e=this.getCombo(c));for(var f=this.xmlLoader.doXPath("./item",a[b]),g=[],h=0;h<f.length;h++){var i=f[h].getAttribute("value");if(e){var j=f[h].getAttribute("label")||i;e.addOption?g.push([i,j]):e.put(i,j),d[d.length]=j}else d[d.length]=i}g.length?e&&e.addOption(g):d.length&&!e&&this.registerCList&&this.registerCList(1*c,d),this._con_f_used[1*c]&&(this._con_f_used[1*c]=d)}this._colls_loaded=!0}}),window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(a){this.init_original(a),a._dataprocessor=this,this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"}),dhtmlxError.catchError("LoadXML",function(a,b,c){alert(c[0].responseText)}),dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a)return!1;this._viewSave(this.conf.view),this._viewRestore(a),this._updateIdx(),this._adjustCont(),this.conf.view=a;var b="undefined"==typeof this.conf.views_loaded[this.conf.view];return this.conf.views_loaded[this.conf.view]=!0,b},dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view},dhtmlXCellObject.prototype.unloadView=function(a){if(a==this.conf.view){var b=this.conf.unloading;return this.conf.unloading=!0,this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachRibbon(),this._detachObject(null,!0),this.conf.unloading=b,void(this.conf.unloading||this._adjustCont(this._idd))}if(null!=this.views[a]){var c=this.views[a];for(var d in c.dataNodes)"function"==typeof c.dataNodes[d].unload&&c.dataNodes[d].unload(),c.dataNodes[d]=null,c.dataNodesCont[d]=null;"url"==c.dataType?null!=c.cellCont&&"null"!=c.cellCont[0]&&this._detachURLEvents(c.cellCont[0]):null!=c.dataObj&&("function"==typeof c.dataObj.unload?c.dataObj.unload():"function"==typeof c.dataObj.destructor&&c.dataObj.destructor(),c.dataObj=null),c=null,this._viewDelete(a),"undefined"!=typeof this.conf.views_loaded[a]&&delete this.conf.views_loaded[a]}},dhtmlXCellObject.prototype.getId=function(){return this._idd},dhtmlXCellObject.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var a=document.createElement("DIV");a.className="dhx_cell_progress_bar",this.cell.appendChild(a);var b=document.createElement("DIV");b.className="dhx_cell_progress_img",this.cell.appendChild(b),a=b=null,this._updateIdx(),this._adjustProgress()}},dhtmlXCellObject.prototype.progressOff=function(){this.conf.progress&&(this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]),this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]),this.conf.progress=!1,this._updateIdx())},dhtmlXCellObject.prototype._adjustProgress=function(){if(null!=this.conf.idx.pr1){this.conf.pr||(this.conf.pr={});var a=this.cell.childNodes[this.conf.idx.pr1],b=this.cell.childNodes[this.conf.idx.pr2];this.conf.pr.ofs||(b.style.width=a.offsetWidth+"px",b.style.height=a.offsetHeight+"px",this.conf.pr.ofs={w:b.offsetWidth-b.clientWidth,h:b.offsetHeight-b.clientHeight}),b.style.width=a.offsetWidth-this.conf.pr.ofs.w+"px",b.style.height=a.offsetHeight-this.conf.pr.ofs.h+"px",a=b=null}},dhtmlXCellObject.prototype._showBorders=function(a){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),a!==!0&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._hideBorders=function(a){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),a!==!0&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth},dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight},dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"},dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=!0,this.callEvent("_onCellUnload",[]),this.progressOff(),this.unloadView(this.conf.view),this.dataNodes=null,this.cell.parentNode.removeChild(this.cell),this.cell=null,window.dhx4._eventable(this,"clear");for(var a in this.views)this.unloadView(a);this.conf=null;for(var a in this)this[a]=null},dhtmlXCellObject.prototype.attachObject=function(a,b){if(!window.dhx4.s2b(b)||"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||(b=!1),"string"==typeof a&&(a=document.getElementById(a)),a.parentNode==this.cell.childNodes[this.conf.idx.cont])return void(a=null);if(b){a.style.display="";var c=a.offsetWidth,d=a.offsetHeight}this._attachObject(a),this.dataType="obj",a.style.display="",a=null,b&&this._adjustByCont(c,d)},dhtmlXCellObject.prototype.appendObject=function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.parentNode==this.cell.childNodes[this.conf.idx.cont]?void(a=null):(this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0),this._attachObject(a,null,null,!0),this.dataType="obj",a.style.display="",void(a=null))},dhtmlXCellObject.prototype.detachObject=function(a,b){this._detachObject(null,a,b)},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu},dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar},dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon},dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb},dhtmlXCellObject.prototype.getAttachedObject=function(){return this.dataObj},dhtmlXCellObject.prototype.attachURL=function(a,b,c){1==c&&(c={});var d="undefined"!=typeof c&&0!=c&&null!=c;if(this.conf.url_data||(this.conf.url_data={}),this.conf.url_data.url=a,this.conf.url_data.ajax=1==b,this.conf.url_data.post_data=1==c?{}:c||null,1==b){var e=this;if(d){var f="";for(var g in c)f+="&"+encodeURIComponent(g)+"="+encodeURIComponent(c[g]);dhx4.ajax.post(a,f,function(a){e.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>"),"function"==typeof e._doOnFrameContentLoaded&&e._doOnFrameContentLoaded(),e.dataType="url-ajax",e=a=null})}else dhx4.ajax.get(a,function(a){e.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>"),"function"==typeof e._doOnFrameContentLoaded&&e._doOnFrameContentLoaded(),e.dataType="url-ajax",e=a=null})}else{if("url"==this.dataType)var h=this.getFrame();else{var h=document.createElement("IFRAME");h.frameBorder=0,h.border=0,h.style.width="100%",h.style.height="100%",h.style.position="relative",this._attachObject(h),this.dataType="url",this._attachURLEvents()}if(d){var i="undefined"==typeof this.conf.url_data.post_ifr;this.conf.url_data.post_ifr=!0,i&&this._attachURLEvents(),h.src="about:blank"}else h.src=a+(a.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime();h=null}h=null},dhtmlXCellObject.prototype.reloadURL=function(){("url"==this.dataType||"url-ajax"==this.dataType)&&null!=this.conf.url_data&&this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)},dhtmlXCellObject.prototype.attachHTMLString=function(a){this._attachObject(null,null,a);for(var b=a.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],c=0;c<b.length;c++){var d=b[c].replace(/<([\/]{0,1})script[^>]*>/gi,"");d&&(window.execScript?window.execScript(d):window.eval(d))}},dhtmlXCellObject.prototype.attachLayout=function(a){"dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell,this instanceof dhtmlXLayoutCell&&this._hideBorders();var b=document.createElement("DIV");return b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden",this._attachObject(b),"undefined"!=typeof this._layoutMainInst&&(b._layoutMainInst=this._layoutMainInst),this instanceof window.dhtmlXLayoutCell,"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof dhtmlXLayoutCell&&(b._isParentCell=!0),"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(b._ofs={t:-1}),"string"==typeof a&&(a={pattern:a}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=b,this.dataType="layout",this.dataObj=new dhtmlXLayoutObject(a),this instanceof dhtmlXLayoutCell&&(this.dataObj.parentLayout=this.layout),b._layoutMainInst=null,a.parent=null,b=a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachTree=function(a){var b=document.createElement("DIV");return b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden",this._attachObject(b),this.dataType="tree",this.dataObj=new dhtmlXTreeObject(b,"100%","100%",a||0),this.dataObj.setSkin(this.conf.skin),this.dataObj.allTree.childNodes[0].style.marginTop="2px",this.dataObj.allTree.childNodes[0].style.marginBottom="2px",b=null,this.callEvent("_onContentAttach",[]),this.dataObj
},dhtmlXCellObject.prototype.attachGrid=function(){var a=document.createElement("DIV");return a.style.width="100%",a.style.height="100%",a.style.position="relative",a.style.overflow="hidden",this._attachObject(a),this.dataType="grid",this.dataObj=new dhtmlXGridObject(a),this.dataObj.setSkin(this.conf.skin),"dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2),a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachTabbar=function(a){"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof dhtmlXLayoutCell&&this._hideBorders(),"string"==typeof a?a={mode:a}:("object"!=typeof a||null==a)&&(a={});var b=document.createElement("DIV");return b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden","undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(b._ofs={t:-1}),this._attachObject(b),a.skin=this.conf.skin,a.parent=b,this.dataType="tabbar",this.dataObj=new dhtmlXTabBar(a),a.parent=b=null,a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachAccordion=function(a){"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell||this._isCell&&this._hideBorders();var b=document.createElement("DIV");return b.style.width="100%",b.style.height="100%",b.style.position="relative",this._attachObject(b),"undefined"==typeof a&&(a={}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=b,"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(b._ofs={s:{first:-1},m:{first:4}}),this.dataType="acc",this.dataObj=new dhtmlXAccordion(a),a.obj=null,b=a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachEditor=function(a){var b=document.createElement("DIV");return b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden",this._attachObject(b),("object"!=typeof a||null==a)&&(a={}),a.parent=b,this.dataType="editor",this.dataObj=new dhtmlXEditor(a),b=null,a.parent=null,a=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachDataView=function(a){var b=document.createElement("DIV");return b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden",this._attachObject(b),"undefined"==typeof a&&(a={}),b.id="DataViewObject_"+(new Date).getTime(),a.container=b.id,a.skin=this.conf.skin,this.dataType="dataview",this.dataObj=new dhtmlXDataView(a),this.dataObj.setSizes=function(){this.render()},b=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachScheduler=function(a,b,c,d){d=d||window.scheduler;var e=!1;if(c){var f=document.getElementById(c);f&&(e=!0)}if(!e){var g=c||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>',f=document.createElement("DIV");f.id="dhxSchedObj_"+(new Date).getTime(),f.style.width="100%",f.style.height="100%",f.style.position="relative",f.style.overflow="hidden",f.className="dhx_cal_container",f.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+g+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}return this._attachObject(f),this.dataType="scheduler",this.dataObj=d,this.dataObj.setSizes=function(){this.update_view()},d.init(f.id,a,b),f=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachForm=function(a){var b=document.createElement("DIV");return b.style.width="100%",b.style.height="100%",b.style.position="relative",window.dhtmlx&&dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(b):b.style.overflow="auto",this._attachObject(b),this.dataType="form",this.dataObj=new dhtmlXForm(b,a),this.dataObj.setSkin(this.conf.skin),b=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");return b.id="GMapsObj_"+this._genStr(12),b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden",this._attachObject(b),a||(a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}),this.dataType="maps",this.dataObj=new google.maps.Map(b,a),this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")},b=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachChart=function(a){var b=document.createElement("DIV");return b.id="dhxChartObj_"+window.dhx4.newId(),b.style.width="100%",b.style.height="100%",document.body.appendChild(b),this._attachObject(b),a.container=b.id,this.dataType="chart",this.dataObj=new dhtmlXChart(a),this.dataObj.setSizes||(this.dataObj.setSizes=function(){this.resize?this.resize():this.render()}),this.dataObj},dhtmlXCellObject.prototype.attachMenu=function(a){return this.dataNodes.menu?void 0:("undefined"==typeof a&&(a={}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(a),this._adjustCont(this._idd),a.parent=null,a=null,this.dataNodes.menu)},dhtmlXCellObject.prototype.detachMenu=function(){this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.attachToolbar=function(a){return null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar?("undefined"==typeof a?a={}:"string"==typeof a&&(a={skin:a}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(a),this._adjustCont(this._idd),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()}),a.parent=null,a=null,this.dataNodes.toolbar):void 0},dhtmlXCellObject.prototype.detachToolbar=function(){this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.attachRibbon=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){"undefined"==typeof a&&(a={}),"undefined"==typeof a.skin&&(a.skin=this.conf.skin),a.parent=this._attachObject("ribbon").firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(a);var b=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b._adjustCont(b._idd)}),this._adjustCont(),a.parent=null,a=null,this.dataNodes.ribbon}},dhtmlXCellObject.prototype.detachRibbon=function(){this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,delete this.dataNodes.ribbon,this._detachObject("ribbon"))},dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")},dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")},dhtmlXCellObject.prototype.attachStatusBar=function(a){return this.dataNodes.sb?void 0:("dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",a),this.dataNodes.sb.setText=function(a){this.childNodes[0].innerHTML=a},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sb.onselectstart=function(){return!1},this.dataNodes.sb)},dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&("dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))},dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")},dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")},dhtmlXCellObject.prototype._mtbShowHide=function(a,b){this.dataNodes[a]&&(this.cell.childNodes[this.conf.idx[a]].style.display=b,this._adjustCont())},dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return"url"!=this.dataType?null:this.cell.childNodes[this.conf.idx.cont].firstChild},dhtmlXCellObject.prototype._genStr=function(){return this._genStrId||(this._genStrId=(new Date).getTime()),this._genStrId++},dhtmlXCellObject.prototype._attachURLEvents=function(){if("url"==this.dataType){var a=this,b=this._idd,c=this.cell.childNodes[this.conf.idx.cont].firstChild;"function"!=typeof this._doOnFrameMouseDown&&(this._doOnFrameMouseDown=function(c){a.callEvent("_onContentMouseDown",[b,c||event])}),"function"==typeof window.addEventListener?c.onload=function(){try{"function"==typeof a._doOnFrameMouseDown&&this.contentWindow.document.body.addEventListener("mousedown",a._doOnFrameMouseDown,!1)}catch(b){}try{"function"==typeof a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(b){}}:c.onreadystatechange=function(){if("complete"==this.readyState){try{"function"==typeof a._doOnFrameMouseDown&&this.contentWindow.document.body.attachEvent("onmousedown",a._doOnFrameMouseDown)}catch(b){}try{"function"==typeof a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(b){}}}}},dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(1==this.conf.url_data.post_ifr){var a=this.getFrame().contentWindow.document,b=a.createElement("FORM");b.method="POST",b.action=this.conf.url_data.url,a.body.appendChild(b);var c={};c["dhxr"+(new Date).getTime()]="1";for(var d in this.conf.url_data.post_data)c[d]=this.conf.url_data.post_data[d];for(var d in c){var e=a.createElement("INPUT");e.type="hidden",e.name=d,e.value=c[d],b.appendChild(e),e=null}this.conf.url_data.post_ifr=!1,b.submit()}else this.callEvent("_onContentLoaded",[this._idd])},dhtmlXCellObject.prototype._detachURLEvents=function(a){if(null==a){if("url"!=this.dataType)return;a=this.cell.childNodes[this.conf.idx.cont].firstChild}if("function"==typeof window.addEventListener){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null},dhtmlXCellObject.prototype._attachObject=function(a,b,c,d,e){if("menu"==a)return"undefined"!=typeof e?a=e:(a=document.createElement("DIV"),a.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV"))),this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),this.conf.ofs_nodes.t.menu=!0,this._updateIdx(),a;if("toolbar"==a)return"undefined"!=typeof e?a=e:(a=document.createElement("DIV"),a.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV")),a.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"),this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.toolbar=!0,this._updateIdx(),a;if("ribbon"==a)return"undefined"!=typeof e?a=e:(a=document.createElement("DIV"),a.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders"),a.appendChild(document.createElement("DIV"))),this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.ribbon=!0,this._updateIdx(),this._adjustCont(this._idd),a;if("sb"==a){if("undefined"!=typeof e)a=e;else{var f=b||{},g="string"==typeof f.text&&f.text.length>0?f.text:"&nbsp;",h="number"==typeof f.height?f.height:!1,a=document.createElement("DIV");a.className="dhx_cell_statusbar_def",a.innerHTML="<div class='dhx_cell_statusbar_text'>"+g+"</div>",0!=h&&(a.firstChild.style.height=a.firstChild.style.lineHeight=h+"px")}return null!=this.conf.idx.pr1?this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.pr1]):this.cell.appendChild(a),this.conf.ofs_nodes.b.sb=!0,this._updateIdx(),this._adjustCont(this._idd),a}1!=d&&this._detachObject(null,!0,null),"string"==typeof c?this.cell.childNodes[this.conf.idx.cont].innerHTML=c:this.cell.childNodes[this.conf.idx.cont].appendChild(a),a=null},dhtmlXCellObject.prototype._detachObject=function(a,b,c){if(this.callEvent("_onBeforeContentDetach",[]),"menu"==a||"toolbar"==a||"ribbon"==a||"sb"==a){var d=this.cell.childNodes[this.conf.idx[a]];return d.parentNode.removeChild(d),d=null,this.conf.ofs_nodes["sb"==a?"b":"t"][a]=!1,this._updateIdx(),void(this.conf.unloading||this._adjustCont(this._idd))}1==b?c=!1:"undefined"==typeof c?c=document.body:"string"==typeof c&&(c=document.getElementById(c)),c===!1&&("url"==this.dataType?this._detachURLEvents():null!=this.dataObj&&("function"==typeof this.dataObj.unload?this.dataObj.unload():"function"==typeof this.dataObj.destructor&&this.dataObj.destructor()));for(var d=this.cell.childNodes[this.conf.idx.cont];d.childNodes.length>0;)c===!1?d.removeChild(d.lastChild):(d.firstChild.style.display="none",c.appendChild(d.firstChild));this.conf.append_mode&&(d.style.overflow="",this.conf.append_mode=!1);var e="tabbar"==this.dataType;this.dataObj=null,this.dataType=null,c=d=null,1!=this.conf.unloading&&e&&(this.showHeader(!0),this._showBorders())},dhtmlXCellObject.prototype._attachFromCell=function(a){this.detachObject(!0);var b="layout";"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(b="window"),"undefined"!=typeof window.dhtmlXWindowsCell&&a instanceof window.dhtmlXWindowsCell&&a.wins.w[a._idd].conf.parked&&a.wins._winCellSetOpacity(a._idd,"open",!1),"undefined"!=typeof window.dhtmlXAccordionCell&&a instanceof window.dhtmlXAccordionCell&&0==a.conf.opened&&a._cellSetOpacity("open",!1);for(var c in a.dataNodes)this._attachObject(c,null,null,null,a.cell.childNodes[a.conf.idx[c]]),this.dataNodes[c]=a.dataNodes[c],a.dataNodes[c]=null,a.conf.ofs_nodes["sb"==c?"b":"t"][c]=!1,a._updateIdx();if(this._mtbUpdBorder(),null!=a.dataType&&null!=a.dataObj){for(this.dataType=a.dataType,this.dataObj=a.dataObj;a.cell.childNodes[a.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(a.cell.childNodes[a.conf.idx.cont].firstChild);a.dataType=null,a.dataObj=null,"grid"==this.dataType&&("window"==b&&"dhx_skyblue"==this.conf.skin?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else for(;a.cell.childNodes[a.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(a.cell.childNodes[a.conf.idx.cont].firstChild);this.conf.view=a.conf.view,a.conf.view="def";for(var c in a.views)this.views[c]=a.views[c],a.views[c]=null,delete a.views[c];a._updateIdx(),a._adjustCont(),this._updateIdx(),this._adjustCont(),"window"==b&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)},dhtmlXCalendarObject.prototype.lang="cn",dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w"},cn:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthesSNames:["一","二","三","四","五","六","七","八","九","十","十一","十二"],daysFNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysSNames:["日","一","二","三","四","五","六"],weekstart:1,weekname:"周"}},dhtmlXCalendarObject.prototype._buildMonthHdr=function(a){var b=this,c=function(a){return 1==String(a).length?"0"+String(a):a},d=function(a,b){return"<span class='dhtmlxcalendar_month_label_"+a+"'>"+b+"</span>"},e=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(e){switch(e){case"%m":return d("month",c(a.getMonth()+1));case"%n":return d("month",a.getMonth()+1);case"%M":return d("month",b.langData[b.lang].monthesSNames[a.getMonth()]);case"%F":return d("month",b.langData[b.lang].monthesFNames[a.getMonth()]);case"%y":return d("year",c(a.getYear()%100));case"%Y":return d("year",a.getFullYear());case"%%":return"%";default:return e}});return b=c=d=null,e},dhtmlXCalendarObject.prototype.enableIframe=function(a){1==a?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)},dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px",this._ifr.style.zIndex=this.base.style.zIndex-1)},dhtmlxCalendarObject=dhtmlXCalendarObject,dhtmlXCalendarObject.prototype._strToDate=function(a,b){b=b||this._dateFormat,b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var c=[],d=[];b=b.replace(/%[a-z]/gi,function(a){switch(a){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return d.push(a),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return d.push(a),"([a-zéûäа-яё]{1,})";case"%j":case"%n":case"%g":case"%G":return d.push(a),"(\\d{1,2})";case"%Y":return d.push(a),"(\\d{4})";case"%a":return d.push(a),"(\\[am|pm])";case"%A":return d.push(a),"(\\[AM|PM])"}return a});var e=new RegExp(b),f=a.match(e);if(null==f||f.length-1!=d.length)return"Invalid Date";for(var g=1;g<f.length;g++)c.push(f[g]);for(var h={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7},i={},j={},g=0;g<d.length;g++)if("undefined"!=typeof h[d[g]]){var k=h[d[g]];i[k]||(i[k]=[],j[k]=[]),i[k].push(c[g]),j[k].push(d[g])}c=[],d=[];for(var g=1;7>=g;g++)if(null!=i[g])for(var l=0;l<i[g].length;l++)c.push(i[g][l]),d.push(j[g][l]);var m=this,n=new Date;n.setDate(1),n.setMinutes(0),n.setSeconds(0);for(var g=0;g<c.length;g++)switch(d[g]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":isNaN(c[g])||n[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds"}[d[g]]](Number(c[g])+("%m"==d[g]||"%n"==d[g]?-1:0));break;case"%M":case"%F":var o=this._getInd(c[g].toLowerCase(),m.langData[m.lang][{"%M":"monthesSNames","%F":"monthesFNames"}[d[g]]]);o>=0&&n.setMonth(o);break;case"%y":if(!isNaN(c[g])){var p=Number(c[g]);n.setFullYear(p+(p>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(c[g])){var p=Number(c[g]);12>=p&&p>=0&&n.setHours(p+(this._getInd("pm",c)>=0?12==p?0:12:12==p?-12:0))}}return m=null,n},dhtmlXCalendarObject.prototype._dateToStr=function(a,b){var c=this;if(a instanceof Date)var d=function(a){return 1==String(a).length?"0"+String(a):a},e=function(b){switch(b){case"%d":return d(a.getDate());case"%j":return a.getDate();case"%D":return c.langData[c.lang].daysSNames[a.getDay()];case"%l":return c.langData[c.lang].daysFNames[a.getDay()];case"%m":return d(a.getMonth()+1);case"%n":return a.getMonth()+1;case"%M":return c.langData[c.lang].monthesSNames[a.getMonth()];case"%F":return c.langData[c.lang].monthesFNames[a.getMonth()];case"%y":return d(a.getYear()%100);case"%Y":return a.getFullYear();case"%g":return(a.getHours()+11)%12+1;case"%h":return d((a.getHours()+11)%12+1);case"%G":return a.getHours();case"%H":return d(a.getHours());case"%i":return d(a.getMinutes());case"%s":return d(a.getSeconds());case"%a":return a.getHours()>11?"pm":"am";case"%A":return a.getHours()>11?"PM":"AM";case"%%":default:return b}},f=String(b||this._dateFormat).replace(/%[a-zA-Z]/g,e);return c=null,f||String(a)},window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(a){var b=this;return this.leftCalendar=new dhtmlXCalendarObject(a),this.leftCalendar.hideTime(),this.rightCalendar=new dhtmlXCalendarObject(a),this.rightCalendar.hideTime(),this.leftCalendar.attachEvent("onClick",function(a){b._updateRange("rightCalendar",a,null),b._evOnClick(["left",a])}),this.rightCalendar.attachEvent("onClick",function(a){b._updateRange("leftCalendar",null,a),b._evOnClick(["right",a])}),this.leftCalendar.attachEvent("onBeforeChange",function(a){return b._evOnBeforeChange(["left",a])}),this.rightCalendar.attachEvent("onBeforeChange",function(a){return b._evOnBeforeChange(["right",a])}),this.show=function(){this.leftCalendar.show(),this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px",this.rightCalendar.show()},this.hide=function(){this.leftCalendar.hide(),this.rightCalendar.hide()},this.setDateFormat=function(a){this.leftCalendar.setDateFormat(a),this.rightCalendar.setDateFormat(a)},this.setDates=function(a,b){null!=a&&this.leftCalendar.setDate(a),null!=b&&this.rightCalendar.setDate(b),this._updateRange()},this._updateRange=function(a,b,c){3==arguments.length?("leftCalendar"==a?this.leftCalendar:this.rightCalendar).setSensitiveRange(b,c):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))},this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)},this.unload=function(){window.dhx4._eventable(this,"clear"),this.leftCalendar.unload(),this.rightCalendar.unload(),this.leftCalendar=this.rightCalendar=null,this._updateRange=null,this._evOnClick=null,this._evOnBeforeChange=null,this.show=null,this.hide=null,this.setDateFormat=null,this.setDates=null,this.getFormatedDate=null,this.unload=null,b=null},this._evOnClick=function(a){return this.callEvent("onClick",a)},this._evOnBeforeChange=function(a){return this.callEvent("onBeforeChange",a)},window.dhx4._eventable(this),this},dhtmlXCalendarObject.prototype.langData["zh-cn"]={dateformat:"%Y-%m-%d",monthesFNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthesSNames:["一","二","三","四","五","六","七","八","九","十","十一","十二"],daysFNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysSNames:["日","一","二","三","四","五","六"],weekstart:1,weekname:"周"},dhtmlXCalendarObject.prototype.lang="zh-cn",dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a,this.base.childNodes[1].name=a,this.base.childNodes[2].name=a+"_new_value"},dhtmlXCombo.prototype.readonly=function(a){window.dhx4.s2b(a)?this.base.firstChild.setAttribute("readOnly","true"):this.base.firstChild.removeAttribute("readOnly")},dhtmlXCombo.prototype.setPlaceholder=function(a){("undefined"==typeof a||null==a)&&(a=""),this.base.firstChild.setAttribute("placeholder",String(a))},dhtmlXCombo.prototype.setTemplate=function(a){for(var b in a)"undefined"!=typeof this.conf.template[b]&&(this.conf.template[b]=String(a[b]));for(var b in this.t)this.t[b].obj.setText(this.t[b].item,this.t[b].item._conf.text);this._confirmSelect()},dhtmlXCombo.prototype.setSkin=function(a){a!=this.conf.skin&&(this.conf.skin=a,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin)},dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild},dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]},dhtmlXCombo.prototype.getList=function(){return this.list},dhtmlXCombo.prototype.getBase=function(){return this.base},dhtmlXCombo.prototype.getParent=function(){return this.DOMParent},dhtmlXCombo.prototype.forEachOption=function(a){for(var b=0;b<this.list.childNodes.length;b++)a.apply(window,[this._getOption(this.list.childNodes[b]._optId,b)])},dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()},dhtmlXCombo.prototype.setFontSize=function(a,b){null!=a&&(this.base.firstChild.style.fontSize=a),null!=b&&(this.list.style.fontSize=b)},dhtmlXCombo.prototype.getOption=function(a){for(var b=null,c=null,d=0;d<this.list.childNodes.length;d++)if(null==b){var e=this.list.childNodes[d]._optId;this.t[e].obj.getValue(this.t[e].item)==a&&(b=e,c=d)}return null==b?null:this._getOption(b,c)},dhtmlXCombo.prototype.getOptionByIndex=function(a){return 0>a?null:null==this.list.childNodes[a]?null:this._getOption(this.list.childNodes[a]._optId,a)},dhtmlXCombo.prototype.getOptionByLabel=function(a){for(var b=null,c=null,d=0;d<this.list.childNodes.length;d++)if(null==b){var e=this.list.childNodes[d]._optId;this.t[e].obj.getText(this.t[e].item,!0)==a&&(b=e,c=d)}return null==b?null:this._getOption(b,c)},dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)},dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")},dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.last_selected,"value",null)},dhtmlXCombo.prototype.getActualValue=function(){return""==this.base.childNodes[0].value?"":this.base.childNodes[1].value},dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value},dhtmlXCombo.prototype.getIndexByValue=function(a){var b=this.getOption(a);return null!=b?b.index:-1},dhtmlXCombo.prototype.setComboText=function(a){this.conf.last_text=this.base.firstChild.value=a,this.conf.f_server_last=this.base.firstChild.value.toLowerCase()},dhtmlXCombo.prototype.setComboValue=function(a){var b=this.getOption(a);null!=b?this.selectOption(b.index):(this.conf.last_value=a,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")},dhtmlXCombo.prototype.selectOption=function(a){if(!(0>a||a>=this.list.childNodes.length)){var b=this.list.childNodes[a]._optId;this._setSelected(b,this._isListVisible(),!0),this._confirmSelect("script")}},dhtmlXCombo.prototype.unSelectOption=function(){},dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")},dhtmlXCombo.prototype.enable=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a),this.conf.enabled!=a&&(this.conf.enabled=a,a?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))},dhtmlXCombo.prototype.disable=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a),this.enable(!a)},dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled},dhtmlXCombo.prototype.show=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a),this.base.style.display=1==a?"":"none"},dhtmlXCombo.prototype.hide=function(a){"undefined"==typeof a&&(a=!0),this.show(!a)},dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display},dhtmlXCombo.prototype.enableFilteringMode=function(a,b,c,d){1==a||"between"==a?(this.conf.f_mode=1==a?"start":"between",null!=b?(this.conf.f_url=b,this.conf.f_cache=window.dhx4.s2b(c),this.conf.f_dyn=window.dhx4.s2b(d)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)},dhtmlXCombo.prototype.filter=function(a){for(var b=0;b<this.list.childNodes.length;b++){var c=a.apply(window,[this._getOption(this.list.childNodes[b]._optId,b)]);this.list.childNodes[b].style.display=c===!0?"":"none"}},dhtmlXCombo.prototype.sort=function(a){for(var b=[],c=0;c<this.list.childNodes.length;c++){var d=this.list.childNodes[c]._optId;b.push([d,this._getOption(d,c)])}for("asc"==a||"desc"==a?(k=!0,b.sort(function(b,c){b=b[1].text_option.toLowerCase(),c=c[1].text_option.toLowerCase();var d="asc"==a?1:-1;return b>c?d:-1*d})):("function"==typeof a||"function"==typeof window[a])&&("function"==typeof window[a]&&(a=window[a]),b.sort(function(b,c){return a.apply(window,[b[1],c[1]])}));this.list.childNodes.length>0;)this.list.removeChild(this.list.lastChild);for(var c=0;c<b.length;c++)this.list.appendChild(this.t[b[c][0]].item)},dhtmlXCombo.prototype.enableAutocomplete=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a),this.conf.f_ac=a},dhtmlXCombo.prototype.disableAutocomplete=function(a){a="undefined"==typeof a?!0:window.dhx4.s2b(a),this.enableAutocomplete(!a)},dhtmlXCombo.prototype.allowFreeText=function(a){this.conf.allow_free_text="undefined"==typeof a?!0:window.dhx4.s2b(a)},dhtmlXCombo.prototype._checkForMatch=function(a){for(var b=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),c=null,d=this.list.firstChild;null!=d;){if(""==d.style.display&&null!=d._optId){var e=window.dhx4.trim(this.t[d._optId].obj.getText(d,!0)).toLowerCase();b==e&&(c=d._optId,d=null)}null!=d&&(d=d.nextSibling)}null==this.conf.last_match?null!=c?(this._setSelected(c,!0,!0),this.conf.last_match=c):("between"!=this.conf.f_mode||1==a)&&(this._setSelected(null,!0,!0),this.conf.last_match=null):null!=c?c!=this.conf.last_match&&(this._setSelected(c,!0,!0),this.conf.last_match=c):(this._setSelected(null,!0,!0),this.conf.last_match=null)},dhtmlXCombo.prototype._selectRange=function(a,b){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,a,b)},dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()},dhtmlXCombo.prototype.closeAll=function(){this._hideList()},dhtmlXCombo.prototype._showList=function(a){if(0==this._getListVisibleCount())return void(a&&this._isListVisible()&&this._hideList());if(this._isListVisible())return void this._checkListHeight();this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),this.list.style.display="",this.list.style.width=Math.max(this.conf.opts_width||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+this.base.offsetHeight-1+"px";var b=window.dhx4.absLeft(this.base);0==b&&(b=window.dhx4.absLeft(this.base)),b+parseInt(this.list.style.width)+5>document.body.clientWidth&&(b=b-5-(b+parseInt(this.list.style.width)-document.body.clientWidth)),this.list.style.left=b+"px",this._checkListHeight(),this._ifrSize(),this._ifr&&(this._ifr.style.display=""),this.callEvent("onOpen",[])},dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",this.conf.clear_click=!1,this._ifr&&(this._ifr.style.display="none"),this.callEvent("onClose",[]))},dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display},dhtmlXCombo.prototype._getListVisibleCount=function(){for(var a=0,b=0;b<this.list.childNodes.length;b++)a+=""==this.list.childNodes[b].style.display?1:0;
return a},dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h){for(var a=this.list.firstChild;null!=a;)""==a.style.display?(this.conf.item_h=a.offsetHeight,a=null):a=a.nextSibling;a=null}var b=window.dhx4.screenDim(),c=window.dhx4.absTop(this.base),d=this.base.offsetHeight,e=Math.max(0,Math.floor((c-b.top)/this.conf.item_h)),f=Math.max(0,Math.floor((b.bottom-(c+d))/this.conf.item_h)),g=this._getListVisibleCount();f<Math.min(this.conf.opts_count_min,g)&&e>f&&(f=null);var h=Math.min(null==f?e:f,this.conf.opts_count,g),i=g>h?h*this.conf.item_h+"px":"";"grid"==this.conf.opts_type&&(i=this.conf.item_h+"px");var j=this.conf.sp[this.conf.skin].list_ofs;this.list.style.height=i,this.list.style.top=(null==f?c-this.list.offsetHeight+j:c+d-j)+"px"}},dhtmlXCombo.prototype._scrollToItem=function(a){var b=this.t[a].item.offsetTop,c=b+this.t[a].item.offsetHeight,d=this.list.scrollTop,e=d+this.list.clientHeight;d>b?this.list.scrollTop=b:c>e&&(this.list.scrollTop=c-this.list.clientHeight)},dhtmlXCombo.prototype._setSelected=function(a,b,c){if(c&&this._updateTopImage(a),null!=a&&this.conf.last_hover==a)return void(b&&this._scrollToItem(a));if(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,null==a&&this.callEvent("onSelectionChange",[])),null!=a){if(this.t[a].obj.setSelected(this.t[a].item,!0),this.conf.last_hover=a,this.callEvent("onSelectionChange",[]),this.t[a].item==this.t[a].item.parentNode.lastChild&&null!=this.conf.f_url&&1==this.conf.f_dyn&&!this.conf.f_dyn_end){var d="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,e=this,f=function(a){e.conf.f_cache&&e.conf.f_cache_data[e.conf.f_mask].data.push(a.xmlDoc.responseXML);var b=e.list.childNodes.length;e.load(a.xmlDoc.responseXML),b==e.list.childNodes.length&&(e.conf.f_dyn_end=!0,e.conf.f_cache&&(e.conf.f_cache_data[e.conf.f_mask].dyn_end=!0)),f=e=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,d,f):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+d,f)}b&&this._scrollToItem(a)}},dhtmlXCombo.prototype.addOption=function(a,b,c,d,e,f){var g=null;if(a instanceof Array)for(var h=0;h<a.length;h++)if(a[h]instanceof Array)i=this._renderOption({value:a[h][0],text:a[h][1],css:a[h][2],img:a[h][3]}),null==g&&1==window.dhx4.s2b(a[h][4])&&(g=i);else{var i=this._renderOption(a[h]);null==g&&1==window.dhx4.s2b(a[h].selected)&&(g=i)}else{var i=this._renderOption({value:a,text:b,css:c,img:d,position:f});null==g&&1==window.dhx4.s2b(e)&&(g=i)}null!=g&&(this._setSelected(g,this._isListVisible(),!0),this._confirmSelect("onInit"))},dhtmlXCombo.prototype.updateOption=function(a,b,c,d){var e=this._getOptionId(a);null!=e&&(this.t[e].obj.update(this.t[e].item,{value:b,text:c,css:d}),this.conf.last_selected==e&&(this.conf.last_text=this.base.firstChild.value=this.t[e].obj.getText(this.t[e].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))},dhtmlXCombo.prototype.deleteOption=function(a){for(var b in this.t){var c=this.t[b].obj.getValue(this.t[b].item);c==a&&this._removeOption(b)}this._isListVisible()&&this._showList(!0)},dhtmlXCombo.prototype.clearAll=function(){for(var a in this.t)this._removeOption(a);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover),this.conf.last_hover=null,this.conf.last_selected=null,this.list.scrollTop=0,this._hideList()},dhtmlXCombo.prototype._renderOption=function(a){var b=window.dhx4.newId(),c=document.createElement("DIV");if(c._optId=b,c._tpl=this.conf.template,"undefined"==typeof a.img&&"undefined"!=typeof a.img_src&&(a.img=a.img_src,delete a.img_src),"undefined"==typeof a.img_dis&&"undefined"!=typeof a.img_src_dis&&(a.img_dis=a.img_src_dis,delete a.img_src_dis),a.img_path=this.conf.img_path,a.img_def=this.conf.img_def,a.img_def_dis=this.conf.img_def_dis,null!=a.position){var d=parseInt(a.position||0);d<=this.list.children.length?this.list.insertBefore(c,this.list.children[a.position]):this.list.appendChild(c)}else this.list.appendChild(c);return this.t[c._optId]={obj:this.modes[this.conf.opts_type].render(c,a),item:c,conf:{type:this.conf.opts_type}},c=null,b},dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item),this.t[a].obj=null,this.t[a].item.parentNode.removeChild(this.t[a].item),this.t[a].item=null,this.t[a].conf=null,this.t[a]=null,delete this.t[a],this.conf.last_hover==a&&(this.conf.last_hover=null),this.conf.last_selected==a&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))},dhtmlXCombo.prototype._confirmSelect=function(a){if("blur"==a&&"option"!=this.conf.opts_type)return void this._hideList();var b=!1;if(this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),null!=this.conf.last_hover)b=b||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else{if(!(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value))return this._cancelSelect(),void this._updateTopImage(this.conf.last_selected);b=b||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true"}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=a&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)),this._hideList(),1==b&&"onInit"!=a&&"onDelete"!=a&&this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])},dhtmlXCombo.prototype._cancelSelect=function(){this._hideList(),this.base.firstChild.value=this.conf.last_text,0!=this.conf.f_mode&&this._filterOpts(!0)},dhtmlXCombo.prototype._getOption=function(a,b){if(!this.t[a])return null;if("undefined"==typeof b&&(b=-1),0>b)for(var c=0;c<this.list.childNodes.length;c++)0>b&&this.list.childNodes[c]._optId==a&&(b=c);var d={value:this.t[a].obj.getValue(this.t[a].item),text:this.t[a].obj.getText(this.t[a].item),text_input:this.t[a].obj.getText(this.t[a].item,!0),text_option:this.t[a].obj.getText(this.t[a].item,null,!0),css:this.t[a].obj.getCss(this.t[a].item),selected:a==this.conf.last_selected,index:b};if("function"==typeof this.t[a].obj.getExtraData){var e=this.t[a].obj.getExtraData(this.t[a].item);for(var f in e)"undefined"==typeof d[f]&&(d[f]=e[f])}return d},dhtmlXCombo.prototype._getOptionProp=function(a,b,c){if(null!=a){var d=this._getOption(a);if(null!=d)return d[b]}return c},dhtmlXCombo.prototype._getOptionId=function(a){for(var b=null,c=0;c<this.list.childNodes.length;c++)if(null==b){var d=this.list.childNodes[c]._optId;a==this.t[d].obj.getValue(this.t[d].item)&&(b=d)}return b},dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)},dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a),this.base.style.width=this.conf.combo_width+"px",this.base.firstChild.style.width=this.conf.combo_width-24-(this.conf.combo_image?23:0)+"px",this.base.firstChild.style.marginLeft=this.conf.combo_image?"23px":"0px"},dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=parseInt(a)||null},dhtmlXCombo.prototype.modes={},dhtmlXCombo.prototype.doWithItem=function(a,b){var c=a>=0&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null;if(null==c)return null;if("function"!=typeof this.t[c].obj[b])return null;for(var d=[this.t[c].item],e=2;e<arguments.length;e++)d.push(arguments[e]);return this.t[c].obj[b].apply(this.t[c].obj,d)},dhtmlXCombo.prototype.modes.option={image:!1,option_css:"dhxcombo_option_text",render:function(a,b){return a._conf={value:b.value,css:""},a.className="dhxcombo_option",a.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>",null!=b.css&&(a.lastChild.style.cssText=b.css,a._conf.css=b.css),this.setText(a,b.text),this},destruct:function(a){a._conf=null},update:function(a,b){a._conf.value=b.value,a._conf.css=b.css,a.lastChild.style.cssText=b.css,this.setText(a,b.text)},setText:function(a,b){a._conf.text=b;var c="object"==typeof b?window.dhx4.template(a._tpl.option,a._conf.text,!0):window.dhx4.trim(a._conf.text||"");a.lastChild.innerHTML=0==c.length?"&nbsp;":c},getText:function(a,b,c){return window.dhx4.s2b(b)&&"object"==typeof a._conf.text?window.dhx4.template(a._tpl.input,a._conf.text,!0):window.dhx4.s2b(c)&&"object"==typeof a._conf.text?window.dhx4.template(a._tpl.option,a._conf.text,!0):a._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,b){a.className="dhxcombo_option"+(b?" dhxcombo_option_selected":"")},isSelected:function(a){return String(a.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(){return{type:"option"}}},dhtmlXCombo.prototype.modes.checkbox={image:!0,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(a,b){return a._conf={value:b.value,css:"",checked:window.dhx4.s2b(b.checked)},a.className="dhxcombo_option",a.innerHTML="<div class='"+String(this.image_css).replace("#state#",a._conf.checked?"1":"0")+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",a.firstChild._optChbxId=a._optId,null!=b.css&&(a.lastChild.style.cssText+=b.css,a._conf.css=b.css),this.setText(a,b.text),this},setChecked:function(a,b){a._conf.checked=window.dhx4.s2b(b),a.firstChild.className=String(this.image_css).replace("#state#",a._conf.checked?"1":"0")},isChecked:function(a){return 1==a._conf.checked},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(a,b,c){for(var d=!0,e=b.target||b.srcElement;1==d&&null!=e&&e!=a;)null!=e._optChbxId?(c.callEvent("onCheck",[a._conf.value,!a._conf.checked,a])===!0&&this.setChecked(a,!this.isChecked(a)),d=!1):e=e.parentNode;return e=c=a=null,d},getTopImage:function(){return""},topImageClick:function(){return!0}},dhtmlXComboExtend("checkbox","option"),dhtmlXCombo.prototype.modes.tree={render:function(a){var b=this;a.tree&&(this.extend(),dhx4._eventable(a.tree),a.tree.attachEvent("onClick",function(c){a.tree.checkBoxOff||(a.tree.hasChildren(c)&&a.tree.onlyLeafNodeSelected?a.tree.getOpenState(c)?a.tree.openItem(c):a.tree.closeItem(c):b.confirm(a,c,a.tree.getSelectedItemText()))}),a.tree.attachEvent("onCheck",function(){var c=a.tree.getAllChecked(),d=a.tree.getAllCheckedText();b.confirm(a,c,d)}),a.tree.attachEvent("onOpenEnd",function(){a._ifrSize()}),dhtmlxEvent(a.DOMlist,"click",function(a){a=a||event,a.cancelBubble=!0}))},confirm:function(a,b,c){a.conf.last_value=b,a.conf.last_text=c,a.base.firstChild.value=a.conf.last_text,a.base.childNodes[1].value=a.conf.last_value,a.base.childNodes[2].value="false",a._hideList(),a.callEvent("onChange",[a.conf.last_value,a.conf.last_text])},extend:function(){dhtmlXTreeObject.prototype._getAllCheckedText=function(a,b,c){a||(a=this.htmlNode),a.checkstate==c&&(a.nocheckbox||(b?b+=this.dlmtr+a.label:b=""+a.label));for(var d=a.childsCount,e=0;d>e;e++)b=this._getAllCheckedText(a.childNodes[e],b,c);return a.unParsed&&(b=this._getAllCheckedXMLText(a.unParsed,b,c)),b?b:""},dhtmlXTreeObject.prototype.getAllCheckedText=function(){return this._getAllCheckedText("","",1)},dhtmlXTreeObject.prototype._getAllCheckedXMLText=function(a,b,c){var d=[];return 2==c&&a.through("item","checked",-1,function(a){d.push(a.get("text"))},this),1==c&&a.through("item","id",null,function(a){a.get("checked")&&-1!=a.get("checked")&&d.push(a.get("text"))},this),0==c&&a.through("item","id",null,function(a){a.get("checked")&&0!=a.get("checked")||d.push(a.get("text"))},this),d.length?b+(b?this.dlmtr:"")+d.join(this.dlmtr):b?b:""}}},dhtmlXComboExtend("tree","option"),dhtmlXCombo.prototype.modes.grid={render:function(a){var b=this;a.grid&&(dhx4._eventable(a.grid),a.grid.attachEvent("onRowSelect",function(c){var d=a.grid,e=a.conf.displayField,f=a.conf.valueField;if(e){var g="",h="",i=c.toString().split(",");a.attachedValue=[];for(var j=0;j<i.length;j++){var k=i[j];k&&(g+=d.cells(k,d.getColIndexById(e)).cell.innerHTML+",",h+=d.cells(k,d.getColIndexById(f)).cell.innerHTML+",",a.bindSource&&a.attachedValue.push(a.bindSource.data.pull[k]))}g=g.substr(0,g.lastIndexOf(",")),h=h.substr(0,h.lastIndexOf(",")),b.confirm(a,h,g),window.setTimeout(function(){a.callEvent("gridSelectChange",[a.attachedValue])},10)}}),dhtmlxEvent(a.DOMlist,"click",function(a){a=a||event,a.cancelBubble=!0}))},confirm:function(a,b,c){a.conf.last_value=b,a.conf.last_text=c,a.base.firstChild.value=a.conf.last_text,a.base.childNodes[1].value=a.conf.last_value,a.base.childNodes[2].value="false",a._hideList(),a.callEvent("onChange",[a.conf.last_value,a.conf.last_text])}},dhtmlXComboExtend("grid","option"),dhtmlXCombo.prototype.setChecked=function(a,b){this.doWithItem(a,"setChecked",b)},dhtmlXCombo.prototype.getChecked=function(){for(var a=[],b=0;b<this.list.childNodes.length;b++)this.isChecked(b)&&a.push(this._getOptionProp(this.list.childNodes[b]._optId,"value",""));return a},dhtmlXCombo.prototype.getCheckedText=function(){for(var a=[],b=0;b<this.list.childNodes.length;b++)this.isChecked(b)&&a.push(this._getOptionProp(this.list.childNodes[b]._optId,"text",""));return a},dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")},dhtmlXCombo.prototype.modes.image={image:!0,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,b){return a._conf={value:b.value,css:""},a.className="dhxcombo_option",a.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=b.css&&(a.lastChild.style.cssText+=b.css,a._conf.css=b.css),this.setText(a,b.text),this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis),this},update:function(a,b){a._conf.value=b.value,a._conf.css=b.css,a.lastChild.style.cssText=b.css,this.setText(a,b.text),this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis)},setImage:function(a,b,c,d,e,f){b=null!=b&&b.length>0?d+b:null!=e&&e.length>0?d+e:null,c=null!=c&&c.length>0?d+c:null!=f&&f.length>0?d+f:1==f?b:null,a._conf.img=b,a._conf.img_dis=c,a.firstChild.style.backgroundImage=null!=b?"url("+b+")":"none"},getExtraData:function(){return{type:"image"}},getTopImage:function(a,b){var c=b?"img":"img_dis";return null!=a&&null!=a._conf[c]?"<div class='"+this.image_css+"' style='background-image:url("+a._conf[c]+");'></div>":""}},dhtmlXComboExtend("image","option"),dhtmlXCombo.prototype.setDefaultImage=function(a,b){null!=a&&(this.conf.img_def=a),null!=b&&(this.conf.img_def_dis=b)},dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a},dhtmlXCombo.prototype.enableTree=function(a,b){var a=a,b=b;a=a?parseInt(a)+"px":"100%",b=b?parseInt(b)+"px":"200px",this.tree="tree"==this.conf.opts_type?new dhtmlXTreeObject(this.list,a,b,0):null,this.modes.tree.render(this)},dhtmlXCombo.prototype.enableGrid=function(a,b,c,d){this.bindSource=d,this.attachedValue=[];var a=a,b=b;a=a?parseInt(a):"100%",b=b?parseInt(b):"200",this.conf.opts_width=a,this.conf.item_h=b,"object"==typeof c&&(this.conf.displayField=c.displayField,this.conf.valueField=c.valueField),this.enableFilteringMode("between"),this.grid="grid"==this.conf.opts_type?new dhtmlXGridObject(this.list):null,this.grid.disableActive=!0,this.modes.grid.render(this)},dhtmlXCombo.prototype.enableIframe=function(a){1==a?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcombo_ifr",this._ifr.style.position="absolute",this._ifr.style.display="none",this._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.list.parentNode.insertBefore(this._ifr,this.list),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)},dhtmlXCombo.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.list.style.left,this._ifr.style.top=this.list.style.top,this._ifr.style.width=this.list.offsetWidth+"px",this._ifr.style.height=this.list.offsetHeight+"px",this._ifr.style.zIndex=this.list.style.zIndex-1)},dhtmlXColorPicker.prototype.linkTo=function(a,b,c){1==arguments.length&&(b=c=a);var d;return a=a||null,c=c||null,"string"==typeof b&&(b=document.getElementById(b)),d=this._addNode(b,a,c),d&&this._attachEventsToNode(d),d},dhtmlXColorPicker.prototype._isBaseNode=function(a){return a==this.base?!0:a.parentElement==document.body?!1:a.parentElement?this._isBaseNode(a.parentElement):!1},dhtmlXColorPicker.prototype._hasInput=function(a){var b,c,d=!1;for(c=this._nodes.length,b=0;c>b;b++)if(this._nodes[b].valueCont==a){d=!0;break}return d},dhtmlXColorPicker.prototype._findNodesByArray=function(a){var b,c,d;for(c=a.length,b=0;c>b;b++)d="string"==typeof a[b]?document.getElementById(a[b]):a[b],d&&this._addNode(d)},dhtmlXColorPicker.prototype._addNode=function(a,b,c){var d,e,f,g;return d="string"==typeof a?document.getElementById(a):a,"string"==typeof b&&(b=document.getElementById(b)),"string"==typeof c&&(c=document.getElementById(c)),d?(dhx4.s2b(d.getAttribute("colorbox"))&&(e=document.createElement("div"),e.style.width=d.offsetWidth+"px",e.style.height=d.offsetHeight+"px",d.style.width=d.offsetWidth-(d.offsetHeight+8)+"px",d.parentNode.insertBefore(e,d),e.style.position="relative",f=document.createElement("div"),e.appendChild(d),e.appendChild(f),f.className="dhxcp_colorBox",d.className+=" dhxcp_colorInput",f.style.width=f.style.height=d.offsetHeight+"px"),g={node:d,valueColor:void 0!=b?b:f||d,valueCont:void 0!=c?c:d,conf:{customColors:null!=d.getAttribute("customcolors")?dhx4.s2b(d.getAttribute("customcolors")):null,selectedColor:d.getAttribute("selectedcolor")}},this._nodes.push(g),this.activeNode||(this.activeNode=g),g):null},dhtmlXColorPicker.prototype.getNode=function(a){var b=null,c=null;return b="string"==typeof a?document.getElementById(a):a,void 0!=b.tagName&&(c=this._getNodeByElement(b)),c},dhtmlXColorPicker.prototype._getNodeByElement=function(a){var b,c,d=null;for(c=this._nodes.length,b=0;c>b;b++)this._nodes[b].node==a&&(d=this._nodes[b]);return d},dhtmlXColorPicker.prototype._getNodeByValueCont=function(a){var b,c,d=null;for(c=this._nodes.length,b=0;c>b;b++)this._nodes[b].valueCont&&this._nodes[b].valueCont==a&&(d=this._nodes[b]);return d},dhtmlXColorPicker.prototype.initMemoryColors=function(){var a=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>",this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]),this.memory.onSelect=this._onSelectMemoryEl,this.memory.onSave=function(b){var c=a.colorAIP.rgb2hex({r:b.red,g:b.green,b:b.blue});a.callEvent("onSaveColor",[c])};var b=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild,"function"==typeof window.addEventListener?b.addEventListener("click",this.saveColor,!1):b.attachEvent("onclick",this.saveColor)},dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(a,b,c){var d,e,f;d=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*a/359)+this.configColorArea.minX,e=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-c)/100)+this.configColorArea.minY,f=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-b)/100)+this.configColorArea.minY,this._setColorAreaXY(d,e),this._setContrastY(f)},dhtmlXColorPicker.prototype.setColor=function(a){var b,c,d,e,f=!0,g=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});return a instanceof Array?b={r:parseInt(a[0]),g:parseInt(a[1]),b:parseInt(a[2])}:"string"==typeof a&&(a=a.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(a)?(c=a.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),b={r:parseInt(c[1]),g:parseInt(c[2]),b:parseInt(c[3])}):b=this.colorAIP.hex2rgb(a)),f=f&&b instanceof Object,f=f&&0<=b.r&&b.r<=255,f=f&&0<=b.g&&b.g<=255,(f=f&&0<=b.b&&b.b<=255)?(e=this.colorAIP.rgb2hex({r:b.r,g:b.g,b:b.b}),e==g?g:(this.value.red=b.r,this.value.green=b.g,this.value.blue=b.b,d=this.colorAIP.rgb2hsl(b.r/255,b.g/255,b.b/255),this.value.hue=Math.round(d.h),this.value.sat=Math.round(100*d.s),this.value.lum=Math.round(100*d.l),this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum),this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue(),e)):g},dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]},dhtmlXColorPicker.prototype._attachEventsToNode=function(a){"function"==typeof window.addEventListener?a.node.addEventListener("click",this._doOnClickByNode,!1):a.node.attachEvent("onclick",this._doOnClickByNode),a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.attachEvent("onfocus",this._doOnFocusByInput),a.valueCont.attachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype._detachEventsFromNode=function(a){"function"==typeof window.addEventListener?a.node.removeEventListener("click",this._doOnClickByNode,!1):a.node.detachEvent("onclick",this._doOnClickByNode),a.valueCont&&"input"==a.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(a.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),a.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(a.valueCont.detachEvent("onfocus",this._doOnFocusByInput),a.valueCont.detachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype.show=function(a){var b=!1;void 0!=a&&(this.activeNode=this.getNode(a)||this.activeNode),this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value),this.activeNode?(b=null!=this.activeNode.conf.customColors?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):b=this.conf.customColors,b?this.showMemory():this.hideMemory(),this.base._dhx_remove?(this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id),document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),"function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode),this._controllerNodes.fr_cover&&this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode),this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.setPosition=function(a,b){var c=null,d=parseInt(a),e=parseInt(b);isNaN(d)&&(c="left"==a.toLowerCase()?"left":"bottom"==a.toLowerCase()?"bottom":null),this.base._dhx_remove?null==c||(this.conf.position=c,this._refreshPosition(c)):isNaN(d)||isNaN(e)||(this._globalNode.style.left=d+"px",this._globalNode.style.top=e+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))},dhtmlXColorPicker.prototype._initListenerInput=function(){var a=this;this._inputListenerId=this._inputListenerId||setInterval(function(){a._refreshValueByInput()},70)},dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)},dhtmlXColorPicker.prototype._refreshValueByInput=function(){var a=this.activeNode.valueCont.value,b=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(a)&&a!=b&&(this.setColor(a),this.callEvent("onSelect",[a,this.activeNode.node]))},dhtmlXColorPicker.prototype._refreshPosition=function(a){if(null!=this.activeNode){var b=dhx4.absTop(this.activeNode.node),c=dhx4.absLeft(this.activeNode.node),d=dhx4.screenDim(),e=this._globalNode.offsetHeight,f=0;switch(a=a||this.conf.position){case"bottom":this._globalNode.style.top=b+this.activeNode.node.offsetHeight+this.conf.indent+"px",this._globalNode.style.left=c+"px";break;default:this._globalNode.style.left=c+this.activeNode.node.offsetWidth+this.conf.indent+"px",f=b,d.bottom-(f+e)<=0&&(f=d.bottom-(e+this.conf.indent)),f-d.top<0&&(f=d.top+this.conf.indent),this._globalNode.style.top=f+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}},dhtmlXColorPicker.prototype.isVisible=function(){var a=!1;return a=this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base},dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(0==this.isVisible())return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),void 0!=this.callEvent&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119},dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0},dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}},dhtmlXColorPicker.prototype.loadUserLanguage=function(a){"function"==typeof this._mergeLangModules&&this._mergeLangModules(),this.conf.lang=a,this._refreshLanguage()},dhtmlXColorPicker.prototype._refreshLanguage=function(){var a,b=this.i18n[this.conf.lang];for(a in b)this._labelNodes[a]&&(this._labelNodes[a].innerHTML=b[a])},dhtmlXColorPicker.prototype._setColorAreaXY=function(a,b){var c=this.configColorArea;a=parseInt(a),c.minX>a?this.conf.x=c.minX:a>c.maxX?this.conf.x=c.maxX:isNaN(a)||(this.conf.x=a),b=parseInt(b),c.minY>b?this.conf.y=c.minY:b>c.maxY?this.conf.y=c.maxY:isNaN(b)||(this.conf.y=b),this._refreshLines()},dhtmlXColorPicker.prototype._setColorByXYC=function(a){a=a||!1,this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX)),this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY)),this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var b=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*b.r),this.value.green=Math.round(255*b.g),this.value.blue=Math.round(255*b.b),a||this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue()},dhtmlXColorPicker.prototype._setContrastY=function(a){var b=this.configColorArea;a=parseInt(a),isNaN(a)||(this.conf.c=Math.min(Math.max(b.minY,a),b.maxY)),this._refreshContrastLine()},dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue,this._controllerNodes.sat.value=this.value.sat,this._controllerNodes.lum.value=this.value.lum,this._controllerNodes.red.value=this.value.red,this._controllerNodes.green.value=this.value.green,this._controllerNodes.blue.value=this.value.blue},dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=a,this.callEvent("onChange",[a])},dhtmlXColorPicker.prototype._refreshContrast=function(){var a=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),b=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),c=this._checkIeVersion();if(c&&8>=c){var d=this._controllerNodes.contrastArea.firstChild;d==this._controllerNodes.contrast_line&&(d=document.createElement("div"),d.className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(d),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line));var e=this.colorAIP.rgb2hex({r:Math.round(255*a.r),g:Math.round(255*a.g),b:Math.round(255*a.b)}),f=this.colorAIP.rgb2hex({r:Math.round(255*b.r),g:Math.round(255*b.g),b:Math.round(255*b.b)});d.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+f+"', endColorstr='"+e+"', GradientType=0)"}else a=[Math.round(255*a.r),Math.round(255*a.g),Math.round(255*a.b)],b=[Math.round(255*b.r),Math.round(255*b.g),Math.round(255*b.b)],this._controllerNodes.contrastArea.style.backgroundImage="linear-gradient(to top, rgb("+a.join(",")+"), rgb("+b.join(",")+"))"},dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px",this._controllerNodes.h_line.style.top=this.conf.y+"px"},dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"},dhtmlXColorPicker.prototype._getOffsetPosition=function(a,b){var c={x:0/0,y:0/0},d=a.target||a.srcElement;return d==b?(c.x=void 0!=a.offsetX?a.offsetX:a.layerX,c.y=void 0!=a.offsetY?a.offsetY:a.layerY):d==this._controllerNodes.v_line?c.y=void 0!=a.offsetY?a.offsetY:a.layerY:c.x=void 0!=a.offsetX?a.offsetX:a.layerX,c},dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(a){var b=a.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return null!=b?{r:parseInt("0x"+b[2]),g:parseInt("0x"+b[3]),b:parseInt("0x"+b[4])}:null},rgb2hex:function(a){var b=parseInt(a.r),c=parseInt(a.g),d=parseInt(a.b);return b=b||0,c=c||0,d=d||0,"#"+(b?16>b?"0"+b.toString(16):b.toString(16):"00")+(c?16>c?"0"+c.toString(16):c.toString(16):"00")+(d?16>d?"0"+d.toString(16):d.toString(16):"00")},rgb2hsl:function(a,b,c){var d,e,f,g=Math.max(a,b,c),h=Math.min(a,b,c);return f=.5*(g+h),g==h?d=0:g==a?(d=60*(b-c)/(g-h),c>b&&(d+=360)):d=g==b?60*(c-a)/(g-h)+120:60*(a-b)/(g-h)+240,e=0==f||g==h?0:.5>=f?.5*(g-h)/f:.5*(g-h)/(1-f),{h:d,s:e,l:f}},hsl2rgb:function(a,b,c){var d,e,f,g=[],h=[];d=.5>=c?c*(1+b):c+b-c*b,e=2*c-d,f=a/360,g.push(f+1/3),g.push(f),g.push(f-1/3);for(var i=0;3>i;i++)g[i]<0?g[i]+=1:g[i]>1&&(g[i]-=1),h.push(g[i]<1/6?e+6*(d-e)*g[i]:g[i]<.5?d:g[i]<2/3?e+(d-e)*(2/3-g[i])*6:e);return{r:h[0],g:h[1],b:h[2]}
}},dhtmlXColorPicker.prototype._checkIeVersion=function(){var a,b=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return a=b&&b[2]?parseInt(b[2]):null},dhtmlXColorPicker.prototype.setCustomColors=function(){null==this.memory&&(this.initMemoryColors(),this.conf.customColors=!0);var a,b,c,d,e,f;for(b=arguments.length,a=0;b>a;a++)if(arguments[a]instanceof Array)c=this._rgb2value(arguments[a][0],arguments[a][1],arguments[a][2]),this.memory.setValue(c,null,!1);else if("string"==typeof arguments[a]){if(d=arguments[a].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),d instanceof Array){c=this._rgb2value(d[1],d[2],d[3]),this.memory.setValue(c,null,!1);continue}if(d=arguments[a].match(/(#[\da-f]{6})/gi),d instanceof Array)for(f=d.length,e=0;f>e;e++)c=this._hex2value(d[e]),this.memory.setValue(c,null,!1)}},dhtmlXColorPicker.prototype._rgb2value=function(a,b,c){var d=this.colorAIP.rgb2hsl(a/255,b/255,c/255);return{red:a,green:b,blue:c,hue:Math.round(d.h),sat:Math.round(100*d.s),lum:Math.round(100*d.l)}},dhtmlXColorPicker.prototype._hex2value=function(a){var b,c;return b=this.colorAIP.hex2rgb(a),c=this.colorAIP.rgb2hsl(b.r/255,b.g/255,b.b/255),{red:b.r,green:b.g,blue:b.b,hue:Math.round(c.h),sat:Math.round(100*c.s),lum:Math.round(100*c.l)}},dhtmlXColorPicker.prototype.showMemory=function(){null==this.memory&&this.initMemoryColors(),this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory"),this.conf.customColors=!0},dhtmlXColorPicker.prototype.hideMemory=function(){null!=this.memory&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,"")),this.conf.customColors=!1},dhtmlXColorPicker.prototype.setSkin=function(a){a=a.toLowerCase();var b,c,d=-1,e="dhtmlxcp";if(b=this.base.className.match(/\S\w+/gi),b instanceof Array){for(c in this._skinCollection){if(-1!=d)break;d=this._indexOf(b,e+"_"+c)}d=-1==d?b.length:d}else b=[],d=0;b[d]=e+"_"+a,this.base.className=b.join(" "),this.skin=a},dhtmlXColorPicker.prototype.hideOnSelect=function(a){a=dhx4.s2b(a),this.conf.hideOnSelect=a},dhtmlXColorPicker.prototype._indexOf=function(a,b){var c,d,e=-1;for(d=a.length,c=d;c>=0;c--)if(a[c]==b){e=c;break}return e},dhtmlXColorPicker.prototype.destructMemory=function(){if(null!=this.memory){this.hideMemory();var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null,"function"==typeof window.addEventListener?a.removeEventListener("click",this.saveColor,!1):a.detachEvent("onclick",this.saveColor),this.memory.remove(),this._controllerNodes.memory_block.innerHTML="",this.memory=null}},dhtmlXColorPicker.prototype.Memory=function(a){var b=this,c=null,d={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var a=this!=window?this:event.srcElement,d=d||a.dhxpc_memory;null!=c&&b.unSelect(),c=d,d.domElement.className+=" dhxcp_memory_el_select","function"==typeof b.onSelect&&b.onSelect(d)},this.onSelect=null,this.onSave=null,this._createMemoryController=function(a){var c={domElement:a,value:dhx4._copyObj(d)};return a.dhxpc_memory=c,"function"==typeof window.addEventListener?a.addEventListener("click",b.select,!1):a.attachEvent("onclick",b.select),c},this._findMemoryControllers=function(a){var b,c,d=a.getElementsByTagName("a"),e=[];for(c=d.length,b=0;c>b;b++)e.push(this._createMemoryController(d[b]));return e},this.controllers=this._findMemoryControllers(a),this.unSelect=function(){c&&(c.domElement.className=c.domElement.className.replace(/\s.*$/i,"")),c=null},this.setActiveNext=function(){var a,b=null;return null==c?c=this.controllers[0]:(b=this.getIndex(c),a=this.controllers.length,this.unSelect(),c=a>b+1?this.controllers[b+1]:this.controllers[0]),c.domElement.className+=" dhxcp_memory_el_next",c},this.setValue=function(a,b,d){c=b||c,null==c&&(c=this.controllers[0]),c.value.red=a.red,c.value.blue=a.blue,c.value.green=a.green,c.value.hue=a.hue,c.value.sat=a.sat,c.value.lum=a.lum,c.domElement.style.backgroundColor="rgb("+[a.red,a.green,a.blue].join(", ")+")",this.setActiveNext(),0!=d&&"function"==typeof this.onSave&&this.onSave(a)},this.clean=function(){for(var a,b=this.controllers.length,e=0;b>e;e++)a=this.controllers[e],a.value=dhx4._copyObj(d),a.domElement.style.backgroundColor="rgb("+[d.red,d.green,d.blue].join(", ")+")";this.unSelect(),c=this.controllers[0]},this.getIndex=function(a){var b,c,d=-1;for(c=this.controllers.length,b=0;c>b;b++)if(this.controllers[b]==a){d=b;break}return d},this.remove=function(){var a,b;for(b=this.controllers.length,a=0;b>a;a++)"function"==typeof window.addEventListener?this.controllers[a].domElement.removeEventListener("click",this.select,!1):this.controllers[a].domElement.detachEvent("onclick",this.select),delete this.controllers[a].domElement.dhxpc_memory;delete this.onSelect,delete this.controllers,delete this.onSave}},window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var a;this._controllerNodes.fr_cover||(a=document.createElement("IFRAME"),a.className="dhxcp_frm",a.border=0,a.frameBorder=0,this._controllerNodes.fr_cover=a),this.base._dhx_remove||this.base.insertBefore(a,this._globalNode)}),dhtmlXSlider.prototype._setOrient=function(a){a=a||!1,/\s?dhxsl_cont_hr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_hr/i,"")),/\s?dhxsl_cont_vr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_vr/i,"")),this._nodes.cont.className+=a?" dhxsl_cont_vr":" dhxsl_cont_hr"},dhtmlXSlider.prototype._attachEvents=function(a){"function"==typeof window.addEventListener?(a.runner.addEventListener("mousedown",this._initMover,!1),a.cont.addEventListener("mousedown",this._doOnSetValue,!1)):(a.runner.attachEvent("onmousedown",this._initMover),a.cont.attachEvent("onmousedown",this._doOnSetValue))},dhtmlXSlider.prototype._detachEvents=function(a){"function"==typeof window.addEventListener?(a.runner.removeEventListener("mousedown",this._initMover,!1),a.cont.removeEventListener("mousedown",this._doOnSetValue,!1)):(a.runner.detachEvent("onmousedown",this._initMover),a.cont.detachEvent("onmousedown",this._doOnSetValue))},dhtmlXSlider.prototype._mergeConfig=function(a){for(var b in a)switch(b.toLowerCase()){case"size":case"min":case"max":case"value":case"step":this.conf[b]=parseInt(a[b]);break;case"vertical":case"tooltip":case"disabled":case"visible":this.conf[b]=dhx4.s2b(a[b]);break;case"parent":continue;default:this.conf[b]=a[b]}},dhtmlXSlider.prototype._readAttFormNode=function(a){var b,c,d=a.attributes,e=d.length,f={};for(b=0;e>b;b++)switch(c=d[b],c.name.toLowerCase()){case"size":case"min":case"max":case"value":case"step":f[c.name]=parseInt(c.value);break;case"skin":f.skin=c.value;break;case"vertical":case"disabled":case"visible":f[c.name]=dhx4.s2b(c.value);break;case"linkto":f.linkTo=c.value;break;case"tooltip":f.tooltip=dhx4.s2b(c.value)}return f},dhtmlXSlider.prototype._renderArgumets=function(a){var b,c,d={};for(c=a.length,b=0;c>b;b++)switch(b){case 0:d.parent=a[b];break;case 1:d.size=a[b];break;case 2:d.skin=a[b];break;case 3:d.vertical=a[b];break;case 4:d.min=a[b];break;case 5:d.max=a[b];break;case 6:d.value=a[b];break;case 7:d.step=a[b]}return d},dhtmlXSlider.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0},dhtmlXSlider.prototype._indexOf=function(a,b){var c,d,e=-1;for(d=a.length,c=d;c>=0;c--)if(a[c]==b){e=c;break}return e},dhtmlXSlider.prototype._refreshRunner=function(){var a,b;this.conf.vertical?(a=this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight,b=this._getCoord(a),this._nodes.runner.style.top=b+this.conf.border+"px",this._nodes.runner.style.left=Math.round((this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth)/2)+"px"):(a=this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth,b=this._getCoord(a),this._nodes.runner.style.left=b+this.conf.border+"px",this._nodes.runner.style.top=Math.round((this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight)/2)+"px")},dhtmlXSlider.prototype._setValueByCoord=function(a){var b,c,d=dhx4.absLeft(this._nodes.cont),e=dhx4.absTop(this._nodes.cont);c=this.conf.vertical?(a.y-e-this._nodes.runner.offsetHeight/2)/(this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight):(a.x-d-this._nodes.runner.offsetWidth/2)/(this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth),b=Math.round((this.conf.max-this.conf.min)*c+this.conf.min),this.setValue(b,!0)},dhtmlXSlider.prototype._getCoord=function(a){var b=this.conf,c=(b.value-b.min)/(b.max-b.min);return Math.round(a*c)},dhtmlXSlider.prototype._normalize=function(a){return a=parseInt(a),Math.round(a/this.conf.step)*this.conf.step},dhtmlXSlider.prototype._attachNode=function(a){var b=a.tagName.toLowerCase();if(b){switch(this._attachedNode.node=a,b){case"input":"function"==typeof window.addEventListener?(a.addEventListener("change",this._doOnChangeInput,!1),a.addEventListener("keydown",this._doOnKeyDown,!1)):(a.attachEvent("onchange",this._doOnChangeInput),a.attachEvent("onkeydown",this._doOnKeyDown)),this._attachedNode.setValue=function(b){a.value=b};break;default:this._attachedNode.setValue=function(b){a.innerHTML=b}}this._attachedNode.setValue(this.conf.value)}},dhtmlXSlider.prototype._detachNode=function(){var a=this._attachedNode.node;if(a){var b=a.tagName;switch(b){case"input":"function"==typeof window.addEventListener?(a.removeEventListener("change",this._doOnChangeInput,!1),a.removeEventListener("keydown",this._doOnChangeInput,!1)):(a.detachEvent("change",this._doOnChangeInput),a.detachEvent("keydown",this._doOnChangeInput))}delete this._attachedNode.node,delete this._attachedNode.setValue}},dhtmlXSlider.prototype.setSize=function(a){a=parseInt(a),isNaN(a)||(this.conf.vertical?(this._nodes.cont.style.width&&delete this._nodes.cont.style.width,this._nodes.cont.style.height=a-this.conf.margin+"px"):(this._nodes.cont.style.height&&delete this._nodes.cont.style.height,this._nodes.cont.style.width=a-this.conf.margin+"px"),this._refreshRunner())},dhtmlXSlider.prototype.setSkin=function(a){a=a.toLowerCase();var b,c,d=-1,e="dhtmlxslider";if(b=this.base.className.match(/\S\w+/gi),b instanceof Array){for(c in this._skinCollection){if(-1!=d)break;d=this._indexOf(b,e+"_"+c)}d=-1==d?b.length:d}else b=[],d=0;b[d]=e+"_"+a,this.base.className=b.join(" "),this.conf.skin=a,this._nodes&&this._refreshRunner()},dhtmlXSlider.prototype.setValue=function(a,b){a=parseInt(a),b=b||!1,isNaN(a)||(a=this._normalize(a),a=Math.max(this.conf.min,a),a=Math.min(this.conf.max,a),this.conf.value!==a&&(this.conf.value=a,this._refreshRunner(),this.conf.tooltip&&(this._nodes.cont.title=this.conf.value),b&&this.callEvent("onChange",[this.conf.value,this]))),"function"==typeof this._attachedNode.setValue&&this._attachedNode.setValue(this.conf.value)},dhtmlXSlider.prototype.getValue=function(){return this.conf.value},dhtmlXSlider.prototype.disable=function(a){a=0==a?!1:!0;var b=null;if(a){for(var c in this._nodes)"cont"!=c&&(b=new RegExp("\\s?dhxsl_"+c+"_dis","i"),b.test(this._nodes[c].className)||(this._nodes[c].className+=" dhxsl_"+c+"_dis"));this.conf.disabled=!0}else this.enable()},dhtmlXSlider.prototype.enable=function(){var a;for(var b in this._nodes)"cont"!=b&&(a=new RegExp("\\s?dhxsl_"+b+"_dis","i"),a.test(this._nodes[b].className)&&(this._nodes[b].className=this._nodes[b].className.replace(a,"")));this.conf.disabled=!1},dhtmlXSlider.prototype.isEnabled=function(){return!this.conf.disabled},dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.cont.removeAttribute("title"),this.conf.tooltip=!1},dhtmlXSlider.prototype.enableTooltip=function(a){a="undefined"==typeof a?!0:dhx4.s2b(a),a?(this._nodes.cont.title=this.conf.value,this.conf.tooltip=!0):this.disableTooltip()},dhtmlXSlider.prototype.setMax=function(a){a=parseInt(a),!isNaN(a)&&this.conf.min<a&&(this.conf.max=a,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMax=function(){return this.conf.max},dhtmlXSlider.prototype.setMin=function(a){a=parseInt(a),!isNaN(a)&&this.conf.max>a&&(this.conf.min=a,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMin=function(){return this.conf.min},dhtmlXSlider.prototype.setStep=function(a){a=parseInt(a);var b=this.conf.max-this.conf.min;!isNaN(a)&&b>a&&(this.conf.step=a,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getStep=function(){return this.conf.step},dhtmlXSlider.prototype.show=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_hidden/i,"")),this.conf.visible=!0},dhtmlXSlider.prototype.hide=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)||(this._nodes.cont.className+=" dhxsl_hidden"),this.conf.visible=!1},dhtmlXSlider.prototype.isVisible=function(){return this.conf.visible},dhtmlXSlider.prototype.linkTo=function(a){"string"==typeof a&&(a=document.getElementById(a)),this._attachedNode.node&&this._detachNode(),this._attachNode(a)},dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode("object",{obj:a})},dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj="string"==typeof a.obj?document.getElementById(a.obj):a.obj,a.obj=null,document.getElementById(this._nodeId).appendChild(this._nodeObj),this._nodeObj.style.display="",this._nodeObj.style.visibility="visible"},dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode("html",{html:a})},dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html,this._nodeObj={text:a.html}},dhtmlXPopup.prototype.attachForm=function(a){return this._attachNode("form",{struct:a})},dhtmlXPopup.prototype._attach_init_form=function(a){var b=this;this._nodeObj=new dhtmlXForm(this._nodeId,a.struct),this._nodeObj.setSkin(this.conf.skin),this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){b._clearClick=!0})},dhtmlXPopup.prototype.attachCalendar=function(){return this._attachNode("calendar",{})},dhtmlXPopup.prototype._attach_init_calendar=function(){this._nodeObj=new dhtmlXCalendarObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin),this._nodeObj.show()},dhtmlXPopup.prototype.attachGrid=function(a,b){return this._attachNode("grid",{width:a||400,height:b||200})},dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin)},dhtmlXPopup.prototype.attachTree=function(a,b,c){return this._attachNode("tree",{width:a||400,height:b||200,rootId:c||0})},dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",a.rootId)},dhtmlXPopup.prototype.attachLayout=function(a,b,c){return this._attachNode("layout",{width:a||400,height:b||200,pattern:c||"3L"})},dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.pattern,this.conf.skin)},dhtmlXPopup.prototype.attachAccordion=function(a,b,c){return this._attachNode("accordion",{width:a||400,height:b||200,conf:c||{}})},dhtmlXPopup.prototype._attach_init_accordion=function(a){a.conf.parent=this._nodeId,a.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXAccordion(a.conf)},dhtmlXPopup.prototype.attachTabbar=function(a,b,c){return"string"==typeof c?c={mode:c}:("object"!=typeof c||null==c)&&(c={}),this._attachNode("tabbar",{width:a||400,height:b||200,conf:c})},dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.conf.parent=this._nodeId,a.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXTabBar(a.conf)},dhtmlXPopup.prototype.attachEditor=function(a,b,c){return this._attachNode("editor",{width:a||400,height:b||200,conf:c||{}})},dhtmlXPopup.prototype._attach_init_editor=function(a){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin,a.conf.parent=this._nodeId,null==a.conf.skin&&(a.conf.skin=this.conf.skin),this._nodeObj=new dhtmlXEditor(a.conf);var b=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXEditor&&this._nodeObj.setSizes()});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(b)},dhtmlXPopup.prototype.attachColorPicker=function(a){return("object"!=typeof a||null==a)&&(a={}),this._attachNode("colorpicker",{conf:a})},dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.conf.skin=this.conf.skin,a.conf.parent=this._nodeId,this._nodeObj=new dhtmlXColorPicker(a.conf)},dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var a={params:{}};for(var b in this.conf.dload_params)a.params[b]=this.conf.dload_params[b];return a},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))},dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(a){var b=0;for(var c in this.itemPull){var d=this.itemPull[c].parent,e=this.itemPull[c].type;null!=this.idPull[c]&&(d!=a||"item"!=e&&"radio"!=e&&"checkbox"!=e||"none"==this.idPull[c].style.display||b++)}return b},dhtmlXMenuObject.prototype._redefineComplexState=function(a){if(this.idPrefix+this.topId!=a&&null!=this.idPull["polygon_"+a]&&null!=this.idPull[a]){var b=this._countVisiblePolygonItems(a);b>0&&!this.itemPull[a].complex&&this._updateItemComplexState(a,!0,!1),0==b&&this.itemPull[a].complex&&this._updateItemComplexState(a,!1,!1)}},dhtmlXMenuObject.prototype._updateItemComplexState=function(a,b){if(!this.conf.context&&"TopLevel"==this._getItemLevelType(a.replace(this.idPrefix,"")))return void(this.itemPull[a].complex=b);if(null!=this.idPull[a]&&null!=this.itemPull[a]&&(this.itemPull[a].complex=b,a!=this.idPrefix+this.topId)){var c=null,d=this.idPull[a].childNodes[this.conf.rtl?0:2];if(d.childNodes[0]&&0===String(d.childNodes[0].className).search("complex_arrow")&&(c=d.childNodes[0]),this.itemPull[a].complex){if(null==c){for(c=document.createElement("DIV"),c.className="complex_arrow",c.id="arrow_"+a;d.childNodes.length>0;)d.removeChild(d.childNodes[0]);d.appendChild(c)}return void(this.conf.dload&&"get"==this.itemPull[a].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=c.className&&(c.className="complex_arrow_loading"):c.className="complex_arrow")}this.itemPull[a].complex||null==c||(d.removeChild(c),null!=this.itemPull[a].hotkey_backup&&this.setHotKey&&this.setHotKey(a.replace(this.idPrefix,""),this.itemPull[a].hotkey_backup))}},dhtmlXMenuObject.prototype._getItemLevelType=function(a){return this.itemPull[this.idPrefix+a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"},dhtmlXMenuObject.prototype.setIconsPath=function(a){this.conf.icons_path=a},dhtmlXMenuObject.prototype._updateItemImage=function(a){a=this.idPrefix+a;var b=this.itemPull[a].parent==this.idPrefix+this.topId&&!this.conf.context,c=null;if(b)for(var d=0;d<this.idPull[a].childNodes.length;d++)try{"dhtmlxMenu_TopLevel_Item_Icon"==this.idPull[a].childNodes[d].className&&(c=this.idPull[a].childNodes[d])}catch(e){}else{try{var c=this.idPull[a].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(e){}(null==c||"undefined"==typeof c.className||"sub_icon"!=c.className)&&(c=null)}if("radio"==this.itemPull[a].type)var f=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];else var f=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(f.length>0)if(null!=c)c.src=this.conf.icons_path+f;else if(b){var c=document.createElement("IMG");c.className="dhtmlxMenu_TopLevel_Item_Icon",c.src=this.conf.icons_path+f,c.border="0",c.id="image_"+a,!this.conf.rtl&&this.idPull[a].childNodes.length>0?this.idPull[a].insertBefore(c,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(c)}else{var c=document.createElement("IMG");c.className="sub_icon",c.src=this.conf.icons_path+f,c.border="0",c.id="image_"+a;for(var g=this.idPull[a].childNodes[this.conf.rtl?2:0];g.childNodes.length>0;)g.removeChild(g.childNodes[0]);g.appendChild(c)}else if(null!=c){var h=c.parentNode;h.removeChild(c),h.innerHTML="&nbsp;",h=c=null}},dhtmlXMenuObject.prototype._getAllParents=function(a){var b=new Array;for(var c in this.itemPull)if(this.itemPull[c].parent==a&&(b[b.length]=this.itemPull[c].id,this.itemPull[c].complex))for(var d=this._getAllParents(this.itemPull[c].id),e=0;e<d.length;e++)b[b.length]=d[e];return b},dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var a=window.dhx4.screenDim();this.conf.v.x1=a.left,this.conf.v.x2=a.right,this.conf.v.y1=a.top,this.conf.v.y2=a.bottom}},dhtmlXMenuObject.prototype.getItemPosition=function(a){a=this.idPrefix+a;var b=-1;if(null==this.itemPull[a])return b;for(var c=this.itemPull[a].parent,d=null!=this.idPull["polygon_"+c]?this.idPull["polygon_"+c].tbd:this.cont,e=0;e<d.childNodes.length;e++)(d.childNodes[e]==this.idPull["separator_"+a]||d.childNodes[e]==this.idPull[a])&&(b=e);return b},dhtmlXMenuObject.prototype.setItemPosition=function(a,b){if(a=this.idPrefix+a,null!=this.idPull[a]){var c=this.itemPull[a].parent==this.idPrefix+this.topId,d=this.idPull[a],e=this.getItemPosition(a.replace(this.idPrefix,"")),f=this.itemPull[a].parent,g=null!=this.idPull["polygon_"+f]?this.idPull["polygon_"+f].tbd:this.cont;g.removeChild(g.childNodes[e]),0>b&&(b=0),c&&1>b&&(b=1),b<g.childNodes.length?g.insertBefore(d,g.childNodes[b]):g.appendChild(d)}},dhtmlXMenuObject.prototype.getParentId=function(a){return a=this.idPrefix+a,null==this.itemPull[a]?null:(null!=this.itemPull[a].parent?this.itemPull[a].parent:this.topId).replace(this.idPrefix,"")},dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()},dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0),this._isInited=!1,this.idPrefix=this._genStr(12)+"_",this.itemPull={}},"undefined"==typeof dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={}),dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(a){var b=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var c=0;c<b.length;c++)b[c]!=a&&this._hidePolygon(b[c]),null!=this.idPull[b[c]]&&b[c]!=a&&(this.idPull[b[c]].className=this.idPull[b[c]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+a].state&&(this.idPull[this.idPrefix+a].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+a,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?a:this.conf.selected:a,this.itemPull[this.idPrefix+a].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+a,this.conf.dir_toplv))},dhtmlXMenuObject.prototype._initTopLevelMenu=function(){if(this.conf.dir_toplv="bottom",this.conf.dir_sublv=this.conf.rtl?"left":"right",this.conf.context)this.idPull[this.idPrefix+this.topId]=new Array(0,0),this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var a=this._getMenuNodes(this.idPrefix+this.topId),b=0;b<a.length;b++)"item"==this.itemPull[a[b]].type&&this._renderToplevelItem(a[b],null),"separator"==this.itemPull[a[b]].type&&this._renderSeparator(a[b],null)},dhtmlXMenuObject.prototype._renderToplevelItem=function(a,b){var c=this,d=document.createElement("DIV");if(d.id=a,d.className="enabled"==this.itemPull[a].state&&null!=this.itemPull[a].cssNormal?this.itemPull[a].cssNormal:"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[a].state?"Normal":"Disabled"),""!=this.itemPull[a].title){var e=document.createElement("DIV");e.className="top_level_text",e.innerHTML=this.itemPull[a].title,d.appendChild(e)}if(this.itemPull[a].tip.length>0&&(d.title=this.itemPull[a].tip),""!=this.itemPull[a].imgen||""!=this.itemPull[a].imgdis){var f=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(f){var g=document.createElement("IMG");g.border="0",g.id="image_"+a,g.src=this.conf.icons_path+f,g.className="dhtmlxMenu_TopLevel_Item_Icon",d.childNodes.length>0&&!this.conf.rtl?d.insertBefore(g,d.childNodes[0]):d.appendChild(g)}}d.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},d.oncontextmenu=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont)),null!=b&&(b++,0>b&&(b=0),b>this.cont.childNodes.length-1&&(b=null)),null!=b?this.cont.insertBefore(d,this.cont.childNodes[b]):this.cont.appendChild(d),this.idPull[d.id]=d,this.itemPull[a].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[a].id,this.itemPull[a].id),d.onmouseover=function(){"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler);var a=c._getSubItemToDeselectByPolygon("parent");c._removeSubItemFromSelected(-1,-1);for(var b=0;b<a.length;b++)a[b]!=this.id&&c._hidePolygon(a[b]),null!=c.idPull[a[b]]&&a[b]!=this.id&&(null!=c.itemPull[a[b]].cssNormal?c.idPull[a[b]].className=c.itemPull[a[b]].cssNormal:("sub_item_selected"==c.idPull[a[b]].className&&(c.idPull[a[b]].className="sub_item"),c.idPull[a[b]].className=c.idPull[a[b]].className.replace(/Selected/g,"Normal")));if("enabled"==c.itemPull[this.id].state){if(this.className="dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Selected",c._addSubItemToSelected(this.id,"parent"),c.conf.selected="win"==c.conf.mode?-1!=c.conf.selected?this.id:c.conf.selected:this.id,c.conf.dload){if("no"==c.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime(),c.itemPull[this.id].loaded="get";var d=this.id.replace(c.idPrefix,"");c._dhxdataload.onBeforeXLS=function(){var a={params:{}};a.params[this.conf.dload_pid]=d;for(var b in this.conf.dload_params)a.params[b]=this.conf.dload_params[b];return a},c.loadStruct(c.conf.dload_url)}c.conf.top_mode&&"web"==c.conf.mode&&!c.conf.context&&(this._mouseOver=!0)}if((!c.conf.dload||c.conf.dload&&(!c.itemPull[this.id].loaded||"yes"==c.itemPull[this.id].loaded))&&c.itemPull[this.id].complex&&-1!=c.conf.selected)if(c.conf.top_mode&&"web"==c.conf.mode&&!c.conf.context){this._mouseOver=!0;var e=this.id;this._menuOpenTM=window.setTimeout(function(){c._showPolygon(e,c.conf.dir_toplv)},c.conf.top_tmtime)}else c._showPolygon(this.id,c.conf.dir_toplv)}c._doOnTouchMenu(this.id.replace(c.idPrefix,""))},d.onmouseout=function(){c.itemPull[this.id].complex&&-1!=c.conf.selected||"enabled"!=c.itemPull[this.id].state||(d.className=null!=c.itemPull[this.id].cssNormal?c.itemPull[this.id].cssNormal:"dhtmlxMenu_"+c.conf.skin+"_TopLevel_Item_Normal"),"web"==c.conf.mode&&(window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c._clearAndHide()},c.conf.tm_sec,"JavaScript")),c.conf.top_mode&&"web"==c.conf.mode&&!c.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))},d.onclick=function(a){if("web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler),"web"==c.conf.mode||"disabled"!=c.itemPull[this.id].state){if(a=a||event,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,"win"==c.conf.mode&&c.itemPull[this.id].complex){if(c.conf.selected==this.id){c.conf.selected=-1;var b=!1}else{c.conf.selected=this.id;var b=!0}b?c._showPolygon(this.id,c.conf.dir_toplv):c._hidePolygon(this.id)}var d=c.itemPull[this.id].complex?"c":"-",e="enabled"!=c.itemPull[this.id].state?"d":"-",f={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};return c._doOnClick(this.id.replace(c.idPrefix,""),d+e+"t",f),!1}},"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addSubMenuPolygon=function(a,b){var c=(this._renderSublevelPolygon(a,b),this._getMenuNodes(b));for(d=0;d<c.length;d++)"separator"==this.itemPull[c[d]].type?this._renderSeparator(c[d],null):this._renderSublevelItem(c[d],null);if(a==b);else;for(var d=0;d<c.length;d++)this.itemPull[c[d]].complex&&this._addSubMenuPolygon(a,this.itemPull[c[d]].id)},dhtmlXMenuObject.prototype._renderSublevelPolygon=function(a,b){var c=document.createElement("DIV");c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":""),c.dir="ltr",c.oncontextmenu=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,!1},c.id="polygon_"+b,c.onclick=function(a){a=a||event,a.cancelBubble=!0},c.style.display="none",document.body.insertBefore(c,document.body.firstChild),c.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var d=document.createElement("TABLE");d.className="dhtmlxMebu_SubLevelArea_Tbl",d.cellSpacing=0,d.cellPadding=0,d.border=0;var e=document.createElement("TBODY");return d.appendChild(e),c.childNodes[1].appendChild(d),c.tbl=d,c.tbd=e,this.idPull[c.id]=c,null!=this.sxDacProc&&(this.idPull["sxDac_"+b]=new this.sxDacProc(c,c.className),window.dhx4.isIE?(this.idPull["sxDac_"+b]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+b]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+b]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+b]._setCustomCycle(this.dacCycles))),c},dhtmlXMenuObject.prototype._renderSublevelItem=function(a,b){var c=this,d=document.createElement("TR");d.className="enabled"==this.itemPull[a].state?"sub_item":"sub_item_dis";var e=document.createElement("TD");e.className="sub_item_icon";var f=this.itemPull[a]["enabled"==this.itemPull[a].state?"imgen":"imgdis"];if(""!=f){var g=this.itemPull[a].type;if("checkbox"==g||"radio"==g){var h=document.createElement("DIV");h.id="image_"+this.itemPull[a].id,h.className="sub_icon "+f,e.appendChild(h)}if("checkbox"!=g&&"radio"!=g){var h=document.createElement("IMG");h.id="image_"+this.itemPull[a].id,h.className="sub_icon",h.src=this.conf.icons_path+f,e.appendChild(h)}}else e.innerHTML="&nbsp;";var i=document.createElement("TD");if(i.className="sub_item_text",""!=this.itemPull[a].title){var j=document.createElement("DIV");j.className="sub_item_text",j.innerHTML=this.itemPull[a].title,i.appendChild(j)}else i.innerHTML="&nbsp;";var k=document.createElement("TD");if(k.className="sub_item_hk",this.itemPull[a].complex){var l=document.createElement("DIV");l.className="complex_arrow",l.id="arrow_"+this.itemPull[a].id,k.appendChild(l)}else if(this.itemPull[a].hotkey.length>0&&!this.itemPull[a].complex){var m=document.createElement("DIV");m.className="sub_item_hk",m.innerHTML=this.itemPull[a].hotkey,k.appendChild(m)}else k.innerHTML="&nbsp;";d.appendChild(this.conf.rtl?k:e),d.appendChild(i),d.appendChild(this.conf.rtl?e:k),d.id=this.itemPull[a].id,d.parent=this.itemPull[a].parent,this.itemPull[a].tip.length>0&&(d.title=this.itemPull[a].tip),d.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},d.onmouseover=function(){c.conf.hide_tm[this.id]&&window.clearTimeout(c.conf.hide_tm[this.id]),"web"==c.conf.mode&&window.clearTimeout(c.conf.tm_handler),this._visible||c._redistribSubLevelSelection(this.id,this.parent),this._visible=!0},d.onmouseout=function(){"web"==c.conf.mode&&(c.conf.tm_handler&&window.clearTimeout(c.conf.tm_handler),c.conf.tm_handler=window.setTimeout(function(){c&&c._clearAndHide&&c._clearAndHide()},c.conf.tm_sec,"JavaScript"));var a=this;c.conf.hide_tm[this.id]&&window.clearTimeout(c.conf.hide_tm[this.id]),c.conf.hide_tm[this.id]=window.setTimeout(function(){a._visible=!1},50)},d.onclick=function(a){if(c.checkEvent("onClick")||!c.itemPull[this.id].complex){a=a||event,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,tc=c.itemPull[this.id].complex?"c":"-",td="enabled"==c.itemPull[this.id].state?"-":"d";var b={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};switch(c.itemPull[this.id].type){case"checkbox":c._checkboxOnClickHandler(this.id.replace(c.idPrefix,""),tc+td+"n",b);break;case"radio":c._radioOnClickHandler(this.id.replace(c.idPrefix,""),tc+td+"n",b);break;case"item":c._doOnClick(this.id.replace(c.idPrefix,""),tc+td+"n",b)}return!1}};var n=this.idPull["polygon_"+this.itemPull[a].parent];null!=b&&(b++,0>b&&(b=0),b>n.tbd.childNodes.length-1&&(b=null)),null!=b&&null!=n.tbd.childNodes[b]?n.tbd.insertBefore(d,n.tbd.childNodes[b]):n.tbd.appendChild(d),this.idPull[d.id]=d
},dhtmlXMenuObject.prototype._renderSeparator=function(a,b){var c=this.conf.context?"SubLevelArea":this.itemPull[a].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=c||!this.conf.context){var d=this;if("TopLevel"!=c){var e=document.createElement("TR");e.className="sub_sep";var f=document.createElement("TD");f.colSpan="3",e.appendChild(f)}var g=document.createElement("DIV");if(g.id="separator_"+a,g.className="TopLevel"==c?"top_sep":"sub_sep",g.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},g.onclick=function(a){a=a||event,a.cancelBubble=!0;var b={ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey};d._doOnClick(this.id.replace("separator_"+d.idPrefix,""),"--s",b)},"TopLevel"==c){if(null!=b)b++,0>b&&(b=0),null!=this.cont.childNodes[b]?this.cont.insertBefore(g,this.cont.childNodes[b]):this.cont.appendChild(g);else{var h=this.cont.childNodes[this.cont.childNodes.length-1];-1==String(h).search("TopLevel_Text")?this.cont.appendChild(g):this.cont.insertBefore(g,h)}this.idPull[g.id]=g}else{var i=this.idPull["polygon_"+this.itemPull[a].parent];null!=b&&(b++,0>b&&(b=0),b>i.tbd.childNodes.length-1&&(b=null)),null!=b&&null!=i.tbd.childNodes[b]?i.tbd.insertBefore(e,i.tbd.childNodes[b]):i.tbd.appendChild(e),f.appendChild(g),this.idPull[g.id]=e}}},dhtmlXMenuObject.prototype.addNewSeparator=function(a,b){b=this.idPrefix+(null!=b?b:this._genStr(24));var c=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(b,c,"","separator",!1,"",""),this._renderSeparator(b,this.getItemPosition(a))},dhtmlXMenuObject.prototype._initObj=function(a,b,c){a instanceof Array||(c=a.parentId,null!=c&&0!==String(c).indexOf(this.idPrefix)&&(c=this.idPrefix+String(c)),a=a.items);for(var d=0;d<a.length;d++){("undefined"==typeof a[d].id||null==a[d].id)&&(a[d].id=this._genStr(24)),0!==String(a[d].id).indexOf(this.idPrefix)&&(a[d].id=this.idPrefix+String(a[d].id));var e={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var f in e)"undefined"==typeof a[d][f]&&(a[d][f]=e[f]);if(""==a[d].imgen&&null!=a[d].img&&(a[d].imgen=a[d].img),""==a[d].imgdis&&null!=a[d].img_disabled&&(a[d].imgdis=a[d].img_disabled),null==a[d].title&&null!=a[d].text&&(a[d].title=a[d].text),null!=a[d].href&&(null!=a[d].href.link&&(a[d].href_link=a[d].href.link),null!=a[d].href.target&&(a[d].href_target=a[d].href.target)),null!=a[d].userdata)for(var f in a[d].userdata)this.userData[a[d].id+"_"+f]=a[d].userdata[f];"undefined"!=typeof a[d].enabled&&0==window.dhx4.s2b(a[d].enabled)?a[d].state="disabled":"undefined"!=typeof a[d].disabled&&1==window.dhx4.s2b(a[d].disabled)&&(a[d].state="disabled"),"undefined"==typeof a[d].parent&&(a[d].parent=null!=c?c:this.idPrefix+this.topId),"checkbox"==a[d].type&&(a[d].checked=window.dhx4.s2b(a[d].checked),a[d].imgen=a[d].imgdis="chbx_"+(a[d].checked?"1":"0")),"radio"==a[d].type&&(a[d].checked=window.dhx4.s2b(a[d].checked),a[d].imgen=a[d].imgdis="rdbt_"+(a[d].checked?"1":"0"),("undefined"==typeof a[d].group||null==a[d].group)&&(a[d].group=this._genStr(24)),null==this.radio[a[d].group]&&(this.radio[a[d].group]=[]),this.radio[a[d].group].push(a[d].id)),this.itemPull[a[d].id]=a[d],null!=a[d].items&&a[d].items.length>0?(this.itemPull[a[d].id].complex=!0,this._initObj(a[d].items,!0,a[d].id)):this.conf.dload&&1==a[d].complex&&(this.itemPull[a[d].id].loaded="no"),this.itemPull[a[d].id].items=null}if(b!==!0)if(1==this.conf.dload)if(null==c)this._initTopLevelMenu();else{if(this._addSubMenuPolygon(c,c),this.conf.selected==c){var g=this.itemPull[c].parent==this.idPrefix+this.topId,h=g&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv,i=!1;if(g&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context){var j=this.idPull[c];if(1==j._mouseOver){var k=this.conf.top_tmtime-((new Date).getTime()-j._dynLoadTM);if(k>1){var l=c,m=this;j._menuOpenTM=window.setTimeout(function(){m._showPolygon(l,h),m=l=null},k),i=!0}}}i||this._showPolygon(c,h)}this.itemPull[c].loaded="yes",1==this.conf.dload_icon&&this._updateLoaderIcon(c,!1)}else this._init()},dhtmlXMenuObject.prototype._xmlToJson=function(a,b){var c=[];if(null==b){var d=a.getElementsByTagName(this.conf.tags.root);if(null==d||0==d.length)return data;d=d[0]}else d=a;null!=d.getAttribute("parentId")&&(b=this.idPrefix+d.getAttribute("parentId"));for(var e=0;e<d.childNodes.length;e++)if("undefined"!=typeof d.childNodes[e].tagName&&String(d.childNodes[e].tagName).toLowerCase()==this.conf.tags.item){var f=d.childNodes[e],g={id:this.idPrefix+(f.getAttribute("id")||this._genStr(24)),title:f.getAttribute("text")||"",imgen:f.getAttribute("img")||"",imgdis:f.getAttribute("imgdis")||"",tip:"",hotkey:"",type:f.getAttribute("type")||"item"};if(null!=f.getAttribute("cssNormal")&&(g.cssNormal=f.getAttribute("cssNormal")),"checkbox"==g.type&&(g.checked=f.getAttribute("checked")),"radio"==g.type&&(g.checked=f.getAttribute("checked"),g.group=f.getAttribute("group")),g.state="enabled",null!=f.getAttribute("enabled")&&0==window.dhx4.s2b(f.getAttribute("enabled"))?g.state="disabled":null!=f.getAttribute("disabled")&&1==window.dhx4.s2b(f.getAttribute("disabled"))&&(g.state="disabled"),g.parent=null!=b?b:this.idPrefix+this.topId,this.conf.dload)g.complex=null!=f.getAttribute("complex"),g.complex&&(g.loaded="no");else{var h=this._xmlToJson(f,g.id);g.items=h.items,g.complex=g.items.length>0}for(var i=0;i<f.childNodes.length;i++)if("undefined"!=typeof f.childNodes[i].tagName){var j=String(f.childNodes[i].tagName||"").toLowerCase();if(j==this.conf.tags.userdata){var k=f.childNodes[i];null!=k.getAttribute("name")&&(this.userData[g.id+"_"+k.getAttribute("name")]=null!=k.firstChild&&null!=k.firstChild.nodeValue?k.firstChild.nodeValue:"")}j==this.conf.tags.text_ext&&(g.title=f.childNodes[i].firstChild.nodeValue),j==this.conf.tags.tooltip&&(g.tip=f.childNodes[i].firstChild.nodeValue),j==this.conf.tags.hotkey&&(g.hotkey=f.childNodes[i].firstChild.nodeValue),j==this.conf.tags.href&&"item"==g.type&&(g.href_link=f.childNodes[i].firstChild.nodeValue,null!=f.childNodes[i].getAttribute("target")&&(g.href_target=f.childNodes[i].getAttribute("target")))}c.push(g)}var f={parentId:b,items:c};return f},dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,b){this.conf.dload=!0,this.conf.dload_url=a,this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"&",this.conf.dload_icon=b,this._init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(a,b){if(null!=this.idPull[a]&&!(String(this.idPull[a].className).search("TopLevel_Item")>=0)){var c=this.conf.rtl?0:2;if(this.idPull[a].childNodes[c]&&this.idPull[a].childNodes[c].childNodes[0]){var d=this.idPull[a].childNodes[c].childNodes[0];0===String(d.className).search("complex_arrow")&&(d.className="complex_arrow"+(b?"_loading":""))}}},dhtmlXMenuObject.prototype.addNewSibling=function(a,b,c,d,e,f){var g=this.idPrefix+(null!=b?b:this._genStr(24)),h=this.idPrefix+(null!=a?this.getParentId(a):this.topId);this._addItemIntoGlobalStrorage(g,h,c,"item",d,e,f),h!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(g,this.getItemPosition(a)):this._renderToplevelItem(g,this.getItemPosition(a))},dhtmlXMenuObject.prototype.addNewChild=function(a,b,c,d,e,f,g){if(null==a){if(!this.conf.context)return this.addNewSibling(a,c,d,e,f,g),void(null!=b&&this.setItemPosition(c,b));a=this.topId}c=this.idPrefix+(null!=c?c:this._genStr(24)),this.setHotKey&&this.setHotKey(a,""),a=this.idPrefix+a,this._addItemIntoGlobalStrorage(c,a,d,"item",e,f,g),null==this.idPull["polygon_"+a]&&this._renderSublevelPolygon(a,a),this._renderSublevelItem(c,b-1),this._redefineComplexState(a)},dhtmlXMenuObject.prototype.removeItem=function(a,b,c){b||(a=this.idPrefix+a);var d=null;if(a!=this.idPrefix+this.topId){if(null==this.itemPull[a])return;this.idPull["polygon_"+a]&&this.idPull["polygon_"+a]._tmShow&&window.clearTimeout(this.idPull["polygon_"+a]._tmShow);var e=this.itemPull[a].type;if("separator"==e){var f=this.idPull["separator_"+a];this.itemPull[a].parent==this.idPrefix+this.topId?(f.onclick=null,f.onselectstart=null,f.id=null,f.parentNode.removeChild(f)):(f.childNodes[0].childNodes[0].onclick=null,f.childNodes[0].childNodes[0].onselectstart=null,f.childNodes[0].childNodes[0].id=null,f.childNodes[0].removeChild(f.childNodes[0].childNodes[0]),f.removeChild(f.childNodes[0]),f.parentNode.removeChild(f)),this.idPull["separator_"+a]=null,this.itemPull[a]=null,delete this.idPull["separator_"+a],delete this.itemPull[a],f=null}else{d=this.itemPull[a].parent;var f=this.idPull[a];for(f.onclick=null,f.oncontextmenu=null,f.onmouseover=null,f.onmouseout=null,f.onselectstart=null,f.id=null;f.childNodes.length>0;)f.removeChild(f.childNodes[0]);f.parentNode.removeChild(f),this.idPull[a]=null,this.itemPull[a]=null,delete this.idPull[a],delete this.itemPull[a],f=null}e=null}for(var g in this.itemPull)this.itemPull[g].parent==a&&this.removeItem(g,!0,!0);var h=new Array(a);null==d||c||null!=this.idPull["polygon_"+d]&&0==this.idPull["polygon_"+d].tbd.childNodes.length&&(h.push(d),this._updateItemComplexState(d,!1,!1));for(var i=0;i<h.length;i++)if(this.idPull["polygon_"+h[i]]){var j=this.idPull["polygon_"+h[i]];if(j.onclick=null,j.oncontextmenu=null,j.tbl.removeChild(j.tbd),j.tbd=null,j.childNodes[1].removeChild(j.tbl),j.tbl=null,j.id=null,j.parentNode.removeChild(j),j=null,window.dhx4.isIE6){var k="polygon_"+h[i]+"_ie6cover";null!=this.idPull[k]&&(document.body.removeChild(this.idPull[k]),delete this.idPull[k])}null!=this.idPull["arrowup_"+a]&&this._removeArrow&&this._removeArrow("arrowup_"+a),null!=this.idPull["arrowdown_"+a]&&this._removeArrow&&this._removeArrow("arrowdown_"+a),this.idPull["polygon_"+h[i]]=null,delete this.idPull["polygon_"+h[i]]}h=null,"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(a,b,c,d,e,f,g){var h={id:a,title:c,imgen:null!=f?f:"",imgdis:null!=g?g:"",type:d,state:1==e?"disabled":"enabled",parent:b,complex:!1,hotkey:"",tip:""};this.itemPull[h.id]=h},dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0,1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1),null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)},dhtmlXMenuObject.prototype.addContextZone=function(a){if(a==document.body){a="document.body."+this.idPrefix;var b=document.body}else var b=document.getElementById(a);var c=!1;for(var d in this.conf.ctx_zones)c=c||d==a||this.conf.ctx_zones[d]==b;if(1==c)return!1;this.conf.ctx_zones[a]=b;var e=this;window.dhx4.isOpera?(this.operaContext=function(a){e._doOnContextMenuOpera(a,e)},b.addEventListener("mouseup",this.operaContext,!1)):(null==b.oncontextmenu||b._oldContextMenuHandler||(b._oldContextMenuHandler=b.oncontextmenu),b.oncontextmenu=function(a){for(var b in dhtmlXMenuObject.prototype.liveInst)b!=e.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[b].context&&dhtmlXMenuObject.prototype.liveInst[b]._hideContextMenu();return a=a||event,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,e._doOnContextBeforeCall(a,this),!1})},dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(a,b){for(var c in dhtmlXMenuObject.prototype.liveInst)c!=b.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[c].context&&dhtmlXMenuObject.prototype.liveInst[c]._hideContextMenu();return a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,0==a.button&&1==a.ctrlKey&&b._doOnContextBeforeCall(a,this),!1},dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a))return!1;a==document.body&&(a="document.body."+this.idPrefix);var b=this.conf.ctx_zones[a];window.dhx4.isOpera?b.removeEventListener("mouseup",this.operaContext,!1):(b.oncontextmenu=null!=b._oldContextMenuHandler?b._oldContextMenuHandler:null,b._oldContextMenuHandler=null);try{this.conf.ctx_zones[a]=null,delete this.conf.ctx_zones[a]}catch(c){}return!0},dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var b=!1;return null!=this.conf.ctx_zones[a]&&this.conf.ctx_zones[a]==document.getElementById(a)&&(b=!0),b},dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display},dhtmlXMenuObject.prototype._showContextMenu=function(a,b,c){return this._clearAndHide(),null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:(window.clearTimeout(this.conf.tm_handler),this.idPull[this.idPrefix+this.topId]=new Array(a,b),this._showPolygon(this.idPrefix+this.topId,"bottom"),void this.callEvent("onContextMenu",[c]))},dhtmlXMenuObject.prototype._hideContextMenu=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:(this._clearAndHide(),void this._hidePolygon(this.idPrefix+this.topId))},dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(a,b){this.conf.ctx_zoneid=b.id,this._clearAndHide(),this._hideContextMenu();var c=a.srcElement||a.target,d=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?a.offsetX:a.layerX,e=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?a.offsetY:a.layerY,f=window.dhx4.absLeft(c)+d,g=window.dhx4.absTop(c)+e;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[b.id,a])&&this.conf.ctx_autoshow&&(this._showContextMenu(f,g,b.id),this.callEvent("onAfterContextMenu",[b.id,a])):this.conf.ctx_autoshow&&(this._showContextMenu(f,g,b.id),this.callEvent("onAfterContextMenu",[b.id]))},dhtmlXMenuObject.prototype.showContextMenu=function(a,b){this._showContextMenu(a,b,!1)},dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()},dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.conf.ctx_autoshow=1==a?!0:!1},dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.conf.ctx_autohide=1==a?!0:!1},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.conf.ctx_hideall=1==a?!0:!1},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall},dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var a in this.itemPull)if(this.itemPull[a].parent==this.idPrefix+this.topId&&null!=this.idPull[a]){var b=!1,c=!1;this.idPull[a].parentNode.firstChild==this.idPull[a]&&(b=!0),this.idPull[a].parentNode.lastChild==this.idPull[a]&&(c=!0);for(var d in this.itemPull)"separator"==this.itemPull[d].type&&this.itemPull[d].parent==this.idPrefix+this.topId&&(this.idPull[a].nextSibling==this.idPull["separator_"+d]&&(c=!0),this.idPull[a].previousSibling==this.idPull["separator_"+d]&&(b=!0));this.idPull[a].style.borderLeftWidth=b?"1px":"0px",this.idPull[a].style.borderTopLeftRadius=this.idPull[a].style.borderBottomLeftRadius=b?"3px":"0px",this.idPull[a].style.borderTopRightRadius=this.idPull[a].style.borderBottomRightRadius=c?"3px":"0px",this.idPull[a]._bl=b,this.idPull[a]._br=c}},dhtmlXMenuObject.prototype._improveTerraceButton=function(a,b){b?(this.idPull[a].style.borderBottomLeftRadius=this.idPull[a]._bl?"3px":"0px",this.idPull[a].style.borderBottomRightRadius=this.idPull[a]._br?"3px":"0px"):(this.idPull[a].style.borderBottomLeftRadius="0px",this.idPull[a].style.borderBottomRightRadius="0px")},dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a))},dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a))},dhtmlXMenuObject.prototype.isItemEnabled=function(a){return null!=this.itemPull[this.idPrefix+a]?"enabled"==this.itemPull[this.idPrefix+a].state:!1},dhtmlXMenuObject.prototype._changeItemState=function(a,b,c){var d=!1,e=this.idPrefix+a;return null!=this.itemPull[e]&&null!=this.idPull[e]&&this.itemPull[e].state!=b&&(this.itemPull[e].state=b,this.idPull[e].className=this.itemPull[e].parent!=this.idPrefix+this.topId||this.conf.context?"sub_item"+("enabled"==this.itemPull[e].state?"":"_dis"):"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[e].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+a,this.itemPull[this.idPrefix+a].complex,!1),this._updateItemImage(a,c),this.idPrefix+this.conf.last_click==e&&"TopLevel"!=c&&this._redistribSubLevelSelection(e,this.itemPull[e].parent),"TopLevel"==c&&!this.conf.context),d},dhtmlXMenuObject.prototype.getItemText=function(a){return null!=this.itemPull[this.idPrefix+a]?this.itemPull[this.idPrefix+a].title:""},dhtmlXMenuObject.prototype.setItemText=function(a,b){if(a=this.idPrefix+a,null!=this.itemPull[a]&&null!=this.idPull[a])if(this._clearAndHide(),this.itemPull[a].title=b,this.itemPull[a].parent!=this.idPrefix+this.topId||this.conf.context){for(var c=null,d=0;d<this.idPull[a].childNodes[1].childNodes.length;d++)"sub_item_text"==String(this.idPull[a].childNodes[1].childNodes[d].className||"")&&(c=this.idPull[a].childNodes[1].childNodes[d]);""==String(this.itemPull[a].title).length||null==this.itemPull[a].title?c&&(c.parentNode.removeChild(c),c=null,this.idPull[a].childNodes[1].innerHTML="&nbsp;"):(c||(c=document.createElement("DIV"),c.className="sub_item_text",this.idPull[a].childNodes[1].innerHTML="",this.idPull[a].childNodes[1].appendChild(c)),c.innerHTML=this.itemPull[a].title)}else{for(var c=null,d=0;d<this.idPull[a].childNodes.length;d++)try{"top_level_text"==this.idPull[a].childNodes[d].className&&(c=this.idPull[a].childNodes[d])}catch(e){}""==String(this.itemPull[a].title).length||null==this.itemPull[a].title?null!=c&&c.parentNode.removeChild(c):(c||(c=document.createElement("DIV"),c.className="top_level_text",this.conf.rtl&&this.idPull[a].childNodes.length>0?this.idPull[a].insertBefore(c,this.idPull[a].childNodes[0]):this.idPull[a].appendChild(c)),c.innerHTML=this.itemPull[a].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(a,b,c){var d=this.conf.tags.item;this.conf.tags.item="div";var e="string"==typeof a?document.getElementById(a):a,f=this._xmlToJson(e,this.idPrefix+this.topId);this._initObj(f),this.conf.tags.item=d,b&&e.parentNode.removeChild(e),e=objOd=null,null!=onload&&("function"==typeof c?c():"function"==typeof window[c]&&window[c]())},dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,!1)},dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(a){var b=null;return null!=this.idPull[this.idPrefix+a]&&(b="none"==this.idPull[this.idPrefix+a].style.display),b},dhtmlXMenuObject.prototype._changeItemVisible=function(a,b){var c=this.idPrefix+a;null!=this.itemPull[c]&&("separator"==this.itemPull[c].type&&(c="separator_"+c),null!=this.idPull[c]&&(this.idPull[c].style.display=b?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+a].parent)))},dhtmlXMenuObject.prototype.setUserData=function(a,b,c){this.userData[this.idPrefix+a+"_"+b]=c},dhtmlXMenuObject.prototype.getUserData=function(a,b){return null!=this.userData[this.idPrefix+a+"_"+b]?this.userData[this.idPrefix+a+"_"+b]:null},dhtmlXMenuObject.prototype.setOpenMode=function(a){this.conf.mode="win"==a?"win":"web"},dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.conf.tm_sec=isNaN(a)?400:a},dhtmlXMenuObject.prototype.getItemImage=function(a){var b=new Array(null,null);return a=this.idPrefix+a,"item"==this.itemPull[a].type&&(b[0]=this.itemPull[a].imgen,b[1]=this.itemPull[a].imgdis),b},dhtmlXMenuObject.prototype.setItemImage=function(a,b,c){"item"==this.itemPull[this.idPrefix+a].type&&(this.itemPull[this.idPrefix+a].imgen=b,this.itemPull[this.idPrefix+a].imgdis=c,this._updateItemImage(a,this._getItemLevelType(a)))},dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","")},dhtmlXMenuObject.prototype.setVisibleArea=function(a,b,c,d){this.conf.v_enabled=!0,this.conf.v.x1=a,this.conf.v.x2=b,this.conf.v.y1=c,this.conf.v.y2=d},dhtmlXMenuObject.prototype.setTooltip=function(a,b){a=this.idPrefix+a,null!=this.itemPull[a]&&null!=this.idPull[a]&&(this.idPull[a].title=b.length>0?b:null,this.itemPull[a].tip=b)},dhtmlXMenuObject.prototype.getTooltip=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].tip},dhtmlXMenuObject.prototype.setTopText=function(a){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=a)},dhtmlXMenuObject.prototype.setAlign=function(a){this.conf.align!=a&&("left"==a||"right"==a)&&(this.conf.align=a,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left")))},dhtmlXMenuObject.prototype.setHref=function(a,b,c){null!=this.itemPull[this.idPrefix+a]&&(this.itemPull[this.idPrefix+a].href_link=b,null!=c&&(this.itemPull[this.idPrefix+a].href_target=c))},dhtmlXMenuObject.prototype.clearHref=function(a){null!=this.itemPull[this.idPrefix+a]&&(delete this.itemPull[this.idPrefix+a].href_link,delete this.itemPull[this.idPrefix+a].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(a){for(var b=new Array(a);this.getParentId(a)!=this.topId;)a=this.getParentId(a),b[b.length]=a;return b.reverse()},dhtmlXMenuObject.prototype._getCheckboxState=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(a,b){null!=this.itemPull[this.idPrefix+a]&&(this.itemPull[this.idPrefix+a].checked=b)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(a){if(null!=this.idPull[this.idPrefix+a]){this.itemPull[this.idPrefix+a].imgen="chbx_"+(this._getCheckboxState(a)?"1":"0"),this.itemPull[this.idPrefix+a].imgdis=this.itemPull[this.idPrefix+a].imgen;try{this.idPull[this.idPrefix+a].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+a].imgen}catch(b){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(a,b,c){if("d"!=b.charAt(1)&&null!=this.itemPull[this.idPrefix+a]){var d=this._getCheckboxState(a);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[a,d,this.conf.ctx_zoneid,c])&&this.setCheckboxState(a,!d):this.setCheckboxState(a,!d),this.checkEvent("onClick")&&this.callEvent("onClick",[a])}},dhtmlXMenuObject.prototype.setCheckboxState=function(a,b){this._setCheckboxState(a,b),this._updateCheckboxImage(a)},dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a)},dhtmlXMenuObject.prototype.addCheckbox=function(a,b,c,d,e,f,g){if(this.conf.context&&b==this.topId);else{if(null==this.itemPull[this.idPrefix+b])return;if("child"==a&&"item"!=this.itemPull[this.idPrefix+b].type)return}var h="chbx_"+(f?"1":"0"),i=h;if("sibling"==a){var j=this.idPrefix+(null!=d?d:this._genStr(24)),k=this.idPrefix+this.getParentId(b);this._addItemIntoGlobalStrorage(j,k,e,"checkbox",g,h,i),this.itemPull[j].checked=f,this._renderSublevelItem(j,this.getItemPosition(b))}else{var j=this.idPrefix+(null!=d?d:this._genStr(24)),k=this.idPrefix+b;this._addItemIntoGlobalStrorage(j,k,e,"checkbox",g,h,i),this.itemPull[j].checked=f,null==this.idPull["polygon_"+k]&&this._renderSublevelPolygon(k,k),this._renderSublevelItem(j,c-1),this._redefineComplexState(k)}},dhtmlXMenuObject.prototype.setHotKey=function(a,b){if(a=this.idPrefix+a,null!=this.itemPull[a]&&null!=this.idPull[a]&&(this.itemPull[a].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[a].complex){var c=this.itemPull[a].type;if("item"==c||"checkbox"==c||"radio"==c){var d=null;try{"sub_item_hk"==this.idPull[a].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(d=this.idPull[a].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(e){}if(0==b.length)this.itemPull[a].hotkey_backup=this.itemPull[a].hotkey,this.itemPull[a].hotkey="",null!=d&&d.parentNode.removeChild(d);else{if(this.itemPull[a].hotkey=b,this.itemPull[a].hotkey_backup=null,null==d){d=document.createElement("DIV"),d.className="sub_item_hk";for(var f=this.idPull[a].childNodes[this.conf.rtl?0:2];f.childNodes.length>0;)f.removeChild(f.childNodes[0]);f.appendChild(d)}d.innerHTML=b}}}},dhtmlXMenuObject.prototype.getHotKey=function(a){return null==this.itemPull[this.idPrefix+a]?null:this.itemPull[this.idPrefix+a].hotkey},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){for(var b=this._getSubItemToDeselectByPolygon(a),c=0;c<this.conf.opened_poly.length;c++)this.conf.opened_poly[c]!=a&&this._hidePolygon(this.conf.opened_poly[c]);for(var c=0;c<b.length;c++)null!=this.idPull[b[c]]&&"enabled"==this.itemPull[b[c]].state&&(this.idPull[b[c]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(a){var b=this.idPull["polygon_"+a].childNodes[1],c=this.idPull["arrowup_"+a],d=this.idPull["arrowdown_"+a];c.className=0==b.scrollTop?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(c.over?"_Over":""),d.className=b.scrollTop+b.offsetHeight<b.scrollHeight?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(d.over?"_Over":""):"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled",b=c=d=null},dhtmlXMenuObject.prototype._addUpArrow=function(a){var b=this,c=document.createElement("DIV");c.pId=this.idPrefix+a,c.id="arrowup_"+this.idPrefix+a,c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp",c.over=!1,c.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},c.oncontextmenu=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},c.onmouseover=function(){"web"==b.conf.mode&&window.clearTimeout(b.conf.tm_handler),b._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,b._canScrollUp=!0,b._doScrollUp(this.pId,!0))},c.onmouseout=function(){"web"==b.conf.mode&&(window.clearTimeout(b.conf.tm_handler),b.conf.tm_handler=window.setTimeout(function(){b._clearAndHide()},b.conf.tm_sec,"JavaScript")),this.over=!1,b._canScrollUp=!1,this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(b.conf.of_utm))},c.onclick=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,!1};var d=this.idPull["polygon_"+this.idPrefix+a];d.childNodes[0].appendChild(c),this.idPull[c.id]=c,d=c=null},dhtmlXMenuObject.prototype._addDownArrow=function(a){var b=this,c=document.createElement("DIV");c.pId=this.idPrefix+a,c.id="arrowdown_"+this.idPrefix+a,c.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown",c.over=!1,c.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},c.oncontextmenu=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},c.onmouseover=function(){"web"==b.conf.mode&&window.clearTimeout(b.conf.tm_handler),b._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,b._canScrollDown=!0,b._doScrollDown(this.pId,!0))},c.onmouseout=function(){"web"==b.conf.mode&&(window.clearTimeout(b.conf.tm_handler),b.conf.tm_handler=window.setTimeout(function(){b._clearAndHide()},b.conf.tm_sec,"JavaScript")),this.over=!1,b._canScrollDown=!1,this.className!="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+b.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(b.conf.of_dtm))},c.onclick=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,!1};var d=this.idPull["polygon_"+this.idPrefix+a];d.childNodes[2].appendChild(c),this.idPull[c.id]=c,d=c=null},dhtmlXMenuObject.prototype._removeUpArrow=function(a){var b="arrowup_"+this.idPrefix+a;this._removeArrow(b)},dhtmlXMenuObject.prototype._removeDownArrow=function(a){var b="arrowdown_"+this.idPrefix+a;this._removeArrow(b)},dhtmlXMenuObject.prototype._removeArrow=function(a){var b=this.idPull[a];b.onselectstart=null,b.oncontextmenu=null,b.onmouseover=null,b.onmouseout=null,b.onclick=null,b.parentNode&&b.parentNode.removeChild(b),b=null,this.idPull[a]=null;try{delete this.idPull[a]}catch(c){}},dhtmlXMenuObject.prototype._isArrowExists=function(a){return null!=this.idPull["arrowup_"+a]&&null!=this.idPull["arrowdown_"+a]?!0:!1},dhtmlXMenuObject.prototype._doScrollUp=function(a,b){var c=this.idPull["polygon_"+a].childNodes[1];if(this._canScrollUp&&c.scrollTop>0){var d=!1,e=c.scrollTop-this.conf.of_ustep;if(0>e&&(d=!0,e=0),c.scrollTop=e,d)b=!0;else{var f=this;this.conf.of_utm=window.setTimeout(function(){f._doScrollUp(a,!1),f=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(a);b&&this._checkArrowsState(a)},dhtmlXMenuObject.prototype._doScrollDown=function(a,b){var c=this.idPull["polygon_"+a].childNodes[1];if(this._canScrollDown&&c.scrollTop+c.offsetHeight<=c.scrollHeight){var d=!1,e=c.scrollTop+this.conf.of_dstep;if(e+c.offsetHeight>=c.scrollHeight&&(d=!0,e=c.scrollHeight-c.offsetHeight),c.scrollTop=e,d)b=!0;else{var f=this;this.conf.of_dtm=window.setTimeout(function(){f._doScrollDown(a,!1),f=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(a);b&&this._checkArrowsState(a)},dhtmlXMenuObject.prototype._countPolygonItems=function(a){var b=0;for(var c in this.itemPull){var d=this.itemPull[c].parent,e=this.itemPull[c].type;d!=this.idPrefix+a||"item"!=e&&"radio"!=e&&"checkbox"!=e||b++}return b},dhtmlXMenuObject.prototype.setOverflowHeight=function(a){if("auto"===a)return this.conf.overflow_limit=0,void(this.conf.auto_overflow=!0);if(!(0==this.conf.overflow_limit&&0>=a)){if(this._clearAndHide(),this.conf.overflow_limit>=0&&a>0)return void(this.conf.overflow_limit=a);if(this.conf.overflow_limit>0&&0>=a){for(var b in this.itemPull)if(this._isArrowExists(b)){var c=String(b).replace(this.idPrefix,"");this._removeUpArrow(c),this._removeDownArrow(c),this.idPull["polygon_"+b].childNodes[1].style.height=""}return void(this.conf.overflow_limit=0)}}},dhtmlXMenuObject.prototype._getRadioImgObj=function(a){try{var b=this.idPull[this.idPrefix+a].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(c){var b=null}return b},dhtmlXMenuObject.prototype._setRadioState=function(a,b){var c=this._getRadioImgObj(a);if(null!=c){var d=this.itemPull[this.idPrefix+a];d.checked=b,d.imgen="rdbt_"+(d.checked?"1":"0"),d.imgdis=d.imgen,c.className="sub_icon "+d.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(a,b,c){if("d"!=b.charAt(1)&&null!=this.itemPull[this.idPrefix+a].group){var d=this.itemPull[this.idPrefix+a].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[d,this.getRadioChecked(d),a,this.conf.ctx_zoneid,c])&&this.setRadioChecked(d,a):this.setRadioChecked(d,a),this.checkEvent("onClick")&&this.callEvent("onClick",[a])}},dhtmlXMenuObject.prototype.getRadioChecked=function(a){for(var b=null,c=0;c<this.radio[a].length;c++){var d=this.radio[a][c].replace(this.idPrefix,""),e=this._getRadioImgObj(d);if(null!=e){var f=e.className.match(/rdbt_1$/gi);null!=f&&(b=d)}}return b},dhtmlXMenuObject.prototype.setRadioChecked=function(a,b){if(null!=this.radio[a])for(var c=0;c<this.radio[a].length;c++){var d=this.radio[a][c].replace(this.idPrefix,"");this._setRadioState(d,d==b)}},dhtmlXMenuObject.prototype.addRadioButton=function(a,b,c,d,e,f,g,h){if(this.conf.context&&b==this.topId);else{if(null==this.itemPull[this.idPrefix+b])return;if("child"==a&&"item"!=this.itemPull[this.idPrefix+b].type)return
}var i=this.idPrefix+(null!=d?d:this._genStr(24)),j="rdbt_"+(g?"1":"0"),k=j;if("sibling"==a){var l=this.idPrefix+this.getParentId(b);this._addItemIntoGlobalStrorage(i,l,e,"radio",h,j,k),this._renderSublevelItem(i,this.getItemPosition(b))}else{var l=this.idPrefix+b;this._addItemIntoGlobalStrorage(i,l,e,"radio",h,j,k),null==this.idPull["polygon_"+l]&&this._renderSublevelPolygon(l,l),this._renderSublevelItem(i,c-1),this._redefineComplexState(l)}var m=null!=f?f:this._genStr(24);this.itemPull[i].group=m,null==this.radio[m]&&(this.radio[m]=new Array),this.radio[m][this.radio[m].length]=i,1==g&&this.setRadioChecked(m,String(i).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype.serialize=function(){var a="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return a},dhtmlXMenuObject.prototype._readLevel=function(a){var b="";for(var c in this.itemPull)if(this.itemPull[c].parent==a){var d="",e="",f="",g=String(this.itemPull[c].id).replace(this.idPrefix,""),h="",i=""!=this.itemPull[c].title?' text="'+this.itemPull[c].title+'"':"",j="";"item"==this.itemPull[c].type&&(""!=this.itemPull[c].imgen&&(d=' img="'+this.itemPull[c].imgen+'"'),""!=this.itemPull[c].imgdis&&(e=' imgdis="'+this.itemPull[c].imgdis+'"'),""!=this.itemPull[c].hotkey&&(f="<hotkey>"+this.itemPull[c].hotkey+"</hotkey>")),"separator"==this.itemPull[c].type?h=' type="separator"':"disabled"==this.itemPull[c].state&&(j=' enabled="false"'),"checkbox"==this.itemPull[c].type&&(h=' type="checkbox"'+(this.itemPull[c].checked?' checked="true"':"")),"radio"==this.itemPull[c].type&&(h=' type="radio" group="'+this.itemPull[c].group+'" '+(this.itemPull[c].checked?' checked="true"':"")),b+="<item id='"+g+"'"+i+h+d+e+j+">",b+=f,this.itemPull[c].complex&&(b+=this._readLevel(c)),b+="</item>"}return b},dhtmlXMenuObject.prototype.enableEffect=function(a,b,c){this._menuEffect="opacity"==a||"slide"==a||"slide+"==a?a:!1,this._pOpStyleIE=navigator.userAgent.search(/MSIE\s[678]\.0/gi)>=0;for(var d in this.idPull)0===d.search(/polygon/)&&(this._pOpacityApply(d,this._pOpStyleIE?100:1),this.idPull[d].style.height="");this._pOpMax=("undefined"==typeof b?100:b)/(this._pOpStyleIE?1:100),this._pOpStyleName=this._pOpStyleIE?"filter":"opacity",this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#",this._pSlSteps=this._pOpStyleIE?10:20,this._pSlTMTimeMax=c||50},dhtmlXMenuObject.prototype._showPolygonEffect=function(a){this._pShowHide(a,!0)},dhtmlXMenuObject.prototype._hidePolygonEffect=function(a){this._pShowHide(a,!1)},dhtmlXMenuObject.prototype._pOpacityApply=function(a,b){this.idPull[a].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",b||this.idPull[a]._op)},dhtmlXMenuObject.prototype._pShowHide=function(a,b){if(this.idPull){if(null!=this.idPull[a]._tmShow){if(this.idPull[a]._step_h>0&&1==b||this.idPull[a]._step_h<0&&0==b)return;window.clearTimeout(this.idPull[a]._tmShow),this.idPull[a]._tmShow=null,this.idPull[a]._max_h=null}if(0!=b||"hidden"!=this.idPull[a].style.visibility&&"none"!=this.idPull[a].style.display){if(1==b&&"none"==this.idPull[a].style.display&&(this.idPull[a].style.visibility="hidden",this.idPull[a].style.display=""),null==this.idPull[a]._max_h){if(this.idPull[a]._max_h=parseInt(this.idPull[a].offsetHeight),this.idPull[a]._h=1==b?0:this.idPull[a]._max_h,this.idPull[a]._step_h=Math.round(this.idPull[a]._max_h/this._pSlSteps)*(1==b?1:-1),0==this.idPull[a]._step_h)return;this.idPull[a]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps),"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[a].op_tm=this.idPull[a]._step_tm,this.idPull[a].op_step=this._pOpMax/this._pSlSteps*(1==b?1:-1),this._pOpStyleIE&&(this.idPull[a].op_step=Math.round(this.idPull[a].op_step)),this.idPull[a]._op=1==b?0:this._pOpMax,this._pOpacityApply(a)):(this.idPull[a]._op=this._pOpStyleIE?100:1,this._pOpacityApply(a)),0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height="0px"),this.idPull[a].style.visibility="visible"}this._pEffectSet(a,this.idPull[a]._h+this.idPull[a]._step_h)}}},dhtmlXMenuObject.prototype._pEffectSet=function(a,b){if(this.idPull)if(this.idPull[a]._tmShow&&window.clearTimeout(this.idPull[a]._tmShow),this.idPull[a]._h=Math.max(0,Math.min(b,this.idPull[a]._max_h)),0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height=this.idPull[a]._h+"px"),b+=this.idPull[a]._step_h,("slide+"==this._menuEffect||"opacity"==this._menuEffect)&&(this.idPull[a]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[a]._op+this.idPull[a].op_step)),this._pOpacityApply(a)),this.idPull[a]._step_h>0&&b<=this.idPull[a]._max_h||this.idPull[a]._step_h<0&&b>=0){var c=this;this.idPull[a]._tmShow=window.setTimeout(function(){c._pEffectSet(a,b)},this.idPull[a]._step_tm)}else 0===this._menuEffect.search(/slide/)&&(this.idPull[a].style.height=""),this.idPull[a]._step_h<0&&(this.idPull[a].style.visibility="hidden"),("slide+"==this._menuEffect||"opacity"==this._menuEffect)&&(this.idPull[a]._op=this.idPull[a]._step_h<0?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(a)),this.idPull[a]._tmShow=null,this.idPull[a]._h=null,this.idPull[a]._max_h=null,this.idPull[a]._step_tm=null},dhtmlXRibbon.prototype.setSizes=function(){null!=this._tabbar&&"function"==typeof this.setSizes&&this._tabbar.setSizes()},dhtmlXRibbon.prototype._renderData=function(a){var b=this._base.firstChild;null!=a&&(this.conf.icons_path=a.icons_path||this.conf.icons_path,a.tabs instanceof Array?(this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,""),b.className="dhxrb_with_tabbar",this._tabbar=new dhtmlXTabBar(b),this._attachEventTabbar(),this._tabbar.setSkin(this.conf.skin),this.childIds=this._appendTabs(a.tabs)):a.items instanceof Array&&(/\s?dhxrb_without_tabbar/i.test(this._base.className)||(this._base.className+=" dhxrb_without_tabbar"),/\s?dhxrb_background_area/i.test(b.className)&&(b.className="dhxrb_background_area"),b.innerHTML="<div class='dhxrb_g_area'></div>",this.childIds=this._appendBlocks(a.items,b.firstChild)),this.callEvent("_onHeightChanged",[]))},dhtmlXRibbon.prototype._xmlToJson=function(a){var b=a.lastChild||null,c={},d=[];return b&&"ribbon"==b.tagName&&(d=this._convertXmlNodeListIntoObject(b.childNodes)),d[0]&&d[0].type&&"block"==d[0].type.toLowerCase()?c.items=d:c.tabs=d,c},dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(a){var b,c,d,e=[];for(c=a.length,b=0;c>b;b++)d=this._covertXmlNodeToObject(a[b]),d&&e.push(d);return e},dhtmlXRibbon.prototype._covertXmlNodeToObject=function(a){if(!a||!a.tagName||"item"!=a.tagName.toLowerCase()&&"tab"!=a.tagName.toLowerCase())return null;var b,c,d=a.attributes,e={};for(c=d.length,b=0;c>b;b++)switch(d[b].name){case"isbig":e.isbig=dhx4.s2b(d[b].value);break;case"state":e.state=dhx4.s2b(d[b].value);break;default:e[d[b].name]=d[b].value}return a.childNodes.length&&("buttonCombo"==a.getAttribute("type")||"buttonSelect"==a.getAttribute("type")?e.data=a:"tab"==a.tagName.toLowerCase()?e.items=this._convertXmlNodeListIntoObject(a.childNodes):e.list=this._convertXmlNodeListIntoObject(a.childNodes)),e},dhtmlXRibbon.prototype._appendTabs=function(a){var b,c,d,e=[];for(c=a.length,b=0;c>b;b++)d=this._addTab(a[b]),a[b].items instanceof Array&&(d.childIds=this._appendBlocks(a[b].items,d.base,d)),e.push(d.id);return e},dhtmlXRibbon.prototype._addTab=function(a){var b,c={conf:{active:!1,text:"",width:null,position:null,disable:!1},base:document.createElement("div"),type:"tab",childIds:[]};for(b in a)"items"!=b&&(c.conf[b]=a[b]);for(c.id=a.id?a.id:dhx4.newId();this._items[c.id];)c.id=dhx4.newId();return this._tabbar.addTab(c.id,c.conf.text,c.conf.width,c.conf.position,c.conf.active),c.base.className="dhxrb_g_area",c.base._dhx_ribbonId=c.id,this.tabs(c.id).attachObject(c.base),this._changeApiForTab(this.tabs(c.id)),this._items[c.id]=c,c},dhtmlXRibbon.prototype._changeApiForTab=function(a){var b;for(b in this._tabOriginalApi)this._tabOriginalApi[b]=this._tabOriginalApi[b]||a[b],a[b]=this._tabCustomApi[b]},dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null},dhtmlXRibbon.prototype._appendBlocks=function(a,b,c){var d,e,f,g,h,i,j=[];for(c=c||null,e=a.length,d=0;e>d;d++)if("object"==typeof a[d]&&"block"==a[d].type){if(f=this._addBlock(a[d],b),a[d].list&&a[d].list instanceof Array)for(g=a[d].list,h=g.length,i=0;h>i;i++)this._addItem(f.id,null,null,g[i]);null!=c&&(f.parentId=c.id),f.conf.disable&&this.disable(f.id),j.push(f.id)}return j},dhtmlXRibbon.prototype._addBlock=function(a,b){var c,d;c={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:!1},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")};for(d in a)"list"!=d&&"type"!=d&&"id"!=d&&(c.conf[d]=a[d]);for(c.id=a.id?a.id:dhx4.newId();this._items[c.id];)c.id=dhx4.newId();return c.base.className="dhxrb_block_base",b.appendChild(c.base),c.contForItems.className="dhxrb_block_items",c.contForText.className="dhxrb_block_label",c.base.appendChild(c.contForItems),c.conf.text&&(c.contForText.innerHTML=c.conf.text,"top"==c.conf.text_pos?c.base.insertBefore(c.contForText,c.contForItems):c.base.appendChild(c.contForText)),c.base._dhx_ribbonId=c.id,this._items[c.id]=c,c},dhtmlXRibbon.prototype._addItem=function(a,b,c,d){var e,f,g,h=this._items[a],i=null,j=this;if("newLevel"!=d.type&&!this.items[d.type])return null;if("newLevel"==d.type?this._addNewLevel(h):"group"==h.type?(e=document.createElement("div"),e.className="dhxrb_in_group",h.base.appendChild(e)):d.isbig?(e=document.createElement("div"),e.className="dhxrb_big_button",h.contForItems.appendChild(e)):(f=this._getContainerForSmallItem(h),e=document.createElement("div"),e.className="rows"==h.conf.mode?"dhxrb_in_row":"dhxrb_3rows_button",f.appendChild(e)),e){this._attachEventForItem(e),g={icons_path:d.icons_path||this.conf.icons_path,skin:this.conf.skin};for(var k in d)g[k]=d[k];for(g.id||(g.id=dhx4.newId());this._items[g.id];)g.id=dhx4.newId();i=this.items[g.type]&&this.items[g.type].render?this.items[g.type].render(e,g):null}return null!=i&&(this._items[i.id]=i,i.parentId=h.id,h.childIds.push(i.id),e._dhx_ribbonId=i.id,g.onclick&&"function"==typeof g.onclick&&(this._eventHandlers[i.id]=this._eventHandlers[i.id]||{},this._eventHandlers[i.id].onclick=g.onclick),i.callEvent=function(){j.callEvent.apply(j,arguments)},i._callHandler=function(){j._callHandler.apply(j,arguments)},this.items[g.type]&&"function"==typeof this.items[g.type].callAfterInit&&this.items[g.type].callAfterInit.apply(this,[i])),i},dhtmlXRibbon.prototype._callHandler=function(a,b){this._eventHandlers[a]&&this._eventHandlers[a].onclick&&this._eventHandlers[a].onclick.apply(this,b)},dhtmlXRibbon.prototype.items={},dhtmlXRibbon.prototype.items.button={render:function(a,b){var c,d;d={base:a,id:b.id,type:b.type,conf:{text:"",text_pos:b.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:b.skin}};for(c in b)"id"!=c&&"onclick"!=c&&"type"!=c&&(d.conf[c]=b[c]);return a.innerHTML="<img class='dhxrb_image"+(d.conf.img?"'":" dhxrb_invisible'")+" src='"+(d.conf.img?d.conf.icons_path+d.conf.img:"")+"' /><div class='dhxrb_label_button'>"+d.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(d),d.conf.disable&&this.disable(d),d},getText:function(a){return a.conf.text},setText:function(a,b){var c=a.base.childNodes[1];a.conf.text=b,c.innerHTML=b},mousedown:function(){return!0},click:function(a,b,c){return 0!=c.button?!1:(b._callHandler(a.id,[a.id]),a.callEvent("onClick",[a.id]),!1)},disable:function(a){var b=a.base.childNodes[0],c=a.base.childNodes[1];return a.conf.imgdis&&(b.src=a.conf.icons_path+a.conf.imgdis,/\s?dhxrb_invisible/i.test(b.className)&&(b.className=b.className.replace(/\s?dhxrb_invisible/i,""))),/\s?dhxrb_disable_text_style/i.test(c.className)||(c.className+=" dhxrb_disable_text_style"),!0},enable:function(a){var b=a.base.childNodes[0],c=a.base.childNodes[1];return a.conf.img?b.src=a.conf.icons_path+a.conf.img:/\s?dhxrb_invisible/i.test(b.className)||(b.className+=" dhxrb_invisible"),/\s?dhxrb_disable_text_style/i.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}},dhtmlXRibbon.prototype.items.buttonTwoState={click:function(){return!1},afterRender:function(a){a.conf.state&&this.setState(a,a.conf.state)},mouseover:function(a){return/dhxrb_highlight0/.test(a.base.className)||(a.base.className+=" dhxrb_highlight0"),!1},mouseout:function(a){return/dhxrb_highlight0/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight0/,"")),!1},mousedown:function(a,b){return b._callHandler(a.id,[a.id,!a.conf.state]),this.setState(a,!a.conf.state,!0),!1},mouseup:function(){return!1},setState:function(a,b,c){c=c||!1,b=dhx4.s2b(b),b?/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1"):/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,"")),a.conf.state=b,c&&a.callEvent("onStateChange",[a.id,a.conf.state])}},dhtmlXRibbon.prototype.items.buttonSegment={click:function(){return!1},mousedown:function(a,b){return this.setState(a,b,!0),!1},callAfterInit:function(a){(a.conf.state||null==dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(a,this))&&(a.conf.state&&(a.conf.state=!1),dhtmlXRibbon.prototype.items.buttonSegment.setState(a,this,!1))},afterRender:function(){},setState:function(a,b,c){c=c||!1;var d=null,e=dhx4.s2b(a.conf.state);0==e&&(d=this._getSelectedNeighbor(a,b),null!=d&&this._unSelect(d),/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1"),a.conf.state=!0,c&&(b._callHandler(a.id,[a.id,d?d.id:null]),b.callEvent("onStateChange",[a.id,d?d.id:null])))},remove:function(a,b){var c,d=dhx4.s2b(a.conf.state),e=null,f=0,g=b._items[a.parentId];if(d){for(;g.childIds[f]&&null==e;)c=b._items[g.childIds[f]],"buttonSegment"==c.type&&c!=a&&(e=c),f++;e&&this.setState(e,b)}},_unSelect:function(a){var b=dhx4.s2b(a.conf.state);b&&(/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,"")),a.conf.state=!1)},_getSelectedNeighbor:function(a,b){var c,d,e,f=b._items[a.parentId],g=null;for(d=f.childIds.length,c=0;d>c;c++)if(e=b._items[f.childIds[c]],"buttonSegment"==e.type&&e.conf.state){g=e;break}return g}},dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:!1,afterRender:function(a){var b=a.base.childNodes[1];b.innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>",a.menu=null,this.itemCollection.push(a),this._attachEventToWindow(),b=null},setText:function(a,b){var c=a.base.childNodes[1].lastChild;a.conf.text=b,a.base.childNodes[1].innerHTML=b,a.base.childNodes[1].appendChild(c)},_attachEventToWindow:function(){0==this._isAttachedEventInWindow&&("function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._hideAllMenus,!1):document.body.attachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!0)},_detachEventFromWindow:function(){"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._hideAllMenus,!1):document.body.detachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!1},_hideAllMenus:function(a){a=a||event;for(var b=a.target||a.srcElement,c=!0;null!=b&&1==c;)null!=b.className&&/SubLevelArea_Polygon/i.test(b.className)?c=!1:b=b.parentNode;if(0!=c){var d=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var e in d){var f=d[e];f.menu instanceof dhtmlXMenuObject&&(f._skipHiding?f._skipHiding=!1:dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(f))}}},mousedown:function(a){return a._skipHiding=!0,this.showMenu(a),!1},mouseup:function(){return!1},click:function(){},setState:function(){},showMenu:function(a){var b=dhx4.absLeft(a.base),c=dhx4.absTop(a.base)+a.base.offsetHeight;a.menu instanceof dhtmlXMenuObject?a.menu.showContextMenu(b,c):(a.menu=new dhtmlXMenuObject({parent:a.base,icons_path:a.conf.icons_path,context:!0,items:a.conf.items,skin:a.conf.skin}),a.conf.data&&(a.menu.loadStruct(a.conf.data),delete a.conf.data),a.menu.setAutoHideMode(!1),a.menu.attachEvent("onHide",function(b){null==b&&dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(a)}),a.menu.attachEvent("onShow",function(b){null==b&&dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(a)}),a.menu.attachEvent("onClick",function(b){a.callEvent("onClick",[b])}),a.base.oncontextmenu=function(){return!1},dhtmlXRibbon.prototype.items.buttonSelect.showMenu(a))},hideMenu:function(a){a.menu instanceof dhtmlXMenuObject&&a.menu.hideContextMenu()},remove:function(a){var b;a.menu instanceof dhtmlXMenuObject&&(a.menu.unload(),a.menu=null),a.base.oncontextmenu=null,b=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,a),-1!=b&&dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(b,1),0==dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length&&this._detachEventFromWindow()},setSkin:function(a,b){a.menu instanceof dhtmlXMenuObject&&a.menu.setSkin(b)},_doOnHideMenu:function(a){a._skipHiding?a._skipHiding=!1:/dhxrb_highlight1/.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_highlight1/,""))},_doOnShowMenu:function(a){/dhxrb_highlight1/.test(a.base.className)||(a.base.className+=" dhxrb_highlight1")}},dhtmlXRibbon.prototype.items.group={render:function(a,b){var c,d;d={base:a,id:b.id,type:b.type,conf:{disable:!1,skin:b.skin},childIds:[]},a.className="dhxrb_group";for(c in b)"id"!=c&&"onclick"!=c&&"type"!=c&&(d.conf[c]=b[c]);return d},callAfterInit:function(a){this._detachEventFromItem(a.base);var b,c,d,e,f=a.conf.list;for(c=f?f.length:0,b=0;c>b;b++)d=this._addItem(a.id,null,null,f[b]),null!=d&&(e=d.base.childNodes[1],!e||e.innerHTML||/\s?dhxrb_label_hide/i.test(e.className)||(e.className+=" dhxrb_label_hide"));dhtmlXRibbon.prototype.items.group.normalize(a),a.conf.disable&&this.disable(a.id),f=void 0},normalize:function(a){for(var b,c,d=a.base.children,e=d.length,f=!1,g=0,h=0;e>h;h++)if(/dhxrb_separator_group/i.test(d[h].className)||!/dhxrb_item_hide/i.test(d[h].className)){if(Math.ceil((h-g)/2)-Math.floor((h-g)/2)==0){if(/dhxrb_separator_group/i.test(d[h].className)){d[h].parentNode.removeChild(d[h]),f=!0;break}}else if(!/dhxrb_separator_group/i.test(d[h].className)){b=document.createElement("div"),b.className="dhxrb_separator_groupp",a.base.insertBefore(b,d[h]),f=!0;break}}else g++;f?this.normalize(a):(c=a.base.lastChild,c&&/dhxrb_separator_group/i.test(c.className)&&c.parentNode.removeChild(c))},hideChild:function(a,b){var c=dhtmlXRibbon.prototype._indexOf(a.base.children,b.base);if(0==c)c++;else{if(-1==c)return;c--}var d=a.base.children[c];d&&/dhxrb_separator_group/i.test(d.className)&&d.parentNode.removeChild(d)},showChild:function(a){this.normalize(a)}},dhtmlXRibbon.prototype.items.input={render:function(a,b){var c,d;d={base:a,id:b.id,type:b.type,conf:{text:"",text_pos:b.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:b.skin,value:""}};for(c in b)"id"!=c&&"onclick"!=c&&"type"!=c&&(d.conf[c]=b[c]);return a.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+d.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(d),d.conf.disable&&this.disable(d),d.conf.width&&this.setWidth(d,d.conf.width),d.conf.value&&this.setValue(d,d.conf.value),d},callAfterInit:function(a){var b=a.base.childNodes[0];this._detachEventFromItem(a.base),this._attachEventsToInput(b)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(a){var b=a.base.childNodes[0];a.conf.value=b.value},keydown:function(a,b,c){if(13==c.keyCode){var d=a.base.childNodes[0];a.conf.value=d.value,b.callEvent("onEnter",[a.id,a.conf.value])}},remove:function(a,b){var c=a.base.childNodes[0];b._detachEventsFromInput(c)},getValue:function(a){var b,c=a.base.childNodes[0];return b=c.value,c=void 0,b},setValue:function(a,b){var b,c=a.base.childNodes[0];c.value=b,a.conf.value=b},setWidth:function(a,b){var c=a.base.childNodes[0];c.style.width=parseInt(b)+"px"},disable:function(a){var b=a.base.childNodes[0],c=a.base.childNodes[1];return b.disabled=!0,/\s?dhxrb_disable_text_style/i.test(c.className)||(c.className+=" dhxrb_disable_text_style"),!0},enable:function(a){var b=a.base.childNodes[0],c=a.base.childNodes[1];return b.disabled=!1,/\s?dhxrb_disable_text_style/i.test(c.className)&&(c.className=c.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}},dhtmlXRibbon.prototype.items.checkbox={render:function(a,b){var c,d;d={base:a,id:b.id,type:b.type,conf:{text:"",text_pos:b.isbig?"bottom":"right",disable:!1,checked:!1}};for(c in b)"id"!=c&&"onclick"!=c&&"type"!=c&&(d.conf[c]=b[c]);return a.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+d.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(d),d.conf.checked&&this.check(d),d},callAfterInit:function(a){a.conf.disable&&this.disable(a.id)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(){return!1},mouseup:function(){return!1},click:function(a,b,c){return 0!=c.button?!1:void("checkbox"==a.type&&(a.conf.checked?this.uncheck(a,!0):this.check(a,!0)))},check:function(a,b){b=b||!1,"checkbox"==a.type&&(a.conf.checked=!0,/\s?dhxrb_checked/i.test(a.base.className)||(a.base.className+=" dhxrb_checked"),b&&a.callEvent("onCheck",[a.id,a.conf.checked]))},uncheck:function(a,b){b=b||!1,"checkbox"==a.type&&(a.conf.checked=!1,/\s?dhxrb_checked/i.test(a.base.className)&&(a.base.className=a.base.className.replace(/\s?dhxrb_checked/i,"")),b&&a.callEvent("onCheck",[a.id,a.conf.checked]))},disable:function(){return!0},enable:function(){return!0}},dhtmlXRibbon.prototype.items.text={render:function(a,b){var c={base:a,id:b.id,type:b.type,conf:{text:""}};for(var d in b)"id"!=d&&"type"!=d&&(c.conf[d]=b[d]);return a.innerHTML="<div class='dhxrb_item_text'>"+c.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(c),c},callAfterInit:function(a){this._detachEventFromItem(a.base)},getText:function(a){return a.conf.text},setText:function(a,b){a.conf.text=b,a.base.innerHTML=b}},dhtmlXRibbon.prototype.items.buttonCombo={render:function(a,b){var c,d,e={};d={base:a,id:b.id,type:b.type,conf:{text:"",text_pos:"right",width:140,skin:b.skin}};for(c in b)"id"!=c&&"onclick"!=c&&"type"!=c&&(d.conf[c]=b[c]);for(c in d.conf)"text"!=c&&"text_pos"!=c&&"disable"!=c&&"data"!=c&&(e[c]=d.conf[c]);return d.base.className+=" dhxrb_buttoncombo_cont",d.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+d.conf.text+"</div>",e.parent=d.base.firstChild,d.combo=new dhtmlXCombo(e),d.combo.setSkin(e.skin),d.combo.attachEvent("onChange",function(a,b){d._callHandler(d.id,[a,b]),d.callEvent("onSelectOption",[d.id,a,b])}),d.conf.data&&(d.combo.load(d.conf.data),delete d.conf.data),"function"==typeof this.afterRender&&this.afterRender(d),d.conf.disable&&this.disable(d),d},callAfterInit:function(a){this._detachEventFromItem(a.base)},disable:function(a){var b=a.base.lastChild;return a.combo instanceof dhtmlXCombo&&a.combo.disable(),/\s?dhxrb_disable_text_style/i.test(b.className)||(b.className+=" dhxrb_disable_text_style"),!0},enable:function(a){var b=a.base.lastChild;return a.combo instanceof dhtmlXCombo&&a.combo.enable(),/\s?dhxrb_disable_text_style/i.test(b.className)&&(b.className=b.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(a){a.combo instanceof dhtmlXCombo&&(a.combo.unload(),a.combo=null)},getValue:function(a){var b=null;return a.combo instanceof dhtmlXCombo&&(b=a.combo.getSelectedValue()),b},setValue:function(a,b){a.combo instanceof dhtmlXCombo&&a.combo.setComboValue(b)},setSkin:function(a,b){a.combo instanceof dhtmlXCombo&&a.combo.setSkin(b)}},dhtmlXRibbon.prototype.items.slider={render:function(a,b){var c,d,e={};d={base:a,id:b.id,type:b.type,conf:{text:"",text_pos:"right",size:150,vertical:!1,min:0,max:99,value:0,step:1,margin:10,disabled:!1,enableTooltip:!1}};for(c in b)"id"!=c&&"onclick"!=c&&"type"!=c&&(d.conf[c]=b[c]);for(c in d.conf)"text"!=c&&"text_pos"!=c&&"isbig"!=c&&(e[c]=d.conf[c]);return d.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+d.conf.text+"</div>",e.parent=d.base.firstChild.firstChild,d.slider=new dhtmlXSlider(e),"function"==typeof this.afterRender&&this.afterRender(d),d.conf.disable&&this.disable(d),d.slider.attachEvent("onChange",function(a){d._callHandler(d.id,[a]),d.callEvent("onValueChange",[d.id,a])}),d},callAfterInit:function(a){this._detachEventFromItem(a.base)},setSkin:function(a,b){a.slider instanceof dhtmlXSlider&&a.slider.setSkin(b)},disable:function(a){var b=a.base.childNodes[1];return a.slider instanceof dhtmlXSlider&&a.slider.disable(),/\s?dhxrb_disable_text_style/i.test(b.className)||(b.className+=" dhxrb_disable_text_style"),!0},enable:function(a){var b=a.base.childNodes[1];return a.slider instanceof dhtmlXSlider&&a.slider.enable(),/\s?dhxrb_disable_text_style/i.test(b.className)&&(b.className=b.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(a){a.slider instanceof dhtmlXSlider&&(a.slider.unload(),a.slider=null)},getValue:function(a){var b=null;return a.slider instanceof dhtmlXSlider&&(b=a.slider.getValue()),b},setValue:function(a,b){a.slider instanceof dhtmlXSlider&&a.slider.setValue(b)}},dhtmlXRibbon.prototype.items._extends=function(a,b){var c;for(c in b)a[c]=a[c]||b[c];return a},dhtmlXRibbon.prototype._addNewLevel=function(a){var b,c;if("rows"==a.conf.mode)b=a.contForItems.lastChild,b&&/dhxrb_block_rows/i.test(b.className)&&b.childNodes.length<3?(c=document.createElement("div"),c.className="dhxrb_block_row",b.appendChild(c)):(b=document.createElement("div"),b.className="dhxrb_block_rows",a.contForItems.appendChild(b),c=document.createElement("div"),c.className="dhxrb_block_row",b.appendChild(c));else{var c=document.createElement("div");c.className="dhxrb_3rows_block",a.contForItems.appendChild(c)}},dhtmlXRibbon.prototype._attachEventForItem=function(a){"function"==typeof window.addEventListener?(a.addEventListener("mouseover",this._doOnHighlight0,!1),a.addEventListener("mouseout",this._doOffHighlight0,!1),a.addEventListener("mousedown",this._doOnHighlight1,!1),a.addEventListener("mouseup",this._doOffHighlight1,!1),a.addEventListener("click",this._doOnClick,!1)):(a.attachEvent("onmouseover",this._doOnHighlight0),a.attachEvent("onmouseout",this._doOffHighlight0),a.attachEvent("onmousedown",this._doOnHighlight1),a.attachEvent("onmouseup",this._doOffHighlight1),a.attachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._detachEventFromItem=function(a){"function"==typeof window.addEventListener?(a.removeEventListener("mouseover",this._doOnHighlight0,!1),a.removeEventListener("mouseout",this._doOffHighlight0,!1),a.removeEventListener("mousedown",this._doOnHighlight1,!1),a.removeEventListener("mouseup",this._doOffHighlight1,!1),a.removeEventListener("click",this._doOnClick,!1)):(a.detachEvent("onmouseover",this._doOnHighlight0),a.detachEvent("onmouseout",this._doOffHighlight0),a.detachEvent("onmousedown",this._doOnHighlight1),a.detachEvent("onmouseup",this._doOffHighlight1),a.detachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._attachEventsToInput=function(a){"function"==typeof window.addEventListener?(a.addEventListener("focus",this._doOnFocus,!1),a.addEventListener("blur",this._doOnBlur,!1),a.addEventListener("change",this._doOnChange,!1),a.addEventListener("keydown",this._doOnKeydown,!1)):(a.attachEvent("onfocus",this._doOnFocus),a.attachEvent("onblur",this._doOnBlur),a.attachEvent("onchange",this._doOnChange),a.attachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._detachEventsFromInput=function(a){"function"==typeof window.addEventListener?(a.removeEventListener("focus",this._doOnFocus,!1),a.removeEventListener("blur",this._doOnBlur,!1),a.removeEventListener("change",this._doOnChange,!1),a.removeEventListener("keydown",this._doOnKeydown,!1)):(a.detachEvent("onfocus",this._doOnFocus),a.detachEvent("onblur",this._doOnBlur),a.detachEvent("onchange",this._doOnChange),a.detachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._getContainerForSmallItem=function(a){var b=a.contForItems.lastChild,c=null;return"rows"==a.conf.mode?b&&/\s?dhxrb_block_rows/i.test(b.className)?(c=b.lastChild,c||(c=document.createElement("div"),c.className="dhxrb_block_row",b.appendChild(c))):(b=document.createElement("div"),b.className="dhxrb_block_rows",a.contForItems.appendChild(b),c=document.createElement("div"),c.className="dhxrb_block_row",b.appendChild(c)):b&&/dhxrb_3rows_block/i.test(b.className)&&b.childNodes.length<3?c=b:(c=document.createElement("div"),c.className="dhxrb_3rows_block",a.contForItems.appendChild(c)),c},dhtmlXRibbon.prototype._findItemByNode=function(a){for(;a&&!a._dhx_ribbonId;)a=a.parentNode;return a},dhtmlXRibbon.prototype._indexOf=function(a,b){var c,d;for(d=a.length,c=0;d>c;c++)if(a[c]==b)return c;return-1},dhtmlXRibbon.prototype._removeItem=function(a){var b,c=-1,d=this._items[a.parentId];return"group"==a.type?void this._removeGroup(a):(delete this._items[a.id],b=a.base.parentNode,this._detachEventFromItem(a.base),b.removeChild(a.base),"block"==d.type?b!=d.contForItems&&0==b.childNodes.length&&b.parentNode.removeChild(b):"group"==d.type&&dhtmlXRibbon.prototype.items.group.normalize(d),c=this._indexOf(d.childIds,a.id),-1!=c&&d.childIds.splice(c,1),void(this.items[a.type]&&"function"==typeof this.items[a.type].remove&&this.items[a.type].remove(a,this)))},dhtmlXRibbon.prototype._removeGroup=function(a){var b,c=[],d=this._items[a.parentId],e=a.base.parentNode;for(b in a.childIds)b=parseInt(b),c.push(this._items[a.childIds[b]]);for(b in c)b=parseInt(b),this._removeItem(c[b]);delete this._items[a.id],a.base.parentNode&&e.removeChild(a.base),0==e.childNodes.length&&e.parentNode.removeChild(e),b=this._indexOf(d.childIds,a.id),-1!=b&&d.childIds.splice(b,1),this.items[a.type]&&"function"==typeof this.items[a.type].remove&&this.items[a.type].remove(a)},dhtmlXRibbon.prototype._removeBlock=function(a){var b,c,d=[];for(b in a.childIds)b=parseInt(b),d.push(this._items[a.childIds[b]]);for(b in d)b=parseInt(b),this._removeItem(d[b]);delete this._items[a.id],a.base.parentNode.removeChild(a.base),c=a.parentId?this._items[a.parentId]:this,b=this._indexOf(c.childIds,a.id),-1!=b&&c.childIds.splice(b,1)},dhtmlXRibbon.prototype._removeTab=function(a){var b,c=[];for(b in a.childIds)b=parseInt(b),c.push(this._items[a.childIds[b]]);for(b in c)b=parseInt(b),this._removeBlock(c[b]);delete this._items[a.id],b=this._indexOf(this.childIds,a.id),-1!=b&&this.childIds.splice(b,1)},dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0},dhtmlXRibbon.prototype._setSkinForItems=function(a){var b,c;for(b in this._items)c=this._items[b],c.conf.skin=a,dhtmlXRibbon.prototype.items[c.type]&&"function"==typeof dhtmlXRibbon.prototype.items[c.type].setSkin&&dhtmlXRibbon.prototype.items[c.type].setSkin(c,a);c=void 0,b=void 0},dhtmlXRibbon.prototype._setBlockText=function(a,b){a.conf.text=b,a.contForText.innerHTML=b,!b&&0!=b&&a.contForText.parentNode?a.contForText.parentNode.removeChild(a.contForText):a.contForText.parentNode||("top"==a.conf.text_pos?a.base.insertBefore(a.contForText,a.contForItems):a.base.appendChild(a.contForText))},dhtmlXRibbon.prototype.hide=function(a){var b=this._items[a];if((!this.items[b.type]||"function"!=typeof this.items[b.type].hide||1==this.items[b.type].hide(b))&&"tab"!=b.type){/\s?dhxrb_item_hide/i.test(b.base.className)||(b.base.className+=" dhxrb_item_hide");var c=this._items[b.parentId];c&&this.items[c.type]&&"function"==typeof this.items[c.type].hideChild&&this.items[c.type].hideChild(c,b)}},dhtmlXRibbon.prototype.show=function(a){var b=this._items[a];if((!this.items[b.type]||"function"!=typeof this.items[b.type].show||1==this.items[b.type].show(b))&&"tab"!=b.type){/\s?dhxrb_item_hide/i.test(b.base.className)&&(b.base.className=b.base.className.replace(/\s?dhxrb_item_hide/i,""));
var c=this._items[b.parentId];c&&this.items[c.type]&&"function"==typeof this.items[c.type].showChild&&this.items[c.type].showChild(c,b)}},dhtmlXRibbon.prototype.getValue=function(a){var b=this._items[a];return this.items[b.type]&&"function"==typeof this.items[b.type].getValue?this.items[b.type].getValue(b):void 0},dhtmlXRibbon.prototype.setValue=function(a,b){var c=this._items[a];this.items[c.type]&&"function"==typeof this.items[c.type].setValue&&this.items[c.type].setValue(c,b)},dhtmlXRibbon.prototype.check=function(a,b){b=dhx4.s2b(b);var c=this._items[a];c&&!c.conf.checked&&"function"==typeof this.items[c.type].check&&(this.items[c.type].check(c),b&&this.callEvent("onCheck",[c.id,c.conf.checked]))},dhtmlXRibbon.prototype.uncheck=function(a,b){b=dhx4.s2b(b);var c=this._items[a];c&&c.conf.checked&&"function"==typeof this.items[c.type].uncheck&&(this.items[c.type].uncheck(c),b&&this.callEvent("onCheck",[c.id,c.conf.checked]))},dhtmlXRibbon.prototype.disable=function(a){var b,c=this._items[a];if((!this.items[c.type]||"function"!=typeof this.items[c.type].disable||1==this.items[c.type].disable(c))&&"tab"!=c.type){if("block"==c.type||"group"==c.type)for(b in c.childIds)b=parseInt(b),this.disable(c.childIds[b]);/\s?dhxrb_item_disable/i.test(c.base.className)||(c.base.className+=" dhxrb_item_disable"),c.conf.disable=!0}},dhtmlXRibbon.prototype.enable=function(a){var b,c=this._items[a];if((!this.items[c.type]||"function"!=typeof this.items[c.type].enable||1==this.items[c.type].enable(c))&&"tab"!=c.type){if("block"==c.type||"group"==c.type)for(b in c.childIds)b=parseInt(b),this.enable(c.childIds[b]);/\s?dhxrb_item_disable/i.test(c.base.className)&&(c.base.className=c.base.className.replace(/\s?dhxrb_item_disable/i,"")),c.conf.disable=!1}},dhtmlXRibbon.prototype.isEnabled=function(a){var b=this._items[a];return this.items[b.type]&&"function"==typeof this.items[b.type].isEnabled?this.items[b.type].isEnabled(b):"tab"==b.type?void 0:1!=b.conf.disable},dhtmlXRibbon.prototype.isVisible=function(a){var b=this._items[a];return this.items[b.type]&&"function"==typeof this.items[b.type].isVisible?this.items[b.type].isVisible(b):"tab"==b.type?void 0:!/\s?dhxrb_item_hide/i.test(b.base.className)},dhtmlXRibbon.prototype.setItemState=function(a,b,c){b=dhx4.s2b(b),c=dhx4.s2b(c);var d=this._items[a];if(d&&"function"==typeof this.items[d.type].setState)switch(d.type){case"buttonSegment":this.items[d.type].setState(d,this,c);break;default:this.items[d.type].setState(d,b,c)}},dhtmlXRibbon.prototype.setIconPath=function(a){this.conf.icons_path=a},dhtmlXRibbon.prototype.removeItem=function(a){var b=this._items[a];switch(b.type){case"tab":break;case"block":this._removeBlock(b);break;case"group":this._removeGroup(b);break;default:this._removeItem(b)}},dhtmlXRibbon.prototype.setSkin=function(a){if(a="string"==typeof a?a.toLowerCase():"",1==this._skinCollection[a]){var b,c,d=-1,e="dhtmlxribbon";if(b=this._base.className.match(/\S\w+/gi),b instanceof Array){for(c in this._skinCollection){if(-1!=d)break;d=this._indexOf(b,e+"_"+c)}d=-1==d?b.length:d}else b=[],d=0;b[d]=e+"_"+a,this._base.className=b.join(" "),this.conf.skin=a,null!=this._tabbar&&this._tabbar.setSkin(a),this._setSkinForItems(a)}},dhtmlXRibbon.prototype.tabs=function(a){return this._tabbar instanceof dhtmlXTabBar?this._tabbar.tabs(a):void 0},dhtmlXRibbon.prototype.getItemType=function(a){var b=this._items[a];return b?b.type:void 0},dhtmlXRibbon.prototype.getValue=function(a){var b=this._items[a],c=void 0;return b&&this.items[b.type]&&"function"==typeof this.items[b.type].getValue&&(c=this.items[b.type].getValue(b)),c},dhtmlXRibbon.prototype.setValue=function(a,b,c){var d=this._items[a];c=c||!1,d&&this.items[d.type]&&"function"==typeof this.items[d.type].setValue&&this.items[d.type].setValue(d,b)},dhtmlXRibbon.prototype.getItemText=function(a){var b=this._items[a];return b?"tab"==b.type?this.tabs(b.id).getText():"block"==b.type?this.items.button.getText(b):this.items[b.type]&&"function"==typeof this.items[b.type].getText?this.items[b.type].getText(b):null:null},dhtmlXRibbon.prototype.setItemText=function(a,b){var c=this._items[a];c&&("tab"==c.type?this.tabs(c.id).setText(b):"block"==c.type?this._setBlockText(c,b):this.items[c.type]&&"function"==typeof this.items[c.type].setText&&this.items[c.type].setText(c,b))},function(){var a=dhtmlXRibbon.prototype.items;a.buttonTwoState=a._extends(a.buttonTwoState,a.button),a.buttonSelect=a._extends(a.buttonSelect,a.buttonTwoState),a.buttonSegment=a._extends(a.buttonSegment,a.buttonTwoState)}(),dhtmlXToolbarObject.prototype.addSpacer=function(a){var b=this.idPrefix+a;if(null!=this._spacer){if(this._spacer.idd==a)return;if(this._spacer==this.objPull[b].obj.parentNode){for(var c=!0;c;){var d=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]),(d==a||0==this._spacer.childNodes.length)&&(null!=this.objPull[b].arw&&this.base.appendChild(this.objPull[b].arw),c=!1)}return this._spacer.idd=a,void this._fixSpacer()}if(this.base==this.objPull[b].obj.parentNode){for(var c=!0,e=null!=this.objPull[b].arw;c;){var f=this.base.childNodes.length-1;1==e&&this.base.childNodes[f]==this.objPull[b].arw&&(c=!1),this.base.childNodes[f].idd==a&&(c=!1),c&&(this._spacer.childNodes.length>0?this._spacer.insertBefore(this.base.childNodes[f],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[f]))}return this._spacer.idd=a,void this._fixSpacer()}}else{for(var g=null,f=0;f<this.base.childNodes.length;f++)this.base.childNodes[f]==this.objPull[this.idPrefix+a].obj&&(g=f,null!=this.objPull[this.idPrefix+a].arw&&(g=f+1));if(null!=g){for(this._spacer=document.createElement("DIV"),this._spacer.className="right"==this.conf.align?" dhxtoolbar_float_left":" dhxtoolbar_float_right",this._spacer.dir="ltr",this._spacer.idd=a;this.base.childNodes.length>g+1;)this._spacer.appendChild(this.base.childNodes[g+1]);this.cont.appendChild(this._spacer),this._fixSpacer()}}"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;this._spacer.childNodes.length>0;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer),this._spacer=null,"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()}},dhtmlXToolbarObject.prototype._fixSpacer=function(){if("undefined"==typeof window.addEventListener&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4",a=null},1)}},dhtmlXToolbarObject.prototype.getType=function(a){var b=this.getParentId(a);if(null!=b){var c=null,d=this.objPull[this.idPrefix+b]._listOptions[a];return null!=d&&(c=null!=d.sep?"buttonSelectSeparator":"buttonSelectButton"),c}return null==this.objPull[this.idPrefix+a]?null:this.objPull[this.idPrefix+a].type},dhtmlXToolbarObject.prototype.getTypeExt=function(a){var b=this.getType(a);return"buttonSelectButton"==b||"buttonSelectSeparator"==b?b="buttonSelectButton"==b?"button":"separator":null},dhtmlXToolbarObject.prototype.inArray=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1},dhtmlXToolbarObject.prototype.getParentId=function(a){var b=null;for(var c in this.objPull)if(this.objPull[c]._listOptions)for(var d in this.objPull[c]._listOptions)d==a&&(b=String(c).replace(this.idPrefix,""));return b},dhtmlXToolbarObject.prototype._addItem=function(a,b){this._addItemToStorage(a,b),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.addButton=function(a,b,c,d,e){this._addItem({id:a,type:"button",text:c,img:d,imgdis:e},b)},dhtmlXToolbarObject.prototype.addText=function(a,b,c){this._addItem({id:a,type:"text",text:c},b)},dhtmlXToolbarObject.prototype.addButtonSelect=function(a,b,c,d,e,f,g,h,i,j){for(var k=[],l=0;l<d.length;l++){var m={};d[l]instanceof Array?(m.id=d[l][0],m.type="obj"==d[l][1]?"button":"separator",m.text=d[l][2]||null,m.img=d[l][3]||null):d[l]instanceof Object&&null!=d[l]&&"undefined"!=typeof d[l].id&&"undefined"!=typeof d[l].type&&(m.id=d[l].id,m.type="obj"==d[l].type?"button":"separator",m.text=d[l].text,m.img=d[l].img),k.push(m)}this._addItem({id:a,type:"buttonSelect",text:c,img:e,imgdis:f,renderSelect:g,openAll:h,options:k,maxOpen:i,mode:j},b)},dhtmlXToolbarObject.prototype.addButtonTwoState=function(a,b,c,d,e){this._addItem({id:a,type:"buttonTwoState",img:d,imgdis:e,text:c},b)},dhtmlXToolbarObject.prototype.addSeparator=function(a,b){this._addItem({id:a,type:"separator"},b)},dhtmlXToolbarObject.prototype.addSlider=function(a,b,c,d,e,f,g,h,i){this._addItem({id:a,type:"slider",length:c,valueMin:d,valueMax:e,valueNow:f,textMin:g,textMax:h,toolTip:i},b)},dhtmlXToolbarObject.prototype.addInput=function(a,b,c,d){this._addItem({id:a,type:"buttonInput",value:c,width:d},b)},dhtmlXToolbarObject.prototype.forEachItem=function(a){for(var b in this.objPull)this.inArray(this.rootTypes,this.objPull[b].type)&&a(this.objPull[b].id.replace(this.idPrefix,""))},function(){for(var a="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","),b=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],c=function(a,b){return function(c,d,e){return c=this.idPrefix+c,null!=this.objPull[c][a]?this.objPull[c][a].call(this.objPull[c],d,e):b}},d=0;d<a.length;d++){var e=a[d],f=b[d];dhtmlXToolbarObject.prototype[e]=c(e,f)}}(),dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a,null!=this.objPull[a]&&null!=this.objPull[a].showItem&&(this.objPull[a].showItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a,null!=this.objPull[a]&&null!=this.objPull[a].hideItem&&(this.objPull[a].hideItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)},dhtmlXToolbarObject.prototype._getPosition=function(a){if(null==this.objPull[this.idPrefix+a])return null;for(var b=null,c=0,d=0;d<this.base.childNodes.length;d++)null!=this.base.childNodes[d].idd&&(this.base.childNodes[d].idd==a&&(b=c),c++);if(!b&&null!=this._spacer)for(var d=0;d<this._spacer.childNodes.length;d++)null!=this._spacer.childNodes[d].idd&&(this._spacer.childNodes[d].idd==a&&(b=c),c++);return b},dhtmlXToolbarObject.prototype.setPosition=function(a,b){this._setPosition(a,b)},dhtmlXToolbarObject.prototype._setPosition=function(a,b){if(null!=this.objPull[this.idPrefix+a]){isNaN(b)&&(b=this.base.childNodes.length),0>b&&(b=0);var c=null;this._spacer&&(c=this._spacer.idd,this.removeSpacer());var d=this.objPull[this.idPrefix+a];this.base.removeChild(d.obj),d.arw&&this.base.removeChild(d.arw);var e=this._getIdByPosition(b,!0);null==e[0]?(this.base.appendChild(d.obj),d.arw&&this.base.appendChild(d.arw)):(this.base.insertBefore(d.obj,this.base.childNodes[e[1]]),d.arw&&this.base.insertBefore(d.arw,this.base.childNodes[e[1]+1])),null!=c&&this.addSpacer(c)}},dhtmlXToolbarObject.prototype._getIdByPosition=function(a,b){for(var c=null,d=0,e=0,f=0;f<this.base.childNodes.length;f++)null!=this.base.childNodes[f].idd&&null==c&&d++==a&&(c=this.base.childNodes[f].idd),null==c&&e++;return e=null==c?null:e,1==b?new Array(c,e):c},dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._removeItem=function(a){var b=this.getType(a);a=this.idPrefix+a;var c=this.objPull[a];if("button"==b&&(c.obj._doOnMouseOver=null,c.obj._doOnMouseOut=null,c.obj._doOnMouseUp=null,c.obj._doOnMouseUpOnceAnywhere=null,c.obj.onclick=null,c.obj.onmouseover=null,c.obj.onmouseout=null,c.obj.onmouseup=null,c.obj.onmousedown=null,c.obj.onselectstart=null,c.obj.renderAs=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.state=null,c.img=null,c.imgEn=null,c.imgDis=null,c.type=null,c.enableItem=null,c.disableItem=null,c.isEnabled=null,c.showItem=null,c.hideItem=null,c.isVisible=null,c.setItemText=null,c.getItemText=null,c.setItemImage=null,c.clearItemImage=null,c.setItemImageDis=null,c.clearItemImageDis=null,c.setItemToolTip=null,c.getItemToolTip=null),"buttonTwoState"==b&&(c.obj._doOnMouseOver=null,c.obj._doOnMouseOut=null,c.obj.onmouseover=null,c.obj.onmouseout=null,c.obj.onmousedown=null,c.obj.onselectstart=null,c.obj.renderAs=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.state=null,c.img=null,c.imgEn=null,c.imgDis=null,c.type=null,c.enableItem=null,c.disableItem=null,c.isEnabled=null,c.showItem=null,c.hideItem=null,c.isVisible=null,c.setItemText=null,c.getItemText=null,c.setItemImage=null,c.clearItemImage=null,c.setItemImageDis=null,c.clearItemImageDis=null,c.setItemToolTip=null,c.getItemToolTip=null,c.setItemState=null,c.getItemState=null),"buttonSelect"==b){for(var d in c._listOptions)this.removeListOption(a,d);c._listOptions=null,c.polygon._ie6cover&&(document.body.removeChild(c.polygon._ie6cover),c.polygon._ie6cover=null),c.p_tbl.removeChild(c.p_tbody),c.polygon.removeChild(c.p_tbl),c.polygon.onselectstart=null,document.body.removeChild(c.polygon),c.p_tbody=null,c.p_tbl=null,c.polygon=null,c.obj.onclick=null,c.obj.onmouseover=null,c.obj.onmouseout=null,c.obj.onmouseup=null,c.obj.onmousedown=null,c.obj.onselectstart=null,c.obj.idd=null,c.obj.iddPrefix=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.arw.onclick=null,c.arw.onmouseover=null,c.arw.onmouseout=null,c.arw.onmouseup=null,c.arw.onmousedown=null,c.arw.onselectstart=null,c.arw.parentNode.removeChild(c.arw),c.arw=null,c.renderSelect=null,c.state=null,c.type=null,c.id=null,c.img=null,c.imgEn=null,c.imgDis=null,c.openAll=null,c._isListButton=null,c._separatorButtonSelectObject=null,c._buttonButtonSelectObject=null,c.setWidth=null,c.enableItem=null,c.disableItem=null,c.isEnabled=null,c.showItem=null,c.hideItem=null,c.isVisible=null,c.setItemText=null,c.getItemText=null,c.setItemImage=null,c.clearItemImage=null,c.setItemImageDis=null,c.clearItemImageDis=null,c.setItemToolTip=null,c.getItemToolTip=null,c.addListOption=null,c.removeListOption=null,c.showListOption=null,c.hideListOption=null,c.isListOptionVisible=null,c.enableListOption=null,c.disableListOption=null,c.isListOptionEnabled=null,c.setListOptionPosition=null,c.getListOptionPosition=null,c.setListOptionImage=null,c.getListOptionImage=null,c.clearListOptionImage=null,c.setListOptionText=null,c.getListOptionText=null,c.setListOptionToolTip=null,c.getListOptionToolTip=null,c.forEachListOption=null,c.getAllListOptions=null,c.setListOptionSelected=null,c.getListOptionSelected=null}if("buttonInput"==b&&(c.obj.childNodes[0].onkeydown=null,c.obj.removeChild(c.obj.childNodes[0]),c.obj.w=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.type=null,c.enableItem=null,c.disableItem=null,c.isEnabled=null,c.showItem=null,c.hideItem=null,c.isVisible=null,c.setItemToolTip=null,c.getItemToolTip=null,c.setWidth=null,c.getWidth=null,c.setValue=null,c.getValue=null,c.setItemText=null,c.getItemText=null),"slider"==b){for(window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",c.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",c.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",c.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",c.pen._doOnMouseMoveEnd)),c.pen.allowMove=null,c.pen.initXY=null,c.pen.maxX=null,c.pen.minX=null,c.pen.nowX=null,c.pen.newNowX=null,c.pen.valueMax=null,c.pen.valueMin=null,c.pen.valueNow=null,c.pen._definePos=null,c.pen._detectLimits=null,c.pen._doOnMouseMoveStart=null,c.pen._doOnMouseMoveEnd=null,c.pen.onmousedown=null,c.obj.removeChild(c.pen),c.pen=null,c.label.tip=null,document.body.removeChild(c.label),c.label=null,c.obj.onselectstart=null,c.obj.idd=null;c.obj.childNodes.length>0;)c.obj.removeChild(c.obj.childNodes[0]);c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.type=null,c.state=null,c.enableItem=null,c.disableItem=null,c.isEnabled=null,c.setItemToolTipTemplate=null,c.getItemToolTipTemplate=null,c.setMaxValue=null,c.setMinValue=null,c.getMaxValue=null,c.getMinValue=null,c.setValue=null,c.getValue=null,c.showItem=null,c.hideItem=null,c.isVisible=null}"separator"==b&&(c.obj.onselectstart=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.type=null,c.showItem=null,c.hideItem=null,c.isVisible=null),"text"==b&&(c.obj.onselectstart=null,c.obj.idd=null,c.obj.parentNode.removeChild(c.obj),c.obj=null,c.id=null,c.type=null,c.showItem=null,c.hideItem=null,c.isVisible=null,c.setWidth=null,c.setItemText=null,c.getItemText=null),b=null,c=null,this.objPull[this.idPrefix+a]=null,delete this.objPull[this.idPrefix+a]},function(){for(var a="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","),b=function(a){return function(b,c,d,e,f,g){return b=this.idPrefix+b,null!=this.objPull[b]&&"buttonSelect"==this.objPull[b].type?this.objPull[b][a].call(this.objPull[b],c,d,e,f,g):void 0}},c=0;c<a.length;c++){var d=a[c];dhtmlXToolbarObject.prototype[d]=b(d)}}(),dhtmlXToolbarObject.prototype._rtlParseBtn=function(a,b){return a+b},dhtmlXToolbarObject.prototype._separatorObject=function(a,b,c){return this.id=a.idPrefix+b,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_sep",this.obj.style.display=null!=c.hidden?"none":"",this.obj.idd=String(b),this.obj.title=c.title||"",this.obj.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},window.dhx4.isIPad&&(this.obj.ontouchstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,!1}),a.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this},dhtmlXToolbarObject.prototype._textObject=function(a,b,c){return this.id=a.idPrefix+b,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_text",this.obj.style.display=null!=c.hidden?"none":"",this.obj.idd=String(b),this.obj.title=c.title||"",this.obj.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},window.dhx4.isIPad&&(this.obj.ontouchstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,!1}),this.obj.innerHTML=c.text||"",a.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(a){this.obj.innerHTML=a},this.getItemText=function(){return this.obj.innerHTML},this.setWidth=function(a){this.obj.style.width=a+"px"},this.setItemToolTip=function(a){this.obj.title=a},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonObject=function(a,b,c){this.id=a.idPrefix+b,this.state=null!=c.enabled?!1:!0,this.imgEn=c.img||"",this.imgDis=c.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=c.hidden?"none":"",this.obj.allowClick=!1,this.obj.extAction=c.action||null,this.obj.renderAs=this.obj.className,this.obj.idd=String(b),this.obj.title=c.title||"",this.obj.pressed=!1,this.obj.innerHTML=a._rtlParseBtn(""!=this.img?"<img src='"+a.conf.icons_path+this.img+"'>":"",null!=c.text?"<div class='dhxtoolbar_text'>"+c.text+"</div>":"");var d=this;return this.obj.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},this.obj.onmouseover=function(){this._doOnMouseOver()},this.obj.onmouseout=function(){this._doOnMouseOut()},this.obj._doOnMouseOver=function(){this.allowClick=!0,0!=d.state&&"none"==a.anyUsed&&(this.className="dhx_toolbar_btn dhxtoolbar_btn_over",this.renderAs=this.className)},this.obj._doOnMouseOut=function(){this.allowClick=!1,0!=d.state&&"none"==a.anyUsed&&(this.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.renderAs=this.renderAs)},this.obj.onclick=function(b){if(0!=d.state&&0!=this.allowClick){b=b||event;var c=this.idd.replace(a.idPrefix,"");if(this.extAction)try{window[this.extAction](c)}catch(b){}a&&a.callEvent&&a.callEvent("onClick",[c])}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(b){if(0==d.state)return b=b||event,b.preventDefault?b.preventDefault():b.returnValue=!1,b.cancelBubble=!0,!1;if("none"==a.anyUsed)return a.anyUsed=this.idd,this.className="dhx_toolbar_btn dhxtoolbar_btn_pres",this.pressed=!0,this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){a.anyUsed="none",this._doOnMouseOut()},!1},this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(){if(0!=d.state&&("none"==a.anyUsed||a.anyUsed==this.idd)){var b=a.anyUsed;this._doOnMouseUp(),window.dhx4.isIPad&&"none"!=b&&a.callEvent("onClick",[this.idd.replace(a.idPrefix,"")])}},window.dhx4.isIPad&&(this.obj.ontouchmove=function(){this._doOnMouseUp()}),this.obj._doOnMouseUp=function(){a.anyUsed="none",this.className=this.renderAs,this.pressed=!1},this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp(),this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){this._doOnMouseOut()}},a.base.appendChild(this.obj),this.enableItem=function(){a._enableItem(this)},this.disableItem=function(){a._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(b){a._setItemText(this,b)},this.getItemText=function(){return a._getItemText(this)},this.setItemImage=function(b){a._setItemImage(this,b,!0)},this.clearItemImage=function(){a._clearItemImage(this,!0)},this.setItemImageDis=function(b){a._setItemImage(this,b,!1)},this.clearItemImageDis=function(){a._clearItemImage(this,!1)},this.setItemToolTip=function(a){this.obj.title=a},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonSelectObject=function(a,b,c){this.id=a.idPrefix+b,this.state=null!=c.enabled?"true"==c.enabled?!0:!1:!0,this.imgEn=c.img||"",this.imgDis=c.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.mode=c.mode||"button","select"==this.mode?(this.openAll=!0,this.renderSelect=!1,c.text&&0!=c.text.length||(c.text="&nbsp;")):(this.openAll=1==window.dhx4.s2b(c.openAll),this.renderSelect=null==c.renderSelect?!0:window.dhx4.s2b(c.renderSelect)),this.maxOpen=isNaN(c.maxOpen?c.maxOpen:"")?null:c.maxOpen,this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!a._sbw){var b=document.createElement("DIV");b.className="dhxtoolbar_maxopen_test",document.body.appendChild(b);var c=document.createElement("DIV");c.className="dhxtoolbar_maxopen_test2",b.appendChild(c),a._sbw=b.offsetWidth-c.offsetWidth,b.removeChild(c),c=null,document.body.removeChild(b),b=null}},this._maxOpenTest(),this.obj=document.createElement("DIV"),this.obj.allowClick=!1,this.obj.extAction=c.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=c.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},this.obj.idd=String(b),this.obj.title=c.title||"",this.obj.pressed=!1,this.callEvent=!1,this.obj.innerHTML=a._rtlParseBtn(""!=this.img?"<img src='"+a.conf.icons_path+this.img+"'>":"",null!=c.text?"<div class='dhxtoolbar_text'>"+c.text+"</div>":""),a.base.appendChild(this.obj),this.arw=document.createElement("DIV"),this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis"),this.arw.style.display=this.obj.style.display,this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>",this.arw.title=this.obj.title,this.arw.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},a.base.appendChild(this.arw);var d=this;if(this.obj.onmouseover=function(b){b=b||event,"none"==a.anyUsed&&d.state&&(d.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over",d.obj.className=d.obj.renderAs,d.arw.className=String(d.obj.renderAs).replace("btn","arw"))},this.obj.onmouseout=function(){d.obj.allowClick=!1,"none"==a.anyUsed&&d.state&&(d.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",d.obj.className=d.obj.renderAs,d.arw.className=String(d.obj.renderAs).replace("btn","arw"),d.callEvent=!1)},this.arw.onmouseover=this.obj.onmouseover,this.arw.onmouseout=this.obj.onmouseout,1==this.openAll||(this.obj.onclick=function(b){if(b=b||event,d.obj.allowClick&&d.state&&"none"==a.anyUsed){var c=d.obj.idd.replace(a.idPrefix,"");if(d.obj.extAction)try{window[d.obj.extAction](c)}catch(b){}a.callEvent("onClick",[c])}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event,"none"==a.anyUsed&&d.state&&(d.obj.allowClick=!0,d.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",d.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",d.callEvent=!0)},this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(b){if(b=b||event,b.cancelBubble=!0,"none"==a.anyUsed&&d.state&&(d.obj.className=d.obj.renderAs,d.arw.className=String(d.obj.renderAs).replace("btn","arw"),window.dhx4.isIPad&&d.callEvent)){var c=d.obj.idd.replace(a.idPrefix,"");a.callEvent("onClick",[c])}}),window.dhx4.isIPad&&(this.obj.ontouchmove=this.obj.onmouseout),this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event;var c=0===this.className.indexOf("dhx_toolbar_arw")?this:this.nextSibling;if(c._skip?(b=b||event,b.cancelBubble=!0):c._skip=!0,c=null,d.state){if(a.anyUsed==d.obj.idd)d.obj.className=d.obj.renderAs,d.arw.className=String(d.obj.renderAs).replace("btn","arw"),a.anyUsed="none",window.dhx4.zim.clear(d.polygon._idd),d.polygon.style.display="none",d.polygon._ie6cover&&(d.polygon._ie6cover.style.display="none"),"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(d.id,!0);else{if("none"!=a.anyUsed&&"buttonSelect"==a.objPull[a.idPrefix+a.anyUsed].type){var e=a.objPull[a.idPrefix+a.anyUsed];"none"!=e.polygon.style.display&&(e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",e.obj.className=e.obj.renderAs,e.arw.className=String(d.obj.renderAs).replace("btn","arw"),window.dhx4.zim.clear(e.polygon._idd),e.polygon.style.display="none",e.polygon._ie6cover&&(e.polygon._ie6cover.style.display="none"),"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(e.id,!0))}d.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",d.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",a.anyUsed=d.obj.idd,d.polygon.style.top="0px",d.polygon.style.visibility="hidden",d.polygon.style.zIndex=window.dhx4.zim.reserve(d.polygon._idd),d.polygon.style.display="","dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(d.id,!1),d._fixMaxOpenHeight(d.maxOpen||null),a._autoDetectVisibleArea();var f=window.dhx4.absTop(d.obj)+d.obj.offsetHeight+a.conf.sel_ofs_y,g=d.polygon.offsetHeight;if(f+g>a.tY2){var h=null!=d.maxOpen?Math.floor((a.tY2-f)/22):0;h>=1?d._fixMaxOpenHeight(h):(f=window.dhx4.absTop(d.obj)-g-a.conf.sel_ofs_y,0>f&&(f=0))}if(d.polygon.style.top=f+"px",a.rtl)d.polygon.style.left=window.dhx4.absLeft(d.obj)+d.obj.offsetWidth-d.polygon.offsetWidth+a.conf.sel_ofs_x+"px";else{var i=document.body.scrollLeft,j=i+(window.innerWidth||document.body.clientWidth),k=window.dhx4.absLeft(d.obj)+a.conf.sel_ofs_x;k+d.polygon.offsetWidth>j&&(k=window.dhx4.absLeft(d.arw)+d.arw.offsetWidth-d.polygon.offsetWidth),d.polygon.style.left=Math.max(k,5)+"px"}d.polygon.style.visibility="visible",d.polygon._ie6cover&&(d.polygon._ie6cover.style.left=d.polygon.style.left,d.polygon._ie6cover.style.top=d.polygon.style.top,d.polygon._ie6cover.style.width=d.polygon.offsetWidth+"px",d.polygon._ie6cover.style.height=d.polygon.offsetHeight+"px",d.polygon._ie6cover.style.display="")}return!1}},this.arw.onclick=function(a){a=a||event,a.cancelBubble=!0},this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(a){a=a||event,a.cancelBubble=!0},this.openAll===!0&&(this.obj.onclick=this.arw.onclick,this.obj.onmousedown=this.arw.onmousedown,this.obj.onmouseup=this.arw.onmouseup,window.dhx4.isIPad&&(this.obj.ontouchstart=this.arw.ontouchstart,this.obj.ontouchend=this.arw.ontouchend)),this.obj.iddPrefix=a.idPrefix,this._listOptions={},this._fixMaxOpenHeight=function(b){var c="auto",e=!1;if(null!==b){var f=0;for(var g in this._listOptions)f++;f>b?(this._ph=22*b,c=this._ph+"px"):e=!0}this.polygon.style.width="auto",this.polygon.style.height="auto",e||null==d.maxOpen||(this.polygon.style.width=this.p_tbl.offsetWidth+a._sbw+"px",this.polygon.style.height=c)},this._separatorButtonSelectObject=function(a,b,c){return this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.className="tr_sep",this.obj.tr.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.obj.td=document.createElement("TD"),this.obj.td.colSpan="2",this.obj.td.className="td_btn_sep",this.obj.td.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},isNaN(c)?c=d.p_tbody.childNodes.length+1:1>c&&(c=1),c>d.p_tbody.childNodes.length?d.p_tbody.appendChild(this.obj.tr):d.p_tbody.insertBefore(this.obj.tr,d.p_tbody.childNodes[c-1]),this.obj.tr.appendChild(this.obj.td),this.obj.sep=document.createElement("DIV"),this.obj.sep.className="btn_sep",this.obj.sep.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.obj.td.appendChild(this.obj.sep),d._listOptions[a]=this.obj,this},this._buttonButtonSelectObject=function(b,c,e){var f=!0;"undefined"!=typeof c.enabled?f=window.dhx4.s2b(c.enabled):"undefined"!=typeof c.disabled&&(f=window.dhx4.s2b(c.disabled)),this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.en=f,this.obj.tr.extAction=c.action||null,this.obj.tr._selected=null!=c.selected,this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&d.renderSelect?" tr_btn_selected":"":" tr_btn_disabled"),this.obj.tr.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.obj.tr.idd=String(b),isNaN(e)?e=d.p_tbody.childNodes.length+1:1>e&&(e=1),e>d.p_tbody.childNodes.length?d.p_tbody.appendChild(this.obj.tr):d.p_tbody.insertBefore(this.obj.tr,d.p_tbody.childNodes[e-1]),this.obj.td_a=document.createElement("TD"),this.obj.td_a.className="td_btn_img",this.obj.td_a.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this.obj.td_b=document.createElement("TD"),this.obj.td_b.className="td_btn_txt",this.obj.td_b.onselectstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},a.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b)),null!=c.img?(this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+a.conf.icons_path+c.img+"' border='0'>",this.obj.tr._img=c.img):this.obj.td_a.innerHTML="&nbsp;";
var g=null!=c.text?c.text:c.itemText||"";return this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+g+"</div>",this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){!this.en||this._selected&&d.renderSelect||(this.className="tr_btn tr_btn_over")},this.obj.tr.onmouseout=function(){this.en&&(this._selected&&d.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")},this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(b){if(b=b||event,b.cancelBubble=!0,this.en){d.setListOptionSelected(this.idd.replace(a.idPrefix,"")),d.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",d.obj.className=d.obj.renderAs,d.arw.className=String(d.obj.renderAs).replace("btn","arw"),window.dhx4.zim.clear(d.polygon._idd),d.polygon.style.display="none",d.polygon._ie6cover&&(d.polygon._ie6cover.style.display="none"),"dhx_terrace"==a.conf.skin&&a._improveTerraceButtonSelect(d.id,!0),a.anyUsed="none";var c=this.idd.replace(a.idPrefix,"");if(this.extAction)try{window[this.extAction](c)}catch(b){}a.callEvent("onClick",[c])}},d._listOptions[b]=this.obj,this},this.polygon=document.createElement("DIV"),this.polygon.dir="ltr",this.polygon.style.display="none",this.polygon.className="dhx_toolbar_poly_"+a.conf.skin+" dhxtoolbar_icons_"+a.conf.iconSize,this.polygon.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},this.polygon.onmousedown=function(a){a=a||event,a.cancelBubble=!0},this.polygon.style.overflowY="auto",this.polygon._idd=window.dhx4.newId(),window.dhx4.isIPad&&(this.polygon.ontouchstart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,!1}),this.p_tbl=document.createElement("TABLE"),this.p_tbl.className="buttons_cont",this.p_tbl.cellSpacing="0",this.p_tbl.cellPadding="0",this.p_tbl.border="0",this.polygon.appendChild(this.p_tbl),this.p_tbody=document.createElement("TBODY"),this.p_tbl.appendChild(this.p_tbody),null!=c.options)for(var e=0;e<c.options.length;e++){var f="_"+(c.options[e].type||"")+"ButtonSelectObject";null==c.options[e].id&&(c.options[e].id=a._genStr(24)),"function"==typeof this[f]&&new this[f](c.options[e].id,c.options[e])}return document.body.appendChild(this.polygon),window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover)),this.setWidth=function(a){this.obj.style.width=a-this.arw.offsetWidth+"px",this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px",this.p_tbl.style.width=this.polygon.style.width},this.enableItem=function(){a._enableItem(this)},this.disableItem=function(){a._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display="",this.arw.style.display=""},this.hideItem=function(){this.obj.style.display="none",this.arw.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(b){a._setItemText(this,b)},this.getItemText=function(){return a._getItemText(this)},this.setItemImage=function(b){a._setItemImage(this,b,!0)},this.clearItemImage=function(){a._clearItemImage(this,!0)},this.setItemImageDis=function(b){a._setItemImage(this,b,!1)},this.clearItemImageDis=function(){a._clearItemImage(this,!1)},this.setItemToolTip=function(a){this.obj.title=a,this.arw.title=a},this.getItemToolTip=function(){return this.obj.title},this.addListOption=function(a,b,c,d,e){if("button"==c||"separator"==c){var f={id:a,type:c,text:d,img:e};new this["_"+c+"ButtonSelectObject"](a,f,b)}},this.removeListOption=function(a){if(this._isListButton(a,!0)){var b=this._listOptions[a];if(null!=b.td_a&&null!=b.td_b){for(b.td_a.onselectstart=null,b.td_b.onselectstart=null;b.td_a.childNodes.length>0;)b.td_a.removeChild(b.td_a.childNodes[0]);for(;b.td_b.childNodes.length>0;)b.td_b.removeChild(b.td_b.childNodes[0]);for(b.tr.onselectstart=null,b.tr.onmouseover=null,b.tr.onmouseout=null,b.tr.onclick=null;b.tr.childNodes.length>0;)b.tr.removeChild(b.tr.childNodes[0]);b.tr.parentNode.removeChild(b.tr),b.td_a=null,b.td_b=null,b.tr=null}else{for(b.sep.onselectstart=null,b.td.onselectstart=null,b.tr.onselectstart=null;b.td.childNodes.length>0;)b.td.removeChild(b.td.childNodes[0]);for(;b.tr.childNodes.length>0;)b.tr.removeChild(b.tr.childNodes[0]);b.tr.parentNode.removeChild(b.tr),b.sep=null,b.td=null,b.tr=null}b=null,this._listOptions[a]=null;try{delete this._listOptions[a]}catch(c){}}},this.showListOption=function(a){this._isListButton(a,!0)&&(this._listOptions[a].tr.style.display="")},this.hideListOption=function(a){this._isListButton(a,!0)&&(this._listOptions[a].tr.style.display="none")},this.isListOptionVisible=function(a){return this._isListButton(a,!0)?"none"!=this._listOptions[a].tr.style.display:void 0},this.enableListOption=function(b){this._isListButton(b)&&(this._listOptions[b].tr.en=!0,this._listOptions[b].tr.className="tr_btn"+(this._listOptions[b].tr._selected&&a.renderSelect?" tr_btn_selected":""))},this.disableListOption=function(a){this._isListButton(a)&&(this._listOptions[a].tr.en=!1,this._listOptions[a].tr.className="tr_btn tr_btn_disabled")},this.isListOptionEnabled=function(a){return this._isListButton(a)?this._listOptions[a].tr.en:void 0},this.setListOptionPosition=function(a,b){if(this._listOptions[a]&&this.getListOptionPosition(a)!=b&&!isNaN(b)){1>b&&(b=1);var c=this._listOptions[a].tr;this.p_tbody.removeChild(c),b>this.p_tbody.childNodes.length?this.p_tbody.appendChild(c):this.p_tbody.insertBefore(c,this.p_tbody.childNodes[b-1]),c=null}},this.getListOptionPosition=function(a){var b=-1;if(!this._listOptions[a])return b;for(var c=0;c<this.p_tbody.childNodes.length;c++)this.p_tbody.childNodes[c]==this._listOptions[a].tr&&(b=c+1);return b},this.setListOptionImage=function(b,c){if(this._isListButton(b)){var d=this._listOptions[b].tr.childNodes[a.rtl?1:0];if(d.childNodes.length>0)d.childNodes[0].src=a.conf.icons_path+c;else{var e=document.createElement("IMG");e.className="btn_sel_img",e.src=a.conf.icons_path+c,d.appendChild(e)}d=null}},this.getListOptionImage=function(b){if(this._isListButton(b)){var c=this._listOptions[b].tr.childNodes[a.rtl?1:0],d=null;return c.childNodes.length>0&&(d=c.childNodes[0].src),c=null,d}},this.clearListOptionImage=function(b){if(this._isListButton(b)){for(var c=this._listOptions[b].tr.childNodes[a.rtl?1:0];c.childNodes.length>0;)c.removeChild(c.childNodes[0]);c.innerHTML="&nbsp;",c=null}},this.setListOptionText=function(b,c){this._isListButton(b)&&(this._listOptions[b].tr.childNodes[a.rtl?0:1].childNodes[0].innerHTML=c)},this.getListOptionText=function(b){return this._isListButton(b)?this._listOptions[b].tr.childNodes[a.rtl?0:1].childNodes[0].innerHTML:void 0},this.setListOptionToolTip=function(a,b){this._isListButton(a)&&(this._listOptions[a].tr.title=b)},this.getListOptionToolTip=function(a){return this._isListButton(a)?this._listOptions[a].tr.title:void 0},this.forEachListOption=function(a){for(var b in this._listOptions)a(b)},this.getAllListOptions=function(){var a=new Array;for(var b in this._listOptions)a[a.length]=b;return a},this.setListOptionSelected=function(a){for(var b in this._listOptions){var c=this._listOptions[b];null!=c.td_a&&null!=c.td_b&&c.tr.en&&(b==a?(c.tr._selected=!0,c.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),"select"==this.mode&&(c.tr._img?this.setItemImage(c.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(a)))):(c.tr._selected=!1,c.tr.className="tr_btn")),c=null}},this.getListOptionSelected=function(){var a=null;for(var b in this._listOptions)1==this._listOptions[b].tr._selected&&(a=b);return a},this._isListButton=function(a,b){return null==this._listOptions[a]?!1:b||"tr_sep"!=this._listOptions[a].tr.className?!0:!1},this.setMaxOpen=function(a){return this._ph=null,"number"==typeof a?(this.maxOpen=a,void this._maxOpenTest()):void(this.maxOpen=null)},c.width&&this.setWidth(c.width),"select"==this.mode&&"undefined"!=typeof c.selected&&this.setListOptionSelected(c.selected),this},dhtmlXToolbarObject.prototype._buttonInputObject=function(a,b,c){this.id=a.idPrefix+b,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.obj.style.display=null!=c.hidden?"none":"",this.obj.idd=String(b),this.obj.w=null!=c.width?c.width:100,this.obj.title=null!=c.title?c.title:"",this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(null!=c.value?" value='"+c.value+"'":"")+">";var d=a,e=this;return this.obj.childNodes[0].onkeydown=function(a){a=a||event,13==a.keyCode&&d.callEvent("onEnter",[e.obj.idd,this.value])},a.base.appendChild(this.obj),this.enableItem=function(){this.obj.childNodes[0].disabled=!1},this.disableItem=function(){this.obj.childNodes[0].disabled=!0},this.isEnabled=function(){return!this.obj.childNodes[0].disabled},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return"none"!=this.obj.style.display},this.setValue=function(a){this.obj.childNodes[0].value=a},this.getValue=function(){return this.obj.childNodes[0].value},this.setWidth=function(a){this.obj.w=a,this.obj.childNodes[0].style.width=this.obj.w+"px"},this.getWidth=function(){return this.obj.w},this.setItemToolTip=function(a){this.obj.title=a},this.getItemToolTip=function(){return this.obj.title},this.getInput=function(){return this.obj.firstChild},"undefined"!=typeof c.enabled&&0==window.dhx4.s2b(c.enabled)&&this.disableItem(),this},dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,b,c){this.id=a.idPrefix+b,this.state=null!=c.enabled?!1:!0,this.imgEn=null!=c.img?c.img:"",this.imgDis=null!=c.imgdis?c.imgdis:"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.pressed=null!=c.selected,this.obj.extAction=c.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis"),this.obj.style.display=null!=c.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.idd=String(b),this.obj.title=c.title||"",this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"),this.obj.innerHTML=a._rtlParseBtn(""!=this.img?"<img src='"+a.conf.icons_path+this.img+"'>":"",null!=c.text?"<div class='dhxtoolbar_text'>"+c.text+"</div>":""),a.base.appendChild(this.obj);var d=this;return this.obj.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},this.obj.onmouseover=function(){this._doOnMouseOver()},this.obj.onmouseout=function(){this._doOnMouseOut()},this.obj._doOnMouseOver=function(){if(0!=d.state&&"none"==a.anyUsed){if(this.pressed)return void(this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over");this.className="dhx_toolbar_btn dhxtoolbar_btn_over",this.renderAs=this.className}},this.obj._doOnMouseOut=function(){if(0!=d.state&&"none"==a.anyUsed){if(this.pressed)return void(this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def");this.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.renderAs=this.className}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(){if((!a.checkEvent("onBeforeStateChange")||a.callEvent("onBeforeStateChange",[this.idd.replace(a.idPrefix,""),this.pressed]))&&0!=d.state&&"none"==a.anyUsed){this.pressed=!this.pressed,this.className=this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs;var b=this.idd.replace(a.idPrefix,"");if(this.extAction)try{window[this.extAction](b,this.pressed)}catch(c){}return a.callEvent("onStateChange",[b,this.pressed]),!1}},this.setItemState=function(b,c){if(this.obj.pressed!=b&&(1==b?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis"),this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.renderAs=this.obj.className),1==c)){var d=this.obj.idd.replace(a.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](d,this.obj.pressed)}catch(e){}a.callEvent("onStateChange",[d,this.obj.pressed])}},this.getItemState=function(){return this.obj.pressed},this.enableItem=function(){a._enableItem(this)},this.disableItem=function(){a._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(b){a._setItemText(this,b)},this.getItemText=function(){return a._getItemText(this)},this.setItemImage=function(b){a._setItemImage(this,b,!0)},this.clearItemImage=function(){a._clearItemImage(this,!0)},this.setItemImageDis=function(b){a._setItemImage(this,b,!1)},this.clearItemImageDis=function(){a._clearItemImage(this,!1)},this.setItemToolTip=function(a){this.obj.title=a},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._sliderObject=function(a,b,c){this.id=a.idPrefix+b,this.state=null!=c.enabled?"true"==c.enabled?!0:!1:!0,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=c.hidden?"none":"",this.obj.onselectstart=function(a){a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1},this.obj.idd=String(b),this.obj.len=null!=c.length?Number(c.length):50,this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(c.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(c.textMax||"")+"</div>",a.base.appendChild(this.obj);var d=this;this.pen=document.createElement("DIV"),this.pen.className="dhxtoolbar_sl_pen",this.obj.appendChild(this.pen);var e=this.pen;this.label=document.createElement("DIV"),this.label.dir="ltr",this.label.className="dhx_toolbar_slider_label_"+a.conf.skin+(a.rtl?"_rtl":""),this.label.style.display="none",this.label.tip=c.toolTip||"%v",this.label._zi=window.dhx4.newId(),document.body.appendChild(this.label);var f=this.label;return this.pen.valueMin=null!=c.valueMin?Number(c.valueMin):0,this.pen.valueMax=null!=c.valueMax?Number(c.valueMax):100,this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax),this.pen.valueNow=null!=c.valueNow?Number(c.valueNow):this.pen.valueMax,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits=function(){this.minX=d.obj.childNodes[1].offsetLeft+2,this.maxX=d.obj.childNodes[3].offsetLeft-this.offsetWidth+1},this.pen._detectLimits(),this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX),this.style.left=this.nowX+"px",this.newNowX=this.nowX},this.pen._definePos(),this.pen.initXY=0,this.pen.allowMove=!1,this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){0!=d.state&&(a=a||event,this.initXY=window.dhx4.isIPad?a.touches[0].clientX:a.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",""!=f.tip&&(f.style.visibility="hidden",f.style.display="",f.innerHTML=f.tip.replace("%v",this.valueNow),f.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-f.offsetWidth/2)+"px",f.style.top=window.dhx4.absTop(this)-f.offsetHeight-3+"px",f.style.visibility="",f.style.zIndex=window.dhx4.zim.reserve(f._zi)))},this.pen._doOnMouseMoveStart=function(a){if(a=a||event,e.allowMove){var b=window.dhx4.isIPad?a.touches[0].clientX:a.clientX,c=b-e.initXY;if(!(b<window.dhx4.absLeft(e)+Math.round(e.offsetWidth/2)&&e.nowX==e.minX||b>window.dhx4.absLeft(e)+Math.round(e.offsetWidth/2)&&e.nowX==e.maxX))return e.newNowX=e.nowX+c,e.newNowX<e.minX&&(e.newNowX=e.minX),e.newNowX>e.maxX&&(e.newNowX=e.maxX),e.nowX=e.newNowX,e.style.left=e.nowX+"px",e.initXY=b,e.newValueNow=Math.round((e.valueMax-e.valueMin)*(e.newNowX-e.minX)/(e.maxX-e.minX)+e.valueMin),""!=f.tip&&(f.innerHTML=f.tip.replace(/%v/gi,e.newValueNow),f.style.left=Math.round(window.dhx4.absLeft(e)+e.offsetWidth/2-f.offsetWidth/2)+"px",f.style.top=window.dhx4.absTop(e)-f.offsetHeight-3+"px"),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1}},this.pen._doOnMouseMoveEnd=function(){e.allowMove&&(e.className="dhxtoolbar_sl_pen",e.allowMove=!1,e.nowX=e.newNowX,e.valueNow=e.newValueNow,""!=f.tip&&(f.style.display="none",window.dhx4.zim.clear(f._zi)),a.callEvent("onValueChange",[d.obj.idd.replace(a.idPrefix,""),e.valueNow]))},window.dhx4.isIPad?(document.addEventListener("touchmove",e._doOnMouseMoveStart,!1),document.addEventListener("touchend",e._doOnMouseMoveEnd,!1)):"undefined"!=typeof window.addEventListener?(window.addEventListener("mousemove",e._doOnMouseMoveStart,!1),window.addEventListener("mouseup",e._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",e._doOnMouseMoveStart),document.body.attachEvent("onmouseup",e._doOnMouseMoveEnd)),this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")},this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setValue=function(b,c){b=Number(b),b<this.pen.valueMin&&(b=this.pen.valueMin),b>this.pen.valueMax&&(b=this.pen.valueMax),this.pen.valueNow=b,this.pen._definePos(),1==c&&a.callEvent("onValueChange",[this.obj.idd.replace(a.idPrefix,""),this.pen.valueNow])},this.getValue=function(){return this.pen.valueNow},this.setMinValue=function(a,b){a=Number(a),a>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=b,this.obj.childNodes[0].style.display=b.length>0?"":"none",this.pen.valueMin=a,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())},this.setMaxValue=function(a,b){a=Number(a),a<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=b,this.obj.childNodes[4].style.display=b.length>0?"":"none",this.pen.valueMax=a,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())},this.getMinValue=function(){var a=this.obj.childNodes[0].innerHTML,b=this.pen.valueMin;return new Array(b,a)},this.getMaxValue=function(){var a=this.obj.childNodes[4].innerHTML,b=this.pen.valueMax;return new Array(b,a)},this.setItemToolTipTemplate=function(a){this.label.tip=a},this.getItemToolTipTemplate=function(){return this.label.tip},this},dhtmlXToolbarObject.prototype.unload=function(){for(this.conf.isIPad?document.removeEventListener("touchstart",this._doOnClick,!1):"function"==typeof window.addEventListener?window.removeEventListener("mousedown",this._doOnClick,!1):document.body.detachEvent("onmousedown",this._doOnClick),this._doOnClick=null,this.clearAll(),this.objPull=null,this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);for(this.cont.removeChild(this.base),this.base=null;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="",this.cont=null,window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.tX1=null,this.tX2=null,this.tY1=null,this.tY2=null,this.anyUsed=null,this.idPrefix=null,this.rootTypes=null,this._rtl=null,this._rtlParseBtn=null,this.setRTL=null,this._sbw=null,this._getObj=null,this._addImgObj=null,this._setItemImage=null,this._clearItemImage=null,this._setItemText=null,this._getItemText=null,this._enableItem=null,this._disableItem=null,this._xmlParser=null,this._addItemToStorage=null,this._genStr=null,this._addItem=null,this._getPosition=null,this._setPosition=null,this._getIdByPosition=null,this._separatorObject=null,this._textObject=null,this._buttonObject=null,this._buttonSelectObject=null,this._buttonInputObject=null,this._buttonTwoStateObject=null,this._sliderObject=null,this._autoDetectVisibleArea=null,this._removeItem=null,this.setAlign=null,this.setSkin=null,this.setIconsPath=null,this.setIconPath=null,this.loadXML=null,this.loadXMLString=null,this.clearAll=null,this.addSpacer=null,this.removeSpacer=null,this.getType=null,this.getTypeExt=null,this.inArray=null,this.getParentId=null,this.addButton=null,this.addText=null,this.addButtonSelect=null,this.addButtonTwoState=null,this.addSeparator=null,this.addSlider=null,this.addInput=null,this.forEachItem=null,this.showItem=null,this.hideItem=null,this.isVisible=null,this.enableItem=null,this.disableItem=null,this.isEnabled=null,this.setItemText=null,this.getItemText=null,this.setItemToolTip=null,this.getItemToolTip=null,this.setItemImage=null,this.setItemImageDis=null,this.clearItemImage=null,this.clearItemImageDis=null,this.setItemState=null,this.getItemState=null,this.setItemToolTipTemplate=null,this.getItemToolTipTemplate=null,this.setValue=null,this.getValue=null,this.setMinValue=null,this.getMinValue=null,this.setMaxValue=null,this.getMaxValue=null,this.setWidth=null,this.getWidth=null,this.getPosition=null,this.setPosition=null,this.removeItem=null,this.addListOption=null,this.removeListOption=null,this.showListOption=null,this.hideListOption=null,this.isListOptionVisible=null,this.enableListOption=null,this.disableListOption=null,this.isListOptionEnabled=null,this.setListOptionPosition=null,this.getListOptionPosition=null,this.setListOptionText=null,this.getListOptionText=null,this.setListOptionToolTip=null,this.getListOptionToolTip=null,this.setListOptionImage=null,this.getListOptionImage=null,this.clearListOptionImage=null,this.forEachListOption=null,this.getAllListOptions=null,this.setListOptionSelected=null,this.getListOptionSelected=null,this.unload=null,this.setUserData=null,this.getUserData=null,this.setMaxOpen=null,this.items=null,this.conf=null},dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left,this.tX2=a.right,this.tY1=a.top,this.tY2=a.bottom},dhtmlXToolbarObject.prototype._initObj=function(a){for(var b=0;b<a.length;b++)this._addItemToStorage(a[b]);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._xmlToJson=function(a){var b=[],c=a.getElementsByTagName("toolbar");if(null!=c&&null!=c[0]){c=c[0];for(var d=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"],e=["id","type","enabled","disabled","action","selected","img","text"],f=0;f<c.childNodes.length;f++)if("item"==c.childNodes[f].tagName){for(var g={},h=0;h<d.length;h++){var i=c.childNodes[f].getAttribute(d[h]);null!=i&&(g[d[h]]=i)}for(var j=0;j<c.childNodes[f].childNodes.length;j++){if("item"==c.childNodes[f].childNodes[j].tagName&&"buttonSelect"==g.type){for(var k={},h=0;h<e.length;h++){var i=c.childNodes[f].childNodes[j].getAttribute(e[h]);null!=i&&(k[e[h]]=i)}var l=c.childNodes[f].childNodes[j].getElementsByTagName("itemText");null!=l&&null!=l[0]&&(k.itemText=l[0].firstChild.nodeValue);for(var m=c.childNodes[f].childNodes[j].getElementsByTagName("userdata"),h=0;h<m.length;h++){k.userdata||(k.userdata={});var n={};try{n.name=m[h].getAttribute("name")}catch(o){n.name=null}try{n.value=m[h].firstChild.nodeValue}catch(o){n.value=""}null!=n.name&&(k.userdata[n.name]=n.value)}null==g.options&&(g.options=[]),g.options.push(k)}if("userdata"==c.childNodes[f].childNodes[j].tagName){null==g.userdata&&(g.userdata={});var k={};try{k.name=c.childNodes[f].childNodes[j].getAttribute("name")}catch(o){k.name=null}try{k.value=c.childNodes[f].childNodes[j].firstChild.nodeValue}catch(o){k.value=""}null!=k.name&&(g.userdata[k.name]=k.value)}}b.push(g)}}return b},dhtmlXToolbarObject.prototype._addItemToStorage=function(a,b){var c=a.id||this._genStr(24),d=a.type||"";if(""!=d&&null!=this["_"+d+"Object"]){if("buttonSelect"==d&&null!=a.options)for(var e=0;e<a.options.length;e++)"obj"==a.options[e].type&&(a.options[e].type="button"),"sep"==a.options[e].type&&(a.options[e].type="separator");if("slider"==d){var f={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var g in f)null==a[f[g]]&&null!=a[g]&&(a[f[g]]=a[g])}"buttonInput"==d&&null==a.value&&null!=a.text&&(a.value=a.text),"buttonTwoState"==d&&"undefined"==typeof a.selected&&"undefined"!=typeof a.pressed&&window.dhx4.s2b(a.pressed)&&(a.selected=!0),"undefined"==typeof a.enabled&&"undefined"!=typeof a.disabled&&window.dhx4.s2b(a.disabled)&&(a.enabled=!1),null==a.imgDis&&null!=a.img_disabled&&(a.imgdis=a.img_disabled),"undefined"!=typeof a.openAll&&null!=a.openAll||"dhx_terrace"!=this.conf.skin||(a.openAll=!0),this.objPull[this.idPrefix+c]=new this["_"+d+"Object"](this,c,a),this.objPull[this.idPrefix+c].type=d,this.setPosition(c,b)}if(null!=a.userdata)for(var g in a.userdata)this.setUserData(c,g,a.userdata[g]);if(null!=a.options)for(var e=0;e<a.options.length;e++)if(null!=a.options[e].userdata)for(var g in a.options[e].userdata)this.setListOptionUserData(a.id,a.options[e].id,g,a.options[e].userdata[g])},dhtmlXToolbarObject.prototype.setSkin=function(a,b){b===!0?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=a,"dhx_skyblue"==this.conf.skin&&(this.conf.sel_ofs_y=1),"dhx_web"==this.conf.skin&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),"dhx_terrace"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize);for(var c in this.objPull){var d=this.objPull[c];"slider"==d.type&&(d.pen._detectLimits(),d.pen._definePos(),d.label.className="dhx_toolbar_slider_label_"+this.conf.skin),"buttonSelect"==d.type&&(d.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize)}"dhx_terrace"==a&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align="right"==a?"right":"left",this.base.className="right"==a?"dhxtoolbar_float_right":"dhxtoolbar_float_left",this._spacer&&(this._spacer.className="right"==a?" dhxtoolbar_float_left":" dhxtoolbar_float_right")},dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[a]?a:18,this.setSkin(this.conf.skin,!0),this.callEvent("_onIconSizeChange",[this.conf.iconSize])},dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a},dhtmlXToolbarObject.prototype.setUserData=function(a,b,c){a=this.idPrefix+a,null!=this.objPull[a]&&(null==this.objPull[a].userData&&(this.objPull[a].userData={}),this.objPull[a].userData[b]=c)},dhtmlXToolbarObject.prototype.getUserData=function(a,b){return a=this.idPrefix+a,null!=this.objPull[a]&&null!=this.objPull[a].userData?this.objPull[a].userData[b]||null:null},dhtmlXToolbarObject.prototype._isListOptionExists=function(a,b){if(null==this.objPull[this.idPrefix+a])return!1;var c=this.objPull[this.idPrefix+a];return"buttonSelect"!=c.type?!1:null==c._listOptions[b]?!1:!0},dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,b,c,d){if(this._isListOptionExists(a,b)){var e=this.objPull[this.idPrefix+a]._listOptions[b];null==e.userData&&(e.userData={}),e.userData[c]=d}},dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,b,c){if(!this._isListOptionExists(a,b))return null;var d=this.objPull[this.idPrefix+a]._listOptions[b];return d.userData&&d.userData[c]?d.userData[c]:null},dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){null==this.conf.terrace_radius&&(this.conf.terrace_radius="3px");var a=[],b={separator:!0,text:!0},c=[this.base];null!=this._spacer&&c.push(this._spacer);for(var d=0;d<c.length;d++){a[d]=[];for(var e=0;e<c[d].childNodes.length;e++)if(null!=c[d].childNodes[e].idd&&"none"!=c[d].childNodes[e].style.display){var f=this.idPrefix+c[d].childNodes[e].idd;null!=this.objPull[f]&&this.objPull[f].obj==c[d].childNodes[e]&&a[d].push({a:f,type:this.objPull[f].type,node:this.objPull[f]["buttonSelect"==this.objPull[f].type?"arw":"obj"]})}c[d]=null}for(var d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++){var g=a[d][e],h=!1,i=!1;b[g.type]||((e==a[d].length-1||null!=a[d][e+1]&&b[a[d][e+1].type])&&(h=!0),(0==e||e-1>=0&&null!=a[d][e-1]&&b[a[d][e-1].type])&&(i=!0)),g.node.style.borderRightWidth=h?"1px":"0px",g.node.style.borderTopRightRadius=g.node.style.borderBottomRightRadius=h?this.conf.terrace_radius:"0px","buttonSelect"==g.type?(g.node.previousSibling.style.borderTopLeftRadius=g.node.previousSibling.style.borderBottomLeftRadius=i?this.conf.terrace_radius:"0px",g.node.previousSibling._br=h,g.node.previousSibling._bl=i):g.node.style.borderTopLeftRadius=g.node.style.borderBottomLeftRadius=i?this.conf.terrace_radius:"0px",g.node._br=h,g.node._bl=i}for(var d=0;d<a.length;d++){for(var e=0;e<a[d].length;e++){for(var f in a[d][e])a[d][e][f]=null;a[d][e]=null}a[d]=null}a=c=null},dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(a,b){var c=this.objPull[a];1==b?(c.obj.style.borderBottomLeftRadius=c.obj._bl?this.conf.terrace_radius:"0px",c.arw.style.borderBottomRightRadius=c.obj._br?this.conf.terrace_radius:"0px"):(c.obj.style.borderBottomLeftRadius="0px",c.arw.style.borderBottomRightRadius="0px"),c=null},dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight)},dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=a===!0,this._prepareContent(!0,this.conf.roMode),this.cBlock.style.display=this.conf.roMode?"":"none"},dhtmlXEditor.prototype.isReadonly=function(){return this.conf.roMode||!1},dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a),this.conf.skin=this.cell.conf.skin=a,this.tb&&(this.cell.detachToolbar(a),this.tb=null,this.attachToolbar()),this.setSizes()},window.dhtmlXEditorCell=function(a,b){dhtmlXCellObject.apply(this,[a,"_editor"]);var c=this;return this.editor=b,this.conf.skin=this.editor.conf.skin,this.attachEvent("_onCellUnload",function(){this._stbUnload(),this.editor=null,c=null}),this._stbInit(),this},dhtmlXEditorCell.prototype=new dhtmlXCellObject,dhtmlXEditorCell.prototype._stbInit=function(){var a=this,b=document.createElement("DIV");b.className="dhx_cell_stb",this.cell.insertBefore(b,this.cell.childNodes[this.conf.idx.cont]),b.onselectstart=function(a){return a=a||event,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1};var c={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var d in c){var e=document.createElement("A");e.href="javascript:void(0);",e.tabIndex=-1,b.appendChild(e),e.onmousedown=e.onclick=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1};var f=document.createElement("DIV");f.className="dhx_cell_stb_button btn_"+d,f._actv=d.charAt(0),f._cmd=c[d],e.appendChild(f),f.onclick=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},f.onmousedown=function(b){b=b||event,b.preventDefault?b.preventDefault():b.returnValue=!1,a.editor[this._cmd](),a.editor.callEvent("onToolbarClick",[this._actv])
},f=e=null}b=null,this._stbUnload=function(){var b=this.cell.childNodes[this.conf.idx.stb];for(b.onselectstart=null;b.childNodes.length>0;)b.lastChild.onmousedown=b.lastChild.onclick=null,b.lastChild.firstChild.onmousedown=b.lastChild.firstChild.onclick=null,b.lastChild.firstChild._actv=b.lastChild.firstChild._cmd=null,b.lastChild.removeChild(b.lastChild.firstChild),b.removeChild(b.lastChild);b.parentNode.removeChild(b),b=a=null,this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null,delete this.conf.ofs_nodes.t._getStbHeight,delete this.conf.idx_data.stb,this._updateIdx()},this.conf.ofs_nodes.t._getStbHeight="func",this.conf.idx_data.stb="dhx_cell_stb",this._updateIdx()},dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none"},dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.conf.idx.stb].offsetHeight},dhtmlXEditor.prototype.attachToolbar=function(a){if(null==this.tb){null!=a&&(this.conf.iconsPath=a),this.cell._stbHide(),this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin}),this.setSizes(),this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana"),this._initFont=this._availFonts[0],this._xmlFonts="";for(var b=0;b<this._availFonts.length;b++){var c=String(this._availFonts[b]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+c+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(c).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"},this._xmlSizes="";for(var d in this._availSizes)this._xmlSizes+='<item type="button" id="applyFontSize:'+d+":"+this._availSizes[d]+'" text="'+this._availSizes[d]+'"/>';this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>',this.tb.loadStruct(this.tbXML),this._checkAlign=function(a){this.tb.setItemState("alignCenter",!1),this.tb.setItemState("alignRight",!1),this.tb.setItemState("alignJustify",!1),this.tb.setItemState("alignLeft",!1),a&&this.tb.setItemState(a,!0)},this._checkH=function(a){this.tb.setItemState("applyH1",!1),this.tb.setItemState("applyH2",!1),this.tb.setItemState("applyH3",!1),this.tb.setItemState("applyH4",!1),a&&this.tb.setItemState(a,!0)},this._doOnFocusChanged=function(a){if(a.h1||a.h2||a.h3||a.h4)this.tb.setItemState("applyBold",!1);else{var b=-1!=String(a.fontWeight).search(/bold/i)||Number(a.fontWeight)>=700;this.tb.setItemState("applyBold",b)}var c="alignLeft";-1!=String(a.textAlign).search(/center/)&&(c="alignCenter"),-1!=String(a.textAlign).search(/right/)&&(c="alignRight"),-1!=String(a.textAlign).search(/justify/)&&(c="alignJustify"),this.tb.setItemState(c,!0),this._checkAlign(c),this.tb.setItemState("applyH1",a.h1),this.tb.setItemState("applyH2",a.h2),this.tb.setItemState("applyH3",a.h3),this.tb.setItemState("applyH4",a.h4),window._KHTMLrv&&(a.sub="sub"==a.vAlign,a.sup="super"==a.vAlign),this.tb.setItemState("applyItalic","italic"==a.fontStyle),this.tb.setItemState("applyStrikethrough",a.del),this.tb.setItemState("applySub",a.sub),this.tb.setItemState("applySuper",a.sup),this.tb.setItemState("applyUnderscore",a.u)},this._doOnToolbarClick=function(a){var b=String(a).split(":");null!=this[b[0]]&&"function"==typeof this[b[0]]&&(this[b[0]](b[1]),this.callEvent("onToolbarClick",[a]))},this._doOnStateChange=function(a){switch(this[a](),a){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(a);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(a)}this.callEvent("onToolbarClick",[a])},this._doOnBeforeStateChange=function(a,b){return"alignLeft"!=a&&"alignCenter"!=a&&"alignRight"!=a&&"alignJustify"!=a||1!=b?!0:!1};var e=this;this.tb.attachEvent("onClick",function(a){e._doOnToolbarClick(a)}),this.tb.attachEvent("onStateChange",function(a,b){e._doOnStateChange(a,b)}),this.tb.attachEvent("onBeforeStateChange",function(a,b){return e._doOnBeforeStateChange(a,b)}),this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.applyStrikethrough=function(){this._runCommand("StrikeThrough")},this.alignLeft=function(){this._runCommand("JustifyLeft")},this.alignRight=function(){this._runCommand("JustifyRight")},this.alignCenter=function(){this._runCommand("JustifyCenter")},this.alignJustify=function(){this._runCommand("JustifyFull")},this.applySub=function(){this._runCommand("Subscript")},this.applySuper=function(){this._runCommand("Superscript")},this.applyH1=function(){this._runCommand("FormatBlock","<H1>")},this.applyH2=function(){this._runCommand("FormatBlock","<H2>")},this.applyH3=function(){this._runCommand("FormatBlock","<H3>")},this.applyH4=function(){this._runCommand("FormatBlock","<H4>")},this.createNumList=function(){this._runCommand("InsertOrderedList")},this.createBulList=function(){this._runCommand("InsertUnorderedList")},this.increaseIndent=function(){this._runCommand("Indent")},this.decreaseIndent=function(){this._runCommand("Outdent")},this.clearFormatting=function(){this._runCommand("RemoveFormat"),this.tb.setItemState("applyBold",!1),this.tb.setItemState("applyItalic",!1),this.tb.setItemState("applyStrikethrough",!1),this.tb.setItemState("applySub",!1),this.tb.setItemState("applySuper",!1),this.tb.setItemState("applyUnderscore",!1)}}},dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping"),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this._settings.group&&this.group(this._settings.group,!1)},this)),this.attachEvent("onBeforeRender",dhtmlx.bind(function(a){this._settings.sort&&(a.block(),a.sort(this._settings.sort),a.unblock())},this)),this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(a,b){a.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1),this.block(),this.clearAll(),this.unblock()},b))},sum:function(a,b){a=dhtmlx.Template.setter(a),b=b||this.data;var c=0;return b.each(function(b){c+=1*a(b)}),c},min:function(a,b){a=dhtmlx.Template.setter(a),b=b||this.data;var c=1/0;return b.each(function(b){1*a(b)<c&&(c=1*a(b))}),1*c},max:function(a,b){a=dhtmlx.Template.setter(a),b=b||this.data;var c=-1/0;return b.each(function(b){1*a(b)>c&&(c=1*a(b))}),c},_split_data_by:function(a){var b=function(a,b){return(a=dhtmlx.Template.setter(a))(b[0])},c=dhtmlx.Template.setter(a.by);a.map[c]||(a.map[c]=[c,b]);var d={},e=[];this.data.each(function(a){var b=c(a);d[b]||(e.push({id:b}),d[b]=dhtmlx.toArray()),d[b].push(a)});for(var f in a.map){var g=a.map[f][1]||b;"function"!=typeof g&&(g=this[g]);for(var h=0;h<e.length;h++)e[h][f]=g.call(this,a.map[f][0],d[e[h].id])}this._not_grouped_data=this.data,this.data=new dhtmlx.DataStore,this.data.provideApi(this,!0),this._init_group_data_event(this.data,this),this.parse(e,"json")},group:function(a,b){this.ungroup(!1),this._split_data_by(a),b!==!1&&this.render()},ungroup:function(a){this._not_grouped_data&&(this.data=this._not_grouped_data,this.data.provideApi(this,!0)),a!==!1&&this.render()},group_setter:function(a){return dhtmlx.assert("object"==typeof a,"Incorrect group value"),dhtmlx.assert(a.by,"group.by is mandatory"),dhtmlx.assert(a.map,"group.map is mandatory"),a},sort_setter:function(a){return"object"!=typeof a&&(a={by:a}),this._mergeSettings(a,{as:"string",dir:"asc"}),a}},dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},time_part:function(a){return(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},week_start:function(a){var b=a.getDay();return this.config.start_on_monday&&(0===b?b=6:b--),this.date_part(this.add(a,-1*b,"day"))},month_start:function(a){return a.setDate(1),this.date_part(a)},year_start:function(a){return a.setMonth(0),this.month_start(a)},day_start:function(a){return this.date_part(a)},add:function(a,b,c){var d=new Date(a.valueOf());switch(c){case"day":d.setDate(d.getDate()+b);break;case"week":d.setDate(d.getDate()+7*b);break;case"month":d.setMonth(d.getMonth()+b);break;case"year":d.setYear(d.getFullYear()+b);break;case"hour":d.setHours(d.getHours()+b);break;case"minute":d.setMinutes(d.getMinutes()+b);break;default:return dhtmlx.Date["add_"+c](a,b,c)}return d},to_fixed:function(a){return 10>a?"0"+a:a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(a,b){return a=a.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return a}}),b&&(a=a.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+a+'";')},str_to_date:function(a,b){for(var c="var temp=date.split(/[^0-9a-zA-Z]+/g);",d=a.match(/%[a-zA-Z]/g),e=0;e<d.length;e++)switch(d[e]){case"%j":case"%d":c+="set[2]=temp["+e+"]||1;";break;case"%n":case"%m":c+="set[1]=(temp["+e+"]||1)-1;";break;case"%y":c+="set[0]=temp["+e+"]*1+(temp["+e+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":c+="set[3]=temp["+e+"]||0;";break;case"%i":c+="set[4]=temp["+e+"]||0;";break;case"%Y":c+="set[0]=temp["+e+"]||0;";break;case"%a":case"%A":c+="set[3]=set[3]%12+((temp["+e+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":c+="set[5]=temp["+e+"]||0;"}var f="set[0],set[1],set[2],set[3],set[4],set[5]";return b&&(f=" Date.UTC("+f+")"),new Function("date","var set=[0,0,1,0,0,0]; "+c+" return new Date("+f+");")},getISOWeek:function(a){if(!a)return!1;var b=a.getDay();0===b&&(b=7);var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.floor((c.getTime()-new Date(d,0,1).getTime())/864e5),f=1+Math.floor(e/7);return f},getUTCISOWeek:function(a){return this.getISOWeek(a)}},dhtmlx.math={},dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],dhtmlx.math.toHex=function(a,b){for(a=parseInt(a,10),str="";a>0;)str=this._toHex[a%16]+str,a=Math.floor(a/16);for(;str.length<b;)str="0"+str;return str},dhtmlx.math.hexToDec=function(a){return parseInt(a,16)},dhtmlx.math.toRgb=function(a){var b,c,d,e;return"string"!=typeof a?(b=a[0],c=a[1],d=a[2]):-1!=a.indexOf("rgb")?(e=a.substr(a.indexOf("(")+1,a.lastIndexOf(")")-a.indexOf("(")-1).split(","),b=e[0],c=e[1],d=e[2]):("#"==a.substr(0,1)&&(a=a.substr(1)),b=this.hexToDec(a.substr(0,2)),c=this.hexToDec(a.substr(2,2)),d=this.hexToDec(a.substr(4,2))),b=parseInt(b,10)||0,c=parseInt(c,10)||0,d=parseInt(d,10)||0,(0>b||b>255)&&(b=0),(0>c||c>255)&&(c=0),(0>d||d>255)&&(d=0),[b,c,d]},dhtmlx.math.hsvToRgb=function(a,b,c){var d,e,f,g,h,i,j,k;switch(d=Math.floor(a/60)%6,e=a/60-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=0,j=0,k=0,d){case 0:i=c,j=h,k=f;break;case 1:i=g,j=c,k=f;break;case 2:i=f,j=c,k=h;break;case 3:i=f,j=g,k=c;break;case 4:i=h,j=f,k=c;break;case 5:i=c,j=f,k=g}return i=Math.floor(255*i),j=Math.floor(255*j),k=Math.floor(255*k),[i,j,k]},dhtmlx.math.rgbToHsv=function(a,b,c){var d,e,f,g,h,i,j,k;d=a/255,e=b/255,f=c/255;var g=Math.min(d,e,f),h=Math.max(d,e,f);return j=0,i=0==h?0:1-g/h,k=h,h==g?j=0:h==d&&e>=f?j=60*(e-f)/(h-g)+0:h==d&&f>e?j=60*(e-f)/(h-g)+360:h==e?j=60*(f-d)/(h-g)+120:h==f&&(j=60*(d-e)/(h-g)+240),[j,i,k]},dhtmlx.presets||(dhtmlx.presets={}),dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:.5,border:!0}},dhtmlx.ui.Map=function(a){this.name="Map",this._id="map_"+dhtmlx.uid(),this._key=a,this._map=[]},dhtmlx.ui.Map.prototype={addRect:function(a,b,c){this._createMapArea(a,"RECT",b,c)},addPoly:function(a,b,c){this._createMapArea(a,"POLY",b,c)},_createMapArea:function(a,b,c,d){var e="";4==arguments.length&&(e="userdata='"+d+"'"),this._map.push("<area "+this._key+"='"+a+"' shape='"+b+"' coords='"+c.join()+"' "+e+"></area>")},addSector:function(a,b,c,d,e,f,g,h){var i=[];i.push(d),i.push(Math.floor(e*g));for(var j=b;c>j;j+=Math.PI/18)i.push(Math.floor(d+f*Math.cos(j))),i.push(Math.floor((e+f*Math.sin(j))*g));return i.push(Math.floor(d+f*Math.cos(c))),i.push(Math.floor((e+f*Math.sin(c))*g)),i.push(d),i.push(Math.floor(e*g)),this.addPoly(a,i,h)},render:function(a){var b=dhtmlx.html.create("DIV");b.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",a.appendChild(b);var c=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";b.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+c+" class='dhx_map_img' usemap='#"+this._id+"'>",a._htmlmap=b,this._map=[]}},dhtmlx.chart={},dhtmlx.chart.scatter={pvt_render_scatter:function(a,b,c,d,e,f){if(!this._settings.xValue)return dhtmlx.log("warning","Undefined propery: xValue");var g=this._getLimits(),h=this._getLimits("h","xValue");e||(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),this._drawYAxis(this.canvases.y.getCanvas(),b,c,d,g.min,g.max),this._drawHXAxis(this.canvases.x.getCanvas(),b,c,d,h.min,h.max)),g={min:this._settings.yAxis.start,max:this._settings.yAxis.end},h={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var i=this._getScatterParams(a,b,c,d,h,g);this._mapStart=c;for(var j=0;j<b.length;j++)this._drawScatterItem(a,f,c,d,i,h,g,b[j],e)},_getScatterParams:function(a,b,c,d,e,f){var g={};return g.totalHeight=d.y-c.y,g.totalWidth=d.x-c.x,this._calcScatterUnit(g,e.min,e.max,g.totalWidth,"X"),this._calcScatterUnit(g,f.min,f.max,g.totalHeight,"Y"),g},_drawScatterItem:function(a,b,c,d,e,f,g,h,i){var j=this._calculateScatterItemPosition(e,d,c,f,h,"X"),k=this._calculateScatterItemPosition(e,c,d,g,h,"Y");this._drawItem(a,j,k,h,this._settings.label.call(this,h),i,b)},_calculateScatterItemPosition:function(a,b,c,d,e,f){var g=this._settings["X"==f?"xValue":"value"].call(this,e),h=a["valueFactor"+f],i=(parseFloat(g||0)-d.min)*h,j=a["unit"+f],k=c[f.toLowerCase()]-("X"==f?-1:1)*Math.floor(j*i);return 0>i&&(k=c[f.toLowerCase()]),g>d.max&&(k=b[f.toLowerCase()]),g<d.min&&(k=c[f.toLowerCase()]),k},_calcScatterUnit:function(a,b,c,d,e){var f=this._getRelativeValue(b,c);e=e||"",a["relValue"+e]=f[0],a["valueFactor"+e]=f[1],a["unit"+e]=a["relValue"+e]?d/a["relValue"+e]:10}},dhtmlx.chart.radar={pvt_render_radar:function(a,b,c,d,e,f){this._renderRadarChart(a,b,c,d,e,f)},_renderRadarChart:function(a,b,c,d,e,f){if(b.length){for(var g=this._getPieParameters(c,d),h=this._settings.radius?this._settings.radius:g.radius,i=this._settings.x?this._settings.x:g.x,j=this._settings.y?this._settings.y:g.y,k=[],l=0;l<b.length;l++)k.push(1);var m=this._getRatios(k,b.length);this._mapStart=c,e||this._drawRadarAxises(m,i,j,h,b),this._drawRadarData(a,m,i,j,h,b,e,f)}},_drawRadarData:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(k=this._settings,m=k.yAxis.start,n=k.yAxis.end,A=this._getRelativeValue(m,n),t=A[0],z=t?e/t:e/2,y=A[1],u=-Math.PI/2,i=j=u,q=[],p=0,l=0;l<f.length;l++)x?w=x:(v=k.value(f[l]),w=(parseFloat(v||0)-m)*y),r=Math.floor(z*w),v=k.value(l!=f.length-1?f[l+1]:f[0]),x=(parseFloat(v||0)-m)*y,s=Math.floor(z*x),i=j,j=l!=f.length-1?u+b[l]-1e-4:u,o=p||this._getPositionByAngle(i,c,d,r),p=this._getPositionByAngle(j,c,d,s),q.push(o);k.fill&&this._fillRadarChart(a,q,f),k.disableLines||this._strokeRadarChart(a,q,f),k.disableItems||this._drawRadarItemMarkers(a,q,f,g,h),q=null},_drawRadarItemMarkers:function(a,b,c,d,e){for(var f=0;f<b.length;f++)this._drawItem(a,b[f].x,b[f].y,c[f],this._settings.label.call(this,c),d,e)},_fillRadarChart:function(a,b,c){var d,e;a.globalAlpha=this._settings.alpha.call(this,{}),a.beginPath();for(var f=0;f<b.length;f++)a.fillStyle=this._settings.fill.call(this,c[f]),d=b[f],e=b[f+1]||b[0],f||a.moveTo(d.x,d.y),a.lineTo(e.x,e.y);a.fill(),a.globalAlpha=1},_strokeRadarChart:function(a,b,c){for(var d,e,f=0;f<b.length;f++)d=b[f],e=b[f+1]||b[0],this._drawLine(a,d.x,d.y,e.x,e.y,this._settings.line.color.call(this,c[f]),this._settings.line.width)},_drawRadarAxises:function(a,b,c,d,e){var f=this._settings.yAxis,g=this._settings.xAxis,h=f.start,i=f.end,j=f.step,k={},l=this._configYAxis;if("undefined"==typeof l.step||"undefined"==typeof l.start||"undefined"==typeof l.end){var m=this._getLimits();k=this._calculateScale(m.min,m.max),h=k.start,i=k.end,j=k.step,f.end=i,f.start=h}var n,o,p,q,r,s=[],t=0,u=d*j/(i-h);1>j&&(q=Math.min(this._log10(j),0>=h?0:this._log10(h)),r=Math.pow(10,-q));var v=[];this.canvases.scale||(this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale"));var w=this.canvases.scale.getCanvas();for(n=i;n>=h;n-=j){k.fixNum&&(n=parseFloat(new Number(n).toFixed(k.fixNum))),s.push(Math.floor(t*u)+.5),r&&(n=Math.round(n*r)/r);var x=c-d+s[s.length-1];if(this.canvases.scale.renderTextAt("middle","left",b,x,f.template(n.toString()),"dhx_axis_item_y dhx_radar"),a.length<2)return void this._drawScaleSector(w,"arc",b,c,d-s[s.length-1],-Math.PI/2,3*Math.PI/2,n);var y,z=-Math.PI/2,A=z;for(o=0;o<a.length;o++)n==i&&v.push(A),y=z+a[o]-1e-4,this._drawScaleSector(w,l.lineShape||"line",b,c,d-s[s.length-1],A,y,n,o,e[n]),A=y;t++}for(n=0;n<v.length;n++)p=this._getPositionByAngle(v[n],b,c,d),g.lines.call(this,e[n],n)&&this._drawLine(w,b,c,p.x,p.y,g?g.lineColor.call(this,e[n]):"#cfcfcf",1),this._drawRadarScaleLabel(w,b,c,d,v[n],g?g.template.call(this,e[n]):"&nbsp;")},_drawScaleSector:function(a,b,c,d,e,f,g,h,i){var j,k;if(0>e)return!1;j=this._getPositionByAngle(f,c,d,e),k=this._getPositionByAngle(g,c,d,e);var l=this._settings.yAxis;l.bg&&(a.beginPath(),a.moveTo(c,d),"arc"==b?a.arc(c,d,e,f,g,!1):(a.lineTo(j.x,j.y),a.lineTo(k.x,k.y)),a.fillStyle=l.bg(h,i),a.moveTo(c,d),a.fill(),a.closePath()),l.lines.call(this,h)&&(a.lineWidth=1,a.beginPath(),"arc"==b?a.arc(c,d,e,f,g,!1):(a.moveTo(j.x,j.y),a.lineTo(k.x,k.y)),a.strokeStyle=l.lineColor.call(this,h),a.stroke())},_drawRadarScaleLabel:function(a,b,c,d,e,f){var g=this.canvases.scale.renderText(0,0,f,"dhx_axis_radar_title",1),h=g.scrollWidth,i=g.offsetHeight,j=.001,k=this._getPositionByAngle(e,b,c,d+5),l=0,m=0;(0>e||e>Math.PI)&&(m=-i),e>Math.PI/2&&(l=-h),Math.abs(e+Math.PI/2)<j||Math.abs(e-Math.PI/2)<j?l=-h/2:(Math.abs(e)<j||Math.abs(e-Math.PI)<j)&&(m=-i/2),g.style.top=k.y+m+"px",g.style.left=k.x+l+"px",g.style.width=h+"px",g.style.whiteSpace="nowrap"}},dhtmlx.chart.area={pvt_render_area:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(l=this._calculateLineParams(a,b,c,d,e),h=this._settings,j=h.eventRadius||Math.floor(l.cellWidth/2),b.length){for(m=[],p=h.offset?c.x+.5*l.cellWidth:c.x,i=0;i<b.length;i++)if(k=b[i],o=this._getPointY(k,c,d,l),s=p+l.cellWidth*i,o){if(t="object"==typeof o?o.y0:o,i&&this._settings.fixOverflow){if(n=this._getPointY(b[i-1],c,d,l),n.out&&n.out==o.out)continue;q=l.cellWidth*(i-1)-.5+p,r="object"==typeof n?n.y0:n,n.out&&(u="min"==n.out?d.y:c.y,m.push([this._calcOverflowX(q,s,r,t,u),u])),o.out&&(u="min"==o.out?d.y:c.y,m.push([this._calcOverflowX(q,s,r,t,u),u]),i==b.length-1&&u==c.y&&m.push([s,c.y]))}o.out||(m.push([s,t]),f.addRect(k.id,[s-j-c.x,t-j-c.y,s+j-c.x,t+j-c.y],e)),h.yAxis||(g=h.offset||i!=b.length-1?"center":"left",this.canvases[e].renderTextAt(!1,g,s,t-h.labelOffset,h.label(k)))}m.length&&(m.push([s,d.y]),m.push([m[0][0],d.y])),a.globalAlpha=this._settings.alpha.call(this,b[0]),a.fillStyle=this._settings.color.call(this,b[0]),a.beginPath(),this._path(a,m),a.fill(),h.border&&(a.lineWidth=h.borderWidth||1,h.borderColor?a.strokeStyle=h.borderColor.call(this,b[0]):this._setBorderStyles(a,a.fillStyle),a.beginPath(),this._path(a,m),a.stroke()),a.lineWidth=1,a.globalAlpha=1}}},dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(p=this._calculateLineParams(a,b,c,d,e),j=this._settings,n=j.eventRadius||Math.floor(p.cellWidth/2),b.length){q=[],t=[],r=j.offset?c.x+.5*p.cellWidth:c.x;var u=function(a,c){return e?b[a].$startY?c-d.y+b[a].$startY:0:c},v=function(a,b,c){var d=(c.y-b.y)/(c.x-b.x);return d*a+b.y-d*b.x};for(k=0;k<b.length;k++)o=b[k],k?r+=p.cellWidth:(s=u(k,d.y),q.push([r,s])),s=u(k,this._getPointY(o,c,d,p)),t.push(isNaN(s)&&!k?b[k].$startY||d.y:s),s&&(q.push([r,s]),f.addRect(o.id,[r-n-c.x,s-n-c.y,r+n-c.x,s+n-c.y],e),j.yAxis||(i=!j.offset&&m?"left":"center",this.canvases[e].renderTextAt(!1,i,r,s-j.labelOffset,j.label(o))));if(q.push([r,u(k-1,d.y)]),e)for(k=b.length-2;k>0;k--)r-=p.cellWidth,s=b[k].$startY,s&&q.push([r,s]);for(q.push([q[0][0],q[0][1]]),a.globalAlpha=this._settings.alpha.call(this,b[0]),a.fillStyle=this._settings.color.call(this,b[0]),a.beginPath(),this._path(a,q),a.fill(),k=0;k<b.length;k++){if(s=t[k],!s)for(k==b.length-1&&(s=b[k].$startY),l=k+1;l<b.length;l++)if(t[l]){g={x:c.x,y:t[0]},h={x:c.x+p.cellWidth*l,y:t[l]},s=v(c.x+p.cellWidth*k,g,h);break}b[k].$startY=s}}}},dhtmlx.chart.spline={pvt_render_spline:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(k=this._calculateLineParams(a,b,c,d,e),g=this._settings,this._mapStart=c,i=[],b.length){for(n=g.offset?c.x+.5*k.cellWidth:c.x,h=0;h<b.length;h++)q=this._getPointY(b[h],c,d,k),q&&(m=h?k.cellWidth*h-.5+n:n,i.push({x:m,y:q,index:h}));for(l=this._getSplineParameters(i),h=0;h<i.length;h++){if(o=i[h].x,r=i[h].y,h<i.length-1){for(p=i[h+1].x,s=i[h+1].y,j=o;p>j;j++){var t=this._getSplineYPoint(j,o,h,l.a,l.b,l.c,l.d);t<c.y&&(t=c.y),t>d.y&&(t=d.y);var u=this._getSplineYPoint(j+1,o,h,l.a,l.b,l.c,l.d);u<c.y&&(u=c.y),u>d.y&&(u=d.y),this._drawLine(a,j,t,j+1,u,g.line.color(b[h]),g.line.width)}this._drawLine(a,p-1,this._getSplineYPoint(j,o,h,l.a,l.b,l.c,l.d),p,s,g.line.color(b[h]),g.line.width)}this._drawItem(a,o,r,b[i[h].index],g.label(b[i[h].index]),e,f)}}},_getSplineParameters:function(a){var b,c,d,e,f,g,h,i,j=[],k=[],l=a.length;for(b=0;l-1>b;b++)j[b]=a[b+1].x-a[b].x,k[b]=(a[b+1].y-a[b].y)/j[b];for(c=[],d=[],c[0]=0,c[1]=2*(j[0]+j[1]),d[0]=0,d[1]=6*(k[1]-k[0]),b=2;l-1>b;b++)c[b]=2*(j[b-1]+j[b])-j[b-1]*j[b-1]/c[b-1],d[b]=6*(k[b]-k[b-1])-j[b-1]*d[b-1]/c[b-1];for(e=[],e[l-1]=e[0]=0,b=l-2;b>=1;b--)e[b]=(d[b]-j[b]*e[b+1])/c[b];for(f=[],g=[],h=[],i=[],b=0;l-1>b;b++)f[b]=a[b].y,g[b]=-j[b]*e[b+1]/6-j[b]*e[b]/3+(a[b+1].y-a[b].y)/j[b],h[b]=e[b]/2,i[b]=(e[b+1]-e[b])/(6*j[b]);return{a:f,b:g,c:h,d:i}},_getSplineYPoint:function(a,b,c,d,e,f,g){return d[c]+(a-b)*(e[c]+(a-b)*(f[c]+(a-b)*g[c]))}},dhtmlx.chart.barH={pvt_render_barH:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(i=(d.y-c.y)/b.length,m=this._getLimits("h"),n=m.max,o=m.min,v=d.x-c.x,A=!!this._settings.yAxis,e||this._drawHScales(a,b,c,d,o,n,i),A&&(n=parseFloat(this._settings.xAxis.end),o=parseFloat(this._settings.xAxis.start)),t=this._getRelativeValue(o,n),r=t[0],q=t[1],x=r?v/r:10,A||(u=10,x=r?(v-u)/r:10),h=parseInt(this._settings.width,10),h*this._series.length+4>i&&(h=i/this._series.length-4),g=Math.floor((i-h*this._series.length)/2),s="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(h/5),p=!1,k=this._settings.gradient,k&&"function"!=typeof k?(p=k,k=!1):k&&(k=a.createLinearGradient(c.x,c.y,d.x,c.y),this._settings.gradient(k)),A||this._drawLine(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1),l=0;l<b.length;l++)if(w=parseFloat(this._settings.value(b[l]||0)),w>n&&(w=n),w-=o,w*=q,y=c.x,z=c.y+g+l*i+(h+1)*e,0>w&&"auto"==this._settings.origin||this._settings.xAxis&&0===w&&!("auto"!=this._settings.origin&&this._settings.origin>o))this.canvases[e].renderTextAt("middle","right",y+10,z+h/2+g,this._settings.label(b[l]));else{0>w&&"auto"!=this._settings.origin&&this._settings.origin>o&&(w=0),A||(w+=u/x),j=k||this._settings.color.call(this,b[l]),this._settings.border&&this._drawBarHBorder(a,y,z,h,o,s,x,w,j),a.globalAlpha=this._settings.alpha.call(this,b[l]);var B=this._drawBarH(a,d,y,z,h,o,s,x,w,j,k,p);0!=p&&this._drawBarHGradient(a,y,z,h,o,s,x,w,j,p),a.globalAlpha=1,B[3]==z?(this.canvases[e].renderTextAt("middle","left",B[0]-5,B[3]+Math.floor(h/2),this._settings.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,B[3]-c.y,B[2]-c.x,B[3]+h-c.y],e)):(this.canvases[e].renderTextAt("middle",!1,B[2]+5,B[1]+Math.floor(h/2),this._settings.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,z-c.y,B[2]-c.x,B[3]-c.y],e))}},_setBarHPoints:function(a,b,c,d,e,f,g,h,i){var j=0;if(e>f*g){var k=(e-f*g)/e;j=-Math.asin(k)+Math.PI/2}a.moveTo(b,c+h);var l=b+f*g-e-(e?0:h);f*g>e&&a.lineTo(l,c+h);var m=c+e;e&&e>0&&a.arc(l,m,e-h,-Math.PI/2+j,0,!1);var n=c+d-e-(e?0:h),o=l+e-(e?h:0);a.lineTo(o,n),e&&e>0&&a.arc(l,n,e-h,0,Math.PI/2-j,!1);var p=c+d-h;return a.lineTo(b,p),i||a.lineTo(b,c+h),[o,p]},_drawHScales:function(a,b,c,d,e,f,g){var h=0;this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj)),h=this._drawHXAxis(this.canvases.x.getCanvas(),b,c,d,e,f)),this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj)),this._drawHYAxis(this.canvases.y.getCanvas(),b,c,d,g,h))},_drawHYAxis:function(a,b,c,d,e,f){if(this._settings.yAxis){var g,h=parseInt(f?f:c.x,10)-.5,i=d.y+.5,j=c.y;this._drawLine(a,h,i,h,j,this._settings.yAxis.color,1);for(var k=0;k<b.length;k++){var l="auto"!=this._settings.origin&&"barH"==this._settings.view&&parseFloat(this._settings.value(b[k]))<this._settings.origin;g=j+e/2+k*e,this.canvases.y.renderTextAt("middle",l?!1:"left",l?h+5:h-5,g,this._settings.yAxis.template(b[k]),"dhx_axis_item_y",l?0:h-10),this._settings.yAxis.lines.call(this,b[k])&&this._drawLine(a,c.x,g,d.x,g,this._settings.yAxis.lineColor.call(this,b[k]),1)}this._drawLine(a,c.x+.5,j+.5,d.x,j+.5,this._settings.yAxis.lineColor.call(this,{}),1),this._setYAxisTitle(c,d)}},_drawHXAxis:function(a,b,c,d,e,f){var g,h={},i=this._settings.xAxis;if(i){var j=d.y+.5,k=c.x-.5,l=d.x-.5,m=c.x;if(this._drawLine(a,k,j,l,j,i.color,1),i.step&&(g=parseFloat(i.step)),("undefined"==typeof this._configXAxis.step||"undefined"==typeof this._configXAxis.start||"undefined"==typeof this._configXAxis.end)&&(h=this._calculateScale(e,f),e=h.start,f=h.end,g=h.step,this._settings.xAxis.end=f,this._settings.xAxis.start=e,this._settings.xAxis.step=g),0!==g){for(var n=(l-k)*g/(f-e),o=0,p=e;f>=p;p+=g){h.fixNum&&(p=parseFloat(new Number(p).toFixed(h.fixNum)));var q=Math.floor(k+o*n)+.5;p==e&&"auto"==this._settings.origin||!i.lines.call(this,p)||this._drawLine(a,q,j,q,c.y,this._settings.xAxis.lineColor.call(this,p),1),p==this._settings.origin&&(m=q+1),this.canvases.x.renderTextAt(!1,!0,q,j+2,i.template(p.toString()),"dhx_axis_item_x"),o++}return this.canvases.x.renderTextAt(!0,!1,k,d.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",d.x-c.x),i.lines.call(this,{})||this._drawLine(a,k,c.y-.5,l,c.y-.5,this._settings.xAxis.color,.2),m}}},_correctBarHParams:function(a,b,c,d,e,f,g){var h=this._settings.yAxis,i=b;return h&&"auto"!=this._settings.origin&&this._settings.origin>g&&(b+=(this._settings.origin-g)*e,i=b,d-=this._settings.origin-g,0>d&&(d*=-1,a.translate(b,c+f),a.rotate(Math.PI),b=.5,c=0),b+=.5),{value:d,x0:b,y0:c,start:i}},_drawBarH:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save();var m=this._correctBarHParams(a,c,d,i,h,e,f);a.fillStyle=j,a.beginPath();var n=this._setBarHPoints(a,m.x0,m.y0,e,g,h,m.value,this._settings.border?1:0);k&&!l&&a.lineTo(b.x,m.y0+(this._settings.border?1:0)),a.fill(),a.restore();var o=m.y0,p=m.y0!=d?d:n[1],q=m.y0!=d?m.start-n[0]:m.start,r=m.y0!=d?m.start:n[0];return[q,o,r,p]
},_drawBarHBorder:function(a,b,c,d,e,f,g,h,i){a.save();var j=this._correctBarHParams(a,b,c,h,g,d,e);a.beginPath(),this._setBorderStyles(a,i),a.globalAlpha=.9,this._setBarHPoints(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},_drawBarHGradient:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this._correctBarHParams(a,b,c,h,g,d,e),l=this._setBarGradient(a,k.x0,k.y0+d,k.x0+g*k.value,k.y0,j,i,"x");a.fillStyle=l.gradient,a.beginPath(),this._setBarHPoints(a,k.x0,k.y0+l.offset,d-2*l.offset,f,g,k.value,l.offset),a.fill(),a.globalAlpha=1,a.restore()}},dhtmlx.assert(dhtmlx.chart.barH),dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(a,b,c,d,e,f){var g,h,i,j,k=d.x-c.x,l=!!this._settings.yAxis,m=this._getStackedLimits(b);g=m.max,h=m.min;var n=Math.floor((d.y-c.y)/b.length);e||this._drawHScales(a,b,c,d,h,g,n),l&&(g=parseFloat(this._settings.xAxis.end),h=parseFloat(this._settings.xAxis.start));var o=this._getRelativeValue(h,g);j=o[0],i=o[1];var p=j?k/j:10;if(!l){var q=10;p=j?(k-q)/j:10}var r=parseInt(this._settings.width,10);r+4>n&&(r=n-4);var s=(n-r)/2,t=0,u=!1,v=this._settings.gradient;v&&(u=!0),l||this._drawLine(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1);var w=0,x=0;for(y=0;y<this._series.length;y++)y==e&&(x=w),"stackedBarH"==this._series[y].view&&w++;for(var y=0;y<b.length;y++){x||(b[y].$startX=c.x);var z=parseFloat(this._settings.value(b[y]||0));z>g&&(z=g),z-=h,z*=i;var A=c.x,B=c.y+s+y*n;if(x?A=b[y].$startX:b[y].$startX=A,0>z||this._settings.yAxis&&0===z)this.canvases.y.renderTextAt("middle",!0,A+10,B+r/2,this._settings.label(b[y]));else{l||(z+=q/p);var C=this._settings.color.call(this,b[y]);a.globalAlpha=this._settings.alpha.call(this,b[y]),a.fillStyle=this._settings.color.call(this,b[y]),a.beginPath();var D=this._setBarHPoints(a,A,B,r,t,p,z,this._settings.border?1:0);if(v&&!u&&a.lineTo(c.x+k,B+(this._settings.border?1:0)),a.fill(),0!=u){var E=this._setBarGradient(a,A,B+r,A,B,u,C,"x");a.fillStyle=E.gradient,a.beginPath(),D=this._setBarHPoints(a,A,B,r,t,p,z,0),a.fill()}this._settings.border&&this._drawBarHBorder(a,A,B,r,h,t,p,z,C),a.globalAlpha=1,this.canvases[e].renderTextAt("middle",!0,b[y].$startX+(D[0]-b[y].$startX)/2-1,B+(D[1]-B)/2,this._settings.label(b[y])),f.addRect(b[y].id,[b[y].$startX-c.x,B-c.y,D[0]-c.x,D[1]-c.y],e),b[y].$startX=D[0]}}}},dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(a,b,c,d,e,f){var g,h,i,j,k=d.y-c.y,l=!!this._settings.yAxis,m=!!this._settings.xAxis,n=this._getStackedLimits(b);g=n.max,h=n.min;var o=Math.floor((d.x-c.x)/b.length);e||this._drawScales(b,c,d,h,g,o),l&&(g=parseFloat(this._settings.yAxis.end),h=parseFloat(this._settings.yAxis.start));var p=this._getRelativeValue(h,g);j=p[0],i=p[1];var q=j?k/j:10,r=parseInt(this._settings.width,10);r+4>o&&(r=o-4);var s=Math.floor((o-r)/2),t=this._settings.gradient?this._settings.gradient:!1;m||this._drawLine(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1);for(var u=0;u<b.length;u++){var v=parseFloat(this._settings.value(b[u]||0));if(v){e||(v-=h),v*=i;var w=c.x+s+u*o,x=d.y;if(e?x=b[u].$startY:b[u].$startY=x,!(x<c.y+1))if(0>v||this._settings.yAxis&&0===v)this.canvases.y.renderTextAt(!0,!0,w+Math.floor(r/2),x,this._settings.label(b[u]));else{var y=this._settings.color.call(this,b[u]);a.globalAlpha=this._settings.alpha.call(this,b[u]),a.fillStyle=this._settings.color.call(this,b[u]),a.beginPath();var z=this._setStakedBarPoints(a,w-(this._settings.border?.5:0),x,r+(this._settings.border?.5:0),q,v,0,c.y);if(a.fill(),t){a.save();var A=this._setBarGradient(a,w,x,w+r,z[1],t,y,"y");a.fillStyle=A.gradient,a.beginPath(),z=this._setStakedBarPoints(a,w+A.offset,x,r-2*A.offset,q,v,this._settings.border?1:0,c.y),a.fill(),a.restore()}this._settings.border&&(a.save(),this._setBorderStyles(a,y),a.beginPath(),this._setStakedBarPoints(a,w-.5,x,r+1,q,v,0,c.y,1),a.stroke(),a.restore()),a.globalAlpha=1,this.canvases[e].renderTextAt(!1,!0,w+Math.floor(r/2),z[1]+(x-z[1])/2-7,this._settings.label(b[u])),f.addRect(b[u].id,[w-c.x,z[1]-c.y,z[0]-c.x,(b[u].$startY||x)-c.y],e),b[u].$startY=this._settings.border?z[1]+1:z[1]}}else e&&b[u].$startY||(b[u].$startY=d.y)}},_setStakedBarPoints:function(a,b,c,d,e,f,g,h,i){a.moveTo(b,c);var j=c-e*f+g;h>j&&(j=h),a.lineTo(b,j);var k=b+d,l=j;a.lineTo(k,l);var m=b+d;return a.lineTo(m,c),i||a.lineTo(b,c),[m,l-2*g]}},dhtmlx.chart.line={pvt_render_line:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(j=this._calculateLineParams(a,b,c,d,e),g=this._settings,b.length){for(k=g.offset?c.x+.5*j.cellWidth:c.x,i=[],h=0;h<b.length;h++)if(r=this._getPointY(b[h],c,d,j)){if(m=h?j.cellWidth*h-.5+k:k,o="object"==typeof r?r.y0:r,h&&this._settings.fixOverflow){if(q=this._getPointY(b[h-1],c,d,j),q.out&&q.out==r.out)continue;l=j.cellWidth*(h-1)-.5+k,n="object"==typeof q?q.y0:q,q.out&&(p="min"==q.out?d.y:c.y,i.push({x:this._calcOverflowX(l,m,n,o,p),y:p})),r.out&&(p="min"==r.out?d.y:c.y,i.push({x:this._calcOverflowX(l,m,n,o,p),y:p}))}r.out||i.push({x:m,y:r,index:h})}for(this._mapStart=c,h=1;h<=i.length;h++)l=i[h-1].x,n=i[h-1].y,h<i.length&&(m=i[h].x,o=i[h].y,this._drawLine(a,l,n,m,o,g.line.color.call(this,b[h-1]),g.line.width),g.line&&g.line.shadow&&(a.globalAlpha=.3,this._drawLine(a,l+2,n+g.line.width+8,m+2,o+g.line.width+8,"#eeeeee",g.line.width+3),a.globalAlpha=1)),"undefined"!=typeof i[h-1].index&&this._drawItem(a,l,n,b[i[h-1].index],g.label(b[i[h-1].index]),e,f,c)}},_calcOverflowX:function(a,b,c,d,e){return a+(e-c)*(b-a)/(d-c)},_drawItem:function(a,b,c,d,e,f,g){var h=this._settings.item,i=parseInt(h.radius.call(this,d),10)||0,j=this._mapStart;if(i){if(a.save(),h.shadow){a.lineWidth=1,a.strokeStyle="#bdbdbd",a.fillStyle="#bdbdbd";for(var k=[.1,.2,.3],l=k.length-1;l>=0;l--)a.globalAlpha=k[l],a.strokeStyle="#d0d0d0",a.beginPath(),this._strokeChartItem(a,b,c+2*i/3,i+l+1,h.type),a.stroke();a.beginPath(),a.globalAlpha=.3,a.fillStyle="#bdbdbd",this._strokeChartItem(a,b,c+2*i/3,i+1,h.type),a.fill()}a.restore(),a.lineWidth=h.borderWidth,a.fillStyle=h.color.call(this,d),a.strokeStyle=h.borderColor.call(this,d),a.globalAlpha=h.alpha.call(this,d),a.beginPath(),this._strokeChartItem(a,b,c,i+1,h.type),a.fill(),a.stroke(),a.globalAlpha=1}e&&this.canvases[f].renderTextAt(!1,!0,b,c-i-this._settings.labelOffset,this._settings.label.call(this,d));var m=this._settings.eventRadius||i+1;g.addRect(d.id,[b-m-j.x,c-m-j.y,b+m-j.x,c+m-j.y],f)},_strokeChartItem:function(a,b,c,d,e){var f=[];if(b=parseInt(b,10),c=parseInt(c,10),!e||"square"!=e&&"s"!=e)if(!e||"diamond"!=e&&"d"!=e)f=!e||"triangle"!=e&&"t"!=e?[[b,c,d,0,2*Math.PI,!0]]:[[b,c-d],[b+Math.sqrt(3)*d/2,c+d/2],[b-Math.sqrt(3)*d/2,c+d/2],[b,c-d]];else{var g=a.lineWidth>1?a.lineWidth*Math.sqrt(2)/4:0;f=[[b,c-d],[b+d,c],[b,c+d],[b-d,c],[b+g,c-d-g]]}else d*=Math.sqrt(2)/2,f=[[b-d-a.lineWidth/2,c-d],[b+d,c-d],[b+d,c+d],[b-d,c+d],[b-d,c-d]];this._path(a,f)},_getPointY:function(a,b,c,d){var e=d.minValue,f=d.maxValue,g=d.unit,h=d.valueFactor,i=this._settings.value(a),j=(parseFloat(i||0)-e)*h;this._settings.yAxis||(j+=d.startValue/g);var k=c.y-g*j;return!this._settings.fixOverflow||"line"!=this._settings.view&&"area"!=this._settings.view?(i>f&&(k=b.y),(0>j||e>i)&&(k=c.y)):i>f?k={y:b.y,y0:k,out:"max"}:(0>j||e>i)&&(k={y:c.y,y0:k,out:"min"}),k},_calculateLineParams:function(a,b,c,d,e){var f,g={};g.totalHeight=d.y-c.y,g.cellWidth=(d.x-c.x)/(this._settings.offset?b.length:b.length-1);var h=!!this._settings.yAxis,i=-1!=this._settings.view.indexOf("stacked")?this._getStackedLimits(b):this._getLimits();g.maxValue=i.max,g.minValue=i.min,e||this._drawScales(b,c,d,g.minValue,g.maxValue,g.cellWidth),h&&(g.maxValue=parseFloat(this._settings.yAxis.end),g.minValue=parseFloat(this._settings.yAxis.start));var j=this._getRelativeValue(g.minValue,g.maxValue);return f=j[0],g.valueFactor=j[1],g.unit=f?g.totalHeight/f:10,g.startValue=0,h||(g.startValue=10,g.unit!=g.totalHeight&&(g.unit=f?(g.totalHeight-g.startValue)/f:10)),g}},dhtmlx.chart.bar={pvt_render_bar:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t=d.y-c.y;s=!!this._settings.yAxis,r=!!this._settings.xAxis,j=this._getLimits(),k=j.max,l=j.min,h=(d.x-c.x)/b.length,e||"auto"!=this._settings.origin&&!s||this._drawScales(b,c,d,l,k,h),s&&(k=parseFloat(this._settings.yAxis.end),l=parseFloat(this._settings.yAxis.start)),o=this._getRelativeValue(l,k),m=o[0],n=o[1],q=m?t/m:m,s||"auto"!=this._settings.origin&&r||(p=10,q=m?(t-p)/m:p),!e&&"auto"!=this._settings.origin&&!s&&this._settings.origin>l&&this._drawXAxis(a,b,c,d,h,d.y-q*(this._settings.origin-l)),g=parseInt(this._settings.width,10);var u=0,v=0;for(i=0;i<this._series.length;i++)i==e&&(v=u),"bar"==this._series[i].view&&u++;this._series&&g*u+4>h&&(g=parseInt(h/u-4,10));var w=(h-g*u)/2,x="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(g/5),y=!1,z=this._settings.gradient;for(z&&"function"!=typeof z?(y=z,z=!1):z&&(z=a.createLinearGradient(0,d.y,0,c.y),this._settings.gradient(z)),r||this._drawLine(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1),i=0;i<b.length;i++){var A=parseFloat(this._settings.value(b[i])||0);if(!isNaN(A)){A>k&&(A=k),A-=l,A*=n;var B=c.x+w+parseInt(i*h,10)+(g+1)*v,C=d.y;if(0>A||this._settings.yAxis&&0===A&&!("auto"!=this._settings.origin&&this._settings.origin>l))this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),C,this._settings.label(b[i]));else{s||"auto"!=this._settings.origin&&r||(A+=p/q);var D=z||this._settings.color.call(this,b[i]);a.globalAlpha=this._settings.alpha.call(this,b[i]);var E=this._drawBar(a,c,B,C,g,l,x,q,A,D,z,y);y&&this._drawBarGradient(a,B,C,g,l,x,q,A,D,y),this._settings.border&&this._drawBarBorder(a,B,C,g,l,x,q,A,D),a.globalAlpha=1,E[0]!=B?this.canvases[e].renderTextAt(!1,!0,B+Math.floor(g/2),E[1],this._settings.label(b[i])):this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),E[3],this._settings.label(b[i])),f.addRect(b[i].id,[B-c.x,E[3]-c.y,E[2]-c.x,E[1]-c.y],e)}}}},_correctBarParams:function(a,b,c,d,e,f,g){var h=this._settings.xAxis,i=c;return h&&"auto"!=this._settings.origin&&this._settings.origin>g&&(c-=(this._settings.origin-g)*e,i=c,d-=this._settings.origin-g,0>d&&(d*=-1,a.translate(b+f,c),a.rotate(Math.PI),b=0,c=0),c-=.5),{value:d,x0:b,y0:c,start:i}},_drawBar:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save(),a.fillStyle=j;var m=this._correctBarParams(a,c,d,i,h,e,f),n=this._setBarPoints(a,m.x0,m.y0,e,g,h,m.value,this._settings.border?1:0);k&&!l&&a.lineTo(m.x0+(this._settings.border?1:0),b.y),a.fill(),a.restore();var o=m.x0,p=m.x0!=c?c+n[0]:n[0],q=m.x0!=c?m.start-n[1]-m.y0:m.y0,r=m.x0!=c?m.start-m.y0:n[1];return[o,q,p,r]},_drawBarBorder:function(a,b,c,d,e,f,g,h,i){var j;a.save(),j=this._correctBarParams(a,b,c,h,g,d,e),this._setBorderStyles(a,i),this._setBarPoints(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},_drawBarGradient:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this._correctBarParams(a,b,c,h,g,d,e),l=this._setBarGradient(a,k.x0,k.y0,k.x0+d,k.y0-g*k.value+2,j,i,"y"),m=this._settings.border?1:0;a.fillStyle=l.gradient,this._setBarPoints(a,k.x0+l.offset,k.y0,d-2*l.offset,f,g,k.value,l.offset+m),a.fill(),a.restore()},_setBarPoints:function(a,b,c,d,e,f,g,h,i){a.beginPath();var j=0;if(e>f*g){var k=(e-f*g)/e;1>=k&&k>=-1&&(j=-Math.acos(k)+Math.PI/2)}a.moveTo(b+h,c);var l=c-Math.floor(f*g)+e+(e?0:h);f*g>e&&a.lineTo(b+h,l);var m=b+e;e&&e>0&&a.arc(m,l,e-h,-Math.PI+j,-Math.PI/2,!1);var n=b+d-e-h,o=l-e+(e?h:0);a.lineTo(n,o),e&&e>0&&a.arc(n,l,e-h,-Math.PI/2,0-j,!1);var p=b+d-h;return a.lineTo(p,c),i||a.lineTo(b+h,c),[p,o]}},dhtmlx.chart.pie={pvt_render_pie:function(a,b,c,d,e,f){this._renderPie(a,b,c,d,1,f,e)},_renderPie:function(a,b,c,d,e,f,g){if(b.length){var h=this._getPieParameters(c,d),i=this._settings.radius?this._settings.radius:h.radius;if(!(0>i)){var j=this._getValues(b),k=this._getTotalValue(j),l=this._getRatios(j,k),m=this._settings.x?this._settings.x:h.x,n=this._settings.y?this._settings.y:h.y;1==e&&this._settings.shadow&&this._addShadow(a,m,n,i),n/=e;var o=-Math.PI/2,p=[];if(a.scale(1,e),this._settings.gradient){var q=1!=e?m+i/3:m,r=1!=e?n+i/3:n;this._showRadialGradient(a,m,n,i,q,r)}for(var s=0;s<b.length;s++)if(j[s]){a.strokeStyle=this._settings.lineColor.call(this,b[s]),a.beginPath(),a.moveTo(m,n),p.push(o),alpha1=-Math.PI/2+l[s]-1e-4,a.arc(m,n,i,o,alpha1,!1),a.lineTo(m,n);var t=this._settings.color.call(this,b[s]);a.fillStyle=t,a.fill(),this._settings.pieInnerText&&this._drawSectorLabel(m,n,5*i/6,o,alpha1,e,this._settings.pieInnerText(b[s],k),!0),this._settings.label&&this._drawSectorLabel(m,n,i+this._settings.labelOffset,o,alpha1,e,this._settings.label(b[s])),1!=e&&(this._createLowerSector(a,m,n,o,alpha1,i,!0),a.fillStyle="#000000",a.globalAlpha=.2,this._createLowerSector(a,m,n,o,alpha1,i,!1),a.globalAlpha=1,a.fillStyle=t),f.addSector(b[s].id,o,alpha1,m-c.x,n-c.y/e,i,e,g),o=alpha1}a.globalAlpha=.8;var u;for(s=0;s<p.length;s++)u=this._getPositionByAngle(p[s],m,n,i),this._drawLine(a,m,n,u.x,u.y,this._settings.lineColor.call(this,b[s]),2);1==e&&(a.lineWidth=2,a.strokeStyle="#ffffff",a.beginPath(),a.arc(m,n,i+1,0,2*Math.PI,!1),a.stroke()),a.globalAlpha=1,a.scale(1,1/e)}}},_getValues:function(a){for(var b=[],c=0;c<a.length;c++)b.push(parseFloat(this._settings.value(a[c])||0));return b},_getTotalValue:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},_getRatios:function(a,b){var c,d=[],e=0;b=b||this._getTotalValue(a);for(var f=0;f<a.length;f++)c=a[f],d[f]=2*Math.PI*(b?(c+e)/b:1/a.length),e+=c;return d},_getPieParameters:function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.x+c/2,f=a.y+d/2,g=Math.min(c/2,d/2);return{x:e,y:f,radius:g}},_createLowerSector:function(a,b,c,d,e,f,g){if(a.lineWidth=1,0>=d&&e>=0||d>=0&&e<=Math.PI||Math.abs(d-Math.PI)>.003&&d<=Math.PI&&e>=Math.PI){0>=d&&e>=0&&(d=0,g=!1,this._drawSectorLine(a,b,c,f,d,e)),d<=Math.PI&&e>=Math.PI&&(e=Math.PI,g=!1,this._drawSectorLine(a,b,c,f,d,e));var h=(this._settings.height||Math.floor(f/4))/this._settings.cant;a.beginPath(),a.arc(b,c,f,d,e,!1),a.lineTo(b+f*Math.cos(e),c+f*Math.sin(e)+h),a.arc(b,c+h,f,e,d,!0),a.lineTo(b+f*Math.cos(d),c+f*Math.sin(d)),a.fill(),g&&a.stroke()}},_drawSectorLine:function(a,b,c,d,e,f){a.beginPath(),a.arc(b,c,d,e,f,!1),a.stroke()},_addShadow:function(a,b,c,d){a.globalAlpha=.5;for(var e=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],f=e.length-1;f>-1;f--)a.beginPath(),a.fillStyle=e[f],a.arc(b+1,c+1,d+f,0,2*Math.PI,!0),a.fill();a.globalAlpha=1},_getGrayGradient:function(a){return a.addColorStop(0,"#ffffff"),a.addColorStop(.7,"#7a7a7a"),a.addColorStop(1,"#000000"),a},_showRadialGradient:function(a,b,c,d,e,f){a.beginPath();var g;"function"!=typeof this._settings.gradient?(g=a.createRadialGradient(e,f,d/4,b,c,d),g=this._getGrayGradient(g)):g=this._settings.gradient(g),a.fillStyle=g,a.arc(b,c,d,0,2*Math.PI,!0),a.fill(),a.globalAlpha=.7},_drawSectorLabel:function(a,b,c,d,e,f,g,h){var i=this.canvases[0].renderText(0,0,g,0,1);if(i){var j=i.scrollWidth;i.style.width=j+"px",j>a&&(j=a);var k=.2>e-d?4:8;h&&(k=j/1.8);var l=d+(e-d)/2;c-=(k-8)/2;var m=-k,n=-8,o="right";(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(m=-j-m+1,o="left");var p=0;!h&&1>f&&l>0&&l<Math.PI&&(p=(this._settings.height||Math.floor(c/4))/f);var q=(b+Math.floor((c+p)*Math.sin(l)))*f+n,r=a+Math.floor((c+k/2)*Math.cos(l))+m,s=e<Math.PI/2+.01,t=d<Math.PI/2;t&&s?r=Math.max(r,a+3):t||s?!h&&(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(r+=j/3):r=Math.min(r,a-j),i.style.top=q+"px",i.style.left=r+"px",i.style.width=j+"px",i.style.textAlign=o,i.style.whiteSpace="nowrap"}}},dhtmlx.chart.pie3D={pvt_render_pie3D:function(a,b,c,d,e,f){this._renderPie(a,b,c,d,this._settings.cant,f)}},dhtmlx.chart.donut={pvt_render_donut:function(a,b,c,d,e,f){if(b.length){this._renderPie(a,b,c,d,1,f);var g=this._settings,h=this._getPieParameters(c,d),i=g.radius?g.radius:h.radius,j=g.innerRadius&&g.innerRadius<i?g.innerRadius:i/3,k=g.x?g.x:h.x,l=g.y?g.y:h.y;a.fillStyle="#ffffff",a.beginPath(),a.arc(k,l,j,0,2*Math.PI,!0),a.fill()}}},dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(a){return this._grid=a,a},getRecords:function(a){return a.rowsBuffer},getDetails:function(a){for(var b={},c=0;c<this._grid.getColumnsNum();c++)b["data"+c]=this._grid[this._grid_getter](a,c);return b},getInfo:function(){return{_size:0,_from:0}}},dhtmlx.ui.Canvas=function(a,b,c){this._canvas_labels=[],this._canvas_name=b,this._obj=a;var d=a.offsetWidth*(window.devicePixelRatio||1),e=a.offsetHeight*(window.devicePixelRatio||1),c=c||"";c+=";width:"+a.offsetWidth+"px;height:"+a.offsetHeight+"px;",this._prepareCanvas(b,c,d,e)},dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(a,b,c,d){return this._canvas=dhtmlx.html.create("canvas",{width:c,height:d,canvas_id:a,style:b||""}),this._obj.appendChild(this._canvas),this._canvas.getContext||(dhtmlx._isIE?(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):dhtmlx.error("Canvas is not supported in the current browser")),this._canvas},getCanvas:function(a){var b=(this._canvas||this._prepareCanvas()).getContext(a||"2d");return this._webixDevicePixelRatio||(this._webixDevicePixelRatio=!0,b.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),b},_resizeCanvas:function(){if(this._canvas){var a=this._canvas.parentNode.offsetWidth,b=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",a*(window.devicePixelRatio||1)),this._canvas.setAttribute("height",b*(window.devicePixelRatio||1)),this._canvas.style.width=a+"px",this._canvas.style.height=b+"px",this._webixDevicePixelRatio=!1}},renderText:function(a,b,c,d,e){if(c){var f=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(d?" "+d:""),style:"left:"+a+"px; top:"+b+"px;"},c);return this._obj.appendChild(f),this._canvas_labels.push(f),e&&(f.style.width=e+"px"),f}},renderTextAt:function(a,b,c,d,e,f,g){var h=this.renderText.call(this,c,d,e,f,g);return h&&(a&&(h.style.top="middle"==a?parseInt(d-h.offsetHeight/2,10)+"px":d-h.offsetHeight+"px"),b&&(h.style.left="left"==b?c-h.offsetWidth+"px":parseInt(c-h.offsetWidth/2,10)+"px")),h},clearCanvas:function(a){var b,c=[];for(b=0;b<this._canvas_labels.length;b++)this._obj.removeChild(this._canvas_labels[b]);if(this._canvas_labels=[],!a&&this._obj._htmlmap){for(c=this._getMapAreas();c.length;)c[0].parentNode.removeChild(c[0]),c.splice(0,1);c=null,this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._obj.offsetWidth*(window.devicePixelRatio||1),this._obj.offsetWidth*(window.devicePixelRatio||1))},toggleCanvas:function(){this._toggleCanvas("none"==this._canvas.style.display)},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(a){var b,c;for(c=0;c<this._canvas_labels.length;c++)this._canvas_labels[c].style.display=a?"":"none";if(this._obj._htmlmap)for(b=this._getMapAreas(),c=0;c<b.length;c++)a?b[c].removeAttribute("disabled"):b[c].setAttribute("disabled","true");this._canvas.style.display=a?"":"none"},_getMapAreas:function(){var a,b,c=[];for(a=this._obj._htmlmap.getElementsByTagName("AREA"),b=0;b<a.length;b++)a[b].getAttribute("userdata")==this._canvas_name&&c.push(a[b]);return c}},dhtmlXChart=function(a){this.name="Chart",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_chart"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),this.data.provideApi(this,!0),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.Destruction),dhtmlx.extend(this,dhtmlx.Group),dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var b in dhtmlx.chart)dhtmlx.extend(this,dhtmlx.chart[b]);a.preset&&this.definePreset(a),this._parseSettings(a,this.defaults),this._series=[this._settings],this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this)),this.attachEvent("onLocateData",this._switchSerie)},dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(a,b,c){var d=c.getAttribute("series_id");if(this.callEvent("onLegendClick",[a,d,c])){var e=this._settings,f=e.legend.values,g=f&&"undefined"!=typeof f[d].toggle?f[d].toggle:e.legend.toggle;"undefined"!=typeof d&&this._series.length>1&&g&&(-1!=c.className.indexOf("hidden")?this.showSeries(d):this.hideSeries(d))}}},on_dblclick:{},on_mouse_move:{},bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var a in this.canvases)this.canvases[a]._resizeCanvas();this.render()},view_setter:function(a){return dhtmlx.chart[a]||dhtmlx.error("Chart type extension is not loaded: "+a),"undefined"==typeof this._settings.offset&&(this._settings.offset=!("area"==a||"stackedArea"==a)),"radar"!=a||this._settings.yAxis||this.define("yAxis",{}),"scatter"==a&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{})),a},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var a in this.canvases)this.canvases[a].clearCanvas()},render:function(){var a,b,c,d,e;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(b in this.canvases)this.canvases[b].clearCanvas();else this.canvases={};for(this._settings.legend&&(this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")),this._drawLegend(this.data.getRange(),this._obj.offsetWidth)),a=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight),d=new dhtmlx.ui.Map(this._id),e=this._settings,c=this._getChartData(),b=0;b<this._series.length;b++)this._settings=this._series[b],this.canvases[b]||(this.canvases[b]=new dhtmlx.ui.Canvas(this._obj,b,"z-index:"+(2+b))),this["pvt_render_"+this._settings.view](this.canvases[b].getCanvas(),c,a.start,a.end,b,d);d.render(this._obj),this._obj.lastChild.style.zIndex=1e3,this._applyBounds(this._obj.lastChild,a),this.callEvent("onAfterRender",[]),this._settings=e}},_applyBounds:function(a,b){var c={};c.left=b.start.x,c.top=b.start.y,c.width=b.end.x-b.start.x,c.height=b.end.y-b.start.y;for(var d in c)a.style[d]=c[d]+"px"},_getChartData:function(){var a,b,c,d,e,f,g,h,i,j;if(d=this.data.getRange(),a=-1!=this._settings.view.toLowerCase().indexOf("barh")?"yAxis":"xAxis",b=this._settings[a],b&&b.units&&"object"==typeof b.units){if(c=b.units,h=[],"undefined"!=typeof c.start&&"undefined"!=typeof c.end&&"undefined"!=typeof c.next)for(g=c.start;g<=c.end;)h.push(g),g=c.next.call(this,g);else"[object Array]"===Object.prototype.toString.call(c)&&(h=c);if(f=[],h.length){for(i=b.value,j={},e=0;e<d.length;e++)j[i(d[e])]=e;for(e=0;e<h.length;e++)"undefined"!=typeof j[h[e]]?(d[j[h[e]]].$unit=h[e],f.push(d[j[h[e]]])):f.push({$unit:h[e]})}return f}return d},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(a){this.define("value",a)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(a){return"function"!=typeof a&&a&&a===!0&&(a="light"),a},colormap:{RAINBOW:function(a){var b=Math.floor(this.indexById(a.id)/this.dataCount()*1536);return 1536==b&&(b-=1),this._rainbow[Math.floor(b/256)](b%256)}},color_setter:function(a){return this.colormap[a]||dhtmlx.Template.obj_setter(a)},fill_setter:function(a){return a&&0!=a?dhtmlx.Template.obj_setter(a):!1},definePreset:function(a){this.define("preset",a.preset),delete a.preset},preset_setter:function(a){var b,c,d;if(this.defaults=dhtmlx.extend({},this.defaults),"object"==typeof dhtmlx.presets.chart[a]){d=dhtmlx.presets.chart[a];for(b in d)if("object"==typeof d[b])if(this.defaults[b]&&"object"==typeof this.defaults[b]){this.defaults[b]=dhtmlx.extend({},this.defaults[b]);for(c in d[b])this.defaults[b][c]=d[b][c]}else this.defaults[b]=dhtmlx.extend({},d[b]);else this.defaults[b]=d[b];return a}return!1},legend_setter:function(a){return a?("object"!=typeof a&&(a={template:a}),this._mergeSettings(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this._settings.view.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),a.template=dhtmlx.Template.setter(a.template),a):(this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),!1)},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(a){"object"!=typeof a&&(a={color:a,borderColor:a}),this._mergeSettings(a,dhtmlx.extend({},this.defaults.item));for(var b=["alpha","borderColor","color","radius"],c=0;c<b.length;c++)a[b[c]]=dhtmlx.Template.setter(a[b[c]]);return a},line_setter:function(a){return"object"!=typeof a&&(a={color:a}),dhtmlx.extend(this.defaults.line,a),a=dhtmlx.extend({},this.defaults.line),a.color=dhtmlx.Template.setter(a.color),a},padding_setter:function(a){return"object"!=typeof a&&(a={left:a,right:a,top:a,bottom:a}),this._mergeSettings(a,{left:50,right:20,top:35,bottom:40}),a},xAxis_setter:function(a){if(!a)return!1;"object"!=typeof a&&(a={template:a}),a.value||(a.value=a.template),this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});var b=["lineColor","template","lines","value"];return this._converToTemplate(b,a),this._configXAxis=dhtmlx.extend({},a),a},yAxis_setter:function(a){this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var b=["lineColor","template","lines","bg"];return this._converToTemplate(b,a),this._configYAxis=dhtmlx.extend({},a),a},_converToTemplate:function(a,b){for(var c=0;c<a.length;c++)b[a[c]]=dhtmlx.Template.setter(b[a[c]])},_drawScales:function(a,b,c,d,e,f){var g=0;return this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),g=this._drawYAxis(this.canvases.y.getCanvas(),a,b,c,d,e)),this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this._drawXAxis(this.canvases.x.getCanvas(),a,b,c,f,g)),g},_drawXAxis:function(a,b,c,d,e,f){for(var g,h=c.x-.5,i=parseInt(f?f:d.y,10)+.5,j=d.x,k=!0,l=0;l<b.length;l++){this._settings.offset===!0?g=h+e/2+l*e:(g=l==b.length-1?d.x:h+l*e,k=!!l),g=Math.ceil(g)-.5;var m="auto"!=this._settings.origin&&"bar"==this._settings.view&&parseFloat(this._settings.value(b[l]))<this._settings.origin;this._drawXAxisLabel(g,i,b[l],k,m),(this._settings.offset||l)&&this._settings.xAxis.lines.call(this,b[l])&&this._drawXAxisLine(a,g,d.y,c.y,b[l])}this.canvases.x.renderTextAt(!0,!1,h,d.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",d.x-c.x),this._drawLine(a,h,i,j,i,this._settings.xAxis.color,1),this._settings.xAxis.lines.call(this,{})&&this._settings.offset&&this._drawLine(a,j+.5,d.y,j+.5,c.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(a,b,c,d,e,f){var g,h={};if(this._settings.yAxis){var i=c.x-.5,j=d.y,k=c.y,l=d.y;this._settings.yAxis.step&&(g=parseFloat(this._settings.yAxis.step)),("undefined"==typeof this._configYAxis.step||"undefined"==typeof this._configYAxis.start||"undefined"==typeof this._configYAxis.end)&&(h=this._calculateScale(e,f),e=h.start,f=h.end,g=h.step,this._settings.yAxis.end=f,this._settings.yAxis.start=e),this._setYAxisTitle(c,d),0===g&&(f=e,g=1);for(var m=f==e?j-k:(j-k)*g/(f-e),n=0,o=e;f>=o;o+=g){h.fixNum&&(o=parseFloat(new Number(o).toFixed(h.fixNum)));var p=Math.floor(j-n*m)+.5;o==e&&"auto"==this._settings.origin||!this._settings.yAxis.lines.call(this,o)||this._drawLine(a,i,p,d.x,p,this._settings.yAxis.lineColor.call(this,o),1),o==this._settings.origin&&(l=p);var q=o;if(1>g){var r=Math.min(this._log10(g),0>=e?0:this._log10(e)),s=Math.pow(10,-r);q=Math.round(o*s)/s,o=q}this.canvases.y.renderText(0,p-5,this._settings.yAxis.template(q.toString()),"dhx_axis_item_y",c.x-5),n++}return this._drawLine(a,i,j+1,i,k,this._settings.yAxis.color,1),l}},_setYAxisTitle:function(a,b){var c="dhx_axis_title_y"+(dhtmlx._isIE&&9!=dhtmlx._isIE?" dhx_ie_filter":""),d=this.canvases.y.renderTextAt("middle",!1,0,parseInt((b.y-a.y)/2+a.y,10),this._settings.yAxis.title,c);d&&(d.style.left=(dhtmlx.env.transform?(d.offsetHeight-d.offsetWidth)/2:0)+"px")},_calculateScale:function(a,b){"auto"!=this._settings.origin&&this._settings.origin<a&&(a=this._settings.origin);var c,d,e;c=(b-a)/8||1;var f=Math.floor(this._log10(c)),g=Math.pow(10,f),h=c/g;if(h=h>5?10:5,c=parseInt(h,10)*g,c>Math.abs(a))d=0>a?-c:0;else{var i=Math.abs(a),j=Math.floor(this._log10(i)),k=i/Math.pow(10,j);for(d=Math.ceil(10*k)/10*Math.pow(10,j)-c,i>1&&c>.1&&(d=Math.ceil(d));0>a?a>=d:d>=a;)d-=c;0>a&&(d=-d-2*c)}for(e=d;b>e;)e+=c,e=parseFloat(new Number(e).toFixed(Math.abs(f)));return{start:d,end:e,step:c,fixNum:Math.abs(f)}},_getLimits:function(a,b){var c,d,e=arguments.length&&"h"==a?this._configXAxis:this._configYAxis;if(b=b||"value",e&&"undefined"!=typeof e.end&&"undefined"!=typeof e.start&&e.step)c=parseFloat(e.end),d=parseFloat(e.start);else if(c=this.max(this._series[0][b]),d=e&&"undefined"!=typeof e.start?parseFloat(e.start):this.min(this._series[0][b]),this._series.length>1)for(var f=1;f<this._series.length;f++){var g=this.max(this._series[f][b]),h=this.min(this._series[f][b]);g>c&&(c=g),d>h&&(d=h)}return{max:c,min:d}},_log10:function(a){var b="log";return Math.floor(Math[b](a)/Math.LN10)},_drawXAxisLabel:function(a,b,c,d,e){if(this._settings.xAxis){var f=this.canvases.x.renderTextAt(e,d,a,b-(e?2:0),this._settings.xAxis.template(c));f&&(f.className+=" dhx_axis_item_x")}},_drawXAxisLine:function(a,b,c,d,e){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(a,b,c,b,d,this._settings.xAxis.lineColor.call(this,e),1)},_drawLine:function(a,b,c,d,e,f,g){a.strokeStyle=f,a.lineWidth=g,a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke(),a.lineWidth=1},_getRelativeValue:function(a,b){var c,d=1;return c=b!=a?b-a:a,[c,d]},_rainbow:[function(a){return"#FF"+dhtmlx.math.toHex(a/2,2)+"00"},function(a){return"#FF"+dhtmlx.math.toHex(a/2+128,2)+"00"},function(a){return"#"+dhtmlx.math.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+dhtmlx.math.toHex(a,2)},function(a){return"#00"+dhtmlx.math.toHex(255-a,2)+"FF"},function(a){return"#"+dhtmlx.math.toHex(a,2)+"00FF"}],addSeries:function(a){var b=this._settings;this._settings=dhtmlx.extend({},b),this._parseSettings(a,{}),this._series.push(this._settings),this._settings=b},_switchSerie:function(a,b){var c;if(this._active_serie=b.getAttribute("userdata"),this._series[this._active_serie]){for(var d=0;d<this._series.length;d++)c=this._series[d].tooltip,c&&c.disable();b.getAttribute("disabled")||(c=this._series[this._active_serie].tooltip,c&&c.enable())}},hideSeries:function(a){this.canvases[a].hideCanvas(),this._settings.legend.values&&this._settings.legend.values[a]&&(this._settings.legend.values[a].$hidden=!0),this._drawLegend()},showSeries:function(a){this.canvases[a].showCanvas(),this._settings.legend.values&&this._settings.legend.values[a]&&delete this._settings.legend.values[a].$hidden,this._drawLegend()},_setBorderStyles:function(a,b){var c,d;d=dhtmlx.math.toRgb(b),c=dhtmlx.math.rgbToHsv(d[0],d[1],d[2]),c[2]/=2,b="rgb("+dhtmlx.math.hsvToRgb(c[0],c[1],c[2])+")",a.strokeStyle=b,1==a.globalAlpha&&(a.globalAlpha=.9)},_drawLegend:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=0,o=0;if(a=a||[],b=b||this._obj.offsetWidth,j=this.canvases.legend.getCanvas(),d=this._settings.legend,i="x"!=this._settings.legend.layout?"width:"+d.width+"px":"",this.legendObj&&(this.legendObj.innerHTML="",this.legendObj.parentNode.removeChild(this.legendObj)),this.canvases.legend.clearCanvas(!0),e=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+n+"px; top:"+o+"px;"+i},""),d.padding&&(e.style.padding=d.padding+"px"),this.legendObj=e,this._obj.appendChild(e),g=[],d.values)for(c=0;c<d.values.length;c++)g.push(this._drawLegendText(e,d.values[c].text,"undefined"!=typeof d.values[c].id?typeof d.values[c].id:c,d.values[c].$hidden));
else for(c=0;c<a.length;c++)g.push(this._drawLegendText(e,d.template(a[c])));for(h=e.offsetWidth,f=e.offsetHeight,h<this._obj.offsetWidth&&("x"==d.layout&&"center"==d.align&&(n=(this._obj.offsetWidth-h)/2),"right"==d.align&&(n=this._obj.offsetWidth-h),d.margin&&"center"!=d.align&&(n+=("left"==d.align?1:-1)*d.margin)),f<this._obj.offsetHeight&&("middle"==d.valign&&"center"!=d.align&&"x"!=d.layout?o=(this._obj.offsetHeight-f)/2:"bottom"==d.valign&&(o=this._obj.offsetHeight-f),d.margin&&"middle"!=d.valign&&(o+=("top"==d.valign?1:-1)*d.margin)),e.style.left=n+"px",e.style.top=o+"px",j.save(),c=0;c<g.length;c++)m=g[c],d.values&&d.values[c].$hidden?(l=!0,k=d.values[c].disableColor?d.values[c].disableColor:"#d9d9d9"):(l=!1,k=d.values?d.values[c].color:this._settings.color.call(this,a[c])),this._drawLegendMarker(j,m.offsetLeft+n,m.offsetTop+o,k,m.offsetHeight,l,c);j.restore(),g=null},_drawLegendText:function(a,b,c,d){var e="";"x"==this._settings.legend.layout&&(e="float:left;");var f=dhtmlx.html.create("DIV",{style:e+"padding-left:"+(10+this._settings.legend.marker.width)+"px","class":"dhx_chart_legend_item"+(d?" hidden":"")},b);return arguments.length>2&&f.setAttribute("series_id",c),a.appendChild(f),f},_drawLegendMarker:function(a,b,c,d,e,f,g){var h=[],i=this._settings.legend.marker,j=this._settings.legend.values,k=j&&j[g].markerType?j[g].markerType:i.type;if(d&&(a.fillStyle=d,a.strokeStyle=this._getDarkenColor(d,.75)),a.beginPath(),"round"!=k&&i.radius)if("item"==k){if(this._settings.line&&"scatter"!=this._settings.view&&!this._settings.disableLines){a.beginPath(),a.lineWidth=this._series[g].line.width,a.strokeStyle=f?d:this._series[g].line.color.call(this,{});var l=b+5,m=c+e/2;a.moveTo(l,m);var n=l+i.width;a.lineTo(n,m),a.stroke()}var o=this._series[g].item,p=parseInt(o.radius.call(this,{}),10)||0;p&&(a.beginPath(),f?(a.lineWidth=o.borderWidth,a.strokeStyle=d,a.fillStyle=d):(a.lineWidth=o.borderWidth,a.fillStyle=o.color.call(this,{}),a.strokeStyle=o.borderColor.call(this,{}),a.globalAlpha=o.alpha.call(this,{})),a.beginPath(),b+=i.width/2+5,c+=e/2,this._strokeChartItem(a,b,c,p+1,o.type),a.fill(),a.stroke()),a.globalAlpha=1}else a.lineWidth=1,b+=5,c+=parseInt(e/2-i.height/2,10),h=[[b+i.radius,c+i.radius,i.radius,Math.PI,3*Math.PI/2,!1],[b+i.width-i.radius,c],[b+i.width-i.radius,c+i.radius,i.radius,-Math.PI/2,0,!1],[b+i.width,c+i.height-i.radius],[b+i.width-i.radius,c+i.height-i.radius,i.radius,0,Math.PI/2,!1],[b+i.radius,c+i.height],[b+i.radius,c+i.height-i.radius,i.radius,Math.PI/2,Math.PI,!1],[b,c+i.radius]],this._path(a,h);else{a.lineWidth=i.height,a.lineCap=k,b+=a.lineWidth/2+5,c+=e/2,a.moveTo(b,c);var n=b+i.width-i.height+1;a.lineTo(n,c)}a.stroke(),a.fill()},_getDarkenColor:function(a,b){var c,d;return d=dhtmlx.math.toRgb(a),c=dhtmlx.math.rgbToHsv(d[0],d[1],d[2]),c[2]=c[2]*b,"rgb("+dhtmlx.math.hsvToRgb(c[0],c[1],c[2])+")"},_getChartBounds:function(a,b){var c,d,e,f;if(c=this._settings.padding.left,d=this._settings.padding.top,e=a-this._settings.padding.right,f=b-this._settings.padding.bottom,this._settings.legend){var g=this._settings.legend,h=this._settings.legend.width,i=this._settings.legend.height;"x"==g.layout?"center"==g.valign?"right"==g.align?e-=h:"left"==g.align&&(c+=h):"bottom"==g.valign?f-=i:d+=i:"right"==g.align?e-=h:"left"==g.align&&(c+=h)}return{start:{x:c,y:d},end:{x:e,y:f}}},_getStackedLimits:function(a){var b,c,d,e,f;if(this._settings.yAxis&&"undefined"!=typeof this._settings.yAxis.end&&"undefined"!=typeof this._settings.yAxis.start&&this._settings.yAxis.step)d=parseFloat(this._settings.yAxis.end),e=parseFloat(this._settings.yAxis.start);else{for(b=0;b<a.length;b++)for(a[b].$sum=0,a[b].$min=1/0,c=0;c<this._series.length;c++)f=parseFloat(this._series[c].value(a[b])||0),isNaN(f)||(-1!=this._series[c].view.toLowerCase().indexOf("stacked")&&(a[b].$sum+=f),f<a[b].$min&&(a[b].$min=f));for(d=-1/0,e=1/0,b=0;b<a.length;b++)a[b].$sum>d&&(d=a[b].$sum),a[b].$min<e&&(e=a[b].$min);e>0&&(e=0)}return{max:d,min:e}},_setBarGradient:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;return"light"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),n=[[0,"#FFFFFF"],[.9,g],[1,g]],j=2):"falling"==f||"rising"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),k=dhtmlx.math.toRgb(g),l=dhtmlx.math.rgbToHsv(k[0],k[1],k[2]),l[1]*=.5,m="rgb("+dhtmlx.math.hsvToRgb(l[0],l[1],l[2])+")","falling"==f?n=[[0,m],[.7,g],[1,g]]:"rising"==f&&(n=[[0,g],[.3,g],[1,m]]),j=0):(a.globalAlpha=.37,j=0,i="x"==h?a.createLinearGradient(b,e,b,c):a.createLinearGradient(b,c,d,c),n=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this._gradient(i,n),{gradient:i,offset:j}},_getPositionByAngle:function(a,b,c,d){return a*=-1,b+=Math.cos(a)*d,c-=Math.sin(a)*d,{x:b,y:c}},_gradient:function(a,b){for(var c=0;c<b.length;c++)a.addColorStop(b[c][0],b[c][1])},_path:function(a,b){var c,d;for(c=0;c<b.length;c++)d=c?"lineTo":"moveTo",b[c].length>2&&(d="arc"),a[d].apply(a,b[c])},_circle:function(a,b,c,d){a.arc(b,c,d,2*Math.PI,!0)},_addMapRect:function(a,b,c,d,e){a.addRect(b,[c[0].x-d.x,c[0].y-d.y,c[1].x-d.x,c[1].y-d.y],e)}},dhtmlx.compat("layout"),dhtmlx.ui.pager=function(a){this.name="Pager",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_pager"),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.SingleRender),dhtmlx.extend(this,dhtmlx.MouseEvents),this._parseSettings(a,{size:10,page:-1,group:5,count:0,type:"default"}),this.data=this._settings,this.refresh()},dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(a,b){this.select(b)}},select:function(a){switch(a){case"next":a=this._settings.page+1;break;case"prev":a=this._settings.page-1;break;case"first":a=0;break;case"last":a=this._settings.limit-1}0>a&&(a=0),a>=this.data.limit&&(a=this.data.limit-1),this.callEvent("onBeforePageChange",[this._settings.page,a])&&(this.data.page=1*a,this.refresh(),this.callEvent("onAfterPageChange",[a]))},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(a){var b="";if(-1==a.page)return"";a.min=a.page-Math.round((a.group-1)/2),a.max=a.min+a.group-1,a.min<0&&(a.max+=-1*a.min,a.min=0),a.max>=a.limit&&(a.min-=Math.min(a.min,a.max-a.limit+1),a.max=a.limit-1);for(var c=a.min||0;c<=a.max;c++)b+=this.button({id:c,index:c+1,selected:c==a.page?"_selected":""});return b},page:function(a){return a.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var a=this._settings;a.limit=Math.ceil(a.count/a.size),a.limit&&a.limit!=a.old_limit&&(a.page=Math.min(a.limit-1,a.page));var b=a.page;(-1!=b&&b!=a.old_page||a.limit!=a.old_limit)&&(this.render(),this.callEvent("onRefresh",[]),a.old_limit=a.limit,a.old_page=a.page)},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.DataProcessor={_dp_init:function(a){var b="_methods";a[b]=["setItemStyle","","changeId","remove"],this.attachEvent("onAfterAdd",function(b){a.setUpdated(b,!0,"inserted")}),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(a,b){a.getUserData&&a.getUserData(b,this._userdata)},this)),this.attachEvent("onBeforeDelete",function(b){if(a._silent_mode)return!0;var c=a.getState(b);return"inserted"==c?(a.setUpdated(b,!1),!0):"deleted"==c?!1:"true_deleted"==c?!0:(a.setUpdated(b,!0,"deleted"),!1)}),this.attachEvent("onAfterEditStop",function(b){a.setUpdated(b,!0,"updated")}),this.attachEvent("onBindUpdate",function(b){window.setTimeout(function(){a.setUpdated(b.id,!0,"updated")},1)}),b="_getRowData",a[b]=function(a){var b=this.obj.data.get(a),c={};for(var d in b)0!==d.indexOf("_")&&(c[d]=b[d]);return c},b="_clearUpdateFlag",a[b]=function(){},this._userdata={},a.attachEvent("insertCallback",this._dp_callback),a.attachEvent("updateCallback",this._dp_callback),a.attachEvent("deleteCallback",function(a,b){this.obj.setUserData(b,this.action_param,"true_deleted"),this.obj.remove(b)}),dhtmlx.compat("dataProcessor",a)},_dp_callback:function(a,b){this.obj.data.set(b,dhtmlx.DataDriver.xml.getDetails(a.firstChild)),this.obj.data.refresh(b)},setItemStyle:function(a,b){var c=this._locateHTML(a);c&&(c.style.cssText+=";"+b)},changeId:function(a,b){this.data.changeId(a,b),this.refresh()},setUserData:function(a,b,c){a?this.data.get(a)[b]=c:this._userdata[b]=c},getUserData:function(a,b){return a?this.data.get(a)[b]:this._userdata[b]}},function(){var a="_dp_init";dhtmlx.DataProcessor[a]=dhtmlx.DataProcessor._dp_init}(),dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var a="_dragged",b=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(a,c,d){if(b.apply(this,arguments),!d){var e=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};e.from||(e.from=this.dragStartObject),dhtmlx.DragControl._checkLand(a,c,!0)}};var c=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(a,b,e){e||dhtmlx.DragControl._last&&(dhtmlx.DragControl._active=d.dragStartNode,dhtmlx.DragControl._stopDrag(a,!0)),c.apply(this,arguments)};var d=new dhtmlDragAndDropObject,e=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){e.apply(this,arguments);var b=dhtmlx.DragControl._drag_context;if(b){for(var c=[],f=[],g=0;g<b.source.length;g++)c[g]={idd:b.source[g]},f.push(b.source[g]);d.dragStartNode={parentNode:{},parentObject:{idd:c,id:1==f.length?f[0]:f,treeNod:{object:b.from}}},d.dragStartNode.parentObject.treeNod[a]=c,d.dragStartObject=b.from}};var f=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(a,b,c){f.apply(this,arguments),this._last||c||(a=d.checkLanding(a,b,!0))};var g=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(a,b){g.apply(this,arguments),d.lastLanding&&!b&&d.stopDrag(a,!1,!0)};var h=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(b){var c=null;if(b&&(c=h.apply(this,arguments)),!c){c=d.dragStartObject;for(var e=[],f=c[a],g=0;g<f.length;g++)e.push(f[g].idd||f[g].id);dhtmlx.DragControl._drag_context.source=e}return c}}},dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(a,b,c,d){var e=this.get(a);return e?(c&&(dhtmlx.assert(c.externalData,"DataMove :: External object doesn't support operation"),e=c.externalData(e)),c=c||this,c.add(c.externalData(e,d),b)):void dhtmlx.log("Warning","Incorrect ID in DataMove::copy")},move:function(a,b,c,d){if(!(a instanceof Array)){if(nid=a,0>b)return void dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");var e=this.get(a);return e?(c&&c!=this?(dhtmlx.assert(c.externalData,"DataMove :: External object doesn't support operation"),nid=c.add(c.externalData(e,d),b),this.remove(a)):this.data.move(this.indexById(a),b),nid):void dhtmlx.log("Warning","Incorrect ID in DataMove::move")}for(var f=0;f<a.length;f++){var g=(c||this).indexById(this.move(a[f],b,c,dhtmlx.uid()));a[f+1]&&(b=g+(this.indexById(a[f+1])<g?0:1))}},moveUp:function(a,b){return this.move(a,this.indexById(a)-(b||1))},moveDown:function(a,b){return this.moveUp(a,-1*(b||1))},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.dataCount()-1)},externalData:function(a,b){var c=dhtmlx.extend({},a);return c.id=b||dhtmlx.uid(),c.$selected=c.$template=null,c}},dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(a,b,c){a=dhtmlx.toNode(a),a.dhx_drop=this._getCtrl(b),c&&(a.dhx_master=!0)},_getCtrl:function(a){a=a||dhtmlx.DragControl;var b=this._drag_masters.find(a);return 0>b&&(b=this._drag_masters.length,this._drag_masters.push(a)),b},addDrag:function(a,b){a=dhtmlx.toNode(a),a.dhx_drag=this._getCtrl(b),dhtmlx.event(a,"mousedown",this._preStart,a)},_preStart:function(a){return dhtmlx.DragControl._active&&(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.destroyDrag()),dhtmlx.DragControl._active=this,dhtmlx.DragControl._start_pos={x:a.pageX,y:a.pageY},dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse),a.cancelBubble=!0,!1},_preStartFalse:function(){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(a){var b={x:a.pageX,y:a.pageY};Math.abs(b.x-dhtmlx.DragControl._start_pos.x)<5&&Math.abs(b.y-dhtmlx.DragControl._start_pos.y)<5||(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.createDrag(a)&&(dhtmlx.DragControl.sendSignal("start"),dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag),dhtmlx.DragControl._moveDrag(a)))},_stopDrag:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._last&&(dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,a),dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,a)),dhtmlx.DragControl.destroyDrag(),dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(a){var b=dhtmlx.html.pos(a);return dhtmlx.DragControl._html.style.top=b.y+dhtmlx.DragControl.top+"px",dhtmlx.DragControl._html.style.left=b.x+dhtmlx.DragControl.left+"px",dhtmlx.DragControl._skip?dhtmlx.DragControl._skip=!1:dhtmlx.DragControl._checkLand(a.srcElement||a.target,a),a.cancelBubble=!0,!1},_checkLand:function(a,b){for(;a&&"BODY"!=a.tagName;){if(a.dhx_drop){if(this._last&&(this._last!=a||a.dhx_master)&&this.onDragOut(this._active,this._last,a,b),!this._last||this._last!=a||a.dhx_master)return this._last=null,this._landing=this.onDragIn(dhtmlx.DragControl._active,a,b),void(this._landing&&(this._last=a));return}a=a.parentNode}this._last&&(this._last=this._landing=this.onDragOut(this._active,this._last,null,b))},sendSignal:function(a){dhtmlx.DragControl.active="start"==a},getMaster:function(a){return this._drag_masters[a.dhx_drag||a.dhx_drop]},getContext:function(){return this._drag_context},createDrag:function(a){var b,c=dhtmlx.DragControl._active,d=this._drag_masters[c.dhx_drag];if(d.onDragCreate)b=d.onDragCreate(c,a),b.style.position="absolute",b.style.zIndex=dhtmlx.zIndex.drag,b.onmousemove=dhtmlx.DragControl._skip_mark;else{var e=dhtmlx.DragControl.onDrag(c,a);if(!e)return!1;var b=document.createElement("DIV");b.innerHTML=e,b.className="dhx_drag_zone",b.onmousemove=dhtmlx.DragControl._skip_mark,document.body.appendChild(b)}return dhtmlx.DragControl._html=b,!0},_skip_mark:function(){dhtmlx.DragControl._skip=!0},destroyDrag:function(){var a=dhtmlx.DragControl._active,b=this._drag_masters[a.dhx_drag];b&&b.onDragDestroy?b.onDragDestroy(a,dhtmlx.DragControl._html):dhtmlx.html.remove(dhtmlx.DragControl._html),dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(a,b,c){var d=this._drag_masters[b.dhx_drop];return d.onDragIn&&d!=this?d.onDragIn(a,b,c):(b.className=b.className+" dhx_drop_zone",b)},onDragOut:function(a,b,c,d){var e=this._drag_masters[b.dhx_drop];return e.onDragOut&&e!=this?e.onDragOut(a,b,c,d):(b.className=b.className.replace("dhx_drop_zone",""),null)},onDrop:function(a,b,c,d){var e=this._drag_masters[b.dhx_drop];return dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(a),e.onDrop&&e!=this?e.onDrop(a,b,c,d):void b.appendChild(a)},onDrag:function(a,b){var c=this._drag_masters[a.dhx_drag];return c.onDrag&&c!=this?c.onDrag(a,b):(dhtmlx.DragControl._drag_context={source:a,from:a},"<div style='"+a.style.cssText+"'>"+a.innerHTML+"</div>")}},dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface"),dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface"),dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included"),!this._settings||this._settings.drag?dhtmlx.DragItem._initHandlers(this):this._settings&&(this.drag_setter=function(a){return a&&(this._initHandlers(this),delete this.drag_setter),a}),this.dragMarker&&(this.attachEvent("onBeforeDragIn",this.dragMarker),this.attachEvent("onDragOut",this.dragMarker))},_initHandlers:function(a){dhtmlx.DragControl.addDrop(a._obj,a,!0),dhtmlx.DragControl.addDrag(a._obj,a)},onDragIn:function(a,b,c){var d=this.locate(c)||null,e=dhtmlx.DragControl._drag_context,f=dhtmlx.DragControl.getMaster(a),g=this._locateHTML(d)||this._obj;return g==dhtmlx.DragControl._landing?g:(e.target=d,e.to=f,this.callEvent("onBeforeDragIn",[e,c])?(dhtmlx.html.addCss(g,"dhx_drag_over"),g):(e.id=null,null))},onDragOut:function(a,b,c,d){var e=this.locate(d)||null;c!=this._dataobj&&(e=null);var f=this._locateHTML(e)||(c?dhtmlx.DragControl.getMaster(c)._obj:window.undefined);if(f==dhtmlx.DragControl._landing)return null;var g=dhtmlx.DragControl._drag_context;return dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over"),g.target=g.to=null,this.callEvent("onDragOut",[g,d]),null},onDrop:function(a,b,c,d){var e=dhtmlx.DragControl._drag_context;e.to=this,e.index=e.target?this.indexById(e.target):this.dataCount(),e.new_id=dhtmlx.uid(),this.callEvent("onBeforeDrop",[e,d])&&(e.from==e.to?this.move(e.source,e.index):e.from?e.from.move(e.source,e.index,e.to,e.new_id):dhtmlx.error("Unsopported d-n-d combination"),this.callEvent("onAfterDrop",[e,d]))},onDrag:function(a,b){var c=this.locate(b),d=[c];if(c){if(this.getSelected){var e=this.getSelected();-1!=dhtmlx.PowerArray.find.call(e,c)&&(d=e)}var f=dhtmlx.DragControl._drag_context={source:d,start:c};if(f.from=this,this.callEvent("onBeforeDrag",[f,b]))return f.html||this._toHTML(this.get(c))}return null}},dhtmlx.EditAbility={_init:function(){this._edit_id=null,this._edit_bind=null,dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore"),dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack"),this.attachEvent("onEditKeyPress",function(a,b,c){13!=a||c?27==a&&this.stopEdit(!0):this.stopEdit()}),this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(a){if(this.stopEdit(!1,a)){if(!this.callEvent("onBeforeEditStart",[a]))return;var b=this.data.get(a);if(b.$template)return;b.$template="edit",this.data.refresh(a),this._edit_id=a,this._save_binding(a),this._edit_bind(!0,b),this.callEvent("onAfterEditStart",[a])}},stopEdit:function(a,b){if(!this._edit_id)return!0;if(this._edit_id==b)return!1;var c={};if(a?c=null:this._edit_bind(!1,c),!this.callEvent("onBeforeEditStop",[this._edit_id,c]))return!1;var d=this.data.get(this._edit_id);d.$template=null,a||this._edit_bind(!1,d);var e=this._edit_id;return this._edit_bind=this._edit_id=null,this.data.refresh(e),this.callEvent("onAfterEditStop",[e,c]),!0},_save_binding:function(a){var b=this._locateHTML(a),c="",d="",e=[];if(b){for(var f=b.getElementsByTagName("*"),g="",h=0;h<f.length;h++)1==f[h].nodeType&&(g=f[h].getAttribute("bind"))&&(c+="els["+e.length+"].value="+g+";",d+=g+"=els["+e.length+"].value;",e.push(f[h]),f[h].className+=" dhx_allow_selection",f[h].onselectstart=this._block_native);f=null}c=Function("obj","els",c),d=Function("obj","els",d),this._edit_bind=function(a,b){a?(c(b,e),e.length&&e[0].select&&e[0].select()):d(b,e)}},_block_native:function(a){return(a||event).cancelBubble=!0,!0}},dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray(),dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore"),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this)),this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this)),this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this)),this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(a,b){for(var c=this._selected.length-1;c>=0;c--)this._selected[c]==a&&(this._selected[c]=b)},_data_filtered:function(){for(var a=this._selected.length-1;a>=0;a--){if(this.data.indexById(this._selected[a])<0)var b=this._selected[a];var c=this.item(b);c&&delete c.$selected,this._selected.splice(a,1),this.callEvent("onSelectChange",[b])}},_data_updated:function(a,b,c){"delete"==c?this._selected.remove(a):this.data.dataCount()||this.data._filter_order||(this._selected=dhtmlx.toArray())},_data_loaded:function(){this._settings.select&&this.data.each(function(a){a.$selected&&this.select(a.id)},this)},_select_mark:function(a,b,c){return c||this.callEvent("onBeforeSelect",[a,b])?(this.data.item(a).$selected=b,c?c.push(a):(b?this._selected.push(a):this._selected.remove(a),this._refresh_selection(a)),!0):!1},select:function(a,b,c){if(!a)return this.selectAll();{if(!(a instanceof Array))return this.data.exists(a)?c&&this._selected.length?this.selectAll(this._selected[this._selected.length-1],a):(b||1==this._selected.length&&this._selected[0]==a||(this._silent_selection=!0,this.unselectAll(),this._silent_selection=!1),this.isSelected(a)?void(b&&this.unselect(a)):void(this._select_mark(a,!0)&&this.callEvent("onAfterSelect",[a]))):void dhtmlx.error("Incorrect id in select command: "+a);for(var d=0;d<a.length;d++)this.select(a[d],b,c)}},unselect:function(a){return a?void(this.isSelected(a)&&this._select_mark(a,!1)):this.unselectAll()},selectAll:function(a,b){var c,d=[];c=a||b?this.data.getRange(a||null,b||null):this.data.getRange(),c.each(function(a){var b=this.data.item(a.id);return b.$selected||(this._selected.push(a.id),this._select_mark(a.id,!0,d)),a.id},this),this._refresh_selection(d)},unselectAll:function(){var a=[];this._selected.each(function(b){this._select_mark(b,!1,a)},this),this._selected=dhtmlx.toArray(),this._refresh_selection(a)},isSelected:function(a){return-1!=this._selected.find(a)},getSelected:function(a){switch(this._selected.length){case 0:return a?[]:"";case 1:return a?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},_is_mass_selection:function(a){return a.length>100||a.length>this.data.dataCount/2},_refresh_selection:function(a){if("object"!=typeof a&&(a=[a]),a.length){if(this._is_mass_selection(a))this.data.refresh();else for(var b=0;b<a.length;b++)this.render(a[b],this.data.item(a[b]),"update");this._silent_selection||this.callEvent("onSelectChange",[a])}}},dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore"),dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible"),this._html=document.createElement("DIV")},_toHTML:function(a){return dhtmlx.assert(!a.$template||this.type["template_"+a.$template],"RenderStack :: Unknown template: "+a.$template),this.callEvent("onItemRender",[a]),this.type._item_start(a,this.type)+(a.$template?this.type["template_"+a.$template]:this.type.template)(a,this.type)+this.type._item_end},_toHTMLObject:function(a){return this._html.innerHTML=this._toHTML(a),this._html.firstChild},_locateHTML:function(a){if(this._htmlmap)return this._htmlmap[a];this._htmlmap={};for(var b=this._dataobj.childNodes,c=0;c<b.length;c++){var d=b[c].getAttribute(this._id);d&&(this._htmlmap[d]=b[c])}return this._locateHTML(a)},locate:function(a){return dhtmlx.html.locate(a,this._id)},show:function(a){var b=this._locateHTML(a);b&&(this._dataobj.scrollTop=b.offsetTop-this._dataobj.offsetTop)},render:function(a,b,c){if(a){var d=this._locateHTML(a);switch(c){case"update":if(!d)return;var e=this._htmlmap[a]=this._toHTMLObject(b);dhtmlx.html.insertBefore(e,d),dhtmlx.html.remove(d);break;case"delete":if(!d)return;dhtmlx.html.remove(d),delete this._htmlmap[a];break;case"add":var e=this._htmlmap[a]=this._toHTMLObject(b);dhtmlx.html.insertBefore(e,this._locateHTML(this.data.next(a)),this._dataobj);break;case"move":this.render(a,b,"delete"),this.render(a,b,"add");break;default:dhtmlx.error("Unknown render command: "+c)}}else this.callEvent("onBeforeRender",[this.data])&&(this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join(""),this._htmlmap=null);this.callEvent("onAfterRender",[])},pager_setter:function(a){this.attachEvent("onBeforeRender",function(){var a=this._settings.pager._settings;return-1==a.page?!1:(this.data.min=a.page*a.size,this.data.max=(a.page+1)*a.size-1,!0)});var b=new dhtmlx.ui.pager(a),c=dhtmlx.bind(function(){this.data.refresh()},this);return b.attachEvent("onRefresh",c),this.data.attachEvent("onStoreUpdated",function(){var a=this.dataCount();a!=b._settings.count&&(b._settings.count=a,-1==b._settings.page&&(b._settings.page=0),b.refresh())}),b},height_setter:function(a){return"auto"==a&&(this.attachEvent("onAfterRender",this._correct_height),dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))),a},_correct_height:function(){this._dataobj.style.overflow="hidden",this._dataobj.style.height="1px";var a=this._dataobj.scrollHeight;if(this._dataobj.style.height=a+"px",dhtmlx._isFF){var b=this._dataobj.scrollHeight;b!=a&&(this._dataobj.style.height=b+"px")}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var a=this.type,b=(a.border||0)+2*(a.padding||0)+2*(a.margin||0);return{x:a.width+b,y:a.height+b}},x_count_setter:function(a){var b=this._getDimension(),c=dhtmlx.$customScroll?0:18;return this._dataobj.style.width=b.x*a+("auto"!=this._settings.height?c:0)+"px",a},y_count_setter:function(a){var b=this._getDimension();return this._dataobj.style.height=b.y*a+"px",a}},dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first"),this._htmlmap={},this._dataobj.style.overflowY="scroll",dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this)),dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this)),this.data._unrendered_area=[],this.data.getIndexRange=this._getIndexRange},_locateHTML:function(a){return this._htmlmap[a]},show:function(a){range=this._getVisibleRange();var b=this.data.indexById(a),c=Math.floor(b/range._dx)*range._y;this._dataobj.scrollTop=c},_getIndexRange:function(a,b){0!==b&&(b=Math.min(b||1/0,this.dataCount()-1));for(var c=dhtmlx.toArray(),d=a||0;b>=d;d++){var e=this.item(this.order[d]);this.order.length>d&&(e?"loading"==e.$template&&this._unrendered_area.push(this.order[d]):(this.order[d]=dhtmlx.uid(),e={id:this.order[d],$template:"loading"},this._unrendered_area.push(this.order[d])),c.push(e))}return c},render:function(a,b,c){if(a){var d=this._locateHTML(a);switch(c){case"update":if(!d)return;var e=this._htmlmap[a]=this._toHTMLObject(b);dhtmlx.html.insertBefore(e,d),dhtmlx.html.remove(d);break;default:this._render_delayed()}}else this.callEvent("onBeforeRender",[this.data])&&(this._htmlmap={},this._render_visible_rows(null,!0),this._wait_for_render=!1,this.callEvent("onAfterRender",[]))},_render_delayed:function(){this._wait_for_render||(this._wait_for_render=!0,window.setTimeout(dhtmlx.bind(function(){this.render()},this),1))},_create_placeholder:function(a){var b=document.createElement("DIV");return b.style.cssText="height:"+a+"px; width:100%; overflow:hidden;",b},_render_visible_rows:function(a,b){this.data._unrendered_area=[];var c=this._getVisibleRange();(!this._dataobj.firstChild||b)&&(this._dataobj.innerHTML="",this._dataobj.appendChild(this._create_placeholder(c._max)),this._htmlrows=[this._dataobj.firstChild]);for(var d=Math.max(c._from,0),e=this.data.max||0===this.data.max?this.data.max:1/0;d<=c._height;){for(;this._htmlrows[d]&&this._htmlrows[d]._filled&&d<=c._height;)d++;if(d>c._height)break;for(var f=d;!this._htmlrows[f];)f--;var g=this._htmlrows[f],h=d*c._dx+(this.data.min||0);if(h>e)break;var i=Math.min(h+c._dx-1,e),j=this._create_placeholder(c._y),k=this.data.getIndexRange(h,i);if(!k.length)break;j.innerHTML=k.map(this._toHTML,this).join("");for(var l=0;l<k.length;l++)this._htmlmap[this.data.idByIndex(h+l)]=j.childNodes[l];var m=parseInt(g.style.height,10),n=(d-f)*c._y,o=m-n-c._y;if(dhtmlx.html.insertBefore(j,n?g.nextSibling:g,this._dataobj),this._htmlrows[d]=j,j._filled=!0,0>=n&&o>0)g.style.height=o+"px",this._htmlrows[d+1]=g;else if(0>n?dhtmlx.html.remove(g):g.style.height=n+"px",o>0){var p=this._htmlrows[d+1]=this._create_placeholder(o);dhtmlx.html.insertBefore(p,j.nextSibling,this._dataobj)}d++}if(this.data._unrendered_area.length){var q=this.indexById(this.data._unrendered_area[0]),r=this.indexById(this.data._unrendered_area.pop())+1;if(r>q){if(!this.callEvent("onDataRequest",[q,r-q]))return!1;dhtmlx.assert(this.data.feed,"Data feed is missed"),this.data.feed.call(this,q,r-q)}}if(dhtmlx._isIE){var s=this._getVisibleRange();s._from!=c._from&&this._render_visible_rows()}},_getVisibleRange:function(){var a=dhtmlx.$customScroll?0:18,b=this._dataobj.scrollTop,c=Math.max(this._dataobj.scrollWidth,this._dataobj.offsetWidth)-a,d=this._dataobj.offsetHeight,e=(this.type,this._getDimension()),f=Math.floor(c/e.x)||1,g=Math.floor(b/e.y),h=Math.ceil((d+b)/e.y)-1,i=this.data.max?this.data.max-this.data.min:this.data.dataCount(),j=Math.ceil(i/f)*e.y;return{_from:g,_height:h,_top:b,_max:j,_y:e.y,_dx:f}}},dhtmlXDataView=function(a){this.name="DataView",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_dataview"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.RenderStack),dhtmlx.extend(this,dhtmlx.SelectionModel),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.KeyEvents),dhtmlx.extend(this,dhtmlx.EditAbility),dhtmlx.extend(this,dhtmlx.DataMove),dhtmlx.extend(this,dhtmlx.DragItem),dhtmlx.extend(this,dhtmlx.DataProcessor),dhtmlx.extend(this,dhtmlx.AutoTooltip),dhtmlx.extend(this,dhtmlx.Destruction),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this)),this._parseSettings(a,{drag:!1,edit:!1,select:"multiselect",type:"default"}),"auto"==this._settings.height||this._settings.renderAll||dhtmlx.extend(this,dhtmlx.VirtualRenderStack),this.data.provideApi(this,!0),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)},dhtmlXDataView.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(a){var b=this._locateHTML(a.target);if(this.type.drag_marker&&(this._drag_marker&&(this._drag_marker.style.backgroundImage="",this._drag_marker.style.backgroundRepeat=""),b&&(b.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")",b.style.backgroundRepeat="no-repeat",this._drag_marker=b)),b&&this._settings.auto_scroll){var c=b.offsetTop,d=b.offsetHeight,e=this._obj.scrollTop,f=this._obj.offsetHeight;c-d>=0&&e>c-.75*d?e=Math.max(c-d,0):c+d/.75>e+f&&(e+=d),this._obj.scrollTop=e}return!0},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(a,b){this.stopEdit(!1,b)&&this._settings.select&&("multiselect"==this._settings.select?this.select(b,a.ctrlKey,a.shiftKey):this.select(b))}},on_dblclick:{dhx_dataview_item:function(a,b){this._settings.edit&&this.edit(b)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.compat("layout"),xmlPointer.prototype={text:function(){if(!_isFF)return this.d.xml;
var a=new XMLSerializer;return a.serializeToString(this.d)},get:function(a){return this.d.getAttribute(a)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.wholeText||this.d.firstChild.data:""},each:function(a,b,c,d){var e=this.d.childNodes,f=new xmlPointer;if(e.length)for(d=d||0;d<e.length;d++)if(e[d].tagName==a&&(f.d=e[d],-1==b.apply(c,[f,d])))return},get_all:function(){for(var a={},b=this.d.attributes,c=0;c<b.length;c++)a[b[c].name]=b[c].value;return a},sub:function(a){var b=this.d.childNodes,c=new xmlPointer;if(b.length)for(var d=0;d<b.length;d++)if(b[d].tagName==a)return c.d=b[d],c},up:function(){return new xmlPointer(this.d.parentNode)},set:function(a,b){this.d.setAttribute(a,b)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(a){var b=this.d.childNodes;if(b.length)for(var c=0;c<b.length;c++)if(b[c].tagName==a)return!0;return!1},through:function(a,b,c,d,e){var f=this.d.childNodes;if(f.length)for(var g=0;g<f.length;g++){if(f[g].tagName==a&&null!=f[g].getAttribute(b)&&""!=f[g].getAttribute(b)&&(!c||f[g].getAttribute(b)==c)){var h=new xmlPointer(f[g]);d.apply(e,[h,g])}var i=this.d;this.d=f[g],this.through(a,b,c,d,e),this.d=i}}},dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a},dhtmlXTreeObject.prototype._doContClick=function(a,b){if(!b&&2!=a.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var c=_isIE?a.srcElement:a.target;c&&"BODY"!=c.tagName&&!c.parentObject;)c=c.parentNode;if(!c||!c.parentObject)return!0;var d=c.parentObject;if(this.callEvent("onRightClick",[d.id,a])||((a.srcElement||a.target).oncontextmenu=function(a){return(a||event).cancelBubble=!0,!1}),this._acMenu=d.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[d.id]))return!0;if(_isMacOS||((a.srcElement||a.target).oncontextmenu=function(a){return(a||event).cancelBubble=!0,!1}),this._acMenu.showContextMenu){var e=window.document.documentElement,f=window.document.body,g=new Array(e.scrollLeft||f.scrollLeft,e.scrollTop||f.scrollTop);if(_isIE)var h=a.clientX+g[0],i=a.clientY+g[1];else var h=a.pageX,i=a.pageY;this._acMenu.showContextMenu(h-1,i-1),this.contextID=d.id,a.cancelBubble=!0,this._acMenu._skip_hide=!0}else c.contextMenuId=d.id,c.contextMenu=this._acMenu,c.a=this._acMenu._contextStart,c.a(c,a),c.a=null;return!1}return!0},dhtmlXTreeObject.prototype.enableIEImageFix=function(a){a?(this._getImg=function(){var a=document.createElement("DIV");return a.innerHTML="&nbsp;",a.className="dhx_bg_img_fix",a},this._setSrc=function(a,b){a.style.backgroundImage="url("+b+")"},this._getSrc=function(a){var b=a.style.backgroundImage;return b.substr(4,b.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(a){return document.createElement(a==this.rootId?"div":"img")},this._setSrc=function(a,b){a.src=b},this._getSrc=function(a){return a.src})},dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var b=this._idpull[a];b&&(b.parentObject=null,b.treeNod=null,b.childNodes=null,b.span=null,b.tr.nodem=null,b.tr=null,b.htmlNode.objBelong=null,b.htmlNode=null,this._idpull[a]=null)}this.parentObject.innerHTML="",this.XMLLoader&&this.XMLLoader.destructor(),this.allTree.onselectstart=null,this.allTree.oncontextmenu=null,this.allTree.onmousedown=null;for(var a in this)this[a]=null},cObject.prototype=new Object,cObject.prototype.clone=function(){function a(){}return a.prototype=this,new a},dhtmlXTreeObject.prototype._globalIdStorageAdd=function(a,b){return this._globalIdStorageFind(a,1,1)?(a=a+"_"+(new Date).valueOf(),this._globalIdStorageAdd(a,b)):(this._idpull[a]=b,this._pullSize++,a)},dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){this._idpull[a]&&(this._unselectItem(this._idpull[a]),this._idpull[a]=null,this._pullSize--),this._locker&&this._locker[a]&&(this._locker[a]=!1)},dhtmlXTreeObject.prototype._globalIdStorageFind=function(a,b,c,d){var e=this._idpull[a];if(e){if(e.unParsed&&!c&&this.reParse(e,0),this._srnd&&!e.htmlNode&&this._buildSRND(e,c),d&&this._edsbpsA)for(var f=0;f<this._edsbpsA.length;f++)if(this._edsbpsA[f][2]==a)return dhtmlxError.throwError("getItem","Requested item still in parsing process.",a),null;return e}return this.slowParse&&0!=a&&!b?this.preParse(a):null},dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var b=[];return a.each("item",function(a){b.push(a.get("id"))},this),b.join(this.dlmtr)},dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.findXML=function(){},dhtmlXTreeObject.prototype._getAllCheckedXML=function(a,b,c){var d=[];return 2==c&&a.through("item","checked",-1,function(a){d.push(a.get("id"))},this),1==c&&a.through("item","id",null,function(a){a.get("checked")&&-1!=a.get("checked")&&d.push(a.get("id"))},this),0==c&&a.through("item","id",null,function(a){a.get("checked")&&0!=a.get("checked")||d.push(a.get("id"))},this),d.length?b+(b?this.dlmtr:"")+d.join(this.dlmtr):b?b:""},dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,b){var c=a?"1":"";b.through("item","id",null,function(a){a.get("disabled")&&0!=a.get("disabled")||a.set("checked",c)},this)},dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(a){var b=[],c=function(a){a.sub_exists("item")?a.each("item",c,this):b.push(a.get("id"))};return c(a),b.join(",")},dhtmlXTreeObject.prototype._getAllFatItemsXML=function(a){var b=[],c=function(a){a.sub_exists("item")&&(b.push(a.get("id")),a.each("item",c,this))};return c(a),b.join(",")},dhtmlXTreeObject.prototype._getAllSubItemsXML=function(a,b,c){var b=[];return c.through("item","id",null,function(a){b.push(a.get("id"))},this),b.join(",")},dhtmlXTreeObject.prototype.reParse=function(a){var b=this;this.parsCount||b.callEvent("onXLS",[b,a.id]),this.xmlstate=1;var c=a.unParsed;a.unParsed=0,this.XMLloadingWarning=1;var d=this.parsingOn,e=this.waitUpdateXML,f=this.parsedArray;this.parsedArray=new Array,this.waitUpdateXML=!1,this.parsingOn=a.id,this.parsedArray=new Array,this.setCheckList="",this._parse(c,a.id,2);for(var g=this.setCheckList.split(this.dlmtr),h=0;h<this.parsedArray.length;h++)a.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);c.get("order")&&"none"!=c.get("order")&&this._reorderBranch(a,c.get("order"),!0),this.oldsmcheck=this.smcheck,this.smcheck=!1;for(var i=0;i<g.length;i++)g[i]&&this.setCheck(g[i],1);return this.smcheck=this.oldsmcheck,this.parsingOn=d,this.waitUpdateXML=e,this.parsedArray=f,this.XMLloadingWarning=0,this._redrawFrom(this,a),this._srnd&&!a._sready&&this.prepareSR(a.id),this.xmlstate=0,!0},dhtmlXTreeObject.prototype.preParse=function(a){if(!a||!this._p)return null;var b=!1;if(this._p.clone().through("item","id",a,function(a){return this._globalIdStorageFind(a.up().get("id")),b=!0},this),b){var c=this._globalIdStorageFind(a,!0,!1);c||dhtmlxError.throwError("getItem","The item "+a+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",a)}return c},dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case"none":return a;case"utf8":return encodeURIComponent(a);default:return escape(a)}},dhtmlXTreeObject.prototype._drawNewTr=function(a){var b=document.createElement("tr"),c=document.createElement("td"),d=document.createElement("td");return c.appendChild(document.createTextNode(" ")),d.colSpan=3,d.appendChild(a),b.appendChild(c),b.appendChild(d),b},dhtmlXTreeObject.prototype.loadXMLString=function(a,b){var c=this;this.parsCount||this.callEvent("onXLS",[c,null]),this.xmlstate=1,b&&(this.XMLLoader.waitCall=b),this.XMLLoader.loadXMLString(a)},dhtmlXTreeObject.prototype.loadXML=function(a,b){if(this._datamode&&"xml"!=this._datamode)return this["load"+this._datamode.toUpperCase()](a,b);var c=this;this.parsCount||this.callEvent("onXLS",[c,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),b&&(this.XMLLoader.waitCall=b),this.XMLLoader.loadXML(a)},dhtmlXTreeObject.prototype._attachChildNode=function(a,b,c,d,e,f,g,h,i,j,k){j&&j.parentObject&&(a=j.parentObject),0==a.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(a.XMLload=1,this._loadDynXML(a.id));var l=a.childsCount,m=a.childNodes;if(k&&k.tr.previousSibling&&(k.tr.previousSibling.previousSibling?j=k.tr.previousSibling.nodem:h=h.replace("TOP","")+",TOP"),j){var n,o;for(n=0;l>n;n++)if(m[n]==j){for(o=l;o!=n;o--)m[1+o]=m[o];break}n++,l=n}if(h)for(var p=h.split(","),q=0;q<p.length;q++)switch(p[q]){case"TOP":for(a.childsCount>0&&(j=new Object,j.tr=a.childNodes[0].tr.previousSibling),a._has_top=!0,n=l;n>0;n--)m[n]=m[n-1];l=0}var r;(r=this._idpull[b])&&-1==r.span||(r=m[l]=new dhtmlXTreeItemObject(b,c,a,this,d,1),b=m[l].id,a.childsCount++),r.htmlNode||(r.label=c,r.htmlNode=this._createItem(this.checkBoxOff?1:0,r),r.htmlNode.objBelong=r),e&&(r.images[0]=e),f&&(r.images[1]=f),g&&(r.images[2]=g);var s=this._drawNewTr(r.htmlNode);if((this.XMLloadingWarning||this._hAdI)&&(r.htmlNode.parentNode.parentNode.style.display="none"),j&&j.tr&&j.tr.nextSibling?a.htmlNode.childNodes[0].insertBefore(s,j.tr.nextSibling):this.parsingOn==a.id?this.parsedArray[this.parsedArray.length]=s:a.htmlNode.childNodes[0].appendChild(s),j&&!j.span&&(j=null),this.XMLsource&&(r.XMLload=i&&0!=i?0:1),r.tr=s,s.nodem=r,0==a.itemId&&(s.childNodes[0].className="hiddenRow"),(a._r_logic||this._frbtr)&&this._setSrc(r.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),h)for(var p=h.split(","),q=0;q<p.length;q++)switch(p[q]){case"SELECT":this.selectItem(b,!1);break;case"CALL":this.selectItem(b,!0);break;case"CHILD":r.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+b:this.setCheck(b,1);break;case"HCHECKED":this._setCheck(r,"unsure");break;case"OPEN":r.openMe=1}if(!this.XMLloadingWarning&&(this._getOpenState(a)<0&&!this._hAdI&&this.openItem(a.id),j&&(this._correctPlus(j),this._correctLine(j)),this._correctPlus(a),this._correctLine(a),this._correctPlus(r),a.childsCount>=2&&(this._correctPlus(m[a.childsCount-2]),this._correctLine(m[a.childsCount-2])),2!=a.childsCount&&this._correctPlus(m[0]),this.tscheck&&this._correctCheckStates(a),this._onradh))if(1==this.xmlstate){var t=this.onXLE;this.onXLE=function(a){this._onradh(b),t&&t(a)}}else this._onradh(b);return r},dhtmlXTreeObject.prototype.enableContextMenu=function(a){a&&(this.cMenu=a)},dhtmlXTreeObject.prototype.setItemContextMenu=function(a,b){for(var c=a.toString().split(this.dlmtr),d=0;d<c.length;d++){var e=this._globalIdStorageFind(c[d]);e&&(e.cMenu=b)}},dhtmlXTreeObject.prototype.insertNewItem=function(a,b,c,d,e,f,g,h,i){var j=this._globalIdStorageFind(a);if(!j)return-1;var k=this._attachChildNode(j,b,c,d,e,f,g,h,i);return this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1),!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(j),k},dhtmlXTreeObject.prototype.insertNewChild=function(a,b,c,d,e,f,g,h,i){return this.insertNewItem(a,b,c,d,e,f,g,h,i)},dhtmlXTreeObject.prototype._parseXMLTree=function(a,b,c,d,e){var f=new xmlPointer(e.getXMLTopNode("tree"));a._parse(f),a._p=f},dhtmlXTreeObject.prototype._parseItem=function(a,b,c,d){var e;if(this._srnd&&(!this._idpull[e=a.get("id")]||!this._idpull[e].span))return void this._addItemSRND(b.id,e,a);var f=a.get_all();if("object"==typeof this.waitUpdateXML&&!this.waitUpdateXML[f.id])return void this._parse(a,f.id,1);(null===f.text||"undefined"==typeof f.text)&&(f.text=a.sub("itemtext"),f.text&&(f.text=f.text.content()));var g=[];if(f.select&&g.push("SELECT"),f.top&&g.push("TOP"),f.call&&(this.nodeAskingCall=f.id),-1==f.checked?g.push("HCHECKED"):f.checked&&g.push("CHECKED"),f.open&&g.push("OPEN"),this.waitUpdateXML)if(this._globalIdStorageFind(f.id))var h=this.updateItem(f.id,f.text,f.im0,f.im1,f.im2,f.checked,f.child);else{0==this.npl?g.push("TOP"):c=b.childNodes[this.npl];var h=this._attachChildNode(b,f.id,f.text,0,f.im0,f.im1,f.im2,g.join(","),f.child,0,c);f.id=h.id,c=null}else var h=this._attachChildNode(b,f.id,f.text,0,f.im0,f.im1,f.im2,g.join(","),f.child,d||0,c);if(f.tooltip&&(h.span.parentNode.parentNode.title=f.tooltip),f.style&&(h.span.style.cssText?h.span.style.cssText+=";"+f.style:h.span.setAttribute("style",h.span.getAttribute("style")+"; "+f.style)),f.radio&&(h._r_logic=!0),f.nocheckbox){var i=h.span.parentNode.previousSibling.previousSibling;i.style.display="none",h.nocheckbox=!0}f.disabled&&(null!=f.checked&&this._setCheck(h,f.checked),this.disableCheckbox(h,1)),h._acc=f.child||0,this.parserExtension&&this.parserExtension._parseExtension.call(this,a,f,b?b.id:0),this.setItemColor(h,f.aCol,f.sCol),"1"==f.locked&&this.lockItem(h.id,!0,!0),(f.imwidth||f.imheight)&&this.setIconSize(f.imwidth,f.imheight,h),("0"==f.closeable||"1"==f.closeable)&&this.setItemCloseable(h,f.closeable);var j="";f.topoffset&&this.setItemTopOffset(h,f.topoffset),this.slowParse&&"object"!=typeof this.waitUpdateXML?(!h.childsCount&&a.sub_exists("item")&&(h.unParsed=a.clone()),a.each("userdata",function(a){this.setUserData(f.id,a.get("name"),a.content())},this)):a.sub_exists("item")&&(j=this._parse(a,f.id,1)),""!=j&&(this.nodeAskingCall=j),a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this)},dhtmlXTreeObject.prototype._parse=function(a,b,c,d){if(this._srnd&&!this.parentObject.offsetHeight){var e=this;return window.setTimeout(function(){e._parse(a,b,c,d)},100)}if(a.exists()){if(this.skipLock=!0,!b){b=a.get("id");var f=a.get("dhx_security");f&&(dhtmlx.security_key=f),a.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=b,this.parsedArray=new Array,this.setCheckList="",this.nodeAskingCall=""}var g=this._globalIdStorageFind(b);if(!g)return dhtmlxError.throwError("DataStructure","XML refers to not existing parent");if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,!g.childsCount||d||this._edsbps||g._has_top)var h=0;else var h=0;if(this.npl=0,a.each("item",function(d,e){return g.XMLload=1,this._parseItem(d,g,0,h),this._edsbps&&this.npl==this._edsbpsC?(this._distributedStart(a,e+1,b,c,g.childsCount),-1):void this.npl++},this,d),!c){if(a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this),g.XMLload=1,this.waitUpdateXML){this.waitUpdateXML=!1;for(var i=g.childsCount-1;i>=0;i--)g.childNodes[i]._dmark&&this.deleteItem(g.childNodes[i].id)}for(var i=(this._globalIdStorageFind(this.parsingOn),0);i<this.parsedArray.length;i++)g.htmlNode.childNodes[0].appendChild(this.parsedArray[i]);this.parsedArray=[],this.lastLoadedXMLId=b,this.XMLloadingWarning=0;for(var j=this.setCheckList.split(this.dlmtr),k=0;k<j.length;k++)j[k]&&this.setCheck(j[k],1);this.XMLsource&&this.tscheck&&this.smcheck&&g.id!=this.rootId&&(0===g.checkstate?this._setSubChecked(0,g):1===g.checkstate&&this._setSubChecked(1,g)),this._redrawFrom(this,null,d),a.get("order")&&"none"!=a.get("order")&&this._reorderBranch(g,a.get("order"),!0),""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]),this._branchUpdate&&this._branchUpdateNext(a)}if(1==this.parsCount){if(this.parsingOn=null,this._srnd&&g.id!=this.rootId&&(this.prepareSR(g.id),this.XMLsource&&this.openItem(g.id)),a.through("item","open",null,function(a){this.openItem(a.get("id"))},this),!this._edsbps||!this._edsbpsA.length){var l=this;window.setTimeout(function(){l.callEvent("onXLE",[l,b])},1),this.xmlstate=0}this.skipLock=!1}this.parsCount--;var l=this;return this._edsbps&&window.setTimeout(function(){l._distributedStep(b)},this._edsbpsD),!c&&this.onXLE&&this.onXLE(this,b),this.nodeAskingCall}},dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(a){var b=a.get("id");(!this._idpull[b]||this._idpull[b].XMLload)&&(this._branchUpdate++,this.smartRefreshItem(a.get("id"),a))},this),this._branchUpdate--},dhtmlXTreeObject.prototype.checkUserData=function(a,b){if(1==a.nodeType&&"userdata"==a.tagName){var c=a.getAttribute("name");c&&a.childNodes[0]&&this.setUserData(b,c,a.childNodes[0].data)}},dhtmlXTreeObject.prototype._redrawFrom=function(a,b,c,d){if(b)e=b;else{var e=a._globalIdStorageFind(a.lastLoadedXMLId);if(a.lastLoadedXMLId=-1,!e)return 0}for(var f=0,g=c?c-1:0;g<e.childsCount;g++)if(this._branchUpdate&&1!=this._getOpenState(e)||b&&1!=d||(e.childNodes[g].htmlNode.parentNode.parentNode.style.display=""),1==e.childNodes[g].openMe&&(this._openItem(e.childNodes[g]),e.childNodes[g].openMe=0),a._redrawFrom(a,e.childNodes[g]),null!=this.childCalc){if((e.childNodes[g].unParsed||!e.childNodes[g].XMLload&&this.XMLsource)&&(e.childNodes[g].span.innerHTML=e.childNodes[g]._acc?e.childNodes[g].label+this.htmlcA+e.childNodes[g]._acc+this.htmlcB:e.childNodes[g].label),e.childNodes[g].childNodes.length&&this.childCalc){if(1==this.childCalc&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+e.childNodes[g].childsCount+this.htmlcB),2==this.childCalc){var h=e.childNodes[g].childsCount-(e.childNodes[g].pureChilds||0);h&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+h+this.htmlcB),e.pureChilds?e.pureChilds++:e.pureChilds=1}if(3==this.childCalc&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+e.childNodes[g]._acc+this.htmlcB),4==this.childCalc){var h=e.childNodes[g]._acc;h&&(e.childNodes[g].span.innerHTML=e.childNodes[g].label+this.htmlcA+h+this.htmlcB)}}else 4==this.childCalc&&f++;f+=e.childNodes[g]._acc,3==this.childCalc&&f++}e.unParsed||!e.XMLload&&this.XMLsource||(e._acc=f),a._correctLine(e),a._correctPlus(e),this.childCalc&&!b&&a._fixChildCountLabel(e)},dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");return a.className="containerTableStyle",a.style.width=this.width,a.style.height=this.height,this.parentObject.appendChild(a),a},dhtmlXTreeObject.prototype._xcloseAll=function(a){if(!a.unParsed){if(this.rootId!=a.id){if(!a.htmlNode)return;for(var b=a.htmlNode.childNodes[0].childNodes,c=b.length,d=1;c>d;d++)b[d].style.display="none";this._correctPlus(a)}for(var d=0;d<a.childsCount;d++)a.childNodes[d].childsCount&&this._xcloseAll(a.childNodes[d])}},dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var b=0;b<a.childsCount;b++)this._xopenAll(a.childNodes[b])},dhtmlXTreeObject.prototype._correctPlus=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,c=a.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],d=this.lineArray;if(this.XMLsource&&!a.XMLload){var d=this.plusArray;if(this._setSrc(c,this.iconURL+a.images[2]),this._txtimg)return b.innerHTML="[+]"}else if(a.childsCount||a.unParsed)if(a.htmlNode.childNodes[0].childNodes[1]&&"none"!=a.htmlNode.childNodes[0].childNodes[1].style.display){if(!a.wsign)var d=this.minusArray;if(this._setSrc(c,this.iconURL+a.images[1]),this._txtimg)return b.innerHTML="[-]"}else{if(!a.wsign)var d=this.plusArray;if(this._setSrc(c,this.iconURL+a.images[2]),this._txtimg)return b.innerHTML="[+]"}else this._setSrc(c,this.iconURL+a.images[0]);var e=2;a.treeNod.treeLinesOn?(a.parentObject&&(e=this._getCountStatus(a.id,a.parentObject)),this._setSrc(b,this.imPath+d[e])):this._setSrc(b,this.imPath+d[3])}},dhtmlXTreeObject.prototype._correctLine=function(a){if(a.htmlNode){var b=a.parentObject;if(b)if(0!=this._getLineStatus(a.id,b)&&this.treeLinesOn)for(var c=1;c<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[c];c++)a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat="repeat-y";else for(var c=1;c<=a.childsCount&&a.htmlNode.childNodes[0].childNodes[c];c++)a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="",a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat=""}},dhtmlXTreeObject.prototype._getCountStatus=function(a,b){return b.childsCount<=1?b.id==this.rootId?4:0:b.childNodes[0].id==a?b.id==this.rootId?2:1:b.childNodes[b.childsCount-1].id==a?0:1},dhtmlXTreeObject.prototype._getLineStatus=function(a,b){return b.childNodes[b.childsCount-1].id==a?0:1},dhtmlXTreeObject.prototype._HideShow=function(a,b){if(this.XMLsource&&!a.XMLload){if(1==b)return;return a.XMLload=1,void this._loadDynXML(a.id)}a.unParsed&&this.reParse(a);var c=a.htmlNode.childNodes[0].childNodes,d=c.length;if(d>1){"none"==c[1].style.display&&1!=b||2==b?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var e=1;d>e;e++)c[e].style.display=nodestyle}this._correctPlus(a)},dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode)return 0;var b=a.htmlNode.childNodes[0].childNodes;return b.length<=1?0:"none"!=b[1].style.display?1:-1},dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;return a.callEvent("onDblClick",[this.parentObject.id,a])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2),a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])),!1):!1},dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;return a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2),void(a.checkEvent("onOpenEnd")&&(a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])))):0},dhtmlXTreeObject.prototype._epnFHe=function(a,b,c){b!=this.rootId&&this.callEvent("onOpenEnd",[b,a.getOpenState(b)]),a.onXLE=a._oie_onXLE.pop(),c||a._oie_onXLE.length||a.onXLE&&a.onXLE(a,b)},dhtmlXTreeObject.prototype.onRowClickDown=function(a){a=a||window.event;var b=this.parentObject.treeNod;b._selectItem(this.parentObject,a)},dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var a=new Array,b=0;b<this._selected.length;b++)a[b]=this._selected[b].id;return a.join(this.dlmtr)},dhtmlXTreeObject.prototype._selectItem=function(a,b){if(this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._amsel&&b&&(b.ctrlKey||b.metaKey||b.shiftKey)||this._unselectItems(),a.i_sel&&this._amsel&&b&&(b.ctrlKey||b.metaKey))this._unselectItem(a);else if(!(a.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=a.parentObject))if(this._amsel&&b&&b.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==a.parentObject){var c=this._getIndex(this._selected[this._selected.length-1]),d=this._getIndex(a);if(c>d){var e=c;c=d,d=e}for(var f=c;d>=f;f++)a.parentObject.childNodes[f].i_sel||this._markItem(a.parentObject.childNodes[f])}else this._markItem(a);if(this.checkEvent("onSelect")){var g=this.getSelectedItemId();g!=this._onSSCFold&&this.callEvent("onSelect",[g])}},dhtmlXTreeObject.prototype._markItem=function(a){a.scolor&&(a.span.style.color=a.scolor),a.span.className="selectedTreeRow",a.i_sel=!0,this._selected[this._selected.length]=a},dhtmlXTreeObject.prototype.getIndexById=function(a){var b=this._globalIdStorageFind(a);return b?this._getIndex(b):null},dhtmlXTreeObject.prototype._getIndex=function(a){for(var b=a.parentObject,c=0;c<b.childsCount;c++)if(b.childNodes[c]==a)return c},dhtmlXTreeObject.prototype._unselectItem=function(a){if(a&&a.i_sel){a.span.className="standartTreeRow",a.acolor&&(a.span.style.color=a.acolor),a.i_sel=!1;for(var b=0;b<this._selected.length;b++)if(!this._selected[b].i_sel){this._selected.splice(b,1);break}}},dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var b=this._selected[a];b.span.className="standartTreeRow",b.acolor&&(b.span.style.color=b.acolor),b.i_sel=!1}this._selected=new Array},dhtmlXTreeObject.prototype.onRowSelect=function(a,b,c){a=a||window.event;var d=this.parentObject;b&&(d=b.parentObject);var e=d.treeNod,f=e.getSelectedItemId();a&&a.skipUnSel||e._selectItem(d,a),c||(d.actionHandler?d.actionHandler(d.id,f):e.callEvent("onClick",[d.id,f]))},dhtmlXTreeObject.prototype._correctCheckStates=function(a){if(this.tscheck&&a&&a.id!=this.rootId){var b=a.childNodes,c=0,d=0;if(0!=a.childsCount){for(var e=0;e<a.childsCount;e++)if(!b[e].dscheck)if(0==b[e].checkstate)c=1;else{if(1!=b[e].checkstate){c=1,d=1;break}d=1}c&&d?this._setCheck(a,"unsure"):c?this._setCheck(a,!1):this._setCheck(a,!0),this._correctCheckStates(a.parentObject)}}},dhtmlXTreeObject.prototype.onCheckBoxClick=function(){return this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])?this.parentObject.dscheck?!0:(this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])):void 0},dhtmlXTreeObject.prototype._createItem=function(a,b,c){var d=document.createElement("table");d.cellSpacing=0,d.cellPadding=0,d.border=0,this.hfMode&&(d.style.tableLayout="fixed"),d.style.margin=0,d.style.padding=0;var e=document.createElement("tbody"),f=document.createElement("tr"),g=document.createElement("td");if(g.className="standartTreeImage",this._txtimg){var h=document.createElement("div");g.appendChild(h),h.className="dhx_tree_textSign"}else{var h=this._getImg(b.id);h.border="0","IMG"==h.tagName&&(h.align="absmiddle"),g.appendChild(h),h.style.padding=0,h.style.margin=0,h.style.width=this.def_line_img_x,h.style.height=this.def_line_img_y}var i=document.createElement("td"),j=this._getImg(this.cBROf?this.rootId:b.id);j.checked=0,this._setSrc(j,this.imPath+this.checkArray[0]),j.style.width="18px",j.style.height="18px",a||(i.style.display="none"),i.appendChild(j),this.cBROf||"IMG"!=j.tagName||(j.align="absmiddle"),j.onclick=this.onCheckBoxClick,j.treeNod=this,j.parentObject=b,i.width=window._KHTMLrv?"16px":"20px";var k=document.createElement("td");k.className="standartTreeImage";var l=this._getImg(this.timgen?b.id:this.rootId);l.onmousedown=this._preventNsDrag,l.ondragstart=this._preventNsDrag,l.border="0",this._aimgs&&(l.parentObject=b,"IMG"==l.tagName&&(l.align="absmiddle"),l.onclick=this.onRowSelect),c||this._setSrc(l,this.iconURL+this.imageArray[0]),k.appendChild(l),l.style.padding=0,l.style.margin=0,this.timgen?(k.style.width=l.style.width=this.def_img_x,l.style.height=this.def_img_y):(l.style.width="0px",l.style.height="0px",(_isOpera||window._KHTMLrv)&&(k.style.display="none"));var m=document.createElement("td");return m.className="standartTreeRow",b.span=document.createElement("span"),b.span.className="standartTreeRow",this.mlitems?(b.span.style.width=this.mlitems,b.span.style.display="block"):m.noWrap=!0,_isIE&&_isIE>7?m.style.width="999999px":window._KHTMLrv||(m.style.width="100%"),b.span.innerHTML=b.label,m.appendChild(b.span),m.parentObject=b,g.parentObject=b,m.onclick=this.onRowSelect,g.onclick=this.onRowClick,m.ondblclick=this.onRowClick2,this.ettip&&(f.title=b.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(k,this),k.parentObject=b),this.dragger.addDraggableItem(m,this)),b.span.style.paddingLeft="5px",b.span.style.paddingRight="5px",m.style.verticalAlign="",m.style.fontSize="10pt",m.style.cursor=this.style_pointer,f.appendChild(g),f.appendChild(i),f.appendChild(k),f.appendChild(m),e.appendChild(f),d.appendChild(e),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(f.onmousemove=this._itemMouseIn,f[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),d},dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a,this.iconURL=a},dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a},dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var b=0,c=0;c<a.childsCount;c++)0==a.childNodes[c].childsCount&&b++;return b},dhtmlXTreeObject.prototype._getChildCounterValue=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;if(b.unParsed||!b.XMLload&&this.XMLsource)return b._acc;switch(this.childCalc){case 1:return b.childsCount;case 2:return this._getLeafCount(b);case 3:return b._acc;case 4:return b._acc}},dhtmlXTreeObject.prototype._fixChildCountLabel=function(a){if(null!=this.childCalc){if(a.unParsed||!a.XMLload&&this.XMLsource)return void(a.span.innerHTML=a._acc?a.label+this.htmlcA+a._acc+this.htmlcB:a.label);switch(this.childCalc){case 1:a.span.innerHTML=0!=a.childsCount?a.label+this.htmlcA+a.childsCount+this.htmlcB:a.label;break;case 2:var b=this._getLeafCount(a);a.span.innerHTML=0!=b?a.label+this.htmlcA+b+this.htmlcB:a.label;break;case 3:if(0!=a.childsCount){for(var c=0,d=0;d<a.childsCount;d++)a.childNodes[d]._acc||(a.childNodes[d]._acc=0),c+=1*a.childNodes[d]._acc;c+=1*a.childsCount,a.span.innerHTML=a.label+this.htmlcA+c+this.htmlcB,a._acc=c}else a.span.innerHTML=a.label,a._acc=0;a.parentObject&&a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject);break;case 4:if(0!=a.childsCount){for(var c=0,d=0;d<a.childsCount;d++)a.childNodes[d]._acc||(a.childNodes[d]._acc=1),c+=1*a.childNodes[d]._acc;a.span.innerHTML=a.label+this.htmlcA+c+this.htmlcB,a._acc=c}else a.span.innerHTML=a.label,a._acc=1;a.parentObject&&a.parentObject!=this.htmlNode&&this._fixChildCountLabel(a.parentObject)}}},dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}},dhtmlXTreeObject.prototype.setChildCalcHTML=function(a,b){this.htmlcA=a,this.htmlcB=b},dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)},dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)},dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)},dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a},dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)},dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)},dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)},dhtmlXTreeObject.prototype.openAllItems=function(a){var b=this._globalIdStorageFind(a);return b?void this._xopenAll(b):0},dhtmlXTreeObject.prototype.getOpenState=function(a){var b=this._globalIdStorageFind(a);return b?this._getOpenState(b):""},dhtmlXTreeObject.prototype.closeAllItems=function(a){a===window.undefined&&(a=this.rootId);var b=this._globalIdStorageFind(a);return b?(this._xcloseAll(b),this.allTree.childNodes[0].border="1",void(this.allTree.childNodes[0].border="0")):0},dhtmlXTreeObject.prototype.setUserData=function(a,b,c){var d=this._globalIdStorageFind(a,0,!0);d&&("hint"==b&&(d.htmlNode.childNodes[0].childNodes[0].title=c),"undefined"==typeof d.userData["t_"+b]&&(d._userdatalist?d._userdatalist+=","+b:d._userdatalist=b),d.userData["t_"+b]=c)},dhtmlXTreeObject.prototype.getUserData=function(a,b){var c=this._globalIdStorageFind(a,0,!0);if(c)return c.userData["t_"+b]},dhtmlXTreeObject.prototype.getItemColor=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;var c=new Object;return b.acolor&&(c.acolor=b.acolor),b.scolor&&(c.scolor=b.scolor),c},dhtmlXTreeObject.prototype.setItemColor=function(a,b,c){if(a&&a.span)var d=a;else var d=this._globalIdStorageFind(a);return d?(d.i_sel?c&&(d.span.style.color=c):b&&(d.span.style.color=b),c&&(d.scolor=c),b&&(d.acolor=b),void 0):0
},dhtmlXTreeObject.prototype.getItemText=function(a){var b=this._globalIdStorageFind(a);return b?b.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0},dhtmlXTreeObject.prototype.getParentId=function(a){var b=this._globalIdStorageFind(a);return b&&b.parentObject?b.parentObject.id:""},dhtmlXTreeObject.prototype.changeItemId=function(a,b){if(a!=b){var c=this._globalIdStorageFind(a);if(!c)return 0;c.id=b,c.span.contextMenuId=b,this._idpull[b]=this._idpull[a],delete this._idpull[a]}},dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut(),this.nodeCut=(new Array).concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b._cimgs=new Array,b._cimgs[0]=b.images[0],b._cimgs[1]=b.images[1],b._cimgs[2]=b.images[2],b.images[0]=b.images[1]=b.images[2]=this.cutImage,this._correctPlus(b)}},dhtmlXTreeObject.prototype.doPaste=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;for(var c=0;c<this.nodeCut.length;c++)this._checkPNodes(b,this.nodeCut[c])||this._moveNode(this.nodeCut[c],b);this.clearCut()},dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b.images[0]=b._cimgs[0],b.images[1]=b._cimgs[1],b.images[2]=b._cimgs[2],this._correctPlus(b)}this.nodeCut=new Array},dhtmlXTreeObject.prototype._moveNode=function(a,b){var c=this.dadmodec;if(1==c){var d=b;if(this.dadmodefix<0){for(;;){if(d=this._getPrevNode(d),-1==d){d=this.htmlNode;break}if(0==d.tr||""==d.tr.style.display||!d.parentObject)break}var e=d,f=b}else{d.tr&&d.tr.nextSibling&&d.tr.nextSibling.nodem&&this._getOpenState(d)<1?d=d.tr.nextSibling.nodem:(d=this._getNextNode(d),-1==d&&(d=this.htmlNode));var f=d,e=b}return this._getNodeLevel(e,0)>this._getNodeLevel(f,0)?this.dropLower?f.id!=this.rootId?this._moveNodeTo(a,f.parentObject,f):this._moveNodeTo(a,this.htmlNode,null):this._moveNodeTo(a,e.parentObject):this._moveNodeTo(a,f.parentObject,f)}return this._moveNodeTo(a,b)},dhtmlXTreeObject.prototype._fixNodesCollection=function(a,b){var c=0,d=a.childNodes,e=a.childsCount-1;if(b!=d[e]){for(var f=0;e>f;f++)d[f]==d[e]&&(d[f]=d[f+1],d[f+1]=d[e]);for(var f=0;e+1>f;f++)if(c){var g=d[f];d[f]=c,c=g}else d[f]==b&&(c=d[f],d[f]=d[e])}},dhtmlXTreeObject.prototype._recreateBranch=function(a,b,c,d){var e,f="";if(c){for(e=0;e<b.childsCount&&b.childNodes[e]!=c;e++);0!=e?c=b.childNodes[e-1]:(f="TOP",c="")}var g=this._onradh;this._onradh=null;var h=this._attachChildNode(b,a.id,a.label,0,a.images[0],a.images[1],a.images[2],f,0,c);if(h._userdatalist=a._userdatalist,h.userData=a.userData.clone(),a._attrs){h._attrs={};for(var i in a._attrs)h._attrs[i]=a._attrs[i]}h.XMLload=a.XMLload,g&&(this._onradh=g,this._onradh(h.id)),a.treeNod.dpcpy?a.treeNod._globalIdStorageFind(a.id):h.unParsed=a.unParsed,this._correctPlus(h);for(var e=0;e<a.childsCount;e++)this._recreateBranch(a.childNodes[e],h,0,1);return!d&&this.childCalc&&this._redrawFrom(this,b),h},dhtmlXTreeObject.prototype._moveNodeTo=function(a,b,c){if(a.treeNod._nonTrivialNode)return a.treeNod._nonTrivialNode(this,b,c,a);if(this._checkPNodes(b,a))return!1;if(b.mytype)var d=a.treeNod.lWin!=b.lWin;else var d=a.treeNod.lWin!=b.treeNod.lWin;if(!this.callEvent("onDrag",[a.id,b.id,c?c.id:null,a.treeNod,b.treeNod]))return!1;0==b.XMLload&&this.XMLsource&&(b.XMLload=1,this._loadDynXML(b.id)),this.openItem(b.id);var e=a.treeNod,f=a.parentObject.childsCount,g=a.parentObject;if(d||e.dpcpy){var h=a.id;a=this._recreateBranch(a,b,c),e.dpcpy||e.deleteItem(h)}else{var i=b.childsCount,j=b.childNodes;0==i&&(b._open=!0),e._unselectItem(a),j[i]=a,a.treeNod=b.treeNod,b.childsCount++;var k=this._drawNewTr(j[i].htmlNode);c?(b.htmlNode.childNodes[0].insertBefore(k,c.tr),this._fixNodesCollection(b,c),j=b.childNodes):(b.htmlNode.childNodes[0].appendChild(k),1==this.dadmode&&this._fixNodesCollection(b,c))}if(!e.dpcpy&&!d){var l=a.tr;if(document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){l.parentNode.removeChild(l)},250):a.parentObject.htmlNode.childNodes[0].removeChild(a.tr),c&&b==a.parentObject)g.childNodes[g.childsCount-1]=0;else for(var m=0;m<g.childsCount;m++)if(g.childNodes[m].id==a.id){g.childNodes[m]=0;break}e._compressChildList(g.childsCount,g.childNodes),g.childsCount--}if(!d&&!e.dpcpy){if(a.tr=k,k.nodem=a,a.parentObject=b,e!=b.treeNod){if(a.treeNod._registerBranch(a,e))return;this._clearStyles(a),this._redrawFrom(this,a.parentObject),this._onradh&&this._onradh(a.id)}this._correctPlus(b),this._correctLine(b),this._correctLine(a),this._correctPlus(a),c?this._correctPlus(c):b.childsCount>=2&&(this._correctPlus(j[b.childsCount-2]),this._correctLine(j[b.childsCount-2])),this._correctPlus(j[b.childsCount-1]),this.tscheck&&this._correctCheckStates(b),e.tscheck&&e._correctCheckStates(g)}return f>1&&(e._correctPlus(g.childNodes[f-2]),e._correctLine(g.childNodes[f-2])),e._correctPlus(g),e._correctLine(g),this._fixChildCountLabel(b),e._fixChildCountLabel(g),this.callEvent("onDrop",[a.id,b.id,c?c.id:null,e,b.treeNod]),a.id},dhtmlXTreeObject.prototype._clearStyles=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[1],c=b.nextSibling.nextSibling;a.span.innerHTML=a.label,a.i_sel=!1,a._aimgs&&this.dragger.removeDraggableItem(b.nextSibling),this.checkBoxOff?(b.childNodes[0].style.display="",b.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(b.childNodes[0],this.imPath+this.checkArray[a.checkstate])):b.style.display="none",b.childNodes[0].treeNod=this,this.dragger.removeDraggableItem(c),this.dragAndDropOff&&this.dragger.addDraggableItem(c,this),this._aimgs&&this.dragger.addDraggableItem(b.nextSibling,this),c.childNodes[0].className="standartTreeRow",c.onclick=this.onRowSelect,c.ondblclick=this.onRowClick2,b.previousSibling.onclick=this.onRowClick,this._correctLine(a),this._correctPlus(a);for(var d=0;d<a.childsCount;d++)this._clearStyles(a.childNodes[d])}},dhtmlXTreeObject.prototype._registerBranch=function(a,b){b&&b._globalIdStorageSub(a.id),a.id=this._globalIdStorageAdd(a.id,a),a.treeNod=this;for(var c=0;c<a.childsCount;c++)this._registerBranch(a.childNodes[c],b);return 0},dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=!0,this.attachEvent("onMouseIn",a)},dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=!0,this.attachEvent("onMouseOut",a)},dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableCheckBoxes=function(a,b){this.checkBoxOff=convertStringToBoolean(a),this.cBROf=!(this.checkBoxOff||convertStringToBoolean(b))},dhtmlXTreeObject.prototype.setStdImages=function(a,b,c){this.imageArray[0]=a,this.imageArray[1]=b,this.imageArray[2]=c},dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setImageArrays=function(a,b,c,d,e,f){switch(a){case"plus":this.plusArray[0]=b,this.plusArray[1]=c,this.plusArray[2]=d,this.plusArray[3]=e,this.plusArray[4]=f;break;case"minus":this.minusArray[0]=b,this.minusArray[1]=c,this.minusArray[2]=d,this.minusArray[3]=e,this.minusArray[4]=f}},dhtmlXTreeObject.prototype.openItem=function(a){this.skipLock=!0;var b=this._globalIdStorageFind(a);return b?this._openItem(b):0},dhtmlXTreeObject.prototype._openItem=function(a){var b=this._getOpenState(a);if(0>b||this.XMLsource&&!a.XMLload){if(!this.callEvent("onOpenStart",[a.id,b]))return 0;this._HideShow(a,2),this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,a.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)]))}else this._srnd&&this._HideShow(a,2);a.parentObject&&!this._skip_open_parent&&this._openItem(a.parentObject)},dhtmlXTreeObject.prototype.closeItem=function(a){if(this.rootId==a)return 0;this.skipLock=!0;var b=this._globalIdStorageFind(a);return b?(b.closeble&&this._HideShow(b,1),void(this.skipLock=!1)):0},dhtmlXTreeObject.prototype.getLevel=function(a){var b=this._globalIdStorageFind(a);return b?this._getNodeLevel(b,0):0},dhtmlXTreeObject.prototype.setItemCloseable=function(a,b){if(b=convertStringToBoolean(b),a&&a.span)var c=a;else var c=this._globalIdStorageFind(a);return c?void(c.closeble=b):0},dhtmlXTreeObject.prototype._getNodeLevel=function(a,b){return a.parentObject?this._getNodeLevel(a.parentObject,b+1):b},dhtmlXTreeObject.prototype.hasChildren=function(a){var b=this._globalIdStorageFind(a);return b?this.XMLsource&&!b.XMLload?!0:b.childsCount:0},dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var b=0,c=0;c<a.childsCount;c++)0==a.childNodes[c].childsCount&&b++;return b},dhtmlXTreeObject.prototype.setItemText=function(a,b,c){var d=this._globalIdStorageFind(a);return d?(d.label=b,d.span.innerHTML=b,this.childCalc&&this._fixChildCountLabel(d),void(d.span.parentNode.parentNode.title=c||"")):0},dhtmlXTreeObject.prototype.getItemTooltip=function(a){var b=this._globalIdStorageFind(a);return b?b.span.parentNode.parentNode._dhx_title||b.span.parentNode.parentNode.title||"":""},dhtmlXTreeObject.prototype.refreshItem=function(a){a||(a=this.rootId);this._globalIdStorageFind(a);this.deleteChildItems(a),this._loadDynXML(a)},dhtmlXTreeObject.prototype.setItemImage2=function(a,b,c,d){var e=this._globalIdStorageFind(a);return e?(e.images[1]=c,e.images[2]=d,e.images[0]=b,void this._correctPlus(e)):0},dhtmlXTreeObject.prototype.setItemImage=function(a,b,c){var d=this._globalIdStorageFind(a);return d?(c?(d.images[1]=b,d.images[2]=c):d.images[0]=b,void this._correctPlus(d)):0},dhtmlXTreeObject.prototype.getSubItems=function(a){var b=this._globalIdStorageFind(a,0,1);if(!b)return 0;if(b.unParsed)return this._getSubItemsXML(b.unParsed);var c="";for(i=0;i<b.childsCount;i++)c?c+=this.dlmtr+b.childNodes[i].id:c=""+b.childNodes[i].id;return c},dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(a.childNodes[c].unParsed)var d=this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllScraggyItems(a.childNodes[c]);d&&(b?b+=this.dlmtr+d:b=d)}else b?b+=this.dlmtr+a.childNodes[c].id:b=""+a.childNodes[c].id;return b},dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(b?b+=this.dlmtr+a.childNodes[c].id:b=""+a.childNodes[c].id,a.childNodes[c].unParsed)var d=this._getAllFatItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllFatItems(a.childNodes[c]);d&&(b+=this.dlmtr+d)}return b},dhtmlXTreeObject.prototype._getAllSubItems=function(a,b,c){if(c)d=c;else var d=this._globalIdStorageFind(a);if(!d)return 0;b="";for(var e=0;e<d.childsCount;e++){b?b+=this.dlmtr+d.childNodes[e].id:b=""+d.childNodes[e].id;var f=this._getAllSubItems(0,b,d.childNodes[e]);f&&(b+=this.dlmtr+f)}return d.unParsed&&(b=this._getAllSubItemsXML(a,b,d.unParsed)),b},dhtmlXTreeObject.prototype.selectItem=function(a,b,c){b=convertStringToBoolean(b);var d=this._globalIdStorageFind(a);if(!d||!d.parentObject)return 0;this.XMLloadingWarning?d.parentObject.openMe=1:this._openItem(d.parentObject);var e=null;c&&(e=new Object,e.ctrlKey=!0,d.i_sel&&(e.skipUnSel=!0)),b?this.onRowSelect(e,d.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1):this.onRowSelect(e,d.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)},dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var a=new Array,b=0;b<this._selected.length;b++)a[b]=this._selected[b].span.innerHTML;return a.join(this.dlmtr)},dhtmlXTreeObject.prototype._compressChildList=function(a,b){a--;for(var c=0;a>c;c++)0==b[c]&&(b[c]=b[c+1],b[c+1]=0)},dhtmlXTreeObject.prototype._deleteNode=function(a,b,c){if(!b||!b.parentObject)return 0;var d=0,e=0;b.tr.nextSibling&&(d=b.tr.nextSibling.nodem),b.tr.previousSibling&&(e=b.tr.previousSibling.nodem);for(var f=b.parentObject,g=f.childsCount,h=f.childNodes,i=0;g>i;i++)if(h[i].id==a){c||f.htmlNode.childNodes[0].removeChild(h[i].tr),h[i]=0;break}this._compressChildList(g,h),c||f.childsCount--,d&&(this._correctPlus(d),this._correctLine(d)),e&&(this._correctPlus(e),this._correctLine(e)),this.tscheck&&this._correctCheckStates(f),c||this._globalIdStorageRecSub(b)},dhtmlXTreeObject.prototype.setCheck=function(a,b){var c=this._globalIdStorageFind(a,0,1);c&&("unsure"===b?this._setCheck(c,b):(b=convertStringToBoolean(b),this.tscheck&&this.smcheck?this._setSubChecked(b,c):this._setCheck(c,b)),this.smcheck&&this._correctCheckStates(c.parentObject))},dhtmlXTreeObject.prototype._setCheck=function(a,b){if(a){if((a.parentObject._r_logic||this._frbtr)&&b)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=a;else for(var c=0;c<a.parentObject.childsCount;c++)this._setCheck(a.parentObject.childNodes[c],0);var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];a.checkstate="unsure"==b?2:b?1:0,a.dscheck&&(a.checkstate=a.dscheck),this._setSrc(d,this.imPath+(a.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[a.checkstate])}},dhtmlXTreeObject.prototype.setSubChecked=function(a,b){var c=this._globalIdStorageFind(a);this._setSubChecked(b,c),this._correctCheckStates(c.parentObject)},dhtmlXTreeObject.prototype._setSubChecked=function(a,b){if(a=convertStringToBoolean(a),b){if((b.parentObject._r_logic||this._frbtr)&&a)for(var c=0;c<b.parentObject.childsCount;c++)this._setSubChecked(0,b.parentObject.childNodes[c]);if(b.unParsed&&this._setSubCheckedXML(a,b.unParsed),b._r_logic||this._frbtr)this._setSubChecked(a,b.childNodes[0]);else for(var c=0;c<b.childsCount;c++)this._setSubChecked(a,b.childNodes[c]);var d=b.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];b.checkstate=a?1:0,b.dscheck&&(b.checkstate=b.dscheck),this._setSrc(d,this.imPath+(b.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[b.checkstate])}},dhtmlXTreeObject.prototype.isItemChecked=function(a){var b=this._globalIdStorageFind(a);if(b)return b.checkstate},dhtmlXTreeObject.prototype.deleteChildItems=function(a){var b=this._globalIdStorageFind(a);if(b)for(var c=b.childsCount,d=0;c>d;d++)this._deleteNode(b.childNodes[0].id,b.childNodes[0])},dhtmlXTreeObject.prototype.deleteItem=function(a,b){if(!this._onrdlh||this._onrdlh(a)){var c=this._deleteItem(a,b);c&&this._fixChildCountLabel(c)}this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype._deleteItem=function(a,b,c){b=convertStringToBoolean(b);var d=this._globalIdStorageFind(a);if(d){var e=this.getParentId(a),f=d.parentObject;return this._deleteNode(a,d,c),this._editCell&&this._editCell.id==a&&(this._editCell=null),this._correctPlus(f),this._correctLine(f),b&&e!=this.rootId&&this.selectItem(e,1),f}},dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var b=0;b<a.childsCount;b++)this._globalIdStorageRecSub(a.childNodes[b]),this._globalIdStorageSub(a.childNodes[b].id);this._globalIdStorageSub(a.id);var c=a;c.span=null,c.tr.nodem=null,c.tr=null,c.htmlNode=null},dhtmlXTreeObject.prototype.insertNewNext=function(a,b,c,d,e,f,g,h,i){var j=this._globalIdStorageFind(a);if(!j||!j.parentObject)return 0;var k=this._attachChildNode(0,b,c,d,e,f,g,h,i,j);return!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(j.parentObject),k},dhtmlXTreeObject.prototype.getItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id},dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id},dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)},dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null),this.selectionBar.style.display="none",this.allTree.className=this.allTree.className.replace(" selectionBox","")},dhtmlXTreeObject.prototype.enableDragAndDrop=function(a,b){"temporary_disabled"==a?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(a),this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this),arguments.length>1&&(this._ddronr=!convertStringToBoolean(b))},dhtmlXTreeObject.prototype._setMove=function(a,b,c){if(a.parentObject.span){var d=getAbsoluteTop(a),e=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;if(this.dadmodec=this.dadmode,this.dadmodefix=0,2==this.dadmode){var f=c-d+(document.body.scrollTop||document.documentElement.scrollTop)-2-a.offsetHeight/2;Math.abs(f)-a.offsetHeight/6>0?(this.dadmodec=1,0>f&&(this.dadmodefix=0-a.offsetHeight)):this.dadmodec=0}if(0==this.dadmodec){var g=a.parentObject.span;g.className+=" dragAndDropRow",this._lastMark=g}else this._clearMove(),this.selectionBar.style.top=d-e+((parseInt(a.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",this.allTree.offsetWidth>20&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="";this._autoScroll(null,d,e)}},dhtmlXTreeObject.prototype._autoScroll=function(a,b,c){this.autoScroll&&(a&&(b=getAbsoluteTop(a),c=getAbsoluteTop(this.allTree)-this.allTree.scrollTop),b-c-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),b-c<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))},dhtmlXTreeObject.prototype._createDragNode=function(a,b){if(!this.dADTempOff)return null;var c=a.parentObject;if(!this.callEvent("onBeforeDrag",[c.id,b]))return null;c.i_sel||this._selectItem(c,b),this._checkMSelectionLogic();var d=document.createElement("div"),e=new Array;if(this._itim_dg)for(var f=0;f<this._selected.length;f++)e[f]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[f].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[f].span.innerHTML+"</td></tr></table>";else e=this.getSelectedItemText().split(this.dlmtr);return d.innerHTML=e.join(""),d.style.position="absolute",d.className="dragSpanDiv",this._dragged=(new Array).concat(this._selected),d},dhtmlXTreeObject.prototype._focusNode=function(a){var b=getAbsoluteTop(a.htmlNode)-getAbsoluteTop(this.allTree);(b>this.allTree.offsetHeight-30||0>b)&&(this.allTree.scrollTop=b+this.allTree.scrollTop)},dhtmlXTreeObject.prototype._preventNsDrag=function(a){return a&&a.preventDefault?(a.preventDefault(),!1):!1},dhtmlXTreeObject.prototype._drag=function(a,b,c){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),c.parentObject||(c=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove();var d=a.parentObject.treeNod;if(d&&d._clearMove&&d._clearMove(""),!this.dragMove||this.dragMove()){if(d&&d._clearMove&&d._dragged)var e=d._dragged;else var e=new Array(a.parentObject);for(var f=c.parentObject,g=0;g<e.length;g++){var h=this._moveNode(e[g],f);this.dadmodec&&h!==!1&&(f=this._globalIdStorageFind(h,!0,!0)),h&&!this._sADnD&&this.selectItem(h,0,1)}}d&&(d._dragged=new Array)},dhtmlXTreeObject.prototype._dragIn=function(a,b,c,d){if(!this.dADTempOff)return 0;var e=b.parentObject,f=a.parentObject;if(f||!this._ddronr){if(!this.callEvent("onDragIn",[e.id,f?f.id:null,e.treeNod,this]))return f&&this._autoScroll(a),0;if(f){if(null==e.childNodes)return this._setMove(a,c,d),a;for(var g=e.treeNod,h=0;h<g._dragged.length;h++)if(this._checkPNodes(f,g._dragged[h]))return this._autoScroll(a),0;this.selectionBar.parentNode.removeChild(this.selectionBar),f.span.parentNode.appendChild(this.selectionBar),this._setMove(a,c,d),this._getOpenState(f)<=0&&(this._autoOpenId=f.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3))}else this.allTree.className+=" selectionBox";return a}},dhtmlXTreeObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)},dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove(),this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)},dhtmlXTreeObject.prototype._getNextNode=function(a,b){return!b&&a.childsCount?a.childNodes[0]:a==this.htmlNode?-1:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:this._getNextNode(a.parentObject,!0)},dhtmlXTreeObject.prototype._lastChild=function(a){return a.childsCount?this._lastChild(a.childNodes[a.childsCount-1]):a},dhtmlXTreeObject.prototype._getPrevNode=function(a){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:-1},dhtmlXTreeObject.prototype.findItem=function(a,b,c){var d=this._findNodeByLabel(a,b,c?this.htmlNode:null);return d?(this.selectItem(d.id,!0),this._focusNode(d),d.id):null},dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,b,c){var d=this._findNodeByLabel(a,b,c?this.htmlNode:null);return d?d.id:null},dhtmlXTreeObject.prototype.findStrInXML=function(a,b,c){if(!a.childNodes&&a.item)return this.findStrInJSON(a,b,c);if(!a.childNodes)return!1;for(var d=0;d<a.childNodes.length;d++)if(1==a.childNodes[d].nodeType){var e=a.childNodes[d].getAttribute(b);if(e||"itemtext"!=a.childNodes[d].tagName||(e=a.childNodes[d].firstChild.data),e&&-1!=e.toLowerCase().search(c))return!0;if(this.findStrInXML(a.childNodes[d],b,c))return!0}return!1},dhtmlXTreeObject.prototype.findStrInJSON=function(a,b,c){for(var d=0;d<a.item.length;d++){var e=a.item[d].text;if(e&&-1!=e.toLowerCase().search(c))return!0;if(a.item[d].item&&this.findStrInJSON(a.item[d],b,c))return!0}return!1},dhtmlXTreeObject.prototype._findNodeByLabel=function(a,b,c){var a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi"),c||(c=this._selected[0],c||(c=this.htmlNode));var d=c;if(b){var e=this._getPrevNode(d);-1==e&&(e=this._lastChild(this.htmlNode)),e.unParsed&&this.findStrInXML(e.unParsed.d,"text",a)?(this.reParse(e),c=this._getPrevNode(d)):c=e,-1==c&&(c=this._lastChild(this.htmlNode))}else c.unParsed&&this.findStrInXML(c.unParsed.d,"text",a)&&this.reParse(c),c=this._getNextNode(d),-1==c&&(c=this.htmlNode.childNodes[0]);for(;c&&c!=d;){if(c.label&&-1!=c.label.search(a))return c;if(b){var e=this._getPrevNode(c);-1==e&&(e=this._lastChild(this.htmlNode)),e.unParsed&&this.findStrInXML(e.unParsed.d,"text",a)?(this.reParse(e),c=this._getPrevNode(c)):c=e,-1==c&&(c=this._lastChild(this.htmlNode))}else{if(-1==c){if(d==this.htmlNode)break;c=this.htmlNode.childNodes[0]}c.unParsed&&this.findStrInXML(c.unParsed.d,"text",a)&&this.reParse(c),c=this._getNextNode(c),-1==c&&(c=this.htmlNode)}}return null},dhtmlXTreeObject.prototype.moveItem=function(a,b,c,d){var e=this._globalIdStorageFind(a);if(!e)return 0;var f=null;switch(b){case"right":alert("Not supported yet");break;case"item_child":var g=(d||this)._globalIdStorageFind(c);if(!g)return 0;f=(d||this)._moveNodeTo(e,g,0);break;case"item_sibling":var g=(d||this)._globalIdStorageFind(c);if(!g)return 0;f=(d||this)._moveNodeTo(e,g.parentObject,g);break;case"item_sibling_next":var g=(d||this)._globalIdStorageFind(c);if(!g)return 0;f=g.tr&&g.tr.nextSibling&&g.tr.nextSibling.nodem?(d||this)._moveNodeTo(e,g.parentObject,g.tr.nextSibling.nodem):(d||this)._moveNodeTo(e,g.parentObject);break;case"left":e.parentObject.parentObject&&(f=this._moveNodeTo(e,e.parentObject.parentObject,e.parentObject));break;case"up":var h=this._getPrevNode(e);if(-1==h||!h.parentObject)return null;f=this._moveNodeTo(e,h.parentObject,h);break;case"up_strict":var h=this._getIndex(e);0!=h&&(f=this._moveNodeTo(e,e.parentObject,e.parentObject.childNodes[h-1]));break;case"down_strict":var h=this._getIndex(e),i=e.parentObject.childsCount-2;h==i?f=this._moveNodeTo(e,e.parentObject):i>h&&(f=this._moveNodeTo(e,e.parentObject,e.parentObject.childNodes[h+2]));break;case"down":var h=this._getNextNode(this._lastChild(e));if(-1==h||!h.parentObject)return;if(h.parentObject==e.parentObject)var h=this._getNextNode(h);if(-1==h)f=this._moveNodeTo(e,e.parentObject);else{if(-1==h||!h.parentObject)return;f=this._moveNodeTo(e,h.parentObject,h)}}return _isIE&&8>_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"),f},dhtmlXTreeObject.prototype.setDragBehavior=function(a,b){switch(this._sADnD=!convertStringToBoolean(b),a){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2}},dhtmlXTreeObject.prototype._loadDynXML=function(a,b){b=b||this.XMLsource;var c=(new Date).valueOf();this._ld_id=a,"function"==this.xmlalb?b&&b(this._escape(a)):this.loadXML("name"==this.xmlalb?b+this._escape(a):"xmlname"==this.xmlalb?b+this._escape(a)+".xml?uid="+c:b+getUrlSymbol(b)+"uid="+c+"&id="+this._escape(a))},dhtmlXTreeObject.prototype.enableMultiselection=function(a,b){this._amsel=convertStringToBoolean(a),this._amselS=convertStringToBoolean(b)},dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var a=new Array,b=0;b<this._selected.length;b++)for(var c=0;c<this._selected.length;c++)b!=c&&this._checkPNodes(this._selected[c],this._selected[b])&&(a[a.length]=this._selected[c]);for(var b=0;b<a.length;b++)this._unselectItem(a[b])},dhtmlXTreeObject.prototype._checkPNodes=function(a,b){return this._dcheckf?!1:b==a?1:a.parentObject?this._checkPNodes(a.parentObject,b):0},dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableDistributedParsing=function(a,b,c){this._edsbps=convertStringToBoolean(a),this._edsbpsA=new Array,this._edsbpsC=b||10,this._edsbpsD=c||250},dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)},dhtmlXTreeObject.prototype.getItemParsingState=function(a){var b=this._globalIdStorageFind(a,!0,!0);if(!b)return 0;if(this._edsbpsA)for(var c=0;c<this._edsbpsA.length;c++)if(this._edsbpsA[c][2]==a)return-1;return 1},dhtmlXTreeObject.prototype._distributedStart=function(a,b,c,d,e){this._edsbpsA||(this._edsbpsA=new Array),this._edsbpsA[this._edsbpsA.length]=[a,b,c,d,e]},dhtmlXTreeObject.prototype._distributedStep=function(a){var b=this;if(!this._edsbpsA||!this._edsbpsA.length)return void(b.XMLloadingWarning=0);var c=this._edsbpsA[0];this.parsedArray=new Array,this._parse(c[0],c[2],c[3],c[1]);var d=this._globalIdStorageFind(c[2]);this._redrawFrom(this,d,c[4],this._getOpenState(d));for(var e=this.setCheckList.split(this.dlmtr),f=0;f<e.length;f++)e[f]&&this.setCheck(e[f],1);this._edsbpsA=(new Array).concat(this._edsbpsA.slice(1)),this._edsbpsA.length||(window.setTimeout(function(){b.onXLE&&b.onXLE(b,a),b.callEvent("onXLE",[b,a])},1),b.xmlstate=0)},dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.preventIECaching=function(a){this.no_cashe=convertStringToBoolean(a),this.XMLLoader.rSeed=this.no_cashe},dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching,dhtmlXTreeObject.prototype.disableCheckbox=function(a,b){if("object"!=typeof a)var c=this._globalIdStorageFind(a,0,1);else var c=a;c&&(c.dscheck=convertStringToBoolean(b)?(c.checkstate||0)%3+3:c.checkstate>2?c.checkstate-3:c.checkstate,this._setCheck(c),c.dscheck<3&&(c.dscheck=!1))},dhtmlXTreeObject.prototype.smartRefreshBranch=function(a,b){this._branchUpdate=1,this.smartRefreshItem(a,b)},dhtmlXTreeObject.prototype.smartRefreshItem=function(a,b){for(var c=this._globalIdStorageFind(a),d=0;d<c.childsCount;d++)c.childNodes[d]._dmark=!0;this.waitUpdateXML=!0,b&&b.exists?this._parse(b,a):this._loadDynXML(a,b)},dhtmlXTreeObject.prototype.refreshItems=function(a,b){var c=a.toString().split(this.dlmtr);this.waitUpdateXML=new Array;for(var d=0;d<c.length;d++)this.waitUpdateXML[c[d]]=!0;this.loadXML((b||this.XMLsource)+getUrlSymbol(b||this.XMLsource)+"ids="+this._escape(a))},dhtmlXTreeObject.prototype.updateItem=function(a,b,c,d,e,f,g){var h=this._globalIdStorageFind(a);return h.userData=new cObject,b&&(h.label=b),h.images=new Array(c||this.imageArray[0],d||this.imageArray[1],e||this.imageArray[2]),this.setItemText(a,b),f&&this._setCheck(h,!0),"1"!=g||this.hasChildren(a)||(h.XMLload=0),this._correctPlus(h),h._dmark=!1,h},dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)},dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)},dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)},dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a},dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate},dhtmlXTreeObject.prototype.setItemTopOffset=function(a,b){var c;c="object"!=typeof a?this._globalIdStorageFind(a):a;var d=c.span.parentNode.parentNode;c.span.style.paddingBottom="1px";for(var e=0;e<d.childNodes.length;e++){if(0!=e)_isIE?(d.childNodes[e].style.height="18px",d.childNodes[e].style.paddingTop=parseInt(b)+"px"):d.childNodes[e].style.height=18+parseInt(b)+"px";else{var f=d.childNodes[e].firstChild;"DIV"!=d.childNodes[e].firstChild.tagName&&(f=document.createElement("DIV"),d.childNodes[e].insertBefore(f,d.childNodes[e].firstChild)),f.style.height=parseInt(b)+"px",c.parentObject.id==this.rootId&&c.parentObject.childNodes[0]==c||!this.treeLinesOn||(f.style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"),f.innerHTML="&nbsp;",f.style.overflow="hidden",0==parseInt(b)&&d.childNodes[e].removeChild(f)}_isIE||(d.childNodes[e].style.verticalAlign="bottom"),_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")}},dhtmlXTreeObject.prototype.setIconSize=function(a,b,c){if(c){if(c&&c.span)var d=c;else var d=this._globalIdStorageFind(c);if(!d)return 0;var e=d.span.parentNode.previousSibling.childNodes[0];a&&(e.style.width=a,window._KHTMLrv&&(e.parentNode.style.width=a)),b&&(e.style.height=b,window._KHTMLrv&&(e.parentNode.style.height=b))}else this.def_img_x=a,this.def_img_y=b},dhtmlXTreeObject.prototype.getItemImage=function(a,b,c){var d=this._globalIdStorageFind(a);if(!d)return"";var e=d.images[b||0];return c&&(e=this.iconURL+e),e},dhtmlXTreeObject.prototype.enableRadioButtons=function(a,b){if(1==arguments.length)return this._frbtr=convertStringToBoolean(a),void(this.checkBoxOff=this.checkBoxOff||this._frbtr);var c=this._globalIdStorageFind(a);if(!c)return"";if(b=convertStringToBoolean(b),b&&!c._r_logic){c._r_logic=!0;for(var d=0;d<c.childsCount;d++)this._setCheck(c.childNodes[d],c.childNodes[d].checkstate)}if(!b&&c._r_logic){c._r_logic=!1;for(var d=0;d<c.childsCount;d++)this._setCheck(c.childNodes[d],c.childNodes[d].checkstate)}},dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!convertStringToBoolean(a)},dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!convertStringToBoolean(a)},dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){this.mlitems=a===!0?"100%":a},dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.clearSelection=function(a){a?this._unselectItem(this._globalIdStorageFind(a)):this._unselectItems()},dhtmlXTreeObject.prototype.showItemSign=function(a,b){var c=this._globalIdStorageFind(a);if(!c)return 0;c.span.parentNode.previousSibling.previousSibling.previousSibling;convertStringToBoolean(b)?(c.closeble=!0,c.wsign=!1):(this._openItem(c),c.closeble=!1,c.wsign=!0),this._correctPlus(c)
},dhtmlXTreeObject.prototype.showItemCheckbox=function(a,b){if(!a)for(var c in this._idpull)this.showItemCheckbox(this._idpull[c],b);if("object"!=typeof a&&(a=this._globalIdStorageFind(a,0,0)),!a)return 0;a.nocheckbox=!convertStringToBoolean(b);var d=a.span.parentNode.previousSibling.previousSibling.childNodes[0];d.parentNode.style.display=a.nocheckbox?"none":""},dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a},dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a},dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=!0,this.ehlta=convertStringToBoolean(a)},dhtmlXTreeObject.prototype._itemMouseOut=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b.callEvent("onMouseOut",[a.id]),a.id==b._l_onMSI&&(b._l_onMSI=null),b.ehlta&&(a.span.className=a.span.className.replace("_lor",""))},dhtmlXTreeObject.prototype._itemMouseIn=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b._l_onMSI!=a.id&&b.callEvent("onMouseIn",[a.id]),b._l_onMSI=a.id,b.ehlta&&(a.span.className=a.span.className.replace("_lor",""),a.span.className=a.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))},dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.focusItem=function(a){var b=this._globalIdStorageFind(a);return b?void this._focusNode(b):0},dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)},dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless,dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(a.childNodes[c].unParsed)var d=this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllScraggyItems(a.childNodes[c]);d&&(b?b+=this.dlmtr+d:b=d)}else b?b+=this.dlmtr+a.childNodes[c].id:b=""+a.childNodes[c].id;return b},dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){if(b?b+=this.dlmtr+a.childNodes[c].id:b=""+a.childNodes[c].id,a.childNodes[c].unParsed)var d=this._getAllFatItemsXML(a.childNodes[c].unParsed,1);else var d=this._getAllFatItems(a.childNodes[c]);d&&(b+=this.dlmtr+d)}return b},dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids,dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)},dhtmlXTreeObject.prototype.getAllUnchecked=function(a){return a&&(a=this._globalIdStorageFind(a)),this._getAllChecked(a,"",0)},dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)},dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)],b=this._getAllChecked("","",2);return b&&a.push(b),a.join(this.dlmtr)},dhtmlXTreeObject.prototype._getAllChecked=function(a,b,c){a||(a=this.htmlNode),a.checkstate==c&&(a.nocheckbox||(b?b+=this.dlmtr+a.id:b=""+a.id));for(var d=a.childsCount,e=0;d>e;e++)b=this._getAllChecked(a.childNodes[e],b,c);return a.unParsed&&(b=this._getAllCheckedXML(a.unParsed,b,c)),b?b:""},dhtmlXTreeObject.prototype.setItemStyle=function(a,b,c){var c=c||!1,d=this._globalIdStorageFind(a);return d?void(d.span.style.cssText?d.span.style.cssText=c?b:d.span.style.cssText+";"+b:d.span.setAttribute("style",d.span.getAttribute("style")+"; "+b)):0},dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)},dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=convertStringToBoolean(a)},dhtmlXTreeObject.prototype.setSkin=function(a){var b=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=b+" dhxtree_"+a,("dhx_terrace"==a||"dhx_web"==a)&&this.enableTreeLines(!1)},function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,a.width||"100%",a.height||"100%",a.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})}(),dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(a,b,c){var d=this._loader.doXPath(".//item",a),e=d[0].getAttribute("text");this.obj.insertNewItem(c,b,e,0,0,0,0,"CHILD")}),a.attachEvent("updateCallback",function(a,b,c){var d=this._loader.doXPath(".//item",a),e=d[0].getAttribute("text");this.obj.setItemText(b,e),this.obj.getParentId(b)!=c&&this.obj.moveItem(b,"item_child",c),this.setUpdated(b,!0,"updated")}),a.attachEvent("deleteCallback",function(a,b){this.obj.setUserData(b,this.action_param,"true_deleted"),this.obj.deleteItem(b,!1)}),a._methods=["setItemStyle","","changeItemId","deleteItem"],this.attachEvent("onEdit",function(b,c){return 3==b&&a.setUpdated(c,!0),!0}),this.attachEvent("onDrop",function(b,c,d,e,f){e==f&&a.setUpdated(b,!0)}),this._onrdlh=function(b){var c=a.getState(b);return"inserted"==c?(a.set_invalid(b,!1),a.setUpdated(b,!1),!0):"true_deleted"==c?(a.setUpdated(b,!1),!0):(a.setUpdated(b,!0,"deleted"),!1)},this._onradh=function(b){a.setUpdated(b,!0,"inserted")},a._getRowData=function(a){var b={},c=this.obj._globalIdStorageFind(a),d=c.parentObject,e=0;for(e=0;e<d.childsCount&&d.childNodes[e]!=c;e++);for(b.tr_id=c.id,b.tr_pid=d.id,b.tr_order=e,b.tr_text=c.span.innerHTML,d=(c._userdatalist||"").split(","),e=0;e<d.length;e++)b[d[e]]=c.userData["t_"+d[e]];return b}},dhtmlXTreeObject.prototype.makeDraggable=function(a,b){"object"!=typeof a&&(a=document.getElementById(a)),dragger=new dhtmlDragAndDropObject,dropper=new dhx_dragSomethingInTree,dragger.addDraggableItem(a,dropper),a.dragLanding=null,a.ondragstart=dropper._preventNsDrag,a.onselectstart=new Function("return false;"),a.parentObject=new Object,a.parentObject.img=a,a.parentObject.treeNod=dropper,dropper._customDrop=b},dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable,dhtmlXTreeObject.prototype.makeAllDraggable=function(a){for(var b=document.getElementsByTagName("div"),c=0;c<b.length;c++)b[c].getAttribute("dragInDhtmlXTree")&&this.makeDragable(b[c],a)},dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=convertStringToBoolean(a),this._eItEdFlag||(this._edn_click_IE=!0,this._edn_dblclick=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(a,b){return this._edn_dblclick&&this._editItem(a,b),!0}),this.setOnClickHandler(function(a,b){return this._stopEditItem(a,b),this.ed_hist_clcik==a&&this._edn_click_IE&&this._editItem(a,b),this.ed_hist_clcik=a,!0}),this._eItEdFlag=!0)},dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent("onEdit",a)},dhtmlXTreeObject.prototype.setEditStartAction=function(a,b){this._edn_click_IE=convertStringToBoolean(a),this._edn_dblclick=convertStringToBoolean(b)},dhtmlXTreeObject.prototype._stopEdit=function(a,b){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=a)){var c=!0;b?(c=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):c=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]),c===!0?c=this._editCell.span.childNodes[0].value:c===!1&&(c=this._editCell._oldValue);var d=c!=this._editCell._oldValue;this._editCell.span.innerHTML=c,this._editCell.label=this._editCell.span.innerHTML;var e=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=e,this._editCell.span.parentNode.className="standartTreeRow",this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px",this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var f=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell),this._editCell=null,b||this.callEvent("onEdit",[3,f,this,d]),this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}},dhtmlXTreeObject.prototype._stopEditItem=function(a){this._stopEdit(a)},dhtmlXTreeObject.prototype.stopEdit=function(a){this._editCell&&this._stopEdit(this._editCell.id+"_non",a)},dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)},dhtmlXTreeObject.prototype._editItem=function(a){if(this._eItEd){this._stopEdit();var b=this._globalIdStorageFind(a);if(!b)return;var c=this.callEvent("onEdit",[0,a,this,b.span.innerHTML]);if(c===!0)c="undefined"!=typeof b.span.innerText?b.span.innerText:b.span.textContent;else if(c===!1)return;this.dADTempOffEd=this.dADTempOff,this.dADTempOff=!1,this._editCell=b,b._oldValue=c,b.span.innerHTML="<input type='text' class='intreeeditRow' />",b.span.style.paddingRight=b.span.style.paddingLeft="0px",b.span.onclick=b.span.ondblclick=function(a){(a||event).cancelBubble=!0},b.span.childNodes[0].value=c,b.span.childNodes[0].onselectstart=function(a){return(a||event).cancelBubble=!0,!0},b.span.childNodes[0].onmousedown=function(a){return(a||event).cancelBubble=!0,!0},b.span.childNodes[0].focus(),b.span.childNodes[0].focus(),b.span.onclick=function(a){return(a||event).cancelBubble=!0,!1},b.span.className="",b.span.parentNode.className="";var d=this;b.span.childNodes[0].onkeydown=function(a){a||(a=window.event),13==a.keyCode?(a.cancelBubble=!0,d._stopEdit(window.undefined)):27==a.keyCode&&d._stopEdit(window.undefined,!0),(a||event).cancelBubble=!0},this.callEvent("onEdit",[1,a,this])}},jsonPointer.prototype={text:function(){var a=function(a){for(var c=[],d=0;d<a.length;d++)c.push("{"+b(a[d])+"}");return c.join(",")},b=function(c){var d=[];for(var e in c)d.push("object"==typeof c[e]?e.length?'"'+e+'":['+a(c[e])+"]":'"'+e+'":{'+b(c[e])+"}":'"'+e+'":"'+c[e]+'"');return d.join(",")};return"{"+b(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(a,b,c){var d=this.d[a],e=new jsonPointer;if(d)for(var f=0;f<d.length;f++)e.d=d[f],b.apply(c,[e,f])},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return!!this.d[a]},each_x:function(a,b,c,d,e){var f=this.d[a],g=new jsonPointer(0,this.d);if(f)for(e=e||0;e<f.length;e++)if(f[e][b]&&(g.d=f[e],-1==c.apply(d,[g,e])))return},up:function(){return new jsonPointer(this.dp,this.d)},set:function(a,b){this.d[a]=b},clone:function(){return new jsonPointer(this.d,this.dp)},through:function(a,b,c,d,e){var f=this.d[a];if(f.length)for(var g=0;g<f.length;g++){if(null!=f[g][b]&&""!=f[g][b]&&(!c||f[g][b]==c)){var h=new jsonPointer(f[g],this.d);d.apply(e,[h,g])}var i=this.d;this.d=f[g],this.sub_exists(a)&&this.through(a,b,c,d,e),this.d=i}}},dhtmlXTreeObject.prototype.loadJSArrayFile=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){eval("var z="+arguments[4].xmlDoc.responseText),that.loadJSArray(z)},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.loadCSV=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var c=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){c.loadCSVString(arguments[4].xmlDoc.responseText)},this,!0,this.no_cashe),b&&(this.XMLLoader.waitCall=b),this.XMLLoader.loadXML(a)},dhtmlXTreeObject.prototype.loadJSArray=function(a,b){for(var c=[],d=0;d<a.length;d++)c[a[d][1]]||(c[a[d][1]]=[]),c[a[d][1]].push({id:a[d][0],text:a[d][2]});var e={id:this.rootId},f=function(a,b){if(c[a.id]){a.item=c[a.id];for(var d=0;d<a.item.length;d++)b(a.item[d],b)}};f(e,f),this.loadJSONObject(e,b)},dhtmlXTreeObject.prototype.loadCSVString=function(a,b){for(var c=[],d=a.split("\n"),e=0;e<d.length;e++){var f=d[e].split(",");c[f[1]]||(c[f[1]]=[]),c[f[1]].push({id:f[0],text:f[2]})}var g={id:this.rootId},h=function(a,b){if(c[a.id]){a.item=c[a.id];for(var d=0;d<a.item.length;d++)b(a.item[d],b)}};h(g,h),this.loadJSONObject(g,b)},dhtmlXTreeObject.prototype.loadJSONObject=function(a,b){this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1;var c=new jsonPointer(a);this._parse(c),this._p=c,b&&b()},dhtmlXTreeObject.prototype.loadJSON=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){try{eval("var t="+arguments[4].xmlDoc.responseText)}catch(e){return void dhtmlxError.throwError("LoadXML","Incorrect JSON",[arguments[4].xmlDoc,this])}var p=new jsonPointer(t);that._parse(p),that._p=p},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var a=['{"id":"'+this.rootId+'", "item":['],b=[],c=0;c<this.htmlNode.childsCount;c++)b.push(this._serializeItemJSON(this.htmlNode.childNodes[c]));return a.push(b.join(",")),a.push("]}"),a.join("")},dhtmlXTreeObject.prototype._serializeItemJSON=function(a){var b=[];if(a.unParsed)return a.unParsed.text();if(this._selected.length)var c=this._selected[0].id;else c="";var d=a.span.innerHTML;if(d=d.replace(/\"/g,'\\"',d),b.push(this._xfullXML?'{ "id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(c==a.id?' "select":"1",':"")+' "text":"'+d+'", "im0":"'+a.images[0]+'", "im1":"'+a.images[1]+'", "im2":"'+a.images[2]+'" '+(a.acolor?', "aCol":"'+a.acolor+'" ':"")+(a.scolor?', "sCol":"'+a.scolor+'" ':"")+(1==a.checkstate?', "checked":"1" ':2==a.checkstate?', "checked":"-1"':"")+(a.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==a.XMLload?', "child":"1" ':""):'{ "id":"'+a.id+'", '+(1==this._getOpenState(a)?' "open":"1", ':"")+(c==a.id?' "select":"1",':"")+' "text":"'+d+'"'+(this.XMLsource&&0==a.XMLload?', "child":"1" ':"")),this._xuserData&&a._userdatalist){b.push(', "userdata":[');for(var e=a._userdatalist.split(","),f=[],g=0;g<e.length;g++)f.push('{ "name":"'+e[g]+'" , "content":"'+a.userData["t_"+e[g]]+'" }');b.push(f.join(",")),b.push("]")}if(a.childsCount){b.push(', "item":[');for(var f=[],g=0;g<a.childsCount;g++)f.push(this._serializeItemJSON(a.childNodes[g]));b.push(f.join(",")),b.push("]\n")}return b.push("}\n"),b.join("")},window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees),dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(a,b){this._idpull[b.id]._attrs=b}},dhtmlXTreeObject.prototype.getAttribute=function(a,b){this._globalIdStorageFind(a);var c=this._idpull[a]._attrs;return c?c[b]:window.undefined},dhtmlXTreeObject.prototype.setAttribute=function(a,b,c){this._globalIdStorageFind(a);var d=this._idpull[a]._attrs||{};d[b]=c,this._idpull[a]._attrs=d},dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(a){if(this._enblkbrd=convertStringToBoolean(a),this._enblkbrd){if(_isFF){var b=window.getComputedStyle(this.parentObject,null).position;"absolute"!=b&&"relative"!=b&&(this.parentObject.style.position="relative")}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var c=this,b=document.createElement("INPUT");b.className="a_dhx_hidden_input",b.autocomplete="off",window._KHTMLrv&&(b.style.color="white"),this.parentObject.appendChild(b),this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(a){return c.callEvent("onKeyPress",[(a||window.event).keyCode,a||window.event])?c._onKeyDown(a||window.event):void 0},this.parentObject.onclick=function(){(_isFF||_isIE)&&b.select(),(window._KHTMLrv||_isOpera)&&b.focus()}}else this.parentObject.onkeydown=null},dhtmlXTreeObject.prototype._onKeyDown=function(a){if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive)return!0;for(var b=0;b<this._navKeys.length;b++)if(this._navKeys[b][1]==a.keyCode)return this["_onkey_"+this._navKeys[b][0]].apply(this,[this.getSelectedItemId()]),a.preventDefault&&a.preventDefault(),(a||event).cancelBubble=!0,!1;return this._textSearch?this._searchItemByKey(a):!0},dhtmlXTreeObject.prototype._onkey_up=function(a){var b=this._globalIdStorageFind(a);if(b){var c=this._getPrevVisibleNode(b);c.id!=this.rootId&&(this.focusItem(c.id),this.selectItem(c.id,!1))}},dhtmlXTreeObject.prototype._onkey_down=function(a){var b=this._globalIdStorageFind(a);if(b){var c=this._getNextVisibleNode(b);c.id!=this.rootId&&(this.focusItem(c.id),this.selectItem(c.id,!1))}},dhtmlXTreeObject.prototype._onkey_open=function(a){this.openItem(a)},dhtmlXTreeObject.prototype._onkey_close=function(a){this.closeItem(a)},dhtmlXTreeObject.prototype._onkey_call=function(a){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(a,!0)):this.selectItem(this.getSelectedItemId(),!0)},dhtmlXTreeObject.prototype._onkey_edit=function(a){this.editItem&&this.editItem(a)},dhtmlXTreeObject.prototype._getNextVisibleNode=function(a,b){return!b&&this._getOpenState(a)>0?a.childNodes[0]:a.tr&&a.tr.nextSibling&&a.tr.nextSibling.nodem?a.tr.nextSibling.nodem:a.parentObject?this._getNextVisibleNode(a.parentObject,1):a},dhtmlXTreeObject.prototype._getPrevVisibleNode=function(a){return a.tr&&a.tr.previousSibling&&a.tr.previousSibling.nodem?this._lastVisibleChild(a.tr.previousSibling.nodem):a.parentObject?a.parentObject:a},dhtmlXTreeObject.prototype._lastVisibleChild=function(a){return this._getOpenState(a)>0?this._lastVisibleChild(a.childNodes[a.childsCount-1]):a},dhtmlXTreeObject.prototype._searchItemByKey=function(a){if(8==a.keyCode)return this._textSearchString="",!0;var b=String.fromCharCode(a.keyCode).toUpperCase();return b.match(/[A-Z,a-z,0-9\ ]/)?(this._textSearchString+=b,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem(this._textSearchString,0),this._textSearchInProgress=!1,a.preventDefault&&a.preventDefault(),(a||event).cancelBubble=!0,!1):!0},dhtmlXTreeObject.prototype.assignKeys=function(a){this._navKeys=a},dhtmlXTreeObject.prototype.enableKeySearch=function(a){if(this._textSearch=convertStringToBoolean(a),this._textSearch){this._textSearchString="";var b=this;this._markItem2=this._markItem,this._markItem=function(a){b._textSearchInProgress||(b._textSearchString=""),b._markItem2(a)}}},dhtmlXTreeObject.prototype.enableLoadingItem=function(a){this.attachEvent("onXLS",this._showFakeItem),this.attachEvent("onXLE",this._hideFakeItem),this._tfi_text=a||"Loading..."},dhtmlXTreeObject.prototype._showFakeItem=function(a,b){if(null!==b&&!this._globalIdStorageFind("fake_load_xml_"+b)){var c=this.XMLsource;this.XMLsource=null,this.insertNewItem(b,"fake_load_xml_"+b,this._tfi_text),this.XMLsource=c}},dhtmlXTreeObject.prototype._hideFakeItem=function(a,b){null!==b&&this.deleteItem("fake_load_xml_"+b)},dhtmlXTreeObject.prototype.isLocked=function(a){return this._locker||this._init_lock(),1==this._locker[a]},dhtmlXTreeObject.prototype._lockItem=function(a,b,c){if(this._locker||this._init_lock(),b){if(1==this._locker[a.id])return;this._locker[a.id]=!0,a.bIm0=a.images[0],a.bIm1=a.images[1],a.bIm2=a.images[2],a.images[0]=this.lico0,a.images[1]=this.lico1,a.images[2]=this.lico2;var d=a.span.parentNode,e=d.previousSibling;this.dragger.removeDraggableItem(d),this.dragger.removeDraggableItem(e)}else{if(1!=this._locker[a.id])return;this._locker[a.id]=!1,a.images[0]=a.bIm0,a.images[1]=a.bIm1,a.images[2]=a.bIm2;var d=a.span.parentNode,e=d.previousSibling;this.dragger.addDraggableItem(d,this),this.dragger.addDraggableItem(e,this)}c||this._correctPlus(a)},dhtmlXTreeObject.prototype.lockItem=function(a,b){this._locker||this._init_lock(),this._lockOn=!1;var c=this._globalIdStorageFind(a);this._lockOn=!0,this._lockItem(c,convertStringToBoolean(b))},dhtmlXTreeObject.prototype.setLockedIcons=function(a,b,c){this._locker||this._init_lock(),this.lico0=a,this.lico1=b,this.lico2=c},dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array,this._locker_count="0",this._lockOn=!0,this._globalIdStorageFindA=this._globalIdStorageFind,this._globalIdStorageFind=this._lockIdFind,this._serializeItem&&(this._serializeItemA=this._serializeItem,this._serializeItem=this._serializeLockItem,this._serializeTreeA=this.serializeTree,this.serializeTree=this._serializeLockTree),this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])},dhtmlXTreeObject.prototype._lockIdFind=function(a,b,c){return this.skipLock||c||1!=this._lockOn||1!=this._locker[a]?this._globalIdStorageFindA(a,b,c):null},dhtmlXTreeObject.prototype._serializeLockItem=function(a){return 1==this._locker[a.id]?"":this._serializeItemA(a)},dhtmlXTreeObject.prototype._serializeLockTree=function(){var a=this._serializeTreeA();return a.replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")},dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo,dhtmlXTreeObject.prototype._moveNodeTo=function(a,b,c){return b.treeNod.isLocked&&b.treeNod.isLocked(b.id)?!1:this._moveNodeToA(a,b,c)},dhtmlXTreeObject.prototype.lockTree=function(a){convertStringToBoolean(a)?this._initTreeLocker():this._TreeLocker&&(this._TreeLocker.parentNode.removeChild(this._TreeLocker),this._TreeLocker=null)},dhtmlXTreeObject.prototype._initTreeLocker=function(){if(!this._TreeLocker){this.parentObject.style.overflow="hidden","absolute"!=this.parentObject.style.position&&(this.parentObject.style.position="relative");var a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.className="dhx_tree_opacity",a.style.width=this.allTree.offsetWidth+"px",a.style.backgroundColor="#FFFFFF",a.style.height=this.allTree.offsetHeight+"px",this._TreeLocker=a,this.parentObject.appendChild(this._TreeLocker)}},dhtmlXTreeObject.prototype.enableRTL=function(a){var b=convertStringToBoolean(a);(b&&!this.rtlMode||!b&&this.rtlMode)&&(this.rtlMode=b,this._switchToRTL(this.rtlMode))},dhtmlXTreeObject.prototype._switchToRTL=function(a){a?(this.allTree.className=this._ltr_line=this.lineArray,this._ltr_min=this.minusArray,this._ltr_plus=this.plusArray,this.lineArray=new Array("line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif"),this.minusArray=new Array("minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif"),this.plusArray=new Array("plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif"),this.allTree.className="containerTableStyleRTL"):(this.allTree.className="containerTableStyle",this.lineArray=this._ltr_line,this.minusArray=this._ltr_min,this.plusArray=this._ltr_plus),this.htmlNode.childsCount&&this._redrawFrom(this,this.htmlNode)},dhtmlXTreeObject.prototype.sortTree=function(a,b,c){var d=this._globalIdStorageFind(a);return d?void this._reorderBranch(d,"asc"==b.toString().toLowerCase(),convertStringToBoolean(c)):!1},dhtmlXTreeObject.prototype.setCustomSortFunction=function(a){this._csfunca=a},dhtmlXTreeObject.prototype._reorderBranch=function(a,b,c){var d=[],e=a.childsCount;if(e){for(var f=a.childNodes[0].tr.parentNode,g=0;e>g;g++)d[g]=a.childNodes[g],f.removeChild(d[g].tr);var h=this;d.sort(1==b?this._csfunca?function(a,b){return h._csfunca(a.id,b.id)}:function(a,b){return a.span.innerHTML.toUpperCase()>b.span.innerHTML.toUpperCase()?1:a.span.innerHTML.toUpperCase()==b.span.innerHTML.toUpperCase()?0:-1}:this._csfunca?function(a,b){return h._csfunca(b.id,a.id)}:function(a,b){return a.span.innerHTML.toUpperCase()<b.span.innerHTML.toUpperCase()?1:a.span.innerHTML.toUpperCase()==b.span.innerHTML.toUpperCase()?0:-1});for(var g=0;e>g;g++)f.appendChild(d[g].tr),a.childNodes[g]=d[g],c&&d[g].unParsed?d[g].unParsed.set("order",b?1:-1):c&&d[g].childsCount&&this._reorderBranch(d[g],b,c);for(var g=0;e>g;g++)this._correctPlus(d[g]),this._correctLine(d[g])}},dhtmlXTreeObject.prototype._reorderXMLBranch=function(a){var b=a.getAttribute("order");if("none"!=b){var c=1==b,d=a.childNodes.length;if(d){for(var e=new Array,f=0,g=0;d>g;g++)1==a.childNodes[g].nodeType&&(e[f]=a.childNodes[g],f++);for(var g=d-1;0!=g;g--)a.removeChild(a.childNodes[g]);e.sort(c?function(a,b){return a.getAttribute("text")>b.getAttribute("text")?1:a.getAttribute("text")==b.getAttribute("text")?0:-1}:function(a,b){return a.getAttribute("text")<b.getAttribute("text")?1:a.getAttribute("text")==b.getAttribute("text")?0:-1});for(var g=0;f>g;g++)e[g].setAttribute("order",b),a.appendChild(e[g]);a.setAttribute("order","none")}}},dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]],dhtmlXTreeObject.prototype.registerXMLEntity=function(a,b){this._serEnts[this._serEnts.length]=[a,b,new RegExp(a,"g")]},dhtmlXTreeObject.prototype.setSerializationLevel=function(a,b,c,d,e){this._xuserData=convertStringToBoolean(a),this._xfullXML=convertStringToBoolean(b),this._dtd=e,this._xescapeEntities=convertStringToBoolean(c),convertStringToBoolean(d)&&(this._apreUC="<![CDATA[",this._apstUC="]]>");for(var f=0;f<this._serEnts.length;f++)this._serEnts[f][2]=new RegExp(this._serEnts[f][0],"g")},dhtmlXTreeObject.prototype.serializeTree=function(){this.stopEdit&&this.stopEdit(),this._apreUC=this._apreUC||"",this._apstUC=this._apstUC||"";var a='<?xml version="1.0"?>';if(this._dtd&&(a+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'),a+='<tree id="'+this.rootId+'">',this._xuserData&&this._idpull[this.rootId]._userdatalist)for(var b=this._idpull[this.rootId]._userdatalist.split(","),c=0;c<b.length;c++)a+='<userdata name="'+b[c]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+b[c]]+this._apstUC+"</userdata>";for(var c=0;c<this.htmlNode.childsCount;c++)a+=this._serializeItem(this.htmlNode.childNodes[c]);return a+="</tree>"},dhtmlXTreeObject.prototype._serializeItem=function(a){if(a.unParsed){if(document.all)return a.unParsed.d.xml;var b=new XMLSerializer;return b.serializeToString(a.unParsed.d)}var c="";if(this._selected.length)var d=this._selected[0].id;else d='"';var e=a.span.innerHTML;if(this._xescapeEntities)for(var f=0;f<this._serEnts.length;f++)e=e.replace(this._serEnts[f][2],this._serEnts[f][1]);if(c=this._xfullXML?'<item id="'+a.id+'" '+(1==this._getOpenState(a)?' open="1" ':"")+(d==a.id?' select="1"':"")+' text="'+e+'" im0="'+a.images[0]+'" im1="'+a.images[1]+'" im2="'+a.images[2]+'" '+(a.acolor?'aCol="'+a.acolor+'" ':"")+(a.scolor?'sCol="'+a.scolor+'" ':"")+(1==a.checkstate?'checked="1" ':2==a.checkstate?'checked="-1"':"")+(a.closeable?'closeable="1" ':"")+(this.XMLsource&&0==a.XMLload?' child="1" ':"")+">":'<item id="'+a.id+'" '+(1==this._getOpenState(a)?' open="1" ':"")+(d==a.id?' select="1"':"")+' text="'+e+'"'+(this.XMLsource&&0==a.XMLload?' child="1" ':"")+">",this._xuserData&&a._userdatalist)for(var g=a._userdatalist.split(","),f=0;f<g.length;f++)c+='<userdata name="'+g[f]+'">'+this._apreUC+a.userData["t_"+g[f]]+this._apstUC+"</userdata>";for(var f=0;f<a.childsCount;f++)c+=this._serializeItem(a.childNodes[f]);return c+="</item>"},dhtmlXTreeObject.prototype.saveSelectedItem=function(a,b){a=a||"",this.setCookie("treeStateSelected"+a,this.getSelectedItemId(),b)},dhtmlXTreeObject.prototype.restoreSelectedItem=function(a){a=a||"";var b=this.getCookie("treeStateSelected"+a);this.selectItem(b,!1)},dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(a,b){this.assMode=convertStringToBoolean(a),this.assMode&&!this.oldOnSelect&&(this.oldOnSelect=this.onRowSelect,this.onRowSelect=function(a,b,c){b||(b=this),b.parentObject.treeNod.oldOnSelect(a,b,c),b.parentObject.treeNod.assMode&&b.parentObject.treeNod.saveSelectedItem(b.parentObject.treeNod.assCookieName)}),this.assCookieName=b},dhtmlXTreeObject.prototype.saveState=function(a,b){var c=this._escape(this.serializeTree()),d=4e3;if(c.length>d){if(-1!=navigator.appName.indexOf("Microsoft"))return!1;this.setCookie("treeStatex"+a,Math.ceil(c.length/d));for(var e=0;e<Math.ceil(c.length/d);e++)this.setCookie("treeStatex"+a+"x"+e,c.substr(e*d,d),b)}else this.setCookie("treeStatex"+a,c,b);var c=this.getCookie("treeStatex"+a);return c?!0:(this.setCookie("treeStatex"+a,"",b),!1)},dhtmlXTreeObject.prototype.loadState=function(a){var b=this.getCookie("treeStatex"+a);if(!b)return!1;if(b.length){if(b.toString().length<4){for(var c="",d=0;b>d;d++)c+=this.getCookie("treeStatex"+a+"x"+d);b=c}this.loadXMLString("utf8"==this.utfesc?decodeURI(b):unescape(b))}return!0},dhtmlXTreeObject.prototype.setCookie=function(a,b,c){var d=a+"="+b+(c?"; "+c:"");document.cookie=d},dhtmlXTreeObject.prototype.getCookie=function(a){var b=a+"=";if(document.cookie.length>0){var c=document.cookie.indexOf(b);if(-1!=c){c+=b.length;var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),document.cookie.substring(c,d)}}},dhtmlXTreeObject.prototype.saveOpenStates=function(a,b){for(var c=[],d=0;d<this.htmlNode.childsCount;d++)c=c.concat(this._collectOpenStates(this.htmlNode.childNodes[d]));c=c.join(this.dlmtr),this.setCookie("treeOpenStatex"+a,c,b)},dhtmlXTreeObject.prototype.loadOpenStates=function(a){for(var b=0;b<this.htmlNode.childsCount;b++)this._xcloseAll(this.htmlNode.childNodes[b]);this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0";var c=getCookie("treeOpenStatex"+a);if(c)for(var d=c.split(this.dlmtr),b=0;b<d.length;b++){var e=this._globalIdStorageFind(d[b]);if(e){if(this.XMLsource&&!e.XMLload&&e.id!=this.rootId)return void this._delayedLoad(e,"loadOpenStates('"+a+"')");this.openItem(d[b])}}this.callEvent("onAllOpenDynamic",[])},dhtmlXTreeObject.prototype._delayedLoad=function(a,b){this.afterLoadMethod=b,this.onLoadReserve=this.onXLE,this.onXLE=this._delayedLoadStep2,this._loadDynXML(a.id)},dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve,window.setTimeout(function(){dhtmlx.temp=tree,eval("dhtmlx.temp."+tree.afterLoadMethod)},100),tree.onXLE&&tree.onXLE(tree),tree.callEvent("onXLE",[tree])},dhtmlXTreeObject.prototype._collectOpenStates=function(a){var b=[];if(1==this._getOpenState(a)){b.push(a.id);for(var c=0;c<a.childsCount;c++)b=b.concat(this._collectOpenStates(a.childNodes[c]))}return b},dhtmlXTreeObject.prototype.openAllItemsDynamic=function(a){this.ClosedElem=new Array,this.G_node=null;var b=this._globalIdStorageFind(a||this.rootId);b.id!=this.rootId&&0!=this.getOpenState(b.id)&&this.openItem(a),this._openAllNodeChilds(b,0),this.ClosedElem.length>0&&(this.onLoadReserve=this.onXLE,this.onXLE=this._loadAndOpen,this._loadAndOpen(this))},dhtmlXTreeObject.prototype._openAllNodeChilds=function(a){(0==a.XMLload||a.unParsed)&&this.ClosedElem.push(a);for(var b=0;b<a.childsCount;b++)this._getOpenState(a.childNodes[b])<0&&this._HideShow(a.childNodes[b],2),a.childNodes[b].childsCount>0&&this._openAllNodeChilds(a.childNodes[b]),(0==a.childNodes[b].XMLload||a.childNodes[b].unParsed)&&this.ClosedElem.push(a.childNodes[b])},dhtmlXTreeObject.prototype._loadAndOpen=function(a){a.G_node&&(a._openItem(a.G_node),a._openAllNodeChilds(a.G_node),a.G_node=null),a.ClosedElem.length>0&&(a.G_node=a.ClosedElem.shift()),a.G_node?a.G_node.unParsed?a.reParse(a.G_node):window.setTimeout(function(){a._loadDynXML(a.G_node.id)
},100):(a.onXLE=a.onLoadReserve,a.onXLE&&a.onXLE(a),a.callEvent("onAllOpenDynamic",[a]))},dhtmlXTreeObject.prototype.openItemsDynamic=function(a,b){this.onXLE!=this._stepOpen&&(this._opnItmsDnmcFlg=convertStringToBoolean(b),this.onLoadReserve=this.onXLE,this.onXLE=this._stepOpen,this.ClosedElem=a.split(",").reverse(),this._stepOpen(this))},dhtmlXTreeObject.prototype._stepOpen=function(a){if(!a.ClosedElem.length)return a.onXLE=a.onLoadReserve,a._opnItmsDnmcFlg&&a.selectItem(a.G_node,!0),a.onXLE&&arguments[1]&&a.onXLE.apply(a,arguments),void a.callEvent("onOpenDynamicEnd",[]);a.G_node=a.ClosedElem.pop(),a.skipLock=!0;var b=a._globalIdStorageFind(a.G_node);b&&(0===b.XMLload?a.openItem(a.G_node):(a.openItem(a.G_node),a._stepOpen(a))),a.skipLock=!1};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")},dhtmlxArray._master={_dhx_find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},_dhx_insertAt:function(a,b){this[this.length]=null;for(var c=this.length-1;c>=a;c--)this[c]=this[c-1];this[a]=b},_dhx_removeAt:function(a){this.splice(a,1)},_dhx_swapItems:function(a,b){var c=this[a];this[a]=this[b],this[b]=c}},dhtmlXGridObject.prototype={getRowAttribute:function(a,b){return this.getRowById(a)._attrs[b]},setRowAttribute:function(a,b,c){this.getRowById(a)._attrs[b]=c},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(a,b){var c=(convertStringToBoolean(b),this.getRowById(a));if(c){if(""===c.expand&&this.collapseKids(c),b&&"none"!=c.style.display){c.style.display="none";var d=this.selectedRows._dhx_find(c);if(-1!=d){c.className=c.className.replace("rowselected","");for(var e=0;e<c.childNodes.length;e++)c.childNodes[e].className=c.childNodes[e].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(d)}this.callEvent("onGridReconstructed",[])}b||"none"!=c.style.display||(c.style.display="",this.callEvent("onGridReconstructed",[])),this.callEvent("onRowHide",[a,b]),this.setSizes()}},setColumnHidden:function(a,b){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[a]=b;this.fldSorted&&this.fldSorted.cellIndex==a&&b&&(this.sortImg.style.display="none");var c=convertStringToBoolean(b);if(c){if(this._hrrar){if(this._hrrar[a])return}else this._hrrar=new Array;this._hrrar[a]="display:none;",this._hideShowColumn(a,"none")}else{if(!this._hrrar||!this._hrrar[a])return;this._hrrar[a]="",this._hideShowColumn(a,"")}this.fldSorted&&this.fldSorted.cellIndex==a&&!b&&(this.sortImg.style.display="inline"),this.setSortImgPos(),this.callEvent("onColumnHidden",[a,b])},isColumnHidden:function(a){return this._hrrar&&this._hrrar[a]?!0:!1},setColumnsVisibility:function(a){if(a&&(this._ivizcol=a.split(this.delim)),this.hdr.rows.length&&this._ivizcol)for(var b=0;b<this._ivizcol.length;b++)this.setColumnHidden(b,this._ivizcol[b])},_fixHiddenRowsAll:function(a,b,c,d,e){e=e||"_cellIndex";for(var f=a.rows.length,g=0;f>g;g++){var h=a.rows[g].childNodes;if(h.length!=this._cCount){for(var i=0;i<h.length;i++)if(h[i][e]==b){h[i].style[c]=d;break}}else h[b].style[c]=d}},_hideShowColumn:function(a,b){var c=a;if(this.hdr.rows[1]&&this.hdr.rows[1]._childIndexes&&this.hdr.rows[1]._childIndexes[a]!=a&&(c=this.hdr.rows[1]._childIndexes[a]),"none"==b){this.hdr.rows[0].cells[a]._oldWidth=this.hdr.rows[0].cells[a].style.width||this.initCellWidth[a]+"px",this.hdr.rows[0].cells[a]._oldWidthP=this.cellWidthPC[a],this.obj.rows[0].cells[a].style.width="0px";var d={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&d.rows.push(this.rowsAr[a])}),this._fixHiddenRowsAll(d,a,"display","none"),this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,"none"),(_isOpera&&9>_OperaRv||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","none","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","none"),this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","nowrap","_cellIndexS"),this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth)),this.cellWidthPX[a]&&(this.cellWidthPX[a]=0),this.cellWidthPC[a]&&(this.cellWidthPC[a]=0)}else if(this.hdr.rows[0].cells[a]._oldWidth){var e=this.hdr.rows[0].cells[a];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,a,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],a,"display","");var d={rows:[this.obj.rows[0]]};this.forEachRow(function(a){"TR"==this.rowsAr[a].tagName&&d.rows.push(this.rowsAr[a])}),this._fixHiddenRowsAll(d,a,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(a,""),this._fixHiddenRowsAll(this.hdr,a,"whiteSpace","normal","_cellIndexS"),e._oldWidthP&&(this.cellWidthPC[a]=e._oldWidthP),e._oldWidth&&(this.cellWidthPX[a]=parseInt(e._oldWidth))}this.setSizes(),_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(a){this._ecspn=convertStringToBoolean(a)},enableRowsHover:function(a,b){this._unsetRowHover(!1,!0),this._hvrCss=b,convertStringToBoolean(a)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(a,b,c){this._sclE=convertStringToBoolean(a),this._dclE=convertStringToBoolean(b),this._f2kE=convertStringToBoolean(c)},enableLightMouseNavigation:function(a){convertStringToBoolean(a)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");b&&(this.grid.editStop(),this.grid.doClick(b),this.grid.editCell(),(a||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(a,b){if(that=b?this:this.grid,that._lahRw&&that._lahRw!=b){for(var c=0;c<that._lahRw.childNodes.length;c++)that._lahRw.childNodes[c].className=that._lahRw.childNodes[c].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(b&&b.parentNode!=this.grid._lahRw){if(this.grid._unsetRowHover(0,b),b=b.parentNode,!b.idd||"__filler__"==b.idd)return;for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].className+=" "+this.grid._hvrCss;this.grid._lahRw=b}this._honmousemove(a)},_autoMoveSelect:function(a){if(!this.grid.editor){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");b.parentNode.idd&&this.grid.doClick(b,!0,0)}this._onmousemove(a)},enableDistributedParsing:function(a,b,c){convertStringToBoolean(a)?(this._ads_count=b||10,this._ads_time=c||250):this._ads_count=0},destructor:function(){if(this.editStop(!0),this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime)),this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,""),this.formInputs)for(var a=0;a<this.formInputs.length;a++)this.parentForm.removeChild(this.formInputs[a]);var b;this.xmlLoader=this.xmlLoader.destructor();for(var a=0;a<this.rowsCol.length;a++)this.rowsCol[a]&&(this.rowsCol[a].grid=null);for(a in this.rowsAr)this.rowsAr[a]&&(this.rowsAr[a]=null);this.rowsCol=new dhtmlxArray,this.rowsAr={},this.entBox.innerHTML="";var c=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=c,this.setSizes=this._update_srnd_view=this.callEvent=c,this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null,this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=c,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=c);for(b in this)this[b]&&this[b].m_obj&&(this[b].m_obj=null),this[b]=null;return this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null),null},getSortingState:function(){var a=new Array;return this.fldSorted&&(a[0]=this.fldSorted._cellIndex,a[1]="dhxgrid_sort_desc"==this.sortImg.className?"des":"asc"),a},enableAutoHeight:function(a,b,c){this._ahgr=convertStringToBoolean(a),this._ahgrF=convertStringToBoolean(c),this._ahgrM=b||null,1==arguments.length&&(this.objBox.style.overflowY=a?"hidden":"auto"),"auto"==b&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(a){this._sst=convertStringToBoolean(a),this.rowsCol.stablesort=function(a){for(var b=this.length-1,c=0;c<this.length-1;c++){for(var d=0;b>d;d++)if(a(this[d],this[d+1])>0){var e=this[d];this[d]=this[d+1],this[d+1]=e}b--}}},enableKeyboardSupport:function(a){this._htkebl=!convertStringToBoolean(a)},enableContextMenu:function(a){this._ctmndx=a},setScrollbarWidthCorrection:function(){},enableTooltips:function(a){this._enbTts=a.split(",");for(var b=0;b<this._enbTts.length;b++)this._enbTts[b]=convertStringToBoolean(this._enbTts[b])},enableResizing:function(a){this._drsclmn=a.split(",");for(var b=0;b<this._drsclmn.length;b++)this._drsclmn[b]=convertStringToBoolean(this._drsclmn[b])},setColumnMinWidth:function(a,b){2==arguments.length?(this._drsclmW||(this._drsclmW=new Array),this._drsclmW[b]=a):this._drsclmW=a.split(",")},enableCellIds:function(a){this._enbCid=convertStringToBoolean(a)},lockRow:function(a,b){var c=this.getRowById(a);c&&(c._locked=convertStringToBoolean(b),this.cell&&this.cell.parentNode.idd==a&&this.editStop())},_getRowArray:function(a){for(var b=new Array,c=0;c<a.childNodes.length;c++){var d=this.cells3(a,c);b[c]=d.getValue()}return b},setDateFormat:function(a,b){this._dtmask=a,this._dtmask_inc=b},setNumberFormat:function(a,b,c,d){var e=a.replace(/[^0\,\.]*/g,""),f=e.indexOf(".");f>-1&&(f=e.length-f-1);var g=e.indexOf(",");g>-1&&(g=e.length-f-2-g),"string"!=typeof c&&(c=this.i18n.decimal_separator),"string"!=typeof d&&(d=this.i18n.group_separator);var h=a.split(e)[0],i=a.split(e)[1];this._maskArr[b]=[f,g,h,i,c,d]},_aplNFb:function(a,b){var c=this._maskArr[b];if(!c)return a;var d=parseFloat(a.toString().replace(/[^0-9]*/g,""));return"-"==a.toString().substr(0,1)&&(d=-1*d),c[0]>0&&(d/=Math.pow(10,c[0])),d},_aplNF:function(a,b){var c=this._maskArr[b];if(!c)return a;var d=(parseFloat(a)<0?"-":"")+c[2];if(a=Math.abs(Math.round(parseFloat(a)*Math.pow(10,c[0]>0?c[0]:0))).toString(),a=(a.length<c[0]?Math.pow(10,c[0]+1-a.length).toString().substr(1,c[0]+1)+a.toString():a).split("").reverse(),a[c[0]]=(a[c[0]]||"0")+c[4],c[1]>0)for(var e=(c[0]>0?0:1)+c[0]+c[1];e<a.length;e+=c[1])a[e]+=c[5];return d+a.reverse().join("")+c[3]},_launchCommands:function(a){for(var b=0;b<a.length;b++){for(var c=new Array,d=0;d<a[b].childNodes.length;d++)1==a[b].childNodes[d].nodeType&&(c[c.length]=a[b].childNodes[d].firstChild.data);this[a[b].getAttribute("command")].apply(this,c)}},_parseHead:function(a){var b=this.xmlLoader.doXPath("./head",a);if(b.length){var c=this.xmlLoader.doXPath("./column",b[0]),d=this.xmlLoader.doXPath("./settings",b[0]),e="setInitWidths",f=!1;if(d[0])for(var g=0;g<d[0].childNodes.length;g++)switch(d[0].childNodes[g].tagName){case"colwidth":d[0].childNodes[g].firstChild&&"%"==d[0].childNodes[g].firstChild.data&&(e="setInitWidthsP");break;case"splitat":f=d[0].childNodes[g].firstChild?d[0].childNodes[g].firstChild.data:!1}if(this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call",b[0])),c.length>0){this.hdr.rows.length>0&&this.clearAll(!0);for(var h=[[],[],[],[],[],[],[],[],[]],i=["","width","type","align","sort","color","format","hidden","id"],j=["",e,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],k=0;k<c.length;k++){for(var l=1;l<i.length;l++)h[l].push(c[k].getAttribute(i[l]));h[0].push((c[k].firstChild?c[k].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(h[0]);for(var k=0;k<j.length;k++)j[k]&&this[j[k]](h[k].join(this.delim));for(var k=0;k<c.length;k++)if(0==this.cellType[k].indexOf("co")||"clist"==this.cellType[k]){var m=this.xmlLoader.doXPath("./option",c[k]);if(m.length){var n=new Array;if("clist"==this.cellType[k]){for(var l=0;l<m.length;l++)n[n.length]=m[l].firstChild?m[l].firstChild.data:"";this.registerCList(k,n)}else for(var o=this.getCombo(k),l=0;l<m.length;l++)o.put(m[l].getAttribute("value"),m[l].firstChild?m[l].firstChild.data:"")}}else h[6][k]&&(-1!=this.cellType[k].toLowerCase().indexOf("calendar")||"date"==this.fldSort[k]?this.setDateFormat(h[6][k]):this.setNumberFormat(h[6][k],k));this.init();var p=h[7].join(this.delim);this.setColHidden&&""!=p.replace(/,/g,"")&&this.setColHidden(p),f&&this.splitAt&&this.splitAt(f)}this._launchCommands(this.xmlLoader.doXPath("./afterInit/call",b[0]))}var q=this.xmlLoader.doXPath("//rows/userdata",a);if(q.length>0){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(var l=0;l<q.length;l++){for(var r="",s=0;s<q[l].childNodes.length;s++)r+=q[l].childNodes[s].nodeValue;this.UserData.gridglobaluserdata.put(q[l].getAttribute("name"),r)}}},getCheckedRows:function(a){var b=new Array;return this.forEachRowA(function(c){var d=this.cells(c,a);d.changeState&&0!=d.getValue()&&b.push(c)},!0),b.join(",")},checkAll:function(){for(var a=arguments.length?arguments[0]:1,b=0;b<this.getColumnsNum();b++)"ch"==this.getColType(b)&&this.setCheckedRows(b,a)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(a,b){this.forEachRowA(function(c){this.cells(c,a).isCheckbox()&&this.cells(c,a).setValue(b)})},_drawTooltip:function(a){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(!b||this.grid.editor&&this.grid.editor.cell==b)return!0;var c=b.parentNode;if(c.idd&&"__filler__"!=c.idd){var d=a?a.target:event.srcElement;if(c.idd==window.unknown)return!0;if(!this.grid.callEvent("onMouseOver",[c.idd,b._cellIndex,a||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[b._cellIndex])return d.title&&(d.title=""),!0;if(!(b._cellIndex>=this.grid._cCount)){var e=this.grid.cells3(c,b._cellIndex);if(e&&e.cell&&e.cell._attrs)return d._title&&(e.cell.title=""),e.cell._attrs.title||(d._title=!0),e&&(d.title=e.cell._attrs.title||(e.getTitle?e.getTitle():(e.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}}},enableCellWidthCorrection:function(a){_isFF&&(this._wcorr=parseInt(a))},getAllRowIds:function(a){for(var b=[],c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&b.push(this.rowsBuffer[c].idd);return b.join(a||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(a,b,c){if(this._ecspn){var d=this.getRowById(a);if(d._childIndexes&&d.childNodes[d._childIndexes[b]]){var e=d._childIndexes[b],f=d.childNodes[e],g=f.colSpan;if(f.colSpan=1,g&&1!=g)for(var h=1;g>h;h++){var i=document.createElement("TD");f.nextSibling?d.insertBefore(i,f.nextSibling):d.appendChild(i),d._childIndexes[b+h]=e+h,i._cellIndex=b+h,i.style.textAlign=this.cellAlign[h],i.style.verticalAlign=this.cellVAlign[h],f=i,this.cells3(d,b+h).setValue("")}for(var j=1*b+1*g;j<d._childIndexes.length;j++)d._childIndexes[j]+=1*(g-1)}if(c&&c>1){if(d._childIndexes)var e=d._childIndexes[b];else{var e=b;d._childIndexes=new Array;for(var j=0;j<d.childNodes.length;j++)d._childIndexes[j]=j}d.childNodes[e].colSpan=c;for(var j=1;c>j;j++)d._childIndexes[d.childNodes[e+1]._cellIndex]=e,d.removeChild(d.childNodes[e+1]);for(var k=d.childNodes[d._childIndexes[b]]._cellIndex,j=1*k+1*c;j<d._childIndexes.length;j++)d._childIndexes[j]-=c-1}}},preventIECaching:function(a){this.no_cashe=convertStringToBoolean(a),this.xmlLoader.rSeed=this.no_cashe},enableColumnAutoSize:function(a){this._eCAS=convertStringToBoolean(a)},_onHeaderDblClick:function(a){var b=this.grid,c=b.getFirstParentOfType(_isIE?event.srcElement:a.target,"TD");return b._eCAS?void b.adjustColumnSize(c._cellIndexS):!1},adjustColumnSize:function(a,b){if(!this._hrrar||!this._hrrar[a]){this._notresize=!0;var c=0;this._setColumnSizeR(a,20);for(var d=1;d<this.hdr.rows.length;d++){var e=this.hdr.rows[d];e=e.childNodes[e._childIndexes?e._childIndexes[a]:a],e&&(!e.colSpan||e.colSpan<2)&&e._cellIndex==a&&(e.childNodes[0]&&"hdrcell"==e.childNodes[0].className&&(e=e.childNodes[0]),c=Math.max(c,e.scrollWidth))}for(var f=this.obj.rows.length,g=0,h=this.cellType._dhx_find("tree"),i=1;f>i;i++){var j=this.obj.rows[i];this.rowsAr[j.idd]&&(j._childIndexes&&j._childIndexes[a]!=a||!j.childNodes[a]||(g=(j.childNodes[a].innerText||j.childNodes[a].textContent||"").length*this.fontWidth,this._h2&&a==h&&(g+=22*this._h2.get[j.idd].level),g>c&&(c=g)))}c+=20+(b||0),this._setColumnSizeR(a,c),this._notresize=!1,this.setSizes()}},detachHeader:function(a,b){b=b||this.hdr;var c=b.rows[a+1];c&&c.parentNode.removeChild(c),this.setSizes()},detachFooter:function(a){this.detachHeader(a,this.ftr)},attachHeader:function(a,b,c){if("string"==typeof a&&(a=this._eSplit(a)),"string"==typeof b&&(b=b.split(this.delim)),c=c||"_aHead",this.hdr.rows.length){if(a)this._createHRow([a,b],this["_aHead"==c?"hdr":"ftr"]);else if(this[c])for(var d=0;d<this[c].length;d++)this.attachHeader.apply(this,this[c][d])}else this[c]||(this[c]=new Array),this[c][this[c].length]=[a,b,c]},_createHRow:function(a,b){if(!b){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative");var c=document.createElement("DIV");c.className="c_ftr".substr(2),this.entBox.appendChild(c);var d=document.createElement("TABLE");d.cellPadding=d.cellSpacing=0,_isIE&&8!=_isIE||(d.width="100%",d.style.paddingRight="20px"),d.style.marginRight="20px",d.style.tableLayout="fixed",c.appendChild(d),d.appendChild(document.createElement("TBODY")),this.ftr=b=d;for(var e=d.insertRow(0),f=this.hdrLabels.length<=1?a[0].length:this.hdrLabels.length,g=0;f>g;g++)e.appendChild(document.createElement("TH")),e.childNodes[g]._cellIndex=g;_isIE&&8>_isIE?e.style.position="absolute":e.style.height="auto"}var h=a[1],c=document.createElement("TR");b.rows[0].parentNode.appendChild(c);for(var g=0;g<a[0].length;g++)if("#cspan"!=a[0][g])if("#rspan"==a[0][g]&&b.rows.length>1){for(var i=b.rows.length-2,j=!1,k=null;!j;){for(var k=b.rows[i],l=0;l<k.cells.length;l++)if(k.cells[l]._cellIndex==g){j=l+1;break}i--}k=k.cells[j-1],k.rowSpan=(k.rowSpan||1)+1}else{var m=document.createElement("TD");if(m._cellIndex=m._cellIndexS=g,this._hrrar&&this._hrrar[g]&&!_isIE&&(m.style.display="none"),"object"==typeof a[0][g])m.appendChild(a[0][g]);else if(m.innerHTML=this.forceDivInHeader?"<div class='hdrcell'>"+(a[0][g]||"&nbsp;")+"</div>":a[0][g]||"&nbsp;",-1!=(a[0][g]||"").indexOf("#")){var d=a[0][g].match(/(^|{)#([^}]+)(}|$)/);if(d){var n="_in_header_"+d[2];this[n]&&this[n](this.forceDivInHeader?m.firstChild:m,g,a[0][g].split(d[0]))}}h&&(m.style.cssText=h[g]),c.appendChild(m)}else{var k=c.cells[c.cells.length-1];k.colSpan=(k.colSpan||1)+1}_isKHTML&&(b._kTimer&&window.clearTimeout(b._kTimer),b._kTimer=window.setTimeout(function(){b.rows[1].style.display="none",window.setTimeout(function(){b.rows[1].style.display=""},1)},500))},attachFooter:function(a,b){this.attachHeader(a,b,"_aFoot")},setCellExcellType:function(a,b,c){this.changeCellType(this.getRowById(a),b,c)},changeCellType:function(a,b,c){c=c||this.cellType[b];var d=this.cells3(a,b),e=d.getValue();d.cell._cellType=c;var d=this.cells3(a,b);d.setValue(e)},setRowExcellType:function(a,b){for(var c=this.rowsAr[a],d=0;d<c.childNodes.length;d++)this.changeCellType(c,d,b)},setColumnExcellType:function(a,b){for(var c=0;c<this.rowsBuffer.length;c++)this.rowsBuffer[c]&&"TR"==this.rowsBuffer[c].tagName&&this.changeCellType(this.rowsBuffer[c],a,b);"math"==this.cellType[a]?this._strangeParams[c]=b:this.cellType[a]=b},forEachRow:function(a){for(var b in this.rowsAr)this.rowsAr[b]&&this.rowsAr[b].idd&&a.apply(this,[this.rowsAr[b].idd])},forEachRowA:function(a){for(var b=0;b<this.rowsBuffer.length;b++)this.rowsBuffer[b]&&a.call(this,this.render_row(b).idd)},forEachCell:function(a,b){var c=this.getRowById(a);if(c)for(var d=0;d<this._cCount;d++)b(this.cells3(c,d),d)},enableAutoWidth:function(a,b,c){this._awdth=[convertStringToBoolean(a),parseInt(b||99999),parseInt(c||0)],1==arguments.length&&(this.objBox.style.overflowX=a?"hidden":"auto")},updateFromXML:function(a,b,c,d){"undefined"==typeof b&&(b=!0),this._refresh_mode=[!0,b,c],this.load(a,d)},_refreshFromXML:function(a){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(a){var b=this.grid._h2.get[this.cell.parentNode.idd];b&&this.cell.parentNode.valTag?this.setLabel(a):this.setValueX(a)});var b=this.cellType._dhx_find("tree");a.getXMLTopNode("rows");var c=a.doXPath("//rows")[0].getAttribute("parent")||0,d={};this._refresh_mode[2]&&(-1!=b?this._h2.forEachChild(c,function(a){d[a.id]=!0},this):this.forEachRow(function(a){d[a]=!0}));for(var e=a.doXPath("//row"),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("id");d[h]=!1;var c=g.parentNode.getAttribute("id")||c;if(this.rowsAr[h]&&"TR"!=this.rowsAr[h].tagName)this._h2?this._h2.get[h].buff.data=g:this.rowsBuffer[this.getRowIndex(h)].data=g,this.rowsAr[h]=g;else if(this.rowsAr[h])this._process_xml_row(this.rowsAr[h],g,-1),this._postRowProcessing(this.rowsAr[h],!0),this._fake&&this._fake.rowsAr[h]&&this._fake._process_xml_row(this._fake.rowsAr[h],g,-1);else if(this._refresh_mode[1]){var i={idd:h,data:g,_parser:this._process_xml_row,_locator:this._get_xml_data},j=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(i),j=0):this.rowsBuffer.push(i),this._h2?(reset=!0,this._h2.add(h,g.parentNode.getAttribute("id")||g.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0),this.rowsAr[h]=g,g=this.render_row(j),this._insertRowAt(g,j?-1:0)}}if(this._refresh_mode[2])for(h in d)d[h]&&this.rowsAr[h]&&this.deleteRow(h);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&(this._h2?this._renderSort():this.render_dataset()),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(a,b){var c=this.cells(a,b).cell;return c._combo||(c._combo=new dhtmlXGridComboObject),c._combo},setTabOrder:function(a){var b=a.split(this.delim);this._tabOrder=[];for(var c=this._cCount||a.length,d=0;c>d;d++)b[d]={c:parseInt(b[d]),ind:d};b.sort(function(a,b){return a.c>b.c?1:-1});for(var d=0;c>d;d++)this._tabOrder[b[d].ind]=b[d+1]&&"undefined"!=typeof b[d].c?b[d+1].ind:-1*(b[0].ind+1)},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+1],this.cell._cellIndex,!0)},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var a=this._getNextCell(null,1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!1;var a=this._getNextCell(null,-1);a&&(this.selectCell(a.parentNode,a._cellIndex,this.row!=a.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var a=this.cells4(this.cell);return a.changeState&&a.changeState()!==!1?void 0:!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){return this.editor||!this.isTreeGrid()?!1:void this.collapseKids(this.row)},k39_0_0:function(){return this.editor||!this.isTreeGrid()?!1:void this.expandKids(this.row)},k40_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var b=Math.max(a._r_select||0,this.getRowIndex(this.row.idd)),c=this._nextRow(b,1);if(c)a._r_select=null,this.selectCell(c,this.cell._cellIndex,!0),a.pagingOn&&a.showRow(c.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]),this.pagingOn&&this.rowsCol[b+1]&&this.selectCell(b+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var a=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var b=this.getRowIndex(this.row.idd)+1;if(-1==b||this.pagingOn&&1==b)this._key_events.k33_0_0.apply(this,[]);else{var c=this._nextRow(b-1,-1);this.selectCell(c,this.cell._cellIndex,!0),a.pagingOn&&c&&a.showRow(c.idd)}}this._still_active=!0}},_build_master_row:function(){for(var a=document.createElement("DIV"),b=["<table><tr>"],c=0;c<this._cCount;c++)b.push("<td></td>");b.push("</tr></table>"),a.innerHTML=b.join(""),this._master_row=a.firstChild.rows[0]},_prepareRow:function(a){this._master_row||this._build_master_row();for(var b=this._master_row.cloneNode(!0),c=0;c<b.childNodes.length;c++)b.childNodes[c]._cellIndex=c,this._enbCid&&(b.childNodes[c].id="c_"+a+"_"+c),this.dragAndDropOff&&this.dragger.addDraggableItem(b.childNodes[c],this);return b.idd=a,b.grid=this,b},_process_jsarray_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};return this._fillRow(a,this._c_order?this._swapColumns(b):b),a},_get_jsarray_data:function(a,b){return a[b]},_process_json_row:function(a,b){return b=this._c_order?this._swapColumns(b.data):b.data,this._process_some_row(a,b)},_process_some_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};return this._fillRow(a,b),a},_get_json_data:function(a,b){return a.data[b]},_process_js_row:function(a,b){for(var c=[],d=0;d<this.columnIds.length;d++)c[d]=b[this.columnIds[d]],c[d]||0===c[d]||(c[d]="");return this._process_some_row(a,c),a._attrs=b,a},_get_js_data:function(a,b){return a[this.columnIds[b]]},_process_csv_row:function(a,b){a._attrs={};for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};return this._fillRow(a,this._c_order?this._swapColumns(b.split(this.csv.cell)):b.split(this.csv.cell)),a},_get_csv_data:function(a,b){return a.split(this.csv.cell)[b]},_process_store_row:function(a,b){for(var c=[],d=0;d<this.columnIds.length;d++)c[d]=b[this.columnIds[d]];for(var e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};a._attrs=b,this._fillRow(a,c)},_process_xml_row:function(a,b){var c=this.xmlLoader.doXPath(this.xml.cell,b),d=[];if(a._attrs=this._xml_attrs(b),this._ud_enabled)for(var e=this.xmlLoader.doXPath("./userdata",b),f=e.length-1;f>=0;f--){for(var g="",h=0;h<e[f].childNodes.length;h++)g+=e[f].childNodes[h].nodeValue;this.setUserData(a.idd,e[f].getAttribute("name"),g)}for(var h=0;h<c.length;h++){var i=c[this._c_order?this._c_order[h]:h];if(i){var j=a._childIndexes?a._childIndexes[h]:h,k=i.getAttribute("type");a.childNodes[j]&&(k&&(a.childNodes[j]._cellType=k),a.childNodes[j]._attrs=this._xml_attrs(i)),i.getAttribute("xmlcontent")||(i=i.firstChild?i.firstChild.data:""),d.push(i)}}for(h<c.length;h<a.childNodes.length;h++)a.childNodes[h]._attrs={};return a.parentNode&&"row"==a.parentNode.tagName&&(a._attrs.parent=a.parentNode.getAttribute("idd")),this._fillRow(a,d),a},_get_xml_data:function(a,b){for(a=a.firstChild;;){if(!a)return"";if("cell"==a.tagName&&b--,0>b)break;a=a.nextSibling}return a.firstChild?a.firstChild.data:""},_fillRow:function(a,b){this.editor&&this.editStop();for(var c=0;c<a.childNodes.length;c++)if(c<b.length||this.defVal[c]){var d=a.childNodes[c]._cellIndex,e=b[d],f=this.cells4(a.childNodes[c]);!this.defVal[d]||""!=e&&"undefined"!=typeof e||(e=this.defVal[d]),f&&f.setValue(e)}else a.childNodes[c].innerHTML="&nbsp;",a.childNodes[c]._clearCell=!0;return a},_postRowProcessing:function(a,b){a._attrs["class"]&&(a._css=a.className=a._attrs["class"]),a._attrs.locked&&(a._locked=!0),a._attrs.bgColor&&(a.bgColor=a._attrs.bgColor);for(var c=0,d=0;d<a.childNodes.length;d++){var e=a.childNodes[d],f=e._cellIndex,g=e._attrs.style||a._attrs.style;g&&(e.style.cssText+=";"+g),e._attrs["class"]&&(e.className=e._attrs["class"]),g=e._attrs.align||this.cellAlign[f],g&&(e.align=g),e.vAlign=e._attrs.valign||this.cellVAlign[f];var h=e._attrs.bgColor||this.columnColor[f];h&&(e.bgColor=h),e._attrs.colspan&&!b&&(this.setColspan(a.idd,d+c,e._attrs.colspan),c+=e._attrs.colspan-1),this._hrrar&&this._hrrar[f]&&!b&&(e.style.display="none")}this.callEvent("onRowCreated",[a.idd,a,null])},load:function(a,b,c){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof b&&(c=b,b=null),c=c||"xml",this.xmlFileUrl||(this.xmlFileUrl=a),this._data_type=c,this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,!0,this.no_cashe),this.xmlLoader.onloadAction=function(a,d,e,f,g){a.callEvent&&(g=a["_process_"+c](g),a._contextCallTimer||a.callEvent("onXLE",[a,0,0,g]),b&&(b(),b=null))},this.xmlLoader.loadXML(a)},loadXMLString:function(a,b){var c=new dtmlXMLLoaderObject(function(){});c.loadXMLString(a),this.parse(c,b,"xml")},loadXML:function(a,b){this.load(a,b,"xml")},parse:function(a,b,c){2==arguments.length&&"function"!=typeof b&&(c=b,b=null),c=c||"xml",this._data_type=c,a=this["_process_"+c](a),this._contextCallTimer||this.callEvent("onXLE",[this,0,0,a]),b&&b()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(a){var b={};if(a.attributes.length)for(var c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;return b},_process_xml:function(a){if(!a.doXPath){var b=new dtmlXMLLoaderObject(function(){});"string"==typeof a?b.loadXMLString(a):(b.xmlDoc=a.responseXML?a:{},b.xmlDoc.responseXML=a),a=b}if(this._refresh_mode)return this._refreshFromXML(a);this._parsing=!0;var c=a.getXMLTopNode(this.xml.top);if(c.tagName==this.xml.top){var d=c.getAttribute("dhx_security");d&&(dhtmlx.security_key=d),this._parseHead(c);var e=a.doXPath(this.xml.row,c),f=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),g=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0),g=Math.min(g,32e6/this._srdh),h=!1;if(g&&g!=this.rowsBuffer.length&&(this.rowsBuffer[g-1]||(this.rowsBuffer.length&&(h=!0),this.rowsBuffer[g-1]=null),g<this.rowsBuffer.length&&(this.rowsBuffer.splice(g,this.rowsBuffer.length-g),h=!0)),this.isTreeGrid())return this._process_tree_xml(a);for(var i=0;i<e.length;i++)if(!this.rowsBuffer[i+f]){var j=e[i].getAttribute("id")||i+f+1;this.rowsBuffer[i+f]={idd:j,data:e[i],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[j]=e[i]}if(this.callEvent("onDataReady",[]),h&&this._srnd){var k=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=k}else this.render_dataset();return this._parsing=!1,a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc}},_process_jsarray:function(data){this._parsing=!0,data&&data.xmlDoc&&(eval("dhtmlx.temp="+data.xmlDoc.responseText+";"),data=dhtmlx.temp);for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data}),this.rowsAr[id]=data[i]}this.render_dataset(),this._parsing=!1},_process_csv:function(a){if(this._parsing=!0,a.xmlDoc&&(a=a.xmlDoc.responseText),a=a.replace(/\r/g,""),a=a.split(this.csv.row),this._csvHdr){this.clearAll();var b=a.splice(0,1)[0].split(this.csv.cell);this._csvAID||b.splice(0,1),this.setHeader(b.join(this.delim)),this.init()
}for(var c=0;c<a.length;c++)if(a[c]||c!=a.length-1){if(this._csvAID){var d=c+1;this.rowsBuffer.push({idd:d,data:a[c],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var e=a[c].split(this.csv.cell),d=e.splice(0,1)[0];this.rowsBuffer.push({idd:d,data:e,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[d]=a[c]}this.render_dataset(),this._parsing=!1},_process_js:function(a){return this._process_json(a,"js")},_process_json:function(data,mode){if(this._parsing=!0,data&&data.xmlDoc&&(eval("dhtmlx.temp="+data.xmlDoc.responseText+";"),data=dhtmlx.temp),"js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++){var row=data[i],id=row.id||i+1;this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data}),this.rowsAr[id]=data[i]}}else for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[id]=data.rows[i]}data.dhx_security&&(dhtmlx.security_key=data.dhx_security),this.render_dataset(),this._parsing=!1},render_dataset:function(a,b){if(this._srnd){if(this._fillers)return this._update_srnd_view();b=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(a=Math.max(a||0,(this.currentPage-1)*this.rowsBufferOutSize),b=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(a=a||0,b=b||this.rowsBuffer.length);for(var c=a;b>c;c++){var d=this.render_row(c);if(-1==d){this.xmlFileUrl&&this.callEvent("onDynXLS",[c,this._dpref?this._dpref:b-c])&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+c+"&count="+(this._dpref?this._dpref:b-c),this._data_type),b=c;break}if(d.parentNode&&d.parentNode.tagName||(this._insertRowAt(d,c),(d._attrs.selected||d._attrs.select)&&(this.selectRow(d,d._attrs.call?!0:!1,!0),d._attrs.selected=d._attrs.select=null)),this._ads_count&&c-a==this._ads_count){var e=this;return this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){e._contextCallTimer=null,e.render_dataset(c,b),e._contextCallTimer||(e._context_parsing?e.callEvent("onXLE",[]):e._fixAlterCss(),e.callEvent("onDistributedEnd",[]),e._context_parsing=!1)},this._ads_time)}}if(this._ads_count&&c==b&&this.callEvent("onDistributedEnd",[]),this._srnd&&!this._fillers){var f=this.rowsBuffer.length-b;for(this._fillers=[],this._fake&&(this._fake._fillers=[]);f>0;){var g=_isIE||window._FFrv?Math.min(f,5e4):f,h=this._add_filler(b,g);h&&this._fillers.push(h),f-=g,b+=g}}this.setSizes()},render_row:function(a){if(!this.rowsBuffer[a])return-1;if(this.rowsBuffer[a]._parser){var b=this.rowsBuffer[a];if(this.rowsAr[b.idd]&&"TR"==this.rowsAr[b.idd].tagName)return this.rowsBuffer[a]=this.rowsAr[b.idd];var c=this._prepareRow(b.idd);return this.rowsBuffer[a]=c,this.rowsAr[b.idd]=c,b._parser.call(this,c,b.data),this._postRowProcessing(c),c}return this.rowsBuffer[a]},_get_cell_value:function(a,b,c){return a._locator?(this._c_order&&(b=this._c_order[b]),a._locator.call(this,a.data,b)):this.cells3(a,b)[c?c:"getValue"]()},sortRows:function(a,b,c){if(this.editStop(),c=(c||"asc").toLowerCase(),b=b||this.fldSort[a],a=a||0,this.isTreeGrid())this.sortTreeRows(a,b,c);else{var d={},e=this.cellType[a],f="getValue";"link"==e&&(f="getContent"),("dhxCalendar"==e||"dhxCalendarA"==e)&&(f="getDate");for(var g=0;g<this.rowsBuffer.length;g++)d[this.rowsBuffer[g].idd]=this._get_cell_value(this.rowsBuffer[g],a,f);this._sortRows(a,b,c,d)}this.callEvent("onAfterSorting",[a,b,c])},_sortCore:function(a,b,c,d,e){var f="sort";if(this._sst&&(e.stablesort=this.rowsCol.stablesort,f="stablesort"),b.length>4&&(b=window[b]),"cus"==b){var g=this._customSorts[a];e[f](function(a,b){return g(d[a.idd],d[b.idd],c,a.idd,b.idd)})}else"function"==typeof b?e[f](function(a,e){return b(d[a.idd],d[e.idd],c,a.idd,e.idd)}):"str"==b?e[f](function(a,b){return"asc"==c?d[a.idd]>d[b.idd]?1:d[a.idd]<d[b.idd]?-1:0:d[a.idd]<d[b.idd]?1:d[a.idd]>d[b.idd]?-1:0}):"int"==b?e[f](function(a,b){var e=parseFloat(d[a.idd]);e=isNaN(e)?-99999999999999:e;var f=parseFloat(d[b.idd]);return f=isNaN(f)?-99999999999999:f,"asc"==c?e-f:f-e}):"date"==b&&e[f](function(a,b){var e=Date.parse(d[a.idd])||Date.parse("01/01/1900"),f=Date.parse(d[b.idd])||Date.parse("01/01/1900");return"asc"==c?e-f:f-e})},_sortRows:function(a,b,c,d){this._sortCore(a,b,c,d,this.rowsBuffer),this._reset_view(),this.callEvent("onGridReconstructed",[])},_reset_view:function(a){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0),this.callEvent("onResetView",[]);var b=this.obj.rows[0].parentNode,c=b.removeChild(b.childNodes[0],!0);if(_isKHTML)for(var d=b.parentNode.childNodes.length-1;d>=0;d--)"TR"==b.parentNode.childNodes[d].tagName&&b.parentNode.removeChild(b.parentNode.childNodes[d],!0);else if(_isIE)for(var d=b.childNodes.length-1;d>=0;d--)b.childNodes[d].removeNode(!0);else b.innerHTML="";b.appendChild(c),this.rowsCol=dhtmlxArray(),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,a||(_isIE&&this._srnd,this.render_dataset())}},deleteRow:function(a,b){if(b||(b=this.getRowById(a)),b){if(this.editStop(),!this._realfake&&0==this.callEvent("onBeforeRowDeleted",[a]))return!1;var c=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){b.parentNode&&b.parentNode.removeChild(b);var d=this.rowsCol._dhx_find(b);-1!=d&&this.rowsCol._dhx_removeAt(d);for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==a){this.rowsBuffer._dhx_removeAt(e),d=e;break}}else c=this._h2.get[a].parent.id,this._removeTrGrRow(b);this.rowsAr[a]=null;for(var e=0;e<this.selectedRows.length;e++)this.selectedRows[e].idd==a&&this.selectedRows._dhx_removeAt(e);if(this._srnd){for(var e=0;e<this._fillers.length;e++){var f=this._fillers[e];f&&(f[0]>=d?this._update_fillers(e,0,-1):f[0]+f[1]>d&&this._update_fillers(e,-1,0))}this._update_srnd_view()}return this.pagingOn&&this.changePage(),this._realfake||this.callEvent("onAfterRowDeleted",[a,c]),this.callEvent("onGridReconstructed",[]),this._ahgr&&this.setSizes(),!0}},_addRow:function(a,b,c){(-1==c||"undefined"==typeof c)&&(c=this.rowsBuffer.length),"string"==typeof b&&(b=b.split(this.delim));var d=this._prepareRow(a);d._attrs={};for(var e=0;e<d.childNodes.length;e++)d.childNodes[e]._attrs={};if(this.rowsAr[d.idd]=d,this._h2&&(this._h2.get[d.idd].buff=d),this._fillRow(d,b),this._postRowProcessing(d),this._skipInsert)return this._skipInsert=!1,this.rowsAr[d.idd]=d;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(c,d),this.rowsAr[d.idd]=d,d;if(this._fillers){this.rowsCol._dhx_insertAt(c,null),this.rowsBuffer._dhx_insertAt(c,d),this._fake&&this._fake.rowsCol._dhx_insertAt(c,null),this.rowsAr[d.idd]=d;for(var f=!1,g=0;g<this._fillers.length;g++){var h=this._fillers[g];if(h&&h[0]<=c&&h[0]+h[1]>=c){h[1]=h[1]+1;var i=h[2].firstChild.style.height=parseInt(h[2].firstChild.style.height)+this._srdh+"px";f=!0,this._fake&&(this._fake._fillers[g][1]++,this._fake._fillers[g][2].firstChild.style.height=i)}h&&h[0]>c&&(h[0]=h[0]+1,this._fake&&this._fake._fillers[g][0]++)}return f||this._fillers.push(this._add_filler(c,1,0==c?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[c-1])),d}return this.rowsBuffer._dhx_insertAt(c,d),this._insertRowAt(d,c)},addRow:function(a,b,c){var d=this._addRow(a,b,c);return this.dragContext||this.callEvent("onRowAdded",[a]),this.pagingOn&&this.changePage(this.currentPage),this._srnd&&this._update_srnd_view(),d._added=!0,this._ahgr&&this.setSizes(),this.callEvent("onGridReconstructed",[]),d},_insertRowAt:function(a,b,c){if(this.rowsAr[a.idd]=a,this._skipInsert)return this._skipInsert=!1,a;if(0>b||!b&&0!==parseInt(b)?b=this.rowsCol.length:b>this.rowsCol.length&&(b=this.rowsCol.length),this._cssEven){var d=a.className.replace(this._cssUnEven,"");a.className=(this._cssSP?this.getLevel(a.idd):b)%2==1?d+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(a.idd):""):d+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(a.idd):"")}return c||(b!=this.obj.rows.length-1&&this.rowsCol[b]?this.rowsCol[b].parentNode.insertBefore(a,this.rowsCol[b]):_isKHTML?this.obj.appendChild(a):this.obj.firstChild.appendChild(a)),this.rowsCol._dhx_insertAt(b,a),this.callEvent("onRowInserted",[a,b]),a},getRowById:function(a){var b=this.rowsAr[a];if(b){if("TR"!=b.tagName){for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==a)return this.render_row(c);if(this._h2)return this.render_row(null,b.idd)}return b}return null},cellById:function(a,b){return this.cells(a,b)},cells:function(a,b){if(0==arguments.length)return this.cells4(this.cell);var c=this.getRowById(a),d=c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b];return!d&&c._childIndexes&&(d=c.firstChild||{}),this.cells4(d)},cellByIndex:function(a,b){return this.cells2(a,b)},cells2:function(a,b){var c=this.render_row(a),d=c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b];return!d&&c._childIndexes&&(d=c.firstChild||{}),this.cells4(d)},cells3:function(a,b){var c=a._childIndexes?a.childNodes[a._childIndexes[b]]:a.childNodes[b];return this.cells4(c)},cells4:function(a){var b=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];return b?new b(a):void 0},cells5:function(a,b){var b=b||a._cellType||this.cellType[a._cellIndex];if(!this._ecache[b]){if(window["eXcell_"+b])var c=window["eXcell_"+b];else var c=eXcell_ro;this._ecache[b]=new c(a)}return this._ecache[b].cell=a,this._ecache[b]},dma:function(a){this._ecache||(this._ecache={}),a&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!a&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(a){this.smartTabOrder=arguments.length>0?convertStringToBoolean(a):!0},setExternalTabOrder:function(a,b){var c=this;this.tabStart="object"==typeof a?a:document.getElementById(a);var d=this.tabStart.onkeydown;this.tabStart.onkeydown=function(a){d&&d.call(this,a);var b=a||window.event;return 9!=b.keyCode||b.shiftKey?void 0:(b.cancelBubble=!0,c.selectCell(0,0,0,0,1),c.smartTabOrder&&c.cells2(0,0).isDisabled()&&c._key_events.k9_0_0.call(c),this.blur(),!1)},_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown),this.tabEnd="object"==typeof b?b:document.getElementById(b);var e=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(a){e&&e.call(this,a);var b=a||window.event;return 9==b.keyCode&&b.shiftKey?(b.cancelBubble=!0,c.selectCell(c.getRowsNum()-1,c.getColumnCount()-1,0,0,1),c.smartTabOrder&&c.cells2(c.getRowsNum()-1,c.getColumnCount()-1).isDisabled()&&c._key_events.k9_0_1.call(c),this.blur(),!1):void 0},_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){return this._ui_seed||(this._ui_seed=(new Date).valueOf()),this._ui_seed++},clearAndLoad:function(){var a=this._pgn_skin;this._pgn_skin=null,this.clearAll(),this._pgn_skin=a,this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var a=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,a,Math.min(a+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}},function(){function a(a,b){this[a]=b}function b(a,b){this[a].call(this,b)}function c(a,b){this[a].call(this,b.join(this.delim))}function d(a,b){for(var c=0;c<b.length;c++)if("object"==typeof b[c]){var d=this.getCombo(c);for(var e in b[c])d.put(e,b[c][e])}}function e(a,b){function c(a,b,c){d[b]||(d[b]=[]),"object"==typeof c&&(c.toString=function(){return this.text}),d[b][a]=c}for(var d=[],e=0;e<b.length;e++)if("object"==typeof b[e]&&b[e].length)for(var f=0;f<b[e].length;f++)c(e,f,b[e][f]);else c(e,0,b[e]);for(var e=0;e<d.length;e++)for(var f=0;f<d[0].length;f++){var g=d[e][f];if(d[e][f]=(g||"").toString()||"&nbsp;",g&&g.colspan)for(var h=1;h<g.colspan;h++)c(f+h,e,"#cspan");if(g&&g.rowspan)for(var h=1;h<g.rowspan;h++)c(f,e+h,"#rspan")}this.setHeader(d[0]);for(var e=1;e<d.length;e++)this.attachHeader(d[e])}var f=[{name:"label",def:"&nbsp;",operation:"setHeader",type:e},{name:"id",def:"",operation:"columnIds",type:a},{name:"width",def:"*",operation:"setInitWidths",type:c},{name:"align",def:"left",operation:"cellAlign",type:a},{name:"valign",def:"middle",operation:"cellVAlign",type:a},{name:"sort",def:"na",operation:"fldSort",type:a},{name:"type",def:"ro",operation:"setColTypes",type:c},{name:"options",def:"",operation:"",type:d}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(a){return[a.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(a){for(var c=0;c<f.length;c++){for(var d=[],e=0;e<a.length;e++)d[e]=a[e][f[c].name]||f[c].def;var g=f[c].type||b;g.call(this,f[c].operation,d,a)}this.init()},rows:function(){},headers:function(a){for(var b=0;b<a.length;b++)this.attachHeader(a[b])}})}(),dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(a,b){this.obj._h2?this.obj.addRow(b,c,null,parent):this.obj.addRow(b,[],0);var c=this.obj.getRowById(b);c&&(this.obj._process_xml_row(c,a.firstChild),this.obj._postRowProcessing(c))}),a.attachEvent("updateCallback",function(a,b){var c=this.obj.getRowById(b);c&&(this.obj._process_xml_row(c,a.firstChild),this.obj._postRowProcessing(c))}),a.attachEvent("deleteCallback",function(a,b){this.obj.setUserData(b,this.action_param,"true_deleted"),this.obj.deleteRow(b)}),a._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"],this.attachEvent("onEditCell",function(b,c,d){if(a._columns&&!a._columns[d])return!0;var e=this.cells(c,d);return 1==b?e.isCheckbox()&&a.setUpdated(c,!0):2==b&&e.wasChanged()&&a.setUpdated(c,!0),!0}),this.attachEvent("onRowPaste",function(b){a.setUpdated(b,!0)}),this.attachEvent("onUndo",function(b){a.setUpdated(b,!0)}),this.attachEvent("onRowIdChange",function(b,c){var d=a.findRow(b);d<a.updatedRows.length&&(a.updatedRows[d]=c)}),this.attachEvent("onSelectStateChanged",function(){return"row"==a.updateMode&&a.sendData(),!0}),this.attachEvent("onEnter",function(){return"row"==a.updateMode&&a.sendData(),!0}),this.attachEvent("onBeforeRowDeleted",function(b){if(!this.rowsAr[b])return!0;if(this.dragContext&&a.dnd)return window.setTimeout(function(){a.setUpdated(b,!0)},1),!0;var c=a.getState(b);return this._h2&&this._h2.forEachChild(b,function(b){a.setUpdated(b.id,!1),a.markRow(b.id,!0,"deleted")},this),"inserted"==c?(a.set_invalid(b,!1),a.setUpdated(b,!1),!0):"deleted"==c?!1:"true_deleted"==c?(a.setUpdated(b,!1),!0):(a.setUpdated(b,!0,"deleted"),!1)}),this.attachEvent("onBindUpdate",function(b){"object"==typeof b&&(b=b.id),a.setUpdated(b,!0)}),this.attachEvent("onRowAdded",function(b){return this.dragContext&&a.dnd?!0:(a.setUpdated(b,!0,"inserted"),!0)}),a._getRowData=function(a){var b=[];b.gr_id=a,this.obj.isTreeGrid()&&(b.gr_pid=this.obj.getParentId(a));for(var c=this.obj.getRowById(a),d=0;d<this.obj._cCount;d++){if(this.obj._c_order)var e=this.obj._c_order[d];else var e=d;var f=this.obj.cells(c.idd,d);(!this._changed||f.wasChanged())&&(this._endnm?b[this.obj.getColumnId(d)]=f.getValue():b["c"+e]=f.getValue())}var g=this.obj.UserData[a];if(g)for(var h=0;h<g.keys.length;h++)g.keys[h]&&0!=g.keys[h].indexOf("__")&&(b[g.keys[h]]=g.values[h]);var g=this.obj.UserData.gridglobaluserdata;if(g)for(var h=0;h<g.keys.length;h++)b[g.keys[h]]=g.values[h];return b},a._clearUpdateFlag=function(a){var b=this.obj.getRowById(a);if(b)for(var c=0;c<this.obj._cCount;c++)this.obj.cells(a,c).cell.wasChanged=!1},a.checkBeforeUpdate=function(a){for(var b=!0,c=[],d=0;d<this.obj._cCount;d++)if(this.mandatoryFields[d]){var e=this.mandatoryFields[d].call(this.obj,this.obj.cells(a,d).getValue(),a,d);"string"==typeof e?(this.messages.push(e),b=!1):(b&=e,c[d]=!e)}return b||(this.set_invalid(a,"invalid",c),this.setUpdated(a,!1)),b}},dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,b){this.cell._attrs[a]=b},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var a=(this.obj||this.cell).getElementsByTagName("TEXTAREA");return a.length||(a=(this.obj||this.cell).getElementsByTagName("INPUT")),a[0]}},dhtmlXGridCellObject.prototype.setValue=function(a){"number"==typeof a||a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0),this.setCValue(a)},dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent},dhtmlXGridCellObject.prototype.setCValue=function(a,b){this.cell.innerHTML=a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,arguments.length>1?b:a])},dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="",this.cell.appendChild(document.createTextNode(a)),this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])},dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a},dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()},eXcell.prototype=new dhtmlXGridCellObject,eXcell_ed.prototype=new eXcell,eXcell_edtxt.prototype=new eXcell_ed,eXcell_edn.prototype=new eXcell_ed,eXcell_edn.prototype.setValue=function(a){return a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell._orig_value=a,void this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)):(this.cell._clearCell=!0,this.setCValue("&nbsp;",0))},eXcell_ch.prototype=new eXcell,eXcell_ch.prototype.setValue=function(a){this.cell.style.verticalAlign="middle",a&&(a=a.toString()._dhx_trim(),("false"==a||"0"==a)&&(a="")),a?(a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+a+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)},eXcell_ra.prototype=new eXcell_ch,eXcell_ra.prototype.setValue=function(a){if(this.cell.style.verticalAlign="middle",a&&(a=a.toString()._dhx_trim(),("false"==a||"0"==a)&&(a="")),a){if(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]){var b=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);b.setValue("0"),this.grid.rowsAr[b.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,b.cell.parentNode.idd,b.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell,a="1",this.cell.chstate="1"}else a="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+a+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)},eXcell_txt.prototype=new eXcell,eXcell_txttxt.prototype=new eXcell_txt,eXcell_txt.prototype.setValue=function(a){this.cell._brval=a,a&&""!=a.toString()._dhx_trim()?this.cell._clearCell=!1:(a="&nbsp;",this.cell._clearCell=!0),!this.grid.multiLine||this.cell._clearCell?this.setCValue(a,this.cell._brval):this.setCValue(a.replace(/\n/g,"<br/>"),a)},eXcell_co.prototype=new eXcell,eXcell_co.prototype.getText=function(){return this.cell.innerHTML},eXcell_co.prototype.setValue=function(a){if("object"==typeof a){var b=this.grid.xmlLoader.doXPath("./option",a);b.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var c=0;c<b.length;c++)this.cell._combo.put(b[c].getAttribute("value"),b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}if(""==(a||"").toString()._dhx_trim()&&(a=null),this.cell.combo_value=a,null!==a){var d=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a);this.setCValue(null===d?a:d,a)}else this.setCValue("&nbsp;",a)},eXcell_coro.prototype=new eXcell_co,eXcell_cotxt.prototype=new eXcell_co,eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent},eXcell_cotxt.prototype.setValue=function(a){if("object"==typeof a){var b=this.grid.xmlLoader.doXPath("./option",a);b.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var c=0;c<b.length;c++)this.cell._combo.put(b[c].getAttribute("value"),b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}""==(a||"").toString()._dhx_trim()&&(a=null),null!==a?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(a)||a,a):this.setCTxtValue(" ",a),this.cell.combo_value=a},eXcell_corotxt.prototype=new eXcell_cotxt,eXcell_cp.prototype=new eXcell,eXcell_cp.prototype.setValue=function(a){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?this.cell.offsetHeight-2:16)+";background-color:"+(a||"")+";border:0px;'>&nbsp;</div>",a),this.cell.firstChild._bg=a},eXcell_img.prototype=new eXcell,eXcell_img.prototype.getTitle=function(){return this.cell._brval},eXcell_img.prototype.setValue=function(a){var b=a;if(-1!=(a||"").indexOf("^")){var c=a.split("^");a=c[0],b=this.cell._attrs.title||c[1],c.length>2&&(this.cell.lnk=c[2],c[3]&&(this.cell.trg=c[3])),this.cell.titFl="1"}this.setCValue("<img src='"+this.grid.iconURL+(a||"")._dhx_trim()+"' border='0'>",a),this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"),this.cell._brval=b},eXcell_price.prototype=new eXcell_ed,eXcell_price.prototype.setValue=function(a){isNaN(parseFloat(a))&&(a=this.val||0);var b="green";0>a&&(b="red"),this.setCValue("<span>$</span><span style='padding-right:2px;color:"+b+";'>"+a+"</span>",a)},eXcell_dyn.prototype=new eXcell_ed,eXcell_dyn.prototype.setValue=function(a){if((!a||isNaN(Number(a)))&&""!==a&&(a=0),a>0)var b="green",c="dyn_up.gif";else if(0==a)var b="black",c="dyn_.gif";else var b="red",c="dyn_down.gif";this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='"+this.grid.imgURL+c+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:"+b+";'>"+a+"</span></div>",a)},eXcell_ro.prototype=new eXcell,window.eXcell_hidden=function(a){a&&(this.cell=a,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell.val}},eXcell_hidden.prototype=new eXcell,eXcell_hidden.prototype.setValue=function(a){this.cell.val=a},eXcell_ron.prototype=new eXcell,eXcell_ron.prototype.setValue=function(a){if(0===a);else if(!a||""==a.toString()._dhx_trim())return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._clearCell=!1,this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0")},eXcell_rotxt.prototype=new eXcell,Hashtable.prototype=new dhtmlXGridComboObject,dhtmlXGridObject.prototype.enableMultiCheckBox=function(a){this.isMultiCheckBox=convertStringToBoolean(a),this.setInitWidths_multiCheckBox=this.setInitWidths,this.setInitWidths=function(a){this.isMultiCheckBox&&(a="30,"+a),this.setInitWidths_multiCheckBox(a)},this.setHeader_multiCheckBox=this.setHeader,this.setHeader=function(a,b,c){this.isMultiCheckBox&&(a="#master_checkbox,"+a),this.setHeader_multiCheckBox(a,b,c)},this.setColTypes_multiCheckBox=this.setColTypes,this.setColTypes=function(a){this.isMultiCheckBox&&(a="hwch,"+a),this.setColTypes_multiCheckBox(a)},this.setColSorting_multiCheckBox=this.setColSorting,this.setColSorting=function(a){this.isMultiCheckBox&&(a="na,"+a),this.setColSorting_multiCheckBox(a)},this.setColumnIds_multiCheckBox=this.setColumnIds,this.setColumnIds=function(a){this.isMultiCheckBox&&(a=","+a),this.setColumnIds_multiCheckBox(a)}},dhtmlXGridObject.prototype.enableRowNumber=function(a){this.isRowNumber=convertStringToBoolean(a),this.setInitWidths_rowNumber=this.setInitWidths,this.setInitWidths=function(a){this.isRowNumber&&(a="28,"+a),this.setInitWidths_rowNumber(a)},this.setHeader_rowNumber=this.setHeader,this.setHeader=function(a,b,c){this.isRowNumber&&(a=","+a),this.setHeader_rowNumber(a,b,c)},this.setColTypes_rowNumber=this.setColTypes,this.setColTypes=function(a){this.isRowNumber&&(a="hwxh,"+a),this.setColTypes_rowNumber(a)},this.setColSorting_rowNumber=this.setColSorting,this.setColSorting=function(a){this.isRowNumber&&(a="na,"+a),this.setColSorting_rowNumber(a)},this.setColumnIds_rowNumber=this.setColumnIds,this.setColumnIds=function(a){this.isRowNumber&&(a=","+a),this.setColumnIds_rowNumber(a)}},dhtmlXGridObject.prototype.setDisableEditColumnIds=function(a){this.disableColumnIds=a.split(this.delim)},dhtmlXGridObject.prototype.setReadOnlyRowByIndexs=function(a){0==a&&(a=a.toString()),this.readOnlyRow=a instanceof Array?a:a&&a.toString().split(this.delim)},dhtmlXGridObject.prototype.enableClickEdit=function(a){this.isClickEdit=convertStringToBoolean(a)},dhtmlXGridObject.prototype._init_point_MF=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this.editCell_init=this.editCell,this.editCell=function(){if(this.disableColumnIds&&this.cell)for(var a=0;a<this.disableColumnIds.length;a++)if(this.cell._cellIndex==this.getColIndexById(this.disableColumnIds[a]))return!1;if(this.readOnlyRow&&this.cell)for(var a=0;a<this.readOnlyRow.length;a++)if(this.getRowIndex(this.cell.parentNode.idd)==this.readOnlyRow[a])return!1;this.editCell_init()},this.obj.onclick=function(a){if(this.grid._doClick(a||window.event),this.grid.isClickEdit){if(!this.grid.wasDblClicked(a||window.event))return!1;if(this.grid._dclE){var b=this.grid.getFirstParentOfType(_isIE?event.srcElement:a.target,"TR");b==this.grid.row&&this.grid.editCell(a||window.event)}else this.grid.editStop();if((a||event).cancelBubble=!0,_isOpera)return!1}else this.grid._sclE?this.grid.editCell(a||window.event):this.grid.editStop(),(a||event).cancelBubble=!0},this.obj.ondblclick=function(a){if(!this.grid.isClickEdit){if(!this.grid.wasDblClicked(a||window.event))return!1;if(this.grid._dclE){var b=this.grid.getFirstParentOfType(_isIE?event.srcElement:a.target,"TR");b==this.grid.row&&this.grid.editCell(a||window.event)}if((a||event).cancelBubble=!0,_isOpera)return!1}},this._init_point_MF&&this._init_point_MF()},dhtmlXGridObject.prototype.getCheckedRowsJson=function(a){function b(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0;return!1}var c=new Array,d=this.getColumnsNum(),e=0;this.forEachRowA(function(b){var f=new Array,g=this.cells(b,a);if(g.changeState&&0!=g.getValue()){for(var h=0;d>h;h++)f.push(this.cells(b,h).getValue()),h+1==d&&(f.push(e),f.push(b));c.push(f)}e++},!0);for(var f=new Array,g=new Array,h=0;d>h;h++)f.push(this.getColLabel(h)),g.push(this.getColType(h)),h+1==d&&(f.push("RowIndex"),g.push("edn"),f.push("RowId"),g.push("edn"));for(var i=["edn","ron","price","dyn"],j="[",h=0;h<c.length;h++){0!=h&&(j+=","),j+="{";for(var k=0;k<f.length;k++)0!=k&&(j+=","),j+=b(i,g[k])?'"'+f[k]+'":'+c[h][k]:'"'+f[k]+'":"'+c[h][k]+'"';j+="}"}return j+="]","[]"==j&&(j=""),j},dhtmlXGridObject.prototype.getCheckedRowsArray=function(a){var b=new Array,c=this.getColumnsNum();return this.forEachRowA(function(d){var e=new Array,f=this.cells(d,a);if(f.changeState&&0!=f.getValue()){for(var g=0;c>g;g++)e.push(this.cells(d,g).getValue());b.push(e)}},!0),0==b.length&&(b=new Array),b},dhtmlXGridObject.prototype.checkAllRows=function(a){this.forEachRowA(function(b){var c=(new Array,this.cells(b,a));c.setValue(1)},!0)},dhtmlXGridObject.prototype.uncheckAllRows=function(a){this.forEachRowA(function(b){var c=(new Array,this.cells(b,a));c.setValue(0)},!0)},dhtmlXGridObject.prototype.checkAllRowsToogle=function(a){var b=0,c=0;this.forEachRowA(function(d){b++;var e=(new Array,this.cells(d,a));1==e.getValue()&&c++},!0),c!=b?this.forEachRowA(function(b){var c=(new Array,this.cells(b,a));c.setValue(1)},!0):this.forEachRowA(function(b){var c=(new Array,this.cells(b,a));c.setValue(0)},!0)},dhtmlXGridObject.prototype.enableDragAndDrop=function(a){"temporary_disabled"==a?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(a),this._drag_validate=!0,a&&(this.objBox.ondragstart=function(a){return(a||event).cancelBubble=!0,!1})},dhtmlXGridObject.prototype.setDragBehavior=function(a){switch(this.dadmodec=this.dadmodefix=0,a){case"child":this.dadmode=0,this._sbmod=!1;break;case"sibling":this.dadmode=1,this._sbmod=!1;break;case"sibling-next":this.dadmode=1,this._sbmod=!0;break;case"complex":this.dadmode=2,this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}},dhtmlXGridObject.prototype.enableDragOrder=function(a){this._dndorder=convertStringToBoolean(a)},dhtmlXGridObject.prototype._checkParent=function(a,b){var c=this._h2.get[a.idd].parent;if(c.parent){for(var d=0;d<b.length;d++)if(b[d]==c.id)return!0;return this._checkParent(this.rowsAr[c.id],b)}},dhtmlXGridObject.prototype._createDragNode=function(a,b){if(this.editStop(),window.dhtmlDragAndDrop.dragNode)return null;if(!this.dADTempOff)return null;a.parentObject=new Object,a.parentObject.treeNod=this;var c=this.callEvent("onBeforeDrag",[a.parentNode.idd,a._cellIndex,b]);if(!c)return null;var d=new Array;d=this.getSelectedId(),d=d&&""!=d?d.split(this.delim):[];for(var e=!1,f=0;f<d.length;f++)d[f]==a.parentNode.idd&&(e=!0);if(e||(this.selectRow(this.rowsAr[a.parentNode.idd],!1,b.ctrlKey,!1),b.ctrlKey||(d=[]),d[this.selMultiRows?d.length:0]=a.parentNode.idd),this.isTreeGrid())for(var f=d.length-1;f>=0;f--)this._checkParent(this.rowsAr[d[f]],d)&&d.splice(f,1);var g=this;d.length&&this._dndorder&&d.sort(function(a,b){return g.rowsAr[a].rowIndex>g.rowsAr[b].rowIndex?1:-1});var h=this.getFirstParentOfType(_isIE?b.srcElement:b.target,"TD");h&&(this._dndExtra=h._cellIndex),this._dragged=new Array;for(var f=0;f<d.length;f++)this.rowsAr[d[f]]&&(this._dragged[this._dragged.length]=this.rowsAr[d[f]],this.rowsAr[d[f]].treeNod=this);a.parentObject.parentNode=a.parentNode;var i=document.createElement("div");return i.innerHTML=c!==!0?c:this.rowToDragElement(a.parentNode.idd),i.style.position="absolute",i.className="dragSpanDiv",i},dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV"),this._sdrgc.innerHTML="&nbsp;",this._sdrgc.className="gridDragLine",this.objBox.appendChild(this._sdrgc)},dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var a=this.tid;a=this.tobj.getParentId(a);)if(this.sid==a)return!1;return!0},dragContext.prototype.close=function(){this.sobj=null,this.tobj=null},dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)},dragContext.prototype.set=function(a,b){return this[a]=b,this
},dragContext.prototype.uid=function(){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this},dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)},dragContext.prototype.attrs=function(){return"tree"==this.source?{}:this.sobj.rowsAr[this.sid]._attrs},dragContext.prototype.childs=function(){return"treeGrid"==this.source&&this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null},dragContext.prototype.pid=function(){if(!this.tid)return 0;if(!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var a=this.tobj.rowsAr[this.tid],b=this.tobj._h2.get[a.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&a.nextSibling){var c=this.tobj._h2.get[a.nextSibling.idd].parent.id;if(c==this.tid)return this.tid;if(c!=b)return c}return b}},dragContext.prototype.ind=function(){if(this.tid==window.unknown)return this.tobj.rowsBuffer.length;"treeGrid"==this.target&&this.tobj.openItem("child"==this.dropmode?this.tid:this.tobj.getParentId(this.tid));var a=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var b=this.tobj.rowsAr[this.tid];if(b.nextSibling&&this._h2.get[b.nextSibling.idd].parent.id==this.tid)return a+1}return a+1+("treeGrid"==this.target&&a>=0&&"minus"==this.tobj._h2.get[this.tobj.rowsBuffer[a].idd].state?this.tobj._getOpenLenght(this.tobj.rowsBuffer[a].idd,0):0)},dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null},dragContext.prototype.slist=function(){for(var a=new Array,b=0;b<this.sid.length;b++)a[a.length]=this.sid[b]["tree"==this.source?"id":"idd"];return a.join(",")},dhtmlXGridObject.prototype._drag=function(a,b,c,d){if(this._realfake)return this._fake._drag();this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var e=c.parentNode,f=a.parentObject;e.idd||(e.grid=this,this.dadmodefix=0);var g=new dragContext(0,0,0,1==e.grid.dadmode||e.grid.dadmodec?"sibling":"child");if(f&&f.childNodes)g.set("source","tree").set("sobj",f.treeNod).set("sid",g.sobj._dragged);else{if(!f)return!0;f.treeNod.isTreeGrid&&f.treeNod.isTreeGrid()&&g.set("source","treeGrid"),g.set("sobj",f.treeNod).set("sid",g.sobj._dragged)}e.grid.isTreeGrid()?g.set("target","treeGrid"):g.set("dropmode","sibling"),g.set("tobj",e.grid).set("tid",e.idd),2==g.tobj.dadmode&&1==g.tobj.dadmodec&&g.tobj.dadmodefix<0&&(g.tid=g.tobj.obj.rows[1].idd!=g.tid?e.previousSibling.idd:0);var h=this.getFirstParentOfType(d,"TD");if(h&&g.set("tExtra",h._cellIndex),h&&g.set("sExtra",g.sobj._dndExtra),g.sobj.dpcpy&&g.set("mode","copy"),g.tobj._realfake&&(g.tobj=g.tobj._fake),g.sobj._realfake&&(g.sobj=g.sobj._fake),g.tobj._clearMove(),f&&f.treeNod&&f.treeNod._nonTrivialRow)f.treeNod._nonTrivialRow(this,g.tid,g.dropmode,f);else{if(g.tobj.dragContext=g,!g.tobj.callEvent("onDrag",[g.slist(),g.tid,g.sobj,g.tobj,g.sExtra,g.tExtra]))return g.tobj.dragContext=null;var i=new Array;if("object"==typeof g.sid){for(var j=g.copy(),k=0;k<g.sid.length;k++)j.set("alfa",!k).set("sid",g.sid[k]["tree"==g.source?"id":"idd"]).valid()&&(j.tobj._dragRoutine(j),"treeGrid"==j.target&&"child"==j.dropmode&&j.tobj.openItem(j.tid),i[i.length]=j.nid,j.set("dropmode","sibling").set("tid",j.nid));j.close()}else g.tobj._dragRoutine(g);g.tobj.laterLink&&g.tobj.laterLink(),g.tobj.callEvent("onDrop",[g.slist(),g.tid,i.join(","),g.sobj,g.tobj,g.sExtra,g.tExtra])}g.tobj.dragContext=null,g.close()},dhtmlXGridObject.prototype._dragRoutine=function(a){if(a.sobj==a.tobj&&"grid"==a.source&&"move"==a.mode&&!this._fake){if(a.sobj._dndProblematic)return;var b=a.sobj.rowsAr[a.sid],c=a.sobj.rowsCol._dhx_find(b);if(a.sobj.rowsCol._dhx_removeAt(a.sobj.rowsCol._dhx_find(b)),a.sobj.rowsBuffer._dhx_removeAt(a.sobj.rowsBuffer._dhx_find(b)),a.sobj.rowsBuffer._dhx_insertAt(a.ind(),b),a.tobj._fake){a.tobj._fake.rowsCol._dhx_removeAt(c);var d=a.tobj._fake.rowsAr[a.sid];d.parentNode.removeChild(d)}return a.sobj._insertRowAt(b,a.ind()),a.nid=a.sid,void a.sobj.callEvent("onGridReconstructed",[])}var e;if(this._h2&&"undefined"!=typeof a.tid&&"sibling"==a.dropmode&&(this._sbmod||a.tid)?a.alfa&&this._sbmod&&this._h2.get[a.tid].childs.length?(this.openItem(a.tid),e=a.uid().tobj.addRowBefore(a.nid,a.data(),this._h2.get[a.tid].childs[0].id,a.img(),a.childs())):e=a.uid().tobj.addRowAfter(a.nid,a.data(),a.tid,a.img(),a.childs()):e=a.uid().tobj.addRow(a.nid,a.data(),a.ind(),a.pid(),a.img(),a.childs()),e._attrs=a.attrs(),"tree"==a.source){this.callEvent("onRowAdded",[a.nid]);var f=a.sobj._globalIdStorageFind(a.sid);if(f.childsCount){for(var g=a.copy().set("tid",a.nid).set("dropmode","grid"==a.target?"sibling":"child"),h=0;h<f.childsCount;h++)a.tobj._dragRoutine(g.set("sid",f.childNodes[h].id)),"move"==a.mode&&h--;g.close()}}else if(a.tobj._copyUserData(a),this.callEvent("onRowAdded",[a.nid]),"treeGrid"==a.source){a.sobj==a.tobj&&(e._xml=a.sobj.rowsAr[a.sid]._xml);var i=a.sobj._h2.get[a.sid];if(i&&i.childs.length){var g=a.copy().set("tid",a.nid);"grid"==a.target?g.set("dropmode","sibling"):(g.tobj.openItem(a.tid),g.set("dropmode","child"));for(var j=i.childs.length,h=0;j>h;h++)a.sobj.render_row_tree(null,i.childs[h].id),a.tobj._dragRoutine(g.set("sid",i.childs[h].id)),j!=i.childs.length&&(h--,j=i.childs.length);g.close()}}"move"==a.mode&&(a.sobj["tree"==a.source?"deleteItem":"deleteRow"](a.sid),a.sobj!=a.tobj||a.tobj.rowsAr[a.sid]||(a.tobj.changeRowId(a.nid,a.sid),a.nid=a.sid))},dhtmlXGridObject.prototype.gridToGrid=function(a,b){for(var c=new Array,d=0;d<b.hdr.rows[0].cells.length;d++)c[d]=b.cells(a,d).getValue();return c},dhtmlXGridObject.prototype.checkParentLine=function(a,b){return this._h2&&b&&a?a.id==b?!0:this.checkParentLine(a.parent,b):!1},dhtmlXGridObject.prototype._dragIn=function(a,b,c,d){if(!this.dADTempOff)return 0;var e=this.isTreeGrid(),f=b.parentNode.idd?b.parentNode:b.parentObject;if(this._drag_validate){if(a.parentNode==b.parentNode)return 0;if(e&&this==f.grid&&this.checkParentLine(this._h2.get[a.parentNode.idd],b.parentNode.idd))return 0}return this.callEvent("onDragIn",[f.idd||f.id,a.parentNode.idd,f.grid||f.treeNod,a.grid||a.parentNode.grid])?(this._setMove(a,c,d),e&&""!=a.parentNode.expand?(this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3),this._autoOpenId=a.parentNode.idd):this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer),a):this._setMove(a,c,d,!0)},dhtmlXGridObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)},dhtmlXGridObject.prototype._dragOut=function(a){this._clearMove();var b=a.parentNode.parentObject?a.parentObject.id:a.parentNode.idd;this.callEvent("onDragOut",[b]),this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)},dhtmlXGridObject.prototype._setMove=function(a,b,c,d){if(a.parentNode.idd){var e=getAbsoluteTop(a),f=getAbsoluteTop(this.objBox);if(e-f>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),e-f+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),d)return 0;if(2==this.dadmode){var g=c-e+(document.body.scrollTop||document.documentElement.scrollTop)-2-a.offsetHeight/2;Math.abs(g)-a.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=0>g?-1:1):this.dadmodec=0}else this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=e-f+parseInt(this.objBox.scrollTop)+(this.dadmodefix>=0?a.offsetHeight:0)+"px";else if(this._llSelD=a,"TR"==a.parentNode.tagName)for(var h=0;h<a.parentNode.childNodes.length;h++){var g=a.parentNode.childNodes[h];g._bgCol=g.style.backgroundColor,g.style.backgroundColor="#FFCCCC"}}},dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var a=this._llSelD.parentNode.childNodes,b=0;b<a.length;b++)a[b].style.backgroundColor=a[b]._bgCol;this._llSelD=null},dhtmlXGridObject.prototype.rowToDragElement=function(a){var b=this.cells(a,0).getValue();return b},dhtmlXGridObject.prototype._copyUserData=function(a){if(!a.tobj.UserData[a.nid]||a.tobj!=a.sobj){a.tobj.UserData[a.nid]=new Hashtable;var b=a.sobj.UserData[a.sid],c=a.tobj.UserData[a.nid];b&&(c.keys=c.keys.concat(b.keys),c.values=c.values.concat(b.values))}},dhtmlXGridObject.prototype.moveRow=function(a,b,c,d){switch(b){case"row_sibling":this.moveRowTo(a,c,"move","sibling",this,d);break;case"up":this.moveRowUp(a);break;case"down":this.moveRowDown(a)}},dhtmlXGridObject.prototype._nonTrivialNode=function(a,b,c,d,e){if(a.callEvent&&!e&&!a.callEvent("onDrag",[d.idd,b.id,c?c.id:null,this,a]))return!1;for(var f=d.idd,g=f;a._idpull[g];)g+=(new Date).getMilliseconds().toString();var h=this.isTreeGrid()?this.getItemImage(f):"";if(c){for(k=0;k<b.childsCount&&b.childNodes[k]!=c;k++);0!=k?c=b.childNodes[k-1]:(st="TOP",c="")}var i=a._attachChildNode(b,g,this.gridToTreeElement(a,g,f),"",h,h,h,"","",c);if(this._h2){var j=this._h2.get[f];if(j.childs.length)for(var k=0;k<j.childs.length;k++)this._nonTrivialNode(a,i,0,this.rowsAr[j.childs[k].id],1),this.dpcpy||k--}this.dpcpy||this.deleteRow(f),a.callEvent&&!e&&a.callEvent("onDrop",[g,b.id,c?c.id:null,this,a])},dhtmlXGridObject.prototype.gridToTreeElement=function(a,b,c){return this.cells(c,0).getValue()},dhtmlXGridObject.prototype.treeToGridElement=function(a,b){var c=new Array,d=this.cellType._dhx_find("tree");-1==d&&(d=0);for(var e=0;e<this.getColumnCount();e++)c[c.length]=e!=d?a.getUserData(b,this.getColumnId(e))||"":a.getItemText(b);return c},dhtmlXGridObject.prototype.moveRowTo=function(a,b,c,d,e,f){var g=new dragContext((e||this).isTreeGrid()?"treeGrid":"grid",(f||this).isTreeGrid()?"treeGrid":"grid",c,d||"sibling",a,b,e||this,f||this);return g.tobj._dragRoutine(g),g.close(),g.nid},dhtmlXGridObject.prototype.enableMercyDrag=function(a){this.dpcpy=convertStringToBoolean(a)},dhtmlXGridObject.prototype.toPDF=function(a,b,c,d,e,f){function g(a){for(var b=[],e=1;e<p.hdr.rows.length;e++){b[e]=[];for(var f=0;f<p._cCount;f++){var g=p.hdr.rows[e].childNodes[f];b[e][f]||(b[e][f]=[0,0]),g&&(b[e][g._cellIndexS]=[g.colSpan,g.rowSpan])}}var h="<rows profile='"+a+"'";c&&(h+=" header='"+c+"'"),d&&(h+=" footer='"+d+"'"),h+="><head>"+p._serialiseExportConfig(b).replace(/^<head/,"<columns").replace(/head>$/,"columns>");for(var e=2;e<p.hdr.rows.length;e++){for(var j=0,k=p.hdr.rows[e],l="",f=0;f<p._cCount;f++)if(p._srClmn&&!p._srClmn[f]||p._hrrar[f]&&(!p._fake||f>=p._fake.hdrLabels.length))j++;else{var m=b[e][f],n=m[0]&&m[0]>1?' colspan="'+m[0]+'" ':"";m[1]&&m[1]>1&&(n+=' rowspan="'+m[1]+'" ',j=-1);var o="",q=k;p._fake&&f<p._fake._cCount&&(q=p._fake.hdr.rows[e]);for(var r=0;r<q.cells.length;r++)if(q.cells[r]._cellIndexS==f){o=q.cells[r].getElementsByTagName("SELECT").length?"":_isIE?q.cells[r].innerText:q.cells[r].textContent,o=o.replace(/[ \n\r\t\xA0]+/," ");break}o&&" "!=o||j++,l+="<column"+n+"><![CDATA["+o+"]]></column>"}j!=p._cCount&&(h+="\n<columns>"+l+"</columns>")}return h+="</head>\n",h+=i()}function h(){var a=[];if(e)for(var b=0;b<e.length;b++)a.push(k(p.getRowIndex(e[b])));else for(var b=0;b<p.getRowsNum();b++)a.push(k(b));return a.join("\n")}function i(){var a=["<foot>"];if(!p.ftr)return"";for(var b=1;b<p.ftr.rows.length;b++){a.push("<columns>");for(var c=p.ftr.rows[b],d=0;d<p._cCount;d++)if(!(p._srClmn&&!p._srClmn[d]||p._hrrar[d]&&(!p._fake||d>=p._fake.hdrLabels.length))){for(var e=0;e<c.cells.length;e++){var f="",g="";if(c.cells[e]._cellIndexS==d){f=_isIE?c.cells[e].innerText:c.cells[e].textContent,f=f.replace(/[ \n\r\t\xA0]+/," "),c.cells[e].colSpan&&1!=c.cells[e].colSpan&&(g=" colspan='"+c.cells[e].colSpan+"' "),c.cells[e].rowSpan&&1!=c.cells[e].rowSpan&&(g=" rowspan='"+c.cells[e].rowSpan+"' ");break}}a.push("<column"+g+"><![CDATA["+f+"]]></column>")}a.push("</columns>")}return a.push("</foot>"),a.join("\n")}function j(a,b){return(window.getComputedStyle?window.getComputedStyle(a,null)[b]:a.currentStyle?a.currentStyle[b]:null)||""}function k(a){if(!p.rowsBuffer[a])return"";var b=p.render_row(a);if("none"==b.style.display)return"";for(var c=p.isTreeGrid()?' level="'+p.getLevel(b.idd)+'"':"",d="<row"+c+">",e=0;e<p._cCount;e++)if((!p._srClmn||p._srClmn[e])&&(!p._hrrar[e]||p._fake&&e<p._fake.hdrLabels.length)){var f=p.cells(b.idd,e);if(o){var g=j(f.cell,"color"),h=j(f.cell,"backgroundColor"),i=j(f.cell,"font-weight")||j(f.cell,"fontWeight"),k=j(f.cell,"font-style")||j(f.cell,"fontStyle"),l=j(f.cell,"text-align")||j(f.cell,"textAlign"),m=j(f.cell,"font-family")||j(f.cell,"fontFamily");("transparent"==h||"rgba(0, 0, 0, 0)"==h)&&(h="rgb(255,255,255)"),d+="<cell bgColor='"+h+"' textColor='"+g+"' bold='"+i+"' italic='"+k+"' align='"+l+"' font='"+m+"'>"}else d+="<cell>";d+="<![CDATA["+(f.getContent?f.getContent():f.getTitle())+"]]></cell>"}return d+"</row>"}function l(){var a="</rows>";return a}var m={row:this.getSelectedRowId(),col:this.getSelectedCellIndex()};if(null===m.row||-1===m.col)m=!1;else{var n=this.cells(m.row,m.col).cell;n.parentNode.className=n.parentNode.className.replace(" rowselected",""),n.className=n.className.replace(" cellselected",""),m.el=n}b=b||"color";var o="full_color"==b,p=this;p._asCDATA=!0,this.target="undefined"==typeof f?' target="_blank"':f,eXcell_ch.prototype.getContent=function(){return this.getValue()},eXcell_ra.prototype.getContent=function(){return this.getValue()};var q=document.createElement("div");q.style.display="none",document.body.appendChild(q);var r="form_"+p.uid();q.innerHTML='<form id="'+r+'" method="post" action="'+a+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>',document.getElementById(r).firstChild.value=encodeURIComponent(g(b).replace("–","-")+h()+l()),document.getElementById(r).submit(),q.parentNode.removeChild(q),p=null,m&&(m.el.parentNode.className+=" rowselected",m.el.className+=" cellselected"),m=null},dhtmlXGridObject.prototype._serialiseExportConfig=function(a){function b(a){return"string"!=typeof a?a:(a=a.replace(/&/g,"&amp;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/'/g,"&apos;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"))}for(var c="<head>",d=0;d<this.hdr.rows[0].cells.length;d++)if(!(this._srClmn&&!this._srClmn[d]||this._hrrar[d]&&(!this._fake||d>=this._fake.hdrLabels.length))){var e=this.fldSort[d];"cus"==e&&(e=this._customSorts[d].toString(),e=e.replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));var f=a[1][d],g=(f[1]&&f[1]>1?' rowspan="'+f[1]+'" ':"")+(f[0]&&f[0]>1?' colspan="'+f[0]+'" ':"");c+="<column "+g+" width='"+this.getColWidth(d)+"' align='"+this.cellAlign[d]+"' type='"+this.cellType[d]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(d)?"true":"false")+"' sort='"+(e||"na")+"' color='"+(this.columnColor[d]||"")+"'"+(this.columnIds[d]?" id='"+this.columnIds[d]+"'":"")+">",c+=this._asCDATA?"<![CDATA["+this.getHeaderCol(d)+"]]>":this.getHeaderCol(d);var h=this.combos[d]?this.getCombo(d):null;if(h)for(var i=0;i<h.keys.length;i++)c+="<option value='"+b(h.keys[i])+"'><![CDATA["+h.values[i]+"]]></option>";c+="</column>"}return c+="</head>"},window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""}),dhtmlXGridObject.prototype.toExcel=function(a,b,c,d,e){if(!document.getElementById("ifr")){var f=document.createElement("iframe");f.style.display="none",f.setAttribute("name","dhx_export_iframe"),f.setAttribute("src",""),f.setAttribute("id","dhx_export_iframe"),document.body.appendChild(f)}var g=' target="dhx_export_iframe"';this.toPDF(a,b,c,d,e,g)},dhtmlXGridObject.prototype.filterBy=function(a,b,c){if(this.isTreeGrid())return this.filterTreeBy(a,b,c);if(this._f_rowsBuffer?c||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(this.dma(!0),"object"==typeof a)for(var d=0;d<b.length;d++)this._filterA(a[d],b[d]);else this._filterA(a,b);this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._filterA=function(a,b){if(""!=b){var c=!0;if("function"==typeof b?c=!1:b=(b||"").toString().toLowerCase(),this.rowsBuffer.length)for(var d=this.rowsBuffer.length-1;d>=0;d--)(c?-1!=this._get_cell_value(this.rowsBuffer[d],a).toString().toLowerCase().indexOf(b):b.call(this,this._get_cell_value(this.rowsBuffer[d],a),this.rowsBuffer[d].idd))||this.rowsBuffer.splice(d,1)}},dhtmlXGridObject.prototype.getFilterElement=function(a){if(this.filters){for(var b=0;b<this.filters.length;b++)if(this.filters[b][1]==a)return this.filters[b][0].combo||this.filters[b][0];return null}},dhtmlXGridObject.prototype.collectValues=function(a){var b=this.callEvent("onCollectValues",[a]);if(b!==!0)return b;if(this.isTreeGrid())return this.collectTreeValues(a);this.dma(!0),this._build_m_order(),a=this._m_order?this._m_order[a]:a;for(var c={},d=[],e=this._f_rowsBuffer||this.rowsBuffer,f=0;f<e.length;f++){var g=this._get_cell_value(e[f],a);!g||e[f]._childIndexes&&e[f]._childIndexes[a]==e[f]._childIndexes[a-1]||(c[g]=!0)}this.dma(!1);var h=this.combos[a]||(this._col_combos?this._col_combos[a]:!1);for(var i in c)c[i]===!0&&(h&&(h.get&&h.get(i)?i=h.get(i):h.getOption&&h.getOption(i)&&(i=h.getOption(i).text)),d.push(i));return d.sort()},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++)this._m_order[this._c_order[a]]=a}},dhtmlXGridObject.prototype.filterByAll=function(){var a=[],b=[];this._build_m_order();for(var c=0;c<this.filters.length;c++){var d=this._m_order?this._m_order[this.filters[c][1]]:this.filters[c][1];if(!(d>=this._cCount)){b.push(d);var e=this.filters[c][0].old_value=this.filters[c][0].value;this.filters[c][0]._filter&&(e=this.filters[c][0]._filter());var f;"function"!=typeof e&&(f=this.combos[d]||(this._col_combos?this._col_combos[d]:!1))&&(f.values?(d=f.values._dhx_find(e),e=-1==d?e:f.keys[d]):f.getOptionByLabel&&(e=f.getOptionByLabel(e)?f.getOptionByLabel(e).value:e)),a.push(e)}}this.callEvent("onFilterStart",[b,a])&&(this.filterBy(b,a),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length&&(this._f_rowsBuffer=null))},dhtmlXGridObject.prototype.makeFilter=function(a,b){if(this.filters||(this.filters=[]),"object"!=typeof a&&(a=document.getElementById(a)),a){var c=this;if(a.style.width||(a.style.width="90%"),"SELECT"==a.tagName)this.filters.push([a,b]),this._loadSelectOptins(a,b),a.onchange=function(){c.filterByAll()},_isIE&&(a.style.marginTop="1px"),this.attachEvent("onEditCell",function(c,d,e){return this._build_m_order(),2==c&&this.filters&&(this._m_order?e==this._m_order[b]:e==b)&&this._loadSelectOptins(a,b),!0});else if("INPUT"==a.tagName)this.filters.push([a,b]),a.old_value=a.value="",a.onkeydown=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){a.value!=a.old_value&&(c.filterByAll(),a.old_value=a.value)},500)};else if("DIV"==a.tagName&&"combo"==a.className){this.filters.push([a,b]),a.style.padding="0px",a.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var d=new dhtmlXCombo(a,"_filter","90%");d.filterSelfA=d.filterSelf,d.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(""),this.filterSelfA.apply(this,arguments),this.optionsArr[0].hide(!1)},d.enableFilteringMode(!0),a.combo=d,a.value="",this._loadComboOptins(a,b),d.attachEvent("onChange",function(){a.value=d.getSelectedValue(),null===a.value&&(a.value=""),c.filterByAll()})}a.parentNode&&(a.parentNode.className+=" filter"),this._filters_ready()}},dhtmlXGridObject.prototype.findCell=function(a,b,c,d){var d=d||function(a,b){return-1!=b.toString().toLowerCase().indexOf(a)};d===!0&&(d=function(a,b){return b.toString().toLowerCase()==a});var e=new Array;if(a=a.toString().toLowerCase(),"number"!=typeof c&&(c=c?1:0),!this.rowsBuffer.length)return e;for(var f=b||0;f<this._cCount;f++){if(this._h2)this._h2.forEachChild(0,function(b){return c&&e.length==c?e:void(d(a,this._get_cell_value(b.buff,f))&&e.push([b.id,f]))},this);else for(var g=0;g<this.rowsBuffer.length;g++)if(d(a,this._get_cell_value(this.rowsBuffer[g],f))&&(e.push([this.rowsBuffer[g].idd,f]),c&&e.length==c))return e;if("undefined"!=typeof b)return e}return e},dhtmlXGridObject.prototype.makeSearch=function(a,b,c){if("object"!=typeof a&&(a=document.getElementById(a)),a){var d=this;"INPUT"==a.tagName&&(a.onkeypress=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){if(""!=a.value){var e=d.findCell(a.value,b,!0,c);e.length&&(d._h2&&d.openItem(e[0][0]),d.selectCell(d.getRowIndex(e[0][0]),b||0))}},500)}),a.parentNode&&(a.parentNode.className+=" filter")}},dhtmlXGridObject.prototype._loadSelectOptins=function(a,b){var c=this.collectValues(b),d=a.value;a.innerHTML="",a.options[0]=new Option("","");for(var e=this._filter_tr?this._filter_tr[b]:null,f=0;f<c.length;f++)a.options[a.options.length]=new Option(e?e(c[f]):c[f],c[f]);a.value=d},dhtmlXGridObject.prototype.setSelectFilterLabel=function(a,b){this._filter_tr||(this._filter_tr=[]),this._filter_tr[a]=b},dhtmlXGridObject.prototype._loadComboOptins=function(a,b){if(a.combo){var c=this.collectValues(b);a.combo.clearAll();for(var d=[["",""]],e=0;e<c.length;e++)d.push([c[e],c[e]]);a.combo.addOption(d)}},dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var a=0;a<this.filters.length;a++)switch(this.filters[a][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[a]);break;case"div":this._loadComboOptins.apply(this,this.filters[a])}},dhtmlXGridObject.prototype._filters_ready=function(){this.attachEvent("onXLE",this.refreshFilters),this.attachEvent("onRowCreated",function(a,b){if(this._f_rowsBuffer)for(var c=0;c<this._f_rowsBuffer.length;c++)if(this._f_rowsBuffer[c].idd==a)return this._f_rowsBuffer[c]=b}),this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null,this.hdr.rows.length||(this.filters=[])}),this.attachEvent("onSetSizes",this._filters_resize_combo),this.attachEvent("onResize",this._filters_resize_combo),this._filters_ready=function(){}},dhtmlXGridObject.prototype._filters_resize_combo=function(){if(this.filters){for(var a=0;a<this.filters.length;a++)null!=this.filters[a][0].combo&&this.filters[a][0].combo.setSize(Math.round(90*this.filters[a][0].offsetWidth/100));return!0}},dhtmlXGridObject.prototype._in_header_text_filter=function(a,b){a.innerHTML="<input type='text'>",a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},a.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(a.firstChild,b)},dhtmlXGridObject.prototype._in_header_text_filter_inc=function(a,b){a.innerHTML="<input type='text'>",a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},a.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(a.firstChild,b),a.firstChild._filter=function(){return""==a.firstChild.value?"":function(b){return 0==b.toString().toLowerCase().indexOf(a.firstChild.value.toLowerCase())}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_select_filter=function(a,b){a.innerHTML="<select></select>",a.onclick=function(a){return(a||event).cancelBubble=!0,!1},this.makeFilter(a.firstChild,b)},dhtmlXGridObject.prototype._in_header_select_filter_strict=function(a,b){a.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>",a.onclick=function(a){return(a||event).cancelBubble=!0,!1},this.makeFilter(a.firstChild,b);var c=this.combos;a.firstChild._filter=function(){var d=a.firstChild.value;return d?(c[b]&&(d=c[b].keys[c[b].values._dhx_find(d)]),d=d.toLowerCase(),function(a){return a.toString().toLowerCase()==d}):""},this._filters_ready()},dhtmlXGridObject.prototype._in_header_combo_filter=function(a,b){a.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>",a.onselectstart=function(){return event.cancelBubble=!0},a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},this.makeFilter(a.firstChild,b)},dhtmlXGridObject.prototype._search_common=function(a){a.innerHTML="<input type='text' style='width:90%; '>",a.onclick=a.onmousedown=function(a){return(a||event).cancelBubble=!0,!0},a.onselectstart=function(){return event.cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_text_search=function(a,b){this._search_common(a,b),this.makeSearch(a.firstChild,b)},dhtmlXGridObject.prototype._in_header_text_search_strict=function(a,b){this._search_common(a,b),this.makeSearch(a.firstChild,b,!0)},dhtmlXGridObject.prototype._in_header_numeric_filter=function(a,b){this._in_header_text_filter.call(this,a,b),a.firstChild._filter=function(){var a,b=this.value,c="==",d=parseFloat(b.replace("=","")),e=null;return b?-1!=b.indexOf("..")?(b=b.split(".."),d=parseFloat(b[0]),e=parseFloat(b[1]),function(a){return a>=d&&e>=a?!0:!1}):(a=b.match(/>=|<=|>|</),a&&(c=a[0],d=parseFloat(b.replace(c,""))),Function("v"," if (v "+c+" "+d+" ) return true; return false;")):""}},dhtmlXGridObject.prototype._in_header_master_checkbox=function(a,b,c){a.innerHTML=c[0]+"<input type='checkbox' />"+c[1];var d=this;a.getElementsByTagName("input")[0].onclick=function(a){d._build_m_order();var c=d._m_order?d._m_order[b]:b,e=this.checked?1:0;d.forEachRowA(function(a){var b=this.cells(a,c);b.isCheckbox()&&(b.setValue(e),b.cell.wasChanged=!0),this.callEvent("onEditCell",[1,a,c,e]),this.callEvent("onCheckbox",[a,c,e])}),(a||event).cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_stat_total=function(a,b,c){var d=function(){var a=0;this._build_m_order();for(var c=this._m_order?this._m_order[b]:b,d=0;d<this.rowsBuffer.length;d++){var e=parseFloat(this._get_cell_value(this.rowsBuffer[d],c));a+=isNaN(e)?0:e}return this._maskArr[c]?this._aplNF(a,c):Math.round(100*a)/100};this._stat_in_header(a,d,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_multi_total=function(a,b,c){var d=c[1].split(":");c[1]="";for(var e=0;e<d.length;e++)d[e]=parseInt(d[e]);for(var f=function(){for(var a=0,c=0;c<this.rowsBuffer.length;c++){for(var e=1,f=0;f<d.length;f++)e*=parseFloat(this._get_cell_value(this.rowsBuffer[c],d[f]));a+=isNaN(e)?0:e}return this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100},g=[],h=0;h<d.length;h++)g[d[h]]=!0;this._stat_in_header(a,f,g,c,c)},dhtmlXGridObject.prototype._in_header_stat_max=function(a,b,c){var d=function(){this._build_m_order();var a=this._m_order?this._m_order[b]:b,c=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var d=0;d<this.rowsBuffer.length;d++)c=Math.max(c,parseFloat(this._get_cell_value(this.rowsBuffer[d],a)));return this._maskArr[b]?this._aplNF(c,b):c};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_min=function(a,b,c){var d=function(){this._build_m_order();var a=this._m_order?this._m_order[b]:b,c=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var d=0;d<this.rowsBuffer.length;d++)c=Math.min(c,parseFloat(this._get_cell_value(this.rowsBuffer[d],a)));return this._maskArr[b]?this._aplNF(c,b):c};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_average=function(a,b,c){var d=function(){this._build_m_order();var a=this._m_order?this._m_order[b]:b,c=0,d=0;if(0==this.getRowsNum())return"&nbsp;";for(var e=0;e<this.rowsBuffer.length;e++){var f=parseFloat(this._get_cell_value(this.rowsBuffer[e],a));c+=isNaN(f)?0:f,d++}return this._maskArr[b]?this._aplNF(c/d,b):Math.round(c/d*100)/100};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_count=function(a,b,c){var d=function(){return this.getRowsNum()};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._stat_in_header=function(a,b,c,d){var e=function(){this.dma(!0),a.innerHTML=(d[0]?d[0]:"")+b.call(this)+(d[1]?d[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var a=0;a<this._stat_events.length;a++)for(var b=0;4>b;b++)this.detachEvent(this._stat_events[a][b]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",e),this.attachEvent("onXLE",e),this.attachEvent("onFilterEnd",e),this.attachEvent("onEditCell",function(a,b,d){return 2==a&&(d==c||c&&c[d])&&e.call(this),!0})]),a.innerHTML=""},dhtmlXGridObject.prototype.loadCSVFile=function(a,b){this.load(a,b,"csv")},dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this._csvAID=convertStringToBoolean(a)},dhtmlXGridObject.prototype.enableCSVHeader=function(a){this._csvHdr=convertStringToBoolean(a)},dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a},dhtmlXGridObject.prototype._csvAID=!0,dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,"csv")},dhtmlXGridObject.prototype.serializeToCSV=function(a){this.editStop(),this._agetm=this._mathSerialization?"getMathValue":this._strictText||a?"getTitle":"getValue";var b=[];if(this._csvHdr)for(var c=1;c<this.hdr.rows.length;c++){for(var d=[],e=0;e<this._cCount;e++)(!this._srClmn||this._srClmn[e])&&d.push(this.getColumnLabel(e,c-1));b.push(this.csvParser.str(d,this.csv.cell,this.csv.row))}var e=0,f=this.rowsBuffer.length;for(e;f>e;e++){var g=this._serializeRowToCVS(null,e);""!=g&&b.push(g)}return this.csvParser.block(b,this.csv.row)},dhtmlXGridObject.prototype._serializeRowToCVS=function(a,b,c,d){var e=new Array;a||(a=this.render_row(b),this._fake&&!this._fake.rowsAr[a.idd]&&this._fake.render_row(b)),this._csvAID||(e[e.length]=a.idd),c=c||0,d=d||this._cCount;for(var f=!1,g=c;a.childNodes[c]._cellIndex>g&&c;)c--;for(var h=c;d>g&&a.childNodes[h];h++){var i=a.childNodes[h]._cellIndex;if(this._srClmn&&!this._srClmn[i]||this._serialize_visible&&this._hrrar[i])g++;else{for(var j=a.childNodes[h],k=this.cells(a.idd,i);g!=i&&(g++,e.push(""),!(g>=d)););if(g>=d)break;if(g++,zxVal=k.cell?k[this._agetm]():"",this._chAttr&&k.wasChanged()&&(f=!0),e[e.length]=null===zxVal?"":zxVal,this._ecspn&&j.colSpan&&j.colSpan>1){j=j.colSpan-1;for(var l=0;j>l;l++)e[e.length]="",g++}}}return this._onlChAttr&&!f?"":this.csvParser.str(e,this.csv.cell,this.csv.row)},dhtmlXGridObject.prototype.toClipBoard=function(a){window.clipboardData?window.clipboardData.setData("Text",a):(new Clipboard).copy(a)},dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()},dhtmlXGridObject.prototype.cellToClipboard=function(a,b){if(!a||!b){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd,b=this.cell._cellIndex}var c=this.cells(a,b);this.toClipBoard(((c.getLabel?c.getLabel():c.getValue())||"").toString())},dhtmlXGridObject.prototype.updateCellFromClipboard=function(a,b){if(!a||!b){if(!this.selectedRows[0])return;a=this.selectedRows[0].idd,b=this.cell._cellIndex}var c=this.cells(a,b);c[c.setImage?"setLabel":"setValue"](this.fromClipBoard())},dhtmlXGridObject.prototype.rowToClipboard=function(a){var b="";if(this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue",this._serialize_visible=!0,a)b=this._serializeRowToCVS(this.getRowById(a));else for(var c=[],d=0;d<this.selectedRows.length;d++)c[c.length]=this._serializeRowToCVS(this.selectedRows[d]),b=this.csvParser.block(c,this.csv.row);this._serialize_visible=!1,this.toClipBoard(b)},dhtmlXGridObject.prototype.updateRowFromClipboard=function(a){var b=this.fromClipBoard();if(b){if(a)var c=this.getRowById(a);else var c=this.selectedRows[0];if(c){var d=this.csvParser;b=d.unblock(b,this.csv.cell,this.csv.row)[0],this._csvAID||b.splice(0,1);
for(var e=0;e<b.length;e++){var f=this.cells3(c,e);f[f.setImage?"setLabel":"setValue"](b[e])}}}},dhtmlXGridObject.prototype.csvParser={block:function(a,b){return a.join(b)},unblock:function(a,b,c){for(var d=(a||"").split(c),e=0;e<d.length;e++)d[e]=(d[e]||"").split(b);var f=d.length-1;return 1==d[f].length&&""==d[f][0]&&d.splice(f,1),d},str:function(a,b){return a.join(b)}},dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('\\\\"',"g"),block:function(a,b){return a.join(b)},unblock:function(a,b,c){var d=[[]],e=0;if(!a)return d;for(var f=/^[ ]*"/,g=/"[ ]*$/,h=new RegExp(".*"+c+".*$"),i=a.split(b),j=0;j<i.length;j++)if(i[j].match(f)){for(var k=i[j].replace(f,"");!i[j].match(g);)j++,k+=i[j];d[e].push(k.replace(g,"").replace(this._quote_esc,'"'))}else if(i[j].match(h)){var l=i[j].indexOf(c);d[e].push(i[j].substr(0,l)),e++,d[e]=[],i[j]=i[j].substr(l+1),j--}else(i[j]||j!=i.length-1)&&d[e].push(i[j]);var m=d.length-1;return m>0&&!d[m].length&&d.splice(m,1),d},str:function(a,b){for(var c=0;c<a.length;c++)a[c]='"'+a[c].replace(this._quote,'\\"')+'"';return a.join(b)}},dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(a)for(var b=this.csvParser.unblock(a,this.csv.cell,this.csv.row),c=0;c<b.length;c++)if(b[c]){if(a=b[c],!a.length)continue;this._csvAID?this.addRow(this.getRowsNum()+2,a):(this.rowsAr[a[0]]&&(a[0]=this.uid()),this.addRow(a[0],a.slice(1)))}},dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())},dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();a&&this.loadCSVString(a)},dhtmlXGridObject.prototype.getXLS=function(a){if(!this.xslform){this.xslform=document.createElement("FORM"),this.xslform.action=(a||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform);var b=document.createElement("INPUT");b.type="hidden",b.name="csv",this.xslform.appendChild(b);var c=document.createElement("INPUT");c.type="hidden",c.name="csv_header",this.xslform.appendChild(c)}var d=this.serializeToCSV();this.xslform.childNodes[0].value=d;for(var e=[],f=this._cCount,g=0;f>g;g++)e.push(this.getHeaderCol(g));e=e.join(","),this.xslform.childNodes[1].value=e,this.xslform.submit()},dhtmlXGridObject.prototype.printView=function(a,b){var c="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }	\n  </style>",d=null;if(this._fake){d=[].concat(this._hrrar);for(var e=0;e<this._fake._cCount;e++)this._hrrar[e]=null}c+="<base  href='"+document.location.href+"'></base>",this.parentGrid||(c+=a||""),c+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var f=Math.max(this.rowsBuffer.length,this.rowsCol.length),g=this._cCount,h=this._printWidth();c+='<tr class="header_row_1">';for(var e=0;g>e;e++)if(!this._hrrar||!this._hrrar[e]){for(var i=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(e)]:e],j=i.colSpan||1,k=i.rowSpan||1,l=1;j>l;l++)h[e]+=h[l];c+='<td rowspan="'+k+'" width="'+h[e]+'%" style="background-color:lightgrey;" colspan="'+j+'">'+this.getHeaderCol(e)+"</td>",e+=j-1}c+="</tr>";for(var e=2;e<this.hdr.rows.length;e++)if(_isIE){c+="<tr style='background-color:lightgrey' class='header_row_"+e+"'>";for(var m=this.hdr.rows[e].childNodes,l=0;l<m.length;l++)this._hrrar&&this._hrrar[m[l]._cellIndex]||(c+=m[l].outerHTML);c+="</tr>"}else c+="<tr class='header_row_"+e+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[e].innerHTML:"")+this.hdr.rows[e].innerHTML+"</tr>";for(var e=0;f>e;e++)if(c+="<tr>",this.rowsCol[e]&&this.rowsCol[e]._cntr)c+=this.rowsCol[e].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[e]||"none"!=this.rowsCol[e].style.display){var n;if(this.rowsCol[e])n=this.rowsCol[e].idd;else{if(!this.rowsBuffer[e])continue;n=this.rowsBuffer[e].idd}for(var l=0;g>l;l++)if(!this._hrrar||!this._hrrar[l]){if(this.rowsAr[n]&&"TR"==this.rowsAr[n].tagName){var o=this.cells(n,l);if(o._setState)var p="";else if(o.getContent)p=o.getContent();else if(o.getImage||o.combo)var p=o.cell.innerHTML;else var p=o.getValue()}else var p=this._get_cell_value(this.rowsBuffer[e],l);var q=this.columnColor[l]?"background-color:"+this.columnColor[l]+";":"",r=this.cellAlign[l]?"text-align:"+this.cellAlign[l]+";":"",s=o.getAttribute("colspan");c+='<td style="'+q+r+'" '+(s?'colSpan="'+s+'"':"")+">"+(""===p?"&nbsp;":p)+"</td>",s&&(l+=s-1)}if(c+="</tr>",this.rowsCol[e]&&this.rowsCol[e]._expanded){var t=this.cells4(this.rowsCol[e]._expanded.ctrl);c+=t.getSubGrid?'<tr><td colspan="'+g+'">'+t.getSubGrid().printView()+"</td></tr>":'<tr><td colspan="'+g+'">'+this.rowsCol[e]._expanded.innerHTML+"</td></tr>"}}if(this.ftr)for(var e=1;e<this.ftr.childNodes[0].rows.length;e++)c+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[e].innerHTML:"")+this.ftr.childNodes[0].rows[e].innerHTML+"</tr>";if(c+="</table>",this.parentGrid)return c;c+=b||"";var u=window.open("","_blank");u.document.write(c),u.document.write("<script>window.onerror=function(){return true;}</script>"),u.document.close(),this._fake&&(this._hrrar=d)},dhtmlXGridObject.prototype._printWidth=function(){for(var a=[],b=0,c=0;c<this._cCount;c++){var d=this.getColWidth(c);a.push(d),b+=d}for(var e=[],f=0,c=0;c<a.length;c++){var g=Math.floor(a[c]/b*100);f+=g,e.push(g)}return e[e.length-1]+=100-f,e},window.clipboardData||(window.clipboardData={_make:function(){var a=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!a)return null;var b=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!b)return null;b.addDataFlavor("text/unicode");var c=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);return this._p=[a,b,c],!0},setData:function(a,b){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(c){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[a,b]),""}if(!this._make())return!1;this._p[2].data=b,this._p[1].setTransferData("text/unicode",this._p[2],2*b.length);var d=Components.interfaces.nsIClipboard;this._p[0].setData(this._p[1],null,d.kGlobalClipboard)},getData:function(a){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(b){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[a]),""}if(!this._make())return!1;this._p[0].getData(this._p[1],this._p[0].kGlobalClipboard);var c=new Object,d=new Object;try{this._p[1].getTransferData("text/unicode",d,c)}catch(b){return""}return d&&(d=d.value.QueryInterface(Components.interfaces.nsISupportsString)),d?d.data.substring(0,c.value/2):""}}),dhtmlXGridObject.prototype.enableBlockSelection=function(a){if("undefined"==typeof this._bs_mode){var b=this;this.obj.onmousedown=function(a){return b._bs_mode&&b._OnSelectionStart(a||event,this),!0},this._CSVRowDelimiter=this.csv.row,this.attachEvent("onResize",function(){return b._HideSelection(),!0}),this.attachEvent("onGridReconstructed",function(){return b._HideSelection(),!0}),this.attachEvent("onFilterEnd",this._HideSelection)}if(a===!1)return this._bs_mode=!1,this._HideSelection();this._bs_mode=!0;var c=this._clip_area=document.createElement("textarea");c.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",c.onkeydown=function(a){a=a||event,86==a.keyCode&&(a.ctrlKey||a.metaKey)&&b.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){b.editor||b._clip_area.select()})},dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=convertStringToBoolean(a)},dhtmlXGridObject.prototype._OnSelectionStart=function(a){var b=this;if(2!=a.button){var c=a.srcElement||a.target;if(this.editor){if(c.tagName&&("INPUT"==c.tagName||"TEXTAREA"==c.tagName))return;this.editStop()}b.setActive(!0);var d=this.getPosition(this.obj),e=a.clientX-d[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),f=a.clientY-d[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(this._CreateSelection(e-4,f-4),c==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;c&&(!c.tagName||"td"!=c.tagName.toLowerCase());)c=c.parentNode;this._startSelectionCell=c}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null,this.obj[_isIE?"onmouseleave":"onmouseout"]=function(){b._blsTimer&&window.clearTimeout(b._blsTimer)},this.obj.onmmold=this.obj.onmousemove,this._init_pos=[e,f],this._selectionObj.onmousemove=this.obj.onmousemove=function(c){c=c||a,c.preventDefault?c.preventDefault():c.returnValue=!1,b._OnSelectionMove(c)},this._oldDMP=document.body.onmouseup,document.body.onmouseup=function(c){return c=c||a,b._OnSelectionStop(c,this),!0},this.callEvent("onBeforeBlockSelection",[]),document.body.onselectstart=function(){return!1}}},dhtmlXGridObject.prototype._getCellByPos=function(a,b){a=a,this._fake&&(a+=this._fake.objBox.scrollWidth),b=b;for(var c=0,d=0;d<this.obj.rows.length;d++)if(b-=this.obj.rows[d].offsetHeight,0>=b){c=this.obj.rows[d];break}if(!c||!c.idd)return null;for(var d=0;d<this._cCount;d++)if(a-=this.getColWidth(d),0>=a)for(;;){if(!c._childIndexes||c._childIndexes[d+1]!=c._childIndexes[d])return this.cells(c.idd,d).cell;c=c.previousSibling}return null},dhtmlXGridObject.prototype._OnSelectionMove=function(a){var b=this;this._ShowSelection();var c=this.getPosition(this.obj),d=a.clientX-c[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),e=a.clientY-c[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(Math.abs(this._init_pos[0]-d)<5&&Math.abs(this._init_pos[1]-e)<5)return this._HideSelection();var f=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(a.srcElement||a.target,"TD");else if(a.srcElement||a.target)if("dhtmlxGrid_selection"==(a.srcElement||a.target).className)this._endSelectionCell=this._getCellByPos(d,e)||this._endSelectionCell;else{var g=this.getFirstParentOfType(a.srcElement||a.target,"TD");g.parentNode.idd&&(this._endSelectionCell=g)}this._endSelectionCell&&(this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])||(this._endSelectionCell=f));var h=this.objBox.scrollLeft+this.objBox.clientWidth,i=this.objBox.scrollTop+this.objBox.clientHeight,j=this.objBox.scrollLeft,k=this.objBox.scrollTop,l=!1;if(this._blsTimer&&window.clearTimeout(this._blsTimer),d+20>=h?(this.objBox.scrollLeft=this.objBox.scrollLeft+20,l=!0):j>d-20&&(this.objBox.scrollLeft=this.objBox.scrollLeft-20,l=!0),e+20>=i&&!this._realfake?(this.objBox.scrollTop=this.objBox.scrollTop+20,l=!0):k>e-20&&!this._realfake&&(this.objBox.scrollTop=this.objBox.scrollTop-20,l=!0),this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell),l){var m=a.clientX,n=a.clientY;this._blsTimer=window.setTimeout(function(){b._OnSelectionMove({clientX:m,clientY:n})},100)}},dhtmlXGridObject.prototype._OnSelectionStop=function(a){var b=this;if(this._blsTimer&&window.clearTimeout(this._blsTimer),this.obj.onmousedown=function(c){return b._bs_mode&&b._OnSelectionStart(c||a,this),!0},this.obj.onmousemove=this.obj.onmmold||null,this._selectionObj.onmousemove=null,document.body.onmouseup=this._oldDMP||null,parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2)this._HideSelection();else{var c=this.getFirstParentOfType(a.srcElement||a.target,"TD");for(c&&c.parentNode.idd||(c=this._endSelectionCell);c&&(!c.tagName||"td"!=c.tagName.toLowerCase());)c=c.parentNode;if(!c)return this._HideSelection();this._stopSelectionCell=c,this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell),this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}},dhtmlXGridObject.prototype._RedrawSelectionPos=function(a,b){var c={};c.LeftTopCol=a._cellIndex,c.LeftTopRow=this.getRowIndex(a.parentNode.idd),c.RightBottomCol=b._cellIndex,c.RightBottomRow=this.getRowIndex(b.parentNode.idd);var d=a.offsetWidth,e=a.offsetHeight;a=this.getPosition(a,this.obj);var f=b.offsetWidth,g=b.offsetHeight;if(b=this.getPosition(b,this.obj),a[0]<b[0])var h=a[0],i=b[0]+f;else{var j=c.RightBottomCol;c.RightBottomCol=c.LeftTopCol,c.LeftTopCol=j;var h=b[0],i=a[0]+d}if(a[1]<b[1])var k=a[1],l=b[1]+g;else{var j=c.RightBottomRow;c.RightBottomRow=c.LeftTopRow,c.LeftTopRow=j;var k=b[1],l=a[1]+e}var m=i-h,n=l-k;return this._selectionObj.style.left=h+"px",this._selectionObj.style.top=k+"px",this._selectionObj.style.width=m+"px",this._selectionObj.style.height=n+"px",c},dhtmlXGridObject.prototype._CreateSelection=function(a,b){if(null==this._selectionObj){var c=document.createElement("div");c.style.position="absolute",c.style.display="none",c.className="dhtmlxGrid_selection",this._selectionObj=c,this._selectionObj.onmousedown=function(a){return a=a||event,2==a.button||_isMacOS&&a.ctrlKey?this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",a]):void 0},this._selectionObj.oncontextmenu=function(a){return(a||event).cancelBubble=!0,!1},this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px",this._selectionObj.style.height="0px",this._selectionObj.style.left=a+"px",this._selectionObj.style.top=b+"px",this._selectionObj.startX=a,this._selectionObj.startY=b},dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")},dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none"),this._selectionArea=null,this._clip_area.value="",this._clip_area.blur()},dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(null!=this._selectionArea){var a=new Array;this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue",this._serialize_visible=!0;for(var b=this._selectionArea.LeftTopRow;b<=this._selectionArea.RightBottomRow;b++){var c=this._serializeRowToCVS(this.rowsBuffer[b],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);a[a.length]=this._csvAID?c:c.substr(c.indexOf(this.csv.cell)+1)}a=a.join(this._CSVRowDelimiter),this._clip_area.value=a,this._clip_area.select(),this._serialize_visible=!1}},dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){this._clip_area.select();var a=this;window.setTimeout(function(){a._pasteBlockFromClipboard(),a=null},1)},dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var a=this._clip_area.value;if(null!=this._selectionArea)var b=this._selectionArea.LeftTopRow,c=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;var b=this.getRowIndex(this.cell.parentNode.idd),c=this.cell._cellIndex}a=this.csvParser.unblock(a,this.csv.cell,this.csv.row);var d=b+a.length,e=c+a[0].length;e>this._cCount&&(e=this._cCount);for(var f=0,g=b;d>g;g++){var h=this.render_row(g);if(-1!=h){for(var i=0,j=c;e>j;j++)if(this._hrrar[j])e=Math.max(e+1,this._cCount);else{var k=this.cells3(h,j);if(k.isDisabled())i++;else{if(this._onEditUndoRedo&&this._onEditUndoRedo(2,h.idd,j,a[f][i],k.getValue()),k.combo){for(var l=k.combo.values,m=0;m<l.length;m++)if(a[f][i]==l[m]){k.setValue(k.combo.keys[m]),l=null;break}null!=l&&k.editable?k.setValue(a[f][i++]):i++}else k[k.setImage?"setLabel":"setValue"](a[f][i++]);k.cell.wasChanged=!0}}this.callEvent("onRowPaste",[h.idd]),f++}}},dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null},dhtmlXGridObject.prototype.enableSmartRendering=function(a,b,c){arguments.length>2&&(b&&!this.rowsBuffer[b-1]&&(this.rowsBuffer[b-1]=0),b=c),this._srnd=convertStringToBoolean(a),this._srdh=this._srdh||20,this._dpref=b||0},dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)},dhtmlXGridObject.prototype.forceFullLoading=function(a,b){for(var c=0;c<this.rowsBuffer.length;c++)if(!this.rowsBuffer[c]){var d=a||this.rowsBuffer.length-c;if(this.callEvent("onDynXLS",[c,d])){var e=this;this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+c+"&count="+d,function(){window.setTimeout(function(){e.forceFullLoading(a,b)},100)},this._data_type)}return}b&&b.call(this)},dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this._srdh=parseInt(a)},dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2},dhtmlXGridObject.prototype._add_filler=function(a,b,c,d){if(!b)return null;var e="__filler__",f=this._prepareRow(e);f.firstChild.style.width="1px";for(var g=1;g<f.childNodes.length;g++)f.childNodes[g].style.display="none";return f.firstChild.style.height=b*this._srdh+"px",c=c||this.rowsCol[a],c&&c.nextSibling?c.parentNode.insertBefore(f,c.nextSibling):_isKHTML?this.obj.appendChild(f):this.obj.rows[0].parentNode.appendChild(f),this.callEvent("onAddFiller",[a,b,f,c,d]),[a,b,f]},dhtmlXGridObject.prototype._update_srnd_view=function(){var a=Math.floor(this.objBox.scrollTop/this._srdh),b=a+this._get_view_size();if(this.multiLine){var c=this.objBox.scrollTop;for(a=0;c>0;)c-=this.rowsCol[a]?this.rowsCol[a].offsetHeight:this._srdh,a++;b=a+this._get_view_size(),a>0&&a--}b+=this._srnd_pr||0,b>this.rowsBuffer.length&&(b=this.rowsBuffer.length);for(var d=a;b>d;d++)if(!this.rowsCol[d]){var e=this._add_from_buffer(d);if(-1==e){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[b-1]){var f=(this._dpref?this._dpref:b-d,Math.max(0,Math.min(d,b-this._dpref)));this._current_load=[f,b-f]}else this._current_load=[d,this._dpref?this._dpref:b-d];this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[d].idd],this.rowsBuffer[d]),this._updateParentLine(this._h2.get[this.rowsBuffer[d].idd],this.rowsBuffer[d])),d&&d==(this._realfake?this._fake:this)._r_select&&this.selectCell(d,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)},dhtmlXGridObject.prototype._add_from_buffer=function(a){var b=this.render_row(a);if(-1==b)return-1;if((b._attrs.selected||b._attrs.select)&&(this.selectRow(b,!1,!0),b._attrs.selected=b._attrs.select=null),this._cssSP){if(this._h2){var c=this._h2.get[b.idd];b.className+=" "+(c.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+c.level+(this.rowsAr[c.id]._css||"")}}else this._cssEven&&a%2==0?b.className=this._cssEven+(-1!=b.className.indexOf("rowselected")?" rowselected ":" ")+(b._css||""):this._cssUnEven&&a%2==1&&(b.className=this._cssUnEven+(-1!=b.className.indexOf("rowselected")?" rowselected ":" ")+(b._css||""));for(var d=0;d<this._fillers.length;d++){var e=this._fillers[d];if(e&&e[0]<=a&&e[0]+e[1]>a){var f=a-e[0];return void(0==f?(this._insert_before(a,b,e[2]),this._update_fillers(d,-1,1)):f==e[1]-1?(this._insert_after(a,b,e[2]),this._update_fillers(d,-1,0)):(this._fillers.push(this._add_filler(a+1,e[1]-f-1,e[2],1)),this._insert_after(a,b,e[2]),this._update_fillers(d,-e[1]+f,0)))}}},dhtmlXGridObject.prototype._update_fillers=function(a,b,c){var d=this._fillers[a];d[1]=d[1]+b,d[0]=d[0]+c,d[1]?(d[2].firstChild.style.height=parseFloat(d[2].firstChild.style.height)+b*this._srdh+"px",this.callEvent("onUpdateFiller",[d[2]])):(this.callEvent("onRemoveFiller",[d[2]]),d[2].parentNode.removeChild(d[2]),this._fillers.splice(a,1))},dhtmlXGridObject.prototype._insert_before=function(a,b,c){c.parentNode.insertBefore(b,c),this.rowsCol[a]=b,this.callEvent("onRowInserted",[b,null,c,"before"])},dhtmlXGridObject.prototype._insert_after=function(a,b,c){c.nextSibling?c.parentNode.insertBefore(b,c.nextSibling):c.parentNode.appendChild(b),this.rowsCol[a]=b,this.callEvent("onRowInserted",[b,null,c,"after"])},dhtmlxValidation=function(){},dhtmlxValidation.prototype={trackInput:function(a,b,c,d){dhtmlxEvent(a,"keyup",function(){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null),dhtmlxValidation._timer=window.setTimeout(function(){dhtmlxValidation.checkInput(a,b)?(a.className=a.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),d&&d(a,a.value,b)):(!c||c(a,a.value,b))&&(a.className+=" dhtmlx_live_validation_error")},250)})},checkInput:function(a,b){return this.checkValue(a.value,b)},checkValue:function(a,b){"string"==typeof b&&(b=b.split(","));for(var c=!0,d=0;d<b.length;d++)this["is"+b[d]]?c=c&&this["is"+b[d]](a):alert("Incorrect validation rule: "+b[d]);return c},isEmpty:function(a){return""==a},isNotEmpty:function(a){return a instanceof Array?a.length>0:""==!a},isValidBoolean:function(a){return!!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return!!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return!!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return!!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return!!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31&&b[4]<=59&&b[5]<=59&&b[6]<=59)||!1},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||!1},isValidTime:function(a){var b=a.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return b&&!!(b[1]<=24&&b[2]<=59&&b[3]<=59)||!1},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||!1},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation,dhtmlXGridObject.prototype.enableValidation=function(a,b){a=convertStringToBoolean(a),this._validators=a?{data:[]}:!1,arguments.length>1&&(this._validators._live=b),this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))},dhtmlXGridObject.prototype.setColValidators=function(a){this._validators||this.enableValidation(!0),"string"==typeof a&&(a=a.split(this.delim)),this._validators.data=a},dhtmlXGridObject.prototype.validationEvent=function(a,b,c,d){var e=this._validators;if(!e)return!0;var f=e.data[c]||this.cells(b,c).getAttribute("validate")||"";if(1==a&&f){var g=this.editor||(this._fake||{}).editor;if(!g)return!0;if(g.cell.className=g.cell.className.replace(/[ ]*dhtmlx_validation_error/g,""),e._live){var h=this;dhtmlxValidation.trackInput(g.getInput(),f,function(a,d,e){return h.callEvent("onLiveValidationError",[b,c,d,a,e])},function(a,d,e){return h.callEvent("onLiveValidationCorrect",[b,c,d,a,e])})}}return 2==a&&this.validateCell(b,c,f,d),!0},dhtmlXGridObject.prototype.validateCell=function(a,b,c,d){if(c=c||this._validators.data[b]||this.cells(a,b).getAttribute("validate"),d=d||this.cells(a,b).getValue(),c){var e=this.cells(a,b).cell,f=!0;"string"==typeof c&&(c=c.split(this.delim));for(var g=0;g<c.length;g++)dhtmlxValidation.checkValue(d,c[g])||(this.callEvent("onValidationError",[a,b,d,c[g]])&&(e.className+=" dhtmlx_validation_error"),f=!1);return f&&(this.callEvent("onValidationCorrect",[a,b,d,c]),e.className=e.className.replace(/[ ]*dhtmlx_validation_error/g,"")),f}},eXcell_stree.prototype=new eXcell,dhtmlXGridObject.prototype.setSubTree=function(a,b){this._sub_trees||(this._sub_trees=[]),this._sub_trees[b]=[a],a.parentObject.style.display="none";var c=this;a.parentObject.onclick=function(a){return(a||window.event).cancelBubble=!0,!1},a.ev_onDblClick=null,a.attachEvent("onDblClick",function(a){return c._sub_id=a,c.editStop(),!0}),a._chRRS=!0},eXcell_link.prototype=new eXcell,eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return a&&a.tagName?a.getAttribute("href"):""},eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return a&&a.tagName?a.innerHTML:""},eXcell_grid.prototype=new eXcell,dhtmlXGridObject.prototype.setSubGrid=function(a,b,c){this._sub_grids||(this._sub_grids=[]),this._sub_grids[b]=[a,c],a.entBox.style.display="none";var d=this;a.attachEvent("onRowSelect",function(){return d.editStop(),!0}),a._chRRS=!1},eXcell_dhxCalendar.prototype=new eXcell,eXcell_dhxCalendar.prototype.edit=function(){var a=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(a[0],a[1]+this.cell.offsetHeight),this.grid._grid_calendarA._last_operation_calendar=!1,this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var b=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val||new Date),this.grid._grid_calendarA.draw=b},eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){var a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b),this.setCValue(a,b),this.cell._clearCell=!a;var c=this.val;return this.val=this._val,this.cell.val.valueOf()!=c}return!1}},eXcell_dhxCalendar.prototype.setValue=function(a){return a&&"object"==typeof a?(this.cell.val=a,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val)):(a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(a="&nbsp",this.cell._clearCell=!0,this.cell.val=""),void("NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val)))},eXcell_dhxCalendarA.prototype=new eXcell,eXcell_dhxCalendarA.prototype.edit=function(){var a=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(1*a[0]+this.cell.offsetWidth,1*a[1]),this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid._grid_calendarA._last_operation_calendar=!1,this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var b=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val),this.grid._grid_calendarA.draw=b,this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.obj=document.createElement(this.cell.atag),this.obj.style.height=this.cell.offsetHeight-(_isIE?4:2)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.align,this.obj.onclick=function(a){(a||event).cancelBubble=!0},this.obj.onmousedown=function(a){(a||event).cancelBubble=!0},this.obj.value=this.getValue(),this.cell.innerHTML="",this.cell.appendChild(this.obj),window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll")),this.obj.onselectstart=function(a){return a||(a=event),a.cancelBubble=!0,!0},this.obj.focus(),this.obj.focus()},eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b),this.setCValue(a,b),this.cell._clearCell=!a;var c=this.val;return this.val=this._val,this.cell.val.valueOf()!=(""|c).valueOf()}this.setValue(this.obj.value);var c=this.val;return this.val=this._val,this.cell.val.valueOf()!=(c||"").valueOf()}},eXcell_dhxCalendarA.prototype.setValue=function(a){return a&&"object"==typeof a?(this.cell.val=a,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",a).toString(),this.cell.val)):(a&&""!=a.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",a.toString(),null,!0)),this.grid._dtmask_inc&&(a=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(a="&nbsp",this.cell._clearCell=!0,this.cell.val=""),void("NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((a||"").toString(),this.cell.val)))},dhtmlXGridObject.prototype.resetCounter=function(a){this._fake&&!this._realfake&&a<this._fake._cCount&&this._fake.resetCounter(a,this.currentPage);var b=arguments[0]||0;for(this.currentPage&&(b=(this.currentPage-1)*this.rowsBufferOutSize),b=0;b<this.rowsBuffer.length;b++)this.rowsBuffer[b]&&"TR"==this.rowsBuffer[b].tagName&&this.rowsAr[this.rowsBuffer[b].idd]&&(this.rowsAr[this.rowsBuffer[b].idd].childNodes[a].innerHTML=b+1)},eXcell_cntr.prototype=new eXcell,eXcell_acheck.prototype=new eXcell,eXcell_acheck.prototype.setValue=function(a){a=(a||"").toString(),-1!=a.indexOf("1")||-1!=a.indexOf("true")?(a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.setCValue(this.drawCurrentState(),this.cell.chstate)},eXcell_context.prototype=new eXcell,dhtmlXGridObject.prototype.setSubContext=function(a,b,c){var d=this;a.attachEvent("onClick",function(b){return d._sub_id=b,d.editStop(),a.hideContextMenu(),!0}),this._sub_context||(this._sub_context=[]),this._sub_context[b]=[a,c],a.hideContextMenu()},eXcell_hwch.prototype=new eXcell,eXcell_hwch.prototype.setValue=function(a){for(var b=this,c=this.grid.rowsBuffer,d=0;d<c.length;d++)c[d].grid&&(c[d].onclick=function(a){var c=this.grid.getCheckedRows(b.cell._cellIndex),d=c.split(",");
this.grid.selectedRows=[];for(var e=0;e<d.length;e++)d[e]&&(this.grid.selectedRows[e]=this.grid.rowsAr[d[e]]);this.grid.callEvent("onRowSelect",[c]),a=a||event,a.cancelBubble=!0});this.cell.style.verticalAlign="middle",a&&(a=a.toString()._dhx_trim(),("false"==a||"0"==a)&&(a="")),a?(a="1",this.cell.chstate="1"):(a="0",this.cell.chstate="0");this.setCValue("<img style='vertical-align:middle;' src='"+this.grid.imgURL+"item_chk"+a+".gif' onclick='new eXcell_hwch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)},dhtmlXGridObject.prototype._process_html=function(a){if(a.tagName&&"TABLE"==a.tagName)return this._process_inner_html(a,0);var b=document.createElement("DIV");b.innerHTML=a.xmlDoc.responseText;var c=b.getElementsByTagName("TABLE")[0];this._process_inner_html(c,0)},dhtmlXGridObject.prototype._process_inner_html=function(a,b){for(var c=a.rows.length,d=b;c>d;d++){var e=a.rows[d].getAttribute("id")||d;this.rowsBuffer.push({idd:e,data:a.rows[d],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset(),this.setSizes()},dhtmlXGridObject.prototype._process_html_row=function(a,b){var c=b.getElementsByTagName("TD"),d=[];a._attrs=this._xml_attrs(b);for(var e=0;e<c.length;e++){var f=c[e],g=f.getAttribute("type");if(a.childNodes[e]&&(g&&(a.childNodes[e]._cellType=g),a.childNodes[e]._attrs=this._xml_attrs(c[e])),d.push(f.firstChild?f.innerHTML:""),f.colSpan>1){a.childNodes[e]._attrs.colspan=f.colSpan;for(var h=1;h<f.colSpan;h++)d.push("")}}for(e<c.length;e<a.childNodes.length;e++)a.childNodes[e]._attrs={};return this._fillRow(a,this._c_order?this._swapColumns(d):d),a},dhtmlXGridObject.prototype._get_html_data=function(a,b){for(a=a.firstChild;;){if(!a)return"";if("TD"==a.tagName&&b--,0>b)break;a=a.nextSibling}return a.firstChild?a.firstChild.data:""},dhtmlxEvent(window,"load",function(){for(var a=document.getElementsByTagName("table"),b=0;b<a.length;b++)"dhtmlxGrid"==a[b].className&&dhtmlXGridFromTable(a[b])}),dhtmlXGridObject.prototype._process_xmlA=function(a){if(!a.doXPath){var b=new dtmlXMLLoaderObject(function(){});"string"==typeof a?b.loadXMLString(a):(b.xmlDoc=a.responseXML?a:{},b.xmlDoc.responseXML=a),a=b}this._parsing=!0;var c=a.getXMLTopNode(this.xml.top);this._parseHead(c);var d=a.doXPath(this.xml.row,c),e=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),f=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);if(f&&!this.rowsBuffer[f-1]&&(this.rowsBuffer[f-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataA,this._process_xml_row=this._process_xml_rowA,this._process_tree_xml(a);for(var g=0;g<d.length;g++)if(!this.rowsBuffer[g+e]){var h=d[g].getAttribute("id")||this.uid();this.rowsBuffer[g+e]={idd:h,data:d[g],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA},this.rowsAr[h]=d[g]}return this.render_dataset(),this._parsing=!1,a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc},dhtmlXGridObject.prototype._process_xmlB=function(a){if(!a.doXPath){var b=new dtmlXMLLoaderObject(function(){});"string"==typeof a?b.loadXMLString(a):(b.xmlDoc=a.responseXML?a:{},b.xmlDoc.responseXML=a),a=b}this._parsing=!0;var c=a.getXMLTopNode(this.xml.top);this._parseHead(c);var d=a.doXPath(this.xml.row,c),e=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),f=parseInt(a.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);if(f&&!this.rowsBuffer[f-1]&&(this.rowsBuffer[f-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataB,this._process_xml_row=this._process_xml_rowB,this._process_tree_xml(a);for(var g=0;g<d.length;g++)if(!this.rowsBuffer[g+e]){var h=d[g].getAttribute("id")||this.uid();this.rowsBuffer[g+e]={idd:h,data:d[g],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB},this.rowsAr[h]=d[g]}return this.render_dataset(),this._parsing=!1,a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc},dhtmlXGridObject.prototype._process_xml_rowA=function(a,b){var c=[];a._attrs=this._xml_attrs(b);for(var d=0;d<this.columnIds.length;d++){var e=this.columnIds[d],f=a._attrs[e]||"";a.childNodes[d]&&(a.childNodes[d]._attrs={}),c.push(f)}return this._fillRow(a,this._c_order?this._swapColumns(c):c),a},dhtmlXGridObject.prototype._get_xml_dataA=function(a,b){return a.getAttribute(this.getColumnId(b))},dhtmlXGridObject.prototype._process_xml_rowB=function(a,b){var c=[];if(a._attrs=this._xml_attrs(b),this._ud_enabled)for(var d=this.xmlLoader.doXPath("./userdata",b),e=d.length-1;e>=0;e--)this.setUserData(d[e].getAttribute("name"),d[e].firstChild?d[e].firstChild.data:"");for(var f=0;f<b.childNodes.length;f++){var g=b.childNodes[f];if(g.tagName){var h=this.getColIndexById(g.tagName);if(!isNaN(h)){var i=g.getAttribute("type");i&&(a.childNodes[h]._cellType=i),a.childNodes[h]._attrs=this._xml_attrs(g),g.getAttribute("xmlcontent")||(g=g.firstChild?g.firstChild.data:""),c[h]=g}}}for(var e=0;e<a.childNodes.length;e++)a.childNodes[e]._attrs||(a.childNodes[e]._attrs={});return this._fillRow(a,this._c_order?this._swapColumns(c):c),a},dhtmlXGridObject.prototype._get_xml_dataB=function(a,b){var c=this.getColumnId(b);for(a=a.firstChild;;){if(!a)return"";if(a.tagName==c)return a.firstChild?a.firstChild.data:"";a=a.nextSibling}return""},dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=["setSizes","callEvent","_fixAlterCss","cells4","forEachRow","_correctMonolite"],this._disA=[];for(var a=this._disF.length-1;a>=0;a--)this._disA[a]=this[this._disF[a]],this[this._disF[a]]=function(){return!0};this._cellCache=[],this.cells4=function(a){var b=this._cellCache[a._cellIndex];return b||(b=this._cellCache[a._cellIndex]=this._disA[3].apply(this,[a]),b.destructor=function(){return!0},b.setCValue=function(a){b.cell.innerHTML=a}),b.cell=a,b.combo=a._combo||this.combos[a._cellIndex],b}},dhtmlXGridObject.prototype.stopFastOperations=function(){if(this._disF){for(var a=this._disF.length-1;a>=0;a--)this[this._disF[a]]=this._disA[a];this._correctMonolite&&this._correctMonolite(),this.setSizes(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._in_header_number_filter=function(a,b){this._in_header_text_filter.call(this,a,b);var c=this;a.firstChild._filter=function(){var a=c._get_filters(this.value,"num");return function(b){for(var c=a.length>0?!1:!0,d=0;d<a.length;d++)c=c||a[d](b);return c}}},dhtmlXGridObject.prototype._in_header_string_filter=function(a,b){this._in_header_text_filter.call(this,a,b);var c=this;a.firstChild._filter=function(){var a=c._get_filters(this.value,"str");return function(b){for(var c=a.length>0?!1:!0,d=0;d<a.length;d++)c=c||a[d](b);return c}}},dhtmlXGridObject.prototype._get_filters=function(a,b){for(var c=a.split(","),d=[],e=0;e<c.length;e++)if(""!=c[e]){var f=this["_get_"+b+"_filter"](c[e]);d.push(f)}return d},dhtmlXGridObject.prototype._get_str_filter=function(a){if("null"==a||"empty"==a)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==a||"!empty"==a)return new Function("value",'if (value == null || value == "") return false; return true;');if("!"===a.substr(0,1)){var b=a.substr(1);return new Function("value",'if (value !== "'+b+'") return true; return false;')}if("~"===a.substr(0,1)){var b=a.substr(1);return new Function("value",'if (value.indexOf("'+b+'") !== -1) return true; return false;')}if("^"===a.substr(0,1)&&"&"===a.substr(a.length-1,1)&&(a="="+a.substr(1,a.length-2)),"^"===a.substr(0,1)){var b=a.substr(1);return new Function("value","if (value.substr(0, "+b.length+') === "'+b+'") return true; return false;')}if("&"===a.substr(a.length-1,1)){var b=a.substr(0,a.length-1);return new Function("value","if (value.substr(value.length - "+b.length+') === "'+b+'") return true; return false;')}if("="===a.substr(0,1))var b=a.substr(1);else var b=a;return new Function("value",'if (value === "'+b+'") return true; return false;')},dhtmlXGridObject.prototype._get_num_filter=function(a){if("null"==a||"empty"==a)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==a||"!empty"==a)return new Function("value",'if (value == null || value == "") return false; return true;');var b=a.split("..");if(2==b.length){var c=parseFloat(b[0]),d=parseFloat(b[1]);return new Function("value","if (value >= "+c+" && value <= "+d+") return true; return false;")}var e=a.match(/<>|>=|<=|>|<|=/);if(e)var f=e[0],g=parseFloat(a.replace(f,""));else{var f="==";g=parseFloat(a)}return"<>"==f&&(f="!="),"="==f&&(f="=="),new Function("value"," if (value "+f+" "+g+" ) return true; return false;")},dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader,dhtmlXGridObject.prototype.attachHeader=function(){if(this.attachHeaderA.apply(this,arguments),this._realfake)return!0;this.formAutoSubmit(),"undefined"==typeof this.FormSubmitOnlyChanged&&this.submitOnlyChanged(!0),"undefined"==typeof this._submitAR&&this.submitAddedRows(!0);var a=this;this._added_rows=[],this._deleted_rows=[],this.attachEvent("onRowAdded",function(b){return a._added_rows.push(b),a.forEachCell(b,function(a){a.cell.wasChanged=!0}),!0}),this.attachEvent("onBeforeRowDeleted",function(b){return a._deleted_rows.push(b),!0}),this.attachHeader=this.attachHeaderA},dhtmlXGridObject.prototype.formAutoSubmit=function(){if(this.parentForm=this.detectParentFormPresent(),this.parentForm===!1)return!1;if(!this.formEventAttached){this.formInputs=new Array;var a=this;dhtmlxEvent(this.parentForm,"submit",function(){a.entBox&&a.parentFormOnSubmit()}),this.formEventAttached=!0}},dhtmlXGridObject.prototype.parentFormOnSubmit=function(){return this.formCreateInputCollection(),this.callEvent("onBeforeFormSubmit",[])?void 0:!1},dhtmlXGridObject.prototype.submitOnlyChanged=function(a){this.FormSubmitOnlyChanged=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitColumns=function(a){"string"==typeof a&&(a=a.split(this.delim)),this._submit_cols=a},dhtmlXGridObject.prototype.setFieldName=function(a){a=a.replace(/\{GRID_ID\}/g,"'+a1+'"),a=a.replace(/\{ROW_ID\}/g,"'+a2+'"),a=a.replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'"),a=a.replace(/\{COLUMN_INDEX\}/g,"'+a3+'"),a=a.replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'"),this._input_mask=Function("a1","a2","a3","return '"+a+"';")},dhtmlXGridObject.prototype.submitSerialization=function(a){this.FormSubmitSerialization=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitAddedRows=function(a){this._submitAR=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitOnlySelected=function(a){this.FormSubmitOnlySelected=convertStringToBoolean(a)},dhtmlXGridObject.prototype.submitOnlyRowID=function(a){this.FormSubmitOnlyRowID=convertStringToBoolean(a)},dhtmlXGridObject.prototype.createFormInput=function(a,b){var c=document.createElement("input");c.type="hidden",c.name=this._input_mask&&"string"!=typeof a?this._input_mask.apply(this,a):((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+a,c.value=b,this.parentForm.appendChild(c),this.formInputs.push(c)},dhtmlXGridObject.prototype.createFormInputRow=function(a){for(var b=(this.globalBox||this.entBox).id,c=0;c<this._cCount;c++){var d=this.cells3(a,c);this.FormSubmitOnlyChanged&&!d.wasChanged()||this._submit_cols&&!this._submit_cols[c]||this.createFormInput(this._input_mask?[b,a.idd,c]:a.idd+"_"+c,d.getValue())}},dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(0==this.parentForm)return!1;for(var a=0;a<this.formInputs.length;a++)this.parentForm.removeChild(this.formInputs[a]);if(this.formInputs=new Array,this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(var a=0;a<this.selectedRows.length;a++)this.createFormInputRow(this.selectedRows[a]);else this._submitAR&&(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(a){this.getRowById(a),this.createFormInputRow(this.rowsAr[a])})},dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var a=!1,b=this.entBox;b&&b.tagName&&b!=document.body;){if("form"==b.tagName.toLowerCase()){a=b;break}b=b.parentNode}return a},dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(a){this.rowsAr[a].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))},dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups,this._fake._gIndex=this._gIndex,this.rowsBuffer=dhtmlxArray();for(var a=0;a<this.rowsCol.length;a++)this.rowsCol[a]._cntr||this.rowsBuffer.push(this.rowsCol[a]);this._fake.rowsBuffer=dhtmlxArray();for(var a=0;a<this._fake.rowsCol.length;a++)this._fake.rowsCol[a]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[a])},dhtmlXGridObject.prototype.groupBy=function(a,b){if(this._groups&&this.unGroup(),this._dndProblematic=!0,this._groups={},!b){b=["#title"];for(var c=1;c<this._cCount;c++)b.push("#cspan")}this._gmask=document.createElement("TR"),this._gmask.origin=b;for(var d,e=0,c=0;c<b.length;c++)"#cspan"==b[c]?d.colSpan=(parseInt(d.colSpan)||1)+1:(d=document.createElement("TD"),d._cellIndex=c,this._hrrar[c]&&(d.style.display="none"),d.className="group_row",d.innerHTML="&nbsp;","#title"==b[c]?this._gmask._title=e:d.align=this.cellAlign[c]||"left",this._gmask.appendChild(d),0==b[c].indexOf("#stat")&&(this._gmask._math=!0,d._counter=[this["_g_"+b[c].replace("#","")],c,e]),e++);for(var f in this._groups)this._groups[f]=this.undefined;if(this._gIndex=a,this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex),this._nextRow=function(a,b){var c=this.rowsCol[a+b];return c&&("none"==c.style.display||c._cntr)?this._nextRow(a+b,b):c},this.__sortRowsBG||(this._key_events=dhtmlXHeir({},this._key_events),this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{var a=this.row.rowIndex;if(!a)return;var b=this._nextRow(a-1,-1);b&&this.selectCell(b,this.cell._cellIndex,!0)}},this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{var a=this.row.rowIndex;if(!a)return;var b=this._nextRow(a-1,1);b&&this.selectCell(b,this.cell._cellIndex,!0)}},this.attachEvent("onFilterStart",function(){return this._groups&&(this._groups=this.undefined),!0}),this.attachEvent("onFilterEnd",function(){"undefined"!=typeof this._gIndex&&this.groupBy(this._gIndex,this._gmask.origin)}),this.sortRows_bg=this.sortRows,this.sortRows=function(a,b,c){return"undefined"==typeof this._groups?this.sortRows_bg.apply(this,arguments):void this.callEvent("onBeforeSorting",[a,b||"str",c||"asc"])},this.attachEvent("onBeforeSorting",function(a,b,c){return"undefined"==typeof this._groups?!0:(a==this._gIndex?this._sortByGroup(a,b,c):this._sortInGroup(a,b,c),this.setSortImgState(!0,a,c),this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.setSortImgState(!0,a,c),this.callEvent("onAfterSorting",[a,b,c]),!1)}),this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(a){if(!this._groups)return!0;if(!this.rowsAr[a])return!0;var b=this.cells(a,this._gIndex).getValue();""===b&&(b=" ");var c=this._groups[b];return this._dec_group(c),!0}),this.attachEvent("onAfterRowDeleted",function(){this.updateGroups()}),this.attachEvent("onCheckbox",function(a,b,c){this.callEvent("onEditCell",[2,a,b,c?1:0,c?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(a,b,c,d,e){if(!this._groups)return!0;if(2==a&&d!=e&&c==this._gIndex){""===e&&(e=" "),this._dec_group(this._groups[e]);var f=this.rowsAr[b],g=this.rowsCol._dhx_find(f),h=this._inc_group(d),i=this.rowsCol[h];f==i&&(i=i.nextSibling);{var j=f.parentNode;f.rowIndex}j.removeChild(f),i?j.insertBefore(f,i):j.appendChild(f),this.rowsCol._dhx_insertAt(h,f),g>h&&g++,this.rowsCol._dhx_removeAt(g,f),this._fixAlterCss()}else 2==a&&d!=e&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(b,this._gIndex).getValue()||" "]));return!0}),this.__sortRowsBG=!0),this._groupExisting(),this._hrrar)for(var c=0;c<this._hrrar.length;c++)this._hrrar[c]&&this.hideGroupColumn(c,!0);this.callEvent("onGroup",[]),(this._ahgr||this._awdth)&&this.setSizes()},dhtmlXGridObject.prototype._sortInGroup=function(a,b,c){var d=this._groups_get();d.reverse();for(var e=0;e<d.length;e++){for(var f=d[e]._cntr._childs,g={},h=0;h<f.length;h++){var i=this.cells3(f[h],a);g[f[h].idd]=i.getDate?i.getDate():i.getValue()}this._sortCore(a,b,c,g,f)}this._groups_put(d),this.setSizes(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortByGroup=function(a,b,c){for(var d=this._groups_get(),e=[],f=0;f<d.length;f++)d[f].idd="_sort_"+f,e["_sort_"+f]=d[f]._cntr.text;this._sortCore(a,b,c,e,d),this._groups_put(d),this.callEvent("onGridReconstructed",[]),this.setSizes()},dhtmlXGridObject.prototype._inc_group=function(a,b,c){""===a&&(a=" "),this._groups[a]||(this._groups[a]={text:a,row:this._addPseudoRow(),count:0,state:b?"plus":"minus"});var d=this._groups[a];d.row._cntr=d;var e=this.rowsCol._dhx_find(d.row)+d.count+1;return d.count++,c||(this._updateGroupView(d),this.updateGroups()),e},dhtmlXGridObject.prototype._dec_group=function(a){return a?(a.count--,0==a.count?(a.row.parentNode.removeChild(a.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(a.row)),delete this._groups[a.text]):this._updateGroupView(a),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[a.text]),this.updateGroups(),!0):void 0},dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt,dhtmlXGridObject.prototype._insertRowAt=function(a,b,c){if("undefined"!=typeof this._groups){if(this._realfake)var d=this._fake._bfs_cells(a.idd,this._gIndex).getValue();else if(this._bfs_cells3)var d=this._bfs_cells3(a,this._gIndex).getValue();else var d=this.cells3(a,this._gIndex).getValue();d||(d=" "),b=this._inc_group(d,"none"==a.style.display)}var e=this._insertRowAt_gA(a,b,c);return"undefined"!=typeof this._groups&&(this.expandGroup(d),this._updateGroupView(this._groups[d]),this.updateGroups()),e},dhtmlXGridObject.prototype._updateGroupView=function(a){if(this._fake&&!this._realfake)return a.row.firstChild.innerHTML="&nbsp;";var b=this._gmask||this._fake._gmask,c="<img style='margin-bottom:-4px' src='"+this.imgURL+a.state+".gif'> ";c+=this.customGroupFormat?this.customGroupFormat(a.text,a.count):a.text+" ( "+a.count+" ) ",a.row.childNodes[b._title].innerHTML=c},dhtmlXGridObject.prototype._addPseudoRow=function(a){for(var b=this._gmask||this._fake._gmask,c=b.cloneNode(!0),d=0;d<c.childNodes.length;d++)c.childNodes[d]._cellIndex=b.childNodes[d]._cellIndex,this._realfake&&(c.childNodes[d].style.display="");var e=this;return c.onclick=function(a){e.callEvent("onGroupClick",[this._cntr.text])&&(e._fake&&e._realfake?e._fake._switchGroupState(e._fake._groups[this._cntr.text].row):e._switchGroupState(this),(a||event).cancelBubble="true")},c.ondblclick=function(a){(a||event).cancelBubble="true"},a||(_isKHTML?this.obj.appendChild(c):this.obj.firstChild.appendChild(c),this.rowsCol.push(c)),c},dhtmlXGridObject.prototype._groups_get=function(){var a=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var b=[],c=this.rowsCol.length-1;c>=0;c--)this.rowsCol[c]._cntr?(this.rowsCol[c]._cntr._childs=b,b=[],a.push(this.rowsCol[c])):b.push(this.rowsCol[c]),this.rowsCol[c].parentNode.removeChild(this.rowsCol[c]);return a},dhtmlXGridObject.prototype._groups_put=function(a){var b=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray(0),this.rowsCol.stablesort=b;for(var c=0;c<a.length;c++){var d=a[c]._cntr;this.obj.firstChild.appendChild(d.row),this.rowsCol.push(d.row),d.row.idd=null;for(var e=0;e<d._childs.length;e++)this.obj.firstChild.appendChild(d._childs[e]),this.rowsCol.push(d._childs[e]);delete d._childs}this._temp_par.appendChild(this.obj)},dhtmlXGridObject.prototype._groupExisting=function(a){if(this.getRowsNum()){var a=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var b=this.rowsCol.length,c=0;b>c;c++){var d=this.cells4(this.rowsCol[c].childNodes[this._gIndex]).getValue();if(this.rowsCol[c].style.display="",d||(d=" "),!this._groups[d]){this._groups[d]={text:d,row:this._addPseudoRow(!0),count:0,state:"minus"};var e=this._groups[d];e.row._cntr=e,this._groups[d]._childs=[],a.push(e.row)}this._groups[d].count++,this._groups[d]._childs.push(this.rowsCol[c]),this.rowsCol[c].parentNode.removeChild(this.rowsCol[c])}for(var c=0;c<a.length;c++)this._updateGroupView(a[c]._cntr);this._groups_put(a),this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.callEvent("onGridReconstructed",[]),this.updateGroups()}},dhtmlXGridObject.prototype._switchGroupState=function(a){var b=a._cntr;this._fake&&!this._realfake&&(b.state=this._fake._groups[a._cntr.text].row._cntr.state,this._fake._switchGroupState(this._fake._groups[a._cntr.text].row));var c=this.rowsCol._dhx_find(b.row)+1;b.state="minus"==b.state?"plus":"minus";for(var d="plus"==b.state?"none":"";this.rowsCol[c]&&!this.rowsCol[c]._cntr;)this.rowsCol[c].style.display=d,c++;this._updateGroupView(b),this.callEvent("onGroupStateChanged",[b.text,"minus"==b.state]),this.setSizes()},dhtmlXGridObject.prototype.expandGroup=function(a){"plus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.collapseGroup=function(a){"minus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.expandAllGroups=function(){for(var a in this._groups)this._groups[a]&&"plus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var a in this._groups)this._groups[a]&&"minus"==this._groups[a].state&&this._switchGroupState(this._groups[a].row)},dhtmlXGridObject.prototype.hideGroupColumn=function(a,b){if(!this._fake){for(var c=-1,d=this._gmask.childNodes,e=0;e<d.length;e++)if(d[e]._cellIndex==a){c=e;break}if(-1!=c)for(var f in this._groups)this._groups[f].row.childNodes[c].style.display=b?"none":""}},dhtmlXGridObject.prototype.groupStat=function(a,b,c){c=this["_g_"+(c||"stat_total")];var d=0,e=0;return this.forEachRowInGroup(a,function(a){d=c(d,1*this.cells(a,b).getValue(),e),e++}),d},dhtmlXGridObject.prototype.forEachRowInGroup=function(a,b){var c=this._groups[a].row.nextSibling;if(c)for(;c&&!c._cntr;)b.call(this,c.idd),c=c.nextSibling;else{var d=this._groups[a]._childs;if(d)for(var e=0;e<d.length;e++)b.call(this,d[e].idd)}},dhtmlXGridObject.prototype.updateGroups=function(){if(this._gmask&&this._gmask._math&&!this._parsing)for(var a=this._gmask.childNodes,b=0;b<a.length;b++)a[b]._counter&&this._b_processing.apply(this,a[b]._counter)},dhtmlXGridObject.prototype._b_processing=function(a,b,c){var d=0,e=0;this._ecache[this.cellType[b]]||this.cells5({parentNode:{grid:this}},this.cellType[b]);for(var f=this.rowsCol.length-1;f>=0;f--)this.rowsCol[f]._cntr?(this.cells5(this.rowsCol[f].childNodes[c],this.cellType[b]).setValue(d),e=d=0):(d=a(d,1*this.cells3(this.rowsCol[f],b).getValue(),e),e++)},dhtmlXGridObject.prototype._g_stat_total=function(a,b){return a+b},dhtmlXGridObject.prototype._g_stat_min=function(a,b,c){return c||(a=1/0),Math.min(a,b)},dhtmlXGridObject.prototype._g_stat_max=function(a,b,c){return c||(a=-1/0),Math.max(a,b)},dhtmlXGridObject.prototype._g_stat_average=function(a,b,c){return(a*c+b)/(c+1)},dhtmlXGridObject.prototype._g_stat_count=function(a){return a++},dhtmlXGridObject.prototype._in_header_collapse=function(a,b,c){var d="TD"==a.tagName?a:a.parentNode;b=d._cellIndexS,this._column_groups||(this._column_groups=[]);var e=c[1].split(":"),e=c[1].split(":");e=[e.shift(),e.join(":")];var f=parseInt(e[0]);a.innerHTML=c[0]+"<img src='"+this.imgURL+"minus.gif' style='padding-right:10px;height:16px'/><span style='position:relative; top:-6px;'>"+(e[1]||"")+"<span>",a.style.paddingBottom="0px";var g=this;this._column_groups[b]=a.getElementsByTagName("IMG")[0],this._column_groups[b].onclick=function(a){(a||event).cancelBubble=!0,this._cstate=!this._cstate;for(var c=b+1;b+f>c;c++)g.setColumnHidden(c,this._cstate);if(this._cstate){if(d.colSpan&&d.colSpan>0){d._exp_colspan=d.colSpan;var e=Math.max(1,d.colSpan-f);if(!_isFF)for(var h=0;h<d.colSpan-e;h++){var i=document.createElement("TD");d.nextSibling?d.parentNode.insertBefore(i,d.nextSibling):d.parentNode.appendChild(i)}d.colSpan=e}g.callEvent("onColumnCollapse",[b,this._cstate])}else if(d._exp_colspan){if(d.colSpan=d._exp_colspan,!_isFF)for(var h=1;h<d._exp_colspan;h++)d.parentNode.removeChild(d.nextSibling);g.callEvent("onColumnCollapse",[b,this._cstate])}this.src=g.imgURL+(this._cstate?"plus.gif":"minus.gif"),"none"!=g.sortImg.style.display&&g.setSortImgPos()}},dhtmlXGridObject.prototype.collapseColumns=function(a){this._column_groups[a]&&!this._column_groups[a]._cstate&&this._column_groups[a].onclick({})},dhtmlXGridObject.prototype.expandColumns=function(a){this._column_groups[a]&&this._column_groups[a]._cstate&&this._column_groups[a].onclick({})},dhtmlXGridObject.prototype.enableHeaderMenu=function(a){"string"==typeof a&&(a=a.split(",")),this._hm_config=a;var b=this;this.attachEvent("onInit",function(){this.hdr.oncontextmenu=function(a){return b._doHContClick(a||window.event)},this.startColResizeA=this.startColResize,this.startColResize=function(a){return 2==a.button||_isMacOS&&a.ctrlKey?this._doHContClick(a):this.startColResizeA(a)},this._chm_ooc=this.obj.onclick,this._chm_hoc=this.hdr.onclick,this.hdr.onclick=function(a){return a&&(2==a.button||_isMacOS&&a.ctrlKey)?!1:(b._showHContext(!1),b._chm_hoc.apply(this,arguments))},this.obj.onclick=function(){return b._showHContext(!1),b._chm_ooc.apply(this,arguments)}}),dhtmlxEvent(document.body,"click",function(){b._hContext&&b._showHContext(!1)}),this.hdr.rows.length&&this.callEvent("onInit",[]),this.enableHeaderMenu=function(){}},dhtmlXGridObject.prototype._doHContClick=function(a){function b(a){if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=_isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}}this._createHContext();var c=b(a);return this._showHContext(!0,c.x,c.y),a[_isIE?"srcElement":"target"].oncontextmenu=function(a){return(a||event).cancelBubble=!0,!1},a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),!1},dhtmlXGridObject.prototype._createHContext=function(){if(this._hContext)return this._hContext;var a=document.createElement("DIV");a.oncontextmenu=function(a){return(a||event).cancelBubble=!0,!1},a.onclick=function(a){return(a||event).cancelBubble=!0,!0},a.className="dhx_header_cmenu",a.style.width=a.style.height="5px",a.style.display="none";var b=[],c=0;this._fake&&(c=this._fake._cCount);for(var c,d=c;c<this.hdr.rows[1].cells.length;c++){var e=this.hdr.rows[1].cells[c];if(!this._hm_config||this._hm_config[c]&&"false"!=this._hm_config[c]){if(e.firstChild&&"DIV"==e.firstChild.tagName)var f=e.firstChild.innerHTML;else var f=e.innerHTML;f=f.replace(/<[^>]*>/gi,""),b.push("<div class='dhx_header_cmenu_item'><input type='checkbox' column='"+d+"' len='"+(e.colSpan||1)+"' checked='true' />"+f+"</div>")}d+=e.colSpan||1}a.innerHTML=b.join("");for(var g=this,h=function(){var a=this.getAttribute("column");if(!this.checked&&!g._checkLast(a))return this.checked=!0;g._realfake&&(g=g._fake);for(var b=0;b<this.getAttribute("len");b++)g.setColumnHidden(1*a+1*b,!this.checked);this.checked&&0==g.getColWidth(a)&&g.adjustColumnSize(a)},c=0;c<a.childNodes.length;c++)a.childNodes[c].firstChild.onclick=h;document.body.insertBefore(a,document.body.firstChild),this._hContext=a,a.style.position="absolute",a.style.zIndex=999,a.style.width="auto",a.style.height="auto",a.style.display="block"},dhtmlXGridObject.prototype._checkLast=function(a){for(var b=0;b<this._cCount;b++)if(!(this._hrrar&&this._hrrar[b]||b==a))return!0;return!1},dhtmlXGridObject.prototype._updateHContext=function(){for(var a=0;a<this._hContext.childNodes.length;a++){var b=this._hContext.childNodes[a].firstChild,c=b.getAttribute("column");(this.isColumnHidden(c)||0==this.getColWidth(c))&&(b.checked=!1)}},dhtmlXGridObject.prototype._showHContext=function(a,b,c){a&&this.enableColumnMove&&(this._hContext.parentNode.removeChild(this._hContext),this._hContext=null),this._createHContext(),this._hContext.style.display=a?"block":"none",a&&(this._updateHContext(!0),this._hContext.style.left=b+"px",this._hContext.style.top=c+"px")},dhtmlXGridObject.prototype._process_json_row=function(a,b){a._attrs=b;for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};if(b.userdata)for(var d in b.userdata)this.setUserData(a.idd,d,b.userdata[d]);b=this._c_order?this._swapColumns(b.data):b.data;for(var e=0;e<b.length;e++)"object"==typeof b[e]&&null!=b[e]&&(a.childNodes[e]._attrs=b[e],b[e].type&&(a.childNodes[e]._cellType=b[e].type),b[e]=b[e].value);return this._fillRow(a,b),a},dhtmlXGridObject.prototype._process_js_row=function(a,b){a._attrs=b;for(var c=0;c<a.childNodes.length;c++)a.childNodes[c]._attrs={};if(b.userdata)for(var d in b.userdata)this.setUserData(a.idd,d,b.userdata[d]);for(var e=[],f=0;f<this.columnIds.length;f++)e[f]=b[this.columnIds[f]],"object"==typeof e[f]&&null!=e[f]&&(a.childNodes[f]._attrs=e[f],e[f].type&&(a.childNodes[f]._cellType=e[f].type),e[f]=e[f].value),e[f]||0===e[f]||(e[f]="");return this._fillRow(a,e),a},dhtmlXGridObject.prototype.updateFromJSON=function(a,b,c,d){"undefined"==typeof b&&(b=!0),this._refresh_mode=[!0,b,c],this.load(a,d,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(a){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(a){var b=this.grid._h2.get[this.cell.parentNode.idd];b&&this.cell.parentNode.valTag?this.setLabel(a):this.setValueX(a)});var b=this.cellType._dhx_find("tree"),c=a.parent||0,d={};this._refresh_mode[2]&&(-1!=b?this._h2.forEachChild(c,function(a){d[a.id]=!0},this):this.forEachRow(function(a){d[a]=!0}));for(var e=a.rows,f=0;f<e.length;f++){var g=e[f],h=g.id;if(d[h]=!1,this.rowsAr[h]&&"TR"!=this.rowsAr[h].tagName)this._h2?this._h2.get[h].buff.data=g:this.rowsBuffer[this.getRowIndex(h)].data=g,this.rowsAr[h]=g;else if(this.rowsAr[h])this._process_json_row(this.rowsAr[h],g,-1),this._postRowProcessing(this.rowsAr[h],!0);else if(this._refresh_mode[1]){var i={idd:h,data:g,_parser:this._process_json_row,_locator:this._get_json_data},j=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(i),j=0):this.rowsBuffer.push(i),this._h2&&(reset=!0,this._h2.add(h,c).buff=this.rowsBuffer[this.rowsBuffer.length-1]),this.rowsAr[h]=g,g=this.render_row(j),this._insertRowAt(g,j?-1:0)}}if(this._refresh_mode[2])for(h in d)d[h]&&this.rowsAr[h]&&this.deleteRow(h);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&this._renderSort(),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},dhtmlXGridObject.prototype._process_js=function(a){return this._process_json(a,"js")},dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=!0;try{data&&data.xmlDoc?(eval("dhtmlx.temp="+data.xmlDoc.responseText+";"),data=dhtmlx.temp):"string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp)}catch(e){dhtmlxError.throwError("LoadXML","Incorrect JSON",[data.xmlDoc||data,this]),data={rows:[]}}if(this._refresh_mode)return this._refreshFromJSON(data);
var cr=parseInt(data.pos||0),total=parseInt(data.total_count||0),reset=!1;total&&(this.rowsBuffer[total-1]||(this.rowsBuffer.length&&(reset=!0),this.rowsBuffer[total-1]=null),total<this.rowsBuffer.length&&(this.rowsBuffer.splice(total,this.rowsBuffer.length-total),reset=!0));for(var key in data)"rows"!=key&&this.setUserData("",key,data[key]);if("js"==mode&&data.collections)for(var colkey in data.collections){var index=this.getColIndexById(colkey),colrecs=data.collections[colkey];if(index!==window.undefined)if("clist"==this.cellType[index]){colplaindata=[];for(var j=0;j<colrecs.length;j++)colplaindata.push(colrecs[j].label);this.registerCList(index,colplaindata)}else for(var combo=this.getCombo(index),j=0;j<colrecs.length;j++)combo.put(colrecs[j].value,colrecs[j].label)}if(this.isTreeGrid())return this._process_tree_json(data,null,null,mode);if("js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++)if(!this.rowsBuffer[i+cr]){var row=data[i],id=row.id||i+1;this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data},this.rowsAr[id]=data[i]}}else for(var i=0;i<data.rows.length;i++)if(!this.rowsBuffer[i+cr]){var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data},this.rowsAr[id]=data.rows[i]}if(reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=h}else this.render_dataset();this._parsing=!1},dhtmlXGridObject.prototype._get_json_data=function(a,b){return"object"==typeof a.data[b]?a.data[b].value:a.data[b]},dhtmlXGridObject.prototype._process_tree_json=function(a,b,c,d){this._parsing=!0;var e=!1;if(b||(this.render_row=this.render_row_tree,e=!0,b=a,c=b.parent||0,"0"==c&&(c=0),this._h2||(this._h2=new dhtmlxHierarchy),this._fake&&(this._fake._h2=this._h2)),"js"==d){b.data&&!c&&(a=b.data),b.rows&&(b=b.rows);for(var f=0;f<b.length;f++){var g=b[f].id,h=this._h2.add(g,c);h.buff={idd:g,data:b[f],_parser:this._process_js_row,_locator:this._get_js_data},b[f].open&&(h.state="minus"),this.rowsAr[g]=h.buff,this._process_tree_json(b[f],b[f],g,d)}}else if(b.rows)for(var f=0;f<b.rows.length;f++){var g=b.rows[f].id,h=this._h2.add(g,c);h.buff={idd:g,data:b.rows[f],_parser:this._process_json_row,_locator:this._get_json_data},b.rows[f].open&&(h.state="minus"),this.rowsAr[g]=h.buff,this._process_tree_json(b.rows[f],b.rows[f],g,d)}e&&(0!=c&&this._h2.change(c,"state","minus"),this._updateTGRState(this._h2.get[c]),this._h2_to_buff(),0!=c&&(this._srnd||this.pagingOn)?this._renderSort():this.render_dataset(),this._slowParse===!1&&this.forEachRow(function(a){this.render_row_tree(0,a)}),this._parsing=!1,0==c||this._srnd||this.callEvent("onOpenEnd",[c,1]))},dhtmlXGridObject.prototype.enableMarkedCells=function(a){this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0),this.lastMarkedRow=null,this.lastMarkedColumn=null,this.markedCells=!0,this.lastMarkMethod=0,arguments.length>0&&(convertStringToBoolean(a)||(this.markedCells=!1))},dhtmlXGridObject.prototype.doMark=function(a,b){var c=a.parentNode.idd;if(this.setActive(!0),c){this.editStop(),this.cell=a,this.row=a.parentNode;var d=a._cellIndex;if(b||(b=0),0==b)this.unmarkAll();else if(1==b){if(this.lastMarkedRow)for(var e=Math.min(this.getRowIndex(c),this.getRowIndex(this.lastMarkedRow)),f=Math.max(this.getRowIndex(c),this.getRowIndex(this.lastMarkedRow)),g=Math.min(d,this.lastMarkedColumn),h=Math.max(d,this.lastMarkedColumn),i=e;f+1>i;i++)for(var j=g;h+1>j;j++)this.mark(this.getRowId(i),j,!0)}else if(2==b&&-1!=this.markedRowsArr._dhx_find(c))for(var k=0;k<this.markedCellsArr[c].length;k++)if(this.markedCellsArr[c][k]==d)return this.mark(c,d,!1),!0;this.markedCellsArr[c]||(this.markedCellsArr[c]=new dhtmlxArray(0)),1!=b&&this.mark(c,d),this.moveToVisible(this.cells(c,d).cell),this.lastMarkedRow=c,this.lastMarkedColumn=d,this.lastMarkMethod=b}},dhtmlXGridObject.prototype.mark=function(a,b,c){if(arguments.length>2&&!convertStringToBoolean(c)){if(this.cells(a,b).cell.className=this.cells(a,b).cell.className.replace(/cellselected/g,""),-1!=this.markedRowsArr._dhx_find(a)){var d=this.markedCellsArr[a]._dhx_find(b);-1!=d&&(this.markedCellsArr[a]._dhx_removeAt(d),0==this.markedCellsArr[a].length&&this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(a)),this.callEvent("onCellUnMarked",[a,b]))}return!0}this.cells(a,b).cell.className+=" cellselected",-1==this.markedRowsArr._dhx_find(a)&&(this.markedRowsArr[this.markedRowsArr.length]=a),this.markedCellsArr[a]||(this.markedCellsArr[a]=new dhtmlxArray(0)),-1==this.markedCellsArr[a]._dhx_find(b)&&(this.markedCellsArr[a][this.markedCellsArr[a].length]=b,this.callEvent("onCellMarked",[a,b]))},dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var a=0;a<this.markedRowsArr.length;a++){var b=this.markedRowsArr[a];if(this.rowsAr[b])for(var c=0;c<this.markedCellsArr[b].length;c++)this.callEvent("onCellUnMarked",[b,this.markedCellsArr[b][c]]),this.cells(b,this.markedCellsArr[b][c]).cell.className=this.cells(b,this.markedCellsArr[b][c]).cell.className.replace(/cellselected/g,"")}this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0)}return!0},dhtmlXGridObject.prototype.getMarked=function(){var a=new Array;if(this.markedRowsArr)for(var b=0;b<this.markedRowsArr.length;b++)for(var c=this.markedRowsArr[b],d=0;d<this.markedCellsArr[c].length;d++)a[a.length]=[c,this.markedCellsArr[c][d]];return a},eXcell_math.prototype=new eXcell,dhtmlXGridObject.prototype._init_point_bm=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._mat_links={},this._aggregators=[],this.attachEvent("onClearAll",function(){this._mat_links={},this._aggregators=[]}),this.attachEvent("onCellChanged",function(a,b){if(this._mat_links[a]){var c=this._mat_links[a][b];if(c)for(var d=0;d<c.length;d++)c[d].parentNode&&this.cells5(c[d]).setValue(this._calcSCL(c[d]))}if(!this._parsing&&this._aggregators[b]){var e=this._h2.get[a].parent.id;if(0!=e){var f=this.cells(e,b);f.setValue(this._calcSCL(f.cell))}}}),this.attachEvent("onAfterRowDeleted",function(a,b){if(0!=b&&!this._parsing&&this._aggregators.length)for(var c=0;c<this._aggregators.length;c++)if(this._aggregators[c]){var d=this.cells(b,c);d.setValue(this._calcSCL(d.cell))}return!0}),this.attachEvent("onXLE",function(){for(var a=0;a<this._aggregators.length;a++)this._aggregators[a]&&this._h2.forEachChild(0,function(b){if(0!=b.childs.length){var c=this.cells(b.id,a);c.setValue(this._calcSCL(c.cell))}},this)}),this._init_point=this._init_point_bm,this._init_point&&this._init_point()},dhtmlXGridObject.prototype.enableMathSerialization=function(a){this._mathSerialization=convertStringToBoolean(a)},dhtmlXGridObject.prototype.setMathRound=function(a){this._roundDl=a,this._roundD=Math.pow(10,a)},dhtmlXGridObject.prototype.enableMathEditing=function(a){this._mathEdit=convertStringToBoolean(a)},dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell._code)return this.cells5(cell).getValue();try{dhtmlx.agrid=this;var z=eval(cell._code)}catch(e){return"#SCL"}if(this._roundD){var pre=Math.abs(z)<1?"0":"";if(0>z&&(pre="-"+pre),z=Math.round(Math.abs(z)*this._roundD).toString(),0==z)return 0;if(this._roundDl>0){var n=z.length-this._roundDl;return 0>n&&(z=("000000000"+z).substring(9+n),n=0),pre+z.substring(0,n)+"."+z.substring(n,z.length)}return pre+z}return z},dhtmlXGridObject.prototype._countTotal=function(a,b){for(var c=0,d=this._h2.get[a],e=0;e<d.childs.length;e++){if(!d.childs[e].buff)return c;if(d.childs[e].buff._parser)return this._h2.forEachChild(a,function(a){if(0==a.childs.length){var d=parseFloat(this._get_cell_value(a.buff,b),10);d&&(c+=d)}},this),c;var f=parseFloat(this._get_cell_value(d.childs[e].buff,b),10);f&&(c+=f)}return c},dhtmlXGridObject.prototype._compileSCL=function(a,b,c){if(null===a||a===window.undefined)return a;if(a=a.toString(),0!=a.indexOf("=")||!b.parentNode)return this._reLink([],b),c&&(b._code=b.original=null),a;b.original=a;var d=null;if(a=a.replace("=",""),-1!=a.indexOf("sum"))return a=a.replace("sum","(dhtmlx.agrid._countTotal('"+b.parentNode.idd+"',"+b._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[b._cellIndex]="sum",b._code=a,this._parsing?"":this._calcSCL(b);if(-1!=a.indexOf("[[")){var e=/(\[\[([^\,]*)\,([^\]]*)]\])/g;dhtmlx.agrid=this,d=d||new Array,a=a.replace(e,function(a,c,e,f){return"-"==e&&(e=b.parentNode.idd),0==e.indexOf("#")&&(e=dhtmlx.agrid.getRowId(e.replace("#",""))),d[d.length]=[e,f],'(parseFloat(dhtmlx.agrid.cells("'+e+'",'+f+").getValue(),10))"})}if(-1!=a.indexOf(":")){var e=/:(\w+)/g;dhtmlx.agrid=this;var f=b.parentNode.idd;d=d||new Array,a=a.replace(e,function(a,b){return d[d.length]=[f,dhtmlx.agrid.getColIndexById(b)],'(parseFloat(dhtmlx.agrid.cells("'+f+'",dhtmlx.agrid.getColIndexById("'+b+'")).getValue(),10))'})}else{var e=/c([0-9]+)/g;dhtmlx.agrid=this;var f=b.parentNode.idd;d=d||new Array,a=a.replace(e,function(a,b){return d[d.length]=[f,b],'(parseFloat(dhtmlx.agrid.cells("'+f+'",'+b+").getValue(),10))"})}return this._reLink(d,b),b._code=a,this._calcSCL(b)},dhtmlXGridObject.prototype._reLink=function(a,b){if(a.length)for(var c=0;c<a.length;c++){this._mat_links[a[c][0]]||(this._mat_links[a[c][0]]={});var d=this._mat_links[a[c][0]];d[a[c][1]]||(d[a[c][1]]=[]),d[a[c][1]].push(b)}},_isKHTML&&!function(){var a=String.prototype.replace;String.prototype.replace=function(b,c){if("function"!=typeof c)return a.apply(this,arguments);var d=""+this,e=c;if(!(b instanceof RegExp)){var f=d.indexOf(b);return-1==f?d:a.apply(d,[b,e(b,f,d)])}for(var g,h=b,i=[],j=h.lastIndex;null!=(g=h.exec(d));){var f=g.index,k=g.concat(f,d);if(i.push(d.slice(j,f),e.apply(null,k).toString()),!h.global){j+=RegExp.lastMatch.length;break}j=h.lastIndex}return i.push(d.slice(j)),i.join("")}}(),dhtmlXGridObject.prototype.insertColumn=function(a,b,c,d,e,f,g,h,i){if(a=parseInt(a),a>this._cCount&&(a=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,a-1,[b||"&nbsp;",d||100,c||"ed",f||"left",g||"",e||"na",i||"","",this._cMod,d||100]),this._processAllRows("_addColInRow",a),"object"==typeof b)for(var j=1;j<this.hdr.rows.length;j++)if("#rspan"==b[j-1]){for(var k=j-1,l=!1,m=null;!l;){for(var m=this.hdr.rows[k],n=0;n<m.cells.length;n++)if(m.cells[n]._cellIndex==a){l=n;break}k--}this.hdr.rows[k+1].cells[n].rowSpan=(this.hdr.rows[k].cells[n].rowSpan||1)+1}else this.setHeaderCol(a,b[j-1]||"&nbsp;",j);else this.setHeaderCol(a,b||"&nbsp;");this.hdr.rows[0].cells[a],this._cCount++,this._cMod++,this._master_row=null,this.setSizes()},dhtmlXGridObject.prototype.deleteColumn=function(a){a=parseInt(a),0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),a>=this._cCount||(this._processAllArrays(a,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",a),this._cCount--,this._master_row=null,this.setSizes()))},dhtmlXGridObject.prototype._processAllRows=function(a,b,c){this[a](this.obj.rows[0],b,c,0);for(var d=this.hdr.rows.length,e=0;d>e;e++)this[a](this.hdr.rows[e],b,c,e);if(this.ftr)for(var d=this.ftr.firstChild.rows.length,e=0;d>e;e++)this[a](this.ftr.firstChild.rows[e],b,c,e);this.forEachRow(function(d){this.rowsAr[d]&&"TR"==this.rowsAr[d].tagName&&this[a](this.rowsAr[d],b,c,-1)})},dhtmlXGridObject.prototype._processAllArrays=function(a,b,c){var d=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];this.cellWidthPX.length&&d.push("cellWidthPX"),this.cellWidthPC.length&&d.push("cellWidthPC"),this._col_combos&&d.push("_col_combos"),this._mCols&&(d[d.length]="_mCols"),this.columnIds&&(d[d.length]="columnIds"),this._maskArr&&d.push("_maskArr"),this._drsclmW&&d.push("_drsclmW"),this._RaSeCol&&d.push("_RaSeCol"),this._hm_config&&d.push("_hm_config"),this._drsclmn&&d.push("_drsclmn"),this.clists&&d.push("clists"),this._validators&&this._validators.data&&d.push(this._validators.data),d.push("combos"),this._customSorts&&d.push("_customSorts"),this._aggregators&&d.push("_aggregators");var e=b>=a;if(!this._c_order){this._c_order=new Array;for(var f=this._cCount,g=0;f>g;g++)this._c_order[g]=g}for(var g=0;g<d.length;g++){var h=this[d[g]]||d[g];if(h){if(e){for(var i=h[a],j=a;b>j;j++)h[j]=h[j+1];h[b]=i}else{for(var i=h[a],j=a;j>b+1;j--)h[j]=h[j-1];h[b+1]=i}c&&(h[b+(e?0:1)]=c[g])}}},dhtmlXGridObject.prototype.moveColumn=function(a,b){if(b--,a=parseInt(a),b=parseInt(b),a>b)var c=b+1;else var c=b;return this.callEvent("onBeforeCMove",[a,c])?void(a!=c&&(this.editStop(),this._processAllRows("_moveColInRow",a,b),this._processAllArrays(a,b),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[a,c]))):!1},dhtmlXGridObject.prototype._swapColumns=function(a){for(var b=new Array,c=0;c<this._cCount;c++){var d=a[this._c_order[c]];"undefined"==typeof d&&(d=""),b[c]=d}return b},dhtmlXGridObject.prototype._moveColInRow=function(a,b,c){var d=a.childNodes[b],e=a.childNodes[c+1];if(d){e?a.insertBefore(d,e):a.appendChild(d);for(var f=0;f<a.childNodes.length;f++)a.childNodes[f]._cellIndex=a.childNodes[f]._cellIndexS=f}},dhtmlXGridObject.prototype._addColInRow=function(a,b,c,d){var e=b;if(a._childIndexes){if(a._childIndexes[b-1]!=a._childIndexes[b]&&a.childNodes[a._childIndexes[b-1]])for(var f=a._childIndexes.length;f>=b;f--)a._childIndexes[f]=f?a._childIndexes[f-1]+1:0;else{for(var f=a._childIndexes.length;f>=b;f--)a._childIndexes[f]=f?a._childIndexes[f-1]+1:0;a._childIndexes[b]--}var e=a._childIndexes[b]}var g=a.childNodes[e],h=document.createElement(d?"TD":"TH");d?h._attrs={}:h.style.width=(parseInt(this.cellWidthPX[b])||"100")+"px",g?a.insertBefore(h,g):a.appendChild(h),this.dragAndDropOff&&a.idd&&this.dragger.addDraggableItem(a.childNodes[e],this);for(var f=e+1;f<a.childNodes.length;f++)a.childNodes[f]._cellIndex=a.childNodes[f]._cellIndexS=a.childNodes[f]._cellIndex+1;a.childNodes[e]&&(a.childNodes[e]._cellIndex=a.childNodes[e]._cellIndexS=b),a.idd||"undefined"!=typeof a.idd?(this.cells3(a,b).setValue(""),h.align=this.cellAlign[b],h.style.verticalAlign=this.cellVAlign[b],h.bgColor=this.columnColor[b]):"TD"==h.tagName&&(h.innerHTML=!a.idd&&this.forceDivInHeader?"<div class='hdrcell'>&nbsp;</div>":"&nbsp;")},dhtmlXGridObject.prototype._deleteColInRow=function(a,b){var c=b;a._childIndexes&&(b=a._childIndexes[b]);var d=a.childNodes[b];if(d){if(d.colSpan&&d.colSpan>1&&d.parentNode.idd){var e=d.colSpan-1,f=this.cells4(d).getValue();if(this.setColspan(d.parentNode.idd,d._cellIndex,1),e>1){var g=1*d._cellIndex;this.setColspan(d.parentNode.idd,g+1,e),this.cells(d.parentNode.idd,1*d._cellIndex+1).setValue(f),a._childIndexes.splice(g,1);for(var h=g;h<a._childIndexes.length;h++)a._childIndexes[h]-=1}}else if(a._childIndexes){a._childIndexes.splice(c,1);for(var h=c;h<a._childIndexes.length;h++)a._childIndexes[h]--}d&&a.removeChild(d);for(var h=b;h<a.childNodes.length;h++)a.childNodes[h]._cellIndex=a.childNodes[h]._cellIndexS=a.childNodes[h]._cellIndex-1}},dhtmlXGridObject.prototype.enableColumnMove=function(a,b){this._mCol=convertStringToBoolean(a),"undefined"!=typeof b&&(this._mCols=b.split(",")),this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)},dhtmlXGridObject.prototype._startColumnMove=function(a){a=a||event;for(var b=a.target||a.srcElement,c=b;"TABLE"!=c.tagName;)c=c.parentNode;var d=c.grid;return d&&(d.setActive(),d._mCol&&2!=a.button)?(b=d.getFirstParentOfType(b,"TD"),"default"!=b.style.cursor?!0:(d&&!d._colInMove&&(d.resized=null,d._mCols&&"true"!=d._mCols[b._cellIndex]||(d._colInMove=b._cellIndex+1)),!0)):void 0},dhtmlXGridObject.prototype._onColumnMove=function(a){a=a||event;var b=window.globalActiveDHTMLGridObject;if(b&&b._colInMove){if(b._showHContext&&b._showHContext(!1),"object"!=typeof b._colInMove){var c=document.createElement("DIV");c._aIndex=b._colInMove-1,c._bIndex=null,c.innerHTML=b.getHeaderCol(c._aIndex),c.className="dhx_dragColDiv",c.style.position="absolute",document.body.appendChild(c),b._colInMove=c}var d=[];d[0]=document.body.scrollLeft||document.documentElement.scrollLeft,d[1]=document.body.scrollTop||document.documentElement.scrollTop,b._colInMove.style.left=a.clientX+d[0]+8+"px",b._colInMove.style.top=a.clientY+d[1]+8+"px";for(var e=a.target||a.srcElement;e&&"undefined"==typeof e._cellIndexS;)e=e.parentNode;if(b._colInMove._oldHe&&(b._colInMove._oldHe.className=b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),b._colInMove._oldHe=null,b._colInMove._bIndex=null),e){if(b.hdr.rows[1]._childIndexes)var f=b.hdr.rows[1].cells[b.hdr.rows[1]._childIndexes[e._cellIndexS]];else var f=b.hdr.rows[1].cells[e._cellIndexS];var c=a.clientX-(getAbsoluteLeft(f)-b.hdrBox.scrollLeft);c/f.offsetWidth>.5?(f.className+=" columnTargetR",b._colInMove._bIndex=e._cellIndexS):(f.className+=" columnTargetL",b._colInMove._bIndex=e._cellIndexS-1),f.offsetLeft<b.objBox.scrollLeft+20&&(b.objBox.scrollLeft=Math.max(0,f.offsetLeft-20)),f.offsetLeft+f.offsetWidth-b.objBox.scrollLeft>b.objBox.offsetWidth-20&&(b.objBox.scrollLeft=Math.min(b.objBox.scrollLeft+f.offsetWidth+20,b.objBox.scrollWidth-b.objBox.offsetWidth)),b._colInMove._oldHe=f}return a.cancelBubble=!0,!1}return!0},dhtmlXGridObject.prototype._stopColumnMove=function(a){a=a||event;var b=window.globalActiveDHTMLGridObject;return b&&b._colInMove&&("object"==typeof b._colInMove&&(b._colInMove.parentNode.removeChild(b._colInMove),null!=b._colInMove._bIndex&&b.moveColumn(b._colInMove._aIndex,b._colInMove._bIndex+1),b._colInMove._oldHe&&(b._colInMove._oldHe.className=b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),b._colInMove._oldHe=null,b._colInMove.grid=null,b.resized=!0),b._colInMove=0),!0},dhtmlXGridObject.prototype.mouseOverHeader=function(a){var b=this;dhtmlxEvent(this.hdr,"mousemove",function(c){c=c||window.event;var d=c.target||c.srcElement;"TD"!=d.tagName&&(d=b.getFirstParentOfType(d,"TD")),d&&"undefined"!=typeof d._cellIndex&&a(d.parentNode.rowIndex,d._cellIndex)})},dhtmlXGridObject.prototype.mouseOver=function(a){var b=this;dhtmlxEvent(this.obj,"mousemove",function(c){c=c||window.event;var d=c.target||c.srcElement;"TD"!=d.tagName&&(d=b.getFirstParentOfType(d,"TD")),d&&"undefined"!=typeof d._cellIndex&&a(d.parentNode.rowIndex,d._cellIndex)})},dhtmlXGridObject.prototype.enablePaging=function(a,b,c,d,e,f){this._pgn_parentObj="string"==typeof d?document.getElementById(d):d,this._pgn_recInfoParentObj="string"==typeof f?document.getElementById(f):f,this.pagingOn=a,this.showRecInfo=e,this.rowsBufferOutSize=parseInt(b),this.currentPage=1,this.pagesInGroup=parseInt(c),this._init_pgn_events(),this.setPagingSkin("default")},dhtmlXGridObject.prototype.setXMLAutoLoading=function(a,b){this.xmlFileUrl=a,this._dpref=b},dhtmlXGridObject.prototype.changePageRelative=function(a){this.changePage(this.currentPage+a)},dhtmlXGridObject.prototype.changePage=function(a){0==arguments.length&&(a=this.currentPage||0),a=parseInt(a),a=Math.max(1,Math.min(a,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))),this.callEvent("onBeforePageChanged",[this.currentPage,a])&&(this.currentPage=parseInt(a),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))},dhtmlXGridObject.prototype.setPagingSkin=function(a){this._pgn_skin=this["_pgn_"+a],"toolbar"==a&&(this._pgn_skin_tlb=arguments[1])},dhtmlXGridObject.prototype.setPagingTemplates=function(a,b){this._pgn_templateA=this._pgn_template_compile(a),this._pgn_templateB=this._pgn_template_compile(b),this._page_skin_update()},dhtmlXGridObject.prototype._page_skin_update=function(){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));var a=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);return a&&a<this.currentPage?this.changePage(a):void(this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView()))},dhtmlXGridObject.prototype._init_pgn_events=function(){this.attachEvent("onXLE",this._page_skin_update),this.attachEvent("onClearAll",this._page_skin_update),this.attachEvent("onPageChanged",this._page_skin_update),this.attachEvent("onGridReconstructed",this._page_skin_update),this._init_pgn_events=function(){}},dhtmlXGridObject.prototype._pgn_default=function(){if(!this.pagingBlock){if(this.pagingBlock=document.createElement("DIV"),this.pagingBlock.className="pagingBlock",this.recordInfoBlock=document.createElement("SPAN"),this.recordInfoBlock.className="recordsInfoBlock",!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock),this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock),this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}var a=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,a),this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,a),this._pgn_template_active(this.pagingBlock),this._pgn_template_active(this.recordInfoBlock),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_block=function(a){for(var b=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,c=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),b+this.pagesInGroup),d=[],e=b+1;c>=e;e++)d.push(e==this.currentPage?"<a class='dhx_not_active'><b>"+e+"</b></a>":"<a onclick='this.grid.changePage("+e+"); return false;'>"+e+"</a>");return d.join(a)},dhtmlXGridObject.prototype._pgn_link=function(a,b,c){if("prevpages"==a||"prev"==a)return 1==this.currentPage?c:"<a onclick='this.grid.changePageRelative(-1*"+("prev"==a?"1":"this.grid.pagesInGroup")+"); return false;'>"+b+"</a>";if("nextpages"==a||"next"==a)return this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?c:this.rowsBuffer.length/(this.rowsBufferOutSize*("next"==a?"1":this.pagesInGroup))<=1?c:"<a onclick='this.grid.changePageRelative("+("next"==a?"1":"this.grid.pagesInGroup")+"); return false;'>"+b+"</a>";if("current"==a){var d=this.currentPage+(b?parseInt(b):0);return 1>d||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<d?c:"<a "+(d==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+d+"); return false;'>"+d+"</a>"}return b},dhtmlXGridObject.prototype._pgn_template_active=function(a){var b=a.getElementsByTagName("A");if(b)for(var c=0;c<b.length;c++)b[c].grid=this},dhtmlXGridObject.prototype._pgn_template_compile=function(a){return a=a.replace(/\[([^\]]*)\]/g,function(a,b){switch(b=b.split(":"),b[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+b[0]+"','"+b[1]+"','"+b[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+b[1]+"')+\""}}),new Function('return "'+a+'";')},dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"},dhtmlXGridObject.prototype.setPagingWTMode=function(a,b,c,d){this._WTDef=[a,b,c,d]},dhtmlXGridObject.prototype._pgn_bricks=function(a,b,c){var d=(this.skin_name||"").split("_")[1],e="";("light"==d||"modern"==d||"skyblue"==d)&&(e="_"+d),this.pagerElAr=new Array,this.pagerElAr.pagerCont=document.createElement("DIV"),this.pagerElAr.pagerBord=document.createElement("DIV"),this.pagerElAr.pagerLine=document.createElement("DIV"),this.pagerElAr.pagerBox=document.createElement("DIV"),this.pagerElAr.pagerInfo=document.createElement("DIV"),this.pagerElAr.pagerInfoBox=document.createElement("DIV");var f=this.globalBox||this.objBox;if(this.pagerElAr.pagerCont.style.width=f.clientWidth+"px",this.pagerElAr.pagerCont.style.overflow="hidden",this.pagerElAr.pagerCont.style.clear="both",this.pagerElAr.pagerBord.className="dhx_pbox"+e,this.pagerElAr.pagerLine.className="dhx_pline"+e,this.pagerElAr.pagerBox.style.clear="both",this.pagerElAr.pagerInfo.className="dhx_pager_info"+e,this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo),this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox),this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox),this._pgn_parentObj.innerHTML="",this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont),this.rowsBuffer.length>0){var g=20,h=22;if(a>this.pagesInGroup){var i=document.createElement("DIV"),j=document.createElement("DIV");i.className="dhx_page"+e,j.innerHTML="&larr;",i.appendChild(j),this.pagerElAr.pagerBox.appendChild(i);var k=this;i.pgnum=(Math.ceil(a/this.pagesInGroup)-1)*this.pagesInGroup,i.onclick=function(){k.changePage(this.pgnum)},g+=h}for(var l=1;l<=this.pagesInGroup;l++){var i=document.createElement("DIV"),j=document.createElement("DIV");if(i.className="dhx_page"+e,pageNumber=(Math.ceil(a/this.pagesInGroup)-1)*this.pagesInGroup+l,pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;if(j.innerHTML=pageNumber,i.appendChild(j),a==pageNumber)i.className+=" dhx_page_active"+e,j.className="dhx_page_active"+e;else{var k=this;i.pgnum=pageNumber,i.onclick=function(){k.changePage(this.pgnum)}}g+=parseInt(h/3)*pageNumber.toString().length+15,j.style.width=parseInt(h/3)*pageNumber.toString().length+8+"px",this.pagerElAr.pagerBox.appendChild(i)}if(Math.ceil(a/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){var i=document.createElement("DIV"),j=document.createElement("DIV");i.className="dhx_page"+e,j.innerHTML="&rarr;",i.appendChild(j),this.pagerElAr.pagerBox.appendChild(i);var k=this;i.pgnum=Math.ceil(a/this.pagesInGroup)*this.pagesInGroup+1,i.onclick=function(){k.changePage(this.pgnum)},g+=h}this.pagerElAr.pagerLine.style.width=g+"px"}this.rowsBuffer.length>0&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(b+1)+this.i18n.paging.to+c+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound),this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_toolbar=function(a,b,c){this.aToolBar||(this.aToolBar=this._pgn_createToolBar());var d=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(this._WTDef[0]&&(this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage>=d&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs"))),this._WTDef[2]){var e=this;this.aToolBar.forEachListOption("pages",function(a){e.aToolBar.removeListOption("pages",a)});for(var f={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin],g=0;d>g;g++)this.aToolBar.addListOption("pages","pages_"+(g+1),0/0,"button","<span style='padding: 0px "+f+"px 0px 0px;'>"+this.i18n.paging.page+(g+1)+"</span>","paging_page.gif");this.aToolBar.setItemText("pages",this.i18n.paging.page+a)}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(b+1)+this.i18n.paging.to+c+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound)),this._WTDef[3]&&this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL}),this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var a=this;this.aToolBar.attachEvent("onClick",function(b){switch(b=b.split("_"),b[0]){case"leftabs":a.changePage(1);break;case"left":a.changePage(a.currentPage-1);break;case"rightabs":a.changePage(99999);break;case"right":a.changePage(a.currentPage+1);break;case"perpagenum":if(b[1]===this.undefined)return;a.rowsBufferOutSize=parseInt(b[1]),a.changePage(),a.aToolBar.setItemText("perpagenum",b[1]+" "+a.i18n.paging.perpage);break;case"pages":if(b[1]===this.undefined)return;a.changePage(b[1]),a.aToolBar.setItemText("pages",a.i18n.paging.page+b[1])}}),this._WTDef[0]&&(this.aToolBar.addButton("leftabs",0/0,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",0/0,null,"ar_left.gif","ar_left_dis.gif")),this._WTDef[1]&&(this.aToolBar.addText("results",0/0,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results")),this._WTDef[0]&&(this.aToolBar.addButton("right",0/0,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",0/0,null,"ar_right_abs.gif","ar_right_abs_dis.gif")),this._WTDef[2]&&("dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",0/0,"select page",[],"paging_pages.gif",null,!1,!0));var b;if(b=this._WTDef[3]){"dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("perpagenum",0/0,"select size",[],"paging_rows.gif",null,!1,!0),"object"!=typeof b&&(b=[5,10,15,20,25,30]);for(var c={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],d=0;d<b.length;d++)this.aToolBar.addListOption("perpagenum","perpagenum_"+b[d],0/0,"button","<span style='padding: 0px "+c+"px 0px 0px;'>"+b[d]+" "+this.i18n.paging.perpage+"</span>","paging_page.gif")}return this.aToolBar},dhtmlXGridObject.prototype.post=function(a,b,c,d){this.callEvent("onXLS",[this]),3==arguments.length&&"function"!=typeof c&&(d=c,c=null),d=d||"xml",b=b||"",this.xmlFileUrl||(this.xmlFileUrl=a),this._data_type=d,this.xmlLoader.onloadAction=function(a,b,e,f,g){g=a["_process_"+d](g),a._contextCallTimer||a.callEvent("onXLE",[a,0,0,g]),c&&(c(),c=null)},this.xmlLoader.loadXML(a,!0,b)},dhtmlXGridObject.prototype.setRowspan=function(a,b,c){var d=this[this._bfs_cells?"_bfs_cells":"cells"](a,b).cell,e=this.rowsAr[a];if(d.rowSpan&&1!=d.rowSpan)for(var f=e.nextSibling,g=1;g<d.rowSpan;g++){var h=f.childNodes[f._childIndexes[d._cellIndex+1]],i=document.createElement("TD");i.innerHTML="&nbsp;",i._cellIndex=d._cellIndex,i._clearCell=!0,h?h.parentNode.insertBefore(i,h):f.parentNode.appendChild(i),this._shiftIndexes(f,d._cellIndex,-1),f=f.nextSibling}d.rowSpan=c,e=this._h2?this.rowsAr[this._h2.get[e.idd].parent.childs[this._h2.get[e.idd].index+1].id]:e.nextSibling||this.rowsCol[this.rowsCol._dhx_find(e)+1];for(var j=[],g=1;c>g;g++){var k=null;if(k=this._fake&&!this._realfake?this._bfs_cells3(e,b).cell:this.cells3(e,b).cell,this._shiftIndexes(e,d._cellIndex,1),k&&k.parentNode.removeChild(k),j.push(e),this._h2){var e=this._h2.get[e.idd].parent.childs[this._h2.get[e.idd].index+1];e&&(e=this.rowsAr[e.id])}else e=e.nextSibling||this.rowsCol[this.rowsCol._dhx_find(e)+1]}this.rowsAr[a]._rowSpan=this.rowsAr[a]._rowSpan||{},this.rowsAr[a]._rowSpan[b]=j,this._fake&&!this._realfake&&b<this._fake._cCount&&this._fake.setRowspan(a,b,c)},dhtmlXGridObject.prototype._shiftIndexes=function(a,b,c){if(!a._childIndexes){a._childIndexes=new Array;for(var d=0;d<a.childNodes.length;d++)a._childIndexes[d]=d}for(var d=0;d<a._childIndexes.length;d++)d>b&&(a._childIndexes[d]=a._childIndexes[d]-c)
},dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0,this.enableRowspan=function(){},this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var a=1;a<this.obj.rows.length;a++)if(this.obj.rows[a]._rowSpan){var b=this.obj.rows[a];for(var c in b._rowSpan)for(var d=b,e=d._rowSpan[c],f=0;f<e.length;f++){if(d.nextSibling?d.parentNode.insertBefore(e[f],d.nextSibling):d.parentNode.appendChild(e[f]),this._fake){var g=this._fake.rowsAr[d.idd],h=this._fake.rowsAr[e[f].idd];g.nextSibling?g.parentNode.insertBefore(h,g.nextSibling):g.parentNode.appendChild(h),this._correctRowHeight(d.idd)}d=d.nextSibling}}var i=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray,this.rowsCol.stablesort=i;for(var a=1;a<this.obj.rows.length;a++)this.rowsCol.push(this.obj.rows[a])}}),this.attachEvent("onXLE",function(){for(var a=0;a<this.rowsBuffer.length;a++)for(var b=this.render_row(a),c=b.childNodes,d=0;d<c.length;d++)c[d]._attrs.rowspan&&this.setRowspan(b.idd,d,c[d]._attrs.rowspan)})},dhtmlXGridObject.prototype._init_point_bspl=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._split_later&&this.splitAt(this._split_later),this._init_point=this._init_point_bspl,this._init_point&&this._init_point()},dhtmlXGridObject.prototype.splitAt=function(a){function b(a){var b=a.wheelDelta/-40;a.wheelDelta===window.undefined&&(b=a.detail);var c=p.objBox;c.scrollTop+=40*b,a.preventDefault&&a.preventDefault()}function c(a,b){b.style.whiteSpace="";var c=b.nextSibling,d=b.parentNode;a.parentNode.insertBefore(b,a),c?d.insertBefore(a,c):d.appendChild(a);var e=a.style.display;a.style.display=b.style.display,b.style.display=e}function d(b,d,e,f){var g=new Array(a).join(this.delim),h=[];if(2==b)for(var i=0;a>i;i++){var j=d[b-1].cells[d[b-1]._childIndexes?d[b-1]._childIndexes[i]:i];j.rowSpan&&j.rowSpan>1&&(h[j._cellIndex]=j.rowSpan-1,f[b-1].cells[f[b-1]._childIndexes?f[b-1]._childIndexes[i]:i].rowSpan=j.rowSpan,j.rowSpan=1)}for(b;b<d.length;b++){this._fake.attachHeader(g,null,e),f=f||this._fake.ftr.childNodes[0].rows;for(var k=a,l=0,m=0;k>m;m++)if(h[m]){if(h[m]=h[m]-1,_isIE||_isFF&&_FFrv>=1.9||_isOpera){var n=document.createElement("TD");_isFF&&(n.style.display="none"),d[b].insertBefore(n,d[b].cells[0])}l++}else{var o=f[b].cells[m-l],p=d[b].cells[m-(_isIE?0:l)],q=p.rowSpan;if(c(o,p),q>1&&(h[m]=q-1,p.rowSpan=q),f[b].cells[m].colSpan>1){d[b].cells[m].colSpan=f[b].cells[m].colSpan,k-=f[b].cells[m].colSpan-1;for(var i=1;i<f[b].cells[m].colSpan;i++)f[b].removeChild(f[b].cells[m+1])}}}}if(!this.obj.rows[0])return this._split_later=a;a=parseInt(a);var e=document.createElement("DIV");this.entBox.appendChild(e);var f=document.createElement("DIV");this.entBox.appendChild(f);for(var g=this.entBox.childNodes.length-3;g>=0;g--)f.insertBefore(this.entBox.childNodes[g],f.firstChild);if(this.entBox.style.position="relative",this.globalBox=this.entBox,this.entBox=f,f.grid=this,e.style.cssText+="border:0px solid red !important;",f.style.cssText+="border:0px solid red !important;",f.style.top="0px",f.style.position="absolute",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=11,f.style.height=e.style.height=this.globalBox.clientHeight,this._fake=new dhtmlXGridObject(e),this.globalBox=this._fake.globalBox=this.globalBox,this._fake._fake=this,this._fake._realfake=!0,this._treeC=this.cellType._dhx_find("tree"),this._fake.delim=this.delim,this._fake.customGroupFormat=this.customGroupFormat,this._fake.setImagesPath(this._imgURL),this._fake.iconURL=this.iconURL,this._fake._customSorts=this._customSorts,this._fake.noHeader=this.noHeader,this._fake._enbTts=this._enbTts,this._fake._htkebl=this._htkebl,this._fake.clists=this.clists,this._fake.fldSort=new Array,this._fake.selMultiRows=this.selMultiRows,this._fake.multiLine=this.multiLine,this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight),this.attachEvent("onRowAdded",this._correctRowHeight);var h=function(){this.forEachRow(function(a){this._correctRowHeight(a)})};this.attachEvent("onPageChanged",h),this.attachEvent("onXLE",h),this.attachEvent("onResizeEnd",h),this._ads_count||this.attachEvent("onAfterSorting",h),this._srnd&&this.attachEvent("onFilterEnd",h),this.attachEvent("onDistributedEnd",h)}this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop}),this._fake.loadedKidsHash=this.loadedKidsHash,this._h2&&(this._fake._h2=this._h2),this._fake._dInc=this._dInc;var i=[[],[],[],[],[],[],[]],j=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"],k=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];this._fake.callEvent=function(){var a=!0;this._fake._split_event=!0;var b="onScroll"==arguments[0];return("onGridReconstructed"==arguments[0]||b)&&this._fake.callEvent.apply(this,arguments),b||(a=this._fake.callEvent.apply(this._fake,arguments)),this._fake._split_event=!1,a},this._elmn&&this._fake.enableLightMouseNavigation(!0),(this.__cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()}),this._fake._cssEven=this._cssEven,this._fake._cssUnEven=this._cssUnEven,this._fake._cssSP=this._cssSP,this._fake.isEditable=this.isEditable,this._fake._edtc=this._edtc,this._sst&&this._fake.enableStableSorting(!0),this._fake._sclE=this._sclE,this._fake._dclE=this._dclE,this._fake._f2kE=this._f2kE,this._fake._maskArr=this._maskArr,this._fake._dtmask=this._dtmask,this._fake.combos=this.combos;for(var l=0,m=this.globalBox.offsetWidth,g=0;a>g;g++){for(var n=0;n<j.length;n++)this[j[n]]&&(i[n][g]=this[j[n]][g]),"string"==typeof i[n][g]&&(i[n][g]=i[n][g].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(i[1][g]=1*i[1][g]),"%"==this.cellWidthType?(i[1][g]=Math.round(parseInt(this[j[1]][g])*m/100),l+=i[1][g]):l+=parseInt(this[j[1]][g]),this.setColumnHidden(g,!0)}for(var n=0;n<j.length;n++){var o=i[n].join(this.delim);"setHeader"!=k[n]?""!=o&&this._fake[k[n]](o):this._fake[k[n]](o,null,this._hstyles)}this._fake._strangeParams=this._strangeParams,this._fake._drsclmn=this._drsclmn,l=Math.min(this.globalBox.offsetWidth,l),f.style.left=l+"px",e.style.width=l+"px",f.style.width=Math.max(this.globalBox.offsetWidth-l,0),this._ecspn&&(this._fake._ecspn=!0),this._fake.init(),this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this),this._fake.objBox.style.overflow="hidden",dhtmlx.$customScroll?this._fake.objBox._custom_scroll_mode="":this._fake.objBox.style.overflowX="scroll",this._fake._srdh=this._srdh||20,this._fake._srnd=this._srnd;var p=this;dhtmlxEvent(this._fake.objBox,"mousewheel",b),dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",b),this.hdr.rows.length>2&&d.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows),this.ftr&&(d.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px"),this.saveSizeToCookie&&(this.saveSizeToCookie=function(b,c){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);b||(b=this.entBox.id);for(var d=new Array,e="cellWidthPX",f=0;f<this[e].length;f++)d[f]=a>f?this._fake[e][f]:this[e][f];d=d.join(","),this.setCookie(b,c,0,d);var d=(this.initCellWidth||new Array).join(",");return this.setCookie(b,c,1,d),!0},this.loadSizeFromCookie=function(b){b||(b=this.entBox.id);var c=this._getCookie(b,1);if(c){this.initCellWidth=c.split(",");var c=this._getCookie(b,0),d="cellWidthPX";this.cellWidthType="px";var e=0;if(c&&c.length){c=c.split(",");for(var f=0;f<c.length;f++)a>f?(this._fake[d][f]=c[f],e+=1*c[f]):this[d][f]=c[f]}this._fake.entBox.style.width=e+"px",this._fake.objBox.style.width=e+"px";var g=this.globalBox.childNodes[1];return g.style.left=e-(_isFF?0:0)+"px",this.ftr&&(this.ftr.style.left=e-(_isFF?0:0)+"px"),g.style.width=this.globalBox.offsetWidth-e+"px",this.setSizes(),!0}},this._fake.onRSE=this.onRSE),this.setCellTextStyleA=this.setCellTextStyle,this.setCellTextStyle=function(b,c,d){a>c&&this._fake.setCellTextStyle(b,c,d),this.setCellTextStyleA(b,c,d)},this.setRowTextBoldA=this.setRowTextBold,this.setRowTextBold=function(a){this.setRowTextBoldA(a),this._fake.setRowTextBold(a)},this.setRowColorA=this.setRowColor,this.setRowColor=function(a,b){this.setRowColorA(a,b),this._fake.setRowColor(a,b)},this.setRowHiddenA=this.setRowHidden,this.setRowHidden=function(a,b){this.setRowHiddenA(a,b),this._fake.setRowHidden(a,b)},this.setRowTextNormalA=this.setRowTextNormal,this.setRowTextNormal=function(a){this.setRowTextNormalA(a),this._fake.setRowTextNormal(a)},this.getChangedRows=function(a){function b(a){for(var b=0;b<a.childNodes.length;b++)if(a.childNodes[b].wasChanged)return c[c.length]=a.idd}var c=new Array;return this.forEachRow(function(d){var e=this.rowsAr[d],f=this._fake.rowsAr[d];"TR"==e.tagName&&f&&"TR"==f.tagName&&(a&&e._added?c[c.length]=e.idd:b(e)||b(f))}),c.join(this.delim)},this.setRowTextStyleA=this.setRowTextStyle,this.setRowTextStyle=function(a,b){this.setRowTextStyleA(a,b),this._fake.rowsAr[a]&&this._fake.setRowTextStyle(a,b)},this.lockRowA=this.lockRow,this.lockRow=function(a,b){this.lockRowA(a,b),this._fake.lockRow(a,b)},this.getColWidth=function(b){return parseInt(a>b?this._fake.cellWidthPX[b]:this.cellWidthPX[b])},this.getColumnLabel=function(b){return this._fake.getColumnLabel.apply(a>b?this._fake:this,arguments)},this.setColWidthA=this._fake.setColWidthA=this.setColWidth,this.setColWidth=function(b,c){b=1*b,a>b?this._fake.setColWidthA(b,c):this.setColWidthA(b,c),a>=b+1&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))},this.adjustColumnSizeA=this.adjustColumnSize,this.setColumnLabelA=this.setColumnLabel,this.setColumnLabel=function(b,c,d,e){var f=this;return a>b&&(f=this._fake),this.setColumnLabelA.apply(f,[b,c,d,e])},this.adjustColumnSize=function(b,c){return a>b?(_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(b,c),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit(),void 0):this.adjustColumnSizeA(b,c)};var q="cells";this._bfs_cells=this[q],this[q]=function(){return arguments[1]<a?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)},this._bfs_isColumnHidden=this.isColumnHidden,this.isColumnHidden=function(){return parseInt(arguments[0])<a?this._fake.isColumnHidden.apply(this._fake,arguments):this._bfs_isColumnHidden.apply(this,arguments)},this._bfs_setColumnHidden=this.setColumnHidden,this.setColumnHidden=function(){return parseInt(arguments[0])<a?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};var q="cells2";this._bfs_cells2=this[q],this[q]=function(){return arguments[1]<a?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};var q="cells3";this._bfs_cells3=this[q],this[q]=function(b){return arguments[1]<a&&this._fake.rowsAr[arguments[0].idd]?this._fake.rowsAr[b.idd]&&0==this._fake.rowsAr[b.idd].childNodes.length?this._bfs_cells3.apply(this,arguments):(arguments[0]=arguments[0].idd,this._fake.cells.apply(this._fake,arguments)):this._bfs_cells3.apply(this,arguments)};var q="changeRowId";this._bfs_changeRowId=this[q],this[q]=function(){this._bfs_changeRowId.apply(this,arguments),this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)},this._fake.getRowById=function(a){var b=this.rowsAr[a];if(!b&&this._fake.rowsAr[a]&&(b=this._fake.getRowById(a)),b){if("TR"!=b.tagName){for(var c=0;c<this.rowsBuffer.length;c++)if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==a)return this.render_row(c);if(this._h2)return this.render_row(null,b.idd)}return b}return null},this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(a){return this._fake._updateTGRState(a)}),this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var a=this.grid;a._setRowHoverA.apply(this,arguments);var b=_isIE?event.srcElement:arguments[0].target;b=a._fake.rowsAr[a.getFirstParentOfType(b,"TD").parentNode.idd],b&&a._fake._setRowHoverA.apply(a._fake.obj,[{target:b.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){if(arguments[1])var a=this;else var a=this.grid;a._unsetRowHoverA.apply(this,arguments),a._fake._unsetRowHoverA.apply(a._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss)),this._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),this._fake.rowsAr[a.id]&&this._fake.rowsAr[a.id].imgTag&&(this._fake.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),a.update=!1)},this.copy_row=function(b){var c=b.cloneNode(!0);c._skipInsert=b._skipInsert;var d=a;if(c._attrs={},c._css=b._css,this._ecspn){d=0;for(var e=0;d<c.childNodes.length&&a>e;e+=c.childNodes[d].colSpan||1)d++}for(;c.childNodes.length>d;)c.removeChild(c.childNodes[c.childNodes.length-1]);for(var f=d,e=0;f>e;e++)this.dragAndDropOff&&this.dragger.addDraggableItem(c.childNodes[e],this),c.childNodes[e].style.display=this._fake._hrrar&&this._fake._hrrar[e]?"none":"",c.childNodes[e]._cellIndex=e,c.childNodes[e].combo_value=arguments[0].childNodes[e].combo_value,c.childNodes[e]._clearCell=arguments[0].childNodes[e]._clearCell,c.childNodes[e]._cellType=arguments[0].childNodes[e]._cellType,c.childNodes[e]._brval=arguments[0].childNodes[e]._brval,c.childNodes[e].val=arguments[0].childNodes[e].val,c.childNodes[e]._attrs=arguments[0].childNodes[e]._attrs,c.childNodes[e].chstate=arguments[0].childNodes[e].chstate,b._attrs.style&&(c.childNodes[e].style.cssText+=";"+b._attrs.style),c.childNodes[e].colSpan>1&&(this._childIndexes=this._fake._childIndexes);if(this._h2&&this._treeC<a){var g=this._h2.get[arguments[0].idd];c.imgTag=c.childNodes[this._treeC].childNodes[0].childNodes[g.level],c.valTag=c.childNodes[this._treeC].childNodes[0].childNodes[g.level+2]}return c.idd=b.idd,c.grid=this._fake,c};var q="_insertRowAt";this._bfs_insertRowAt=this[q],this[q]=function(){var a=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var b=this._fake._insertRowAt.apply(this._fake,arguments);return a._fhd&&(b.parentNode.removeChild(b),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(b)),a._fhd=!1),a},this._bfs_setSizes=this.setSizes,this.setSizes=function(){if(!this._notresize){this._bfs_setSizes(this,arguments),this.sync_headers(),this.sync_scroll()&&this._ahgr&&this.setSizes();var a=this.dontSetSizes?this.entBox.offsetHeight+"px":this.entBox.style.height;this._fake.entBox.style.height=a,this._fake.objBox.style.height=this.objBox.style.height,this._fake.hdrBox.style.height=this.hdrBox.style.height,this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake.setColumnSizes(this._fake.entBox.clientWidth),this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width),this.dontSetSizes||(this.globalBox.style.height=a)}},this.sync_scroll=this._fake.sync_scroll=function(a){var b=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!a)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden",this._fake.objBox.style.overflowX="hidden"}else dhtmlx.$customScroll||(this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll");return b!=this.objBox.style.overflowX},this.sync_headers=this._fake.sync_headers=function(){if(!this.noHeader&&this._fake.hdr.scrollHeight!=this.hdr.offsetHeight){for(var b=1;b<this.hdr.rows.length;b++){for(var c=a;!this.hdr.rows[b].childNodes[c];)c--;var d=Math.min(this.hdr.rows[b].childNodes[c].scrollHeight+2,this.hdr.rows[b].scrollHeight),e=this._fake.hdr.rows[b].scrollHeight;d!=e&&(this._fake.hdr.rows[b].style.height=this.hdr.rows[b].style.height=Math.max(d,e)+"px"),window._KHTMLrv&&(this._fake.hdr.rows[b].childNodes[0].style.height=this.hdr.rows[b].childNodes[c].style.height=Math.max(d,e)+"px")}this._fake.sync_headers}},this._fake._bfs_setSizes=this._fake.setSizes,this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};var q="_doOnScroll";this._bfs__doOnScroll=this[q],this[q]=function(){this._bfs__doOnScroll.apply(this,arguments),this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake._doOnScroll.apply(this._fake,arguments)};var q="selectAll";this._bfs__selectAll=this[q],this[q]=function(){this._bfs__selectAll.apply(this,arguments),this._bfs__selectAll.apply(this._fake,arguments)};var q="doClick";this._bfs_doClick=this[q],this[q]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var b=arguments[0]._cellIndex>=a;if(!arguments[0].parentNode.idd)return;b||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),arguments[0]=this._fake.cells(arguments[0].parentNode.idd,b?0:arguments[0]._cellIndex).cell,b&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),b?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),b?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop}},this._fake._bfs_doClick=this._fake[q],this._fake[q]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var b=arguments[0]._cellIndex<a;if(!arguments[0].parentNode.idd)return;arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,b?a:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),b&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop)}},this.clearSelectionA=this.clearSelection,this.clearSelection=function(a){a&&this._fake.clearSelection(),this.clearSelectionA()},this.moveRowUpA=this.moveRowUp,this.moveRowUp=function(a){this._h2||this._fake.moveRowUp(a),this.moveRowUpA(a),this._h2&&this._fake._h2syncModel()},this.moveRowDownA=this.moveRowDown,this.moveRowDown=function(a){this._h2||this._fake.moveRowDown(a),this.moveRowDownA(a),this._h2&&this._fake._h2syncModel()},this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)},this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)},this.getSortingStateA=this.getSortingState,this.getSortingState=function(){var a=this.getSortingStateA();return 0!=a.length?a:this._fake.getSortingState()},this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState,this.setSortImgState=function(b,c,d,e){this.setSortImgStateA(b,c,d,e),a>1*c?(this._fake.setSortImgStateA(b,c,d,e),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)},this._fake.doColResizeA=this._fake.doColResize,this._fake.doColResize=function(b,c,d,e){var f=-1,g=0;return arguments[1]._cellIndex==a-1?(f=this._initalSplR+(b.clientX-e),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||b.clientX-e>0)?(arguments[3]=this._initalSplF||arguments[3],g=this.doColResizeA.apply(this,arguments)):g=this.doColResizeA.apply(this,arguments)):(this.obj.offsetWidth<this.entBox.offsetWidth&&(f=this.obj.offsetWidth),g=this.doColResizeA.apply(this,arguments)),this._correctSplit(f),this.resized=this._fake.resized=1,g},this._fake.changeCursorState=function(a){var b=a.target||a.srcElement;if("TD"!=b.tagName&&(b=this.getFirstParentOfType(b,"TD")),"TD"!=b.tagName||!this._drsclmn||this._drsclmn[b._cellIndex]){var c=(a.layerX||0)+(_isIE||"DIV"!=a.target.tagName?0:b.offsetLeft),d=parseInt(this.getPosition(b,this.hdrBox));b.style.cursor=b.offsetWidth-(a.offsetX||-1*(d-c))<(_isOpera?20:10)||this.entBox.offsetWidth-(a.offsetX?a.offsetX+b.offsetLeft:c)+this.objBox.scrollLeft-0<(_isOpera?20:10)?"E-resize":"default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this._fake.startColResizeA=this._fake.startColResize,this._fake.startColResize=function(a){var b=this.startColResizeA(a);if(this._initalSplR=this.entBox.offsetWidth,this._initalSplF=null,this.entBox.onmousemove){var c=this.entBox.parentNode;if(c._aggrid)return b;c._aggrid=c.grid,c.grid=this,this.entBox.parentNode.onmousemove=this.entBox.onmousemove,this.entBox.onmousemove=null}return b},this._fake.stopColResizeA=this._fake.stopColResize,this._fake.stopColResize=function(a){if(this.entBox.parentNode.onmousemove){var b=this.entBox.parentNode;b.grid=b._aggrid,b._aggrid=null,this.entBox.onmousemove=this.entBox.parentNode.onmousemove,this.entBox.parentNode.onmousemove=null,this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(a)},this.doKeyA=this.doKey,this._fake.doKeyA=this._fake.doKey,this._fake.doKey=this.doKey=function(b){if(!b)return!0;if(this._htkebl)return!0;if((b.target||b.srcElement).value!==window.undefined){var c=b.target||b.srcElement;if(!c.parentNode||-1==c.parentNode.className.indexOf("editable"))return!0}switch(b.keyCode){case 9:if(b.shiftKey){if(this._realfake){if(this.cell&&0==this.cell._cellIndex){b.preventDefault&&b.preventDefault();var d=this._fake.rowsBuffer[this._fake.getRowIndex(this.cell.parentNode.idd)-1];if(d){this._fake.showRow(d.idd);for(var e=this._fake._cCount-1;"none"==d.childNodes[e].style.display;)e--;this._fake.selectCell(this._fake.getRowIndex(d.idd),e,!1,!1,!0)}return!1}return this.doKeyA(b)}return this.cell&&this.cell._cellIndex==a?(b.preventDefault&&b.preventDefault(),this._fake.selectCell(this.getRowIndex(this.cell.parentNode.idd),a-1,!1,!1,!0),!1):this.doKeyA(b)}if(this._realfake){if(this.cell&&this.cell._cellIndex==a-1){b.preventDefault&&b.preventDefault();for(var e=a;this._fake._hrrar&&this._fake._hrrar[e];)e++;return this._fake.selectCell(this._fake.getRowIndex(this.cell.parentNode.idd),e,!1,!1,!0),!1}var d=this.doKeyA(b);return globalActiveDHTMLGridObject=this,d}if(this.cell){for(var e=this.cell._cellIndex+1;this.rowsCol[0].childNodes[e]&&"none"==this.rowsCol[0].childNodes[e].style.display;)e++;if(e==this.rowsCol[0].childNodes.length){b.preventDefault&&b.preventDefault();var d=this.rowsBuffer[this.getRowIndex(this.cell.parentNode.idd)+1];if(d)return this.showRow(d.idd),this._fake.selectCell(this._fake.getRowIndex(d.idd),0,!1,!1,!0),!1}}return this.doKeyA(b)}return this.doKeyA(b)},this.editCellA=this.editCell,this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()},this.deleteRowA=this.deleteRow,this.deleteRow=function(a,b){return this.deleteRowA(a,b)===!1?!1:void(this._fake.rowsAr[a]&&this._fake.deleteRow(a))},this.clearAllA=this.clearAll,this.clearAll=function(){this.clearAllA(),this._fake.clearAll()},this.editStopA=this.editStop,this.editStop=function(a){this._fake.editor?this._fake.editStop(a):this.editStopA(a)},this.attachEvent("onAfterSorting",function(b){b>=a&&this._fake.setSortImgState(!1)}),this._fake.sortField=function(a,b){if(this._fake.sortField.call(this._fake,a,b,this._fake.hdr.rows[0].cells[a]),"na"!=this.fldSort[a]&&this._fake.fldSorted){var c=this._fake.getSortingState()[1];this._fake.setSortImgState(!1),this.setSortImgState(!0,arguments[0],c)}},this.sortTreeRowsA=this.sortTreeRows,this._fake.sortTreeRowsA=this._fake.sortTreeRows,this.sortTreeRows=this._fake.sortTreeRows=function(a,b,c,d){return this._realfake?this._fake.sortTreeRows(a,b,c,d):(this.sortTreeRowsA(a,b,c,d),this._fake._h2syncModel(),this._fake.setSortImgStateA(!1),void(this._fake.fldSorted=null))},this._fake._fillers=[],this._fake.rowsBuffer=this.rowsBuffer,this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer}),this._add_filler_s=this._add_filler,this._add_filler=function(a,b,c,d){if(this._fake._fillers||(this._fake._fillers=[]),this._realfake||!d){var e;(c||!this._fake._fillers.length)&&(c&&c.idd?e=this._fake.rowsAr[c.idd]:c&&c.nextSibling&&(e={},e.nextSibling=this._fake.rowsAr[c.nextSibling.idd],e.parentNode=e.nextSibling.parentNode),this._fake._fillers.push(this._fake._add_filler(a,b,e)))}return this._add_filler_s.apply(this,arguments)},this._add_from_buffer_s=this._add_from_buffer,this._add_from_buffer=function(){var a=this._add_from_buffer_s.apply(this,arguments);return-1!=a&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)),a},this._fake.render_row=function(a){var b=this._fake.render_row(a);return-1==b?-1:b?this.rowsAr[b.idd]=this.rowsAr[b.idd]||this._fake.copy_row(b):null},this._reset_view_s=this._reset_view,this._reset_view=function(){this._fake._reset_view(!0),this._fake._fillers=[],this._reset_view_s()},this.moveColumn_s=this.moveColumn,this.moveColumn=function(b,c){return c>=a?this.moveColumn_s(b,c):void 0},this.attachEvent("onCellChanged",function(b,c,d){if(this._split_event&&a>c&&this.rowsAr[b]){var e=this._fake.rowsAr[b];if(!e)return;e=e._childIndexes?e.childNodes[e._childIndexes[c]]:e.childNodes[c];var f=this.rowsAr[b].childNodes[c];f._treeCell&&f.firstChild.lastChild?f.firstChild.lastChild.innerHTML=d:f.innerHTML=e.innerHTML,f._clearCell=!1,f.combo_value=e.combo_value,f.chstate=e.chstate}}),this._fake.combos=this.combos,this.setSizes(),this.rowsBuffer[0]&&this._reset_view(),this.attachEvent("onXLE",function(){this._fake._correctSplit()}),this._fake._correctSplit()},dhtmlXGridObject.prototype._correctSplit=function(a){if(a=a||this.obj.scrollWidth-this.objBox.scrollLeft,a=Math.min(this.globalBox.offsetWidth,a),a>-1){this.entBox.style.width=a+"px",this.objBox.style.width=a+"px";var b=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._fake.entBox.style.left=a+"px",this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-a-(this.quirks?0:2)*b)+"px",this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width),_isIE){var c=_isIE&&!window.xmlHttpRequest,b=this.globalBox.offsetWidth-this.globalBox.clientWidth;this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(c?b:0)-a)+"px"}}},dhtmlXGridObject.prototype._correctRowHeight=function(a){if(this.rowsAr[a]&&this._fake.rowsAr[a]){var b=this.rowsAr[a].offsetHeight,c=this._fake.rowsAr[a].offsetHeight,d=Math.max(b,c);if(d&&(this.rowsAr[a].style.height=this._fake.rowsAr[a].style.height=d+"px",window._KHTMLrv)){for(var e,f=this._fake._cCount;!e&&f>=0;)e=this.rowsAr[a].childNodes[f],f-=1;var g=this._fake.rowsAr[a].firstChild;e&&g&&(e.style.height=g.style.height=d+"px")}}},dhtmlXGridObject.prototype.enableAutoSizeSaving=function(a,b){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(a,b)})},dhtmlXGridObject.prototype.saveOpenStates=function(a,b){a||(a=this.entBox.id);var c=[];this._h2.forEachChild(0,function(a){"minus"==a.state&&c.push(a.id)});var d="gridOpen"+(a||"")+"="+c.join("|")+(b?"; "+b:"");document.cookie=d},dhtmlXGridObject.prototype.loadOpenStates=function(a){var b=this.getCookie(a,"gridOpen");if(b){b=b.split("|");for(var c=0;c<b.length;c++){var d=this.getParentId(b[c]);this.getOpenState(d)&&this.openItem(b[c])}}},dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(a,b){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(a,b)})},dhtmlXGridObject.prototype.enableSortingSaving=function(a,b){this.attachEvent("onBeforeSorting",function(){var c=this;return window.setTimeout(function(){c.saveSortingToCookie(a,b)},1),!0})},dhtmlXGridObject.prototype.enableOrderSaving=function(a,b){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(a,b),this.saveSizeToCookie(a,b)})},dhtmlXGridObject.prototype.enableAutoSaving=function(a,b){this.enableOrderSaving(a,b),this.enableAutoSizeSaving(a,b),this.enableSortingSaving(a,b)},dhtmlXGridObject.prototype.saveSizeToCookie=function(a,b){if("px"==this.cellWidthType)var c=this.cellWidthPX.join(",");else var c=this.cellWidthPC.join(",");var d=(this.initCellWidth||new Array).join(",");this.setCookie(a,b,0,c),this.setCookie(a,b,1,d)},dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(a,b){var c=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar)for(var d=0;d<this._fake._cCount;d++)c[d]=this._fake._hrrar[d]?"1":"";this.setCookie(a,b,4,c.join(",").replace(/display:none;/g,"1"))},dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(a){for(var b=this._getCookie(a,4),c=(b||"").split(","),d=0;d<this._cCount;d++)this.setColumnHidden(d,c[d]?!0:!1)},dhtmlXGridObject.prototype.saveSortingToCookie=function(a,b){this.setCookie(a,b,2,(this.getSortingState()||[]).join(","))},dhtmlXGridObject.prototype.loadSortingFromCookie=function(a){var b=this._getCookie(a,2);b=(b||"").split(","),b.length>1&&b[0]<this._cCount&&(this.sortRows(b[0],null,b[1]),this.setSortImgState(!0,b[0],b[1]))},dhtmlXGridObject.prototype.saveOrderToCookie=function(a,b){if(!this._c_order){this._c_order=[];for(var c=this._cCount,d=0;c>d;d++)this._c_order[d]=d}this.setCookie(a,b,3,(this._c_order||[]).slice(0,this._cCount).join(",")),this.saveSortingToCookie()},dhtmlXGridObject.prototype.loadOrderFromCookie=function(a){var b=this._getCookie(a,3);if(b=(b||"").split(","),b.length>1&&b.length<=this._cCount)for(var c=0;c<b.length;c++)if(!this._c_order&&b[c]!=c||this._c_order&&b[c]!=this._c_order[c]){var d=b[c];if(this._c_order)for(var e=0;e<this._c_order.length;e++)if(this._c_order[e]==b[c]){d=e;break}this.moveColumn(1*d,c)}},dhtmlXGridObject.prototype.loadSizeFromCookie=function(a){var b=this._getCookie(a,1);b&&(this.initCellWidth=b.split(","));var b=this._getCookie(a,0);if(b&&b.length){if(!this._fake&&this._hrrar)for(var c=0;c<b.length;c++)this._hrrar[c]&&(b[c]=0);"px"==this.cellWidthType?this.cellWidthPX=b.split(","):this.cellWidthPC=b.split(",")}return this.setSizes(),!0},dhtmlXGridObject.prototype.clearConfigCookie=function(a){a||(a=this.entBox.id);var b="gridSettings"+a+"=||||";document.cookie=b},dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie,dhtmlXGridObject.prototype.setCookie=function(a,b,c,d){a||(a=this.entBox.id);var e=this.getCookie(a);e=(e||"||||").split("|"),e[c]=d;var f="gridSettings"+a+"="+e.join("|").replace(/,/g,"-")+(b?"; "+b:"");document.cookie=f},dhtmlXGridObject.prototype.getCookie=function(a,b){a||(a=this.entBox.id),a=(b||"gridSettings")+a;var c=a+"=";if(document.cookie.length>0){var d=document.cookie.indexOf(c);if(-1!=d){d+=c.length;
var e=document.cookie.indexOf(";",d);return-1==e&&(e=document.cookie.length),document.cookie.substring(d,e)}}},dhtmlXGridObject.prototype._getCookie=function(a,b){return(this.getCookie(a)||"||||").replace(/-/g,",").split("|")[b]},dhtmlXGridObject.prototype.enableUndoRedo=function(){var a=this,b=function(){return a._onEditUndoRedo.apply(a,arguments)};this.attachEvent("onEditCell",b);var c=function(b,c,d){return a._onEditUndoRedo.apply(a,[2,b,c,d?1:0,d?0:1])};this.attachEvent("onCheckbox",c),this._IsUndoRedoEnabled=!0,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype._onEditUndoRedo=function(a,b,c,d,e){if(this._IsUndoRedoEnabled&&2==a&&e!=d){-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&this._UndoRedoData.length>0&&(this._UndoRedoData=[]);var f={old_value:e,new_value:d,row_id:b,cell_index:c};this._UndoRedoData.push(f),this._UndoRedoPos++}return!0},dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var a=this._UndoRedoData[this._UndoRedoPos--],b=this.cells(a.row_id,a.cell_index);"tree"==this.getColType(a.cell_index)?b.setLabel(a.old_value):b.setValue(a.old_value),this.callEvent("onUndo",[a.row_id])},dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var a=this._UndoRedoData[++this._UndoRedoPos];this.cells(a.row_id,a.cell_index).setValue(a.new_value),this.callEvent("onUndo",[a.row_id])},dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)},dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)},eXcell_time.prototype=new eXcell_ed,eXcell_sub_row.prototype=new eXcell,eXcell_sub_row_ajax.prototype=new eXcell_sub_row,eXcell_sub_row_grid.prototype=new eXcell_sub_row,dhtmlXGridObject.prototype._expandMonolite=function(a,b,c){var d=this.parentNode,e=d.parentNode,f=e.grid;(a||window.event)&&(c||e._expanded||f.editStop(),(a||event).cancelBubble=!0);var g=f.getUserData(e.idd,"__sub_row");if(f._sub_row_editor||(f._sub_row_editor=new eXcell_sub_row(d)),g){if(e._expanded&&!b){f._sub_row_editor._setState("plus.gif",d),d._previous_content=e._expanded,f.objBox.removeChild(e._expanded),e._expanded=!1,e.style.height=(e.oldHeight||20)+"px",d.style.height=(e.oldHeight||20)+"px",f._fake&&(f._fake.rowsAr[e.idd].style.height=(e.oldHeight||20)+"px");for(var h=0;h<e.cells.length;h++)e.cells[h].style.verticalAlign="middle",e.cells[h].style.paddingTop="0px";delete f._flow[e.idd],f._correctMonolite(),e._expanded.ctrl=null}else if(!e._expanded&&!c){if(f._sub_row_editor._setState("minus.gif",d),e.oldHeight=d.offsetHeight,d._previous_content){var i=d._previous_content;i.ctrl=d,f.objBox.appendChild(i),f._detectHeight(i,d,parseInt(i.style.height))}else{var i=document.createElement("DIV");i.ctrl=d,d._sub_row_type?f._sub_row_render[d._sub_row_type](f,i,d,g):i.innerHTML=g,i.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;",i.className="dhx_sub_row",f.objBox.appendChild(i),f._detectHeight(i,d)}f._flow||(f.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite():this._correctMonolite()}),f.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),f.attachEvent("onAfterCMove",function(){this._correctMonolite(!0)}),f.attachEvent("onDrop",function(){this._correctMonolite(!0)}),f.attachEvent("onBeforePageChanged",function(){return this._collapsMonolite(),!0}),f.attachEvent("onGroupStateChanged",function(){return this._correctMonolite(),!0}),f.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),f.attachEvent("onUnGroup",function(){this._collapsMonolite()}),f.attachEvent("onPageChanged",function(){this._collapsMonolite()}),f.attachEvent("onXLE",function(){this._collapsMonolite()}),f.attachEvent("onClearAll",function(){for(var a in this._flow)this._flow[a]&&this._flow[a].parentNode&&this._flow[a].parentNode.removeChild(this._flow[a]);this._flow=[]}),f.attachEvent("onEditCell",function(a,b,c){return 2!==a&&this._flow[b]&&"ch"!=this.cellType[c]&&"ra"!=this.cellType[c]&&this._expandMonolite.apply(this._flow[b].ctrl.firstChild,[0,!1,!0]),!0}),f.attachEvent("onCellChanged",function(a,b){if(this._flow[a]){var c=this.cells(a,b).cell;c.style.verticalAlign="top",c.style.paddingTop="3px"}}),f._flow=[]),f._flow[e.idd]=i,f._correctMonolite();var j=f._srdh>30?11:3;f.multiLine&&(j=0);for(var h=0;h<e.cells.length;h++)e.cells[h].style.verticalAlign="top",e.cells[h].style.paddingTop=j+"px";if(f._fake)for(var k=f._fake.rowsAr[e.idd],h=0;h<k.cells.length;h++)k.cells[h].style.verticalAlign="top",k.cells[h].style.paddingTop=j+"px";d.style.paddingTop=j-1+"px",e._expanded=i}f._ahgr&&f.setSizes(),f.parentGrid&&f.callEvent("onGridReconstructed",[]),f.callEvent("onSubRowOpen",[e.idd,!!e._expanded])}},dhtmlXGridObject.prototype._sub_row_render={ajax:function(that,d,td,c){d.innerHTML="Loading...";var xml=new dtmlXMLLoaderObject(function(){d.innerHTML=xml.xmlDoc.responseText;var z=xml.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g);if(z)for(var i=0;i<z.length;i++)eval(z[i].replace(/<([\/]{0,1})s[^>]*>/g,""));that._detectHeight(d,td),that._correctMonolite(),that.setUserData(td.parentNode.idd,"__sub_row",xml.xmlDoc.responseText),td._sub_row_type=null,that._ahgr&&that.setSizes(),that.callEvent("onSubAjaxLoad",[td.parentNode.idd,xml.xmlDoc.responseText])},this,!0,!0);xml.loadXML(c)},grid:function(a,b,c,d){c._sub_grid=new dhtmlXGridObject(b),a.skin_name&&c._sub_grid.setSkin(a.skin_name),c._sub_grid.parentGrid=a,c._sub_grid.imgURL=a.imgURL,c._sub_grid.iconURL=a.iconURL,c._sub_grid.enableAutoHeight(!0),c._sub_grid._delta_x=c._sub_grid._delta_y=null,c._sub_grid.attachEvent("onGridReconstructed",function(){a._detectHeight(b,c,c._sub_grid.objBox.scrollHeight+c._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0)),a._correctMonolite(),this.setSizes(),a.parentGrid&&a.callEvent("onGridReconstructed",[])}),a.callEvent("onSubGridCreated",[c._sub_grid,c.parentNode.idd,c._cellIndex,d])?c._sub_grid.loadXML(d,function(){a._detectHeight(b,c,c._sub_grid.objBox.scrollHeight+c._sub_grid.hdr.offsetHeight+(c._sub_grid.ftr?c._sub_grid.ftr.offsetHeight:0)),c._sub_grid.objBox.style.overflow="hidden",a._correctMonolite(),c._sub_row_type=null,a.callEvent("onSubGridLoaded",[c._sub_grid,c.parentNode.idd,c._cellIndex,d])&&a._ahgr&&a.setSizes()}):(c._sub_grid.objBox.style.overflow="hidden",c._sub_row_type=null)}},dhtmlXGridObject.prototype._detectHeight=function(a,b,c){var d=b.offsetLeft+b.offsetWidth;a.style.left=d+"px",a.style.width=Math.max(0,b.parentNode.offsetWidth-d-4)+"px";var c=c||a.scrollHeight;a.style.overflow="hidden",a.style.height=c+"px";var e=b.parentNode;if(b.parentNode.style.height=(e.oldHeight||20)+3+1*c+"px",b.style.height=(e.oldHeight||20)+3+1*c+"px",this._fake){var f=this._fake.rowsAr[b.parentNode.idd];f.style.height=(e.oldHeight||20)+3+1*c+"px"}},dhtmlXGridObject.prototype._correctMonolite=function(a){if(!this._in_correction){this._in_correction=!0;for(var b in this._flow)if(this._flow[b]&&"DIV"==this._flow[b].tagName)if(this.rowsAr[b]){if("none"==this.rowsAr[b].style.display){this.cells4(this._flow[b].ctrl).close();continue}if(this._flow[b].style.top=this.rowsAr[b].offsetTop+(this.rowsAr[b].oldHeight||20)+"px",a){var c=this._flow[b].ctrl.offsetLeft+this._flow[b].ctrl.offsetWidth;this._flow[b].style.left=c+"px",this._flow[b].style.width=this.rowsAr[b].offsetWidth-c-4+"px"}}else this._flow[b].ctrl=null,this.objBox.removeChild(this._flow[b]),delete this._flow[b];this._in_correction=!1}},dhtmlXGridObject.prototype._collapsMonolite=function(){for(var a in this._flow)this._flow[a]&&"DIV"==this._flow[a].tagName&&this.rowsAr[a]&&this.cells4(this._flow[a].ctrl).close()},eXcell_ra_str.prototype=new eXcell_ch,eXcell_ra_str.prototype.setValue=function(a){if(this.cell.style.verticalAlign="middle",a&&(a=a.toString()._dhx_trim(),("false"==a||"0"==a)&&(a="")),a){if(this.grid.rowsAr[this.cell.parentNode.idd])for(var b=0;b<this.grid._cCount;b++)if(b!==this.cell._cellIndex){var c=this.grid.cells(this.cell.parentNode.idd,b);if("ra_str"!=(c.cell._cellType||this.grid.cellType[c.cell._cellIndex]))continue;c.getValue()&&c.setValue("0")}a="1",this.cell.chstate="1"}else a="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+a+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)},dhtmlXGridObject.prototype._init_point_bcg=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL),this._col_combos=[];for(var a=0;a<this._cCount;a++)0==this.cellType[a].indexOf("combo")&&(this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this},a));this._loading_handler_set||(this._loading_handler_set=this.attachEvent("onXLE",function(a,b,c,d){eXcell_combo.prototype.fillColumnCombos(this,d),this.detachEvent(this._loading_handler_set),this._loading_handler_set=null})),this._init_point_bcg&&this._init_point_bcg()},eXcell_combo.prototype=new eXcell,eXcell_combo_v=function(a){var b=new eXcell_combo(a);return b._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class='dhxgrid_combo_icon'/>",b},eXcell_combo.prototype.initCombo=function(a){var b=document.createElement("DIV"),c=this.grid.defVal[arguments.length?a:this.cell._cellIndex],d=new dhtmlXCombo(b,"combo",0,c);this.grid.defVal[arguments.length?a:this.cell._cellIndex]="",d.DOMelem.className+=" dhxcombo_in_grid";var e=this.grid;return d.DOMelem.onselectstart=function(){return event.cancelBubble=!0,!0},d.attachEvent("onKeyPressed",function(a){(13==a||27==a)&&(e.editStop(),e._fake&&e._fake.editStop())}),dhtmlxEvent(d.DOMlist,"click",function(){e.editStop(),e._fake&&e._fake.editStop()}),d},eXcell_combo.prototype.fillColumnCombos=function(a,b){if(b){a.combo_columns=a.combo_columns||[],columns=a.xmlLoader.doXPath("//column",b);for(var c=0;c<columns.length;c++)0==(columns[c].getAttribute("type")||"").indexOf("combo")&&(a.combo_columns[a.combo_columns.length]=c,this.setComboOptions(a._col_combos[c],columns[c],a,c))}},eXcell_combo.prototype.setComboCValue=function(a,b){if(""!=this._combo_pre){{this.cell.offsetHeight?this.cell.offsetHeight+"px":0}a="<div style='width:100%;position:relative;height:100%;overflow:hidden;'>"+this._combo_pre+"<span>"+a+"</span></div>"}arguments.length>1?this.setCValue(a,b):this.setCValue(a)},eXcell_combo.prototype.setComboOptions=function(a,b,c,d,e){if(window.dhx4.s2b(b.getAttribute("xmlcontent"))&&!b.getAttribute("source")){options=b.childNodes;for(var f=[],g=0;g<options.length;g++)if("option"==options[g].tagName){var h=options[g].firstChild?options[g].firstChild.data:"";f[f.length]=[options[g].getAttribute("value"),h]}if(a.addOption(f),4==arguments.length)c.forEachRowA(function(b){var e=c.cells(b,d);e.cell._brval||e.cell._cellType||e.cell._cellIndex!=d||(""==e.cell.combo_value?e.setComboCValue("&nbsp;",""):e.setComboCValue(a.getOption(e.cell.combo_value)?a.getOption(e.cell.combo_value).text:e.cell.combo_value))});else{var i=this.cell?this:c.cells(e,d);b.getAttribute("text")?""==b.getAttribute("text")._dhx_trim()?i.setComboCValue("&nbsp;",""):i.setComboCValue(b.getAttribute("text")):i.cell.combo_value&&""!=i.cell.combo_value._dhx_trim()?i.setComboCValue(a.getOption(i.cell.combo_value)?a.getOption(i.cell.combo_value).text:i.cell.combo_value):i.setComboCValue("&nbsp;","")}}if(b.getAttribute("source"))if(b.getAttribute("auto")&&window.dhx4.s2b(b.getAttribute("auto"))){if(b.getAttribute("xmlcontent")){var i=this.cell?this:c.cells(e,d);b.getAttribute("text")&&i.setComboCValue(b.getAttribute("text"))}else c.forEachRowA(function(a){var b=c.cells(a,d);if(!b.cell._brval&&!b.cell._cellType){var e=b.cell.combo_value.toString();if(-1!=e.indexOf("^")){var f=e.split("^");b.cell.combo_value=f[0],b.setComboCValue(f[1])}}});a.enableFilteringMode(!0,b.getAttribute("source"),window.dhx4.s2b(b.getAttribute("cache")||!0),window.dhx4.s2b(b.getAttribute("sub")||!1))}else{var j=arguments.length;a.load(b.getAttribute("source"),function(){if(4==j)c.forEachRow(function(b){var e=c.cells(b,d);e.cell._brval||e.cell._cellType||(a.getOption(e.cell.combo_value)?e.setComboCValue(a.getOption(e.cell.combo_value).text):""==(e.cell.combo_value||"").toString()._dhx_trim()?(e.setComboCValue("&nbsp;",""),e.cell._clearCell=!0):e.setComboCValue(e.cell.combo_value))});else{var b=c.cells(e,d);b.setComboCValue(a.getOption(b.cell.combo_value)?a.getOption(b.cell.combo_value).text:b.cell.combo_value)}})}b.getAttribute("auto")&&window.dhx4.s2b(b.getAttribute("auto"))||(b.getAttribute("editable")&&!window.dhx4.s2b(b.getAttribute("editable"))&&a.readonly(!0),b.getAttribute("filter")&&window.dhx4.s2b(b.getAttribute("filter"))&&a.enableFilteringMode(!0))},eXcell_combo.prototype.getCellCombo=function(){return this.cell._brval?this.cell._brval:(this.cell._brval=this.initCombo(),this.cell._brval)},eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())},dhtmlXGridObject.prototype.getColumnCombo=function(a){return this._col_combos&&this._col_combos[a]?this._col_combos[a]:(this._col_combos||(this._col_combos=[]),this._col_combos[a]=eXcell_combo.prototype.initCombo.call({grid:this},a),this._col_combos[a])},dhtmlXGridObject.prototype.refreshComboColumn=function(a){this.forEachRow(function(b){this.cells(b,a).refreshCell&&this.cells(b,a).refreshCell()})},eXcell_clist.prototype=new eXcell,eXcell_clist.prototype.setValue=function(a){if("object"==typeof a){var b=this.grid.xmlLoader.doXPath("./option",a);b.length&&(this.cell._combo=[]);for(var c=0;c<b.length;c++)this.cell._combo.push(b[c].firstChild?b[c].firstChild.data:"");a=a.firstChild.data}""===a||a===this.undefined?(this.setCTxtValue(" ",a),this.cell._clearCell=!0):(this.setCTxtValue(a),this.cell._clearCell=!1)},dhtmlXGridObject.prototype.registerCList=function(a,b){this.clists||(this.clists=new Array),"object"!=typeof b&&(b=b.split(",")),this.clists[a]=b},eXcell_calck.prototype=new eXcell,eXcell_calck.prototype.setValue=function(a){a&&""!=a.toString()._dhx_trim()||(a="0"),this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)},dhtmlXGridObject.prototype._updateTGRState=function(a){a.update&&0!=a.id&&(this.rowsAr[a.id].imgTag&&(this.rowsAr[a.id].imgTag.src=this.iconTree+a.state+".gif"),a.update=!1)},dhtmlXGridObject.prototype.doExpand=function(a){this.editStop();var b=a.parentNode.parentNode.parentNode,c=this._h2.get[b.idd];this.callEvent("onOpen",[b.idd,"plus"==c.state?-1:1])&&("plus"==c.state?this.expandKids(b):"minus"!=c.state||c._closeable||this.collapseKids(b))},dhtmlXGridObject.prototype._getOpenLenght=function(a,b){var c=this._h2.get[a].childs;b+=c.length;for(var d=0;d<c.length;d++)c[d].childs.length&&"minus"==c[d].state&&(b+=this._getOpenLenght(c[d].id,0));return b},dhtmlXGridObject.prototype.collapseKids=function(a){var b=this._h2.get[a.idd];if("minus"==b.state&&this.callEvent("onOpenStart",[a.idd,1])){var c=a.rowIndex;if(0>c&&(c=this.rowsCol._dhx_find(a)+1),this._h2.change(b.id,"state","plus"),this._updateTGRState(b),this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var d=this._getOpenLenght(this.rowsCol[c-1].idd,0),e=0;d>e;e++)this.rowsCol[c+e].parentNode.removeChild(this.rowsCol[c+e]);this.rowsCol.splice(c,d)}this.callEvent("onGridReconstructed",[]),this.setSizes(),this._h2_to_buff(),this.callEvent("onOpenEnd",[a.idd,-1])}},dhtmlXGridObject.prototype._massInsert=function(a,b,c){var d=[],e=_isKHTML?this.obj:this.obj.rows[0].parentNode;if(this._h2_to_buff(),this._srnd||this.pagingOn)return this._renderSort();for(var f=this._getOpenLenght(a.id,0),g=0;f>g;g++){var h=this.render_row(c+g);b?b.parentNode.insertBefore(h,b):e.appendChild(h),d.push(h)}return this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,c).concat(d).concat(this.rowsCol.slice(c))),a.childs.length+d.length},dhtmlXGridObject.prototype.expandKids=function(a,b){var c=this._h2.get[a.idd];if((c.childs.length||c._xml_await)&&"plus"==c.state&&(c._loading||b||this.callEvent("onOpenStart",[c.id,-1]))){var d=this.getRowIndex(c.id)+1;if(c.childs.length){c._loading=!1,this._h2.change(c.id,"state","minus"),this._updateTGRState(c);{this._massInsert(c,this.rowsCol[d],d)}this.callEvent("onGridReconstructed",[])}else c._xml_await&&(c._loading=!0,this.callEvent("onDynXLS",[c.id])&&this.load(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?"&":"?")+"id="+encodeURIComponent(c.id),this._data_type));this.setSizes(),c._loading||this.callEvent("onOpenEnd",[c.id,1]),this._fixAlterCss()}},dhtmlXGridObject.prototype.kidsXmlFile="",dhtmlXGridObject.prototype.sortTreeRows=function(a,b,c){var d="getValue";this.cells5({parentNode:{grid:this}},this.getColType(a)).getDate&&(d="getDate",b="str"),this.forEachRow(function(c){var e=this._h2.get[c];if(e){var f=this._get_cell_value(e.buff,a,d);"int"==b?(e._sort=parseFloat(f),e._sort=isNaN(e._sort)?-99999999999999:e._sort):e._sort=f}});var e=this,f=1,g=-1;"des"==c&&(f=-1,g=1);var h=null;"function"==typeof b?h=function(a,d){return b(a._sort,d._sort,c,a.id,d.id)}:("cus"==b&&(h=function(b,d){return e._customSorts[a](b._sort,d._sort,c,b.id,d.id)}),"str"==b&&(h=function(a,b){return a._sort<b._sort?g:a._sort==b._sort?0:f}),"int"==b&&(h=function(a,b){return a._sort<b._sort?g:a._sort==b._sort?0:f}),"date"==b&&(h=function(a,b){return(Date.parse(new Date(a._sort||"01/01/1900"))-Date.parse(new Date(b._sort||"01/01/1900")))*f})),this._sortTreeRows(h,0),this._renderSort(0,!0),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortTreeRows=function(a,b){var c=this._h2.get[b].childs;this.rowsCol.stablesort?this.rowsCol.stablesort.call(c,a):c.sort(a);for(var d=0;d<c.length;d++)c[d].childs.length&&this._sortTreeRows(a,c[d].id),c[d].index=d},dhtmlXGridObject.prototype._renderSort=function(){this._h2_to_buff();var a=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=a},dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(a){if("TR"==a.buff.tagName){var b=(this._cssSP?a.level%2:a.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[a.id].className=b+(this._cssSU?" "+b+"_"+a.level:"")+" "+(this.rowsAr[a.id]._css||"")+(-1!=this.rowsAr[a.id].className.indexOf("rowselected")?" rowselected":"")}},this)},dhtmlXGridObject.prototype.moveRowUDTG=function(a,b){var c=this._h2.get[a],d=c.parent.childs[c.index+b];if(d&&d.parent==c.parent){var e=[c.state,d.state];this.collapseKids(this.rowsAr[c.id]),this.collapseKids(this.rowsAr[d.id]);var f=this.rowsCol._dhx_find(this.rowsAr[a]),g=this.rowsBuffer._dhx_find(this.rowsAr[a]),h=this.obj.rows[0].parentNode.removeChild(this.rowsCol[f]),i=this.rowsCol[f+(1==b?2:b)];i?i.parentNode.insertBefore(h,i):this.obj.rows[0].parentNode.appendChild(h),this.rowsCol._dhx_swapItems(f,f+b),this.rowsBuffer._dhx_swapItems(g,g+b),this._h2.swap(d,c),"minus"==e[0]&&this.expandKids(this.rowsAr[c.id]),"minus"==e[1]&&this.expandKids(this.rowsAr[d.id]),this._fixAlterCss(Math.min(f,f+b))}},eXcell_tree.prototype=new eXcell,eXcell_tree.prototype.setValueA=function(a){this.cell.parentNode.valTag.innerHTML=a,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])},eXcell_tree.prototype.setValue=function(a){if(this.cell.parentNode.imgTag)return this.setLabel(a);if(null==this.grid._tgc.iconTree||this.grid._tgc.iconTree!=this.grid.iconTree){var b={};b.spacer="<img src='"+this.grid.iconTree+"blank.gif'  align='top' class='space'>",b.imst="<img style='margin-top:-2px;' src='"+this.grid.iconTree,b.imsti="<img style='padding-top:2px;'  src='"+(this.grid.iconURL||this.grid.iconTree),b.imact="' align='top' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>",b.plus=b.imst+"plus.gif"+b.imact,b.minus=b.imst+"minus.gif"+b.imact,b.blank=b.imst+"blank.gif"+b.imact,b.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'>",b.itemim="' align='top' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" ><span id='nodeval'>",b.close="</span></div>",this.grid._tgc=b}var b=(this.grid._h2,this.grid._tgc),c=this.cell.parentNode.idd,d=this.grid._h2.get[c];(this.grid.kidsXmlFile||this.grid._slowParse)&&(d.has_kids=d.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=d.state,d._xml_await=!!d.has_kids),d.image=d.image||this.cell._attrs.image||"leaf.gif",d.label=a;for(var e=[b.start],f=0;f<d.level;f++)e.push(b.spacer);d.has_kids?(e.push(b.plus),d.state="plus"):e.push(b.imst+d.state+".gif"+b.imact),e.push(b.imsti),e.push(d.image),e.push(b.itemim),e.push(d.label),e.push(b.close),this.cell.innerHTML=e.join(""),this.cell._treeCell=!0,this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[d.level],this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[d.level+2],_isKHTML&&(this.cell.vAlign="top"),0!=d.parent.id&&"plus"==d.parent.state&&(this.grid._updateTGRState(d.parent,!1),this.cell.parentNode._skipInsert=!0),this.grid.callEvent("onCellChanged",[c,this.cell._cellIndex,a])},dhtmlXGridObject.prototype._process_tree_xml=function(a,b,c){this._parsing=!0;var d=!1;b||(this.render_row=this.render_row_tree,d=!0,b=a.getXMLTopNode(this.xml.top),c=b.getAttribute("parent")||0,"0"==c&&(c=0),this._h2||(this._h2=new dhtmlxHierarchy),this._fake&&(this._fake._h2=this._h2));var e=a.doXPath(this.xml.row,b);this._open=this._open||[];for(var f=0;f<e.length;f++){var g=e[f].getAttribute("id");g||(g=this.uid(),e[f].setAttribute("id",g));var h=this._h2.add(g,c);h.buff={idd:g,data:e[f],_parser:this._process_xml_row,_locator:this._get_xml_data},e[f].getAttribute("open")&&(h.state="minus",this._open.push(g)),this.rowsAr[g]=h.buff,this._process_tree_xml(a,e[f],g)}if(d){e.length?0==c||this._srnd||this._h2.change(c,"state","minus"):this._h2.change(c,"state",dhtmlXGridObject._emptyLineImg);for(var f=0;f<this._open.length;f++){var i=this._h2.get[this._open[f]];i.childs.length||(i.state=dhtmlXGridObject._emptyLineImg)}if(this._updateTGRState(this._h2.get[c]),this._h2_to_buff(),0!=c&&this._srnd?this.openItem(c):this.pagingOn?this._renderSort():this.render_dataset(),this.kidsXmlFile)for(var f=0;f<this._open.length;f++){var i=this._h2.get[this._open[f]];i._xml_await&&this.expandKids({idd:i.id})}this._open=[],this._slowParse===!1&&this.forEachRow(function(a){this.render_row_tree(0,a)}),this._parsing=!1,0==c||this._srnd||this.callEvent("onOpenEnd",[c,1])}return a.xmlDoc.responseXML?a.xmlDoc.responseXML:a.xmlDoc},dhtmlXGridObject.prototype._h2_to_buff=function(a){a||(a=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake&&(this._fake.rowsBuffer=this.rowsBuffer));for(var b=0;b<a.childs.length;b++)this.rowsBuffer.push(a.childs[b].buff),"minus"==a.childs[b].state&&this._h2_to_buff(a.childs[b])},dhtmlXGridObject.prototype.render_row_tree=function(a,b){if(b){var c=this._h2.get[b];c=c?c.buff:c}else var c=this.rowsBuffer[a];if(!c)return-1;if(c._parser){if(this.rowsAr[c.idd]&&"TR"==this.rowsAr[c.idd].tagName)return this._h2.get[c.idd].buff=this.rowsBuffer[a]=this.rowsAr[c.idd];var d=this._prepareRow(c.idd);return this.rowsAr[c.idd]=d,b||(this.rowsBuffer[a]=d),this._h2.get[c.idd].buff=d,c._parser.call(this,d,c.data),this._postRowProcessing(d),d}return c},dhtmlXGridObject.prototype._removeTrGrRow=function(a,b){if(b)return void this._h2.forEachChild(b.id,function(a){this._removeTrGrRow(null,a),delete this.rowsAr[a.id]},this);var c=this.getRowIndex(a.idd),b=this._h2.get[a.idd];if(-1!=c&&c!==this.undefined){var d=1;b&&"minus"==b.state&&(d+=this._getOpenLenght(b.id,0));for(var e=0;d>e;e++)this.rowsCol[e+c]&&this.rowsCol[e+c].parentNode.removeChild(this.rowsCol[e+c]);if(this._fake){for(var e=0;d>e;e++)this._fake.rowsCol[e+c]&&this._fake.rowsCol[e+c].parentNode.removeChild(this._fake.rowsCol[e+c]);d>1&&this._fake.rowsCol.splice(c+1,d-1)}this.rowsCol.splice(c,d),this.rowsBuffer.splice(c,d)}b&&(this._removeTrGrRow(null,b),delete this.rowsAr[b.id],1==b.parent.childs.length&&(this._h2.change(b.parent.id,"state",dhtmlXGridObject._emptyLineImg),this._updateTGRState(b.parent)),this._h2.remove(b.id))},dhtmlXGridObject.prototype.openItem=function(a){var b=this._h2.get[a||0],c=this.getRowById(a||0);c&&(b.parent&&0!=b.parent.id&&this.openItem(b.parent.id),this.expandKids(c))},dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow,dhtmlXGridObject.prototype.addRow=function(a,b,c,d,e,f){if(!this._h2)return this._addRowClassic(a,b,c);d=d||0;this.cellType._dhx_find("tree");"string"==typeof b&&(b=b.split(this.delim));var g=this._h2.get[a];return g||(0==d?c=this.rowsBuffer.length:(c=this.getRowIndex(d)+1,"minus"==this._h2.get[d].state?c+=this._getOpenLenght(d,0):this._skipInsert=!0)),g=g||this._h2.add(a,d),g.image=e,g.has_kids=f,g.buff=this._addRowClassic(a,b,c)},dhtmlXGridObject.prototype.addRowBefore=function(a,b,c,d,e){var f=this.rowsAr[c];if(f){if(!this._h2)return this.addRow(a,b,this.getRowIndex(c));var g=this._h2.get[c].parent.id,h=this.getRowIndex(c);return-1==h&&(this._skipInsert=!0),this._h2.addBefore(a,g,c),this.addRow(a,b,h,this._h2.get[c].parent.id,d,e)}},dhtmlXGridObject.prototype.addRowAfter=function(a,b,c,d,e){var f=this.rowsAr[c];if(f){if(!this._h2)return this.addRow(a,b,this.getRowIndex(c)+1);var g=this._h2.get[c].parent.id,h=this.getRowIndex(c);return-1==h&&(this._skipInsert=!0),"minus"==this._h2.get[c].state?h+=this._getOpenLenght(c,0)+1:h++,this._h2.addAfter(a,g,c),this.addRow(a,b,h,g,d,e)}},dhtmlXGridObject.prototype.enableSmartXMLParsing=function(a){this._slowParse=convertStringToBoolean(a)},dhtmlXGridObject.prototype._copyTreeGridRowContent=function(a,b,c){var d=this.cellType._dhx_find("tree");for(i=0;i<a.cells.length;i++)i!=d?this.cells(c,i).setValue(this.cells(b,i).getValue()):this.cells(c,i).setValueA(this.cells(b,i).getValue())},dhtmlXGridObject.prototype.closeItem=function(a){var b=this.getRowById(a);b&&this.collapseKids(b)},dhtmlXGridObject.prototype.deleteChildItems=function(a){var b=this._h2.get[a];if(b)for(;b.childs.length;)this.deleteRow(b.childs[0].id)},dhtmlXGridObject.prototype.getAllSubItems=function(a){var b=[],c=this._h2.get[a||0];if(c)for(var d=0;d<c.childs.length;d++)b.push(c.childs[d].id),c.childs[d].childs.length&&(b=b.concat(this.getAllSubItems(c.childs[d].id).split(this.delim)));return b.join(this.delim)},dhtmlXGridObject.prototype.getChildItemIdByIndex=function(a,b){var c=this._h2.get[a||0];return c&&c.childs[b]?c.childs[b].id:null},dhtmlXGridObject.prototype.getItemText=function(a){return this.cells(a,this.cellType._dhx_find("tree")).getLabel()},dhtmlXGridObject.prototype.getOpenState=function(a){var b=this._h2.get[a||0];if(b)return"minus"==b.state?!0:!1},dhtmlXGridObject.prototype.getParentId=function(a){var b=this._h2.get[a||0];return b&&b.parent?b.parent.id:null},dhtmlXGridObject.prototype.getSubItems=function(a){var b=[],c=this._h2.get[a||0];if(c)for(var d=0;d<c.childs.length;d++)b.push(c.childs[d].id);return b.join(this.delim)},dhtmlXGridObject.prototype.expandAll=function(a){this._renderAllExpand(a||0),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype._renderAllExpand=function(a){for(var b=this._h2.get[a].childs,c=0;c<b.length;c++)b[c].childs.length&&(this._h2.change(b[c].id,"state","minus"),this._updateTGRState(b[c]),this._renderAllExpand(b[c].id))},dhtmlXGridObject.prototype.collapseAll=function(a){this._h2.forEachChild(a||0,function(a){a&&"minus"==a.state&&(a.state="plus",a.update=!0,this._updateTGRState(a))},this),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype.hasChildren=function(a){var b=this._h2.get[a];return b&&b.childs.length?b.childs.length:b._xml_await?-1:0},dhtmlXGridObject.prototype.setItemCloseable=function(a,b){var c=this._h2.get[a];c&&(c._closeable=!convertStringToBoolean(b))},dhtmlXGridObject.prototype.setItemText=function(a,b){return this.cells(a,this.cellType._dhx_find("tree")).setLabel(b)},dhtmlXGridObject.prototype.setItemImage=function(a,b){this._h2.get[a].image=b,this.rowsAr[a].imgTag.nextSibling.src=(this.iconURL||"")+b},dhtmlXGridObject.prototype.getItemImage=function(a){return this.getRowById(a),this._h2.get[a].image},dhtmlXGridObject.prototype.setImageSize=function(a,b){this._img_width=a,this._img_height=b},dhtmlXGridObject.prototype._getRowImage=function(a){return this._h2.get[a.idd].image},dhtmlXGridObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)},dhtmlXGridObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)},dhtmlXGridObject.prototype.enableTreeCellEdit=function(a){this._edtc=!convertStringToBoolean(a)},dhtmlXGridObject.prototype.getLevel=function(a){var b=this._h2.get[a||0];return b?b.level:-1},dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(a,b){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[a].style.display=b)},dhtmlXGridObject._emptyLineImg="blank",dhtmlXGridObject.prototype._updateLine=function(a,b){if(b=b||this.rowsAr[a.id]){var c=b.imgTag;if(c){if("blank"==a.state)return c.src=this.iconTree+"blank.gif";var d=1;d=0==a.index&&0==a.level?a.parent.childs.length-1>a.index?3:1:a.parent.childs.length-1>a.index?3:2,c.src=this.iconTree+a.state+d+".gif"}}},dhtmlXGridObject.prototype._updateParentLine=function(a,b){if(b=b||this.rowsAr[a.id]){var c=b.imgTag;if(c)for(var d=a.level;d>0&&0!=a.id;d--)c=c.previousSibling,a=a.parent,c.src=a.parent.childs.length-1>a.index?this.iconTree+"line1.gif":this.iconTree+"blank.gif"}},dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort,dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments),this._redrawLines(0)},dhtmlXGridObject.prototype._redrawLines=function(a){this._tgle&&this._h2.forEachChild(a||0,function(a){this._updateLine(a),this._updateParentLine(a)},this)},dhtmlXGridObject.prototype.enableTreeGridLines=function(){dhtmlXGridObject._emptyLineImg="line",this._updateTGRState=function(a,b){!b&&a.update&&0!=a.id&&(this._tgle&&this._updateLine(a,this.rowsAr[a.id]),a.update=!1)},this._tgle=!0,this.attachEvent("onXLE",function(a,b,c){this._redrawLines(c)}),this.attachEvent("onOpenEnd",function(a){this._redrawLines(a)}),this.attachEvent("onRowAdded",function(a){var b=this._h2.get[a];this._updateLine(b),this._updateParentLine(b),b.index<b.parent.childs.length-1?(b=b.parent.childs[b.index+1],this._updateLine(b),this._updateParentLine(b)):0!=b.index&&(b=b.parent.childs[b.index-1],this._updateLine(b),this._updateParentLine(b),b.childs.length&&this._h2.forEachChild(b.id,function(a){this._updateParentLine(a)},this))}),this.attachEvent("onOpen",function(a,b){if(b)for(var c=this._h2.get[a],d=0;d<c.childs.length;d++)this._updateParentLine(c.childs[d]);return!0}),this.attachEvent("onBeforeRowDeleted",function(a){var b=this,c=this._h2.get[a],d=null;return 0!=c.index&&(d=c.parent.childs[c.index-1]),c=c.parent,window.setTimeout(function(){c=b._h2.get[c.id],c&&(b._updateLine(c),b._updateParentLine(c),d&&(b._updateLine(d),"minus"==d.state&&b._h2.forEachChild(d.id,function(a){b._updateParentLine(a)},b)))},1),!0})},dhtmlXGridObject.prototype.setFiltrationLevel=function(a,b,c){this._tr_strfltr=a,this._tr_fltr_c=b,this._tr_fltr_d=c,this.refreshFilters()},dhtmlXGridObject.prototype.filterTreeBy=function(a,b,c){var d=this._h2;
"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1),this._f_rowsBuffer?c||(this._h2=this._f_rowsBuffer,this._fake&&(this._fake._h2=this._h2)):this._f_rowsBuffer=this._h2;if(this.dma(!0),this._fbf={},"object"==typeof a)for(var e=0;e<b.length;e++)this._filterTreeA(a[e],b[e]);else this._filterTreeA(a,b);this._fbf=null,this.dma(!1),this._fix_filtered_images(this._h2,d),this._renderSort(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._filterTreeA=function(a,b){if(""!=b){var c=!0;"function"==typeof b?c=!1:b=(b||"").toString().toLowerCase();var d,e=function(a,b,c){var d=c.get[a.parent.id];d||(d=e(a.parent,b,c));var c=g.get[a.id];return c||(c={id:a.id,childs:[],level:a.level,parent:d,index:d.childs.length,image:a.image,state:a.state,buff:a.buff,has_kids:a.has_kids,_xml_await:a._xml_await},d.childs.push(c),g.get[c.id]=c),c},f=this._fbf,g=new dhtmlxHierarchy,h=this._tr_strfltr,i=this,j=function(a){for(var b=0;b<a.childs.length;b++)i.temp(a.childs[b])};switch(h.toString()){case"-2":d=function(a){return f[a.id]?!1:(j(a),!0)};break;case"-1":d=function(a){return!a.childs.length};break;default:d=function(a){return h==a.level}}this.temp=function(i){return 0!=i.id&&d(i)?(c?-1!=this._get_cell_value(i.buff,a).toString().toLowerCase().indexOf(b):b(this._get_cell_value(i.buff,a),i.id))?(e(i,this._h2,g),i.childs&&-2!=h&&this._h2.forEachChild(i.id,function(a){e(a,this._h2,g)},this),!0):(f[i.id]=!0,this._tr_fltr_c&&e(i.parent,this._h2,g),!1):(this._tr_fltr_d&&this._tr_strfltr>i.level&&0!=i.id&&e(i,this._h2,g),void j(i))},this.temp(this._h2.get[0]),this._h2=g,this._fake&&(this._fake._h2=this._h2)}},dhtmlXGridObject.prototype._fix_filtered_images=function(a,b){a.forEachChild(0,function(a){if(a.childs.length||a.has_kids){if("TR"==a.buff.tagName){var c=b.get[a.id];c&&c.state!=dhtmlXGridObject._emptyLineImg&&(a.state=c.state),a.update=!0,this._updateTGRState(a)}}else a.state!=dhtmlXGridObject._emptyLineImg&&(a.state=dhtmlXGridObject._emptyLineImg,a.update=!0,this._updateTGRState(a))},this)},dhtmlXGridObject.prototype.collectTreeValues=function(a){"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1),this.dma(!0),this._build_m_order(),a=this._m_order?this._m_order[a]:a;var b={},c=[],d=this._f_rowsBuffer||this._h2;d.forEachChild(0,function(c){if(-2==this._tr_strfltr||-1==this._tr_strfltr&&!c.childs.length||this._tr_strfltr==c.level){var d=this._get_cell_value(c.buff,a);d&&(b[d]=!0)}},this),this.dma(!1);var e=this.combos[a];for(var f in b)b[f]===!0&&c.push(e?e.get(f)||f:f);return c.sort()},dhtmlXGridObject.prototype._in_header_stat_tree_total=function(a,b,c){var d=function(){var a=0;this._build_m_order();var c=this._m_order?this._m_order[b]:b;return this._h2.forEachChild(0,function(b){var d=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));a+=isNaN(d)?0:d},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,d,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(a,b,c){var d=function(){var a=0;this._build_m_order();var c=this._m_order?this._m_order[b]:b;return this._h2.forEachChild(0,function(b){if(!b.childs.length){var d=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));a+=isNaN(d)?0:d}},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,d,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(a,b,c){var d=c[1].split(":");c[1]="";var e=function(){var a=0;return this._h2.forEachChild(0,function(b){var c=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[0]))*parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[1]));a+=isNaN(c)?0:c},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,e,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(a,b,c){var d=c[1].split(":");c[1]="";var e=function(){var a=0;return this._h2.forEachChild(0,function(b){if(!b.childs.length){var c=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[0]))*parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d[1]));a+=isNaN(c)?0:c}},this),this._maskArr[b]?this._aplNF(a,b):Math.round(100*a)/100};this._stat_in_header(a,e,b,c,c)},dhtmlXGridObject.prototype._in_header_stat_tree_max=function(a,b,c){var d=function(){var a=-999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(b){var d=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));isNaN(d)||(a=Math.max(a,d))},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_min=function(a,b,c){var d=function(){var a=999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(b){var d=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));isNaN(d)||(a=Math.min(a,d))},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_average=function(a,b,c){var d=function(){var a=0,c=0;this._build_m_order();var d=this._m_order?this._m_order[b]:b;return this._h2.forEachChild(0,function(b){var e=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d));a+=isNaN(e)?0:e,c++},this),this._maskArr[b]?this._aplNF(a,b):Math.round(a/c*100)/100};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(a,b,c){var d=function(){var a=-999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(b){if(!b.childs.length){var d=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));isNaN(d)||(a=Math.max(a,d))}},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(a,b,c){var d=function(){var a=999999999;this._build_m_order();var c=this._m_order?this._m_order[b]:b;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(b){if(!b.childs.length){var d=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],c));isNaN(d)||(a=Math.min(a,d))}},this),this._maskArr[b]?this._aplNF(a,b):a)};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(a,b,c){var d=function(){var a=0,c=0;this._build_m_order();var d=this._m_order?this._m_order[b]:b;return this._h2.forEachChild(0,function(b){if(!b.childs.length){var e=parseFloat(this._get_cell_value(b.buff||this.rowsAr[b.id],d));a+=isNaN(e)?0:e,c++}},this),this._maskArr[b]?this._aplNF(a,b):Math.round(a/c*100)/100};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_count=function(a,b,c){var d=function(){var a=0;return this._h2.forEachChild(0,function(){a++},this),a};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(a,b,c){var d=function(){var a=0;return this._h2.forEachChild(0,function(b){b.childs.length||a++},this),a};this._stat_in_header(a,d,b,c)},dhtmlXGridObject.prototype._stat_in_header=function(a,b,c,d){var e=function(){this.dma(!0),a.innerHTML=(d[0]?d[0]:"")+b.call(this)+(d[1]?d[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var a=0;a<this._stat_events.length;a++)for(var b=0;4>b;b++)this.detachEvent(this._stat_events[a][b]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",e),this.attachEvent("onXLE",e),this.attachEvent("onFilterEnd",e),this.attachEvent("onEditCell",function(a,b,d){return 2==a&&d==c&&e.call(this),!0})]),a.innerHTML=""},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++)this._m_order[this._c_order[a]]=a}},dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")},dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")},dhtmlXForm.prototype.items={},dhtmlXForm.prototype.items.checkbox={render:function(a,b){a._type="ch",a._enabled=!0,a._checked=!1,a._value="undefined"==typeof b.value?null:String(b.value),a._ro=1==b.readonly,b._autoInputWidth!==!1&&(b.inputWidth=14),this.doAddLabel(a,b),this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea"),a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var c=document.createElement("DIV");return c.className="dhxform_img chbx0",a.appendChild(c),isNaN(b.inputLeft)||(a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px"),a.childNodes[a._ll?1:0].appendChild(c),a.childNodes[a._ll?1:0].firstChild.value=String(b.value),a._updateImgNode=function(a,b){var c=a.childNodes[a._ll?1:0].lastChild;c.className=(b?"dhxform_actv_c":"dhxform_img")+" "+(a._checked?"chbx1":"chbx0"),a=c=null},a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])},a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])},a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._idd])},1==b.checked&&this.check(a),1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),this.doAttachEvents(a),this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null,this.doUnloadNestedLists(a),this.doDestruct(a)},doAddLabel:function(a,b){var c=document.createElement("DIV");c.className="dhxform_label "+b.labelAlign,1==b.wrap&&(c.style.whiteSpace="normal"),a._ll?a.insertBefore(c,a.firstChild):a.appendChild(c),"undefined"!=typeof b.tooltip&&(c.title=b.tooltip),c.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+b.label+(b.info?"<span class='dhxform_info'>[?]</span>":"")+(a._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>",isNaN(b.labelWidth)||(c.firstChild.style.width=parseInt(b.labelWidth)+"px"),isNaN(b.labelHeight)||(c.firstChild.style.height=parseInt(b.labelHeight)+"px"),isNaN(b.labelLeft)||(c.style.left=parseInt(b.labelLeft)+"px"),isNaN(b.labelTop)||(c.style.top=parseInt(b.labelTop)+"px")},doAddInput:function(a,b,c,d,e,f,g){var h=document.createElement("DIV");h.className="dhxform_control",a._ll?a.appendChild(h):a.insertBefore(h,a.firstChild);var i=document.createElement(c);i.className=g,i.name=a._idd,i._idd=a._idd,i.id=b.uid,"string"==typeof d&&(i.type=d),("INPUT"==c||"TEXTAREA"==c)&&(i.onkeyup=function(b){b=b||event,a.callEvent("onKeyUp",[this,b,this._idd])},i.onkeydown=function(b){b=b||event,a.callEvent("onKeyDown",[this,b,this._idd])}),h.appendChild(i),b.readonly&&this.setReadonly(a,!0),1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),e&&(isNaN(b.inputLeft)||(h.style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(h.style.top=parseInt(b.inputTop)+"px"));var j="",k=!1;if(f&&(isNaN(b.inputWidth)||(j+="width:"+parseInt(b.inputWidth)+"px;",k=!0),isNaN(b.inputHeight)||(j+="height:"+parseInt(b.inputHeight)+"px;")),"string"==typeof b.style&&(j+=b.style),i.style.cssText=j,b.maxLength&&i.setAttribute("maxLength",b.maxLength),b.connector&&i.setAttribute("connector",b.connector),k&&{input:1,password:1,select:1,calendar:1,colorpicker:1}[this.t]){if(null==dhtmlXForm.prototype.items[this.t]._dim){var l=parseInt(i.style.width),m=dhx4.isFF||dhx4.isIE?i.offsetWidth:i.clientWidth;dhtmlXForm.prototype.items[this.t]._dim=m-l}i.style.width=parseInt(i.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if("object"==typeof b.note){var n=document.createElement("DIV");n.className="dhxform_note",n.style.width=(isNaN(b.note.width)?i.offsetWidth:parseInt(b.note.width))+"px",n._w=b.note.width,n.innerHTML=b.note.text,h.appendChild(n),n=null}},doUnloadNestedLists:function(a){if(a._list){for(var b=0;b<a._list.length;b++)a._list[b].unload(),a._list[b]=null,a._listObj[b]=null,a._listBase[b].parentNode.removeChild(a._listBase[b]),a._listBase[b]=null;a._list=null,a._listObj=null,a._listBase=null}},doDestruct:function(a){for(a.callEvent=null,a.checkEvent=null,a.getForm=null,a._autoCheck=null,a._checked=null,a._enabled=null,a._idd=null,a._type=null,a._value=null,a._group=null,a.onselectstart=null,a.childNodes[a._ll?1:0].onmousedown=null,a.childNodes[a._ll?1:0].ontouchstart=null,a.childNodes[a._ll?0:1].onmousedown=null,a.childNodes[a._ll?0:1].ontouchstart=null,a.childNodes[a._ll?0:1].childNodes[0].onfocus=null,a.childNodes[a._ll?0:1].childNodes[0].onblur=null,a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null,a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null,a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null,a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null,a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null,a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},doAttachEvents:function(a){var b=this;a.childNodes[a._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event,a.preventDefault&&a.preventDefault();var c=a.target||a.srcElement;return!this.parentNode._enabled||this.parentNode._ro||"undefined"!=typeof c.className&&"dhxform_note"==c.className?(a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1):void b.doClick(this.parentNode)},a.childNodes[a._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(a){if(a=a||event,a.preventDefault&&a.preventDefault(),!this.parentNode.parentNode._enabled)return a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1;var c=a.target||a.srcElement;return"undefined"!=typeof c.className&&"dhxform_info"==c.className?(this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd]),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1):void b.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus(),a._enabled&&!a._ro&&(a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])!==!0||(this.setChecked(a,!a._checked),a._autoCheck(),a.callEvent("onChange",[a._idd,a._value,a._checked])))},doCheckValue:function(a){a._checked&&a._enabled?(a.childNodes[a._ll?1:0].firstChild.name=String(a._idd),a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)):(a.childNodes[a._ll?1:0].firstChild.name="",a.childNodes[a._ll?1:0].firstChild.value="")},setChecked:function(a,b){a._checked=b===!0?!0:!1,a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0"),this.doCheckValue(a)},check:function(a){this.setChecked(a,!0)},unCheck:function(a){this.setChecked(a,!1)},isChecked:function(a){return a._checked},enable:function(a){String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0,a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled"),this.doCheckValue(a)},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1,a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true"),this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,b){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,b){this.setChecked(a,b===!0||1==parseInt(b)||"true"==b||a._value===b)},getValue:function(a,b){return"realvalue"==b?a._value:"undefined"==typeof a._value||null==a._value?a._checked?1:0:a._value},setReadonly:function(a,b){a._ro=b===!0},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}},dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(a,b,c){a._type="ra",a._enabled=!0,a._checked=!1,a._group=b.name,a._value=b.value,a._uid=c,a._ro=1==b.readonly,a._rName=a._rId+a._group,this.r[a._idd]=a,b.inputWidth=14,this.doAddLabel(a,b),this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea"),a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var d=document.createElement("DIV");if(d.className="dhxform_img rdbt0",a.appendChild(d),isNaN(b.inputLeft)||(a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px"),a.childNodes[a._ll?1:0].appendChild(d),a.childNodes[a._ll?1:0].firstChild.name="",a.childNodes[a._ll?1:0].firstChild.value="",a._updateImgNode=function(a,b){var c=a.childNodes[a._ll?1:0].lastChild;c.className=(b?"dhxform_actv_r":"dhxform_img")+" "+(a._checked?"rdbt1":"rdbt0"),a=c=null},a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._group,a._value])},a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._group,a._value])},a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._group,this._value])},null==this.input[a._rName]){var e=document.createElement("INPUT");e.type="HIDDEN",e.name=b.name,e.firstValue=a._value,a.appendChild(e),this.input[a._rName]=e}return this.firstValue[a._rName]||(this.firstValue[a._rName]=b.value),1==b.checked&&this.check(a),1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),this.doAttachEvents(a),this},destruct:function(a){if(a.lastChild==this.input[a._rName]){var b=!1;for(var c in this.r)b||this.r[c]._group!=a._group||this.r[c]._idd==a._idd||(this.r[c].appendChild(this.input[a._rName]),b=!0);b||(this.input[a._rName].parentNode.removeChild(this.input[a._rName]),this.input[a._rName]=null,this.firstValue[a._rName]=null)}var d=a._idd;return a._doOnFocus=a._doOnBlur=a._updateImgNode=null,this.doUnloadNestedLists(a),this.doDestruct(a),d},doClick:function(a){if(a.childNodes[a._ll?0:1].childNodes[0].focus(),a._enabled&&!a._checked&&!a._ro){var b=[a._group,a._value,!0];a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",b)!==!0||(this.setChecked(a,!0),a.getForm()._autoCheck(),a.callEvent("onChange",b))}},doCheckValue:function(a){var b=null;for(var c in this.r)this.r[c]._checked&&this.r[c]._group==a._group&&this.r[c]._rId==a._rId&&(b=this.r[c]._value);null!=b&&this.r[c]._enabled?(this.input[a._rName].name=String(a._group),this.input[a._rName].value=b):(this.input[a._rName].name="",this.input[a._rName].value=""),this.input[a._rName]._value=b},setChecked:function(a,b){b=b===!0;for(var c in this.r)if(this.r[c]._group==a._group&&this.r[c]._rId==a._rId){var d=!1;if(this.r[c]._idd==a._idd?this.r[c]._checked!=b&&(this.r[c]._checked=b,d=!0):this.r[c]._checked&&(this.r[c]._checked=!1,d=!0),d){var e=this.r[c].childNodes[this.r[c]._ll?1:0].childNodes[1];e.className=e.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[c]._checked?" rdbt1":" rdbt0"),e=null}}this.doCheckValue(a)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(){}},function(){for(var a in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[a]=dhtmlXForm.prototype.items.checkbox[a]}(),dhtmlXForm.prototype.items.select={render:function(a,b){return a._type="se",a._enabled=!0,a._value=null,a._newValue=null,(window.dhx4.isFF||window.dhx4.isIE&&"number"==typeof b.inputWidth)&&(b.inputWidth=Number(b.inputWidth)),this.doAddLabel(a,b),this.doAddInput(a,b,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(a),this.doLoadOpts(a,b),null!=b.connector&&this.doLoadOptsConnector(a,b.connector),"undefined"!=typeof b.value&&null!=b.value&&this.setValue(a,b.value),this},destruct:function(a){for(this.doUnloadNestedLists(a),a.callEvent=null,a.checkEvent=null,a.getForm=null,a._autoCheck=null,a._enabled=null,a._idd=null,a._type=null,a._value=null,a._newValue=null,a.onselectstart=null,a.childNodes[a._ll?1:0].childNodes[0].onclick=null,a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null,a.childNodes[a._ll?1:0].childNodes[0].onchange=null,a.childNodes[a._ll?1:0].childNodes[0].onfocus=null,a.childNodes[a._ll?1:0].childNodes[0].onblur=null,a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null,a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},doAddLabel:function(a,b){var c=document.createElement("DIV");c.className="dhxform_label "+b.labelAlign,c.innerHTML="<label for='"+b.uid+"'>"+b.label+(b.info?"<span class='dhxform_info'>[?]</span>":"")+(a._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>",1==b.wrap&&(c.style.whiteSpace="normal"),"undefined"!=typeof b.tooltip&&(c.title=b.tooltip),a.appendChild(c),("undefined"==typeof b.label||null==b.label||0==b.label.length)&&(c.style.display="none"),isNaN(b.labelWidth)||(c.style.width=parseInt(b.labelWidth)+"px"),isNaN(b.labelHeight)||(c.style.height=parseInt(b.labelHeight)+"px"),isNaN(b.labelLeft)||(c.style.left=parseInt(b.labelLeft)+"px"),isNaN(b.labelTop)||(c.style.top=parseInt(b.labelTop)+"px"),b.info&&(c.onclick=function(a){a=a||event;var b=a.target||a.srcElement;return"undefined"!=typeof b.className&&"dhxform_info"==b.className?(this.parentNode.callEvent("onInfo",[this.parentNode._idd]),a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1):void 0})},doAttachEvents:function(a){var b=a.childNodes[a._ll?1:0].childNodes[0],c=this;b.onclick=function(){c.doOnChange(this)},b.onkeydown=function(a){a=a||event,c.doOnChange(this),this.parentNode.parentNode.callEvent("onKeyDown",[this,a,this.parentNode.parentNode._idd])},b.onchange=function(){c.doOnChange(this)},b.onkeyup=function(a){a=a||event,this.parentNode.parentNode.callEvent("onKeyUp",[this,a,this.parentNode.parentNode._idd])},b=null,this.doAttachChangeLS(a)},doAttachChangeLS:function(a){var b=a.childNodes[a._ll?1:0].childNodes[0];b.onfocus=function(){var a=this.parentNode.parentNode;a.getForm()._ccActivate(a._idd,this,a.getForm().getItemValue(a._idd,!0)),a.getForm().callEvent("onFocus",[a._idd]),a=null},b.onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd),a.getForm().callEvent("onBlur",[a._idd]),a=null},b=null},doValidate:function(a){a.getForm().live_validate&&this._validate(a)},doLoadOpts:function(a,b,c){for(var d=a.childNodes[a._ll?1:0].childNodes[0],e=b.options,f=!1,g=0;g<e.length;g++){var h=e[g].text||e[g].label;h&&"undefined"!=typeof h||(h="");var i=new Option(h,e[g].value);"string"==typeof e[g].img_src&&i.setAttribute("img_src",e[g].img_src),d.options.add(i),"undefined"!=typeof e[g].selected&&1==window.dhx4.s2b(e[g].selected)&&(i.selected=!0,a._value=e[g].value,f=!0),"undefined"!=typeof e[g].checked&&1==window.dhx4.s2b(e[g].checked)&&i.setAttribute("checked","1"),"undefined"!=typeof e[g].img&&i.setAttribute("img",e[g].img),"undefined"!=typeof e[g].img_dis&&i.setAttribute("img_dis",e[g].img_dis)}!f&&d.selectedIndex>=0&&(a._value=d.options[d.selectedIndex].value),c===!0&&a.callEvent("onOptionsLoaded",[a._idd]),this._checkNoteWidth(a)},doLoadOptsConnector:function(a,b){var c=this;a._connector_working=!0,window.dhx4.ajax.get(b,function(b){if(b=b.xmlDoc.responseXML,null!=b){var d=b.getElementsByTagName("data");if(null!=d&&null!=d[0]){d=d[0];for(var e=[],f=0;f<d.childNodes.length;f++)if("undefined"!=typeof d.childNodes[f].tagName&&"item"==String(d.childNodes[f].tagName).toLowerCase()){var g=d.childNodes[f];e.push({label:g.getAttribute("label"),value:g.getAttribute("value"),selected:null!=g.getAttribute("selected")}),g=null}c.doLoadOpts(a,{options:e},!0),a._connector_working=!1,null!=a._connector_value&&(c.setValue(a,a._connector_value),a._connector_value=null),c=a=null}}})},doOnChange:function(a){var b=a.parentNode.parentNode;if(b._newValue=a.selectedIndex>=0?a.options[a.selectedIndex].value:null,b._newValue!=b._value){if(b.checkEvent("onBeforeChange")&&b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])!==!0){for(var c=0;c<a.options.length;c++)a.options[c].value==b._value&&(a.options[c].selected=!0);return}b._value=b._newValue,b.callEvent("onChange",[b._idd,b._value]),"se"==b._type&&b.getForm().live_validate&&this._validate(b)}b._autoCheck()},setText:function(a,b){b||(b=""),a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":""),a.childNodes[a._ll?0:1].style.display=0==b.length||null==b?"none":""},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(a,b){if(a._connector_working)return void(a._connector_value=b);for(var c=this.getOptions(a),d=0;d<c.length;d++)c[d].value==b&&(c[d].selected=!0,a._value=c[d].value);null!=a._list&&a._list.length>0&&a.getForm()._autoCheck(),a.getForm()._ccReload(a._idd,a._value)},getValue:function(a){for(var b=-1,c=this.getOptions(a),d=0;d<c.length;d++)c[d].selected&&(b=c[d].value);return b},setWidth:function(a,b){a.childNodes[a._ll?1:0].childNodes[0].style.width=b+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(a){var b;null!=a.childNodes[a._ll?1:0].childNodes[1]&&(b=a.childNodes[a._ll?1:0].childNodes[1],null!=b.className&&b.className.search(/dhxform_note/gi)>=0&&"auto"==b._w&&(b.style.width=a.childNodes[a._ll?1:0].childNodes[0].offsetWidth+"px")),b=null}},function(){for(var a in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[a]=dhtmlXForm.prototype.items.checkbox[a]}(),dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(a,b,c){var d=a.childNodes[a._ll?1:0].childNodes[0];d.multiple=!0,isNaN(b.size)||(d.size=Number(b.size)),a._value=[],a._newValue=[];for(var e=b.options,f=0;f<e.length;f++){var g=new Option(e[f].text||e[f].label,e[f].value);d.options.add(g),(1==e[f].selected||"true"==e[f].selected)&&(g.selected=!0,a._value.push(e[f].value))}c===!0&&a.callEvent("onOptionsLoaded",[a._idd]),this._checkNoteWidth(a)},doAttachEvents:function(a){var b=a.childNodes[a._ll?1:0].childNodes[0],c=this;b.onfocus=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd]),a=null},b.onblur=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onBlur",[a._idd]),a=null},b.onclick=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a._autoCheck(),a=null}},doOnChange:function(a){var b=a.parentNode.parentNode;b._newValue=[];for(var c=0;c<a.options.length;c++)a.options[c].selected&&b._newValue.push(a.options[c].value);if(b._value.sort().toString()!=b._newValue.sort().toString()){if(b.checkEvent("onBeforeChange")&&b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])!==!0){for(var d={},c=0;c<b._value.length;c++)d[b._value[c]]=!0;for(var c=0;c<a.options.length;c++)a.options[c].selected=1==d[a.options[c].value];return void(d=null)}b._value=[];for(var c=0;c<b._newValue.length;c++)b._value.push(b._newValue[c]);b.callEvent("onChange",[b._idd,b._value])}b._autoCheck()},setValue:function(a,b){var c={};"string"==typeof b&&(b=b.split(",")),"object"!=typeof b&&(b=[b]);for(var d=0;d<b.length;d++)c[b[d]]=!0;for(var e=this.getOptions(a),d=0;d<e.length;d++)e[d].selected=1==c[e[d].value];a._autoCheck()},getValue:function(a){for(var b=[],c=this.getOptions(a),d=0;d<c.length;d++)c[d].selected&&b.push(c[d].value);return b}},function(){for(var a in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[a]||(dhtmlXForm.prototype.items.multiselect[a]=dhtmlXForm.prototype.items.select[a])}(),dhtmlXForm.prototype.items.input={render:function(a,b){var c=!isNaN(b.rows);if(a._type="ta",a._enabled=!0,this.doAddLabel(a,b),this.doAddInput(a,b,c?"TEXTAREA":"INPUT",c?null:"TEXT",!0,!0,"dhxform_textarea"),this.doAttachEvents(a),c&&(a.childNodes[a._ll?1:0].childNodes[0].rows=Number(b.rows)+(window.dhx4.isIE6?1:0)),"undefined"!=typeof b.numberFormat){var d,e=null,f=null;"string"!=typeof b.numberFormat?(d=b.numberFormat[0],e=b.numberFormat[1]||null,f=b.numberFormat[2]||null):(d=b.numberFormat,"string"==typeof b.groupSep&&(e=b.groupSep),"string"==typeof b.decSep&&(f=b.decSep)),this.setNumberFormat(a,d,e,f,!1)}return this.setValue(a,b.value),this},doAttachEvents:function(a){var b=this;("ta"==a._type||"se"==a._type||"pw"==a._type)&&(a.childNodes[a._ll?1:0].childNodes[0].onfocus=function(){var a=this.parentNode.parentNode;null!=a._df&&(this.value=a._value||""),a.getForm()._ccActivate(a._idd,this,this.value),a.getForm().callEvent("onFocus",[a._idd]),a=null}),a.childNodes[a._ll?1:0].childNodes[0].onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd),b.updateValue(a,!0),a.getForm().live_validate&&b._validate(a),a.getForm().callEvent("onBlur",[a._idd]),a=null}},updateValue:function(a,b){var c=a.childNodes[a._ll?1:0].childNodes[0].value;if(b||null==a._df||c!=this._getFmtValue(a,c)){var d=this;return a._value!=c?a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",[a._idd,a._value,c])!==!0?void(null!=a._df?d.setValue(a,a._value):a.childNodes[a._ll?1:0].childNodes[0].value=a._value):(null!=a._df?d.setValue(a,c):a._value=c,void a.callEvent("onChange",[a._idd,c])):void(null!=a._df&&this.setValue(a,a._value))}},setValue:function(a,b){a._value="undefined"!=typeof b&&null!=b?b:"";var c=String(a._value)||"",d=a.childNodes[a._ll?1:0].childNodes[0];null!=a._df&&"function"==typeof this._getFmtValue&&(c=this._getFmtValue(a,c)),d.value!=c&&(d.value=c,a.getForm()._ccReload(a._idd,c)),d=null},getValue:function(a){var b=a.getForm();return b._formLS&&null!=b._formLS[a._idd]&&this.updateValue(a),b=null,"undefined"!=typeof a._value&&null!=a._value?a._value:""},setReadonly:function(a,b){a._ro=b===!0,a._ro?a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true"):a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(a){return a._ro||(a._ro=!1),a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(a,b,c,d,e){if("boolean"!=typeof e&&(e=!0),""==b)return a._df=null,e&&this.setValue(a,a._value),!0;if("string"==typeof b){var f=b.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==f||4!=f.length)return!1;a._df={i_len:!1,i_sep:"string"==typeof c?c:",",d_len:!1,d_sep:"string"==typeof d?d:".",s_bef:"string"==typeof f[1]?f[1]:"",s_aft:"string"==typeof f[3]?f[3]:""};
var g=f[2].split(".");null!=g[1]&&(a._df.d_len=g[1].length);var h=g[0].split(",");return h.length>1&&(a._df.i_len=h[h.length-1].length),e&&this.setValue(a,a._value),!0}},_getFmtValue:function(item,v){var r=v.match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=item._df.s_bef,item._df.i_len!==!1){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==item._df.i_len&&q>0&&(v1=item._df.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(item._df.d_len!==!1){for(null==r[4]&&(r[4]="");r[4].length<item._df.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+item._df.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=item._df.d_sep+t1),dhx4.temp=t1=null}return v0+=item._df.s_aft}return v}},function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[a]=dhtmlXForm.prototype.items.select[a]}(),dhtmlXForm.prototype.items.password={render:function(a,b){return a._type="pw",a._enabled=!0,this.doAddLabel(a,b),this.doAddInput(a,b,"INPUT","PASSWORD",!0,!0,"dhxform_textarea"),this.doAttachEvents(a),this.setValue(a,b.value),this}},function(){for(var a in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[a]=dhtmlXForm.prototype.items.input[a]}(),dhtmlXForm.prototype.items.file={render:function(a,b){a._type="fl",a._enabled=!0,this.doAddLabel(a,b),this.doAddInput(a,b,"INPUT","FILE",!0,!1,"dhxform_textarea");var c=a.childNodes[a._ll?1:0].childNodes[0],d=this;return c.onfocus=function(){var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd]),a=null},c.onblur=function(){var a=this.parentNode.parentNode;a.getForm().live_validate&&d._validate(a),a.getForm().callEvent("onBlur",[a._idd]),a=null},c=null,a.childNodes[a._ll?1:0].childNodes[0].onchange=function(){a.callEvent("onChange",[a._idd,this.value])},this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}},function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[a]=dhtmlXForm.prototype.items.input[a]}(),dhtmlXForm.prototype.items.label={_index:!1,render:function(a,b){a._type="lb",a._enabled=!0,a._checked=!0;var c=document.createElement("DIV");return c.className="dhxform_txt_label2"+(b._isTopmost?" topmost":""),c.innerHTML=b.label,a.appendChild(c),1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),isNaN(b.labelWidth)||(c.style.width=parseInt(b.labelWidth)+"px"),isNaN(b.labelHeight)||(c.style.height=parseInt(b.labelHeight)+"px"),isNaN(b.labelLeft)||(c.style.left=parseInt(b.labelLeft)+"px"),isNaN(b.labelTop)||(c.style.top=parseInt(b.labelTop)+"px"),this},destruct:function(a){this.doUnloadNestedLists(a),a._autoCheck=null,a._enabled=null,a._type=null,a.callEvent=null,a.checkEvent=null,a.getForm=null,a.onselectstart=null,a.parentNode.removeChild(a),a=null},enable:function(a){String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1},setText:function(a,b){a.firstChild.innerHTML=b},getText:function(a){return a.firstChild.innerHTML}},function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[a]=dhtmlXForm.prototype.items.checkbox[a]}(),dhtmlXForm.prototype.items.button={render:function(a,b){if(a._type="bt",a._enabled=!0,a._name=b.name,a.className=String(a.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left"),!isNaN(b.width))var c=Math.max(b.width,10);var d="undefined"!=typeof c;return a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[0].childNodes[0],b,this._idd])},a.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt" '+(d?' style="width:'+c+'px;"':"")+">"+b.value+"</div></div>",isNaN(b.inputLeft)||(a.childNodes[0].style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(a.childNodes[0].style.top=parseInt(b.inputTop)+"px"),1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),"undefined"!=typeof b.tooltip&&(a.firstChild.title=b.tooltip),a.onselectstart=function(a){return a=a||event,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},a.firstChild.onselectstart=function(a){return a=a||event,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},a.firstChild.onkeypress=function(a){return a=a||event,32!=a.keyCode&&32!=a.charCode&&13!=a.keyCode&&13!=a.charCode||this.parentNode._busy?void 0:(this.parentNode._busy=!0,a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]),!1)},a.firstChild.ontouchstart=function(){e=e||event,e.preventDefault(),this.parentNode._busy||(this.parentNode._busy=!0,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]))},a.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)},a.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout"),this.parentNode._doOnBlur(this.parentNode)},a.firstChild.onkeyup=function(a){this.parentNode._doOnKeyUpDown("onKeyUp",a||event)},a.firstChild.onkeydown=function(a){this.parentNode._doOnKeyUpDown("onKeyDown",a||event)},a.firstChild.onmouseover=function(){var a=this.parentNode;a._enabled&&(this._isOver=!0,this.className="dhxform_btn dhxform_btn_over",a=null)},a.firstChild.onmouseout=function(){var a=this.parentNode;a._enabled&&(this.className="dhxform_btn",this._allowClick=!1,this._pressed=!1,this._isOver=!1,a=null)},a.firstChild.onmousedown=function(a){if(a=a||event,!(a.button>=2||this._pressed)){var b=this.parentNode;b._enabled&&(this.className="dhxform_btn dhxform_btn_pressed",this._allowClick=!0,this._pressed=!0,b=null)}},a.firstChild.onmouseup=function(a){if(a=a||event,!(a.button>=2)&&this._pressed){var b=this.parentNode;b._enabled&&(b._busy=!1,this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":""),this._pressed&&this._allowClick&&b.callEvent("_onButtonClick",[b._name,b._cmd]),this._allowClick=!1,this._pressed=!1,b=null)}},a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])},a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])},this},destruct:function(a){for(this.doUnloadNestedLists(a),a.callEvent=null,a.checkEvent=null,a.getForm=null,a._autoCheck=null,a._type=null,a._enabled=null,a._cmd=null,a._name=null,a._doOnFocus=null,a._doOnBlur=null,a._doOnKeyUpDown=null,a.onselectstart=null,a.firstChild.onselectstart=null,a.firstChild.onkeypress=null,a.firstChild.ontouchstart=null,a.firstChild.onfocus=null,a.firstChild.onblur=null,a.firstChild.onkeyup=null,a.firstChild.onkeydown=null,a.firstChild.onmouseover=null,a.firstChild.onmouseout=null,a.firstChild.onmousedown=null,a.firstChild.onmouseup=null;a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},enable:function(a){String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a.childNodes[0].removeAttribute("disabled"),a.childNodes[0].setAttribute("role","link"),a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,a.childNodes[0].setAttribute("disabled","true"),a.childNodes[0].removeAttribute("role"),a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}},function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[a]=dhtmlXForm.prototype.items.checkbox[a]}(),dhtmlXForm.prototype.items.hidden={_index:!1,render:function(a,b){a.style.display="none",a._name=b.name,a._type="hd",a._enabled=!0;var c=document.createElement("INPUT");return c.type="HIDDEN",c.name=b.name,c.value=b.value||"",a.appendChild(c),this},destruct:function(a){for(this.doUnloadNestedLists(a);a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a._autoCheck=null,a._name=null,a._type=null,a._enabled=null,a.onselectstart=null,a.callEvent=null,a.checkEvent=null,a.getForm=null,a.parentNode.removeChild(a),a=null},enable:function(a){a._enabled=!0,a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=!1,a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(a,b){a.childNodes[0].value=b},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}},function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[a]=dhtmlXForm.prototype.items.checkbox[a]}(),dhtmlXForm.prototype.items.list={_index:!1,render:function(a,b){return a._type="list",a._enabled=!0,a._isNestedForm=!0,a.style.paddingLeft=a._ofsNested+"px",a.className="dhxform_base_nested"+(a._custom_css||""),[this,new dhtmlXForm(a,null,b)]},destruct:function(){}},dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(a,b){a._type="fs","number"==typeof parseInt(b.inputWidth),a._width=b.width,a._enabled=!0,a._checked=!0,a.className="fs_"+b.position+("string"==typeof b.className?" "+b.className:"");var c=document.createElement("FIELDSET");c.className="dhxform_fs";var d=String(b.labelAlign).replace("align_","");if(c.innerHTML="<legend class='fs_legend' align='"+d+"' style='text-align:"+d+"'>"+b.label+"</legend>",a.appendChild(c),isNaN(b.inputLeft)||(c.style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(c.style.top=parseInt(b.inputTop)+"px"),"auto"!=b.inputWidth&&!isNaN(b.inputWidth)){c.style.width=parseInt(b.inputWidth)+"px";var e=parseInt(c.style.width);c.offsetWidth>e&&(c.style.width=e+(e-c.offsetWidth)+"px")}return a._addSubListNode=function(){var a=document.createElement("DIV");return a._custom_css=" dhxform_fs_nested",this.childNodes[0].appendChild(a),a},1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),this},destruct:function(a){for(this.doUnloadNestedLists(a),a._checked=null,a._enabled=null,a._idd=null,a._type=null,a._width=null,a.onselectstart=null,a._addSubListNode=null,a._autoCheck=null,a.callEvent=null,a.checkEvent=null,a.getForm=null;a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=!0,String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,""))},disable:function(a){a._enabled=!1,String(a.className).search("disabled")<0&&(a.className+=" disabled")},setWidth:function(a,b){a.childNodes[0].style.width=b+"px",a._width=b},getWidth:function(a){return a._width}},function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[a]=dhtmlXForm.prototype.items.checkbox[a]}(),dhtmlXForm.prototype.items.block={_index:!1,render:function(a,b){a._type="bl",a._width=b.width,a._enabled=!0,a._checked=!0,a.className="block_"+b.position+("string"==typeof b.className?" "+b.className:"");var c=document.createElement("DIV");return c.className="dhxform_obj_"+a.getForm().skin+" dhxform_block",c.style.fontSize=a.getForm().cont.style.fontSize,b.style&&(c.style.cssText=b.style),"undefined"!=typeof b.id&&(c.id=b.id),a.appendChild(c),isNaN(b.inputLeft)||(c.style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(c.style.top=parseInt(b.inputTop)+"px"),"auto"!=b.inputWidth&&(isNaN(b.inputWidth)||(c.style.width=parseInt(b.inputWidth)+"px")),isNaN(b.blockOffset)||(a._ofsNested=b.blockOffset),a._addSubListNode=function(){var a=document.createElement("DIV");return a._inBlcok=!0,"undefined"!=typeof this._ofsNested&&(a._ofsNested=this._ofsNested),this.childNodes[0].appendChild(a),a},1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),this},_setCss:function(a,b,c){a.firstChild.className="dhxform_obj_"+b+" dhxform_block",a.firstChild.style.fontSize=c}},function(){for(var a in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[a]=dhtmlXForm.prototype.items.fieldset[a]}(),dhtmlXForm.prototype.items.newcolumn={_index:!1},dhtmlXForm.prototype.items.template={render:function(a,b){!isNaN(b.rows);return a._type="tp",a._enabled=!0,b.format&&("function"==typeof b.format&&(a.format=b.format),"function"==typeof window[b.format]&&(a.format=window[b.format])),a.format||(a.format=function(a,b){return b}),this.doAddLabel(a,b),this.doAddInput(a,b,"DIV",null,!0,!0,"dhxform_item_template"),a._value=b.value||"",a.childNodes[1].childNodes[0].innerHTML=a.format(a._idd,a._value),this},setValue:function(a,b){a._value=b,a.childNodes[1].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1}},function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[a]=dhtmlXForm.prototype.items.select[a]}(),dhtmlXForm.prototype._ulToObject=function(a,b){for(var c=[],d=0;d<a.childNodes.length;d++){if("li"==String(a.childNodes[d].tagName||"").toLowerCase()){for(var e={},f=a.childNodes[d],g=0;g<b.length;g++)null!=f.getAttribute(b[g])&&(e[String(b[g]).replace("ftype","type")]=f.getAttribute(b[g]));if(!e.label)try{e.label=f.firstChild.nodeValue}catch(h){}var i=f.getElementsByTagName("UL");null!=i[0]&&(e["select"==e.type?"options":"list"]=dhtmlXForm.prototype._ulToObject(i[0],b));for(var g=0;g<f.childNodes.length;g++)"userdata"==String(f.childNodes[g].tagName||"").toLowerCase()&&(e.userdata||(e.userdata={}),e.userdata[f.childNodes[g].getAttribute("name")]=f.childNodes[g].firstChild.nodeValue);c[c.length]=e}if("div"==String(a.childNodes[d].tagName||"").toLowerCase()){var e={};e.type="label";try{e.label=a.childNodes[d].firstChild.nodeValue}catch(h){}c[c.length]=e}}return c},dhtmlXForm.prototype.setUserData=function(a,b,c,d){if("undefined"!=typeof d){var e=this.doWithItem([a,b],"_getId");null!=e&&(a=e,b=c,c=d)}this._userdata||(this._userdata={}),this._userdata[a]=this._userdata[a]||{},this._userdata[a][b]=c},dhtmlXForm.prototype.getUserData=function(a,b,c){if("undefined"!=typeof c){var d=this.doWithItem([a,b],"_getId");null!=d&&(a=d,b=c)}return null!=this._userdata&&"undefined"!=typeof this._userdata[a]&&"undefined"!=typeof this._userdata[a][b]?this._userdata[a][b]:""},dhtmlXForm.prototype.setRTL=function(a){this._rtl=a===!0?!0:!1,this._rtl?String(this.cont).search(/dhxform_rtl/gi)<0&&(this.cont.className+=" dhxform_rtl"):String(this.cont).search(/dhxform_rtl/gi)>=0&&(this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,""))},_dhxForm_doClick=function(a,b){if("object"==typeof b){var c=b[1];b=b[0]}if(document.createEvent){var d=document.createEvent("MouseEvents");d.initEvent(b,!0,!1),a.dispatchEvent(d)}else if(document.createEventObject){var d=document.createEventObject();d.button=1,a.fireEvent("on"+b,d)}c&&window.setTimeout(function(){_dhxForm_doClick(a,c)},100)},dhtmlXForm.prototype.setFormData=function(a){for(var b in a){var c=this.getItemType(b);switch(c){case"checkbox":this[1==a[b]||1==parseInt(a[b])||"true"==a[b]||a[b]==this.getItemValue(b,"realvalue")?"checkItem":"uncheckItem"](b);break;case"radio":this.checkItem(b,a[b]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(b,a[b]);break;default:this["setFormData_"+c]?this["setFormData_"+c](b,a[b]):(this.hId||(this.hId=this._genStr(12)),this.setUserData(this.hId,b,a[b]))}}},dhtmlXForm.prototype.getFormData=function(a,b){var c={};for(var d in this.itemPull){var e=this.itemPull[d]._idd,f=this.itemPull[d]._type;if("ch"==f&&(c[e]=this.isItemChecked(e)?this.getItemValue(e):0),"ra"!=f||c[this.itemPull[d]._group]||(c[this.itemPull[d]._group]=this.getCheckedValue(this.itemPull[d]._group)),f in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(c[e]=this.getItemValue(e,a)),this["getFormData_"+f]&&(c[e]=this["getFormData_"+f](e)),"up"==f){var g=this.getItemValue(e);for(var h in g)c[h]=g[h]}if(this.itemPull[d]._list)for(var i=0;i<this.itemPull[d]._list.length;i++){var j=this.itemPull[d]._list[i].getFormData(a,b);for(var k in j)c[k]=j[k]}}if(!b&&this.hId&&this._userdata[this.hId])for(var d in this._userdata[this.hId])c[d]||(c[d]=this._userdata[this.hId][d]);return c},dhtmlXForm.prototype.adjustParentSize=function(){for(var a=0,b=-1,c=0;c<this.base.length;c++)a+=this.base[c].firstChild.offsetWidth,this.base[c].offsetHeight>b&&(b=this.base[c].offsetHeight);var d=!1;try{if(d=1==this.cont.parentNode.parentNode.parentNode.parentNode._isCell)var e=this.cont.parentNode.parentNode.parentNode.parentNode}catch(f){}if(d&&"undefined"!=typeof e)return a>0&&e.setWidth(a+10),b>0&&e.setHeight(b+e.firstChild.firstChild.offsetHeight+5),void(d=e=null);var g=!1;try{if(g=1==this.cont.parentNode.parentNode.parentNode._isWindow){var h=this.cont.parentNode.parentNode;"function"==typeof h.callEvent&&(this.cont.style.display="none",h.callEvent("_setCellSize",[a+15,b+15]),this.cont.style.display="")}}catch(f){}},dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))},dhtmlXForm.prototype.send=function(a,b,c,d){if("function"==typeof b?(c=b,b="post"):b="get"==b?"get":"post",d===!0||this.validate()){var e=this.getFormData(!0),f=[];for(var g in e)f.push(g+"="+encodeURIComponent(e[g]));var h=function(a){c&&c.call(this,a,a.xmlDoc.responseText)};"get"==b?window.dhx4.ajax.get(a+(-1==a.indexOf("?")?"?":"&")+f.join("&"),h):window.dhx4.ajax.post(a,f.join("&"),h)}},dhtmlXForm.prototype.save=function(){},dhtmlXForm.prototype.dummy=function(){},dhtmlXForm.prototype._changeFormId=function(a,b){this.formId=b},dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"],a._getRowData=function(a){var b=this.obj.getFormData(!0);return b[this.action_param]=this.obj.getUserData(a,this.action_param),b},a._clearUpdateFlag=function(){},a.attachEvent("onAfterUpdate",function(a,b,c,d){return("inserted"==b||"updated"==b)&&(this.obj.resetDataProcessor("updated"),this.obj._last_load_data=this.obj.getFormData(!0)),this.obj.callEvent("onAfterSave",[this.obj.formId,d]),!0}),a.autoUpdate=!1,a.setTransactionMode("POST",!0),this.dp=a,this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted"),this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&a.sendData()}},dhtmlXForm.prototype.resetDataProcessor=function(a){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,a))},dhtmlXForm.prototype._ccActivate=function(a,b,c){this._formLS||(this._formLS={}),this._formLS[a]||(this._formLS[a]={input:b,value:c}),this._ccActive||(this._ccActive=!0,this._ccDo()),b=null},dhtmlXForm.prototype._ccDeactivate=function(a){this._ccTm&&window.clearTimeout(this._ccTm),this._ccActive=!1,null!=this._formLS&&null!=this._formLS[a]&&(this._formLS[a].input=null,this._formLS[a]=null,delete this._formLS[a])},dhtmlXForm.prototype._ccDo=function(){this._ccTm&&window.clearTimeout(this._ccTm);for(var a in this._formLS){var b=this._formLS[a].input;if("select"==String(b.tagName).toLowerCase()){var c="";b.selectedIndex>=0&&b.selectedIndex<b.options.length&&(c=b.options[b.selectedIndex].value)}else var c=b.value;c!=this._formLS[a].value&&(this._formLS[a].value=c,this.callEvent("onInputChange",[b._idd,c,this])),b=null}if(this._ccActive){var d=this;this._ccTm=window.setTimeout(function(){d._ccDo(),d=null},100)}},dhtmlXForm.prototype._ccReload=function(a,b){this._formLS&&this._formLS[a]&&(this._formLS[a].value=b)},dhtmlXForm.prototype._autoload=function(){for(var a=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"],b=document.getElementsByTagName("UL"),c=[],d=0;d<b.length;d++)if("dhtmlxForm"==b[d].className){var e=document.createElement("DIV");c[c.length]={nodeUL:b[d],nodeForm:e,data:dhtmlXForm.prototype._ulToObject(b[d],a),name:b[d].getAttribute("name")||null}}for(var d=0;d<c.length;d++){c[d].nodeUL.parentNode.insertBefore(c[d].nodeForm,c[d].nodeUL);var f=new dhtmlXForm(c[d].nodeForm,c[d].data);null!==c[d].name&&(window[c[d].name]=f);var g=c[d].nodeUL.getAttribute("oninit")||null;c[d].nodeUL.parentNode.removeChild(c[d].nodeUL),c[d].nodeUL=null,c[d].nodeForm=null,c[d].data=null,c[d]=null,g&&("function"==typeof g?g():"function"==typeof window[g]&&window[g]())}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXForm.prototype._autoload,!1):window.detachEvent("onload",dhtmlXForm.prototype._autoload)},"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXForm.prototype._autoload,!1):window.attachEvent("onload",dhtmlXForm.prototype._autoload),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(a){return""==a},isNotEmpty:function(a){return a instanceof Array?a.length>0:""==!a},isValidBoolean:function(a){return!!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return!!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return!!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return!!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return!!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31&&b[4]<=59&&b[5]<=59&&b[6]<=59)||!1},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||!1},isValidTime:function(a){var b=a.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return b&&!!(b[1]<=24&&b[2]<=59&&b[3]<=59)||!1},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||!1},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation),dhtmlXForm.prototype.addItem=function(a,b,c,d){var e=null;a instanceof Array&&(e=a[1],a=a[0]);var f=null;if(null!=a){var f=this._getParentForm(a,e);if(null!=f)return null==f.item._list?(b.listParent||(b.listParent=f.item._idd),f.form._addItem("list",f.item._idd,[b],null,f.item._idd,c,d)):f.item._list[0].addItem(null,b,c,d),f.form=f.item=null,f=null,void this._autoCheck()}this._prepareItem(b,c,d),this._autoCheck()},dhtmlXForm.prototype.removeItem=function(a,b){this._removeItem(a,b)},dhtmlXForm.prototype.removeColumn=function(a,b,c,d){var e=null;if(a instanceof Array&&(e=a[1],a=a[0]),null!=a){var f=this._getParentForm(a,e);return void(null!=f&&(null!=f.item._list&&null!=f.item._list[0]&&f.item._list[0].removeColumn(null,b,c,d),f.form=f.item=null,f=null))}if(b=Math.min(Math.max(b,0),this.cont.childNodes.length-1),1==this.cont.childNodes.length)1==c&&this._removeItemsInColumn(this.cont.childNodes[b]);else{if(1==c)this._removeItemsInColumn(this.cont.childNodes[b]);else{if(d){var g=b+1;g>this.cont.childNodes.length-1&&(g=b-1)}else{var g=b-1;0>g&&(g=b+1)}for(;this.cont.childNodes[b].childNodes.length>0;)this.cont.childNodes[g].appendChild(this.cont.childNodes[b].childNodes[0])}for(var h=[],i=0;i<this.base.length;i++)this.cont.childNodes[b]!=this.base[i]&&h.push(this.base[i]);this.base=h,this.cont.removeChild(this.cont.childNodes[b]),this.b_index--,h=null}},dhtmlXForm.prototype.getColumnNode=function(a,b){var c=null,d=null;if(a instanceof Array&&(d=a[1],a=a[0]),null!=a){var e=this._getParentForm(a,d);return null!=e&&(null!=e.item._list&&null!=e.item._list[0]&&null==c&&(c=e.item._list[0].getColumnNode(null,b)),e.form=e.item=null,e=null),c}return 0>b||b>this.cont.childNodes.length-1?null:this.cont.childNodes[b]},dhtmlXForm.prototype._removeItemsInColumn=function(a){for(var b=[],c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];null!=d._idd&&null!=d._type&&b.push([d._idd,"ra"==d._type?d._value:null]),d=null}for(var c=0;c<b.length;c++)this.removeItem(b[c][0],b[c][1])},dhtmlXForm.prototype._getParentForm=function(a,b){if(null!=this.itemPull[this.idPrefix+a])return{form:this,item:this.itemPull[this.idPrefix+a]};for(var c in this.itemPull)if("ra"==this.itemPull[c]._type&&this.itemPull[c]._group==a&&this.itemPull[c]._value==b)return{form:this,item:this.itemPull[c]};var d=null;for(var c in this.itemPull)if(!d&&null!=this.itemPull[c]._list)for(var e=0;e<this.itemPull[c]._list.length;e++)d||(d=this.itemPull[c]._list[e]._getParentForm(a,b));return d},function(){for(var a in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[a]._getItemNode||(dhtmlXForm.prototype.items[a]._getItemNode=function(a){return a})}(),dhtmlXForm.prototype._getItemNode=function(a,b){return null!=b&&(a=[a,b]),this.doWithItem(a,"_getItemNode")},dhtmlXForm.prototype.setRequired=function(a,b,c){"undefined"==typeof c?c=b:a=[a,b];var d=this._getItemNode(a);if(d){if(c=window.dhx4.s2b(c),d._required=1==c,d._required){d._validate||(d._validate=[]);for(var e=!1,f=0;f<d._validate.length;f++)e="NotEmpty"==d._validate[f]||e;e||d._validate.push("NotEmpty");var g=d.childNodes[d._ll?0:1].childNodes[0];if(!(g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0)){var h=document.createElement("SPAN");h.className="dhxform_item_required",h.innerHTML="*",g.appendChild(h),h=g=null}}else{if(null!=d._validate){var e=d._validate;d._validate=[];for(var f=0;f<e.length;f++)"NotEmpty"!=e[f]&&d._validate.push(e[f]);0==d._validate.length&&(d._validate=null)}var g=d.childNodes[d._ll?0:1].childNodes[0];g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0&&(g.removeChild(g.lastChild),g=null)}this._resetValidateCss(d),d=null}},dhtmlXForm.prototype.setNote=function(a,b,c){"undefined"==typeof c?c=b:a=[a,b];var d=this._getItemNode(a);if(d){var e=this._getNoteNode(d);e||(c.width||(c.width=d.childNodes[d._ll?1:0].childNodes[0].offsetWidth),e=document.createElement("DIV"),e.className="dhxform_note",{ch:1,ra:1}[d._type]?d.childNodes[d._ll?1:0].insertBefore(e,d.childNodes[d._ll?1:0].lastChild):d.childNodes[d._ll?1:0].appendChild(e)),e.innerHTML=c.text,null!=c.width&&(e.style.width=c.width+"px",e._w=c.width),e=null}},dhtmlXForm.prototype.clearNote=function(a,b){"undefined"!=typeof b&&(a=[a,b]);var c=this._getItemNode(a);if(c){var d=this._getNoteNode(c);null!=d&&(d.parentNode.removeChild(d),d=null)}},dhtmlXForm.prototype._getNoteNode=function(a){for(var b=null,c=0;c<a.childNodes[a._ll?1:0].childNodes.length;c++)String(a.childNodes[a._ll?1:0].childNodes[c].className).search(/dhxform_note/)>=0&&(b=a.childNodes[a._ll?1:0].childNodes[c]);return a=null,b},dhtmlXForm.prototype.setValidation=function(a,b,c){"undefined"==typeof note?c=b:a=[a,b];var d=this._getItemNode(a);if(d){if(null!=d._validate)for(var e=0;e<d._validate.length;e++)d._validate[e]=null;if(d._validate=[],d._validate="function"==typeof c||"function"==typeof window[c]?[c]:String(c).split(this.separator),d._required){for(var f=!1,e=0;e<d._validate.length;e++)f="NotEmpty"==d._validate[e]||f;f||d._validate.push("NotEmpty")}d=null}},dhtmlXForm.prototype.clearValidation=function(a,b){"undefined"!=typeof b&&(a=[a,b]);var c=this._getItemNode(a);if(c){if(null!=c._validate)for(var d=0;d<c._validate.length;d++)c._validate[d]=null;c._validate=c._required?["NotEmpty"]:null,c=null}},dhtmlXForm.prototype.reloadOptions=function(a,b){var c=this.getItemType(a);if({select:1,multiselect:1,combo:1}[c]){if("select"==c||"multiselect"==c){for(var d=this.getOptions(a);d.length>0;)d.remove(0);d.length=0,d=null,"string"==typeof b?this.doWithItem(a,"doLoadOptsConnector",b):b instanceof Array&&this.doWithItem(a,"doLoadOpts",{options:b})}if("combo"==c){var e=this.getCombo(a);if(e.clearAll(),e.setComboValue(""),"string"==typeof b)this.doWithItem(a,"doLoadOptsConnector",b);else if(b instanceof Array){for(var f=null,g=0;g<b.length;g++)window.dhx4.s2b(b[g].selected)&&(f=b[g].value);e.addOption(b),null!=f&&this.setItemValue(a,f),e=null}}}},dhtmlXForm.prototype.setTooltip=function(a,b,c){"undefined"==typeof c?c=b:a=[a,b];var d=this._getItemNode(a);if(d){var e=null;if(1==d.childNodes.length)e=d.childNodes[0];else for(var f=0;f<d.childNodes.length;f++)null!=d.childNodes[f].className&&d.childNodes[f].className.search("dhxform_label")>=0&&(e=d.childNodes[f]);null!=e&&(null==c||0==c.length?e.removeAttribute("title"):e.title=c),e=null}},dhtmlXForm.prototype.saveBackup=function(){return this._backup||(this._backup={},this._backupId=(new Date).getTime()),this._backup[++this._backupId]=this.getFormData(),this._backupId},dhtmlXForm.prototype.restoreBackup=function(a){null!=this._backup&&null!=this._backup[a]&&this.setFormData(this._backup[a])},dhtmlXForm.prototype.clearBackup=function(a){null!=this._backup&&null!=this._backup[a]&&(this._backup[a]=null,delete this._backup[a])},dhtmlXForm.prototype.items.combo={render:function(a,b){a._type="combo",a._enabled=!0,a._value=null,a._newValue=null,this.doAddLabel(a,b),this.doAddInput(a,b,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(a),this.doLoadOpts(a,b),a.onselectstart=function(){return!0},a.childNodes[a._ll?1:0].childNodes[0].setAttribute("mode",b.comboType||""),b.comboImagePath&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("imagePath",b.comboImagePath),b.comboDefaultImage&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("defaultImage",b.comboDefaultImage),b.comboDefaultImageDis&&a.childNodes[a._ll?1:0].childNodes[0].setAttribute("defaultImageDis",b.comboDefaultImageDis),a._combo=new dhtmlXComboFromSelect(a.childNodes[a._ll?1:0].childNodes[0]),a._combo.setSkin(a.getForm().skin),a._combo._currentComboValue=a._combo.getSelectedValue(),a._combo.getInput().id=b.uid;var c=this;return a._combo.attachEvent("onChange",function(){c.doOnChange(this)}),b.connector&&this.doLoadOptsConnector(a,b.connector),b.filtering?a._combo.enableFilteringMode(!0):b.serverFiltering&&a._combo.enableFilteringMode(!0,b.serverFiltering,b.filterCache,b.filterSubLoad),1==b.readonly&&this.setReadonly(a,!0),b.style&&(a._combo.DOMelem_input.style.cssText+=b.style),a._combo.attachEvent("onFocus",function(){var a=this.cont.parentNode.parentNode,b=a.getForm();"dhx_terrace"==b.skin&&this.cont.className.search(/combo_in_focus/)<0&&(this.cont.className+=" combo_in_focus"),b.callEvent("onFocus",[a._idd]),b=a=null}),a._combo.attachEvent("onBlur",function(){var a=this.cont.parentNode.parentNode,b=a.getForm();"dhx_terrace"==b.skin&&this.cont.className.search(/combo_in_focus/)>=0&&(this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")),b.callEvent("onBlur",[a._idd]),b=a=null}),this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null,a._combo._currentComboValue=null,a._combo.unload(),a._combo=null,a._apiChange=null,this.d2(a),a=null
},doAttachEvents:function(a){var b=this;a.childNodes[a._ll?1:0].childNodes[0].onchange=function(){b.doOnChange(this),b.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){a.getForm().hot_validate&&this._validate(a)},doOnChange:function(a){var b=a.base.parentNode.parentNode.parentNode;if(!b._apiChange){if(a._newComboValue=a.getSelectedValue(),a._newComboValue!=a._currentComboValue){if(b.checkEvent("onBeforeChange")&&b.callEvent("onBeforeChange",[b._idd,a._currentComboValue,a._newComboValue])!==!0)return window.setTimeout(function(){a.setComboValue(a._currentComboValue)},1),!1;a._currentComboValue=a._newComboValue,b.callEvent("onChange",[b._idd,a._currentComboValue])}b._autoCheck(b._enabled)}},doLoadOptsConnector:function(a,b){var c=this,d=a;a._connector_working=!0,a._apiChange=!0,a._combo.load(b,function(){d.callEvent("onOptionsLoaded",[d._idd]),d._connector_working=!1,null!=d._connector_value&&(c.setValue(d,d._connector_value),d._connector_value=null),d._apiChange=!1,c=d=null})},enable:function(a){String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a._enabled=!0,a._combo.enable()},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._enabled=!1,a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,b){return a._connector_working?void(a._connector_value=b):(a._apiChange=!0,a._combo.setComboValue(b),a._combo._currentComboValue=a._combo.getActualValue(),void(a._apiChange=!1))},getValue:function(a){return a._combo.getActualValue()},setWidth:function(a,b){a.childNodes[a._ll?1:0].childNodes[0].style.width=b+"px"},setReadonly:function(a,b){a._combo&&(a._combo_ro=b,a._combo.readonly(a._combo_ro))},isReadonly:function(a){return a._combo_ro||!1},setFocus:function(a){a._enabled&&a._combo.setFocus()},_setCss:function(a,b,c){a._combo.setFontSize(c,c)}},function(){for(var a in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1})dhtmlXForm.prototype.items.combo[a]=dhtmlXForm.prototype.items.select[a]}(),dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")},dhtmlXForm.prototype.items.calendar={render:function(a,b){var c=this;a._type="calendar",a._enabled=!0;var d=navigator.userAgent,e=d.indexOf("MSIE 6.0")>=0||d.indexOf("MSIE 7.0")>=0||d.indexOf("MSIE 8.0")>=0;this.doAddLabel(a,b),this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea calendar"),this.doAttachChangeLS(a),e&&(a.childNodes[a._ll?1:0].childNodes[0].onfocus2=a.childNodes[a._ll?1:0].childNodes[0].onfocus,a.childNodes[a._ll?1:0].childNodes[0].onfocus=function(){return 1==this._skipOnFocus?void(this._skipOnFocus=!1):void this.onfocus2.apply(this,arguments)}),a.childNodes[a._ll?1:0].childNodes[0]._idd=a._idd,a.childNodes[a._ll?1:0].childNodes[0].onblur=function(){var a=this.parentNode.parentNode;if(a._c.base._formMouseDown)return a._c.base._formMouseDown=!1,this._skipOnFocus=!0,this.focus(),this.value=this.value,a=null,!0;var b=a.getForm();b._ccDeactivate(a._idd),c.checkEnteredValue(this.parentNode.parentNode),b.live_validate&&c._validate(a),b.callEvent("onBlur",[a._idd]),b=a=null},a._f=b.dateFormat||null,a._f0=b.serverDateFormat||a._f;var f=a.getForm();return a._c=new dhtmlXCalendarObject(a.childNodes[a._ll?1:0].childNodes[0],b.skin||f.skin||"dhx_skyblue"),a._c._nullInInput=!0,a._c.enableListener(a.childNodes[a._ll?1:0].childNodes[0]),null!=a._f&&a._c.setDateFormat(a._f),window.dhx4.s2b(b.enableTime)||a._c.hideTime(),window.dhx4.s2b(b.showWeekNumbers)&&a._c.showWeekNumbers(),isNaN(b.weekStart)||a._c.setWeekStartDay(b.weekStart),"undefined"!=typeof b.calendarPosition&&a._c.setPosition(b.calendarPosition),null!=b.minutesInterval&&a._c.setMinutesInterval(b.minutesInterval),a._c._itemIdd=a._idd,a._c.attachEvent("onBeforeChange",function(b){if(a._value!=b){if(a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",[a._idd,a._value,b])!==!0)return!1;a._tempValue=a._value=b,c.setValue(a,b,!1),a.callEvent("onChange",[this._itemIdd,a._value])}return!0}),a._c.attachEvent("onClick",function(){a._tempValue=null}),e&&(a._c.base.onmousedown=function(){return this._formMouseDown=!0,!1}),this.setValue(a,b.value),f=null,this},getCalendar:function(a){return a._c},setSkin:function(a,b){a._c.setSkin(b)},setValue:function(a,b,c){b&&null!=b&&"undefined"!=typeof b&&""!=b?(a._value=b instanceof Date?b:a._c._strToDate(b,a._f0||a._c._dateFormat),a.childNodes[a._ll?1:0].childNodes[0].value=a._c._dateToStr(a._value,a._f||a._c._dateFormat)):(a._value=null,a.childNodes[a._ll?1:0].childNodes[0].value=""),c!==!1&&a._c.setDate(a._value)},getValue:function(a,b){var c=a._tempValue||a._c.getDate();return b===!0&&null==c?"":b===!0?a._c._dateToStr(c,a._f0||a._c._dateFormat):c},setDateFormat:function(a,b,c){a._f=b,a._f0=c||a._f,a._c.setDateFormat(a._f),this.setValue(a,this.getValue(a))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]),a._c.unload(),a._c=null;try{delete a._c}catch(b){}a._f=null;try{delete a._f}catch(b){}a._f0=null;try{delete a._f0}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null,a.childNodes[a._ll?1:0].childNodes[0].onblur=null,this.d2(a),a=null},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}},function(){for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.calendar[a]=dhtmlXForm.prototype.items.input[a]}(),dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS,dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")},dhtmlXForm.prototype.setCalendarDateFormat=function(a,b,c){this.doWithItem(a,"setDateFormat",b,c)},dhtmlXForm.prototype.items.btn2state={setChecked:function(a,b){a._checked=b===!0?!0:!1,a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0"),this.doCheckValue(a)}},function(){for(var a in dhtmlXForm.prototype.items.checkbox)dhtmlXForm.prototype.items.btn2state[a]||(dhtmlXForm.prototype.items.btn2state[a]=dhtmlXForm.prototype.items.checkbox[a])}(),dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render,dhtmlXForm.prototype.items.btn2state.render=function(a,b){return b._autoInputWidth=!1,this.render2(a,b),a._type="btn2state",a._cssName="undefined"==typeof b.cssName?"btn2state":b.cssName,a._updateImgNode=function(){},a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])},a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])},a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._idd])},this.setChecked(a,a._checked),this},dhtmlXForm.prototype.setFormData_btn2state=function(a,b){this[1==b||1==parseInt(b)||"true"==b||b==this.getItemValue(a)?"checkItem":"uncheckItem"](a)},dhtmlXForm.prototype.getFormData_btn2state=function(a){return this.isItemChecked(a)?this.getItemValue(a):0},dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(a,b){var c=this;a._type="colorpicker",a._enabled=!0,this.doAddLabel(a,b),this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea"),a._value=b.value||"",a.childNodes[a._ll?1:0].childNodes[0].value=a._value;var d={input:a.childNodes[a._ll?1:0].childNodes[0],custom_colors:1==window.dhx4.s2b(b.enableCustomColors),skin:a.getForm().skin};return this.colorpicker[a._idd]=new dhtmlXColorPicker(d),this.colorpicker[a._idd]._nodes[0].valueColor=null,this.colorpicker[a._idd].base.className+=" dhtmlxcp_in_form","undefined"!=typeof b.customColors&&this.colorpicker[a._idd].setCustomColors(b.customColors),this.colorpicker[a._idd].attachEvent("onSelect",function(b){if(a._value!=b){if(a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",[a._idd,a._value,b])!==!0)return void(a.childNodes[a._ll?1:0].childNodes[0].value=a._value);a._value=b,c.setValue(a,b),a.callEvent("onChange",[a._idd,a._value])}}),this.colorpicker[a._idd].attachEvent("onHide",function(){var b=a.childNodes[a._ll?1:0].childNodes[0];b.value!=a._value&&(b.value=a._value),b=null}),a.childNodes[a._ll?1:0].childNodes[0]._idd=a._idd,this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){this.colorpicker[a._idd].unload&&this.colorpicker[a._idd].unload(),this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null,this.d2(a),a=null},setSkin:function(a,b){this.colorpicker[a._idd].setSkin(b)}},function(){for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.colorpicker[a]=dhtmlXForm.prototype.items.input[a]}(),dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")},dhtmlXForm.prototype.items.container={render:function(a,b){return a._type="container",a._enabled=!0,this.doAddLabel(a,b),this.doAddInput(a,b,"DIV",null,!0,!0,"dhxform_container"),this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=!0,String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=!1,String(a.className).search("disabled")<0&&(a.className+=" disabled"),a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}},dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")},function(){for(var a in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.container[a]||(dhtmlXForm.prototype.items.container[a]=dhtmlXForm.prototype.items.input[a])}(),dhtmlXForm.prototype.items.editor={editor:{},render:function(a,b){!isNaN(b.rows);a._type="editor",a._enabled=!0,this.doAddLabel(a,b),this.doAddInput(a,b,"DIV",null,!0,!0,"dhxform_item_template"),a._value=b.value||"";var c=this;return this.editor[a._idd]=new dhtmlXEditor({parent:a.childNodes[a._ll?1:0].childNodes[0],content:a._value}),this.editor[a._idd].attachEvent("onAccess",function(b,d){if(a.callEvent("_onBeforeEditorAccess",[]),_dhxForm_doClick(document.body,"click"),"blur"==b){if(c.doOnBlur(a,this),a.callEvent("onBlur",[a._idd]),"dhx_terrace"==a.getForm().skin){var e=a.childNodes[a._ll?1:0].className;e.indexOf("dhxeditor_focus")>=0&&(a.childNodes[a._ll?1:0].className=e.replace(/\s{0,}dhxeditor_focus/gi,""))}}else if(a.callEvent("onEditorAccess",[a._idd,b,d,this,a.getForm()]),a.callEvent("onFocus",[a._idd]),"dhx_terrace"==a.getForm().skin){var e=a.childNodes[a._ll?1:0].className;-1==e.indexOf("dhxeditor_focus")&&(a.childNodes[a._ll?1:0].className+=" dhxeditor_focus")}}),this.editor[a._idd].attachEvent("onToolbarClick",function(b){a.callEvent("onEditorToolbarClick",[a._idd,b,this,a.getForm()])}),b.readonly&&this.setReadonly(a,!0),a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("for"),a.childNodes[a._ll?0:1].childNodes[0].onclick=function(){c.editor[a._idd]._focus()},this},doOnBlur:function(a,b){var c=b.getContent();if(a._value!=c){if(a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",[a._idd,a._value,c])!==!0)return void b.setContent(a._value);a._value=c,a.callEvent("onChange",[a._idd,c])}},setValue:function(a,b){a._value!=b&&(a._value=b,this.editor[a._idd].setContent(a._value))},getValue:function(a){return a._value=this.editor[a._idd].getContent(),a._value},enable:function(a){this.editor[a._idd].setReadonly(!1),this.doEn(a)},disable:function(a){this.editor[a._idd].setReadonly(!0),this.doDis(a)},setReadonly:function(a,b){this.editor[a._idd].setReadonly(b)},getEditor:function(a){return this.editor[a._idd]||null},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null,this.editor[a._idd].unload(),this.editor[a._idd]=null,this.d2(a),a=null},setFocus:function(a){this.editor[a._idd]._focus()}},function(){for(var a in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1})dhtmlXForm.prototype.items.editor[a]=dhtmlXForm.prototype.items.template[a]}(),dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable,dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable,dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")},dhtmlXForm.prototype.items.upload={render:function(a,b){a._type="up",a._enabled=!0,a._checked=!0,a.className=b.position+("string"==typeof b.className?" "+b.className:"");var c=document.createElement("DIV");return a.appendChild(c),isNaN(b.inputLeft)||(a.style.left=parseInt(b.inputLeft)+"px"),isNaN(b.inputTop)||(a.style.top=parseInt(b.inputTop)+"px"),"auto"!=b.inputWidth&&(isNaN(b.inputWidth)||(c.style.width=parseInt(b.inputWidth)+"px")),a._uploader=new dhtmlXFileUploader(c,b.swfPath||"",b.swfUrl||"",b.mode||null,b.swfLogs,b.slXap||"",b.slUrl||"",b.slLogs||"",b.multiple),a._uploader.setURL(b.url||""),a._uploader.callEvent=a.callEvent,"undefined"!=typeof b.autoStart&&a._uploader.setAutoStart(b.autoStart),"undefined"!=typeof b.autoRemove&&a._uploader.setAutoRemove(b.autoRemove),"undefined"!=typeof b.titleScreen&&a._uploader.enableTitleScreen(b.titleScreen),"undefined"!=typeof b.titleText&&a._uploader.setTitleText(b.titleText),1==b.hidden&&this.hide(a),1==b.disabled&&this.userDisable(a),"auto"!=b.inputHeight&&0/0!=parseInt(b.inputHeight)&&(a._uploader.p_files.style.height=parseInt(b.inputHeight)+"px"),this},destruct:function(a){for(this.doUnloadNestedLists(a),a._uploader.callEvent=null,a._uploader.unload(),a._uploader=null,a._checked=null,a._enabled=null,a._idd=null,a._type=null,a.onselectstart=null,a._autoCheck=null,a.callEvent=null,a.checkEvent=null,a.getForm=null;a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a),a=null},setText:function(){},getText:function(){},enable:function(a){a._enabled=!0,String(a.className).search("disabled")>=0&&(a.className=String(a.className).replace(/disabled/gi,"")),a._uploader.enable()},disable:function(a){a._enabled=!1,String(a.className).search("disabled")<0&&(a.className+=" disabled"),a._uploader.disable()},setWidth:function(a,b){a.childNodes[0].style.width=b+"px",a._width=b},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(a){var b=a._uploader.getData(),c={},d=0;for(var e in b)c[a._idd+"_r_"+d]=b[e].realName,c[a._idd+"_s_"+d]=b[e].serverName,d++;return c[a._idd+"_count"]=d,c},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}},function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.upload[a]=dhtmlXForm.prototype.items.checkbox[a]}(),dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")},dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")},dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")},dhtmlXFileUploader.prototype.html5=function(){},dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var a=this;this.buttons.browse.onclick=function(){a._enabled&&a.f.click()},this._progress_type="percentage";var b=window.navigator.userAgent;null!=b.match(/Windows/gi)&&null!=b.match(/AppleWebKit/gi)&&null!=b.match(/Safari/gi)&&(b.match(/Version\/5\.1\.5/gi)&&(this._upload_mp=!1),b.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this._upload_dnd=!1),b.match(/Version\/5\.1\.1/gi)&&(this._upload_mp=!1,this._upload_dnd=!1),b.match(/Version\/5\.1\.2/gi)&&(this._upload_dnd=!1),b.match(/Version\/5\.1\.7/gi)&&(this._upload_mp=!1)),this._addFileInput(),this._upload_dnd?(this.p.ondragenter=function(a){a.dataTransfer&&(a.stopPropagation(),a.preventDefault())},this.p.ondragover=function(a){a.dataTransfer&&(a.stopPropagation(),a.preventDefault())},this.p.ondrop=function(b){b.dataTransfer&&(b.stopPropagation(),b.preventDefault(),a._enabled&&a._parseFilesInInput(b.dataTransfer.files))},this._titleText="Drag-n-Drop files here or<br>click to select files for upload."):this._titleText="Click to select files for upload."},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var a=this;this.f=document.createElement("INPUT"),this.f.type="file",this._upload_mp&&(this.f.multiple="1"),this.f.className="dhx_uploader_input",this.p_controls.appendChild(this.f),this.f.onchange=function(){a._parseFilesInInput(this.files),window.dhx4.isOpera?a._addFileInput():this.value=""}},_doUploadFile:function(id){var that=this;this._loader||(this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(a){"uploading"==that._files[this._idd].state&&that._updateFileInList(this._idd,"uploading",Math.round(100*a.loaded/a.total))},this._loader.onload=function(e){dhx4.temp=null;try{eval("dhx4.temp="+this.responseText)}catch(e){}var r=dhx4.temp;dhx4.temp=null,"object"==typeof r&&null!=r&&"undefined"!=typeof r.state&&1==r.state?(that._onUploadSuccess(this.upload._idd,r.name,null,r.extra),r=null):that._onUploadFail(this.upload._idd,null!=r&&null!=r.extra?r.extra:null)},this._loader.onerror=function(){that._onUploadFail(this.upload._idd)},this._loader.onabort=function(){that._onUploadAbort(this.upload._idd)}),this._loader.upload._idd=id;var form=new FormData;form.append("file",this._files[id].file),this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5&dhxr"+(new Date).getTime(),!0),this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._loader.send(form)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(a){for(var b=0;b<a.length;b++)this._addFileToQueue(a[b])},_addFileToQueue:function(a){if(this._beforeAddFileToList(a.name,a.size)){var b=a._idd||window.dhx4.newId();this._files[b]={file:a,name:a.name,size:a.size,state:"added"},this._addFileToList(b,a.name,a.size,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(a){if(this._files[a]){var b=this._files[a].name,c=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;if(this.callEvent("onBeforeFileRemove",[b,c])===!0){var d=!1;this._uploading&&a==this._loader.upload._idd&&"uploading"==this._files[a].state&&(this._uploadStop(),d=!0),this._files[a].file=null,this._files[a].name=null,this._files[a].size=null,this._files[a].state=null,this._files[a]=null,delete this._files[a],this._removeFileFromList(a),this.callEvent("onFileRemove",[b,c]),d&&this._uploadStart()}}},_unloadEngine:function(){this.buttons.browse.onclick=null,this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null,this.p.ondragenter=null,this.p.ondragover=null,this.p.ondrop=null,this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader.upload._idd=null,this._loader=null),this._initEngine=null,this._doUploadFile=null,this._uploadStop=null,this._parseFilesInInput=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.html4=function(){},dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm(),this._progress_type="loader",this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this,b=window.dhx4.newId();this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+window.dhx4.newId(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>',this.fr=this.k.firstChild,window.navigator.userAgent.indexOf("MSIE")>=0?this.fr.onreadystatechange=function(){"complete"==this.readyState&&a._onLoad()}:this.fr.onload=function(){a._onLoad()});var c=document.createElement("DIV");c.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+b+"'><input type='file' name='file' class='dhx_file_input'></form>",this.k.appendChild(c),c.firstChild.lastChild._idd=b,c.firstChild.lastChild.onchange=function(){a._beforeAddFileToList(this.value,null)&&(a._addFileToQueue(this),this.onchange=null,this.parentNode.parentNode.style.display="none",a._addForm())},c=null},_onLoad:function(){if(this._uploading){dhx4.temp=null;try{eval("dhx4.temp="+this.fr.contentWindow.document.body.innerHTML)}catch(e){}var r=dhx4.temp;if(dhx4.temp=null,"object"==typeof r&&null!=r&&"undefined"!=typeof r.state){if("cancelled"==r.state)return this._onUploadAbort(this.fr._idd),void(r=null);if(1==r.state)return"undefined"==typeof r.size||isNaN(r.size)||(this._files[this.fr._idd].size=r.size),this._onUploadSuccess(this.fr._idd,r.name,null,r.extra),void(r=null)}this._onUploadFail(this.fr._idd,null!=r&&null!=r.extra?r.extra:null)}},_addFileToQueue:function(a){var b=a.value.match(/[^\\\/]*$/g);b=null!=b[0]?b[0]:a.value,this._files[a._idd]={name:b,form:a.parentNode,node:a.parentNode.parentNode,input:a,state:"added"},this._addFileToList(a._idd,a.value,!1,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a){var b=this._files[a].name,c=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;this.callEvent("onBeforeFileRemove",[b,c])===!0&&(this._files[a].input.onchange=null,this._files[a].form.removeChild(this._files[a].input),this._files[a].node.removeChild(this._files[a].form),this._files[a].node.parentNode.removeChild(this._files[a].node),this._files[a].input=null,this._files[a].name=null,this._files[a].form=null,this._files[a].node=null,this._files[a].size=null,this._files[a].state=null,this._files[a]=null,delete this._files[a],this._removeFileFromList(a),this.callEvent("onFileRemove",[b,c]))},_doUploadFile:function(a){this.fr._idd=a,this._files[a].form.action=this._url,this._files[a].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel&dhxr"+(new Date).getTime())},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null),this._initEngine=null,this._addForm=null,this._onLoad=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.flash=function(){},dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){window.dhtmlXFileUploaderSWFObjects||(window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(a,b,c){return window.dhtmlXFileUploaderSWFObjects.items[a].uploader[b].apply(window.dhtmlXFileUploaderSWFObjects.items[a].uploader,c)}});this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId(),this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime(),this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>",swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release,this._progress_type="percentage",window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,b){return this.callEvent("onBeforeFileAdd",[a,b])===!0},_addFileToQueue:function(a,b,c){if(window.dhx4.isIE){var d=document.createElement("INPUT");d.type="TEXT",d.style.position="absolute",d.style.left="0px",d.style.top=window.dhx4.absTop(this.buttons.browse)+"px",d.style.width="10px",document.body.appendChild(d),d.focus(),document.body.removeChild(d),d=null}this._files[a]={name:b,size:c,state:"added"},this._addFileToList(a,b,c,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a){if(this._files[a]){var b=this._files[a].name,c=null!=this._data&&null!=this._data[a]?this._data[a].serverName:null;if(this.callEvent("onBeforeFileRemove",[b,c])===!0){var d=!1;this._uploading&&"uploading"==this._files[a].state&&(this._uploadStop(),d=!0),swfobject.getObjectById(this._swf_obj_id).removeFileById(a),this._files[a].name=null,this._files[a].size=null,this._files[a].state=null,this._files[a]=null,delete this._files[a],this._removeFileFromList(a),this.callEvent("onFileRemove",[b,c]),d&&this._uploadStart()}}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(){for(var a in this._files)"uploading"==this._files[a].state&&swfobject.getObjectById(this._swf_obj_id).uploadStop(a)},_unloadEngine:function(){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]&&(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null,delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]),this._swf_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.sl=function(){},dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){"undefined"==typeof this._sl_v&&(this._sl_v=this.getSLVersion()),window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(a,b,c){window.dhtmlXFileUploaderSLObjects.items[a].uploader[b].apply(window.dhtmlXFileUploaderSLObjects.items[a].uploader,c)}}),this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId(),0!=this._sl_v?(this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'):(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title=""),this._progress_type="percentage",window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(a,b,c){this._files[a]={name:b,size:c,state:"added"},this._addFileToList(a,b,c,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(a){if(this._files[a]){var b=!1;this._uploading&&"uploading"==this._files[a].state&&(this._uploadStop(),b=!0),document.getElementById([this._sl_obj_id]).Content.a.removeFileById(a),this._files[a].name=null,this._files[a].size=null,this._files[a].state=null,this._files[a]=null,delete this._files[a],this._removeFileFromList(a),b&&this._uploadStart()}},_doUploadFile:function(a){document.getElementById(this._sl_obj_id).Content.a.upload(a,this._sl_upload_url,"&mode=sl&dhxr"+(new Date).getTime())},_uploadStop:function(){this._uploading=!1;for(var a in this._files)"uploading"==this._files[a].state&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(a)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]),this._sl_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a},dhtmlXFileUploader.prototype.getSLVersion=function(){var a=!1;if(window.dhx4.isIE)try{var b=new ActiveXObject("AgControl.AgControl");if(null!=b)for(var c=4,d=0;b.isVersionSupported([c,d].join("."));)a=[c,d],++d>9&&(c++,d=0);b=null}catch(e){}else null!=navigator.plugins["Silverlight Plug-In"]&&(a=navigator.plugins["Silverlight Plug-In"].description.split("."));return a},dhtmlXAccordionCell.prototype=new dhtmlXCellObject,dhtmlXAccordionCell.prototype._initHeader=function(){var a=document.createElement("DIV");a.className="dhx_cell_hdr",a.innerHTML="<div class='dhx_cell_hdr_text'></div><div class='dhx_cell_hdr_arrow'></div>",this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]),a=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx()},dhtmlXAccordionCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXAccordionCell.prototype.setText=function(a){this.conf.text=a,this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+a+"</span>"},dhtmlXAccordionCell.prototype.getText=function(){return this.conf.text},dhtmlXAccordionCell.prototype.setIcon=function(a){var b=this.cell.childNodes[this.conf.idx.hdr];if("dhx_cell_hdr_icon"!=b.firstChild.className){b.firstChild.className+=" dhx_cell_hdr_icon";var c=document.createElement("IMG");c.className="dhx_cell_hdr_icon",b.insertBefore(c,b.firstChild),c=null}b.firstChild.src=this.acc.conf.icons_path+a,b=null},dhtmlXAccordionCell.prototype.clearIcon=function(){var a=this.cell.childNodes[this.conf.idx.hdr];"dhx_cell_hdr_icon"==a.firstChild.className&&(a.removeChild(a.firstChild),a.firstChild.className=String(a.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,"")),a=null},dhtmlXAccordionCell.prototype._open=function(a){var b={};if(this.acc.conf.multi_mode){var c={};c[this._idd]=!0,b=this.acc._getDynData(c),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="open"}else b[this._idd]=this.conf.size.h;for(var d in b){null!=this.acc._openCache&&(this.acc._openCache[d]=!0);var e=this.acc.t[d].cell;e.cell.className=String(e.cell.className).replace(/\s{1,}dhx_cell_closed/gi,""),e.conf.opened=!0,e._trInitEv("open",a),e.conf.size.h=b[d],e.cell.style.height=e.conf.size.h+"px",e=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!0))},dhtmlXAccordionCell.prototype._close=function(a){var b={};if(this.acc.conf.multi_mode){var c={};c[this._idd]=!0,b=this.acc._getDynData(null,c),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="close"}else b[this._idd]=this._getHdrHeight();for(var d in b){var e=this.acc.t[d].cell;null!=this.acc._openCache&&(this.acc._openCache[d]=!0),d==this._idd?(e.cell.className+=" dhx_cell_closed",e.conf.opened=!1,e._trInitEv("close",a)):(e.conf.size.h=b[d],e._adjustCell(),e._trInitEv("open",a)),e.cell.style.height=b[d]+"px",e=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!1))},dhtmlXAccordionCell.prototype.isOpened=function(){return 1==this.conf.opened
},dhtmlXAccordionCell.prototype._trInitEv=function(a,b){0!=this.conf.tr.prop&&(this._trAttachEv(),this.cell._accObj||(this.cell._accObj=this.acc),b&&(this.cell.style[this.conf.tr.prop]=this.conf.tr["height_"+a]),this._cellSetOpacity(a,b))},dhtmlXAccordionCell.prototype._trAttachEv=function(){this.conf.tr.ev_attached||(this.cell._trProp=this.conf.tr.prop,this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!0)},dhtmlXAccordionCell.prototype._trDetachEv=function(){this.conf.tr.ev_attached&&(this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!1)},dhtmlXAccordionCell.prototype._trOnEnd=function(a){a.stopPropagation&&a.stopPropagation(),"height"==a.propertyName&&(this.style[this._trProp]="",this._accObj.conf.multi_mode&&(null!=this._accObj._openCache&&(this._accObj._openCache[this._accId]=!1),this._accObj._adjustOpened()),1==this._accObj.conf.on_active_click&&(this._accObj.conf.multi_mode?(this._accObj._callMainEvent("onActive",[this._accId,this._accObj.t[this._accId].cell.conf.opened]),this._accObj.conf.on_active_click=!1):(this._accObj._callMainEvent("onActive",[this._accObj.conf.on_active_id,!0]),this._accObj.conf.on_active_id=null,this._accObj.conf.on_active_click=!1)),this._accObj=null)},dhtmlXAccordionCell.prototype._cellSetOpacity=function(a,b){for(var c in this.conf.idx)1!={hdr:!0,pr1:!0,pr2:!0}[c]&&(b&&(this.cell.childNodes[this.conf.idx[c]].style[this.conf.tr.prop]=this.conf.tr["op_"+a]),this.cell.childNodes[this.conf.idx[c]].style.opacity=this.conf.tr["op_v_"+a])},dhtmlXAccordionCell.prototype._onActiveCall=function(a){0!=this.acc.conf.on_active_click&&(1==this.acc.conf.multi_mode?(this.acc._callMainEvent("onActive",[this._idd,this.conf.opened]),this.acc.conf.on_active_click=!1):1==a&&(this.acc._callMainEvent("onActive",[this._idd,!0]),this.acc.conf.on_active_click=!1))},dhtmlXAccordionCell.prototype.show=function(){if(!this.conf.visible){if(0==this.conf.docked)return void this.dock();this.cell.style.display="",this.conf.visible=!0,this.acc.conf.multi_mode||(this.acc.conf.hiden_count--,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc.conf.size_changed?(this.acc.setSizes(),this.acc.conf.size_changed=!1):this.acc._adjustOpened()}},dhtmlXAccordionCell.prototype.hide=function(){this.conf.visible&&(!this.acc.conf.multi_mode&&this.conf.opened&&(this._close(!1),this.acc.conf.last_opened=null),this.cell.style.display="none",this.conf.visible=!1,this.acc.conf.multi_mode||(this.acc.conf.hiden_count++,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc._adjustOpened())},dhtmlXAccordionCell.prototype.isVisible=function(){return 1==this.conf.visible},dhtmlXAccordionCell.prototype.setHeight=function(a){this.acc.conf.multi_mode&&("*"==a?this.conf.h_auto=!0:(this.conf.h_auto=!1,this.conf.size.h=a),this.conf.opened&&("*"!=a&&(this.cell.style.height=a+"px"),this.acc._adjustOpened()))},dhtmlXAccordionCell.prototype.moveOnTop=function(){this.cell.parentNode.firstChild!=this.cell&&(this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild),this.acc._updateCellsMargin())},dhtmlXAccordionCell.prototype._initDocking=function(){var a=this;this.dock=function(){if(null!=this.acc.dhxWins&&1!=this.conf.docked){var a=this.acc.dhxWins.window(this._idd);a.close(),this._attachFromCell(a),this.conf.docked=!0,this.show(),this.conf.dock_opened&&this.open(),a=null,this.acc._callMainEvent("onDock",[this._idd])}},this.undock=function(a,b,c,d){if(null!=this.acc.dhxWins&&0!=this.conf.docked){if(this.conf.dock_opened=this.conf.opened,null!=this.acc.dhxWins.window(this._idd)){var e=this.acc.dhxWins.window(this._idd);e.show()}else{null==a&&(a=20),null==b&&(b=20),null==c&&(c=320),null==d&&(d=200);var e=this.acc.dhxWins.createWindow(this._idd,a,b,c,d);e.button("close").hide(),e.addUserButton("dock",99,"Dock"),e.button("dock").show(),e.button("dock").attachEvent("onClick",this._doOnDockClick),e.setText(this.getText()),e.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=!1,this.hide(),e._attachFromCell(this),e=null,this.acc._callMainEvent("onUnDock",[this._idd])}},this._doOnDockClick=function(){a.dock()},this._doOnDockWinClose=function(a){return a.hide(),!1},this._unloadDocking=function(){a=null}},dhtmlXAccordion.prototype.enableDND=function(){if(0!=this.conf.multi_mode&&null==this._dnd){var a=this;this._dnd={tr_count:0,tr_items:{}},this._dndAttachEvent=function(a){var b=this.t[a].cell;1!=b.conf.dnd_inited&&("function"==typeof window.addEventListener?b.cell.childNodes[b.conf.idx.hdr].addEventListener("mousedown",this._dndOnMouseDown,!1):b.cell.childNodes[b.conf.idx.hdr].attachEvent("onmousedown",this._dndOnMouseDown),b.conf.dnd_inited=!0),b=null},this._dndDetachEvent=function(a){var b=this.t[a].cell;1==b.conf.dnd_inited&&("function"==typeof window.addEventListener?b.cell.childNodes[b.conf.idx.hdr].removeEventListener("mousedown",this._dndOnMouseDown,!1):b.cell.childNodes[b.conf.idx.hdr].detachEvent("onmousedown",this._dndOnMouseDown),b.conf.dnd_inited=!1),b=null},this._dndOnMouseDown=function(b){b=b||event,b.preventDefault&&b.preventDefault();for(var c=b.target||b.srcElement;null!=c&&c.parentNode!=a.base;)c=c.parentNode;null!=c&&a._dndDragStart(b,c),c=null},this._dndDragStart=function(a,b){if(1!=this._dnd.tr_waiting){this._dnd.dragObj=b,this._dnd.dy=a.clientY;for(var c=0,d=0;d<this._dnd.dragObj.parentNode.childNodes.length;d++)this._dnd.dragObj.parentNode.childNodes[d]._ind=d,this._dnd.dragObj.parentNode.childNodes[d]==this._dnd.dragObj?(this._dnd.dragObj._k0=c,d>0&&(this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first),c=0):c+=this._dnd.dragObj.parentNode.childNodes[d].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[d].style.marginTop);this._dnd.dragObj._k1=c,this._dnd.h=this._dnd.dragObj.offsetHeight,this._dnd.ofs=!1}},this._dndDoDrag=function(a){if(this._dnd.dragObj&&1!=this._dnd.tr_waiting){var b=a.clientY-this._dnd.dy;0==this._dnd.ofs&&Math.abs(b)>5&&(this._dnd.dragObj.className+=" acc_cell_dragged",this._dnd.ofs=!0),0>b?b<-this._dnd.dragObj._k0&&(b=-this._dnd.dragObj._k0):b>this._dnd.dragObj._k1&&(b=this._dnd.dragObj._k1),this._dnd.dragObj.style.top=b+"px";for(var c=a.clientY-this._dnd.dy,d=0,e=0,f=this._dnd.dragObj._ind+1;f<=this._dnd.dragObj.parentNode.lastChild._ind;f++){var g=this._dnd.dragObj.parentNode.childNodes[f].offsetHeight;c>d+2*g/3&&e++,d+=g}for(var h=this._dnd.dragObj.nextSibling,f=0;null!=h;)++f<=e&&null!=h?h._ontop||(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!1,parseInt(h.style.top||0),-this._dnd.h-this.ofs.m.between),h._ontop=!0):h._ontop&&(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!0,parseInt(h.style.top||0),0),h._ontop=!1),h=h.nextSibling;for(var c=this._dnd.dy-a.clientY,d=0,e=0,f=this._dnd.dragObj._ind-1;f>=this._dnd.dragObj.parentNode.firstChild._ind;f--){var g=this._dnd.dragObj.parentNode.childNodes[f].offsetHeight;c>d+2*g/3&&e++,d+=g}for(var h=this._dnd.dragObj.previousSibling,f=0;null!=h;)++f<=e&&null!=h?h._onbottom||(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!0,parseInt(h.style.top||0),this._dnd.h+this.ofs.m.between),h._onbottom=!0):h._onbottom&&(h._tm&&window.clearTimeout(h._tm),this._dndAnim(h,!1,parseInt(h.style.top),0),h._onbottom=!1),h=h.previousSibling}},this._dndDragStop=function(a,b){if(b);else if(this._dnd.tr_count>0)return void(this._dnd.tr_waiting=!0);if(this._dnd.dragObj){this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,""),this._dnd.dragObj.style.top="0px";for(var c=!1,d=0;d<this._dnd.dragObj.parentNode.childNodes.length;d++){var e=this._dnd.dragObj.parentNode.childNodes[d];e!=this._dnd.dragObj&&(e._tm&&window.clearTimeout(e._tm),e.style.top="0px",e._ontop&&(null!=e.nextSibling&&1!=e.nextSibling._ontop||!e.nextSibling)&&(c=e.nextSibling||null),e._onbottom&&(null!=e.previousSibling&&1!=e.previousSibling._onbottom||!e.previousSibling)&&(c=e)),e=null}for(var d=0;d<this._dnd.dragObj.parentNode.childNodes.length;d++)this._dnd.dragObj.parentNode.childNodes[d]._ontop=null,this._dnd.dragObj.parentNode.childNodes[d]._onbottom=null;c!==!1&&(null==c?this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj):this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,c));for(var f=this._dnd.dragObj._accId,g=this._dnd.dragObj._ind,h=g,d=0;d<this._dnd.dragObj.parentNode.childNodes.length;d++)this._dnd.dragObj.parentNode.childNodes[d]==this._dnd.dragObj&&(h=d);this._dnd.dragObj=null,this._dnd.tr_waiting=!1,this._updateCellsMargin(),g!=h&&(this.setSizes(),this.callEvent("onDrop",[f,g,h]))}},this._dndAnim=function(b,c,d,e){if(0!=this.conf.tr.prop)return b._dnd_ev||(b._dnd_ev=!0,b._dnd_tr_prop=this.conf.tr.prop,b.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1)),1!=this._dnd.tr_items[b._accId]&&(this._dnd.tr_items[b._accId]=!0,this._dnd.tr_count++),b.style[this.conf.tr.prop]=this.conf.tr.dnd_top,void(b.style.top=e+"px");var f=!1;c?(d+=5,d>=e&&(d=e,f=!0)):(d-=5,e>=d&&(d=e,f=!0)),b.style.top=d+"px",b._tm&&window.clearTimeout(b._tm),b._tm=f?null:window.setTimeout(function(){a._dndAnim(b,c,d,e)},5)},this._dndOnTrEnd=function(b){b.stopPropagation&&b.stopPropagation(),"top"==b.propertyName&&(1==a._dnd.tr_items[this._accId]&&(a._dnd.tr_count--,a._dnd.tr_items[this._accId]=!1),this.style[this._dnd_tr_prop]="",0==a._dnd.tr_count&&1==a._dnd.tr_waiting&&a._dndDragStop(null,!0))},this._dndOnMouseMove=function(b){a._dndDoDrag(b||event)},this._dndOnMouseUp=function(b){a._dndDragStop(b||event)},window.addEventListener?(document.body.addEventListener("mousemove",this._dndOnMouseMove,!1),document.body.addEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.attachEvent("onmouseup",this._dndOnMouseUp,!1)),this._dndClearCell=function(a){this.t[a].cell.cell._dnd_ev&&this.t[a].cell.cell.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1),this._dndDetachEvent(a)},this._unloadDND=function(){"function"==typeof window.addEventListener?(document.body.removeEventListener("mousemove",this._dndOnMouseMove,!1),document.body.removeEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.detachEvent("onmouseup",this._dndOnMouseUp,!1));for(var b in this)0==String(b).indexOf("_dnd")&&"function"==typeof this[b]&&(this[b]=null);this._dnd=null,a=null};for(var b in this.t)this._dndAttachEvent(b)}},dhtmlXLayoutObject.prototype.cells=function(a){for(var b in this.cdata){if(this.cdata[b].conf.name==a)return this.cdata[b];if("layout"==this.cdata[b].dataType&&1==this.cdata[b].dataNested&&null!=this.cdata[b].dataObj){var c=this.cdata[b].dataObj.cells(a);if(null!=c)return c}}return null},dhtmlXLayoutObject.prototype.forEachItem=function(a,b){if("function"==typeof a){"undefined"==typeof b&&(b=this);for(var c in this.cdata)"undefined"!=typeof this.cdata[c].conf.name&&a.apply(b,[this.cdata[c]]),"layout"==this.cdata[c].dataType&&1==this.cdata[c].dataNested&&null!=this.cdata[c].dataObj&&this.cdata[c].dataObj.forEachItem(a,b);b=null}},dhtmlXLayoutObject.prototype._forEachSep=function(a,b){if("function"==typeof a){"undefined"==typeof b&&(b=this),null!=this.sep&&a.apply(b,[this.sep]);for(var c in this.cdata)"layout"==this.cdata[c].dataType&&1==this.cdata[c].dataNested&&null!=this.cdata[c].dataObj&&this.cdata[c].dataObj._forEachSep(a,b);b=null}},dhtmlXLayoutObject.prototype.setOffsets=function(a){var b=!1;for(var c in a){var d=c.charAt(0);"undefined"==typeof this.conf.ofs[d]||isNaN(a[c])||(this.conf.ofs[d]=parseInt(a[c]),b=!0)}"function"==typeof this.setSizes&&1==b&&this.setSizes()},dhtmlXLayoutObject.prototype._detectSW=function(){if(null==dhtmlXLayoutObject.prototype._confGlob.sw&&(dhtmlXLayoutObject.prototype._confGlob.sw={}),null==dhtmlXLayoutObject.prototype._confGlob.sw[this.conf.skin]){var a=document.createElement("DIV");a.className="dhxlayout_sep_sw_"+this.conf.skin,null!=document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a),dhtmlXLayoutObject.prototype._confGlob.sw[this.conf.skin]=a.offsetWidth,document.body.removeChild(a),a=null}return dhtmlXLayoutObject.prototype._confGlob.sw[this.conf.skin]},dhtmlXLayoutObject.prototype._confGlob={},dhtmlXLayoutObject.prototype.attachHeader=function(a,b){null==this.dataNodes.haObj&&("object"!=typeof a&&(a=document.getElementById(a)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxlayout_hdr_attached",this.dataNodes.haObj.style.height=(b||a.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cdata.a.cell),this.dataNodes.haObj.appendChild(a),a.style.visibility="visible",a=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px",this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px",this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())},dhtmlXLayoutObject.prototype.detachHeader=function(){if(this.dataNodes.haObj){for(;this.dataNodes.haObj.childNodes.length>0;)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj),this.dataNodes.haObj=null,this.detachEvent(this.dataNodes.haEv),this.dataNodes.haEv=null,this.conf.ofs_nodes.t.haObj=!1,delete this.dataNodes.haEv,delete this.dataNodes.haObj,this.conf.unloading||this.setSizes()}},dhtmlXLayoutObject.prototype.attachFooter=function(a,b){if(null==this.dataNodes.faObj){"object"!=typeof a&&(a=document.getElementById(a)),this.dataNodes.faObj=document.createElement("DIV"),this.dataNodes.faObj.className="dhxlayout_ftr_attached",this.dataNodes.faObj.style.height=(b||a.offsetHeight)+"px";var c=this.dataNodes.sbObj||("1C"==this.conf.pattern?this.cdata.a:this.sep.sep);this.base.lastChild==c?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,c.nextSibling),this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px",this.dataNodes.faObj.style.bottom=this.conf.ofs.t+"px",this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.dataNodes.faObj.appendChild(a),a.style.visibility="visible",c=a=null,this.conf.ofs_nodes.b.faObj=!0,this.setSizes()}},dhtmlXLayoutObject.prototype.detachFooter=function(){if(this.dataNodes.faObj){for(;this.dataNodes.faObj.childNodes.length>0;)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj),this.dataNodes.faObj=null,this.detachEvent(this.dataNodes.faEv),this.dataNodes.faEv=null,this.conf.ofs_nodes.b.faObj=!1,delete this.dataNodes.faEv,delete this.dataNodes.faObj,this.conf.unloading||this.setSizes()}},dhtmlXLayoutObject.prototype.attachMenu=function(a){return null==this.dataNodes.menu?(this.dataNodes.menuObj=document.createElement("DIV"),this.dataNodes.menuObj.className="dhxlayout_menu",this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cdata.a.cell),("object"!=typeof a||null==a)&&(a={}),a.skin=this.conf.skin,a.parent=this.dataNodes.menuObj,this.dataNodes.menu=new dhtmlXMenuObject(a),this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.menuObj.style.display&&(this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(null!=this.dataNodes.haObj?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.t.menuObj=!0,this.setSizes(),a.parnt=null,a=null,this.dataNodes.menu):void 0},dhtmlXLayoutObject.prototype.detachMenu=function(){null!=this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.attachToolbar=function(a){return null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar?(this.dataNodes.toolbarObj=document.createElement("DIV"),this.dataNodes.toolbarObj.className="dhxlayout_toolbar",this.base.insertBefore(this.dataNodes.toolbarObj,this.cdata.a.cell),this.dataNodes.toolbarObj.appendChild(document.createElement("DIV")),("object"!=typeof a||null==a)&&(a={}),a.skin=this.conf.skin,a.parent=this.dataNodes.toolbarObj.firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(a),this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.toolbarObj.style.display&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()}),this.conf.ofs_nodes.t.toolbarObj=!0,this.setSizes(),a.parnt=null,a=null,this.dataNodes.toolbar):void 0},dhtmlXLayoutObject.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.attachRibbon=function(a){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.ribbonObj=document.createElement("DIV"),this.dataNodes.ribbonObj.className="dhxlayout_ribbon",this.base.insertBefore(this.dataNodes.ribbonObj,this.cdata.a.cell),this.dataNodes.ribbonObj.appendChild(document.createElement("DIV")),("object"!=typeof a||null==a)&&(a={}),a.skin=this.conf.skin,a.parent=this.dataNodes.ribbonObj.firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(a),this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.ribbonObj.style.display&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())}),this.conf.ofs_nodes.t.ribbonObj=!0;var b=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()}),this.setSizes(),a.parnt=null,a=null,this.dataNodes.ribbon}},dhtmlXLayoutObject.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.attachStatusBar=function(a){return this.dataNodes.sbObj?void 0:("undefined"==typeof a&&(a={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxlayout_statusbar",null!=this.dataNodes.faObj?this.base.insertBefore(this.dataNodes.sbObj,this.dataNodes.faObj):null==this.sep||this.base.lastChild==this.sep.sep?this.base.appendChild(this.dataNodes.sbObj):this.base.insertBefore(this.dataNodes.sbObj,this.sep.sep.nextSibling),this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+("string"==typeof a.text&&a.text.length>0?a.text:"&nbsp;")+"</div>","number"==typeof a.height&&(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"),this.dataNodes.sbObj.setText=function(a){this.childNodes[0].innerHTML=a},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.sbObj.style.display&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=(null!=this.dataNodes.faObj?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj)},dhtmlXLayoutObject.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.showMenu=function(){this._mtbShowHide("menuObj","")},dhtmlXLayoutObject.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")},dhtmlXLayoutObject.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")},dhtmlXLayoutObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")},dhtmlXLayoutObject.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")},dhtmlXLayoutObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")},dhtmlXLayoutObject.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")},dhtmlXLayoutObject.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")},dhtmlXLayoutObject.prototype._mtbShowHide=function(a,b){null!=this.dataNodes[a]&&(this.dataNodes[a].style.display=b,this.setSizes())},dhtmlXLayoutObject.prototype._mtbUnload=function(){this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachRibbon()},dhtmlXLayoutObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu},dhtmlXLayoutObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar},dhtmlXLayoutObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon},dhtmlXLayoutObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj},dhtmlXLayoutObject.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var a=document.createElement("DIV");a.className="dhxlayout_progress",this.base.appendChild(a);var b=document.createElement("DIV");b.className="dhxlayout_progress_img",this.base.appendChild(b),a=b=null}},dhtmlXLayoutObject.prototype.progressOff=function(){if(this.conf.progress){for(var a={dhxlayout_progress:!0,dhxlayout_progress_img:!0},b=0;b<this.base.childNodes.length;b++)"undefined"!=typeof this.base.childNodes[b].className&&1==a[this.base.childNodes[b].className]&&(a[this.base.childNodes[b].className]=this.base.childNodes[b]);for(var c in a)1!=a[c]&&this.base.removeChild(a[c]),a[c]=null;this.conf.progress=!1,a=null}},dhtmlXLayoutObject.prototype.listPatterns=function(){var a=[];for(var b in this.tplData)a.push(b);return a},dhtmlXLayoutObject.prototype.listAutoSizes=function(){var a=null!=this.conf.as_cells?this.conf.as_cells.h.join(";"):"",b=null!=this.conf.as_cells?this.conf.as_cells.v.join(";"):"",c=this._availAutoSize[this.conf.pattern].h,d=this._availAutoSize[this.conf.pattern].v;return[a,b,c,d]},dhtmlXLayoutObject.prototype._getCellsNames=function(a){var b={};if(null!=this.cdata[a].conf.name&&(b[this.cdata[a].conf.name]=!0),"layout"==this.cdata[a].dataType&&null!=this.cdata[a].dataObj&&this.cdata[a].dataObj.mainInst==this){var c=this.cdata[a].dataObj._getCellsNames("a"),d=this.cdata[a].dataObj._getCellsNames("b");for(var e in c)b[e]=c[e];for(var e in d)b[e]=d[e]}return b},dhtmlXLayoutObject.prototype.setAutoSize=function(a,b,c){if(c!==!0){var d=this.listAutoSizes();if(d[0]==a&&d[1]==b)return;for(var e=!1,f=!1,g=0;g<d[2].length;g++)e=e||d[2][g]==a;for(var g=0;g<d[3].length;g++)f=f||d[3][g]==b;if(!e||!f)return}this.conf.as_cells={h:a.split(";"),v:b.split(";")};var h="v"==this.conf.mode?"h":"v";for(var i in this.cdata){for(var j=this._getCellsNames(i),k=!1,g=0;g<this.conf.as_cells[h].length;g++)k=k||j[this.conf.as_cells[h][g]];k&&(this.conf.autosize=i),"layout"==this.cdata[i].dataType&&null!=this.cdata[i].dataObj&&this.cdata[i].dataObj.setAutoSize(a,b,!0)}},dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:.25,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:.2,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:.2,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:.25,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}},dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}},window.dhtmlXLayoutCell=function(a,b){dhtmlXCellObject.apply(this,[a,"_layout"]);
var c=this;if(this.layout=b,this.conf.skin=this.layout.conf.skin,this.conf.mode=this.layout.conf.mode,this.conf.collapsed=!1,this.conf.fixed={w:!1,h:!1},this.conf.docked=!0,this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null,this._unloadDocking(),this.layout=null,c=null}),this._hdrInit(),this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var a=c.layout._getMainInst();a._callMainEvent("onDblClick",[c.conf.name]),a=null},this.attachEvent("_onContentLoaded",function(){var a=this.layout._getMainInst();a._callMainEvent("onContentLoaded",[this.conf.name]),a=null}),"c"!=this.conf.mode){var d=document.createElement("DIV");d.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd,this.cell.childNodes[this.conf.idx.hdr].appendChild(d),d.onclick=function(){c.conf.collapsed?c.expand():c.collapse()},d=null}return this._initDocking(),this},dhtmlXLayoutCell.prototype=new dhtmlXCellObject,dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name},dhtmlXLayoutCell.prototype._initDocking=function(){var a=this;this.dock=function(){var a=this.layout._getMainInst();if(null==a.dhxWins||this.conf.docked)return void(a=null);var b=a.dhxWins.window(this.conf.name);b.close(),this._attachFromCell(b),this.conf.docked=!0,this.conf.dock_collapsed||this.expand(),a._callMainEvent("onDock",[this.conf.name]),a=b=null},this.undock=function(a,b,c,d){var e=this.layout._getMainInst();if(null==e.dhxWins||0==this.conf.docked)return void(e=null);if(this.conf.dock_collapsed=this.conf.collapsed,this.conf.collapsed||this.collapse(),null!=e.dhxWins.window(this.conf.name)){var f=e.dhxWins.window(this.conf.name);f.show()}else{null==a&&(a=20),null==b&&(b=20),null==c&&(c=320),null==d&&(d=200);var f=e.dhxWins.createWindow(this.conf.name,a,b,c,d);f.button("close").hide(),f.addUserButton("dock",99,"Dock"),f.button("dock").show(),f.button("dock").attachEvent("onClick",this._doOnDockClick),f.setText(this.getText()),f.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=!1,f._attachFromCell(this),e._callMainEvent("onUnDock",[this.conf.name]),e=f=null},this._doOnDockClick=function(){a.dock()},this._doOnDockWinClose=function(a){return a.hide(),!1},this._unloadDocking=function(){a=null}},dhtmlXLayoutCell.prototype._hdrInit=function(){var a="";window.dhx4.isIE?-1!=navigator.userAgent.indexOf("MSIE 8.0")?a=" dhx_cell_hdr_text_ie8":-1!=navigator.userAgent.indexOf("MSIE 7.0")?a=" dhx_cell_hdr_text_ie7":-1!=navigator.userAgent.indexOf("MSIE 6.0")&&(a=" dhx_cell_hdr_text_ie6"):window.dhx4.isChrome&&(a=" dhx_cell_hdr_text_chrome");var b=document.createElement("DIV");b.className="dhx_cell_hdr",b.innerHTML="<div class='dhx_cell_hdr_text"+a+"'></div>",this.cell.insertBefore(b,this.cell.childNodes[this.conf.idx.cont]),b=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx(),this.attachEvent("_onSetSize",this._hdrOnSetSize),this.attachEvent("_onBorderChange",this._hdrOnBorderChange),this.attachEvent("_onViewSave",this._hdrOnViewSave),this.attachEvent("_onViewRestore",this._hdrOnViewRestore)},dhtmlXLayoutCell.prototype.showHeader=function(a){this.conf.hdr.visible||this.conf.collapsed||this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()||(this.conf.hdr.w_saved=this.conf.hdr.h_saved=null,this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",a!==!0&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.hideHeader=function(a){this.conf.hdr.visible&&!this.conf.collapsed&&(this.conf.hdr.w_saved=this._getMinWidth(),this.conf.hdr.h_saved=this._getMinHeight(),this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder(),this._mtbUpdBorder(),a!==!0&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""},dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"},dhtmlXLayoutCell.prototype.isArrowVisible=function(){return""==this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display},dhtmlXLayoutCell.prototype.setText=function(a){this.conf.hdr.text=a,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text},dhtmlXLayoutCell.prototype.setCollapsedText=function(a){this.conf.hdr.text_collapsed=a,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getCollapsedText=function(){return null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text},dhtmlXLayoutCell.prototype._hdrUpdText=function(){var a=1==this.conf.collapsed&&null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text;this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+a+"</span>"},dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){1==this.conf.borders?this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden"):this.conf.hdr.visible||(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders")},dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){this.conf.collapsed&&"v"==this.conf.mode&&this._fitHdr()},dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(!0),this._hdrUpdBorder()},dhtmlXLayoutCell.prototype._hdrOnViewSave=function(a){this.views[a].hdr_vis=this.conf.hdr.visible},dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(a){this.conf.hdr.visible!=this.views[a].hdr_vis&&this[this.views[a].hdr_vis?"showHeader":"hideHeader"](!0),this.views[a].hdr_vis=null,delete this.views[a].hdr_vis},dhtmlXLayoutCell.prototype._getHdrHeight=function(a){return this.conf.collapsed&&"v"==this.conf.mode&&a!==!0?27:this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXLayoutCell.prototype._fitHdr=function(){this.conf.collapsed?("undefined"==typeof dhtmlXLayoutObject.prototype._confGlob.hdrColH&&(this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+"px",dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(this.cell.childNodes[this.conf.idx.hdr].style.height)-this._getHdrHeight(!0)),this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH+"px"):this.cell.childNodes[this.conf.idx.hdr].style.height=null},dhtmlXLayoutCell.prototype.expand=function(a){if(!this.conf.collapsed)return!0;var b=this.layout;if("v"==this.conf.mode){var c=a?b.conf.hh:b.cdata[b.conf.nextCell[this._idd]]._getMinWidth(this._idd),d=b.base.offsetWidth-b.conf.sw;if(c+this.conf.size.w_avl>d)return b=null,!1}else{var e=a?b.conf.hh:b.cdata[b.conf.nextCell[this._idd]]._getMinHeight(this._idd)+b.cdata[b.conf.nextCell[this._idd]]._getHdrHeight(),f=b.base.offsetHeight-b.conf.sw;if(e+this.conf.size.h_avl>f)return b=null,!1}if(0==this.conf.docked)return void this.dock();this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,""),this.conf.collapsed=!1,"v"==this.conf.mode?(this.conf.size.w=Math.min(d-c,this.conf.size.w_saved),this.conf.size.w_saved=this.conf.size.w_avl=null):(this.conf.size.h=Math.min(f-e,this.conf.size.h_saved),this.conf.size.h_saved=this.conf.size.h_avl=null),"v"==this.conf.mode&&this._fitHdr(),b.setSizes(b.conf.nextCell[this._idd],b.conf.nextCell[this._idd],1==a,"expand"),b.sep._blockSep(),b=null,this._hdrUpdText();var g=this.layout._getMainInst();return g._callMainEvent("onExpand",[this.conf.name]),g=null,!0},dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed)return!1;var a=this.layout;if(0==a.cdata[a.conf.nextCell[this._idd]].expand(!0))return!1;"v"==this.conf.mode?(this.conf.size.w_saved=this.conf.size.w,this.conf.size.w_avl=this._getMinWidth(this._idd)):(this.conf.size.h_saved=this.conf.size.h,this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()),this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode,this.conf.collapsed=!0,"v"==this.conf.mode?this.conf.size.w=a.conf.hh:this.conf.size.h=this._getHdrHeight(),a.setSizes(a.conf.nextCell[this._idd],a.conf.nextCell[this._idd],!1,"collapse"),a.sep._blockSep(),a=null,this._hdrUpdText();var b=this.layout._getMainInst();return b._callMainEvent("onCollapse",[this.conf.name]),b=null,!0},dhtmlXLayoutCell.prototype.isCollapsed=function(){return 1==this.conf.collapsed},dhtmlXLayoutCell.prototype._getMinWidth=function(a){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getMinWidth(a);if("v"==this.dataObj.conf.mode){var b=a;return this.dataObj.cdata[b].conf.collapsed&&(b=this.dataObj.conf.nextCell[b]),this.dataObj.cdata[b]._getMinWidth(a)+this.dataObj.cdata[this.dataObj.conf.nextCell[b]]._getWidth()+this.dataObj.conf.sw}return Math.max(this.dataObj.cdata.a._getMinWidth(a),this.dataObj.cdata.b._getMinWidth(a))}return 26},dhtmlXLayoutCell.prototype._getMinHeight=function(a){var b=26;if(null!=this.conf.idx.menu&&(b+=this.cell.childNodes[this.conf.idx.menu].offsetHeight),"layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getMinHeight(a);if("h"==this.dataObj.conf.mode){var c=a;return this.dataObj.cdata[c].conf.collapsed&&(c=this.dataObj.conf.nextCell[c]),this.dataObj.cdata[c]._getMinHeight(a)+this.dataObj.cdata[c]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[c]]._getHeight()+this.dataObj.conf.sw}return Math.max(this.dataObj.cdata.a._getMinHeight(a)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(a)+this.dataObj.cdata.b._getHdrHeight())}return b},dhtmlXLayoutCell.prototype._getAvailWidth=function(a){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailWidth(a);if("v"==this.dataObj.conf.mode){var b=1==this.dataObj.cdata.a.conf.collapsed,c=1==this.dataObj.cdata.b.conf.collapsed;return"a"==a?this.dataObj.cdata[c?"a":"b"]._getAvailWidth(a):this.dataObj.cdata[b?"b":"a"]._getAvailWidth(a)}return Math.min(this.dataObj.cdata.a._getAvailWidth(a),this.dataObj.cdata.b._getAvailWidth(a))}return this.cell.offsetWidth-this._getMinWidth()},dhtmlXLayoutCell.prototype._getAvailHeight=function(a){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailHeight(a);if("h"==this.dataObj.conf.mode){var b=1==this.dataObj.cdata.a.conf.collapsed,c=1==this.dataObj.cdata.b.conf.collapsed;return"a"==a?this.dataObj.cdata[c?"a":"b"]._getAvailHeight(a):this.dataObj.cdata[b?"b":"a"]._getAvailHeight(a)}return Math.min(this.dataObj.cdata.a._getAvailHeight(a),this.dataObj.cdata.b._getAvailHeight(a))}var d=this._getHdrHeight();return"v"==this.conf.mode&&this.conf.collapsed&&(d=this.conf.hh),this.cell.offsetHeight-d-this._getMinHeight()},dhtmlXLayoutCell.prototype.setWidth=function(a){if("v"==this.conf.mode){if(this.conf.collapsed)return;var b=this.layout,c=b.cdata[b.conf.nextCell[this._idd]];if(c.conf.collapsed)return a=a+b.conf.sw+c._getWidth(),void(f=b=c=null);var d=this._getMinWidth(this._idd),e=b.base.offsetWidth-c._getMinWidth(this._idd)-b.conf.sw;a=Math.max(d,Math.min(a,e)),this.conf.size.w=a,b.setSizes(c._idd,c._idd),b=c=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var f=this.layout.parentLayout,b=this.layout,c=b.cdata[b.conf.nextCell[this._idd]];for(var g in f.cdata)f.cdata[g].dataObj==b&&f.cdata[g].setWidth(a);f=b=null}},dhtmlXLayoutCell.prototype.setHeight=function(a){if("h"==this.conf.mode){if(this.conf.collapsed)return;var b=this.layout,c=b.cdata[b.conf.nextCell[this._idd]];if(c.conf.collapsed){a=a+b.conf.sw+c._getHeight();var d=null!=this.layout&&null!=this.layout.parentLayout?this.layout.parentLayout:null;if(null!=d)for(var e in d.cdata)d.cdata[e].dataObj==b&&d.cdata[e].setHeight(a);return void(d=b=c=null)}var f=this._getMinHeight(this._idd)+this._getHdrHeight(),g=b.base.offsetHeight-c._getMinHeight(this._idd)-c._getHdrHeight()-b.conf.sw;a=Math.max(f,Math.min(a,g)),this.conf.size.h=a,b.setSizes(c._idd,c._idd),b=c=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var d=this.layout.parentLayout,b=this.layout,c=b.cdata[b.conf.nextCell[this._idd]];for(var e in d.cdata)d.cdata[e].dataObj==b&&d.cdata[e].setHeight(a);d=b=null}},dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w},dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h},dhtmlXLayoutCell.prototype.fixSize=function(a,b){this.conf.fixed.w=window.dhx4.s2b(a),this.conf.fixed.h=window.dhx4.s2b(b);var c=this.layout._getMainInst(),d={};c.forEachItem(function(a){if(null!=a.conf.fsize){var b=(a.getId(),{h:1==a.conf.fixed.w,v:1==a.conf.fixed.h});for(var c in b)if(1==b[c]&&null!=a.conf.fsize[c]){a.conf.fsize[c]instanceof Array||(a.conf.fsize[c]=[a.conf.fsize[c]]);for(var e=0;e<a.conf.fsize[c].length;e++)d[a.conf.fsize[c][e]]=!0}}a=null}),c._forEachSep(function(a){a._lockSep(1==d[a.conf.idx]),a=null}),c=null},dhtmlXTabBar.prototype._fixTabsOfs=function(){},dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(a){return this.t[a]?this.t[a].cell:null},dhtmlXTabBar.prototype.getAllTabs=function(){var a=[];for(var b in this.t)a.push(b);return a},dhtmlXTabBar.prototype._setTabActive=function(a,b){this.t[a]&&this.t[a].conf.visible&&!this.t[a].conf.active&&("undefined"==typeof b&&(b=!0),(1!=b||this.callEvent("onSelect",[a,this.conf.lastActive])===!0)&&(this.setTabInActive(),this.t[a].conf.active=!0,this.conf.contZone&&(this.t[a].cell.cell.style.visibility="visible",this.t[a].cell.cell.style.top="0px",this.t[a].cell.cell.style.zIndex=1),this.t[a].tab.className=this._tabCss(a),this.conf.lastActive=a,this.setSizes()))},dhtmlXTabBar.prototype.setTabInActive=function(){this.conf.lastActive&&this.t[this.conf.lastActive]&&(this.t[this.conf.lastActive].conf.active=!1,this.conf.contZone&&(this.t[this.conf.lastActive].cell.cell.style.visibility="hidden",this.t[this.conf.lastActive].cell.cell.style.top="-5000px",this.t[this.conf.lastActive].cell.cell.style.zIndex=0),this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive),this.conf.lastActive=null)},dhtmlXTabBar.prototype._isTabActive=function(a){return a==this.conf.lastActive&&null!=this.conf.lastActive},dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive},dhtmlXTabBar.prototype.goToNextTab=function(){var a=this._getNextVisible(this.conf.lastActive,!0);null!=a&&this._setTabActive(a)},dhtmlXTabBar.prototype.goToPrevTab=function(){var a=this._getPrevVisible(this.conf.lastActive,!0);null!=a&&this._setTabActive(a)},dhtmlXTabBar.prototype._enableTab=function(a,b){this.t[a]&&!this.t[a].conf.enabled&&(this.t[a].conf.enabled=!0,this.t[a].tab.className=this._tabCss(a),1==b&&this._setTabActive(a))},dhtmlXTabBar.prototype._disableTab=function(a,b){this.t[a]&&this.t[a].conf.enabled&&(this.t[a].conf.enabled=!1,this.t[a].tab.className=this._tabCss(a),b!==!1&&this.conf.lastActive==a&&(1==b&&(b=this._getNextVisible(a)||this._getPrevVisible(a)),this._setTabActive(b)))},dhtmlXTabBar.prototype._isTabEnabled=function(a){return null!=this.t[a]&&1==this.t[a].conf.enabled},dhtmlXTabBar.prototype._setTabText=function(a,b,c){if(this.t[a]){var d=!1;("undefined"==typeof c||null==c)&&(c=this._getLabelWidth(b,this.t[a].conf.close),d=!0),this.t[a].tab.style.width=c+"px",this.t[a].tab.childNodes[0].innerHTML=b,this.t[a].conf.text=b,this.t[a].conf.width=c,this.t[a].conf.autowidth=d}},dhtmlXTabBar.prototype._getTabText=function(a){return this.t[a]?this.t[a].conf.text:null},dhtmlXTabBar.prototype._removeTab=function(a,b,c){if(this.t[a]){if(1!=c&&1!=this.t[a].conf.remove)return this.t[a].conf.remove=!0,void this._hideTab(a,b);"undefined"==typeof b&&(b=!0);var d=this._getNextVisible(a),e=this._getPrevVisible(a);1==this.t[a].conf.transEv&&(this.t[a].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd),this.t[a].conf.transEv=!1);for(var f in this.t[a].conf)this.t[a].conf[f]=null;if(this.t[a].conf=null,delete this.t[a].conf,this.t[a].cell._unload(),this.t[a].cell=null,this.t[a].tab.parentNode.removeChild(this.t[a].tab),this.t[a].tab=null,this.t[a]=null,delete this.t[a],this.conf.lastActive==a&&0!=b){this.conf.lastActive=null;var g=1==b?d||e||this._getFirstVisible():b;null!=g&&this._setTabActive(g)}else 1!=c&&this._adjustTabs()}},dhtmlXTabBar.prototype.clearAll=function(){for(var a in this.t)this._removeTab(a,!1,!0);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},dhtmlXTabBar.prototype.moveTab=function(a,b){if(this.t[a]&&!(0>b)){b+=1;var c=this.tabsArea.childNodes[1].firstChild;c.childNodes[b]!=this.t[a].tab&&(c.removeChild(this.t[a].tab),b>=c.childNodes.length?c.appendChild(this.t[a].tab):c.insertBefore(this.t[a].tab,c.childNodes[b])),c=null}},dhtmlXTabBar.prototype._getIndex=function(a){for(var b=-1,c=this.tabsArea.childNodes[1].firstChild,d=1;d<c.childNodes.length;d++)c.childNodes[d]._tabId==a&&(b=d-1);return c=null,b},dhtmlXTabBar.prototype.getNumberOfTabs=function(a){var b=0;for(var c in this.t)b+=1!=a?1:1==this.t[c].conf.visible?1:0;return b},dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(a){for(var b in this.t)a.apply(window,[this.t[b].cell])},dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFullScreenResize()},window.dhtmlXTabBarCell=function(a,b){dhtmlXCellObject.apply(this,[a,"_tabbar"]),this.tabbar=b,this.conf.skin=this.tabbar.conf.skin,this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"},this._tabbarCall=function(a){return function(){for(var b=[this._idd],c=0;c<arguments.length;c++)b.push(arguments[c]);return this.tabbar[a].apply(this.tabbar,b)}};for(var c in this.conf.tabbar_funcs)this[c]=this._tabbarCall(this.conf.tabbar_funcs[c]);this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var a in this.conf.tabbar_funcs)this[a]=null,this.conf.tabbar_funcs[a]=null;this.conf.tabbar_funcs=null}),this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments),this.tabbar._callMainEvent("onTabContentLoaded",arguments)}),this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)})},window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject,"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.attachEvent("onload",dhtmlXTabBarInitFromHTML),dhtmlXTabBar.prototype.enableContextMenu=function(a){if(a){this.cMenu=a;var b=this;this.tabsArea.oncontextmenu=function(a){a=a||event;for(var c=a.target||a.srcElement;null!=c;){if("undefined"!=typeof c._tabId)return b.rightClickTabId=c._tabId,b._doContClick(a||window.event,c,!0);null!=c&&(c=c.parentNode,c==this&&(c=null))}},this.tabsArea.onmousedown=function(a){return b._doContClick(a||window.event,null)}}},dhtmlXTabBar.prototype._doContClick=function(a,b,c){if(a.cancelBubble=!0,!c&&2!=a.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;if(!b)return!0;var d=b._tabId;if(this._acMenu=this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[d]))return!0;if(this._acMenu.showContextMenu){var e=window.document.documentElement,f=window.document.body,g=new Array(e.scrollLeft||f.scrollLeft,e.scrollTop||f.scrollTop);if(_isIE)var h=a.clientX+g[0],i=a.clientY+g[1];else var h=a.pageX,i=a.pageY;this._acMenu.showContextMenu(h-1,i-1),this.contextID=d,a.cancelBubble=!0,this._acMenu._skip_hide=!0}else this.contextID=d,b.contextMenuId=d,b.contextMenu=this._acMenu,b.a=this._acMenu._contextStart,b.a(b,a),b.a=null;return!1}return!0},dhtmlXWindows.prototype.forEachWindow=function(a){for(var b in this.w)a.apply(window,[this.w[b].cell])},dhtmlXWindows.prototype.window=function(a){return null!=this.w[a]?this.w[a].cell:null},dhtmlXWindows.prototype.isWindow=function(a){return null!=this.w[a]},dhtmlXWindows.prototype.findByText=function(a){var b=[];for(var c in this.w)this.w[c].cell.getText().indexOf(String(a))>=0&&b.push(this.w[c]);return b},dhtmlXWindows.prototype.setSkin=function(a){if(a!=this.conf.skin){null!=this.vp&&(this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+a));for(var b in this.w)this.w[b].cell._resetSizeState(),this._winAdjustCell(b),this._winAdjustTitle(b);this.conf.skin=a}},dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(!1)},dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(!0)},dhtmlXWindows.prototype._getTopBottomWin=function(a){var b=null;for(var c in this.w)if(this.w[c].conf.visible){var d=!1;null!=b&&(d=b.z>this.w[c].win.style.zIndex,a&&(d=!d)),(null==b||d)&&(b={id:c,z:this.w[c].win.style.zIndex})}return b?b.id:null},dhtmlXWindows.prototype._winMakeActive=function(a,b){if(null==a||b===!0||1!=this.w[a].conf.actv){for(var c=[],d=[{name:"modal",value:!0},{name:"sticked",value:!0},{name:"sticked",value:!1}],e={},f=0;f<d.length;f++){var g=d[f].name,h=d[f].value,i=[];for(var j in this.w){var k=this.w[j];null==e[j]&&k.conf[g]===h&&1==k.conf.visible&&a!=j&&(window.dhx4.zim.clear(k.conf.z_id),i.push([j,Number(k.win.style.zIndex)]),e[j]=!0),k=null}if(i.sort(function(a,b){return a[1]<b[1]?1:-1}),null!=a&&this.w[a].conf[g]===h&&null==e[a]){window.dhx4.zim.clear(this.w[a].conf.z_id);var l=[[a,Number(this.w[a].win.style.zIndex)]];i=l.concat(i),e[a]=!0}c=c.concat(i)}for(var f=c.length-1;f>=0;f--){var j=c[f][0],k=this.w[j];if(k.win.style.zIndex=window.dhx4.zim.reserve(k.conf.z_id),k.conf.modal&&null!=this.mcover)for(var m in this.mcover)this.mcover[m].style.zIndex=k.win.style.zIndex;this._winAdjustFRMZIndex(j),null==a&&0==f&&(a=j),k.conf.actv=a==j,k.win.className=k.conf.actv?"dhxwin_active":"dhxwin_inactive",k=null}null!=a&&this.conf.last_active!=a&&this._callMainEvent("onFocus",a),this.conf.last_active=a}},dhtmlXWindows.prototype.attachViewportTo=function(a){if(this.conf.vp_custom){for(;this.vp.childNodes.length>0;)this.vp.removeChild(this.vp.lastChild);this.vp.parentNode.removeChild(this.vp),this.vp=null}else null!=this.vp&&(this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),""));if(null==a)this.vp=null;else{this.vp="string"==typeof a?document.getElementById(a):a,this.vp.className+=" dhxwins_vp_"+this.conf.skin,a=null;for(var b in this.w)this.vp.appendChild(this.w[b].win);this.conf.vp_custom=!1}this.vp==document.body&&(document.body.style.position="static")},dhtmlXWindows.prototype.setViewport=function(a,b,c,d,e){var f=document.createElement("DIV");f.style.position="absolute",f.style.left=a+"px",f.style.top=b+"px",f.style.width=c+"px",f.style.height=d+"px","undefined"==typeof e||null==e?e=document.body:"string"==typeof e&&(e=document.getElementById(e)),e.appendChild(f),this.attachViewportTo(f),this.conf.vp_custom=!0,e=f=null},dhtmlXWindows.prototype._winSetPosition=function(a,b,c){var d=this.w[a];d.conf.maxed&&(d.conf.lastMX+=b-d.conf.x,d.conf.lastMY+=c-d.conf.y),d.conf.x=b,d.conf.y=c,d.win.style.left=d.conf.x+"px",d.win.style.top=d.conf.y+"px",this._winAdjustFRMPosition(a),d=null},dhtmlXWindows.prototype._winAdjustPosition=function(a,b,c){var d=this.w[a];"undefined"==typeof b&&(b=d.conf.x),"undefined"==typeof c&&(c=d.conf.y);var e=d.conf.keep_in_vp?0:-d.conf.w+this.conf.vp_pos_ofs,f=d.conf.keep_in_vp?this.vp.clientWidth-d.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs;e>b?b=e:b>f&&(b=f);var g=d.conf.keep_in_vp?this.vp.clientHeight-d.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs;0>c?c=0:c>g&&(c=g),(b!=d.conf.x||c!=d.conf.y)&&this._winSetPosition(a,b,c),d=null},dhtmlXWindows.prototype._winSetSize=function(a,b,c,d,e){var f=this.w[a],g=null!=b?b:f.conf.w,h=null!=c?c:f.conf.h;null==this.conf.ofs_w&&(f.win.style.width=g+"px",f.win.style.height=h+"px",this.conf.ofs_w=f.win.offsetWidth-g,this.conf.ofs_h=f.win.offsetHeight-h),null!=f.conf.min_w&&g<f.conf.min_w&&(g=f.conf.min_w),null!=f.conf.max_w&&g>f.conf.max_w&&(g=f.conf.max_w),!f.conf.parked&&null!=f.conf.min_h&&h<f.conf.min_h&&(h=f.conf.min_h),null!=f.conf.max_h&&h>f.conf.max_h&&(h=f.conf.max_h),f.conf.keep_in_vp&&(g>this.vp.clientWidth&&(g=this.vp.clientWidth),h>this.vp.clientHeight&&(h=this.vp.clientHeight)),f.win.style.width=g-this.conf.ofs_w+"px",f.win.style.height=h-this.conf.ofs_h+"px",f.conf.w=g,f.conf.h=h,this._winAdjustFRMSize(a),e&&this._winAdjustPosition(a,f.conf.x,f.conf.y),f.conf.parked||1==d||this._winAdjustCell(a),f=null},dhtmlXWindows.prototype._winMinmax=function(a,b){if(("undefined"==typeof b||this.w[a].conf.maxed!=b)&&0!=this.w[a].conf.allow_resize){var c=this.w[a];if(c.conf.parked&&this._winPark(a,!1),c.conf.maxed)this._winSetSize(a,c.conf.lastMW,c.conf.lastMH),this._winAdjustPosition(a,c.conf.lastMX,c.conf.lastMY),c.conf.maxed=!1;else{var d=0,e=0;null!=c.conf.max_w&&(d=c.conf.x+Math.round(c.conf.w-c.conf.max_w)/2),null!=c.conf.max_h&&(e=Math.max(c.conf.y+Math.round(c.conf.h-c.conf.max_h)/2,0)),c.conf.lastMX=c.conf.x,c.conf.lastMY=c.conf.y,c.conf.lastMW=c.conf.w,c.conf.lastMH=c.conf.h,this._winSetSize(a,this.vp.clientWidth,this.vp.clientHeight),this._winAdjustPosition(a,d,e),c.conf.maxed=!0}c.b.minmax.setCss(c.conf.maxed?"minmaxed":"minmax"),c.conf.maxed?this._callMainEvent("onMaximize",a):this._callMainEvent("onMinimize",a),c=null}},dhtmlXWindows.prototype._winShow=function(a,b){1!=this.w[a].conf.visible&&(this.w[a].win.style.display="",this.w[a].conf.visible=!0,(1==b||null==this.conf.last_active)&&this._winMakeActive(a,!0),this._callMainEvent("onShow",a))},dhtmlXWindows.prototype._winHide=function(a){0!=this.w[a].conf.visible&&(this.w[a].win.style.display="none",this.w[a].conf.visible=!1,this.w[a].conf.actv&&(this.w[a].conf.actv=!1,this.w[a].win.className="dhxwin_inactive",this._winMakeActive(null,!0)),this._callMainEvent("onHide",a))},dhtmlXWindows.prototype._winPark=function(a,b){if(0!=this.w[a].conf.allow_park&&0!=this.w[a].conf.header){var c=this.w[a];1==b&&this.conf.tr.prop!==!1&&(c.win.style[this.conf.tr.prop]=this.conf.tr[c.conf.parked?"height_open":"height_close"],c.conf.tr_ev||(c.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,!1),c.conf.tr_ev=!0)),c.conf.parked?(c.hdr.className=String(c.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,""),c.hdr.style.zIndex=0,c.conf.parked=!1,c.conf.tr_mode="park",this._winCellSetOpacity(a,"open",b),this._winSetSize(a,c.conf.w,c.conf.lastPH,1==b&&this.conf.tr.prop!==!1),(1!=b||this.conf.tr.prop===!1)&&(this._callMainEvent("onParkDown",a),c.conf.keep_in_vp&&this._winAdjustPosition(a,c.conf.x,c.conf.y))):(c.conf.lastPH=c.conf.h,c.hdr.className+=" dhxwin_hdr_parked",(0==b||0==this.conf.tr.prop)&&(c.hdr.style.zIndex=3),c.conf.parked=!0,c.conf.tr_mode="park",this._winCellSetOpacity(a,"close",b),this._winSetSize(a,c.conf.w,c.hdr.offsetHeight+this.conf.ofs_h,1==b&&this.conf.tr.prop!==!1),(1!=b||this.conf.tr.prop===!1)&&this._callMainEvent("onParkUp",a)),c=null}},dhtmlXWindows.prototype._winCellSetOpacity=function(a,b,c){var d=this.w[a].cell;for(var e in d.conf.idx)1!={pr1:!0,pr2:!0}[e]&&(1==c&&0!=this.conf.tr.prop&&(d.cell.childNodes[d.conf.idx[e]].style[this.conf.tr.prop]=this.conf.tr["op_"+b]),d.cell.childNodes[d.conf.idx[e]].style.opacity=this.conf.tr["op_v_"+b]);d=null},dhtmlXWindows.prototype._winCellClearOpacity=function(a){var b=this.w[a].cell;for(var c in b.conf.idx)1!={pr1:!0,pr2:!0}[c]&&0!=this.conf.tr.prop&&(b.cell.childNodes[b.conf.idx[c]].style[this.conf.tr.prop]="");b=null},dhtmlXWindows.prototype._winStick=function(a,b){("undefined"==typeof b||this.w[a].conf.sticked!=b)&&(this.w[a].conf.sticked=!this.w[a].conf.sticked,this.w[a].b.stick.setCss(this.w[a].conf.sticked?"sticked":"stick"),this._winMakeActive(this.conf.last_active,!0),this.w[a].conf.sticked?this._callMainEvent("onStick",a):this._callMainEvent("onUnStick",a))},dhtmlXWindows.prototype._winClose=function(a){if(this._callMainEvent("onClose",a)===!0||1==this.conf.unloading){var b=this.w[a];b.conf.fs_mode&&b.cell.setToFullScreen(!1),b.conf.modal&&this._winSetModal(a,!1),window.dhx4.zim.clear(b.conf.z_id),null!=this.cm&&null!=this.cm.icon[a]&&this._detachContextMenu("icon",a,null),"function"==typeof window.addEventListener?(b.win.removeEventListener("mousedown",this._winOnMouseDown,!1),this.conf.dblclick_ev&&b.win.removeEventListener("dblclick",this._winOnMouseDown,!1)):(b.win.detachEvent("onmousedown",this._winOnMouseDown),this.conf.dblclick_ev&&b.win.attachEvent("ondblclick",this._winOnMouseDown));for(var c in b.b)this._winRemoveButton(a,c,!0);b.b=null,b.cell._unload(),b.cell=null,b.brd.parentNode.removeChild(b.brd),b.brd=null,null!=b.fr_cover&&(b.fr_cover.parentNode.removeChild(b.fr_cover),b.fr_cover=null),null!=b.fr_m_cover&&(b.fr_m_cover.parentNode.removeChild(b.fr_m_cover),b.fr_m_cover=null),b.hdr._isWinHdr=!0,b.hdr.firstChild._isWinIcon=!0,b.hdr.onselectstart=null,b.hdr.parentNode.removeChild(b.hdr),b.hdr=null;for(var c in b.conf)b.conf[c]=null,delete b.conf[c];b.conf=null,b.win._idd=null,b.win._isWindow=null,b.win.parentNode.removeChild(b.win),b.win=null,b=null,this.w[a]=null,delete this.w[a],this.conf.unloading||this._winMakeActive(null,!0)}},dhtmlXWindows.prototype._winSetModal=function(a,b,c){if(this.w[a].conf.modal!=b){"undefined"==typeof c&&(c=!0);var d=this.w[a];if(1==b&&0==d.conf.modal){if(null!=this.conf.last_modal&&this._winSetModal(this.conf.last_modal,!1,!1),null==this.mcover){var e=document.createElement("DIV");e.className="dhxwins_mcover",this.vp.insertBefore(e,d.fr_m_cover||d.win),this.mcover={d:e},this.conf.fr_cover&&(this.mcover.f=document.createElement("IFRAME"),this.mcover.f.className="dhxwins_mcover",this.mcover.f.border=0,this.mcover.f.frameBorder=0,this.vp.insertBefore(this.mcover.f,e)),e=null}else this.mcover.d.nextSibling!=(d.fr_m_cover||d.win)&&(this.vp.insertBefore(this.mcover.d,d.fr_m_cover||d.win),null!=this.mcover.f&&this.vp.insertBefore(this.mcover.f,this.mcover.d));d.conf.modal=!0,this.conf.last_modal=a,this._winMakeActive(a,!0)}else if(0==b&&1==d.conf.modal&&(d.conf.modal=!1,this.conf.last_modal=null,c&&null!=this.mcover)){for(var f in this.mcover)this.vp.removeChild(this.mcover[f]),this.mcover[f]=null;this.mcover=null}d=null}},dhtmlXWindows.prototype._winMouseDownHandler=function(a,b){var c=a.target||a.srcElement;if(!(a.button>=2)){if("button"==b.mode)if("mousedown"==b.press_type)this.conf.button_last=b.button_name;else if("mouseup"==b.press_type&&b.button_name==this.conf.button_last&&(this.conf.button_last=null,this._winButtonClick(b.id,b.button_name,a)!==!0))return;if(("mousedown"==b.press_type||"dblclick"==b.press_type)&&"hdr"==b.mode){if(this.conf.dblclick_active=!1,1==this.conf.dblclick_ev)"dblclick"==b.press_type&&(this.conf.dblclick_active=!0);else if(null==this.conf.dblclick_last)this.conf.dblclick_last=(new Date).getTime(),this.dblclick_id=b.id;else{var c=(new Date).getTime();this.conf.dblclick_last+this.conf.dblclick_tm>c&&this.dblclick_id==b.id?(this.conf.dblclick_active=!0,this.conf.dblclick_last=null,this.dblclick_id=null):(this.conf.dblclick_last=c,this.dblclick_id=b.id)}if(this.conf.dblclick_active)return void this._winDoHeaderDblClick(b.id)}"mousedown"==b.press_type&&this._winMakeActive(b.id)}},dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){return"minmax"==this.conf.dblclick_mode?void this._winMinmax(a):"park"==this.conf.dblclick_mode?void this._winPark(a,!0):"function"==typeof this.conf.dblclick_mode?void this.conf.dblclick_mode.apply(window,[a]):"function"==typeof window[this.conf.dblclick_mode]?void window[this.conf.dblclick_mode].apply(window,[a]):void 0},dhtmlXWindows.prototype._winAdjustCell=function(a){var b=this.w[a],c=1,d=b.conf.header?b.hdr.offsetHeight:1,e=b.win.clientWidth-2,f=b.win.clientHeight-d-1;
b.brd.style.left=c+"px",b.brd.style.top=d+"px",null==b.conf.brd&&(b.brd.style.width=e+"px",b.brd.style.height=f+"px",b.conf.brd={w:e-b.brd.offsetWidth,h:f-b.brd.offsetHeight}),b.brd.style.width=e+b.conf.brd.w+"px",b.brd.style.height=f+b.conf.brd.h+"px";var g=5,h=1+g,i=b.conf.header?d:d+g,j=b.brd.clientWidth,k=b.brd.clientHeight;b.cell._setSize(h,i,j,k),b.fr_cover.style.left=h+"px",b.fr_cover.style.top=i+"px",b.fr_cover.style.width=j+"px",b.fr_cover.style.height=k+"px",b=null},dhtmlXWindows.prototype._winAdjustTitle=function(a){var b=this.w[a].hdr.childNodes[0],c=this.w[a].hdr.childNodes[1],d=this.w[a].hdr.childNodes[2];c.style.paddingLeft=b.offsetWidth+12+"px",c.style.paddingRight=d.offsetWidth+10+"px",c=d=b=null},dhtmlXWindows.prototype._callMainEvent=function(a,b){var c=this.w[b];if(c.cell.checkEvent(a))var d=c.cell._callMainEvent(a,[c.cell]);else var d=this.callEvent(a,[c.cell]);return c=null,d},dhtmlXWindows.prototype._winInitFRM=function(a){if(1==this.conf.fr_cover){var b=this.w[a],c=document.createElement("IFRAME");c.className="dhxwin_main_fr_cover",c.border=0,c.frameBorder=0,c.style.zIndex=b.win.style.zIndex,b.win.parentNode.insertBefore(c,b.win),b.fr_m_cover=c,c=null}},dhtmlXWindows.prototype._winAdjustFRMSize=function(a){var b=this.w[a];null!=b.fr_m_cover&&(b.fr_m_cover.style.width=b.conf.w+"px",b.fr_m_cover.style.height=b.conf.h+"px"),b=null},dhtmlXWindows.prototype._winAdjustFRMPosition=function(a){var b=this.w[a];null!=b.fr_m_cover&&(b.fr_m_cover.style.left=b.win.style.left,b.fr_m_cover.style.top=b.win.style.top),b=null},dhtmlXWindows.prototype._winAdjustFRMZIndex=function(a){var b=this.w[a];null!=b.fr_m_cover&&(b.fr_m_cover.style.zIndex=b.win.style.zIndex),b=null},dhtmlXWindowsCell.prototype=new dhtmlXCellObject,dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].conf.text=a,this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a},dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text},dhtmlXWindowsCell.prototype.fixed=function(){this.wins.w[this._idd].win.style.position="fixed"},dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=!0},dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=!1},dhtmlXWindowsCell.prototype.isMovable=function(){return 1==this.wins.w[this._idd].conf.allow_move},dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=!0,this.wins.w[this._idd].b.minmax.enable()},dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=!1,this.wins.w[this._idd].b.minmax.disable()},dhtmlXWindowsCell.prototype.isResizable=function(){return 1==this.wins.w[this._idd].conf.allow_resize},dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,!0)},dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,!1)},dhtmlXWindowsCell.prototype.isMaximized=function(){return 1==this.wins.w[this._idd].conf.maxed},dhtmlXWindowsCell.prototype.setPosition=function(a,b){this.wins._winSetPosition(this._idd,a,b)},dhtmlXWindowsCell.prototype.getPosition=function(){var a=this.wins.w[this._idd],b=[a.conf.x,a.conf.y];return a=null,b},dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)},dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,!0)},dhtmlXWindowsCell.prototype.isParked=function(){return 1==this.wins.w[this._idd].conf.parked},dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=!0,this.wins.w[this._idd].b.park.enable()},dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=!1,this.wins.w[this._idd].b.park.disable()},dhtmlXWindowsCell.prototype.isParkable=function(){return 1==this.wins.w[this._idd].conf.allow_park},dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))},dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)},dhtmlXWindowsCell.prototype.isHidden=function(){return 1!=this.wins.w[this._idd].conf.visible},dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,!0)},dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,!1)},dhtmlXWindowsCell.prototype.isSticked=function(){return 1==this.wins.w[this._idd].conf.sticked},dhtmlXWindowsCell.prototype.setDimension=function(a,b){var c=this.wins.w[this._idd];c.conf.parked&&this.wins._winPark(this._idd,!1),c.conf.maxed?(null!=a&&(c.conf.lastMW=a),null!=b&&(c.conf.lastMH=b),this.wins._winMinmax(this._idd)):this.wins._winSetSize(this._idd,a,b,!1,!0),c=null},dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd],b=[a.conf.w,a.conf.h];return a=null,b},dhtmlXWindowsCell.prototype.setMinDimension=function(a,b){var c=this.wins.w[this._idd];c.conf.min_w=a,c.conf.min_h=b,this.wins._winSetSize(this._idd,c.conf.w,c.conf.h),c=null},dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd],b=[a.conf.min_w,a.conf.min_h];return a=null,b},dhtmlXWindowsCell.prototype.setMaxDimension=function(a,b){var c=this.wins.w[this._idd];c.conf.max_w=a,c.conf.max_h=b,this.wins._winSetSize(this._idd,c.conf.w,c.conf.h),c=null},dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd],b=[a.conf.max_w,a.conf.max_h];return a=null,b},dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(a)},dhtmlXWindowsCell.prototype.center=function(){var a=this.wins.vp,b=this.wins.w[this._idd],c=Math.round((a.clientWidth-b.conf.w)/2),d=Math.round((a.clientHeight-b.conf.h)/2);this.wins._winSetPosition(this._idd,c,d),a=b=null},dhtmlXWindowsCell.prototype.centerOnScreen=function(){for(var a=this.wins.w[this._idd],b=window.dhx4.screenDim(),c=window.dhx4.absLeft(this.wins.vp),e=window.dhx4.absTop(this.wins.vp),f=this.wins.vp.parentNode;null!=f;)f.scrollLeft&&(c-=f.scrollLeft),f.scrollTop&&(e-=f.scrollTop),f=f.parentNode;var g=Math.round((b.right-b.left-a.conf.w)/2),h=Math.round((b.bottom-b.top-a.conf.h)/2);this.wins._winAdjustPosition(this._idd,g-c,h-e),d=a=null},dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,!0)},dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active;window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id),this.wins.w[this._idd].win.style.zIndex=0,this.wins._winMakeActive(a,!0)},dhtmlXWindowsCell.prototype.isOnTop=function(){return 1==this.wins.w[this._idd].conf.actv},dhtmlXWindowsCell.prototype.isOnBottom=function(){var a={id:null,z:+1/0};for(var b in this.wins.w)this.wins.w[b].conf.visible&&this.wins.w[b].win.style.zIndex<a.z&&(a.id=b,a.z=this.wins.w[b].win.style.zIndex);return a.id==this._idd},dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];0==a.conf.header&&(a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!0,this.wins._winAdjustCell(this._idd)),a=null},dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];1==a.conf.header&&(a.conf.parked&&this.wins._winPark(this._idd,!1),a.hdr.className+=" dhxwin_hdr_hidden",a.brd.className+=" dhxwin_hdr_hidden",this.conf.cells_cont=null,a.conf.brd=null,a.conf.header=!1,this.wins._winAdjustCell(this._idd)),a=null},dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))},dhtmlXWindowsCell.prototype.isModal=function(){return 1==this.wins.w[this._idd].conf.modal},dhtmlXWindowsCell.prototype._adjustByCont=function(a,b){a+=this.wins.w[this._idd].conf.w-this.conf.size.w,b+=this.wins.w[this._idd].conf.h-this.conf.size.h,this.wins._winSetSize(this._idd,a,b)},dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)},dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+a,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.setToFullScreen=function(a){a=window.dhx4.s2b(a);var b=this.wins.w[this._idd];return b.conf.fs_mode==a?void(b=null):(null==this.wins.fsn&&(this.wins.fsn=document.createElement("DIV"),this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs",document.body.appendChild(this.wins.fsn)),a?(this.wins.fsn.appendChild(b.win),this.maximize(),this.hideHeader()):(this.wins.vp.appendChild(b.win),this.minimize(),this.showHeader(),0==this.wins.fsn.childNodes.length&&(this.wins.fsn.parentNode.removeChild(this.wins.fsn),this.wins.fsn=null)),b.conf.fs_mode=a,void(b=null))},dhtmlXWindowsCell.prototype.button=function(a){return("minmax1"==a||"minmax2"==a)&&(a="minmax"),this.wins.w[this._idd].b[a]},dhtmlXWindowsCell.prototype.addUserButton=function(a,b,c){var d=new dhtmlXWindowsButton(this.wins,this._idd,a,c,!0),e=null,f=this.wins.w[this._idd].hdr.lastChild;isNaN(b)?b=0:0>b&&(b=0),null!=f.childNodes[b]&&(e=f.childNodes[b]),null!=e?f.insertBefore(d.button,e):f.appendChild(d.button),this.wins.w[this._idd].b[a]=d,d=e=f=null,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.removeUserButton=function(a){null!=this.wins.w[this._idd].b[a]&&1==this.wins.w[this._idd].b[a].conf.custom&&this.wins._winRemoveButton(this._idd,a)},window.dhtmlXWindowsButton=function(a,b,c,d){return this.conf={wins:a,winId:b,name:c,enabled:!0,visible:!0,custom:!0},this.button=document.createElement("DIV"),this.button._buttonName=c,this.button.title=d,this.enable=function(){this.conf.enabled=!0,this.setCss(this.conf.css)},this.disable=function(){this.conf.enabled=!1,this.setCss(this.conf.css)},this.isEnabled=function(){return 1==this.conf.enabled},this.show=function(){this.button.style.display="",this.conf.visible=!0,this.conf.wins._winAdjustTitle(this.conf.winId)},this.hide=function(){this.button.style.display="none",this.conf.visible=!1,this.conf.wins._winAdjustTitle(this.conf.winId)},this.isHidden=function(){return 0==this.conf.visible},this.setCss=function(a){this.conf.css=a;var b=this.conf.enabled?"":"_dis";this.button.className="dhxwin_button"+b+" dhxwin_button_"+this.conf.css+b},this._doOnClick=function(){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])},this.unload=function(a){dhx4._eventable(this,"clear"),this.button._buttonName=null,this.button.parentNode.removeChild(this.button),null!=this.conf.wins.cm&&null!=this.conf.wins.cm.button[this.conf.winId]&&null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]&&this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name),this.button=null,this.enable=null,this.disable=null,this.isEnabled=null,this.show=null,this.hide=null,this.isHidden=null,this.setCss=null,this.unload=null,1!=a&&this.conf.wins._winAdjustTitle(this.conf.winId),this.conf.wins=null,this.conf.winId=null,this.conf=null},this.setCss(c),dhx4._eventable(this),this},dhtmlXWindows.prototype._winButtonClick=function(a,b){if(!this.w[a].b[b].isEnabled())return!0;if(this.w[a].b[b]._doOnClick()===!0)return"help"==b&&this._callMainEvent("onHelp",a),"park"==b&&this._winPark(a,!0),"minmax"==b&&this._winMinmax(a),"stick"==b?(this._winStick(a),!1):"close"==b?(this._winClose(a),!1):!0},dhtmlXWindows.prototype._winRemoveButton=function(a,b,c){this.w[a].b[b].unload(c),this.w[a].b[b]=null,delete this.w[a].b[b]},dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this._dndOnMouseDown=function(b,c){if(!a.conf.dblclick_active){b.preventDefault?b.preventDefault():b.returnValue=!1,a.conf.dnd={id:c,x:b.clientX,y:b.clientY,ready:!0,css:!1,tr:null,mode:"def",moved:!1},a.w[c].conf.keep_in_vp?(a.conf.dnd.minX=0,a.conf.dnd.maxX=a.vp.clientWidth-a.w[c].conf.w,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.w[c].conf.h):(a.conf.dnd.minX=-a.w[c].conf.w+a.conf.vp_pos_ofs,a.conf.dnd.maxX=a.vp.clientWidth-a.conf.vp_pos_ofs,a.conf.dnd.minY=0,a.conf.dnd.maxY=a.vp.clientHeight-a.conf.vp_pos_ofs);for(var d=["MozTransform","WebkitTransform","OTransform","msTransform","transform"],e=0;e<d.length;e++)null!=document.documentElement.style[d[e]]&&null==a.conf.dnd.tr&&(a.conf.dnd.tr=d[e],a.conf.dnd.mode="tr");"tr"==a.conf.dnd.mode&&(a.w[c].win.style[a.conf.dnd.tr]="translate(0px,0px)"),a._dndInitEvents()}},this._dndOnMouseMove=function(b){b=b||event,b.preventDefault?b.preventDefault():b.returnValue=!1;var c=a.conf.dnd,d=a.w[c.id];c.css||(d.win.className+=" dhxwin_dnd",d.fr_cover.className+=" dhxwin_fr_cover_dnd",a.vp.className+=" dhxwins_vp_dnd",c.css=!0);var e=b.clientX-c.x,f=b.clientY-c.y;c.newX=d.conf.x+e,c.newY=d.conf.y+f,"tr"==c.mode?(c.newX=Math.min(Math.max(c.newX,c.minX),c.maxX),e=c.newX-d.conf.x,c.newY=Math.min(Math.max(c.newY,c.minY),c.maxY),f=c.newY-d.conf.y,d.win.style[c.tr]="translate("+e+"px,"+f+"px)"):(c.newX<c.minX||c.newX>c.maxX?c.newX=Math.min(Math.max(c.newX,c.minX),c.maxX):c.x=b.clientX,c.newY<c.minY||c.newY>c.maxY?c.newY=Math.min(Math.max(c.newY,c.minY),c.maxY):c.y=b.clientY,a._winSetPosition(c.id,c.newX,c.newY)),c.moved=!0,d=c=null},this._dndOnMouseUp=function(){if(null!=a.conf.dnd){var b=a.conf.dnd,c=a.w[b.id];null!=b.newX&&"tr"==b.mode&&(a._winSetPosition(b.id,b.newX,b.newY),c.win.style[b.tr]="translate(0px,0px)"),b.css&&(c.win.className=String(c.win.className).replace(/\s{0,}dhxwin_dnd/gi,""),c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,""),a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")),a._dndUnloadEvents(),b.moved&&a._callMainEvent("onMoveFinish",b.id),c=b=a.conf.dnd=null}},this._dndOnSelectStart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid),this.conf.dnd_evid=null,this._dndOnMouseDown=null,this._dndOnMouseMove=null,this._dndOnMouseUp=null,this._dndOnSelectStart=null,this._dndInitEvents=null,this._dndUnloadEvents=null,this._dndInitModule=null,this._dndUnloadModule=null,a=null},this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(a,b){return a.button>=2||"hdr"!=b.mode||"mousedown"!=a.type||1!=this.w[b.id].conf.allow_move||this.w[b.id].conf.maxed&&null==this.w[b.id].conf.max_w&&null==this.w[b.id].conf.max_h?void 0:(a.preventDefault?a.preventDefault():a.returnValue=!1,this._dndOnMouseDown(a,b.id),!1)})},dhtmlXWindowsCell.prototype._initResize=function(){var a=this,b=navigator.userAgent;this.conf.resize={b_width:6,c_type:b.indexOf("MSIE 10.0")>0||b.indexOf("MSIE 9.0")>0||b.indexOf("MSIE 8.0")>0||b.indexOf("MSIE 7.0")>0||b.indexOf("MSIE 6.0")>0},this._rOnCellMouseMove=function(b){if(1==a.wins.conf.resize_actv||0==a.wins.w[a._idd].conf.allow_resize||1==a.conf.progress||1==a.wins.w[a._idd].conf.maxed||1==a.wins.w[a._idd].conf.fs_mode){var c=a.wins.w[a._idd].brd;return"default"!=c.style.cursor&&(c.style.cursor="default"),void(c=null)}b=b||event;var d=a.wins.w[a._idd].brd,e=a.conf.resize,f=0==a.wins.w[a._idd].conf.header,g=b.clientX,h=b.clientY,i=window.dhx4.absLeft(d),j=window.dhx4.absTop(d),k="";g<=i+e.b_width?k="w":g>=i+d.offsetWidth-e.b_width&&(k="e"),h>=j+d.offsetHeight-e.b_width?k="s"+k:f&&h<=j+e.b_width&&(k="n"+k),""==k&&(k=!1),e.mode!=k&&(e.mode=k,d.style.cursor=0==k?"default":k+"-resize"),d=e=null},this._rOnCellMouseDown=function(b){if(0!=a.conf.resize.mode&&1!=a.conf.progress&&0!=a.wins.w[a._idd].conf.allow_resize&&1!=a.wins.w[a._idd].conf.fs_mode){b.preventDefault?b.preventDefault():b.returnValue=!1;var c=a.wins.w[a._idd],d=a.conf.resize;if(a.wins.conf.resize_actv=!0,d.min_w=c.conf.min_w,d.min_h=c.conf.min_h,d.max_w=c.conf.max_w||+1/0,d.max_h=c.conf.max_h||+1/0,"layout"==c.cell.dataType&&null!=c.cell.dataObj&&"function"==typeof c.cell.dataObj._getWindowMinDimension){var e=c.cell.dataObj._getWindowMinDimension(c.cell);d.min_w=Math.max(e.w,d.min_w),d.min_h=Math.max(e.h,d.min_h)}d.vp_l=a.wins.conf.vp_pos_ofs,d.vp_r=a.wins.vp.clientWidth-a.wins.conf.vp_pos_ofs,d.vp_b=a.wins.vp.clientHeight-a.wins.conf.vp_pos_ofs,d.x=b.clientX,d.y=b.clientY,"function"==typeof window.addEventListener?(window.addEventListener("mousemove",a._rOnWinMouseMove,!1),window.addEventListener("mouseup",a._rOnWinMouseUp,!1),window.addEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.attachEvent("onmousemove",a._rOnWinMouseMove),document.body.attachEvent("onmouseup",a._rOnWinMouseUp),document.body.attachEvent("onselectstart",a._rOnSelectStart)),d.resized=!1,d.vp_cursor=a.wins.vp.style.cursor,a.wins.vp.style.cursor=d.mode+"-resize",c=d=null}},this._rOnWinMouseMove=function(b){b=b||event;var c=a.wins.w[a._idd],d=a.conf.resize;d.resized||(c.fr_cover.className+=" dhxwin_fr_cover_resize",d.resized=!0);var e=b.clientX-d.x,f=b.clientY-d.y;d.mode.indexOf("e")>=0?(d.rw=Math.min(Math.max(c.conf.w+e,d.min_w),d.max_w),d.rx=null,c.conf.x+d.rw<d.vp_l?d.rw=d.vp_l-c.conf.x:c.conf.x+d.rw>a.wins.vp.clientWidth&&(d.rw=a.wins.vp.clientWidth-c.conf.x)):d.mode.indexOf("w")>=0&&(d.rw=Math.min(Math.max(c.conf.w-e,d.min_w),d.max_w),d.rx=c.conf.x+c.conf.w-d.rw,d.rx<0?(d.rw=d.rw+d.rx,d.rx=0):d.rx>d.vp_r&&(d.rw=d.rw-d.vp_r,d.rx=d.vp_r)),d.mode.indexOf("s")>=0?(d.rh=Math.min(Math.max(c.conf.h+f,d.min_h),d.max_h),d.ry=null,c.conf.y+d.rh>a.wins.vp.clientHeight&&(d.rh=a.wins.vp.clientHeight-c.conf.y)):d.mode.indexOf("n")>=0&&(d.rh=Math.min(Math.max(c.conf.h-f,d.min_h),d.max_h),d.ry=c.conf.y+c.conf.h-d.rh,d.ry<0?(d.rh=d.rh+d.ry,d.ry=0):d.ry>d.vp_b&&(d.rh=d.rh-d.vp_b,d.ry=d.vp_b)),a._rAdjustSizer(),c=d=null},this._rOnWinMouseUp=function(){var b=a.conf.resize,c=a.wins.w[a._idd];a.wins.conf.resize_actv=!1,a.wins.vp.style.cursor=b.vp_cursor,c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,""),b.resized&&(a.wins._winSetSize(a._idd,b.rw,b.rh),null==b.rx&&(b.rx=c.conf.x),null==b.ry&&(b.ry=c.conf.y),(b.rx!=c.conf.x||b.ry!=c.conf.y)&&a.wins._winSetPosition(a._idd,b.rx,b.ry)),null!=b.obj&&(b.obj.parentNode.removeChild(b.obj),b.obj=null),null!=b.objFR&&(b.objFR.parentNode.removeChild(b.objFR),b.objFR=null),"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",a._rOnWinMouseMove,!1),window.removeEventListener("mouseup",a._rOnWinMouseUp,!1),window.removeEventListener("selectstart",a._rOnSelectStart,!1)):(document.body.detachEvent("onmousemove",a._rOnWinMouseMove),document.body.detachEvent("onmouseup",a._rOnWinMouseUp),document.body.detachEvent("onselectstart",a._rOnSelectStart)),b.resized&&("layout"==a.dataType&&null!=a.dataObj&&a.dataObj.callEvent("onResize",[]),a.wins._callMainEvent("onResizeFinish",a._idd)),b.mode="",c=b=null},this._rOnSelectStart=function(a){return a=a||event,a.preventDefault?a.preventDefault():a.returnValue=!1,!1},this._rInitSizer=function(){var b=a.conf.resize,c=a.wins.w[a._idd];b.obj=document.createElement("DIV"),b.obj.className="dhxwin_resize",b.obj.style.zIndex=c.win.style.zIndex,b.obj.style.cursor=b.mode+"-resize",a.wins.vp.appendChild(b.obj),1==a.wins.conf.fr_cover&&(b.objFR=document.createElement("IFRAME"),b.objFR.className="dhxwin_resize_fr_cover",b.objFR.style.zIndex=b.obj.style.zIndex,a.wins.vp.insertBefore(b.objFR,b.obj)),b.rx=c.conf.x,b.ry=c.conf.y,b.rw=c.conf.w,b.rh=c.conf.h,b=null},this._rAdjustSizer=function(){var b=a.conf.resize;b.obj||this._rInitSizer(),b.obj.style.width=b.rw+"px",b.obj.style.height=b.rh+"px",null!=b.rx&&(b.obj.style.left=b.rx+"px"),null!=b.ry&&(b.obj.style.top=b.ry+"px"),null!=b.objFR&&(b.objFR.style.width=b.obj.style.width,b.objFR.style.height=b.obj.style.height,null!=b.rx&&(b.objFR.style.left=b.obj.style.left),null!=b.ry&&(b.objFR.style.top=b.obj.style.top)),b=null},"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,!1)):(this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown)),this._unloadResize=function(){"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,!1)):(this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown)),this._initResize=null,this._rOnCellMouseMove=null,this._rOnCellMouseDown=null,this._rOnWinMouseMove=null,this._rOnWinMouseUp=null,this._rOnSelectStart=null,this._rInitSizer=null,this._rAdjustSizer=null,this._unloadResize=null,this.conf.resize=null,a=null}},dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu("icon",null,null,a)},dhtmlXWindows.prototype.getContextMenu=function(){return null!=this.cm&&null!=this.cm.global?this.cm.global:null},dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)},dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu("icon",this._idd,null,a)},dhtmlXWindowsCell.prototype.getContextMenu=function(){return null!=this.wins.cm&&null!=this.wins.cm.icon[this._idd]?this.wins.cm.icon[this._idd]:null},dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)},dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,a)},dhtmlXWindowsButton.prototype.getContextMenu=function(){return null==this.conf.wins.cm||null==this.conf.wins.cm.button[this.conf.winId]?null:null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]?this.conf.wins.cm.button[this.conf.winId][this.conf.name]:null},dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)},dhtmlXWindows.prototype._renderContextMenu=function(a,b,c,d){var e=this,f=!1;if(null==this.cm&&(this.cm={global:null,icon:{},button:{}},f=!0),null==b){if(null!=this.cm.global)return}else if("icon"==a){if(null!=this.cm.icon[b])return}else if("button"==a&&null!=this.cm.button[b]&&null!=this.cm.button[b][c])return;null==d&&(d={}),d.parent=null,d.context=!0;var g=new dhtmlXMenuObject(d);return g.setAutoHideMode(!1),g.attachEvent("onShow",function(){this.conf.wins_menu_open=!0}),g.attachEvent("onHide",function(){this.conf.wins_menu_open=!1,e.conf.opened_menu=null}),null==b?this.cm.global=g:"icon"==a?this.cm.icon[b]=g:"button"==a&&(null==this.cm.button[b]&&(this.cm.button[b]={}),this.cm.button[b][c]=g),f&&(this._showContextMenu=function(a,b){if(!(a.button>=2)){if("icon"==b.mode&&null!=b.id&&"mousedown"==b.press_type){var c=this.cm.icon[b.id]||this.cm.global;if(null==c)return;a.cancelBubble=!0;var d=this.w[b.id].hdr.firstChild;c.conf.wins_menu_open&&this.conf.opened_menu==b.id?c.hideContextMenu():(this._hideContextMenu(),c.showContextMenu(window.dhx4.absLeft(d),window.dhx4.absTop(d)+d.offsetHeight),this.conf.opened_menu=b.id),c=d=null}if("button"==b.mode&&null!=b.id&&"mousedown"==b.press_type){if(null==this.cm.button[b.id]||null==this.cm.button[b.id][b.button_name])return;a.cancelBubble=!0,this.conf.button_last=null;var c=this.cm.button[b.id][b.button_name],e=this.w[b.id].b[b.button_name].button;c.conf.wins_menu_open&&this.conf.opened_menu==b.id?c.hideContextMenu():(this._hideContextMenu(),c.showContextMenu(window.dhx4.absLeft(e),window.dhx4.absTop(e)+e.offsetHeight),this.conf.opened_menu=b.id),c=e=null}}},this._hideContextMenu=function(a){if(null!=a){if(a=a||event,"keydown"==a.type&&27!=a.keyCode)return;for(var b=a.target||a.srcElement,c=!0;null!=b&&1==c;)null!=b.className&&b.className.search(/SubLevelArea_Polygon/)>=0?c=!1:b=b.parentNode}if(c||null==a){null!=e.cm.global&&e.cm.global.hideContextMenu();for(var d in e.cm.icon)null!=e.cm.icon[d]&&e.cm.icon[d].hideContextMenu();for(var d in e.cm.button)for(var f in e.cm.button[d])null!=e.cm.button[d][f]&&e.cm.button[d][f].hideContextMenu()}},this._detachContextMenu=function(a,b,c){null!=this.cm&&(null==b?null!=this.cm.global&&(this.cm.global.unload(),this.cm.global=null):"icon"==a?null!=this.cm.icon[b]&&(this.cm.icon[b].unload(),this.cm.icon[b]=null):"button"==a&&null!=this.cm.button[b]&&null!=this.cm.button[b][c]&&(this.cm.button[b][c].unload(),this.cm.button[b][c]=null))},this.attachEvent("_winMouseDown",this._showContextMenu),"function"==typeof window.addEventListener?(window.addEventListener("mousedown",this._hideContextMenu,!1),window.addEventListener("keydown",this._hideContextMenu,!1)):(document.body.attachEvent("onmousedown",this._hideContextMenu),document.body.attachEvent("onkeydown",this._hideContextMenu)),this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null),this.cm=null,"function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._hideContextMenu,!1),window.removeEventListener("keydown",this._hideContextMenu,!1)):(document.body.detachEvent("onmousedown",this._hideContextMenu),document.body.detachEvent("onkeydown",this._hideContextMenu)),e=null}),g},window.dhx||(dhx={}),dhx.assert=function(a,b){a||dhx.assert_error(b)},dhx.assert_error=function(message){dhx.log("error",message),dhx.message&&"string"==typeof message&&dhx.message({type:"debug",text:message,expire:-1}),dhx.debug!==!1&&eval("debugger;")},dhx.assert_core_ready=function(){window.dhx_on_core_ready&&dhx_on_core_ready()},dhx.version="3.0",dhx.codebase="./",dhx.name="Core",dhx.clone=function(a){var b=dhx.clone._function;return b.prototype=a,new b},dhx.clone._function=function(){},dhx.extend=function(a,b,c){if(dhx.assert(a,"Invalid mixing target"),dhx.assert(b,"Invalid mixing source"),a._dhx_proto_wait)return dhx.PowerArray.insertAt.call(a._dhx_proto_wait,b,1),a;for(var d in b)(!a[d]||c)&&(a[d]=b[d]);return b.defaults&&dhx.extend(a.defaults,b.defaults),b.$init&&b.$init.call(a),a},dhx.copy=function(a){if(dhx.assert(a,"Invalid mixing target"),arguments.length>1){var b=arguments[0];a=arguments[1]}else var b=dhx.isArray(a)?[]:{};for(var c in a)a[c]&&"object"==typeof a[c]&&!dhx.isDate(a[c])?(b[c]=dhx.isArray(a[c])?[]:{},dhx.copy(b[c],a[c])):b[c]=a[c];return b},dhx.single=function(a){var b=null,c=function(){return b||(b=new a({})),b._reinit&&b._reinit.apply(b,arguments),b};return c},dhx.protoUI=function(){dhx.debug_proto&&dhx.log("UI registered: "+arguments[0].name);var a=arguments,b=a[0].name,c=function(a){if(!c)return dhx.ui[b].prototype;var d=c._dhx_proto_wait;if(d){for(var e=[d[0]],f=1;f<d.length;f++)e[f]=d[f],e[f]._dhx_proto_wait&&(e[f]=e[f].call(dhx,e[f].name)),e[f].prototype&&e[f].prototype.name&&(dhx.ui[e[f].prototype.name]=e[f]);if(dhx.ui[b]=dhx.proto.apply(dhx,e),c._dhx_type_wait)for(var f=0;f<c._dhx_type_wait.length;f++)dhx.Type(dhx.ui[b],c._dhx_type_wait[f]);c=d=null}return this!=dhx?new dhx.ui[b](a):dhx.ui[b]};return c._dhx_proto_wait=Array.prototype.slice.call(arguments,0),dhx.ui[b]=c},dhx.proto=function(){dhx.debug_proto&&dhx.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var a=arguments,b=a[0],c=!!b.$init,d=[];dhx.assert(b,"Invalid mixing target");for(var e=a.length-1;e>0;e--){if(dhx.assert(a[e],"Invalid mixing source"),"function"==typeof a[e]&&(a[e]=a[e].prototype),a[e].$init&&d.push(a[e].$init),a[e].defaults){var f=a[e].defaults;b.defaults||(b.defaults={});for(var g in f)dhx.isUndefined(b.defaults[g])&&(b.defaults[g]=f[g])}if(a[e].type&&b.type)for(var g in a[e].type)b.type[g]||(b.type[g]=a[e].type[g]);for(var h in a[e])b[h]||(b[h]=a[e][h])}c&&d.push(b.$init),b.$init=function(){for(var a=0;a<d.length;a++)d[a].apply(this,arguments)};var i=function(a){this.$ready=[],dhx.assert(this.$init,"object without init method"),this.$init(a),this._parseSettings&&this._parseSettings(a,this.defaults);for(var b=0;b<this.$ready.length;b++)this.$ready[b].call(this)};return i.prototype=b,b=a=null,i},dhx.bind=function(a,b){return function(){return a.apply(b,arguments)}},dhx.require=function(a,b,c){if("string"==typeof a){if(dhx._modules[a]!==!0){if(".css"==a.substr(-4)){var d=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+a});return document.head.appendChild(d),void(b&&b.call(c||window))}{arguments[4]}b?dhx._modules[a]?dhx._modules[a].push([b,c]):(dhx._modules[a]=[[b,c]],dhx.ajax(dhx.codebase+a,function(b){dhx.exec(b);var c=dhx._modules[a];dhx._modules[a]=!0;for(var d=0;d<c.length;d++)c[d][0].call(c[d][1]||window,!d)})):(dhx.exec(dhx.ajax().sync().get(dhx.codebase+a).responseText),dhx._modules[a]=!0)}}else{var e=a.length||0,f=b;if(e)(b=function(){return e?(e--,void dhx.require(a[a.length-e-1],b,c)):f.apply(this,arguments)})();else{for(var g in a)e++;b=function(){e--,0===e&&f.apply(this,arguments)};for(var g in a)dhx.require(g,b,c)}}},dhx._modules={},dhx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)},dhx.wrap=function(a,b){return a?function(){var c=a.apply(this,arguments);return b.apply(this,arguments),c}:b},dhx.isUndefined=function(a){return"undefined"==typeof a},dhx.delay=function(a,b,c,d){return window.setTimeout(function(){var d=a.apply(b,c||[]);return a=b=c=null,d},d||1)},dhx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhx.toNode=function(a){return"string"==typeof a?document.getElementById(a):a},dhx.toArray=function(a){return dhx.extend(a||[],dhx.PowerArray,!0)},dhx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhx.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)},dhx.isDate=function(a){return a instanceof Date},dhx._events={},dhx.event=function(a,b,c,d){a=dhx.toNode(a);var e=dhx.uid();return d&&(c=dhx.bind(c,d)),dhx._events[e]=[a,b,c],a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c),e},dhx.eventRemove=function(a){if(a){dhx.assert(this._events[a],"Removing non-existing event");var b=dhx._events[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]),delete this._events[a]}},dhx.log=function(a,b,c){1==arguments.length&&(b=a,a="log"),window.console&&console.log&&(a=a.toLowerCase(),window.console[a]?window.console[a](b||"unknown error"):window.console.log(a+": "+b),c&&window.console.log(c))},dhx.log_full_time=function(a){dhx._start_time_log=new Date,dhx.log("Timing start ["+a+"]"),window.setTimeout(function(){var b=new Date;dhx.log("Timing end ["+a+"]:"+(b.valueOf()-dhx._start_time_log.valueOf())/1e3+"s")},1)},dhx.log_time=function(a){var b="_start_time_log"+a;if(dhx[b]){var c=new Date;dhx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhx[b].valueOf())/1e3+"s"),dhx[b]=null}else dhx[b]=new Date,dhx.log("Info","Timing start ["+a+"]")},dhx.debug_code=function(a){a.call(dhx)},dhx.EventSystem={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(a){dhx.extend(this._evs_map,a,!0)},on_setter:function(a){if(a)for(var b in a)"function"==typeof a[b]&&this.attachEvent(b,a[b])
},callEvent:function(a,b){if(this._evs_events._block)return!0;a=a.toLowerCase();var c=this._evs_events[a.toLowerCase()],d=!0;if(dhx.debug&&dhx.log("info","["+this.name+"] event:"+a,b),c)for(var e=0;e<c.length;e++)c[e].apply(this,b||[])===!1&&(d=!1);return this._evs_map[a]&&!this._evs_map[a].callEvent(a,b)&&(d=!1),d},attachEvent:function(a,b,c){dhx.assert(b,"Invalid event handler for "+a),a=a.toLowerCase(),c=c||dhx.uid(),b=dhx.toFunctor(b);var d=this._evs_events[a]||dhx.toArray();return d.push(b),this._evs_events[a]=d,this._evs_handlers[c]={f:b,t:a},c},detachEvent:function(a){if(this._evs_handlers[a]){var b=this._evs_handlers[a].t,c=this._evs_handlers[a].f,d=this._evs_events[b];d.remove(c),delete this._evs_handlers[a]}},hasEvent:function(a){return a=a.toLowerCase(),this._evs_events[a]?!0:!1}},dhx.extend(dhx,dhx.EventSystem),dhx.PowerArray={removeAt:function(a,b){a>=0&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(b||0===b){var c=this.splice(b,this.length-b);this[b]=a,this.push.apply(this,c)}else this.push(a)},find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this},filter:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])||(this.splice(c,1),c--);return this}},dhx.env={},function(){-1!=navigator.userAgent.indexOf("Mobile")&&(dhx.env.mobile=!0),(dhx.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))&&(dhx.env.touch=!0),-1!=navigator.userAgent.indexOf("Opera")?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),dhx.env.isSafari=dhx.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac")),-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(dhx.env.isAndroid=!0),dhx.env.transform=!1,dhx.env.transition=!1;var a={};a.names=["transform","transition"],a.transform=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],a.transition=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];for(var b=document.createElement("DIV"),c=0;c<a.names.length;c++)for(var d=a[a.names[c]],e=0;e<d.length;e++)if("undefined"!=typeof b.style[d[e]]){dhx.env[a.names[c]]=d[e];break}b.style[dhx.env.transform]="translate3d(0,0,0)",dhx.env.translate=b.style[dhx.env.transform]?"translate3d":"translate";var f="",g=!1;dhx.env.isOpera&&(f="-o-",g="O"),dhx.env.isFF&&(f="-Moz-"),dhx.env.isWebKit&&(f="-webkit-"),dhx.env.isIE&&(f="-ms-"),dhx.env.transformCSSPrefix=f,dhx.env.transformPrefix=g||dhx.env.transformCSSPrefix.replace(/-/gi,""),dhx.env.transitionEnd="-Moz-"==dhx.env.transformCSSPrefix?"transitionend":dhx.env.transformPrefix+"TransitionEnd"}(),dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),dhx.html={_native_on_selectstart:0,denySelect:function(){dhx._native_on_selectstart||(dhx._native_on_selectstart=document.onselectstart),document.onselectstart=dhx.html.stopEvent},allowSelect:function(){0!==dhx._native_on_selectstart&&(document.onselectstart=dhx._native_on_selectstart||null),dhx._native_on_selectstart=0},index:function(a){for(var b=0;a=a.previousSibling;)b++;return b},_style_cache:{},createCss:function(a){var b="";for(var c in a)b+=c+":"+a[c]+";";var d=this._style_cache[b];return d||(d="s"+dhx.uid(),this.addStyle("."+d+"{"+b+"}"),this._style_cache[b]=d),d},addStyle:function(a){var b=document.createElement("style");b.setAttribute("type","text/css"),b.setAttribute("media","screen"),b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(b)},create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);return b.style&&(d.style.cssText=b.style),b["class"]&&(d.className=b["class"]),c&&(d.innerHTML=c),d},getValue:function(a){return a=dhx.toNode(a),a?dhx.isUndefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b&&b.parentNode?b.parentNode.insertBefore(a,b):c.appendChild(a))},locate:function(a,b){if(a.tagName)var c=a;else{a=a||event;var c=a.target||a.srcElement}for(;c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{y:Math.round(i),x:Math.round(j)}}for(var i=0,j=0;a;)i+=parseInt(a.offsetTop,10),j+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:i,x:j}},posRelative:function(a){return a=a||event,dhx.isUndefined(a.offsetX)?{x:a.layerX,y:a.layerY}:{x:a.offsetX,y:a.offsetY}},pos:function(a){if(a=a||event,a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=dhx.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){return a&&a.preventDefault&&a.preventDefault(),dhx.html.stopEvent(a)},stopEvent:function(a){return(a||event).cancelBubble=!0,!1},addCss:function(a,b){a.className+=" "+b},removeCss:function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")}},dhx.ready=function(a){this._ready?a.call():this._ready_code.push(a)},dhx._ready_code=[],function(){var a=document.getElementsByTagName("SCRIPT");dhx.assert(a.length,"Can't locate codebase"),a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),dhx.codebase=a.slice(0,a.length).join("/")+"/"),dhx.event(window,"load",function(){dhx.callEvent("onReady",[]),dhx.delay(function(){dhx._ready=!0;for(var a=0;a<dhx._ready_code.length;a++)dhx._ready_code[a].call();dhx._ready_code=[]})})}(),dhx.locale=dhx.locale||{},dhx.assert_core_ready(),dhx.ready(function(){dhx.event(document.body,"click",function(a){dhx.callEvent("onClick",[a||event])})}),function(){var a={},b=new RegExp("(\\r\\n|\\n)","g"),c=new RegExp('(\\")',"g");dhx.Template=function(d){if("function"==typeof d)return d;if(a[d])return a[d];if(d=(d||"").toString(),-1!=d.indexOf("->"))switch(d=d.split("->"),d[0]){case"html":d=dhx.html.getValue(d[1]);break;case"http":d=(new dhx.ajax).sync().get(d[1],{uid:dhx.uid()}).responseText}d=(d||"").toString(),d=d.replace(b,"\\n"),d=d.replace(c,'\\"'),d=d.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),d=d.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\""),d=d.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"'),d=d.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"'),d=d.replace("{obj}",'"+obj+"'),d=d.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{a[d]=Function("obj","common",'return "'+d+'";')}catch(e){dhx.assert_error("Invalid template:"+d)}return a[d]},dhx.Template.empty=function(){return""},dhx.Template.bind=function(a){return dhx.bind(dhx.Template(a),this)},dhx.Type=function(a,b){if(a._dhx_proto_wait)return a._dhx_type_wait||(a._dhx_type_wait=[]),void a._dhx_type_wait.push(b);"function"==typeof a&&(a=a.prototype),a.types||(a.types={"default":a.type},a.type.name="default");var c=b.name,d=a.type;c&&(d=a.types[c]=dhx.clone(b.baseType?a.types[b.baseType]:a.type));for(var e in b)d[e]=0===e.indexOf("template")?dhx.Template(b[e]):b[e];return c}}(),dhx.Settings={$init:function(){this._settings=this.config={}},define:function(a,b){return"object"==typeof a?this._parseSeetingColl(a):this._define(a,b)},_define:function(a,b){var c=this[a+"_setter"];return this._settings[a]=c?c.call(this,b,a):b},_parseSeetingColl:function(a){if(a)for(var b in a)this._define(b,a[b])},_parseSettings:function(a,b){var c={};b&&(c=dhx.extend(c,b)),"object"!=typeof a||a.tagName||dhx.extend(c,a,!0),this._parseSeetingColl(c)},_mergeSettings:function(a,b){for(var c in b)switch(typeof a[c]){case"object":a[c]=this._mergeSettings(a[c]||{},b[c]);break;case"undefined":a[c]=b[c]}return a},debug_freid_c_id:!0,debug_freid_a_name:!0},dhx.ajax=function(a,b,c){if(0!==arguments.length){var d=new dhx.ajax;return c&&(d.master=c),d.get(a,null,b)}return this.getXHR?this:new dhx.ajax},dhx.ajax.count=0,dhx.ajax.prototype={master:null,getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,b,c){var d=this.getXHR();if(dhx.isArray(c)||(c=[c]),"object"==typeof b){var e=[];for(var f in b){var g=b[f];(null===g||g===dhx.undefined)&&(g=""),e.push(f+"="+encodeURIComponent(g))}b=e.join("&")}b&&"GET"===this.request&&(a=a+(-1!=a.indexOf("?")?"&":"?")+b,b=null),d.open(this.request,a,!this._sync),"POST"===this.request&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");var h=this;return d.onreadystatechange=function(){if(!d.readyState||4==d.readyState){if(dhx.debug_time&&dhx.log_full_time("data_loading"),dhx.ajax.count++,c&&h)for(var a=0;a<c.length;a++)if(c[a]){var b=c[a].success||c[a];(d.status>=400||!d.status&&!d.responseText)&&(b=c[a].error),b&&b.call(h.master||h,d.responseText,d.responseXML,d)}h&&(h.master=null),c=h=null}},d.send(b||null),d},get:function(a,b,c){return 2==arguments.length&&(c=b,b=null),this.request="GET",this.send(a,b,c)},post:function(a,b,c){return this.request="POST",this.send(a,b,c)},put:function(a,b,c){return this.request="PUT",this.send(a,b,c)},del:function(a,b,c){return this.request="DELETE",this.send(a,b,c)},sync:function(){return this._sync=!0,this},bind:function(a){return this.master=a,this}},dhx.send=function(a,b,c,d){var e=dhx.html.create("FORM",{target:d||"_self",action:a,method:c||"POST"},"");for(var f in b){var g=dhx.html.create("INPUT",{type:"hidden",name:f,value:b[f]},"");e.appendChild(g)}e.style.display="none",document.body.appendChild(e),e.submit(),document.body.removeChild(e)},dhx.AtomDataLoader={$init:function(a){this.data={},a&&(this._settings.datatype=a.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){return this._ready_for_data?(this.load(a,this._settings.datatype),a):a},data_setter:function(a){return this._ready_for_data?(this.parse(a,this._settings.datatype),!0):a},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(a,b){if(a.$proxy)return void a.load(this,"string"==typeof b?b:"json");this.callEvent("onXLS",[]),"string"==typeof b?(this.data.driver=dhx.DataDriver[b],b=arguments[2]):this.data.driver||(this.data.driver=dhx.DataDriver.json);var c=[{success:this._onLoad,error:this._onLoadError}];return b&&(dhx.isArray(b)?c.push.apply(c,b):c.push(b)),dhx.ajax(a,c,this)},parse:function(a,b){this.callEvent("onXLS",[]),this.data.driver=dhx.DataDriver[b||"json"],this._onLoad(a,null)},_onLoad:function(a,b,c){var d=this.data.driver,e=d.toObject(a,b);if(e){var f=d.getRecords(e)[0];this.data=d?d.getDetails(f):a}else this._onLoadError(a,b,c);this.callEvent("onXLE",[])},_onLoadError:function(a,b,c){this.callEvent("onXLE",[]),this.callEvent("onLoadError",arguments),dhx.callEvent("onLoadError",[a,b,c,this])},_check_data_feed:function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var b=this._settings.dataFeed;return"function"==typeof b?b.call(this,a.id||a,a):(b=b+(-1==b.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a),this.callEvent("onXLS",[]),dhx.ajax(b,function(a,b,c){this._ignore_feed=!0;var d=dhx.DataDriver.toObject(a,b);d?this.setValues(d.getDetails(d.getRecords()[0])):this._onLoadError(a,b,c),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhx.DataDriver={},dhx.DataDriver.json={toObject:function(data){if(data||(data="[]"),"string"==typeof data){try{eval("dhx.temp="+data)}catch(e){return dhx.assert_error(e),null}data=dhx.temp}if(data.data){var t=data.data.config={};for(var key in data)"data"!=key&&(t[key]=data[key]);data=data.data}return data},getRecords:function(a){return a&&!dhx.isArray(a)?[a]:a},getDetails:function(a){return"string"==typeof a?{id:dhx.uid(),value:a}:a},getInfo:function(a){var b=a.config;return b?{_size:b.total_count||0,_from:b.pos||0,_parent:b.parent||0,_config:b.config,_key:b.dhx_security}:{}},child:"data"},dhx.DataDriver.html={toObject:function(a){if("string"==typeof a){var b=null;return-1==a.indexOf("<")&&(b=dhx.toNode(a)),b||(b=document.createElement("DIV"),b.innerHTML=a),b.getElementsByTagName(this.tag)}return a},getRecords:function(a){for(var b=[],c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];1==d.nodeType&&b.push(d)}return b},getDetails:function(a){return dhx.DataDriver.xml.tagToObject(a)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"},dhx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhx.temp="+data),dhx.temp):data},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{_size:0,_from:0}}},dhx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","},dhx.DataDriver.xml={_isValidXML:function(a){return a&&a.documentElement?a.getElementsByTagName("parsererror").length?null:a:null},toObject:function(a){if(this._isValidXML(b))return b;if("string"==typeof a)var b=this.fromString(a.replace(/^[\s]+/,""));else b=a;return this._isValidXML(b)?b:null},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){var b=this.xpath(a,this.config);return b=b.length?this.assignTypes(this.tagToObject(b[0],{})):null,{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_parent:a.documentElement.getAttribute("parent")||0,_config:b,_key:a.documentElement.getAttribute("dhx_security")||null}},xpath:function(a,b){if(window.XPathResult){var c=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null),f=e.iterateNext();f;)d.push(f),f=e.iterateNext();return d}var g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(h){}if(g)return a.selectNodes(b);var i=b.split("/").pop();return a.getElementsByTagName(i)},assignTypes:function(a){for(var b in a){var c=a[b];if("object"==typeof c)this.assignTypes(c);else if("string"==typeof c){if(""===c)continue;"true"==c?a[b]=!0:"false"==c?a[b]=!1:c==1*c&&(a[b]=1*a[b])}}return a},tagToObject:function(a,b){b=b||{};var c=!1,d=a.attributes;if(d&&d.length){for(var e=0;e<d.length;e++)b[d[e].name]=d[e].value;c=!0}for(var f=a.childNodes,e=0;e<f.length;e++)if(1==f[e].nodeType){var g=f[e].tagName;"undefined"!=typeof b[g]?(dhx.isArray(b[g])||(b[g]=[b[g]]),b[g].push(this.tagToObject(f[e],{}))):b[f[e].tagName]=this.tagToObject(f[e],{}),c=!0}return c?(b.value=b.value||this.nodeValue(a),b):this.nodeValue(a)},nodeValue:function(a){return a.firstChild?a.firstChild.data:""},fromString:function(a){try{if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");return b.loadXML(a),b}}catch(c){return dhx.assert_error(c),null}dhx.assert_error("Load from xml string is not supported")}},dhx.DataLoader=dhx.proto({$init:function(a){a=a||"",this._ajax_queue=dhx.toArray(),this.data=new dhx.DataStore,this.data.attachEvent("onClearAll",dhx.bind(this._call_onclearall,this)),this.data.attachEvent("onServerConfig",dhx.bind(this._call_on_config,this)),this.data.feed=this._feed},_feed:function(a,b,c){return this._load_count?this._load_count=[a,b,c]:(this._load_count=!0,this._feed_last=[a,b],void this._feed_common.call(this,a,b,c))},_feed_common:function(a,b,c){var d=this.data.url;0>a&&(a=0),this.load(d+(-1==d.indexOf("?")?"?":"&")+(this.dataCount()?"continue=true&":"")+"start="+a+"&count="+b,[this._feed_callback,c])},_feed_callback:function(){var a=this._load_count,b=this._feed_last;this._load_count=!1,"object"!=typeof a||a[0]==b[0]&&a[1]==b[1]||this.data.feed.apply(this,a)},load:function(a){var b=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(b),this.data.url||(this.data.url=a)},loadNext:function(a,b,c,d,e){return this._settings.datathrottle&&!e?(this._throttle_request&&window.clearTimeout(this._throttle_request),void(this._throttle_request=dhx.delay(function(){this.loadNext(a,b,c,d,!0)},this,0,this._settings.datathrottle))):(b||0===b||(b=this.dataCount()),this.data.url=this.data.url||d,void(this.callEvent("onDataRequest",[b,a,c,d])&&this.data.url&&this.data.feed.call(this,b,a,c)))},_maybe_loading_already:function(a,b){var c=this._feed_last;return this._load_count&&c&&c[0]<=b&&c[1]+c[0]>=a+b?!0:!1},_onLoad:function(a,b,c){this._ajax_queue.remove(c);var d=this.data.driver.toObject(a,b);return d?(this.data._parse(d),this._call_onready(),void this.callEvent("onXLE",[])):this._onLoadError(a,b,c)},removeMissed_setter:function(a){return this.data._removeMissed=a},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(a){return this.data.attachEvent("onBeforeFilter",dhx.bind(function(a,b){if(this._settings.dataFeed){var c={};if(!a&&!b)return;if("function"==typeof a){if(!b)return;a(b,c)}else c={text:b};this.clearAll();var d=this._settings.dataFeed,e=[];if("function"==typeof d)return d.call(this,b,c);for(var f in c)e.push("dhx_filter["+f+"]="+encodeURIComponent(c[f]));return this.load(d+(d.indexOf("?")<0?"?":"&")+e.join("&"),this._settings.datatype),!1}},this)),a},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var a=dhx.toFunctor(this._settings.ready);a&&dhx.delay(a,this,arguments),this._ready_was_used=!0}},_call_onclearall:function(){for(var a=0;a<this._ajax_queue.length;a++)this._ajax_queue[a].abort();this._ajax_queue=dhx.toArray()},_call_on_config:function(a){this._parseSeetingColl(a)}},dhx.AtomDataLoader),dhx.DataStore=function(){this.name="DataStore",dhx.extend(this,dhx.EventSystem),this.setDriver("json"),this.pull={},this.order=dhx.toArray(),this._marks={}},dhx.DataStore.prototype={setDriver:function(a){dhx.assert(dhx.DataDriver[a],"incorrect DataDriver"),this.driver=dhx.DataDriver[a]},_parse:function(a){this.callEvent("onParse",[this.driver,a]),this._filter_order&&this.filter();var b=this.driver.getInfo(a);b._key&&(dhx.securityKey=b._key),b._config&&this.callEvent("onServerConfig",[b._config]);var c=this.driver.getRecords(a);this._inner_parse(b,c),this._scheme_group&&this._group_processing&&this._group_processing(this._scheme_group),this._scheme_sort&&(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,a]),this.refresh()},_inner_parse:function(a,b){var c=1*(a._from||0),d=!0,e=!1;if(0===c&&this.order[0]){if(this._removeMissed){e={};for(var f=0;f<this.order.length;f++)e[this.order[f]]=!0}d=!1,c=this.order.length}for(var g=0,f=0;f<b.length;f++){var h=this.driver.getDetails(b[f]),i=this.id(h);this.pull[i]?d&&this.order[g+c]&&g++:(this.order[g+c]=i,g++),this.pull[i]?(dhx.extend(this.pull[i],h,!0),this._scheme_update&&this._scheme_update(this.pull[i]),e&&delete e[i]):(this.pull[i]=h,this._scheme_init&&this._scheme_init(h))}if(e){this.blockEvent();for(var j in e)this.remove(j);this.unblockEvent()}this.order[a._size-1]||(this.order[a._size-1]=dhx.undefined)},id:function(a){return a.id||(a.id=dhx.uid())},changeId:function(a,b){this.pull[a]&&(this.pull[b]=this.pull[a]),this.pull[b].id=b,this.order[this.order.find(a)]=b,this._filter_order&&(this._filter_order[this._filter_order.find(a)]=b),this._marks[a]&&(this._marks[b]=this._marks[a],delete this._marks[a]),this.callEvent("onIdChange",[a,b]),this._render_change_id&&this._render_change_id(a,b),delete this.pull[a]},item:function(a){return this.pull[a]},update:function(a,b){return dhx.isUndefined(b)&&(b=this.item(a)),this._scheme_update&&this._scheme_update(b),this.callEvent("onBeforeUpdate",[a,b])===!1?!1:(this.pull[a]=b,void this.callEvent("onStoreUpdated",[a,b,"update"]))},refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a,b){this._skip_refresh=!0,a.call(b||this),this._skip_refresh=!1},getRange:function(a,b){if(a=a?this.indexById(a):this.$min||this.startOffset||0,b?b=this.indexById(b):(b=Math.min(this.$max||this.endOffset||1/0,this.dataCount()-1),0>b&&(b=0)),a>b){var c=b;b=a,a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(b||1/0,this.dataCount()-1);for(var c=dhx.toArray(),d=a||0;b>=d;d++)c.push(this.item(this.order[d]));return c},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){dhx.assert(a>=0&&b>=0,"DataStore::move","Incorrect indexes");var c=this.idByIndex(a),d=this.item(c);this.order.removeAt(a),this.order.insertAt(c,Math.min(this.order.length,b)),this.callEvent("onStoreUpdated",[c,d,"move"])},scheme:function(a){this._scheme={},this._scheme_init=a.$init,this._scheme_update=a.$update,this._scheme_serialize=a.$serialize,this._scheme_group=a.$group,this._scheme_sort=a.$sort;for(var b in a)"$"!=b.substr(0,1)&&(this._scheme[b]=a[b])},sync:function(a,b,c){"string"==typeof a&&(a=$$("source")),"function"!=typeof b&&(c=b,b=null),dhx.debug_bind&&(this.debug_sync_master=a,dhx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)),this._backbone_source=!1,"DataStore"!=a.name&&(a.data&&"DataStore"==a.data.name?a=a.data:this._backbone_source=!0);var d=dhx.bind(function(d,e,f){if(this._backbone_source){if(!d)return;if(0===d.indexOf("change"))return"change"==d?(this.pull[e.id]=e.attributes,void this.refresh(e.id)):void 0;"reset"==d&&(f=e),this.order=[],this.pull={},this._filter_order=null;for(var g=0;g<f.models.length;g++){var h=f.models[g].id;this.order.push(h),this.pull[h]=f.models[g].attributes}}else this._filter_order=null,this.order=dhx.toArray([].concat(a.order)),this.pull=a.pull;b&&this.silent(b),this._on_sync&&this._on_sync(),dhx.debug_bind&&dhx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),this.callEvent("onSyncApply",[]),c?c=!1:this.refresh()},this);this._backbone_source?a.bind("all",d):this._sync_events=[a.attachEvent("onStoreUpdated",d),a.attachEvent("onIdChange",dhx.bind(function(a,b){this.changeId(a,b)},this))],d()},add:function(a,b){if(this._scheme)for(var c in this._scheme)dhx.isUndefined(a[c])&&(a[c]=this._scheme[c]);this._scheme_init&&this._scheme_init(a);var d=this.id(a),e=arguments[2]||this.order,f=e.length;if((dhx.isUndefined(b)||0>b)&&(b=f),b>f&&(dhx.log("Warning","DataStore:add","Index of out of bounds"),b=Math.min(e.length,b)),this.callEvent("onBeforeAdd",[d,a,b])===!1)return!1;if(dhx.assert(!this.exists(d),"Not unique ID"),this.pull[d]=a,e.insertAt(d,b),this._filter_order){var g=this._filter_order.length;!b&&this.order.length&&(g=0),this._filter_order.insertAt(d,g)}return this.callEvent("onAfterAdd",[d,b]),this.callEvent("onStoreUpdated",[d,a,"add"]),d},remove:function(a){if(dhx.isArray(a))for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===!1)return!1;dhx.assert(this.exists(a),"Not existing ID in remove command"+a);var c=this.item(a);this.order.remove(a),this._filter_order&&this._filter_order.remove(a),delete this.pull[a],this._marks[a]&&delete this._marks[a],this.callEvent("onAfterDelete",[a]),this.callEvent("onStoreUpdated",[a,c,"delete"])}},clearAll:function(){this.pull={},this.order=dhx.toArray(),this._filter_order=this.url=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(a){return(a>=this.order.length||0>a)&&dhx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[a]},indexById:function(a){var b=this.order.find(a);return this.pull[a]||dhx.log("Warning","DataStore::indexById Non-existing ID: "+a),b},next:function(a,b){return this.order[this.indexById(a)+(b||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,b){return this.order[this.indexById(a)-(b||1)]},sort:function(a,b,c){var d=a;"function"==typeof a?d={as:a,dir:b}:"string"==typeof a&&(d={by:a.replace(/#/g,""),dir:b,as:c});var e=[d.by,d.dir,d.as];this.callEvent("onBeforeSort",e)&&(this._sort_core(d),this.refresh(),this.callEvent("onAfterSort",e))},_sort_core:function(a){if(this.order.length){var b=this._sort._create(a),c=this.getRange(this.first(),this.last());c.sort(b),this.order=c.map(function(a){return dhx.assert(a,"Client sorting can't be used with dynamic loading"),this.id(a)},this)}},_filter_reset:function(a){this._filter_order&&!a&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(a,b,c){for(var d=dhx.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];a(this.item(f),b)&&d.push(f)}c&&this._filter_order||(this._filter_order=this.order),this.order=d},filter:function(a,b,c){if(this.callEvent("onBeforeFilter",[a,b])&&(this._filter_reset(c),this.order.length)){if(a){var d=a;b=b||"","string"==typeof a&&(a=a.replace(/#/g,""),"function"==typeof b?d=function(c){return b(c[a])}:(b=b.toString().toLowerCase(),d=function(b,c){return dhx.assert(b,"Client side filtering can't be used with dynamic loading"),-1!=(b[a]||"").toString().toLowerCase().indexOf(c)})),this._filter_core(d,b,c,this._filterMode)}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(a,b){for(var c=0;c<this.order.length;c++)a.call(b||this,this.item(this.order[c]))},_methodPush:function(a,b){return function(){return a[b].apply(a,arguments)}},addMark:function(a,b,c,d){var e=this._marks[a]||{};return this._marks[a]=e,e[b]||(e[b]=d||!0,c&&(this.item(a).$css=(this.item(a).$css||"")+" "+b,this.refresh(a))),e[b]},removeMark:function(a,b,c){var d=this._marks[a];if(d&&d[b]&&delete d[b],c){var e=this.item(a).$css;e&&(this.item(a).$css=e.replace(b,""),this.refresh(a))}},hasMark:function(a,b){var c=this._marks[a];return c&&c[b]},provideApi:function(a,b){this.debug_bind_master=a,b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});for(var c=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync","addMark","removeMark","hasMark"],d=0;d<c.length;d++)a[c[d]]=this._methodPush(this,c[d])},serialize:function(){for(var a=this.order,b=[],c=0;c<a.length;c++){var d=this.pull[a[c]];this._scheme_serialize&&(d=this._scheme_serialize(d),d===!1)||b.push(d)}return b},_sort:{_create:function(a){return this._dir(a.dir,this._by(a.by,a.as))},_as:{date:function(a,b){return a-=0,b-=0,a>b?1:b>a?-1:0},"int":function(a,b){return a=1*a,b=1*b,a>b?1:b>a?-1:0},string_strict:function(a,b){return a=a.toString(),b=b.toString(),a>b?1:b>a?-1:0},string:function(a,b){return b?a?(a=a.toString().toLowerCase(),b=b.toString().toLowerCase(),a>b?1:b>a?-1:0):-1:1}},_by:function(a,b){return a?("function"!=typeof b&&(b=this._as[b||"string"]),dhx.assert(b,"Invalid sorting method"),function(c,d){return b(c[a],d[a])}):b},_dir:function(a,b){return"asc"!=a&&a?function(a,c){return-1*b(a,c)}:b}}},dhx.BaseBind={debug_freid_ignore:{id:!0},bind:function(a,b,c){if("string"==typeof a&&(a=dhx.ui.get(a)),a._initBindSource&&a._initBindSource(),this._initBindSource&&this._initBindSource(),a.getBindData||dhx.extend(a,dhx.BindSource),!this._bind_ready){var d=this.render;if(this.filter){var e=this._settings.id;this.data._on_sync=function(){a._bind_updated[e]=!1}}this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var a=this.callEvent("onBindRequest");return this._in_bind_processing=!1,d.apply(this,a===!1?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){(!this.validate||this.validate())&&a.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)}),this._bind_ready=!0}a.addBind(this._settings.id,b,c),dhx.debug_bind&&dhx.log("[bind] "+this.name+"@"+this._settings.id+" <= "+a.name+"@"+a._settings.id);var f=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return a.getBindData(f)}),!this._settings.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",function(){a._bind_updated[f]=!1}),this.isVisible(this._settings.id)&&this.refresh()},_unbind:function(a){a.removeBind(this._settings.id);var b=this._sync_events||(this.data?this.data._sync_events:0);if(b&&a.data)for(var c=0;c<b.length;c++)a.data.detachEvent(b[c])}},dhx.BindSource={$init:function(){this._bind_hash={},this._bind_updated={},this._ignore_binds={},this._bind_specific_rules(this)},saveBatch:function(a){this._do_not_update_binds=!0,a.call(this),this._do_not_update_binds=!1,this._update_binds()},setBindData:function(a,b){if(b&&(this._ignore_binds[b]=!0),dhx.debug_bind&&dhx.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+b),this.setValue)this.setValue(a);else if(this.setValues)this.setValues(a);else{var c=this.getCursor();c&&(a=dhx.extend(this.item(c),a,!0),this.update(c,a))}this.callEvent("onBindUpdate",[a,b]),this.save&&this.save(),b&&(this._ignore_binds[b]=!1)},getBindData:function(a,b){if(this._bind_updated[a])return!1;var c=dhx.ui.get(a);c.isVisible(c._settings.id)&&(this._bind_updated[a]=!0,dhx.debug_bind&&dhx.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+c.name+"@"+c._settings.id),this._bind_update(c,this._bind_hash[a][0],this._bind_hash[a][1]),b&&c.filter&&c.refresh())},addBind:function(a,b,c){this._bind_hash[a]=[b,c]},removeBind:function(a){delete this._bind_hash[a],delete this._bind_updated[a],delete this._ignore_binds[a]},_bind_specific_rules:function(a){a.filter?dhx.extend(this,dhx.CollectionBind):a.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var a in this._bind_hash)this._ignore_binds[a]||(this._bind_updated[a]=!1,this.getBindData(a,!0))},_bind_update_common:function(a,b,c){a.setValue?a.setValue(c?c[b]:c):a.filter?a.data.silent(function(){this.filter(b,c)}):!c&&a.clear?a.clear():a._check_data_feed(c)&&a.setValues(dhx.clone(c)),a.callEvent("onBindApply",[c,b,this])}},dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return!0},$init:function(a){this.data=""||a;var b=a&&a.id?a.id:dhx.uid();this._settings={id:b},dhx.ui.views[b]=this},setValue:function(a){this.data=a,this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind),dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(a){this.data=a||{};var b=a&&a.id?a.id:dhx.uid();this._settings={id:b},dhx.ui.views[b]=this},getValues:function(){return this.data},setValues:function(a){this.data=a,this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings),dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1},$init:function(a){this.data.provideApi(this,!0);
var b=a&&a.id?a.id:dhx.uid();this._settings.id=b,dhx.ui.views[b]=this,this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings),dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(a,b,c){var d=this.getValue()||"";if(c&&(d=c(d)),a.setValue)a.setValue(d);else if(a.filter)a.data.silent(function(){this.filter(b,d)});else{var e={};e[b]=d,a._check_data_feed(d)&&a.setValues(e)}a.callEvent("onBindApply",[d,b,this])}},dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(a,b){var c=this.getValues()||null;this._bind_update_common(a,b,c)}},dhx.CollectionBind={$init:function(){this._cursor=null,this.attachEvent("onSelectChange",function(){var a=this.getSelected();this.setCursor(a?a.id||a:null)}),this.attachEvent("onAfterCursorChange",this._update_binds),this.data.attachEvent("onStoreUpdated",dhx.bind(function(a,b,c){a&&a==this.getCursor()&&"paint"!=c&&this._update_binds()},this)),this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this)),this.data.attachEvent("onIdChange",dhx.bind(function(a,b){this._cursor==a&&(this._cursor=b)},this))},setCursor:function(a){a==this._cursor||null!==a&&!this.item(a)||(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=a,this.callEvent("onAfterCursorChange",[a]))},getCursor:function(){return this._cursor},_bind_update:function(a,b){var c=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(a,b,c)}},dhx.ui||(dhx.ui={}),dhx.ui.views||(dhx.ui.views={},dhx.ui.get=function(a){return a._settings?a:dhx.ui.views[a]}),dhtmlXDataStore=function(a){var b=new dhx.DataCollection(a),c="_dp_init";return b[c]=function(a){var c="_methods";a[c]=["dummy","dummy","changeId","dummy"],this.data._old_names={add:"inserted",update:"updated","delete":"deleted",nochanged:"nochanged"},this.data.attachEvent("onStoreUpdated",function(c,d,e){if(b.curRow&&"update"==e){var f=!1;for(var g in d){var h=b.curRow.colType[g]||"",i=b.curRow.colFormat[g]||"";if(d.OldValue){var j=d.OldValue[g]||"",k=d[g];"OldValue"!=g&&"RowState"!=g&&(k!=j?-1!=h.toLowerCase().indexOf("calendar")?(k=hwv.getFormatDateStr(k,i),j=hwv.getFormatDateStr(j,i),k instanceof Date&&(k=dhtmlXCalendarObject.prototype._dateToStr(k,i)),j instanceof Date&&(j=dhtmlXCalendarObject.prototype._dateToStr(j,i)),this.pull[c][g]=k,this.pull[c].OldValue[g]=j,k!=j?(a.obj.setUserData(c,a.action_param,e),f=!0):f||(f=!1)):(a.obj.setUserData(c,a.action_param,e),f=!0):f||(f=!1))}else{if(-1!=h.toLowerCase().indexOf("calendar")){var k=d[g];k=hwv.getFormatDateStr(k,i),k instanceof Date&&(k=dhtmlXCalendarObject.prototype._dateToStr(k,i)),this.pull[c][g]=k}f=!0,e="add"}}0==f&&(e="nochanged")}c&&!a._silent&&a.setUpdated(c,!0,this._old_names[e])}),c="_getRowData",a[c]=function(a){var b=this.obj.data.item(a),c={id:a};if(c[this.action_param]=this.obj.getUserData(a),b)for(var d in b)c[d]=b[d];return c},this.changeId=function(b,c){this.data.changeId(b,c),a._silent=!0,this.data.callEvent("onStoreUpdated",[c,this.item(c),"update"]),a._silent=!1},c="_clearUpdateFlag",a[c]=function(){},this._userdata={}},b.dummy=function(){},b.setUserData=function(a,b,c){this._userdata[a]=c},b.getUserData=function(a){return this._userdata[a]},b.dataFeed=function(a){this.define("dataFeed",a)},dhx.extend(b,dhx.BindSource),b},window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1};var a="_settings";this._settings=this._settings||this[a],this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filtered_state||this._settings.dataFeed?!0:!1};var a="_settings";this._settings=this._settings||this[a],this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),dhx.BaseBind.unsync=function(a){return dhx.BaseBind._unbind.call(this,a)},dhx.BaseBind.unbind=function(a){return dhx.BaseBind._unbind.call(this,a)},dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)},dhx.BaseBind.legacySync=function(a){return this._initBindSource&&this._initBindSource(),a._initBindSource&&a._initBindSource(),this.attachEvent("onAfterEditStop",function(a){return this.save(a),!0}),this.attachEvent("onDataRequest",function(b,c){for(var d=b;b+c>d;d++)if(!a.data.order[d])return a.loadNext(c,b),!1}),this.save=function(b){b||(b=this.getCursor());var c=this.item(b),d=a.item(b);for(var e in c)0!==e.indexOf("$")&&(d[e]=c[e]);a.refresh(b)},a&&"DataCollection"==a.name?a.data.sync.apply(this.data,arguments):this.data.sync.apply(this.data,arguments)},window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(a){dhx.BaseBind.bind.apply(this,arguments),a.getBindData(this._settings.id)},dhtmlXForm.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXForm.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var b=this._settings.dataFeed;return"function"==typeof b?b.call(this,a.id||a,a):(b=b+(-1==b.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a),this.load(b),!1)},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(){return!0}),window.scheduler&&(window.Scheduler||(window.Scheduler={}),Scheduler.$syncFactory=function(a){a.sync=function(b,c){this._initBindSource&&this._initBindSource(),b._initBindSource&&b._initBindSource();var d="_process_loading",e=function(){a.clearAll();for(var e=b.data.order,f=b.data.pull,g=[],h=0;h<e.length;h++)g[h]=c&&c.copy?dhx.clone(f[e[h]]):f[e[h]];a[d](g)};this.save=function(a){a||(a=this.getCursor());var c=this.item(a),d=b.item(a);this.callEvent("onStoreSave",[a,c,d])&&(dhx.extend(b.item(a),c,!0),b.update(a))},this.item=function(a){return this.getEvent(a)},this._sync_events=[b.data.attachEvent("onStoreUpdated",function(){e.call(this)}),b.data.attachEvent("onIdChange",function(a,b){combo.changeOptionId(a,b)})],this.attachEvent("onEventChanged",function(a){this.save(a)}),this.attachEvent("onEventAdded",function(a,c){b.data.pull[a]||b.add(c)}),this.attachEvent("onEventDeleted",function(a){b.data.pull[a]&&b.remove(a)}),e()},a.unsync=function(a){dhx.BaseBind._unbind.call(this,a)},a._initBindSource=function(){this._settings||(this._settings={id:dhx.uid()})}},Scheduler.$syncFactory(window.scheduler)),window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXCombo.unsync=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXCombo.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXCombo.prototype.sync=function(a){this._initBindSource&&this._initBindSource(),a._initBindSource&&a._initBindSource();var b=this,c=function(){b.clearAll(),b.addOption(this.serialize())};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(){c.call(this)}),a.data.attachEvent("onIdChange",function(a,c){b.changeOptionId(a,c)})],c.call(a)},dhtmlXCombo.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(a){a.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=function(a){return this.getOption(a)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return this.optionsArr.length||this._settings.dataFeed?!0:!1},dhtmlXCombo.prototype.refresh=function(){this.render(!0)},dhtmlXCombo.prototype.filter=function(){alert("not implemented")}),window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXGridObject.prototype.unsync=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXGridObject.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXGridObject.prototype.sync=function(a,b){this._initBindSource&&this._initBindSource(),a._initBindSource&&a._initBindSource();var c=this,d="_parsing",e="_parser",f="_locator",g="_process_store_row",h="_get_store_data";this.save=function(b){b||(b=this.getCursor()),dhx.extend(a.item(b),this.item(b),!0),a.update(b)};var i=function(){var a=c.getCursor?c.getCursor():null,b=0;c._legacy_ignore_next?(b=c._legacy_ignore_next,c._legacy_ignore_next=!1):c.clearAll();var i=this.dataCount();if(i){c[d]=!0;for(var j=b;i>j;j++){var k=this.order[j];k&&(b&&c.rowsBuffer[j]||(c.rowsBuffer[j]={idd:k,data:this.pull[k]},c.rowsBuffer[j][e]=c[g],c.rowsBuffer[j][f]=c[h],c.rowsAr[k]=this.pull[k]))}c.rowsBuffer[i-1]||(c.rowsBuffer[i-1]=dhtmlx.undefined,c.xmlFileUrl=c.xmlFileUrl||this.url),c.pagingOn?c.changePage():c._srnd&&c._fillers?c._update_srnd_view():(c.render_dataset(),c.callEvent("onXLE",[])),c[d]=!1}a&&c.setCursor&&c.setCursor(c.rowsAr[a]?a:null)};this._sync_events=[a.data.attachEvent("onStoreUpdated",function(a,b,d){"delete"==d?(c.deleteRow(a),c.data.callEvent("onStoreUpdated",[a,b,d])):"update"==d?(c.callEvent("onSyncUpdate",[b,d]),c.update(a,b),c.data.callEvent("onStoreUpdated",[a,b,d])):"add"==d?(c.callEvent("onSyncUpdate",[b,d]),c.add(a,b,this.indexById(a)),c.data.callEvent("onStoreUpdated",[a,b,d])):i.call(this)}),a.data.attachEvent("onStoreLoad",function(b,d){c.xmlFileUrl=a.data.url,c._legacy_ignore_next=b.getInfo(d)._from}),a.data.attachEvent("onIdChange",function(a,b){c.changeRowId(a,b)})],c.attachEvent("onDynXLS",function(b,d){for(var e=b;b+d>e;e++)if(!a.data.order[e])return a.loadNext(d,b),!1;c._legacy_ignore_next=b,i.call(a.data)}),i.call(a.data),c.attachEvent("onEditCell",function(a,b,c,d,e){return 2==a&&d!=e&&this.save(b),!0}),c.attachEvent("onClearAll",function(){var a="_f_rowsBuffer";this[a]=null}),b&&b.sort&&c.attachEvent("onBeforeSorting",function(b,d,e){if("connector"==d)return!1;var f=this.getColumnId(b);return a.sort("#"+f+"#","asc"==e?"asc":"desc","int"==d?d:"string"),c.setSortImgState(!0,b,e),!1}),b&&b.filter&&(c.attachEvent("onFilterStart",function(b,d){var e="_con_f_used";return c[e]&&c[e].length?!1:(a.data.silent(function(){a.filter();for(var e=0;e<b.length;e++)if(""!=d[e]){var f=c.getColumnId(b[e]);a.filter("#"+f+"#",d[e],0!=e)}}),a.refresh(),!1)}),c.collectValues=function(b){var c=this.getColumnId(b);return function(a){var b=[],c={};return this.data.each(function(d){var e=d[a];c[e]||(c[e]=!0,b.push(e))}),b.sort(),b}.call(a,c)}),b&&b.select&&c.attachEvent("onRowSelect",function(b){a.setCursor(b)}),c.clearAndLoad=function(b){a.clearAll(),a.load(b)}},dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(a){a.call(this)},this)},dhtmlxEventable(this.data);for(var a="_cCount",b=0;b<this[a];b++)this.columnIds[b]||(this.columnIds[b]="cell"+b);this.attachEvent("onSelectStateChanged",function(a){this.callEvent("onSelectChange",[a])}),this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])}),this.attachEvent("onEditCell",function(a,b){return 2===a&&this.getCursor&&b&&b==this.getCursor()&&this._update_binds(),!0}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(a){if(null===a)return null;var b=this.getRowById(a);if(!b)return null;var c="_attrs",d=dhx.copy(b[c]);d.id=a;for(var e=this.getColumnsNum(),f=0;e>f;f++)d[this.columnIds[f]]=this.cells(a,f).getValue();return d},dhtmlXGridObject.prototype.update=function(a,b){for(var c=0;c<this.columnIds.length;c++){var d=this.columnIds[c];dhx.isUndefined(b[d])||this.cells(a,c).setValue(b[d])}var e="_attrs",f=this.getRowById(a)[e];for(var d in b)f[d]=b[d];this.callEvent("onBindUpdate",[a])},dhtmlXGridObject.prototype.add=function(a,b,c){for(var d=[],e=0;e<this.columnIds.length;e++){var f=this.columnIds[e];d[e]=dhx.isUndefined(b[f])?"":b[f]}this.addRow(a,d,c);var g="_attrs";this.getRowById(a)[g]=dhx.copy(b)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){var a="_f_rowsBuffer";return this.rowsBuffer.length||this[a]||this._settings.dataFeed?!0:!1},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(a,b){if(this._settings.dataFeed){var c={};if(!a&&!b)return;if("function"==typeof a){if(!b)return;a(b,c)}else dhx.isUndefined(a)?c=b:c[a]=b;this.clearAll();var d=this._settings.dataFeed;if("function"==typeof d)return d.call(this,b,c);var e=[];for(var f in c)e.push("dhx_filter["+f+"]="+encodeURIComponent(c[f]));return this.load(d+(d.indexOf("?")<0?"?":"&")+e.join("&")),!1}return null===b?this.filterBy(0,function(){return!1}):void this.filterBy(0,function(c,d){return a.call(this,d,b)})}),window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(a){dhx.BaseBind._unbind.call(this,a)},dhtmlXTreeObject.prototype.dataFeed=function(a){this._settings?this._settings.dataFeed=a:this._server_feed=a},dhtmlXTreeObject.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(a){a.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onSelect",function(a){this.callEvent("onSelectChange",[a])}),this.attachEvent("onEdit",function(a,b){return 2===a&&b&&b==this.getCursor()&&this._update_binds(),!0}))},dhtmlXTreeObject.prototype.item=function(a){return null===a?null:{id:a,text:this.getItemText(a)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(a,b){if(this._settings.dataFeed){var c={};if(!a&&!b)return;if("function"==typeof a){if(!b)return;a(b,c)}else dhx.isUndefined(a)?c=b:c[a]=b;this.deleteChildItems(0);var d=this._settings.dataFeed;if("function"==typeof d)return d.call(this,[data.id||data,data]);var e=[];for(var f in c)e.push("dhx_filter["+f+"]="+encodeURIComponent(c[f]));return this.loadXML(d+(d.indexOf("?")<0?"?":"&")+e.join("&")),!1}},dhtmlXTreeObject.prototype.update=function(a,b){dhx.isUndefined(b.text)||this.setItemText(a,b.text)}),window.dhtmlx||(window.dhtmlx={}),function(){function a(a,b){var d=a.callback;c(!1),a.box.parentNode.removeChild(a.box),h(!1,a.box),o=a.box=null,d&&d(b)}function b(b){if(o){b=b||event;var c=b.which||event.keyCode;return dhtmlx.message.keyboard&&((13==c||32==c)&&a(o,!0),27==c&&a(o,!1)),b.preventDefault&&b.preventDefault(),!(b.cancelBubble=!0)}}function c(a){c.cover||(c.cover=document.createElement("DIV"),c.cover.onkeydown=b,c.cover.className="dhx_modal_cover",document.body.appendChild(c.cover));document.body.scrollHeight;c.cover.style.display=a?"inline-block":"none"}function d(a,b){return"<div class='dhtmlx_popup_button' result='"+b+"' ><div>"+a+"</div></div>"}function e(a){p.area||(p.area=document.createElement("DIV"),p.area.className="dhtmlx_message_area",p.area.style[p.position]="5px",document.body.appendChild(p.area)),p.hide(a.id);var b=document.createElement("DIV");return b.innerHTML="<div>"+a.text+"</div>",b.className="dhtmlx-info dhtmlx-"+a.type,b.onclick=function(){p.hide(a.id),a=null},"bottom"==p.position&&p.area.firstChild?p.area.insertBefore(b,p.area.firstChild):p.area.appendChild(b),a.expire>0&&(p.timers[a.id]=window.setTimeout(function(){p.hide(a.id)},a.expire)),p.pull[a.id]=b,b=null,a.id}function f(b,c,e){var f=document.createElement("DIV");f.className=" dhtmlx_modal_box dhtmlx-"+b.type,f.setAttribute("dhxbox",1);var g="";if(b.width&&(f.style.width=b.width),b.height&&(f.style.height=b.height),b.title&&(g+='<div class="dhtmlx_popup_title">'+b.title+"</div>"),g+='<div class="dhtmlx_popup_text"><span>'+(b.content?"":b.text)+'</span></div><div  class="dhtmlx_popup_controls">',c&&(g+=d(b.ok||"OK",!0)),e&&(g+=d(b.cancel||"Cancel",!1)),b.buttons)for(var h=0;h<b.buttons.length;h++)g+=d(b.buttons[h],h);if(g+="</div>",f.innerHTML=g,b.content){var i=b.content;"string"==typeof i&&(i=document.getElementById(i)),"none"==i.style.display&&(i.style.display=""),f.childNodes[b.title?1:0].appendChild(i)}return f.onclick=function(c){c=c||event;var d=c.target||c.srcElement;if(d.className||(d=d.parentNode),"dhtmlx_popup_button"==d.className){var e=d.getAttribute("result");e="true"==e||("false"==e?!1:e),a(b,e)}},b.box=f,(c||e)&&(o=b),f}function g(a,d,e){var g=a.tagName?a:f(a,d,e);a.hidden||c(!0),document.body.appendChild(g);var i=a.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-g.offsetWidth)/2)),j=a.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-g.offsetHeight)/2));return g.style.top="top"==a.position?"-3px":j+"px",g.style.left=i+"px",g.onkeydown=b,a.enableIframe&&h(!0,g),g.focus(),a.hidden&&(dhtmlx.modalbox.hide(g),h(!1,obj)),g}function h(a,b){1==a?b._ifr||(b._ifr=document.createElement("IFRAME"),b._ifr.frameBorder=10,b._ifr.border=0,b._ifr.setAttribute("src","javascript:false;"),b._ifr.className="dhtmlxmessage_ifr",b._ifr.style.position="absolute",b._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},b.parentNode.insertBefore(b._ifr,b),i(b)):b._ifr&&(b._ifr.parentNode.removeChild(b._ifr),b._ifr=null)}function i(a){a._ifr&&(a._ifr.style.left=a.style.left,a._ifr.style.top=a.style.top,a._ifr.style.width=a.offsetWidth+"px",a._ifr.style.height=a.offsetHeight+"px")}function j(a){return g(a,!0,!1)}function k(a){return g(a,!0,!0)}function l(a){return g(a)}function m(a,b,c){return"object"!=typeof a&&("function"==typeof b&&(c=b,b=""),a={text:a,type:b,callback:c}),a}function n(a,b,c,d){return"object"!=typeof a&&(a={text:a,type:b,expire:c,id:d}),a.id=a.id||p.uid(),a.expire=a.expire||p.expire,a}var o=null;document.attachEvent?document.attachEvent("onkeydown",b):document.addEventListener("keydown",b,!0),dhtmlx.alert=function(){var a=m.apply(this,arguments);return a.type=a.type||"confirm",j(a)},dhtmlx.confirm=function(){var a=m.apply(this,arguments);return a.type=a.type||"alert",k(a)},dhtmlx.modalbox=function(){var a=m.apply(this,arguments);return a.type=a.type||"alert",l(a)},dhtmlx.modalbox.hide=function(a){for(;a&&a.getAttribute&&!a.getAttribute("dhxbox");)a=a.parentNode;a&&(a.parentNode.removeChild(a),c(!1))};var p=dhtmlx.message=function(a){a=n.apply(this,arguments),a.type=a.type||"info";var b=a.type.split("-")[0];switch(b){case"alert":return j(a);case"confirm":return k(a);case"modalbox":return l(a);default:return e(a)}};p.seed=(new Date).valueOf(),p.uid=function(){return p.seed++},p.expire=4e3,p.keyboard=!0,p.position="top",p.pull={},p.timers={},p.hideAll=function(){for(var a in p.pull)p.hide(a)},p.hide=function(a){var b=p.pull[a];b&&b.parentNode&&(window.setTimeout(function(){b.parentNode.removeChild(b),b=null},2e3),b.className+=" hidden",p.timers[a]&&window.clearTimeout(p.timers[a]),delete p.pull[a])}}();