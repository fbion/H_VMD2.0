{"vmdversion":"2.0.3.1108","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"Evars\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"header\":false,\"width\":408,\"height\":600,\"afterrender\":\"Evars_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":-5,\"y\":0,\"layout\":\"border\",\"height\":600,\"border\":false,\"header\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":20,\"anchor\":\"100% 40%\",\"title\":\"系统变量\",\"layout\":\"anchor\",\"header\":false,\"region\":\"north\",\"height\":232,\"border\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel4\",\"layoutConfig\":{},\"userConfig\":{\"border\":false,\"header\":false,\"height\":30,\"anchor\":\"100% \",\"layout\":\"absolute\",\"bodyStyle\":\"font-size: 14px;    border-bottom: 1px solid;    border-bottom-color: rgb(223, 223, 223)\"},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":5,\"text\":\"系统变量\",\"style\":\"font-weight: bold\"}}]},{\"cid\":\"grid\",\"id\":\"MyGrid\",\"layoutConfig\":{},\"userConfig\":{\"height\":171,\"header\":false,\"enableHdMenu\":true,\"disableHeaderClick\":true,\"anchor\":\"100% -30\",\"beforerender\":\"MyGrid_beforerender\",\"afterrender\":\"MyGrid_afterrender\",\"celldblclick\":\"MyGrid_celldblclick\",\"style\":\"margin: 10px;    border: 1px solid;    border-color: rgb(223, 223, 223)\",\"border\":false},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"变量名\",\"dataIndex\":\"varname\",\"align\":\"center\",\"menuDisabled\":true,\"width\":120},\"name\":\"varname\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"变量值\",\"dataIndex\":\"varvalue\",\"align\":\"center\",\"menuDisabled\":true,\"width\":120},\"name\":\"varvalue\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"变量说明\",\"dataIndex\":\"remark\",\"align\":\"center\",\"menuDisabled\":true},\"name\":\"remark\"}]}]},{\"cid\":\"panel\",\"id\":\"panel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":120,\"anchor\":\"100% 60%\",\"title\":\"参数变量\",\"layout\":\"anchor\",\"header\":false,\"region\":\"center\",\"border\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel3\",\"layoutConfig\":{},\"userConfig\":{\"height\":30,\"header\":false,\"bodyStyle\":\"font-size: 14px;    border-bottom: 1px solid;    border-bottom-color: rgb(223, 223, 223)\",\"layout\":\"absolute\",\"border\":false},\"cn\":[{\"cid\":\"label\",\"id\":\"label1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":5,\"text\":\"参数变量\",\"style\":\"font-weight: bold\"}}]},{\"cid\":\"panel\",\"id\":\"panel5\",\"layoutConfig\":{},\"userConfig\":{\"height\":30,\"header\":false,\"layout\":\"absolute\",\"border\":false},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"icon\":\"plus\",\"text\":\"添加\",\"width\":50,\"type\":\"text\",\"size\":\"small\",\"click\":\"button_click\",\"style\":\"color: #5f5f5f;    font-size: 14px;    margin-left: 10px\"}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":0,\"icon\":\"minus\",\"text\":\"删除\",\"width\":50,\"type\":\"text\",\"click\":\"button1_click\",\"style\":\"color: #5f5f5f;    font-size: 14px;    margin-left: 15px\"}},{\"cid\":\"vmdButton\",\"id\":\"button2\",\"layoutConfig\":{},\"userConfig\":{\"icon\":\"edit\",\"text\":\"编辑\",\"width\":50,\"x\":100,\"y\":0,\"type\":\"text\",\"click\":\"button2_click\",\"style\":\"color: #5f5f5f;    font-size: 14px;    margin-left: 20px\"}}]},{\"cid\":\"grid\",\"id\":\"MyGrid1\",\"layoutConfig\":{},\"userConfig\":{\"height\":142,\"header\":false,\"hideHeaders\":false,\"disableHeaderClick\":true,\"enableHdMenu\":true,\"anchor\":\"100% -60\",\"beforerender\":\"MyGrid1_beforerender\",\"celldblclick\":\"MyGrid1_celldblclick\",\"style\":\"margin: 0 10px 10px 10px;    border: 1px solid;    border-color: rgb(223, 223, 223)\"},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"变量名\",\"dataIndex\":\"varname\",\"align\":\"center\",\"menuDisabled\":true,\"width\":120},\"name\":\"varname\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"变量值\",\"dataIndex\":\"varvalue\",\"align\":\"center\",\"menuDisabled\":true,\"width\":120},\"name\":\"varvalue\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"变量说明\",\"dataIndex\":\"remark\",\"align\":\"center\",\"menuDisabled\":true},\"name\":\"remark\"}]}]}]}]}]}","vmdevents":" var selProject_id = \"\";\n // 创建数据集。   系统变量的默认数据\n //  var gridData = [{\n //      id: vmd.getGuid(),\n //      projectid: \"\",\n //      login: vmd.getUserId(),\n //      varname: \"login\",\n //      varvalue: \"\",\n //      remark: \"用户名信息\",\n //      type: \"0\"\n //  }, {\n //      id: vmd.getGuid(),\n //      projectid: \"\",\n //      login: vmd.getUserId(),\n //      varname: \"userid\",\n //      varvalue: \"\",\n //      remark: \"用户id信息\",\n //      type: \"0\"\n //  }, {\n //      id: vmd.getGuid(),\n //      projectid: \"\",\n //      login: vmd.getUserId(),\n //      varname: \"ip\",\n //      varvalue: \"\",\n //      remark: \"ip地址信息\",\n //      type: \"0\"\n //  }];\n\n //  var gridstore = new vmd.data.Store({\n //      data: gridData,\n //      fields: ['id', 'projectid', 'login', 'varname', 'varvalue', 'remark', 'type']\n //  });\n\n\n function editEVar(record, nameonlyread, callback) {\n     var varname = record.get(\"varname\")\n     var varvalue = record.get(\"varvalue\")\n     var remark = record.get(\"remark\")\n     //创建一个form，填写name，备注\n     var form = new Ext.form.FormPanel({\n         labelWidth: 40,\n         labelAlign: \"left\",\n         bodyStyle: \"padding: 10px\",\n         border: false,\n         items: [{\n             id: 'varname',\n             name: 'varname',\n             xtype: \"textfield\",\n             fieldLabel: \"变量名\",\n             allowBlank: false,\n             anchor: \"100%\",\n             value: this.valueName,\n             readOnly: nameonlyread,\n             emptyText: \"请输入变量名称\"\n         }, {\n             id: 'varvalue',\n             name: 'varvalue',\n             xtype: \"textfield\",\n             fieldLabel: \"变量值\",\n             anchor: \"100%\",\n             value: this.valueName\n         }, {\n             id: 'remark',\n             xtype: \"textarea\",\n             allowBlank: true,\n             name: 'remark',\n             anchor: \"100%\",\n             fieldLabel: \"备注\"\n         }]\n     })\n     var win = new Ext.Window({\n         width: 350,\n         height: 250,\n         title: '变量定义',\n         hidden: false,\n         layout: \"fit\",\n         border: false,\n         modal: true,\n         items: form,\n         fbar: [{\n             text: '确定',\n             handler: function() {\n                 if(form.getForm().isValid()) {\n\n                     var values = form.form.getValues()\n                     record.set(\"varname\", values.varname)\n                     record.set(\"varvalue\", values.varvalue)\n                     record.set(\"remark\", values.remark)\n                     if(callback)\n                         callback(record)\n                     // changeEVar(values.varname, values.varvalue, values.remark, function() {\n                     win.close()\n                     //})\n                 }\n             }\n         }, {\n             text: '取消',\n             handler: function() {\n                 win.close()\n             }\n         }]\n     });\n     win.show()\n     form.form.setValues({\n         varname: varname,\n         varvalue: varvalue,\n         remark: remark\n     })\n }\n\n function changeEVar(varname, varvalue, remark, callback) {\n     //MyGrid1.store.\n }\n\n\n\n\n\n\n function MyGrid1_beforerender(sender) {\n     // 设置ID为3的列宽度填满容器剩余宽度\n     MyGrid1.autoExpandColumn = 2;\n }\n\n function MyGrid_beforerender(sender) {\n     //debugger\n     // 设置ID为3的列宽度填满容器剩余宽度\n     MyGrid.autoExpandColumn = 2;\n     //MyGrid.store = gridstore;\n     //debugger\n }\n\n function MyGrid_afterrender(sender) {}\n\n\n\n function MyGrid_celldblclick(sender, rowIndex, columnIndex, e) {\n     var rowrecord = MyGrid.store.getAt(rowIndex);\n     if(rowrecord.data.type == \"2\")//类型为2时 说明时添加的系统参数，只用来展示不能修改\n         return;\n     // editEVar(MyGrid.store.getAt(rowIndex).get(\"varname\"), MyGrid.store.getAt(rowIndex).get(\"varvalue\"), MyGrid.store.getAt(rowIndex).get(\"remark\"))\n     editEVar(rowrecord, true, function(record) {\n         debugger\n         hwDas.save(\"CDEServcie/var/hjbl\", {}, {}, {\n             type: \"0\",\n             project_id: selProject_id,\n             varname: record.data.varname,\n             varvalue: record.data.varvalue,\n             remark: record.data.remark\n         }, function() {\n             //MyGrid1.store.add(record)\n         }, function() {})\n     })\n }\n\n function MyGrid1_celldblclick(sender, rowIndex, columnIndex, e) {\n\n     var rowrecord = MyGrid1.store.getAt(rowIndex);\n     editEVar(rowrecord, false, function(record) {\n         hwDas.save(\"CDEServcie/var/hjbl\", {}, {}, {\n             type: \"1\",\n             project_id: selProject_id,\n             varname: record.data.varname,\n             varvalue: record.data.varvalue,\n             remark: record.data.remark\n         }, function() {\n             //MyGrid1.store.add(record)\n         }, function() {})\n     })\n }\n\n function Evars_afterrender(sender) {\n\n }\n\n function button_click(sender, e) {\n     // 创建record行记录。 \n     var record = vmd.data.Record.create({\n         id: vmd.getGuid(),\n         projectid: selProject_id||\"\",\n         login: vmd.getUserId(),\n         varname: \"\",\n         varvalue: \"\",\n         remark: \"\",\n         type: \"1\"\n     })\n     editEVar(record, false, function(record) {\n\n         hwDas.save(\"CDEServcie/var/hjbl\", {}, {}, {\n             type: \"1\",\n             project_id: selProject_id,\n             varname: record.data.varname,\n             varvalue: record.data.varvalue,\n             remark: record.data.remark\n         }, function() {\n             MyGrid1.store.add(record)\n         }, function() {})\n     })\n }\n\n function button2_click(sender, e) {\n     var selmod = MyGrid1.getSelectionModel();\n     if(selmod && selmod.selections && selmod.selections.items.length > 0) {\n         editEVar(selmod.selections.items[0], false, function(record) {\n             hwDas.save(\"CDEServcie/var/hjbl\", {}, {}, {\n                 type: \"1\",\n                 project_id: selProject_id,\n                 varname: record.data.varname,\n                 varvalue: record.data.varvalue,\n                 remark: record.data.remark\n             }, function() {\n                 //MyGrid1.store.add(record)\n             }, function() {})\n         })\n     }\n }\n\n function button1_click(sender, e) {\n     var selmod = MyGrid1.getSelectionModel();\n     if(selmod && selmod.selections && selmod.selections.items.length > 0) {\n         hwDas.del(\"CDEServcie/var/hjbl\", {}, {\n             type: \"1\",\n             project_id: selProject_id,\n             varname: selmod.selections.items[0].data.varname\n         }, function() {\n             MyGrid1.store.remove(selmod.selections.items[0]); // editEVar(selmod.selections.items[0], false)\n         }, function() {})\n     }\n\n }","vmdcss":".x-grid3-header {\r\n    background: #f5f9fc;\r\n    border-top: 1px solid;\r\n    border-bottom: 1px solid;\r\n    border-top-color: #ededed;\r\n    border-bottom-color: #ededed;\r\n}\r\n\r\n.x-grid3-row td {\r\n    font-size: 14px;\r\n    color:#5f5f5f;\r\n    border-right: 1px solid;\r\n    border-right-color: #ededed;\r\n    padding-left: 0;\r\n}\r\n\r\n.x-grid3-hd-row td {\r\n    font-size: 14px;\r\n    border-right: 0;\r\n    border-left:1px solid;\r\n    border-left-color:#ededed;\r\n}\r\n.x-grid3-row {\r\n    border-right: 0 solid;\r\n}\r\n\r\n\r\n   /*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\r\n::-webkit-scrollbar\r\n{\r\n    width: 5px;\r\n    height: 16px;\r\n    background-color: white;\r\n}\r\n \r\n/*定义滚动条轨道 内阴影+圆角*/\r\n::-webkit-scrollbar-track\r\n{\r\n    -webkit-box-shadow: inset 0 0 6px white;\r\n    border-radius: 5px;\r\n    background-color: white;\r\n}\r\n \r\n/*定义滑块 内阴影+圆角*/\r\n::-webkit-scrollbar-thumb\r\n{\r\n    border-radius: 3px;\r\n    -webkit-box-shadow: inset 0 0 4px #9b9b9b;\r\n    background-color: #9b9b9b;\r\n}","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"getSysVarDefStore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getSysVarDefStore\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"获取系统变量默认数据集\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nreturn gridStore;\",\"returnType\":\"对象\"}},{\"cid\":\"uxmethod\",\"id\":\"getEVarsInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getEVarsInfo\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"saveEVarsInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"saveEVarsInfo\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setParamvarStore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setParamvarStore\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"store\",\"code\":\"//直接填写方法内容\\ndebugger\\nMyGrid1.store=store;\\n\\nMyGrid1.store.load();\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setSysVarStore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setSysVarStore\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"store\",\"code\":\"//直接填写方法内容\\ndebugger\\nMyGrid.store=store;\\nMyGrid.store.load();\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setProject_id\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setProject_id\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"project_id\",\"code\":\"//直接填写方法内容\\nselProject_id=project_id\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}"}