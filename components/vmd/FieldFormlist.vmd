{"vmdversion":"2.0.5.191228","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"FieldFormlist\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"header\":false,\"width\":212,\"height\":\"\",\"autoHeight\":true,\"style\":\"min-height:45px;\",\"border\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"autoWidth\":true,\"autoHeight\":true,\"width\":212,\"afterrender\":\"hwDiv_afterrender\",\"style\":\"border: 1px solid #ddd;    padding: 0 5px 5px 5px;\"}}]}]}","vmdevents":"var myForm = null;\nvar storelist = null;\nvar dataVX = 0;\nvar seleField = [];\nvar page = this;\nvar myData = null;\nvar FieldSend = null;\nvar fieldIndex = 0;\nvar view1store = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: ['id', 'name']\n});\nvar view2store = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: ['pDas', 'id', 'name', 'index']\n});\n\nfunction hwDiv_afterrender(sender) {\n    var formData = [{\n        type: \"block\",\n        className: 'field-from',\n        blockOffset: 0,\n        list: [{\n            type: \"block\",\n            blockOffset: 0,\n            list: [{\n                type: \"label\",\n                label: '模板字段',\n                labelWidth: 80\n            }, , {\n                type: \"newcolumn\"\n            }, {\n                type: \"label\",\n                label: '数据集字段',\n                labelWidth: 110\n            }]\n        }]\n    }];\n\n    myForm = new dhtmlXForm(hwDiv.id, formData);\n}\n\n\nfunction setValue(data) {\n    if (vmd.isArray(data)) {\n        seleField = data;\n    } else {\n\n    }\n}\n\nfunction getValue() {\n    return seleField;\n}\n\nfunction bindData(data) {\n    myData = data;\n    if (myForm) {\n        hwDiv.el.dom.innerHTML = ' ';\n    }\n    var formData = [{\n        type: \"block\",\n        className: 'field-from',\n        blockOffset: 0,\n        list: [{\n            type: \"block\",\n            blockOffset: 0,\n            list: [{\n                type: \"label\",\n                label: '模板字段',\n                labelWidth: 70\n            }, , {\n                type: \"newcolumn\"\n            }, {\n                type: \"label\",\n                label: '数据集字段',\n                labelWidth: 100\n            }]\n        }]\n    }];\n\n    var fieldsData = [];\n    var dasData = [];\n\n    seleField = data.fields;\n  \n    var das = xds.vmd.getStoreByDsName(data.source, true)\n    var options = [];\n    \n    if (das && das.childNodes && das.childNodes.length > 0) {\n        das.childNodes.forEach(function(value, i) {\n            options.push({\n                text: value.text,\n                value: value.text,\n            })\n        })\n    }\n    for (var i = 0; i < data.fieldNames.length; i++) {\n        var obj = {\n            type: \"block\",\n            blockOffset: 0,\n            list: [{\n                type: \"combo\",\n                labelWidth: 70,\n                labelTop:5,\n                offsetTop:3,\n                label: data.fieldNames[i],\n                width: 110,\n                name: \"field\"+i,\n                options: options,\n                value:''\n            }]\n        }\n        formData[0].list.push(obj);\n    }\n\n    myForm = new dhtmlXForm(hwDiv.id, formData);\n    \n    for(var j =0;j<seleField.length;j++){\n        myForm.setItemValue(\"field\"+j, seleField[j] || \" \");\n    }\n    \n    myForm.attachEvent(\"onChange\", function(name, value) {\n        fieldIndex = parseFloat(name.slice(5))\n        seleField[fieldIndex] = value;\n        page.fireEvent('change', page, seleField);\n    })\n\n}\n","vmdcss":"\r\n.dhxform_obj_material .field-from .dhxform_item_label_left .dhxform_label{\r\n    margin-left: 4px;\r\n    margin-top: 10px;\r\n}\r\n.dhxform_obj_material .field-from .dhxform_label {\r\n    font-size: 12px;\r\n}\r\n\r\n.dhxform_obj_material .field-from .dhxform_fs legend.fs_legend {\r\n    font-size: 12px;\r\n}\r\n\r\n.dhxform_obj_material .field-from .dhxform_item_label_left {\r\n    margin-top: -6px;\r\n}\r\n\r\n.dhxform_obj_material .field-from .dhxform_textarea{\r\n    height: 16px;\r\n    border: 1px solid #ddd;\r\n    border-right: none;\r\n}\r\n.dhxform_obj_material .field-from .dhxform_btn {\r\n    margin: 0;\r\n    margin-top: 5px;\r\n    background-image: url('/components/ux/fieldform/1.0/img/箭头.png');\r\n    background-size: 70%;\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n}\r\n.dhxform_obj_material .field-from .dhxform_btn .dhxform_btn_txt{\r\n    height: 24px;\r\n    border-radius:0; \r\n}\r\n.dhxform_obj_material .field-from .dhxform_btn:focus {\r\n    border-color: #ddd;\r\n    border-width: 1px;\r\n    margin: 0 1px;\r\n    margin-top: 5px;\r\n    color: rgb(245,245,245);\r\n}\r\n\r\n.dhxform_obj_material .field-from .dhxform_txt_label2{\r\n    font-size: 12px;\r\n    font-weight: normal;\r\n}\r\n.field-from-info,.field-from-info-child{\r\n    height: 24px;\r\n    line-height: 24px;\r\n    padding: 0 5px;\r\n    border-bottom: 1px solid #ddd;\r\n    position: relative;\r\n    cursor: pointer;\r\n}\r\n.field-from-ico{\r\n    position: absolute;\r\n    right: 0px;\r\n    top: 2px;\r\n    display: inline-block;\r\n    width: 20px;\r\n    height: 20px;\r\n    background-image: url('/components/ux/fieldform/1.0/img/右箭头.png');\r\n    background-size: 70%;\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    \r\n}\r\n.dhxform_obj_material .field-from  .dhxform_control{\r\n    border: 1px solid #ddd;\r\n    margin-top: 5px;\r\n}\r\n.ext-el-mask {\r\n    background-color: #ddd !important ;\r\n    opacity: 0.2 ;\r\n}","vmdprops":"\"\"","type":"ux","vmdcmpdeps":[],"vmdevents_controller":"Ext.define('vmd.ux.fieldForm.Controller', {\n    xtype: 'vmd.ux.fieldForm.Controller',\n    constructor: function(options) {\n        \n    }\n})","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"bindData\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"bindData\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"data\",\"code\":\"//直接填写方法内容\\nbindData(data)\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"getValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getValue\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\ngetValue()\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setValue\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"data\",\"code\":\"//直接填写方法内容\\nsetValue(data)\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxevent\",\"id\":\"change\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"change\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"feilds\",\"code\":\"\"}}]}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resimg\",\"id\":\"components/ux/fieldform/1.0/img/箭头.png\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"components/ux/fieldform/1.0/img/箭头.png\",\"path\":\"components/ux/fieldform/1.0/img/箭头.png\",\"absolutePath\":\"{{vmduxpath}}/components/ux/fieldform/1.0/img/箭头.png\",\"ext\":\"png\"}},{\"cid\":\"resimg\",\"id\":\"components/ux/fieldform/1.0/img/右箭头.png\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"components/ux/fieldform/1.0/img/右箭头.png\",\"path\":\"components/ux/fieldform/1.0/img/右箭头.png\",\"absolutePath\":\"{{vmduxpath}}/components/ux/fieldform/1.0/img/右箭头.png\",\"ext\":\"png\"}}]}]}"}