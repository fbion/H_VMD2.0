{"vmdversion":"2.0.4.190627","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"CellTypeProperty\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"header\":false,\"width\":290,\"height\":656,\"beforerender\":\"CellTypeProperty_beforerender\",\"autoScroll\":true},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":10,\"height\":20,\"text\":\"类型：\"}},{\"cid\":\"vmdComlist\",\"id\":\"cmbType\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":7,\"width\":220,\"id\":\"cmbType\",\"beforerender\":\"cmbType_beforerender\",\"selectChanged\":\"cmbType_selectChanged\"}},{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"x\":-1,\"y\":40,\"height\":656,\"layout\":\"fit\",\"width\":290,\"border\":false,\"hidden\":false},\"cn\":[{\"cid\":\"vmd.ux.ComboTypeProperty\",\"id\":\"ComboTypeProperty\",\"layoutConfig\":{},\"userConfig\":{\"x\":510,\"y\":40,\"height\":618,\"hidden\":true,\"width\":328,\"widthChange\":\"ComboTypeProperty_widthChange\",\"putData\":\"ComboTypeProperty_putData\"}},{\"cid\":\"vmd.ux.NestedTableType\",\"id\":\"NestedTableType\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"width\":328,\"height\":618}},{\"cid\":\"vmd.ux.TextTypeProperty\",\"id\":\"TextTypeProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"width\":328,\"height\":618,\"disabled\":false,\"lengthChange\":\"TextTypeProperty_lengthChange\"}},{\"cid\":\"vmd.ux.ProgressBarType\",\"id\":\"ProgressBarType\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"width\":328,\"height\":618,\"pbtDecimalChanged\":\"ProgressBarType_pbtDecimalChanged\",\"pbtColorChanged\":\"ProgressBarType_pbtColorChanged\"}},{\"cid\":\"vmd.ux.GraphicType\",\"id\":\"GraphicType\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"width\":328,\"height\":618}},{\"cid\":\"vmd.ux.DateProperty\",\"id\":\"DateProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true}},{\"cid\":\"vmd.ux.UploadProperty\",\"id\":\"UploadProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"UploadChange\":\"UploadProperty_UploadChange\"}},{\"cid\":\"vmd.ux.RichTextProperty\",\"id\":\"RichTextProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"RTPChange\":\"RichTextProperty_RTPChange\"}},{\"cid\":\"vmd.ux.CheckBoxProperty\",\"id\":\"CheckBoxProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"putData\":\"CheckBoxProperty_putData\"}},{\"cid\":\"vmd.ux.NumberProperty\",\"id\":\"NumberProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"thePageChange\":\"NumberProperty_thePageChange\"}},{\"cid\":\"vmd.ux.ApprovlProperty\",\"id\":\"ApprovlProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"APchange\":\"ApprovlProperty_APchange\"}},{\"cid\":\"vmd.ux.RadioButtonProperty\",\"id\":\"RadioButtonProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"RBPchange\":\"RadioButtonProperty_RBPchange\",\"putData\":\"RadioButtonProperty_putData\"}},{\"cid\":\"vmd.ux.DropDownTreeProperty\",\"id\":\"DropDownTreeProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"DropDownTreeWidthChange\":\"DropDownTreeProperty_DropDownTreeWidthChange\"}},{\"cid\":\"vmd.ux.DropDownGridProperty\",\"id\":\"hwDropDownGridProperty\",\"layoutConfig\":{},\"userConfig\":{\"disabled\":false,\"hidden\":true,\"putData\":\"hwDropDownGridProperty_putData\"}},{\"cid\":\"vmd.ux.ButtonProperty\",\"id\":\"hwButtonProperty\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true}}]}]}]}","vmdevents":"var page = this;\r\n// if(page.o && page.o.nestedNo) {\r\n//     page.qtb = page.o.nestedNo;\r\n// }else{\r\n//     page.qtb = null;\r\n// }\r\nvar store = new Ext.data.JsonStore({\r\n    proxy: new Ext.data.MemoryProxy(),\r\n    fields: ['cellType', 'describe']\r\n});\r\nvar data = [{\r\n        cellType: 'cg',\r\n        describe: '常规'\r\n    },\r\n    {\r\n        cellType: 'wb',\r\n        describe: '文本'\r\n    }, {\r\n        cellType: 'sz',\r\n        describe: '数字'\r\n    }, {\r\n        cellType: 'xlk',\r\n        describe: '下拉框'\r\n    }, {\r\n        cellType: 'xls',\r\n        describe: '下拉树'\r\n    }, {\r\n        cellType: 'xlwg',\r\n        describe: '下拉网格'\r\n    }, {\r\n        cellType: 'dxan',\r\n        describe: '单选按钮'\r\n    }, {\r\n        cellType: 'fxk',\r\n        describe: '复选框'\r\n    }, {\r\n        cellType: 'sczj',\r\n        describe: '上传组件'\r\n    }, {\r\n        cellType: 'qtb',\r\n        describe: '嵌套表'\r\n    }, {\r\n        cellType: 'fwb',\r\n        describe: '富文本'\r\n    },\r\n    // {\r\n    //     cellType: 'tx',\r\n    //     describe: '图形'\r\n    // }, {\r\n    //     cellType: 'jdt',\r\n    //     describe: '进度条'\r\n    // },\r\n    {\r\n        cellType: 'spzj',\r\n        describe: '审批组件'\r\n    }, {\r\n        cellType: 'rq',\r\n        describe: '日期'\r\n    }, {\r\n        cellType: 'an',\r\n        describe: '按钮'\r\n    }\r\n];\r\nstore.loadData(data);\r\n//\r\nfunction cmbType_beforerender(sender) {\r\n    cmbType.store = store;\r\n    cmbType.displayField = 'describe';\r\n    cmbType.valueField = 'cellType'\r\n}\r\n\r\n//下拉框全部隐藏\r\nfunction closeOther() {\r\n    TextTypeProperty.hide();\r\n    ComboTypeProperty.hide();\r\n    CheckBoxProperty.hide();\r\n    NumberProperty.hide()\r\n    RadioButtonProperty.hide()\r\n    UploadProperty.hide()\r\n    ApprovlProperty.hide()\r\n    DropDownTreeProperty.hide()\r\n    RichTextProperty.hide()\r\n    NestedTableType.hide()\r\n    GraphicType.hide()\r\n    hwButtonProperty.hide()\r\n    ProgressBarType.hide()\r\n    DateProperty.hide()\r\n    hwButtonProperty.hide();\r\n    hwDropDownGridProperty.hide()\r\n}\r\n\r\nfunction TextTypeProperty_lengthMax(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction TextTypeProperty_lengthMin(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction setInfo(info, sheet, obj) {\r\n    \r\n    page.info = info;\r\n    page.o = sheet;\r\n    page.cells = obj;\r\n    if(page.info && page.info.cellAttributeInfo && page.info.cellAttributeInfo.cellInfoToJson) {\r\n        var d = page.info.cellAttributeInfo.cellInfoToJson();\r\n        cmbType.setValue(d.contentInfo[0].cmbType.value)\r\n\r\n        var selected = d.contentInfo[0].cmbType.value;\r\n        closeOther();\r\n        \r\n        if(selected == \"an\") {\r\n            if(d) {\r\n                hwButtonProperty.setInfo(d)\r\n            }\r\n            hwButtonProperty.show()\r\n        }\r\n        if(selected == \"wb\") {\r\n            if(d) {\r\n                TextTypeProperty.setInfo(d)\r\n            }\r\n            TextTypeProperty.show()\r\n        }\r\n        if(selected == \"sz\") {\r\n            if(d) {\r\n                NumberProperty.setInfo(d)\r\n            }\r\n            NumberProperty.show()\r\n        }\r\n        if(selected == \"xlk\") {\r\n            if(d) {\r\n                ComboTypeProperty.setInfo(d)\r\n            }\r\n            ComboTypeProperty.show()\r\n        }\r\n        if(selected == \"dxan\") {\r\n            if(d) {\r\n                RadioButtonProperty.setInfo(d)\r\n            }\r\n            RadioButtonProperty.show()\r\n        }\r\n        if(selected == \"fxk\") {\r\n            if(d) {\r\n                CheckBoxProperty.setInfo(d)\r\n            }\r\n            CheckBoxProperty.show()\r\n        }\r\n        if(selected == \"sczj\") {\r\n            if(d) {\r\n                UploadProperty.setInfo(d)\r\n            }\r\n            UploadProperty.show()\r\n        }\r\n        if(selected == \"qtb\") {\r\n            if(d) {\r\n                NestedTableType.setInfo(d.cell_NestedTableInfo[0], page.o)\r\n            }\r\n            NestedTableType.show()\r\n        }\r\n        if(selected == \"fwb\") {\r\n            if(d) {\r\n                RichTextProperty.setInfo(d)\r\n            } //有事件\r\n            RichTextProperty.show()\r\n        }\r\n        // if(selected == \"tx\") {\r\n        //     if(d) {\r\n        //         GraphicType.setInfo(d.cell_GraphicInfo[0])\r\n        //     }\r\n        //     GraphicType.show()\r\n        // }\r\n        // if(selected == \"jdt\") {\r\n        //     if(d) {\r\n        //         ProgressBarType.setInfo(d.cell_ProgressBarInfo[0])\r\n        //     }\r\n        //     ProgressBarType.show()\r\n        // }\r\n        if(selected == \"spzj\") {\r\n            if(d) {\r\n                ApprovlProperty.setInfo(d)\r\n            }\r\n            ApprovlProperty.show()\r\n        }\r\n        if(selected == \"rq\") {\r\n            if(d) {\r\n                DateProperty.setInfo(d)\r\n            }\r\n            DateProperty.show();\r\n        }\r\n        if(selected == \"xls\") { //只有数据和事件\r\n            if(d) {\r\n                DropDownTreeProperty.setInfo(d, page.cells)\r\n            }\r\n            DropDownTreeProperty.show()\r\n        }\r\n        if(selected == 'xlwg') {\r\n            if(d) {\r\n                hwDropDownGridProperty.setInfo(d, page.cells);\r\n            }\r\n            hwDropDownGridProperty.show();\r\n        }\r\n    }\r\n    // cmbType_selectChanged()\r\n\r\n}\r\n\r\nfunction setCellStyle(value, type, sender) {\r\n    if(page.info) {\r\n        var temp = page.info.cellAttributeInfo;\r\n        for(var i = 0; i < page.cells.length; i++) {\r\n            temp.setCellInfos(sender.initialConfig.id, value);\r\n            page.o.setCellMeta(page.cells[i].r, page.cells[i].c, 'cellAttributeInfo', temp)\r\n            page.o.setCellMeta(page.cells[i].r, page.cells[i].c, 'theCellChanged', true)\r\n        }\r\n    }\r\n}\r\n\r\nfunction setData(id, value) {\r\n    if(page.info) {\r\n        var temp = page.info.cellAttributeInfo;\r\n        for(var i = 0; i < page.cells.length; i++) {\r\n            temp.setCellInfos(id, value);\r\n            page.o.setCellMeta(page.cells[i].r, page.cells[i].c, 'cellAttributeInfo', temp)\r\n            page.o.setCellMeta(page.cells[i].r, page.cells[i].c, 'theCellChanged', true)\r\n        }\r\n    }\r\n}\r\n\r\nfunction cmbType_selectChanged(sender, combo, record, index) {\r\n    closeOther()\r\n    if(page.info) {\r\n        \r\n        var d = page.info.cellAttributeInfo.cellInfoToJson();\r\n        switch (cmbType.getText()) {\r\n            case \"文本\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                TextTypeProperty.show();\r\n                TextTypeProperty.setInfo(d)\r\n                break;\r\n            case \"数字\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                NumberProperty.show();\r\n                NumberProperty.setInfo(d)\r\n                break;\r\n            case \"下拉框\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                ComboTypeProperty.show();\r\n                ComboTypeProperty.setInfo(d)\r\n                break;\r\n            case \"单选按钮\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                RadioButtonProperty.show();\r\n                RadioButtonProperty.setInfo(d)\r\n                break;\r\n            case \"复选框\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                CheckBoxProperty.show();\r\n                CheckBoxProperty.setInfo(d)\r\n                break;\r\n            case \"上传组件\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                UploadProperty.show();\r\n                UploadProperty.setInfo(page.info.cellAttributeInfo)\r\n                break;\r\n            case \"审批组件\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                ApprovlProperty.show();\r\n                ApprovlProperty.setInfo(d)\r\n                break;\r\n            case \"日期\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                DateProperty.show()\r\n                DateProperty.setInfo(d)\r\n                break;\r\n            case \"按钮\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                hwButtonProperty.show();\r\n                hwButtonProperty.setInfo(d)\r\n                break;\r\n            case \"嵌套表\":\r\n                if(page.o && page.o.nestedNo == null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                NestedTableType.show();\r\n                NestedTableType.setInfo(d.cell_NestedTableInfo[0])\r\n                break;\r\n                // case \"图形\":\r\n                //     if(page.o && page.o.nestedNo != null) {\r\n                //         page.o.nestedTableHandle();\r\n                //     }\r\n                //     GraphicType.show();\r\n                //     GraphicType.setInfo(d.cell_GraphicInfo[0])\r\n                //     break;\r\n                // case \"进度条\":\r\n                //     if(page.o && page.o.nestedNo != null) {\r\n                //         page.o.nestedTableHandle();\r\n                //     }\r\n                //     ProgressBarType.show();\r\n                //     ProgressBarType.setInfo(d.cell_ProgressBarInfo[0])\r\n                //     break;\r\n            case \"富文本\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                RichTextProperty.show();\r\n                RichTextProperty.setInfo(d)\r\n                break;\r\n            case \"下拉树\":\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                DropDownTreeProperty.show();\r\n                DropDownTreeProperty.setInfo(page.info.cellAttributeInfo)\r\n                break;\r\n            case '按钮':\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                hwButtonProperty.show();\r\n                hwButtonProperty.setInfo(page.info.cellAttributeInfo);\r\n                break;\r\n            case '下拉网格':\r\n                debugger\r\n                if(page.o && page.o.nestedNo != null) {\r\n                    page.o.nestedTableHandle();\r\n                }\r\n                hwDropDownGridProperty.show();\r\n                hwDropDownGridProperty.setInfo(page.info.cellAttributeInfo);\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nfunction NumberProperty_thePageChange(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction DropDownTreeProperty_DropDownTreeWidthChange(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction ComboTypeProperty_widthChange(sender, value, describe) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction UploadProperty_UploadChange(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction RichTextProperty_RTPChange(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction RadioButtonProperty_RBPchange(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction TextTypeProperty_lengthChange(sender, value) {\r\n    debugger\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction ProgressBarType_pbtDecimalChanged(sender, value, describe) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction ProgressBarType_pbtColorChanged(sender, value, describe) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction ApprovlProperty_APchange(sender, value) {\r\n    setCellStyle(value, null, sender)\r\n}\r\n\r\nfunction ComboTypeProperty_putData(id, value) {\r\n    setData(id, value)\r\n}\r\n\r\nfunction RadioButtonProperty_putData(id, value) {\r\n    setData(id, value)\r\n}\r\n\r\nfunction CheckBoxProperty_putData(id, value) {\r\n    setData(id, value)\r\n}\r\n\r\nfunction hwDropDownGridProperty_putData(sender, id, value) {\r\n    setData(id, value)\r\n}\r\n\r\nfunction CellTypeProperty_afterrender(sender) {\r\n\r\n}\r\n\r\nfunction CellTypeProperty_beforerender(sender){\r\n\r\n}","vmdcss":".b{\n    border: 1px solid #ddd\n}","vmdprops":"\"\"","type":"ux","vmdevents_controller":"Ext.define('vmd.ux.cellTypeProperty.Controller', {\n    xtype: 'vmd.ux.cellTypeProperty.Controller',\n    constructor: function(options) {\n        \n    }\n})","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"setInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setInfo\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"info,cell,obj\",\"code\":\"//直接填写方法内容\\nsetInfo(info,cell,obj);\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}