{"vmdversion":"vmd2.0.5.200306","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"TestEditor\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"anchor\",\"header\":false,\"width\":910,\"height\":\"\",\"autoHeight\":true,\"html\":\"<div class=\\\"container\\\">\\n    <div class=\\\"content\\\">\\n        <div id=\\\"myEditor\\\">\\n        </div>\\n        <!-- <div id=\\\"iconList\\\" class=\\\"uploader-list\\\">        </div>        <div id=\\\"filePicker\\\" class=\\\"webuploader-container\\\" style=\\\"margin:20px 0 20px 0;float: left;height:30px;padding-right: 8px;text-aligin:center;\\\">            <img id=\\\"imgbtn\\\" src=\\\"/img/public/附件.png\\\" />        </div>        <div id=\\\"chooseObj\\\">        </div>        <div id=\\\"btnList\\\">        </div> -->\\n    </div>\\n</div>\",\"style\":\"margin: 0 auto;\",\"afterrender\":\"TestEditor_afterrender\"}}]}","vmdevents":"var page = this;\nvar iconUploader, editor;\n\nfunction TestEditor_afterrender(sender) {\n    vmd.loadCss(vmd.virtualPath + '/lib/webuploader/webuploader.css');\n    $LAB.script(vmd.virtualPath + '/lib/ueditor/ueditor/ueditor.config.js')\n        .script(vmd.virtualPath + '/lib/webuploader/webuploader.js')\n        .script(vmd.virtualPath + '/lib/ueditor/ueditor/ueditor.all.js')\n        .script(vmd.virtualPath + '/lib/ueditor/ueditor/lang/zh-cn/zh-cn.js')\n        .wait(function() {\n            editor = UE.getEditor('myEditor', {\n                toolbars: [\n                    [\n                        'fullscreen', 'source', '|', 'undo', 'redo', '|',\n                        'bold', 'italic', /*'underline',*/ 'fontborder', 'strikethrough', 'superscript', 'subscript', 'removeformat', 'formatmatch', 'autotypeset', 'blockquote', 'pasteplain', '|', 'forecolor', 'backcolor', 'insertorderedlist', 'insertunorderedlist', '|',\n                        //'simpleupload', \n                        'insertimage', '|', 'selectall', 'cleardoc', '|', 'fontfamily', //字体 \n                        'fontsize', //字号 \n                        'link', //超链接 \n                        /* 'paragraph', //段落格式 */\n                        'snapscreen', //截图 \n                        'inserttable' //插入表格 \n                    ]\n                ],\n                initialFrameHeight: 600,\n                autoHeightEnabled: true,\n                autoFloatEnabled: true\n            });\n\n            var serverurl = hwDas.getuploadurl(\"wdk\", \"\");\n            var iconUploader = WebUploader.create({\n                // 选完文件后，是否自动上传。\n                auto: true,\n                // swf文件路径\n                swf: vmd.virtualPath + '/lib/webuploader/Uploader.swf',\n                // 文件接收服务端url\n                server: serverurl,\n                // 内部根据当前运行是创建，可能是input元素，也可能是flash.\n                pick: {\n                    id: '#filePicker',\n                    multiple: true\n                },\n\n                fileSingleSizeLimit: 1 * 1024 * 1024, //限制大小1M，单文件\n                // 只允许选择图片文件。\n                accept: {\n                    title: 'text',\n                    extensions: 'pdf,doc,ppt,pptx,docx,xlsx,xls',\n                    mimeTypes: '.pdf,.doc,.ppt,.pptx,.docx,.xlsx,.xls'\n                }\n            });\n            // 当有文件添加进来的时候\n            iconUploader.on('fileQueued', function(file) {\n                $('.uploader-list').css(\"display\", \"block\"); //修改display属性为block\n                var $list = $(\"#iconList\");\n                /*$list.html('');*/\n                var $li = $(\n                    '<div id=\"' + file.id + '\" class=\"file-item thumbnail\" style=\"float:left;margin-right:10px;\">' +\n                    '<div class=\"info\" style=\"font-weight: 700;text-align: left;margin-top: 0x;margin-bottom: 5px;margin-left: 5px;line-height: 30px;\">' + file.name +\n                    '&nbsp;<img id=\"img' + file.id + '\" src=\"{资源中心&&资源中心服务器}/images/downLoad.gif\"  style=\"float:right;\"/>' +\n                    '</div>' +\n                    '<div class=\"progress\"><div></div></div>' +\n                    '</div>'\n                );\n                // $list为容器jQuery实例\n                $list.append($li);\n                page.fireEvent('uploadFinish', UploadComponent, 'test');\n\n            });\n            // 文件上传成功，给item添加成功class, 用样式标记上传成功。\n            iconUploader.on('uploadSuccess', function(file, response) {\n                var url = \"platform/v1/doc\";\n                var hwDao = new HwDao(ip, 'webxpt'); //地址:端口和授权码(服务管理员分配)\n                if(response.data.length > 0) {\n                    //保存文件信息到文档库中\n                    var fileInfo = response.data[0];\n                    file.doctype = \"TZGG\"; //标识文档类型\n                    file.docfilenamewithpath = fileInfo.path;\n                    file.name = fileInfo.name;\n                    file.size = fileInfo.size;\n                    file.ext = fileInfo.extend;\n\n                    var $li = $('#' + file.id),\n                        $error = $li.find('div.success');\n                    // 避免重复创建\n                    if(!$error.length) {\n                        $error = $('<div class=\"success\" style=\"margin-left: 5px;\"></div>').appendTo($li);\n                    }\n                    var doc = {\n                        appid: file.appid,\n                        docname: file.name,\n                        docfilenamewithpath: file.docfilenamewithpath,\n                        docfilesize: file.size,\n                        doctype: file.doctype,\n                        docext: file.ext //扩展名\n                    };\n                    // hwDao.add(url, {}, {}, doc, function(docd) {\n                    var docObj = {\n                        path: docd.data[0].datas.docfilenamewithpath,\n                        docid: docd.data[0].datas.docid,\n                        docname: docd.data[0].datas.docname\n                    }\n                    //添加删除按钮\n                    $(\"#img\" + file.id).after(\"<a herf='#' style='text-decoration:none;color:red;cursor: pointer;' class='btnspan' onclick=delFile('\" + file.id + \"','\" + docd.data[0].datas.docid + \"')>删除</a>\");\n                    $(\"#img\" + file.id).hide();\n\n                    docids.push(docObj);\n\n\n                    // }, function(ert) {\n                    $error.text('上传失败');\n                    // });\n                }\n\n            });\n\n            // 文件上传失败，显示上传出错。\n            iconUploader.on('uploadError', function(file) {\n                var $li = $('#' + file.id),\n                    $error = $li.find('div.error');\n\n                // 避免重复创建\n                if(!$error.length) {\n                    $error = $('<div class=\"error\" style=\"margin-left: 5px;\"></div>').appendTo($li);\n                }\n                $error.text('上传失败');\n            });\n        });\n}","vmdcss":"/*ie8及ie8以下版本placeholder的样式*/\r\n.placeholder {\r\n    color: #b7b7b7 !important;\r\n}\r\n\r\n/************文本框样式************/\r\n.inputstyle {\r\n    width: 90%;\r\n    height: 100%;\r\n    border: none !important;\r\n    padding: 0 8px;\r\n    text-align: center;\r\n    font-size: 20px;\r\n    height: 50px;\r\n}\r\n\r\n.content {\r\n    /*border: 1px solid #9bc5ea;*/\r\n    width: 900px;\r\n    /*height: 185px;*/\r\n    margin: 0 auto;\r\n    padding-top: 10px;\r\n}\r\n\r\n.title {\r\n    margin: 0 auto;\r\n    text-align: center;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.edui-default .edui-editor {\r\n    border: 0px solid #d4d4d4 !important;\r\n    background-color: white;\r\n    position: relative;\r\n    overflow: visible;\r\n    -webkit-border-radius: 4px;\r\n    -moz-border-radius: 4px;\r\n    border-radius: 4px;\r\n}\r\n.webuploader-pick {\r\n    background: #fafafa !important;\r\n}\r\n.webuploader-pick {\r\n    padding: 0 !important;\r\n}","vmdprops":"\"\"","type":"ux","vmdcmpdeps":[],"vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}