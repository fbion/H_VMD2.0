{"vmdversion":"2.0.4.190627","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"TaskOperMonSn\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"header\":false,\"width\":1160,\"height\":387,\"afterrender\":\"TaskOperMonSn_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":\"\",\"y\":\"\",\"height\":385,\"title\":\"任务运行监控\",\"width\":1150,\"header\":true,\"padding\":\"5\"},\"cn\":[{\"cid\":\"vmd.ux.CreateCalendar\",\"id\":\"CreateCalendar\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"width\":1150,\"height\":50,\"queryBtnClick\":\"CreateCalendar_queryBtnClick\",\"dateFormat\":\"Y-m-d\",\"startDateDeftSel\":\"today\",\"endDateDeftSel\":\"today\",\"contrastSze\":\"lt\"}},{\"cid\":\"grid\",\"id\":\"MyGrid\",\"layoutConfig\":{},\"userConfig\":{\"height\":307,\"width\":1144,\"hideHeaders\":false,\"border\":false,\"header\":false,\"beforerender\":\"MyGrid_beforerender\",\"title\":\"\",\"cls\":\"vmd-grid\",\"cellclick\":\"MyGrid_cellclick\"},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"序号\",\"dataIndex\":\"xh\",\"align\":\"center\",\"width\":80,\"menuDisabled\":true},\"name\":\"xh\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务计划总数\",\"dataIndex\":\"dwdm\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true,\"hidden\":true},\"name\":\"dwdm\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"部门\",\"dataIndex\":\"dwmc\",\"align\":\"center\",\"css\":\"text-align: left !important;\",\"width\":120,\"menuDisabled\":true,\"fixed\":false},\"name\":\"dwmc\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务类型\",\"dataIndex\":\"rwtypecode\",\"align\":\"center\",\"resizable\":false,\"fixed\":false,\"width\":100,\"menuDisabled\":true,\"hidden\":true},\"name\":\"rwtypecode\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务类型\",\"dataIndex\":\"rwtype\",\"align\":\"center\",\"resizable\":false,\"fixed\":false,\"width\":115,\"menuDisabled\":true},\"name\":\"rwtype\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务计划总数\",\"dataIndex\":\"rwplan\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true,\"width\":100},\"name\":\"rwplan\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"未开始\",\"dataIndex\":\"wks\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true,\"width\":100},\"name\":\"wks\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"进行中\",\"dataIndex\":\"jxz\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true,\"width\":100},\"name\":\"jxz\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"正常完成\",\"dataIndex\":\"zcwc\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"zcwc\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"超时完成\",\"dataIndex\":\"cs\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true,\"width\":100},\"name\":\"cs\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"已完成\",\"dataIndex\":\"ywc\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true,\"width\":100},\"name\":\"ywc\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"已审核\",\"dataIndex\":\"ysh\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true,\"width\":100},\"name\":\"ysh\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"终止\",\"dataIndex\":\"zz\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"width\":100,\"menuDisabled\":true},\"name\":\"zz\"}]}]}]}]}","vmdevents":"var page = this;\nvar rwDataList = [];\nvar store1 = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: [\"id\", \"xh\", \"name\", \"dwdm\", \"dwmc\", \"rwtype\",\"rwtypecode\", \"rwplan\", \"wks\", \"jxz\", \"zcwc\", \"cs\", \"ywc\",\"ysh\",\"zz\"]\n});\nvar ptServer = {\n    ip: '',\n    callcode: '',\n    userInfo: '', //用户信息服务\n    orgschecount: ''\n};\nvar dwdm = '';\nvar params = {\n    dwdm: dwdm,\n    startdate: '',\n    enddate: ''\n};\n\n//获取用户信息\nfunction loginInfo() {\n    var hwDao = new HwDao(ptServer.ip, ptServer.callcode); //地址:端口和授权码(服务管理员分配)\n    var url = ptServer.userInfo;\n    hwDao.get(url, {}, {}, function(res) {\n        if(res.data[0].size > 0) {\n            dwdm = res.data[0].datas[0].dwdm;\n            params = {\n                dwdm: dwdm,\n                startdate: CreateCalendar.getStartDateVal(),\n                enddate: CreateCalendar.getEndDateVal()\n            };\n            loadRwData(params);\n        } else {\n            params = {\n                dwdm: dwdm,\n                startdate: CreateCalendar.getStartDateVal(),\n                enddate: CreateCalendar.getEndDateVal()\n            };\n            loadRwData(params);\n        }\n    }, function() {}); /*成功回调函数*/\n}\n\nfunction loadRwData(ob) {\n    rwDataList = [];\n    var hwDao = new HwDao(ptServer.ip, ptServer.callcode); //地址:端口和授权码(服务管理员分配)\n    var url = ptServer.orgschecount;\n    hwDao.get(url, {}, ob, function(res) {\n        if(res.isSucceed) {\n            if(res.data && res.data[0].datas.length > 0) {\n                var data = res.data[0].datas;\n                for(var i = 0; i < data.length; i++) {\n                    var itemObj = {\n                        xh: i + 1,\n                        id: i + 1 /*data[i].sched_type_code*/ ,\n                        dwdm: data[i].dwdm,\n                        dwmc: data[i].dwmc,\n                        rwtypecode: data[i].schedule_type,\n                        rwtype: data[i].schedule_type_name,\n                        rwplan: \"<a href='#' class='hand'>\" + data[i].zs + \"</a>\",\n                        ywc: \"<a href='#' class='hand'>\" + data[i].wc + \"</a>\",\n                        wks: \"<a href='#' class='hand'>\" + data[i].wks + \"</a>\",\n                        jxz: \"<a href='#' class='hand'>\" + data[i].jxz + \"</a>\",\n                        ysh: \"<a href='#' class='hand'>\" + data[i].ysh + \"</a>\",\n                        zcwc: \"<a href='#' class='hand'>\" + data[i].zcwc + \"</a>\",\n                        cs: \"<a href='#' class='hand'>\" + data[i].cswc + \"</a>\",\n                        zz: \"<a href='#' class='hand'>\" + data[i].yzz + \"</a>\"\n                    }\n                    rwDataList.push(itemObj);\n                }\n            }\n            store1.loadData(rwDataList);\n        } else {\n            alert(res.errMsg);\n        }\n    }, function(res) {\n        alert(res);\n    });\n}\n\nfunction MyGrid_beforerender(sender) {\n    this.store = store1;\n}\n\n\nfunction CreateCalendar_queryBtnClick(sender, kssj, jssj) {\n    params = {\n        dwdm: dwdm,\n        startdate: kssj,\n        enddate: jssj\n    };\n    loadRwData(params);\n}\n\nfunction TaskOperMonSn_afterrender(sender){\n    ptServer = {\n    ip: vmd.workspace.dataServiceIp,\n    callcode: MyGrid.callcode,\n    userInfo: MyGrid.userInfo,//'platform/v1/UserManage', //用户信息服务\n    orgschecount: MyGrid.orgschecount//'XXHTS/schedule/taskmanager/workbench/orgschecount'\n};\nloginInfo();\n\n}\n\nfunction MyGrid_cellclick(sender,rowIndex,columnIndex,e){\n    debugger\n var   flightNONum = MyGrid.getStore().getAt(rowIndex);\nvar dwdm=MyGrid.getStore().getAt(rowIndex).data.dwdm,rwlx=MyGrid.getStore().getAt(rowIndex).data.rwtypecode,kssj=CreateCalendar.getStartDateVal(),jssj=CreateCalendar.getEndDateVal(),rwzt='';\nif(columnIndex=='6'){\n    rwzt='NOTSTARTED';\n}else if(columnIndex=='7'){\n     rwzt='INPROCESS';\n}else if(columnIndex=='8'){\n     rwzt='COMPLETE';\n}else if(columnIndex=='9'){\n     rwzt='OTCOMPLETE';\n}else if(columnIndex=='10'){\n    rwzt='YWC';\n}else if(columnIndex=='11'){\n    rwzt='AUDITED';\n}else if(columnIndex=='12'){\n     rwzt='ZZ';\n}\nvar url='http://10.207.60.69:9002/ProScheduling/pages/task/historicalTaskQuery/historicalTaskQuery.html?dwdm='+dwdm+'&rwlx='+rwlx+'&kssj='+kssj+'&jssj='+jssj+'&rwzt='+rwzt+'&r='+Math.random();\n\nwindow.open(url, \"_blank\");\n}","vmdcss":".hand a {\r\n    text-decoration: none;\r\n}\r\n\r\n.hand a:link {\r\n    color: blue;\r\n    text-decoration: none;\r\n}\r\n\r\n.hand a:active: {\r\n    color: red;\r\n}\r\n\r\n/*.hand a:visited {\r\n    color: purple;\r\n    text-decoration: none;\r\n}*/\r\n\r\n.hand a:hover {\r\n    color: red;\r\n    text-decoration: underline;\r\n}\r\n.x-grid3-hd-row td {\r\n    line-height: 15px;\r\n    vertical-align: middle;\r\n    border-left: 0px solid;\r\n     border-right: 0px solid;\r\n     border: 1px solid #e4e4e4;\r\n}\r\n.x-grid3-scroller {\r\n    overflow-x: hidden;\r\n}\r\n\r\n/* =========================================== Grid Panel =========================================== */\r\n/* 表格左右间距 */\r\n.vmd-grid {\r\n    /*padding-left: 5px;\r\n    padding-right: 5px;*/\r\n}\r\n\r\n/* 表格线样式兼容 */\r\n.vmd-grid table {\r\n    border-collapse: collapse;\r\n}\r\n\r\n/* 表头背景色 */\r\n.vmd-grid .x-grid3-header {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-hd-over .x-grid3-hd-inner {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头错位兼容 */\r\n.vmd-grid .x-grid3-header-offset {\r\n    padding: 0;\r\n}\r\n\r\n/* 表头单元格 */\r\n.vmd-grid .x-grid3-header td {\r\n    border: 1px solid #e3e2e8;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体单元格 */\r\n.vmd-grid .x-grid3-body td {\r\n    border: 1px solid #e3e2e8;\r\n    border-top-width: 0;\r\n    padding: 0;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体行 */\r\n.vmd-grid .x-grid3-row {\r\n    border: none;\r\n}\r\n\r\n/* 表体行鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-row-over {\r\n    background-color: white;\r\n}\r\n\r\n/* 表体行选中背景色 */\r\n.vmd-grid .x-grid3-row-selected {\r\n    background-color: #F5F7FC !important;\r\n}\r\n\r\n/* =========================================== Grid Panel =========================================== */\r\n","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxprop\",\"id\":\"callcode\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"callcode\",\"desc\":\"\",\"zhname\":\"授权码\",\"isPublic\":\"on\",\"radio_bTLw\":\"string\",\"bindCmp\":\"MyGrid\",\"bindValue\":\"callcode\",\"uxcid\":\"grid\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"userInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"userInfo\",\"desc\":\"\",\"zhname\":\"用户信息服务 \",\"isPublic\":\"on\",\"radio_bTLw\":\"string\",\"bindCmp\":\"MyGrid\",\"bindValue\":\"userInfo\",\"uxcid\":\"grid\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"orgschecount\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"orgschecount\",\"desc\":\"\",\"zhname\":\"数据服务地址\",\"isPublic\":\"on\",\"radio_bTLw\":\"string\",\"bindCmp\":\"MyGrid\",\"bindValue\":\"orgschecount\",\"uxcid\":\"grid\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}}]},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}