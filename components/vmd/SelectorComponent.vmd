{"vmdversion":"2.0.3.0920","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"SelectorComponent\",\"layoutConfig\":{\"align\":\"center\",\"pack\":\"start\"},\"userConfig\":{\"layout\":\"vbox\",\"header\":false,\"width\":750,\"height\":456,\"afterrender\":\"SelectorComponent_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"width\":740,\"height\":460,\"layout\":\"hbox\",\"header\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"width\":200,\"height\":450,\"layout\":\"fit\",\"padding\":\"3\",\"header\":false,\"style\":\"border: 1px solid #e4e4e4;\"},\"cn\":[{\"cid\":\"vmdTreeEx\",\"id\":\"tree\",\"layoutConfig\":{},\"userConfig\":{\"nodeclick\":\"tree_nodeclick\"}}]},{\"cid\":\"panel\",\"id\":\"panel2\",\"layoutConfig\":{},\"userConfig\":{\"width\":213,\"height\":450,\"margins\":\"0 0 0 10px\",\"title\":\"xccxcx\",\"layout\":\"fit\"},\"cn\":[{\"cid\":\"grid\",\"id\":\"MyGrid\",\"layoutConfig\":{},\"userConfig\":{\"hideHeaders\":false,\"header\":false,\"cls\":\"vmd-grid innerbox\",\"beforerender\":\"MyGrid_beforerender\",\"ctCls\":\"innerbox\"},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"id\",\"dataIndex\":\"id\",\"menuDisabled\":true,\"width\":105,\"align\":\"center\",\"hidden\":true},\"name\":\"id\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"姓名\",\"dataIndex\":\"name\",\"menuDisabled\":true,\"width\":105,\"align\":\"center\",\"css\":\"text-align: left !important;    margin-left: 4px !important;\"},\"name\":\"name\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"登录名\",\"dataIndex\":\"login\",\"menuDisabled\":true,\"align\":\"center\",\"css\":\"text-align: left !important;    margin-left: 4px !important;\"},\"name\":\"login\"}]}]},{\"cid\":\"panel\",\"id\":\"panel3\",\"layoutConfig\":{\"align\":\"center\",\"pack\":\"center\"},\"userConfig\":{\"width\":53,\"height\":458,\"header\":false,\"layout\":\"vbox\"},\"cn\":[{\"cid\":\"vmdImg\",\"id\":\"hwImg\",\"layoutConfig\":{},\"userConfig\":{\"width\":32,\"height\":29,\"src\":\"/img/public/jiantou  you (1).png\",\"click\":\"hwImg_click\",\"style\":\"cursor: pointer;\"}},{\"cid\":\"vmdImg\",\"id\":\"hwImg1\",\"layoutConfig\":{},\"userConfig\":{\"width\":36,\"height\":38,\"margins\":\"20px 0 20px 0\",\"src\":\"/img/public/双箭头 (1).png\",\"click\":\"hwImg1_click\",\"style\":\"cursor: pointer;\"}},{\"cid\":\"vmdImg\",\"id\":\"hwImg4\",\"layoutConfig\":{},\"userConfig\":{\"width\":32,\"height\":29,\"src\":\"/img/public/jiantou  you.png\",\"margins\":\"0 0 20px 0\",\"click\":\"hwImg4_click\",\"style\":\"cursor: pointer;\"}},{\"cid\":\"vmdImg\",\"id\":\"hwImg3\",\"layoutConfig\":{},\"userConfig\":{\"width\":36,\"height\":38,\"src\":\"/img/public/双箭头.png\",\"click\":\"hwImg3_click\",\"style\":\"cursor: pointer;\"}}]},{\"cid\":\"panel\",\"id\":\"panel4\",\"layoutConfig\":{},\"userConfig\":{\"width\":262,\"height\":450,\"layout\":\"fit\",\"padding\":\"0 1 0 1\"},\"cn\":[{\"cid\":\"grid\",\"id\":\"MyGrid1\",\"layoutConfig\":{},\"userConfig\":{\"header\":false,\"cls\":\"vmd-grid\",\"beforerender\":\"MyGrid1_beforerender\"},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"姓名\",\"dataIndex\":\"id\",\"width\":127,\"align\":\"center\",\"hidden\":true,\"menuDisabled\":true},\"name\":\"id\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"姓名\",\"dataIndex\":\"name\",\"width\":127,\"align\":\"center\",\"css\":\"text-align: left !important;    margin-left: 4px !important;\",\"menuDisabled\":true},\"name\":\"name\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"登录名\",\"dataIndex\":\"login\",\"align\":\"center\",\"width\":127,\"css\":\"text-align: left !important;    margin-left: 4px !important;\",\"menuDisabled\":true},\"name\":\"login\"}]}]}]}]}]}","vmdevents":"var page = this;\nvar wxDataList = [];\nvar wxDataList1 = [];\nvar choosList = [];\nvar ip = vmd.workspace.dataServiceIp;\nvar hwDao = new HwDao(ip, 'webxpt'); //地址:端口和授权码(服务管理员分配)\nvar noticeid = vmd.getUrlParam('noticeid');\nvar store1 = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: [\"id\", \"xh\", \"name\", \"login\"]\n});\nvar store2 = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: [\"id\", \"xh\", \"name\", \"login\"]\n});\nvar arrList = [];\n\nfunction hwImg_click(sender) {\n    page.fireEvent('LeftClick');\n    var er = MyGrid.getSelectionModel().getSelections();\n    MyGrid.store.remove(er); //移除数据\n    MyGrid1.store.insert(0, er);\n}\n\nfunction hwImg1_click(sender) {\n    page.fireEvent('LeftAllClick');\n    var records = MyGrid.store.data.items;\n    for(var i = 0, len = records.length; i < len; i++) {\n        MyGrid1.store.insert(0, records[i]);\n    }\n    MyGrid.store.removeAll(); //移除全部数据\n}\n\nfunction hwImg4_click(sender) {\n    page.fireEvent('RightClick');\n    var er = MyGrid1.getSelectionModel().getSelections();\n    MyGrid1.store.remove(er); //移除数据\n    MyGrid.store.insert(0, er);\n}\n\nfunction hwImg3_click(sender) {\n    page.fireEvent('RightAllClick');\n    var records = MyGrid1.store.data.items;\n    for(var i = 0, len = records.length; i < len; i++) {\n        MyGrid.store.insert(0, records[i]);\n    }\n    MyGrid1.store.removeAll();\n}\n\nfunction tree_nodeclick(sender, node, e) {\n    page.fireEvent('nodeClick');\n    loginInfo(node.id);\n}\n\nfunction MyGrid_beforerender(sender) {\n    this.store = store1;\n}\n\nfunction MyGrid1_beforerender(sender) {\n    this.store = store2;\n}\n\nfunction SelectorComponent_afterrender(sender) {\n    choosList = [];\n    choosList = parent.ObjectSelection && parent.ObjectSelection.getchooseUse();\n    loginInfo1();\n}\n//获取用户信息\nfunction loginInfo(id) {\n    wxDataList = [];\n    var url = 'platform/v1/UserManage';\n    hwDao.get(url, {}, {\n        dwdm: id\n    }, function(res) {\n        if(res.data && res.data[0].datas.length > 0) {\n            var data = res.data[0].datas;\n            for(var i = 0; i < data.length; i++) {\n                var itemObj = {\n                    id: data[i].userid,\n                    name: data[i].name,\n                    login: data[i].login,\n                    type: 'user'\n                }\n                wxDataList.push(itemObj);\n\n            }\n            let arr1Ids = choosList.map(item => item.id);\n            // 过滤arr2中不包含arr1相同的id数组。\n            const result = wxDataList.filter(item => !arr1Ids.includes(item.id));\n            store1.loadData(result);\n        }\n    }, function(res) {});\n}\n\n\n//获取用户信息\nfunction loginInfo1() {\n    wxDataList1\n    debugger\n    if(noticeid != '' && choosList.length == 0) {\n        var userUrl = 'platform/v1/recieve';\n        hwDao.get(userUrl, {}, {\n            'noticeid': noticeid,\n            'recievetype': 'user'\n        }, function(res) {\n            if(res.data && res.data[0].datas.length > 0) {\n                var data = res.data[0].datas;\n                for(var i = 0; i < data.length; i++) {\n                    var itemObj = {\n                        id: data[i].recieveid,\n                        name: data[i].ba_long_name,\n                        login: data[i].dm,\n                        type: 'user'\n                    }\n                    wxDataList1.push(itemObj);\n                }\n                choosList = wxDataList1;\n                store2.loadData(wxDataList1);\n            } else {\n                store2.loadData(choosList);\n            }\n        }, function(res) {});\n    } else {\n        store2.loadData(choosList||[]);\n    }\n\n}\n\nwindow.getMyData = function() {\n    datas = [];\n    var data = MyGrid1.store.data.items;\n    if(data.length > 0) {\n        for(var i = 0, len = data.length; i < len; i++) {\n            var item = {\n                id: data[i].data.id,\n                name: data[i].data.name,\n                type: 'user',\n                login: data[i].data.login\n            }\n            datas.push(item);\n        }\n    }\n    return datas;\n}\n\nwindow.setData = function(param) {\n    arrList = param;\n    debugger\n}","vmdcss":"/* =========================================== Grid Panel =========================================== */\r\n/* 表格左右间距 */\r\n.vmd-grid {\r\n    /*padding-left: 5px;\r\n    padding-right: 5px;*/\r\n}\r\n\r\n/* 表格线样式兼容 */\r\n.vmd-grid table {\r\n    border-collapse: collapse;\r\n}\r\n\r\n/* 表头背景色 */\r\n.vmd-grid .x-grid3-header {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-hd-over .x-grid3-hd-inner {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头错位兼容 */\r\n.vmd-grid .x-grid3-header-offset {\r\n    padding: 0;\r\n}\r\n\r\n/* 表头单元格 */\r\n.vmd-grid .x-grid3-header td {\r\n    border: 1px solid #e3e2e8;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体单元格 */\r\n.vmd-grid .x-grid3-body td {\r\n    border: 1px solid #e3e2e8;\r\n    border-top-width: 0;\r\n    padding: 0;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体行 */\r\n.vmd-grid .x-grid3-row {\r\n    border: none;\r\n}\r\n\r\n/* 表体行鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-row-over {\r\n    background-color: white;\r\n}\r\n\r\n/* 表体行选中背景色 */\r\n.vmd-grid .x-grid3-row-selected {\r\n    background-color: #F5F7FC !important;\r\n}\r\n\r\n/* =========================================== Grid Panel =========================================== */\r\n.innerbox {\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n}\r\n\r\n/*滚动条样式*/\r\n.innerbox::-webkit-scrollbar {\r\n    /*滚动条整体样式*/\r\n    width: 4px;\r\n    /*高宽分别对应横竖滚动条的尺寸*/\r\n    height: 4px;\r\n}\r\n\r\n.innerbox::-webkit-scrollbar-thumb {\r\n    /*滚动条里面小方块*/\r\n    border-radius: 5px;\r\n    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\r\n    background: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.innerbox::-webkit-scrollbar-track {\r\n    /*滚动条里面轨道*/\r\n    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\r\n    border-radius: 0;\r\n    background: rgba(0, 0, 0, 0.1);\r\n}","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxprop\",\"id\":\"wxText\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"wxText\",\"zhname\":\"未选框文本\",\"bindCmp\":\"panel2\",\"bindValue\":\"title\",\"isPublic\":\"on\",\"desc\":\"未选框文本\",\"uxcid\":\"panel\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"yxText\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"yxText\",\"zhname\":\"已选文本\",\"bindCmp\":\"panel4\",\"bindValue\":\"title\",\"isPublic\":\"on\",\"desc\":\"已选文本\",\"uxcid\":\"panel\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"BindingStore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"BindingStore\",\"zhname\":\"数据集\",\"bindCmp\":\"tree\",\"bindValue\":\"store\",\"isPublic\":\"on\",\"desc\":\"绑定数据集\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"ParentNode\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"ParentNode\",\"zhname\":\"父节点\",\"bindCmp\":\"tree\",\"bindValue\":\"parentField\",\"isPublic\":\"on\",\"desc\":\"父节点\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"Value\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"Value\",\"zhname\":\"值\",\"bindCmp\":\"tree\",\"bindValue\":\"valueField\",\"isPublic\":\"on\",\"desc\":\"值\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"TextField\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"TextField\",\"zhname\":\"显示文本\",\"bindCmp\":\"tree\",\"bindValue\":\"textField\",\"isPublic\":\"on\",\"desc\":\"显示文本\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"LoadType\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"LoadType\",\"zhname\":\"加载方式\",\"bindCmp\":\"tree\",\"bindValue\":\"loadType\",\"isPublic\":\"on\",\"desc\":\"加载方式\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"RootValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"RootValue\",\"zhname\":\"根节点值\",\"bindCmp\":\"tree\",\"bindValue\":\"rootValue\",\"isPublic\":\"on\",\"desc\":\"根节点值\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"RootText\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"RootText\",\"zhname\":\"\",\"bindCmp\":\"tree\",\"bindValue\":\"rootText\",\"isPublic\":\"on\",\"desc\":\"根节点文本\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"HideRoot\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"HideRoot\",\"zhname\":\"隐藏根节点\",\"bindCmp\":\"tree\",\"bindValue\":\"hideRoot\",\"isPublic\":\"on\",\"desc\":\"隐藏根节点\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}}]},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"getMyDatas\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getMyDatas\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\ngetMyData();\\nreturn datas;\",\"returnType\":\"字符串,对象\"}},{\"cid\":\"uxmethod\",\"id\":\"setDatas\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setDatas\",\"params\":\"param\",\"desc\":\"\",\"isPublic\":\"on\",\"code\":\"//直接填写方法内容\\nsetData(param);\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxevent\",\"id\":\"LeftClick\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"LeftClick\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"\"}},{\"cid\":\"uxevent\",\"id\":\"LeftAllClick\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"LeftAllClick\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"\"}},{\"cid\":\"uxevent\",\"id\":\"RightClick\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"RightClick\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"\"}},{\"cid\":\"uxevent\",\"id\":\"RightAllClick\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"RightAllClick\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"\"}},{\"cid\":\"uxevent\",\"id\":\"nodeClick\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"nodeClick\",\"params\":\"\",\"desc\":\"\"}}]}]}"}