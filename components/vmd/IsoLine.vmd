{"vmdversion":"vmd2.0.5.200306","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"IsoLine\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"header\":false,\"width\":290,\"height\":680,\"beforerender\":\"IsoLine_beforerender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"height\":540,\"border\":false,\"header\":false,\"layout\":\"absolute\",\"width\":290},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"wellIsShow\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"显示\",\"x\":10,\"y\":10,\"checked\":true,\"id\":\"wellIsShow\",\"BindValue\":\"show\",\"Name\":\"seriesIsShow\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckboxEditable\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":10,\"boxLabel\":\"编辑\",\"checked\":true,\"id\":\"hwCheckboxEditable\",\"hidden\":true}},{\"cid\":\"label\",\"id\":\"hwLabel\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":45,\"height\":20,\"text\":\"名称\"}},{\"cid\":\"textfield\",\"id\":\"wellName\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":40,\"width\":210,\"cls\":\"text-input\",\"id\":\"wellName\",\"BindValue\":\"nameText\"}},{\"cid\":\"label\",\"id\":\"hwLabel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":80,\"height\":20,\"text\":\"层级\"}},{\"cid\":\"vmd.ux.NumberInput\",\"id\":\"wellZIndex\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":75,\"width\":80,\"id\":\"wellZIndex\",\"BindValue\":\"z\",\"Name\":\"isOnRander\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckboxNonOverlap\",\"layoutConfig\":{},\"userConfig\":{\"x\":160,\"y\":10,\"boxLabel\":\"避让\",\"checked\":true,\"id\":\"hwCheckboxNonOverlap\",\"hidden\":true}},{\"cid\":\"panel\",\"id\":\"wellPanel\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":120,\"title\":\"属性\",\"height\":90,\"layout\":\"absolute\",\"id\":\"wellPanel\"},\"cn\":[{\"cid\":\"vmd.ux.LineSeting\",\"id\":\"hwLineSeting\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":10,\"width\":160,\"BindValue\":\"lineStyle\",\"Name\":\"seriesPorperty\"}}]},{\"cid\":\"panel\",\"id\":\"storPanel\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":210,\"height\":470,\"title\":\"数据\",\"layout\":\"absolute\",\"id\":\"storPanel\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel3\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"数据集\",\"x\":10,\"y\":55}},{\"cid\":\"vmdComlist\",\"id\":\"storeList\",\"layoutConfig\":{},\"userConfig\":{\"x\":70,\"y\":50,\"width\":180,\"cls\":\"text-input\",\"BindValue\":\"dataMapping.source\",\"id\":\"storeList\",\"selectChanged\":\"storeList_selectChanged\",\"afterrender\":\"storeList_afterrender\"}},{\"cid\":\"label\",\"id\":\"hwLabel4\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"字段绑定\",\"x\":10,\"y\":95}},{\"cid\":\"vmd.ux.FieldFormlist\",\"id\":\"hwFieldFormlist\",\"layoutConfig\":{},\"userConfig\":{\"x\":70,\"y\":90,\"width\":220,\"BindValue\":\"dataMapping.fields\"}},{\"cid\":\"radiogroup\",\"id\":\"hwRadioGroup\",\"layoutConfig\":{},\"userConfig\":{\"x\":70,\"y\":15,\"BindValue\":\"dataMapping.dsType\",\"change\":\"hwRadioGroup_change\",\"height\":30,\"afterrender\":\"hwRadioGroup_afterrender\"},\"cn\":[{\"cid\":\"radio\",\"id\":\"hwRadioDs\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"数据集\",\"fieldLabel\":\"\",\"id\":\"hwRadioDs\",\"checked\":true,\"inputValue\":\"0\"}},{\"cid\":\"radio\",\"id\":\"hwRadioMicroService\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"微服务\",\"id\":\"hwRadioMicroService\",\"inputValue\":\"1\"}}]},{\"cid\":\"label\",\"id\":\"hwLabel5\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"数据来源\",\"x\":10,\"y\":20}}]},{\"cid\":\"label\",\"id\":\"hwLabel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":170,\"height\":20,\"text\":\"样式\"}}]}]}]}","vmdevents":"var page = this;\nvar viewModel;\nvar oriData = null;\nvar wellData;\n\nfunction init(data) {\n    //console.log(data)\n    wellData = data;\n    viewModel.bind(wellData)\n\n\n    // 数据集列表绑定数据\n    setStoreData();\n\n    // 字段绑定组件绑定数据\n    // vmd.taskRunner(function() {\n    //     if (hwFieldFormlist.hwDiv) return true;\n    // }, function() {\n    hwFieldFormlist.bindData(wellData.dataMapping);\n    // })\n\n    if (wellData.dataMapping.dsType == '1') {\n        storeList.setDisabled(true);\n        hwFieldFormlist.setDisabled(true);\n    }\n}\n\nfunction IsoLine_beforerender(sender) {\n    //初始化\n    viewModel = new vmd.base.ViewModel(page);\n    //增加观察\n    viewModel.addObserver();\n    //实现接口\n    viewModel.onValueChange = function(sender, newValue, vm) {\n        viewModel.set(sender.BindValue, newValue);\n        xds.activePropPanel.fireEvent('DataValueChange', sender, newValue, vm, true)\n    }\n}\n\n// 数据赋值\nfunction setStoreData(data) {\n    var myStore = getDatasetNames();\n    var store = new vmd.data.Store({\n        data: myStore,\n        fields: ['id', 'text']\n    })\n    storeList.store = store;\n    storeList.valueField = 'id';\n    storeList.displayField = 'id';\n    storeList.dropDownFields = 'text';\n    storeList.queryField = 'text';\n\n    for (var i = 0; i < myStore.length; i++) {\n        //storeList.setValue(myStore[i].id);\n        if (myStore[i].id === (wellData && wellData.dataMapping.source)) {\n            storeList.setValue(wellData.dataMapping.source)\n        } else if (wellData.dataMapping.source === 'vmd-hwcharts-isoLine') {\n            storeList.setValue('')\n        }\n    }\n}\n\n\n//获取可视化中定义的所有数据集\nfunction getDatasetNames() {\n    var names = [];\n    var storeRoot = xds.vmd.getRootNode(\"dataset\");\n    if (storeRoot) {\n        storeRoot.eachChild(function(item) {\n            var obj = {\n                id: item.id,\n                text: item.id,\n                child: []\n            }\n            if (item.childNodes && item.childNodes.length > 0) {\n                item.childNodes.forEach(function(value, i) {\n                    obj.child.push({\n                        id: value.text,\n                        text: value.text\n                    })\n                })\n            }\n            names.push(obj)\n        }, this);\n    }\n    return names;\n}\n\n\nfunction storeList_selectChanged(sender, combo, record, index) {\n    wellData.dataMapping.source = combo.value;\n    hwFieldFormlist.bindData(wellData.dataMapping);\n}\n\nfunction hwRadioGroup_change(sender, checked) {\n    if (hwRadioGroup.getValue() == '0') {\n        storeList.setDisabled(false);\n        hwFieldFormlist.setDisabled(false);\n\n    } else if (hwRadioGroup.getValue() == '1') {\n        storeList.setDisabled(true);\n        hwFieldFormlist.setDisabled(true);\n    }\n}\n\nfunction storeList_afterrender(sender) {\n    // if(wellData.dataMapping.source === 'vmd-hwcharts-isoLine'){\n    //     storeList.setValue('')\n    // }\n}\n\nfunction hwRadioGroup_afterrender(sender) {\n\n}","vmdcss":".text-input{\n    border: 1px solid #ddd;\n}","vmdprops":"\"\"","type":"ux","vmdcmpdeps":[],"vmdevents_controller":"","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"init\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"init\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"data\",\"code\":\"//直接填写方法内容\\ninit(data)\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}