{"vmdversion":"2.0.3.0701","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"WorkSpaceProject\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"header\":false,\"width\":220,\"height\":650,\"afterrender\":\"WorkSpaceProject_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"header\":false,\"region\":\"north\",\"height\":32,\"border\":true,\"layout\":\"absolute\",\"width\":259},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"btnWorkSpace\",\"layoutConfig\":{},\"userConfig\":{\"x\":3,\"y\":0,\"type\":\"text\",\"text\":\"勘探业务工区\",\"id\":\"btnWorkSpace\",\"width\":180,\"style\":\"font-family: Microsoft YaHei;    font-size: 16px;    text-align: left;\",\"height\":30}},{\"cid\":\"vmdButton\",\"id\":\"btnMenu\",\"layoutConfig\":{},\"userConfig\":{\"x\":190,\"y\":-7,\"width\":30,\"text\":\"...\",\"id\":\"btnMenu\",\"click\":\"btnMenu_click\",\"icon\":\"\",\"height\":30,\"type\":\"text\",\"style\":\"font-size: 20px;\"}}]},{\"cid\":\"panel\",\"id\":\"panel2\",\"layoutConfig\":{},\"userConfig\":{\"header\":false,\"region\":\"center\",\"layout\":\"fit\",\"border\":true,\"width\":360},\"cn\":[{\"cid\":\"vmdTreeEx\",\"id\":\"treeProjects\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":110,\"width\":257,\"height\":\"\",\"id\":\"treeProjects\",\"loadType\":\"全部加载\",\"rootValue\":\"0\",\"rootText\":\"0\",\"parentField\":\"pid\",\"valueField\":\"project_id\",\"textField\":\"project_name\",\"hideRoot\":true,\"nodeclick\":\"treeProjects_nodeclick\",\"afterrender\":\"treeProjects_afterrender\",\"beforeShowMenu\":\"treeProjects_beforeShowMenu\",\"style\":\"font-family: Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;    font-size: 16px;    border: 1px solid RGB(192, 192, 192);\",\"leafImg\":\"/img/public/projectclose.png\"}}]},{\"cid\":\"vmdMenu\",\"id\":\"hwMenuWorkSpace\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwMenuWorkSpace\",\"click\":\"hwMenuWorkSpace_click\",\"afterrender\":\"hwMenuWorkSpace_afterrender\",\"region\":\"west\"},\"cn\":[{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItemAddProject\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"添加项目\",\"hidden\":false,\"id\":\"hwMenuItemAddProject\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItemWorkSpaceConfig\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"参数配置\",\"hidden\":false,\"id\":\"hwMenuItemWorkSpaceConfig\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItemPasteProject\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"粘贴\",\"hidden\":true,\"id\":\"hwMenuItemPasteProject\"}}]},{\"cid\":\"vmdMenu\",\"id\":\"hwMenuProject\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwMenuProject\",\"click\":\"hwMenuProject_click\",\"afterrender\":\"hwMenuProject_afterrender\",\"region\":\"east\",\"width\":120},\"cn\":[{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItemProjectConfig\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"项目配置\",\"hidden\":false,\"id\":\"hwMenuItemProjectConfig\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItemProjectCopy\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"复制\",\"hidden\":true,\"id\":\"hwMenuItemProjectCopy\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItemProjectDel\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"删除\",\"hidden\":false,\"id\":\"hwMenuItemProjectDel\"}}]}]}]}","vmdevents":"// var workSpaceId = \"\";\n// workSpaceId = \"657e35d9-494a-456d-8f80-98b4924133d7\";\n// var workSpaceName = ;\nvar storeWorkSpaceProject;\n\nfunction btnMenu_click(sender, e) {\n    hwMenuWorkSpace.showAt(e.xy);\n}\n\nfunction WorkSpaceProject_afterrender(sender) {\n\n    var body = Ext.getBody();\n    // 将右键菜单添加到body上，用于解决菜单被遮挡的问题\n    // body.appendChild(hwMenuWorkSpace.el);\n    // body.appendChild(hwMenuProject.el);\n\n    btnWorkSpace.setText(\"勘探业务工区\");\n    btnWorkSpace.workspaceId = \"657e35d9-494a-456d-8f80-98b4924133d7\";\n}\n\nfunction hwMenuWorkSpace_click(sender, menuItem, e) {\n    var itemId = menuItem.id;\n    var itemAddProject = itemId.indexOf(\"hwMenuItemAddProject\"); // 基于0开始,找不到返回-1\n    var itemConfig = itemId.indexOf(\"hwMenuItemWorkSpaceConfig\"); // 基于0开始,找不到返回-1\n    var itemPaste = itemId.indexOf(\"hwMenuItemPasteProject\"); // 基于0开始,找不到返回-1\n\n    // 基本信息\n    if(itemAddProject > -1) {\n        onMenuItemAddProject();\n    } else if(itemConfig > -1) {\n        onMenuItemWorkSpaceConfig();\n    } else if(itemPaste > -1) {\n        onMenuItemPasteProject();\n    }\n}\n\n// 添加项目\nfunction onMenuItemAddProject() {\n\n    window.treeProjects = treeProjects;\n    treeProjects.addProjectTree = addProjectTree;\n    var formAddProject = new vmd.window({\n        title: \"项目添加\",\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwRSvMOuk9.html\",\n        // url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwB1IoubEq.html\",\n        // url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hw12d114b0.html\",\n        auto: false,\n        height: 496,\n        width: 878,\n        params: {\n            workspaceid: btnWorkSpace.workspaceId,\n            r: new Date().getTime()\n        }\n    })\n\n    formAddProject.show();\n    window.formAddProject = formAddProject;\n}\n\nfunction addProjectTree() {\n    treeProjects.store.toRefresh(); // 刷新项目树\n}\n// 工区配置\nfunction onMenuItemWorkSpaceConfig() {\n    window.btnWorkSpace = btnWorkSpace;\n    var formWorkSpaceConfig = new vmd.window({\n        title: \"工区参数配置\",\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hw56e34140.html\",\n        auto: false,\n        height: 510,\n        width: 626,\n        params: {\n            workspaceid: btnWorkSpace.workspaceId,\n            r: new Date().getTime()\n        }\n    })\n    \n    \n    // workspaceSelData = WorkSpaceList.getSelData();\n    // workspaceId = workspaceSelData.workspace_id;\n\n    formWorkSpaceConfig.show();\n    window.formWorkSpaceConfig = formWorkSpaceConfig;\n}\n\n// 粘贴\nfunction onMenuItemPasteProject() {\n\n}\n\nfunction treeProjects_nodeclick(sender, node, e) {\n\n    // hwMenuProject.showAt(e.xy);\n}\n\nfunction hwMenuProject_click(sender, menuItem, e) {\n\n    var itemId = menuItem.id;\n    var itemConfig = itemId.indexOf(\"hwMenuItemProjectConfig\"); // 基于0开始,找不到返回-1\n    var itemCopy = itemId.indexOf(\"hwMenuItemProjectCopy\"); // 基于0开始,找不到返回-1\n    var itemDel = itemId.indexOf(\"hwMenuItemProjectDel\"); // 基于0开始,找不到返回-1\n\n    // 基本信息\n    if(itemConfig > -1) {\n        onMenuItemProjectConfig();\n    } else if(itemCopy > -1) {\n        onMenuItemProjectCopy();\n    } else if(itemDel > -1) {\n        onMenuItemProjectDel();\n    }\n}\n\n// 项目配置\nfunction onMenuItemProjectConfig() {\n\n    var nodeSel = treeProjects.getSelNode();\n\n    window.treeProjects = treeProjects;\n    treeProjects.projectConfig = projectConfig;\n\n    var formProConfig = new vmd.window({\n        title: \"项目配置\",\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hw9299ec24.html\",\n        auto: false,\n        height: 510,\n        width: 626,\n        params: {\n            id: nodeSel.id,\n            r: new Date().getTime()\n        }\n    })\n\n    formProConfig.show();\n    window.formProConfig = formProConfig;\n}\n\n// 项目复制\nfunction onMenuItemProjectCopy() {\n\n}\n\n// 删除项目\nfunction onMenuItemProjectDel() {\n\n    Ext.Msg.confirm(\"提示\", \"确认要从工区中删除该项目？\", function(type) {\n        if(type == \"yes\") {\n\n            var nodeSel = treeProjects.getSelNode();\n            if(null == nodeSel || undefined == nodeSel) {\n                Ext.Msg.alert(\"提示\", \"请选择要删除的节点！\");\n                return;\n            }\n\n            hwDas.del(\n                \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {\n                    'workspaceid': btnWorkSpace.workspaceId,\n                    'projectid': nodeSel.id\n                },\n                function(result) {\n                    Tips.tips(\"删除成功！\", \"success\");\n                    // Ext.Msg.alert(\"提示\", \"删除资源目录成功！\");\n                },\n                function(msg) {\n                    Tips.tips(\"删除失败！\", \"error\");\n                    // Ext.Msg.alert(\"提示\", \"删除项目失败！\");\n                }\n            );\n\n            // 删除当前节点\n            nodeSel.remove();\n\n        }\n    });\n}\n\n// 项目配置，获取改变项目名称\nfunction projectConfig(name) {\n\n    var nodeSel = treeProjects.getSelNode();\n    if(null == nodeSel || undefined == nodeSel) {\n        return;\n    }\n    nodeSel.setText(name);\n}\n\n\nfunction treeProjects_afterrender(sender) {\n\n}\n\nfunction hwMenuWorkSpace_afterrender(sender) {\n    var body = Ext.getBody();\n    // 将右键菜单添加到body上，用于解决菜单被遮挡的问题\n    body.appendChild(hwMenuWorkSpace.el);\n}\n\nfunction hwMenuProject_afterrender(sender) {\n    // var body = Ext.getBody();\n    // // 将右键菜单添加到body上，用于解决菜单被遮挡的问题\n    // body.appendChild(hwMenuProject.el);\n}\n\nfunction treeProjects_beforeShowMenu(sender, node, e) {\n\n    hwMenuProject.showAt(e.xy);\n}\n\nfunction setWorkSpaceInfo(id, name) {\n    \n    // workspaceId = id;\n\n    btnWorkSpace.setText(name);\n    btnWorkSpace.workspaceId = id;\n    // treeProjects.store.toRefresh();\n\n    // hwDas.get(\n    //     \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {\n    //         \"workspaceid\": id\n    //     },\n    //     function(result) {\n    //         // 根据获取的数据赋值基本信息Tab页\n    //         if(null === result && undefined === result) {\n    //             return;\n    //         }\n\n    //         if(null != result.data && undefined != result.data) {\n    //             // if(result.data.length > 0) {\n    //             //     if(null != result.data[0].datas && undefined != result.data[0].datas) {\n    //             //         for(var i = 0; i < result.data[0].datas.length; i++) {\n    //             //             var nodeService = addServiceAddressNode(\n    //             //                 result.data[0].datas[i].id,\n    //             //                 result.data[0].datas[i].name,\n    //             //                 result.data[0].datas[i].address,\n    //             //                 result.data[0].datas[i].remark);\n    //             //             // workspaceId = \"1005a370-ea5a-4753-9cbb-d854be34f490\";\n    //             //             if(1 == type || 2 == type) {\n    //             //                 loadResourceCategory(nodeService, workspaceId, result.data[0].datas[0].id, type);\n    //             //             }\n    //             //         }\n    //             //     }\n    //             // }\n    //         }\n\n        //     ifDataLoaded = true;\n        //     // Tips.tips(\"查询成功！\", \"success\");\n        // },\n        // function(msg) {\n        //     Tips.tips(\"查询失败！\", \"error\");\n        //     // Ext.Msg.alert(\"提示\", \"查询资源信息失败！\");\n        // });\n}","vmdcss":"","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxprop\",\"id\":\"store\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"store\",\"zhname\":\"\",\"bindCmp\":\"treeProjects\",\"bindValue\":\"store\",\"isPublic\":\"on\",\"desc\":\"工区项目关系数据集\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\"}}]},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"iSetWorkSpaceInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetWorkSpaceInfo\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置当前工区的id和name\",\"uxcid\":\"\",\"params\":\"id, name\",\"code\":\"//直接填写方法内容\\nsetWorkSpaceInfo(id, name);\",\"returnType\":\"无\",\"hwCheckbox\":\"无\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}"}