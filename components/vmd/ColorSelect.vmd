{"vmdversion":"vmd2.0.5.200306","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"ColorSelect\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"header\":false,\"width\":150,\"height\":28,\"afterrender\":\"ColorSelect_afterrender\",\"autoHeight\":true,\"bodyStyle\":\"\",\"style\":\"min-width: 130PX;\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"border\":false,\"header\":false,\"layout\":\"fit\",\"height\":28,\"width\":267,\"x\":2,\"y\":2,\"region\":\"center\",\"autoWidth\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"colorBox\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"width\":161,\"id\":\"colorBox\",\"height\":24,\"click\":\"colorDiv_click\",\"region\":\"center\",\"border\":true,\"style\":\"border:0;\",\"layout\":\"border\"},\"cn\":[{\"cid\":\"container\",\"id\":\"colorDiv\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"id\":\"colorDiv\",\"style\":\"border: 1px solid #ddd;    border-right: 0;\"}},{\"cid\":\"vmdButton\",\"id\":\"colorButton\",\"layoutConfig\":{},\"userConfig\":{\"x\":132,\"y\":-1,\"width\":22,\"id\":\"colorButton\",\"text\":\"\",\"style\":\"border-radius: 0;    background-size: 120%;    background-position: right;    border: 1px solid #ddd;    border-left: 0;    float: right;    font-size: 14px;    color: #646464;    /*background: url(\\\"/img/public/dhxcombo_arrow_down.gif\\\") 10px center;*/    /*background-repeat: no-repeat;*/\",\"icon\":\" icon-caret-down\",\"height\":26,\"region\":\"east\",\"type\":\"(none)\"}}]},{\"cid\":\"container\",\"id\":\"divR\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"x\":0,\"y\":0,\"height\":2,\"width\":2,\"id\":\"divR\"}}]},{\"cid\":\"container\",\"id\":\"myColor\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"width\":156,\"height\":160,\"id\":\"myColor\",\"hidden\":true,\"layout\":\"absolute\",\"autoHeight\":true,\"autoWidth\":false,\"region\":\"west\",\"style\":\"background-color: #fff;    z-index: 9999;    position: absolute;\"},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"width\":160,\"height\":25,\"text\":\"其他颜色\",\"type\":\"text\",\"region\":\"south\",\"x\":0,\"y\":132,\"style\":\"color: #333;\",\"click\":\"button_click\",\"hidden\":false}}]}]}]}","vmdevents":"var isCp = false,\n    isCpPick = false; // 颜色面板是否已存在\nvar selectColor = '#333333';\nvar colorShow, myColorPicker, cp;\nvar page = this\n\nfunction colorDiv_click(sender, e) {\n\n    if(myColor.hidden) {\n        var x = colorDiv.el.getRegion().left,\n            y = colorDiv.el.getRegion().top + 30;\n            \n        myColor.setPosition(x, y)\n        myColor.show();\n        Ext.getBody().appendChild(myColor.el);\n        showColor(selectColor);\n    } else {\n        myColor.hide();\n        cp.destroy();\n        if(isCpPick) {\n            myColorPicker.unload();\n            myColorPicker = null;\n            isCpPick = false;\n        }\n    }\n    stopPP(e)\n\n}\n\nfunction showColor(value) {\n\n    // if(isCp) {\n    //     return\n    // }\n    if(!value) {\n        value = \"#ffffff\";\n    }\n    var cValue = value;\n    var colors = ['000000', '993300', '333300', '003300', '003366', '000080', '333399', '333333', '800000', 'FF6600', '808000', '008000', '008080', '0000FF', '666699', '808080', 'FF0000', 'FF9900', '99CC00', '339966', '33CCCC', '3366FF', '800080', '969696', 'FF00FF', 'FFCC00', 'FFFF00', '00FF00', '00FFFF', '00CCFF', '993366', 'C0C0C0', 'FF99CC', 'FFCC99', 'FFFF99', 'CCFFCC', 'CCFFFF', '99CCFF', 'CC99FF', 'FFFFFF', 'DDDDDD', 'EEEEEE'];\n    if(value.indexOf(\"#\") != -1) {\n        cValue = value.slice(1);\n    }\n    if(!isInArray(colors, cValue)) {\n        cValue = '';\n    }\n    cp = new Ext.ColorPalette({\n        value: cValue,\n    });\n    cp.colors = colors;\n    cp.render(myColor.id);\n    cp.on('select', function(palette, color) {\n        selectColor = \"#\" + color;\n        setBackColor(color);\n        page.fireEvent('colorchange', colorDiv, \"#\" + color);\n        myColor.hide();\n        if(isCpPick) {\n            myColorPicker.unload();\n            myColorPicker = null;\n            isCpPick = false;\n        }\n        cp.destroy();\n    });\n    isCp = true;\n}\n\nfunction setColorValue(color) {\n    selectColor = color;\n}\n// 设置图框背景颜色\nfunction setBackColor(selColor) {\n    if(selColor) {\n        colorShow = vmd.getElement(colorDiv.id);\n         if (selColor.indexOf('#') == -1&&selColor.indexOf('rgb(') == -1) {\n            colorShow.applyStyles('backgroundColor:#' + selColor);\n        } else {\n            colorShow.applyStyles('backgroundColor:' + selColor);\n        }\n    }\n}\n\nfunction ColorSelect_afterrender(sender) {\n\n    colorShow = vmd.getElement(colorDiv.id);\n    colorShow.applyStyles('backgroundColor:#' + selectColor);\n\n\n\n    // Ext.getBody().appendChild(myColor);\n\n    Ext.defer(function() {\n        Ext.getBody().appendChild(myColor.el);\n    }, 50)\n\n\n    Ext.getBody().on('click', function(e) {\n        if(!$(e.target).attr(\"id\") || $(e.target).attr(\"id\").indexOf(\"colorDiv\") == -1) {\n            if(!myColor.hidden) {\n                cp.destroy();\n                myColor.hide();\n            }\n        }\n\n    })\n}\n\nfunction button_click(sender, e) {\n\n    myColor.hide();\n    cp.destroy();\n    if(isCpPick) {\n        return;\n    }\n    isCpPick = true;\n    // 语言设置\n    dhtmlXColorPicker.prototype.i18n.zn = {\n        labelHue: \"H\",\n        labelSat: \"S\",\n        labelLum: \"L\",\n        labelRed: \"R\",\n        labelGreen: \"g\",\n        labelBlue: \"B\",\n        btnSelect: \"选择\",\n        btnCancel: \"取消\"\n    }\n    myColorPicker = new dhtmlXColorPicker({\n        // parent: document.body,\n        input: divR.id,\n        color: selectColor,\n        closeable: false\n    });\n    myColorPicker.loadUserLanguage('zn');\n    myColorPicker.show();\n    // myColorPicker.setPosition(100, 100)\n    var myEvent = myColorPicker.attachEvent(\"onSelect\", function(color, node) {\n        selectColor = color;\n        colorShow.applyStyles('backgroundColor:' + color);\n        page.fireEvent('colorchange', colorDiv, color);\n        myColor.hide();\n        myColorPicker.unload();\n        myColorPicker = null;\n        isCpPick = false\n    });\n    var myEvent = myColorPicker.attachEvent(\"onCancel\", function(color, node) {\n        myColorPicker.unload();\n        myColorPicker = null;\n        isCpPick = false\n    });\n}\n\nfunction setColorWidth(w) {\n    colorDiv.setWidth(w)\n}\n\nfunction isInArray(arr, value) {\n    for(var i = 0; i < arr.length; i++) {\n        if(value === arr[i]) {\n            return true;\n        }\n    }\n    return false;\n}","vmdcss":".x-color-palette em span{\n    width: 13px;\n    height: 13px;\n}\n.x-color-palette{\n    padding: 3px;\n    width:156px;\n    height: 160px;\n}","vmdprops":"\"\"","type":"ux","vmdcmpdeps":[],"vmdevents_controller":"Ext.define('vmd.ux.colorSelect.Controller', {\n    xtype: 'vmd.ux.colorSelect.Controller',\n    constructor: function(options) {\n        \n    }\n})","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"setOriColor\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setOriColor\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"color\",\"code\":\"//直接填写方法内容\\nsetColorValue(color)\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setColorDiv\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setColorDiv\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"selColor\",\"code\":\"//直接填写方法内容\\nsetBackColor(selColor)\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"getSelColor\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getSelColor\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nreturn selectColor; \",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxevent\",\"id\":\"colorchange\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"colorchange\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"selColor\",\"code\":\"\"}}]}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}