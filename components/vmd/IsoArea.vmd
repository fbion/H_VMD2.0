{"vmdversion":"vmd2.0.5.200306","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"IsoArea\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"header\":false,\"width\":290,\"height\":620,\"border\":false,\"bodyStyle\":\"\",\"beforerender\":\"IsoArea_beforerender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"auto\",\"border\":false,\"header\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel3\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"height\":120,\"layout\":\"absolute\",\"title\":\"属性\",\"bodyStyle\":\"border-bottom-color: #fff;\",\"border\":false,\"header\":false,\"afterrender\":\"panel_afterrender\",\"width\":\"\",\"id\":\"panel3\"},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"IsoAreaShow\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":10,\"boxLabel\":\"显示\",\"id\":\"IsoAreaShow\",\"checked\":true,\"Name\":\"seriesIsShow\",\"BindValue\":\"show\"}},{\"cid\":\"checkbox\",\"id\":\"IsoAreaEdit\",\"layoutConfig\":{},\"userConfig\":{\"x\":95,\"y\":15,\"boxLabel\":\"编辑\",\"id\":\"IsoAreaEdit\",\"checked\":true,\"hidden\":true}},{\"cid\":\"label\",\"id\":\"hwLabel\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":85,\"text\":\"层级\"}},{\"cid\":\"vmd.ux.NumberInput\",\"id\":\"IsoAreaZIndex\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":80,\"width\":80,\"id\":\"IsoAreaZIndex\",\"BindValue\":\"z\",\"Name\":\"isOnRander\"}},{\"cid\":\"label\",\"id\":\"hwlable1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":45,\"text\":\"名称\",\"id\":\"hwlable1\"}},{\"cid\":\"textfield\",\"id\":\"IsoAreaName\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":40,\"width\":217,\"cls\":\"text-input\",\"id\":\"IsoAreaName\",\"BindValue\":\"nameText\"}}]},{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":120,\"height\":245,\"layout\":\"absolute\",\"title\":\"数据\",\"bodyStyle\":\"border-bottom-color: #fff;\",\"width\":\"\",\"border\":false},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":15,\"text\":\"关联井位\",\"height\":20,\"width\":90}},{\"cid\":\"vmd.ux.CheckCombo\",\"id\":\"storeList\",\"layoutConfig\":{},\"userConfig\":{\"x\":90,\"y\":10,\"width\":170,\"height\":28,\"id\":\"storeList\",\"BindValue\":\"dependentWellName\",\"dataChange\":\"storeList_dataChange\"}},{\"cid\":\"label\",\"id\":\"hwLabel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":85,\"text\":\"属性字段绑定\",\"height\":20,\"width\":130}},{\"cid\":\"label\",\"id\":\"hwLabel6\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":50,\"text\":\"井属性数据集\",\"height\":20,\"width\":90}},{\"cid\":\"vmdComlist\",\"id\":\"comlist\",\"layoutConfig\":{},\"userConfig\":{\"x\":90,\"y\":50,\"width\":170,\"BindValue\":\"dependentPorDas\",\"cls\":\"text-input\",\"selectChanged\":\"comlist_selectChanged\"}},{\"cid\":\"vmd.ux.FieldFormlist\",\"id\":\"hwFieldFormlist\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":110,\"width\":230,\"BindValue\":\"dependentPorDasMapping.fields\"}}]},{\"cid\":\"panel\",\"id\":\"panel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":320,\"title\":\"色系\",\"height\":242,\"layout\":\"absolute\",\"border\":false,\"header\":true,\"bodyStyle\":\"\",\"width\":\"\"},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"ColorsShow\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":10,\"boxLabel\":\"显示\",\"id\":\"ColorsShow\",\"checked\":true,\"BindValue\":\"visualMap.show\",\"hidden\":true}},{\"cid\":\"label\",\"id\":\"hwLabel3\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":25,\"text\":\"位置\"}},{\"cid\":\"vmd.ux.AlignWebGroup\",\"id\":\"hwAlignWebGroup\",\"layoutConfig\":{},\"userConfig\":{\"x\":70,\"y\":20,\"width\":90,\"BindValue\":\"visualMap.posHori\",\"hidenCenter\":true,\"Name\":\"proprty\"}},{\"cid\":\"vmd.ux.VerticalWebGroup\",\"id\":\"IsoAreaPosition\",\"layoutConfig\":{},\"userConfig\":{\"x\":160,\"y\":20,\"id\":\"IsoAreaPosition\",\"width\":90,\"BindValue\":\"visualMap.posVert\",\"hidenCenter\":true,\"Name\":\"proprty\"}},{\"cid\":\"label\",\"id\":\"hwLabel4\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":165,\"text\":\"渐变间隔\"}},{\"cid\":\"vmd.ux.NumberInput\",\"id\":\"Gradual\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":160,\"width\":60,\"id\":\"Gradual\",\"BindValue\":\"dense\",\"Name\":\"seriesPorperty\"}},{\"cid\":\"label\",\"id\":\"hwLabel5\",\"layoutConfig\":{},\"userConfig\":{\"x\":150,\"y\":166,\"text\":\"*建议10以下\",\"style\":\"color:red;\",\"height\":20}},{\"cid\":\"vmd.ux.SelectColor\",\"id\":\"hwSelectColor\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":50,\"height\":100,\"BindValue\":\"visualMap.chroma\",\"Name\":\"proprty\"}}]}]}]}]}","vmdevents":"var page = this;\nvar viewModel;\nvar oriData = null;\nvar seriesData;\n\nfunction panel_afterrender(sender) {\n\n}\n\nfunction init(data,allLayers) {\n    // 20200317:\n    //console.log(allLayers)\n    seriesData = data;\n    viewModel.bind(seriesData)\n\n    // 数据集列表绑定数据\n    setStoreData();\n\n    // 字段绑定组件绑定数据\n    // vmd.taskRunner(function() {\n    //     if (hwFieldFormlist.hwDiv) return true;\n    // }, function() {\n       \n        hwFieldFormlist.bindData(seriesData.dependentPorDasMapping);\n    // })\n    // vmd.taskRunner(function() {\n    //     if (storeList) return true;\n    // }, function() {\n        var arr = []\n        for(var i = 0;i<allLayers.length;i++){\n            if(allLayers[i].type === 'wellSymbol'){\n                arr.push({\n                    id:allLayers[i].name,\n                    text:allLayers[i].nameText\n                })\n            }\n        }\n        storeList.loadData(arr);\n    // })\n}\n\nfunction IsoArea_beforerender(sender) {\n    //初始化\n    viewModel = new vmd.base.ViewModel(page);\n    //增加观察\n    viewModel.addObserver();\n    //实现接口\n    viewModel.onValueChange = function(sender, newValue, vm) {\n        viewModel.set(sender.BindValue, newValue);\n        xds.activePropPanel.fireEvent('DataValueChange', sender, newValue, vm, true)\n    }\n}\n\n\n// 数据赋值\nfunction setStoreData(data) {\n    var myStore = getDatasetNames();\n    var store = new vmd.data.Store({\n        data: myStore,\n        fields: ['id', 'text']\n    })\n    comlist.store = store;\n    comlist.valueField = 'id';\n    comlist.displayField = 'id';\n    comlist.dropDownFields = 'text';\n    comlist.queryField = 'text';\n    for (var i = 0; i < myStore.length; i++) {\n        if (myStore[i].id === seriesData && seriesData.dependentPorDas) {\n            storeList.setValue(seriesData.dependentPorDas)\n        }\n    }\n}\n\n\n//获取可视化中定义的所有数据集\nfunction getDatasetNames() {\n    var names = [];\n    var storeRoot = xds.vmd.getRootNode(\"dataset\");\n    if (storeRoot) {\n        storeRoot.eachChild(function(item) {\n            //console.log(xds.vmd.getStoreByDsName(item.id, true))\n            var obj = {\n                id: item.id,\n                text: item.id,\n                child: []\n            }\n            if (item.childNodes && item.childNodes.length > 0) {\n                item.childNodes.forEach(function(value, i) {\n                    obj.child.push({\n                        id: value.text,\n                        text: value.text\n                    })\n                })\n            }\n            names.push(obj)\n        }, this);\n    }\n    return names;\n}\n\nfunction comlist_selectChanged(sender, combo, record, index) {\n    seriesData.dependentPorDasMapping.source = combo.value;\n    hwFieldFormlist.bindData(seriesData.dependentPorDasMapping);\n}\n","vmdcss":".text-input{\n    border: 1px solid #ddd;\n}\n","vmdprops":"\"\"","type":"ux","vmdcmpdeps":[],"vmdevents_controller":"","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"init\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"init\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"data,allLayers\",\"code\":\"//直接填写方法内容\\ninit(data,allLayers)\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}