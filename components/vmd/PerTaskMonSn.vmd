{"vmdversion":"2.0.4.190627","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"PerTaskMonSn\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"header\":false,\"width\":1160,\"height\":391,\"afterrender\":\"PerTaskMonSn_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":\"\",\"y\":\"\",\"height\":390,\"layout\":\"auto\",\"header\":true,\"width\":1150,\"title\":\"人员任务运行监控\",\"padding\":\"5\"},\"cn\":[{\"cid\":\"vmd.ux.CreateCalendar\",\"id\":\"CreateCalendar\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"width\":1160,\"startDateDeftSel\":\"today\",\"endDateDeftSel\":\"today\",\"contrastSze\":\"lt\",\"queryBtnClick\":\"CreateCalendar_queryBtnClick\",\"dateFormat\":\"Y-m-d\",\"startDateOnchange\":\"CreateCalendar_startDateOnchange\"}},{\"cid\":\"grid\",\"id\":\"MyGrid\",\"layoutConfig\":{},\"userConfig\":{\"hideHeaders\":false,\"header\":false,\"height\":299,\"beforerender\":\"MyGrid_beforerender\",\"width\":1150,\"cls\":\"vmd-grid\",\"cellclick\":\"MyGrid_cellclick\"},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"序号\",\"dataIndex\":\"xh\",\"align\":\"center\",\"width\":80,\"menuDisabled\":true},\"name\":\"xh\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"login\",\"dataIndex\":\"ulogin\",\"align\":\"center\",\"width\":190,\"css\":\"text-align: left !important;\",\"menuDisabled\":true,\"hidden\":true},\"name\":\"ulogin\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"dwdm\",\"dataIndex\":\"dwdm\",\"align\":\"center\",\"width\":190,\"css\":\"text-align: left !important;\",\"menuDisabled\":true,\"hidden\":true},\"name\":\"dwdm\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"姓名\",\"dataIndex\":\"name\",\"align\":\"center\",\"width\":190,\"css\":\"text-align: left !important;\",\"menuDisabled\":true},\"name\":\"name\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务类型编码\",\"dataIndex\":\"shtypecode\",\"align\":\"center\",\"width\":135,\"menuDisabled\":true,\"hidden\":true},\"name\":\"shtypecode\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务类型\",\"dataIndex\":\"shtype\",\"align\":\"center\",\"width\":135,\"menuDisabled\":true},\"name\":\"shtype\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务数\",\"dataIndex\":\"rws\",\"align\":\"center\",\"width\":120,\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"rws\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"未开始\",\"dataIndex\":\"wks\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"wks\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"进行中\",\"dataIndex\":\"jxz\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"jxz\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"正常完成\",\"dataIndex\":\"zcwc\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"zcwc\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"超时完成\",\"dataIndex\":\"cs\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"cs\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"已审核\",\"dataIndex\":\"ysh\",\"align\":\"center\",\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"ysh\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"终止\",\"dataIndex\":\"zz\",\"align\":\"center\",\"width\":103,\"css\":\"text-align: right !important;\",\"menuDisabled\":true},\"name\":\"zz\"}]}]}]}]}","vmdevents":"var page = this;\nvar login=\"\";\nvar ryRwDataList = [];\nvar store1 = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: [\"id\", \"xh\",\"login\", \"dwdm\", \"name\", \"shtypecode\",\"shtype\", \"rws\", \"wks\", \"jxz\", \"zz\", \"zcwc\", \"cs\", \"ysh\"]\n});\nvmd.webBase.getUserInfo(function(res,usermodel){\n    login=res.data[0].login;\n})\nvar ptServer = {\n    ip: '',\n    callcode: '',\n    userschedrun: ''\n};\nvar paramsry = {\n    crewid: '',\n    ksrq: '',\n    jsrq: ''\n};\nwindow.loadStoreRyrw = function(ob) {\n    ryRwDataList = [];\n    var hwDao = new HwDao(ptServer.ip, ptServer.callcode); //地址:端口和授权码(服务管理员分配)\n    var url = ptServer.userschedrun;\n    hwDao.get(url, {}, ob, function(res) {\n        debugger\n        if(res.isSucceed) {\n            if(res.data && res.data[0].datas.length > 0) {\n                var data = res.data[0].datas;\n                for(var i = 0; i < data.length; i++) {\n                    var itemObj = {\n                        id: i + 1,\n                        xh: i + 1,\n                        login: login,\n                        shtypecode:data[i].schedule_type,\n                        shtype:data[i].schedule_type_name,\n                        dwdm: data[i].dwdm,\n                        name: data[i].name,\n                        teme: data[i].team_name,\n                        rws: \"<a class='hand' href='#'>\" + data[i].zs + \"</a>\",\n                        wks: \"<a class='hand' href='#'>\" + data[i].wks + \"</a>\",\n                        jxz: \"<a class='hand' href='#'>\" + data[i].jxz + \"</a>\",\n                        ysh: \"<a class='hand' href='#'>\" + data[i].ysh + \"</a>\",\n                        zcwc: \"<a class='hand' href='#'>\" + data[i].zcwc + \"</a>\",\n                        cs: \"<a class='hand' href='#'>\" + data[i].cswc + \"</a>\",\n                        zz: \"<a class='hand' href='#'>\" + data[i].yzz + \"</a>\"\n                    }\n                    ryRwDataList.push(itemObj);\n                }\n            }\n            store1.loadData(ryRwDataList);\n        } else {\n            alert(res.errMsg);\n        }\n    }, function(res) {\n        alert(res);\n    });\n}\n\nfunction MyGrid_beforerender(sender) {\n    this.store = store1;\n\n}\n\n\nfunction CreateCalendar_queryBtnClick(sender, kssj, jssj) {\n    paramsry = {\n        crewid: '',\n        ksrq: kssj,\n        jsrq: jssj\n    };\n    loadStoreRyrw(paramsry);\n}\n\nfunction CreateCalendar_startDateOnchange(sender, ksrq, jsrq, bz) {\n    if(ksrq > jsrq) {\n        alert('开始日期不能大于结束日期!');\n        return;\n    }\n}\n\nfunction PerTaskMonSn_afterrender(sender) {\n    ptServer = {\n        ip: vmd.workspace.dataServiceIp,\n        callcode: MyGrid.callcode,\n        userInfo: MyGrid.userInfo,\n        userschedrun: MyGrid.userschedrun//'XXHTS/schedule/taskmanager/workbench/userschedrun'\n    };\n    paramsry = {\n        crewid: '',\n        ksrq: CreateCalendar.getStartDateVal(),\n        jsrq: CreateCalendar.getEndDateVal()\n    };\n   loadStoreRyrw(paramsry);\n}\n\nfunction MyGrid_cellclick(sender,rowIndex,columnIndex,e){\nvar dwdm=MyGrid.getStore().getAt(rowIndex).data.dwdm,rwlx=MyGrid.getStore().getAt(rowIndex).data.rwtypecode,kssj=CreateCalendar.getStartDateVal(),jssj=CreateCalendar.getEndDateVal(),curlogin=MyGrid.getStore().getAt(rowIndex).data.login,rwzt='';\nif(columnIndex=='7'){\n    rwzt='NOTSTARTED';\n}else if(columnIndex=='8'){\n     rwzt='INPROCESS';\n}else if(columnIndex=='9'){\n     rwzt='COMPLETE';\n}else if(columnIndex=='10'){\n     rwzt='OTCOMPLETE';\n}else if(columnIndex=='11'){\n    rwzt='AUDITED';\n}else if(columnIndex=='12'){\n     rwzt='ZZ';\n}\nvar url='http://10.207.60.70:9002/ProScheduling/pages/task/personnelTaskStatistics/personnelTaskStatistics.html?dwdm='+ dwdm +'&rwlx='+ rwlx +'&kssj=' + kssj + '&jssj='+ jssj +'&rwzt='+ rwzt +'&curlogin='+ curlogin +'&r=' + Math.random();\nwindow.open(url, \"_blank\");\n}","vmdcss":".hand a{\r\n   text-decoration:none; \r\n}\r\n.hand a:link {\r\n    color: blue; text-decoration:none;\r\n    \r\n}\r\n.hand a:active:{\r\n    color: red;\r\n    } \r\n/*a:visited {\r\n    color:purple;text-decoration:none;\r\n    \r\n} */\r\n.hand a:hover {\r\n    color: red; text-decoration:underline;\r\n    \r\n} \r\n.x-grid3-hd-row td {\r\n    line-height: 15px;\r\n    vertical-align: middle;\r\n    border-left: 0px solid;\r\n     border-right: 0px solid;\r\n     border: 1px solid #e4e4e4;\r\n}\r\n.x-grid3-scroller {\r\n    overflow-x: hidden;\r\n}\r\n/* =========================================== Grid Panel =========================================== */\r\n/* 表格左右间距 */\r\n.vmd-grid {\r\n   /* padding-left: 5px;\r\n    padding-right: 5px;*/\r\n}\r\n\r\n/* 表格线样式兼容 */\r\n.vmd-grid table {\r\n    border-collapse: collapse;\r\n}\r\n\r\n/* 表头背景色 */\r\n.vmd-grid .x-grid3-header {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-hd-over .x-grid3-hd-inner {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头错位兼容 */\r\n.vmd-grid .x-grid3-header-offset {\r\n    padding: 0;\r\n}\r\n\r\n/* 表头单元格 */\r\n.vmd-grid .x-grid3-header td {\r\n    border: 1px solid #e3e2e8;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体单元格 */\r\n.vmd-grid .x-grid3-body td {\r\n    border: 1px solid #e3e2e8;\r\n    border-top-width: 0;\r\n    padding: 0;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体行 */\r\n.vmd-grid .x-grid3-row {\r\n    border: none;\r\n}\r\n\r\n/* 表体行鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-row-over {\r\n    background-color: white;\r\n}\r\n\r\n/* 表体行选中背景色 */\r\n.vmd-grid .x-grid3-row-selected {\r\n    background-color: #F5F7FC !important;\r\n}\r\n\r\n/* =========================================== Grid Panel =========================================== */","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxprop\",\"id\":\"callcode     \",\"layoutConfig\":{},\"userConfig\":{\"id\":\"callcode     \",\"desc\":\"\",\"zhname\":\"授权码\",\"isPublic\":\"on\",\"radio_l5Ry\":\"string\",\"bindCmp\":\"MyGrid\",\"bindValue\":\"callcode\",\"uxcid\":\"grid\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"userInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"userInfo\",\"desc\":\"\",\"zhname\":\"\",\"isPublic\":\"on\",\"radio_l5Ry\":\"string\",\"bindCmp\":\"MyGrid\",\"bindValue\":\"userInfo\",\"uxcid\":\"grid\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}},{\"cid\":\"uxprop\",\"id\":\"userschedrun\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"userschedrun\",\"desc\":\"\",\"zhname\":\"数据服务地址\",\"isPublic\":\"on\",\"radio_l5Ry\":\"string\",\"bindCmp\":\"MyGrid\",\"bindValue\":\" userschedrun\",\"uxcid\":\"grid\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\"}}]},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}