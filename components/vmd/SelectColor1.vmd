{"vmdversion":"vmd2.0.5.200306","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"SelectColor1\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"header\":false,\"width\":283,\"height\":187,\"afterrender\":\"SelectColor1_afterrender\",\"panelWidth\":280},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"layout\":\"absolute\",\"border\":false,\"click\":\"hwDiv_click\",\"width\":285,\"height\":198,\"hidden\":false},\"cn\":[{\"cid\":\"vmdImg\",\"id\":\"add_btn\",\"layoutConfig\":{},\"userConfig\":{\"x\":224,\"y\":20,\"width\":22,\"height\":22,\"src\":\"/img/public/添加.png\",\"click\":\"add_btn_click\",\"style\":\"cursor: pointer;\",\"cls\":\"add_btn\",\"id\":\"add_btn\"}},{\"cid\":\"container\",\"id\":\"resDisplay\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"id\":\"resDisplay\",\"hidden\":false,\"width\":200,\"height\":30,\"x\":20,\"y\":15,\"border\":true,\"layout\":\"hbox\"}},{\"cid\":\"vmdImg\",\"id\":\"del_btn\",\"layoutConfig\":{},\"userConfig\":{\"x\":246,\"y\":23,\"width\":17,\"height\":17,\"src\":\"/img/public/减.png\",\"click\":\"del_btn_click\",\"style\":\"cursor: pointer;\",\"cls\":\"del_btn\",\"id\":\"del_btn\"}},{\"cid\":\"label\",\"id\":\"hwLabel\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":75,\"text\":\"色标颜色\"}},{\"cid\":\"textfield\",\"id\":\"position1\",\"layoutConfig\":{},\"userConfig\":{\"x\":90,\"y\":115,\"id\":\"position1\",\"width\":40,\"cls\":\"positiontext\",\"hidden\":true}},{\"cid\":\"label\",\"id\":\"hwLabel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":160,\"y\":75,\"text\":\"位置\"}},{\"cid\":\"label\",\"id\":\"hwLabel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":150,\"y\":125,\"text\":\"%\",\"hidden\":true}},{\"cid\":\"vmd.ux.NumberInput\",\"id\":\"position\",\"layoutConfig\":{},\"userConfig\":{\"x\":205,\"y\":70,\"id\":\"position\",\"change\":\"position_change\",\"width\":52}},{\"cid\":\"vmd.ux.ColorInput\",\"id\":\"hwColorSelect\",\"layoutConfig\":{},\"userConfig\":{\"x\":82,\"y\":70,\"id\":\"hwColorSelect\",\"width\":58,\"change\":\"hwColorSelect_change\"}}]}]}]}","vmdevents":"var clickNum = 2; //用于记录拾色器数量\nvar SelectColor1Div = \"\"; //用于记录当前选择的拾色器div信息\nvar Percentage = \"\"; //计算当前所占百分比\nvar ColorList = [];\nvar divInfo = []; //游标信息数组\nvar page = this;\n//$LAB.script(vmd.virtualPath + '/lib/chroma/chroma.min.js')\n$LAB.script(vmd.virtualPath + '/components/ux/selectcolor/1.0/js/chroma.js')\n\n//添加均分拾色器\nfunction add_btn_click(sender) {\n    //移除游标\n    for (var i = 0; i < divInfo.length; i++) {\n        if (divInfo[i].id != resDisplayDom.id + '_First' && divInfo[i].id != resDisplayDom.id + '_Last') {\n            var p_div = document.getElementById(parentdivid);\n            var div = document.getElementById(divInfo[i].id);\n            p_div.removeChild(div);\n            divInfo.remove(divInfo[i]);\n            i--;\n        }\n    }\n    clickNum++;\n    hwvar = 10;\n    for (var j = 2; j < clickNum; j++) {\n        var p = Math.round((j - 1) / (clickNum - 1) * 100);\n        hwvar = (resDisplayDom.clientWidth) * p / 100;\n        id = resDisplayDom.id + \"SelectColor1Div_\" + j;\n        Left = hwvar + \"px\";\n        CreatDiv(id, Left);\n        Percentage = p;\n        var backgroundcolor = $(\"#\" + resDisplay.id + \" .grad-step\").eq(Percentage).css(\"background-color\");\n    }\n}\n\n//创建最外层div\nfunction CreatDiv(id, Left, backgroundcolor) {\n    var nextcolor = '';\n    var panelbody = document.getElementById(parentdivid);\n    var style = {\n        width: \"10px\",\n        height: \"10px\",\n        className: \"thumb img-commonctrl active\",\n        Left: Left,\n        position: 'absolute',\n        float: 'left'\n\n    }\n    CreatNewDiv(id, style, panelbody);\n    var ParentDiv = document.getElementById(id);\n    var topdivstyle = {\n        className: 'thumb-top',\n        position: 'absolute',\n        backgroundcolor: backgroundcolor\n    }\n    var bottomdivstyle = {\n        className: 'thumb-bottom',\n        position: 'absolute',\n        mTop: \"4px\",\n        mLeft: \"-1px\",\n        backgroundcolor: backgroundcolor\n    }\n    CreatNewDiv(ParentDiv.id + '_thumb-top', topdivstyle, ParentDiv);\n    CreatNewDiv(ParentDiv.id + '_thumb-bottom', bottomdivstyle, ParentDiv);\n    panelbody.appendChild(ParentDiv);\n    percentage = Math.round(ParentDiv.offsetLeft * 100 / resDisplayDom.clientWidth);\n    //divInfo中新增数据\n    var div_data = {\n        id: id,\n        percentage: percentage,\n        color: $(\"#\" + resDisplay.id + \" .grad-step\").eq(percentage).css(\"background-color\")\n    }\n    divInfo.push(div_data);\n    //mousemove事件\n    function mouseMoveEvent(ev) {\n        ev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n        clickflag = 'move';\n        var left = parseInt(vmd(resDisplayDom).css('left'));\n        if (ev.clientX - hwDiv.el.getRegion().left <= left) {\n            ev.clientX = left + hwDiv.el.getRegion().left;\n        } else if (ev.clientX >= resDisplayDom.clientWidth + left + hwDiv.el.getRegion().left) {\n            ev.clientX = resDisplayDom.clientWidth + left + hwDiv.el.getRegion().left;\n        }\n\n        Percentage = Math.round(SelectColor1Div.offsetLeft * 100 / resDisplayDom.clientWidth);\n        position.setValue(Percentage);\n        oldpositon = Percentage;\n        var backgroundcolor = $(\"#\" + resDisplay.id + \" .grad-step\").eq(Percentage).css(\"background-color\");\n        var flag = 0;\n        var PValue = [];\n        var CValue = [];\n        for (var i = 0; i < divInfo.length; i++) {\n            CValue.push(divInfo[i].color);\n            PValue.push(divInfo[i].percentage);\n        }\n        //对数组进行排序\n        for (var i = 0; i <= PValue.length; i++) {\n            if (Percentage > PValue[i] && Percentage < PValue[i + 1]) {\n                //数组插入元素\n                PValue.splice(i + 1, 0, Percentage);\n                CValue.splice(i + 1, 0, nextcolor);\n            }\n        }\n        var s = chroma.scale(CValue).domain(PValue);\n        showColors(s);\n        vmd(ParentDiv).css('left', ev.clientX - left - hwDiv.el.getRegion().left);\n\n    }\n    var targetid;\n    //mouseup事件\n    function mouseUpEvent(ev) {\n        ev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n        if (clickflag == 'move') {\n            slidecilck('mouseUpEvent');\n            clickflag = '';\n        }\n\n        vmd(document).off('mousedown').off('mousemove');\n\n    }\n    // var startX = '';\n\n    function downevent(ev) {\n        ev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n        // console.log(divInfo)\n        targetid = ev.currentTarget.id;\n        slidecilck('downevent');\n        vmd(document).on('mousemove', mouseMoveEvent);\n        vmd(document).on('mouseup', mouseUpEvent);\n\n    }\n    if (id != resDisplayDom.id + '_First' && id != resDisplayDom.id + '_Last') {\n        vmd(ParentDiv).on('mousedown', downevent);\n    }\n\n    function click(ev) {\n        ev.preventDefault ? ev.preventDefault() : ev.returnValue = false;\n        clickflag = 'FL';\n        slidecilck('onclick');\n\n    }\n    vmd(ParentDiv).on('click', click);\n\n    var sliderdiv;\n\n    function slidecilck(flag) {\n        if (NextColorDiv) {\n            SelectColor1Div = NextColorDiv;\n        } else {\n\n        }\n        if (SelectColor1Div) {\n            SelectColor1Div.childNodes[1].style.boxShadow = \"0px 0px 0px #a6a6a6\";\n        }\n        switch (flag) {\n            case 'downevent':\n                SelectColor1Div = document.getElementById(targetid);\n                SelectColor1Div.childNodes[1].style.boxShadow = \"2px 2px 6px #a6a6a6\";\n                Percentage = Math.round(SelectColor1Div.offsetLeft * 100 / resDisplayDom.clientWidth);\n                var backgroundcolor = $(\"#\" + resDisplay.id + \" .grad-step\").eq(Percentage).css(\"background-color\");\n                nextcolor = backgroundcolor;\n                hwColorSelect.setValue(backgroundcolor);\n                for (var i = 0; i < divInfo.length; i++) {\n                    if (divInfo[i].id == targetid) {\n                        divInfo.remove(divInfo[i]);\n                    }\n                }\n                break;\n            case 'onclick':\n                if (clickflag == 'move') {\n                    return;\n                }\n                SelectColor1Div = document.getElementById(id);\n                percentage = Math.round(SelectColor1Div.offsetLeft * 100 / resDisplayDom.clientWidth);\n                var backgroundcolor = $(\"#\" + resDisplay.id + \" .grad-step\").eq(percentage).css(\"background-color\");\n                SelectColor1Div.childNodes[1].style.boxShadow = \"2px 2px 6px #a6a6a6\";\n                for (var i = 0; i < divInfo.length; i++) {\n                    if (divInfo[i].id == id) {\n                        divInfo.remove(divInfo[i]);\n                    }\n                }\n                var data = {\n                    id: id,\n                    percentage: percentage,\n                    color: backgroundcolor,\n                }\n                divseldata = data;\n                divInfo.push(data)\n                hwColorSelect.setValue(backgroundcolor);\n                nextcolor = '';\n                clickflag = '';\n                position.setValue(percentage);\n                oldpositon = percentage;\n                break;\n            case 'mouseUpEvent':\n                percentage = Math.round(SelectColor1Div.offsetLeft * 100 / resDisplayDom.clientWidth);\n                var backgroundcolor = hwColorSelect.getValue();\n                // var backgroundcolor = $(\"#\" + resDisplay.id + \" .grad-step\").eq(Percentage).css(\"background-color\");\n                if (nextcolor != '') {\n                    backgroundcolor = nextcolor;\n                }\n                var sliderflag = 0;\n                //拖动至其他游标上时做处理\n                for (var i = 0; i < divInfo.length; i++) {\n                    if (divInfo[i].percentage == percentage) {\n                        //直接给原有游标信息赋值\n                        var data = {\n                            id: divInfo[i].id,\n                            percentage: percentage,\n                            color: backgroundcolor\n                        }\n                        divInfo.splice(i, 1, data);\n                        clickNum = clickNum - 1;\n                        var p_div = document.getElementById(parentdivid);\n                        p_div.removeChild(SelectColor1Div);\n                        SelectColor1Div = document.getElementById(divInfo[i].id);\n                        sliderflag = 1;\n\n                    }\n                }\n                if (sliderflag != 1) {\n                    var divdata = {\n                        id: SelectColor1Div.id,\n                        percentage: percentage,\n                        color: backgroundcolor\n                    }\n                    divseldata = divdata;\n                    divInfo.push(divdata);\n                }\n                SelectColor1Div.childNodes[1].style.boxShadow = \"2px 2px 6px #a6a6a6\";\n                showColors();\n                hwColorSelect.setValue(backgroundcolor);\n                nextcolor = '';\n                position.setValue(Percentage);\n                oldpositon = Percentage;\n                //change事件所需数据组织\n                var temp;\n                for (var i = 0; i < divInfo.length - 1; i++) {\n                    for (var j = 0; j < divInfo.length - 1 - i; j++) {\n                        if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                            temp = divInfo[j];\n                            divInfo[j] = divInfo[j + 1];\n                            divInfo[j + 1] = temp;\n                        }\n                    }\n                }\n                var chromaColor = [];\n                var chromaValue = [];\n                for (var i = 0; i < divInfo.length; i++) {\n                    chromaColor.push(divInfo[i].color);\n                    chromaValue.push(divInfo[i].percentage);\n                }\n                var data = {\n                    chromaColor: chromaColor,\n                    chromaValue: chromaValue,\n                    allColors: ColorList\n                }\n                page.fireEvent('change', page, data);\n                break;\n        }\n\n    }\n    slidecilck('onclick');\n}\n\nvar NextColorDiv;\nvar clickflag;\nvar resDisplayDom;\n//删除选中拾色器\nfunction del_btn_click(sender) {\n    if (SelectColor1Div != document.getElementById(resDisplayDom.id + '_First') && SelectColor1Div != document.getElementById(resDisplayDom.id + '_Last')) {\n        var temp;\n        for (var i = 0; i < divInfo.length - 1; i++) {\n            for (var j = 0; j < divInfo.length - 1 - i; j++) {\n                if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                    temp = divInfo[j];\n                    divInfo[j] = divInfo[j + 1];\n                    divInfo[j + 1] = temp;\n                }\n            }\n        }\n\n        var panelbody = document.getElementById(parentdivid);\n        panelbody.removeChild(SelectColor1Div);\n        for (var i = 0; i < divInfo.length; i++) {\n            if (divInfo[i].id == SelectColor1Div.id) {\n                //删除后默认选中下一个游标\n                if (i == divInfo.length - 2) {\n                    var NextColorDiv = document.getElementById(divInfo[i - 1].id);\n                } else {\n                    var NextColorDiv = document.getElementById(divInfo[i + 1].id);\n                }\n                divInfo.remove(divInfo[i]);\n                NextColorDiv.childNodes[1].style.boxShadow = \"2px 2px 6px #a6a6a6\";\n            }\n        }\n        if (NextColorDiv) {\n            SelectColor1Div = NextColorDiv;\n            percentage = Math.round(SelectColor1Div.offsetLeft * 100 / resDisplayDom.clientWidth);\n            var backgroundcolor = $(\"#\" + resDisplay.id + \" .grad-step\").eq(percentage).css(\"background-color\");\n            hwColorSelect.setValue(backgroundcolor);\n            position.setValue(percentage);\n            oldpositon = percentage;\n        }\n        showColors();\n        clickNum--;\n        //change事件所需数据组织\n        var temp;\n        for (var i = 0; i < divInfo.length - 1; i++) {\n            for (var j = 0; j < divInfo.length - 1 - i; j++) {\n                if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                    temp = divInfo[j];\n                    divInfo[j] = divInfo[j + 1];\n                    divInfo[j + 1] = temp;\n                }\n            }\n        }\n        var chromaColor = [];\n        var chromaValue = [];\n        for (var i = 0; i < divInfo.length; i++) {\n            chromaColor.push(divInfo[i].color);\n            chromaValue.push(divInfo[i].percentage);\n        }\n        var data = {\n            chromaColor: chromaColor,\n            chromaValue: chromaValue,\n            allColors: ColorList\n        }\n        page.fireEvent('change', page, data);\n\n    }\n\n}\n\n\nfunction hwColorSelect_colorchange(sender, selColor) {\n\n}\n\nfunction showColors(s, fun) {\n    //divInfo进行冒泡排序\n    var temp;\n    for (var i = 0; i < divInfo.length - 1; i++) {\n        for (var j = 0; j < divInfo.length - 1 - i; j++) {\n            if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                temp = divInfo[j];\n                divInfo[j] = divInfo[j + 1];\n                divInfo[j + 1] = temp;\n            }\n        }\n    }\n    var colorvalue = [];\n    var percentagevalue = [];\n    for (var i = 0; i < divInfo.length; i++) {\n        colorvalue.push(divInfo[i].color);\n        percentagevalue.push(divInfo[i].percentage);\n    }\n    if (!s) {\n        var s = chroma.scale(colorvalue).domain(percentagevalue);\n    }\n    ColorList = [];\n    try {\n        resDisplay.update('<ol><li>' + resRec(s) + '</li>' + '</ol>');\n    } catch (e) {\n        console.warn(e);\n    }\n\n    function resRec(d) {\n        if ($.isArray(d)) {\n            return '[' + d.map(d.length > 2 ? resShort : resLong).join(',') + ']';\n        }\n        return resLong(d);\n\n        function resLong(d) {\n            if ($.isFunction(d)) {\n                var s = '';\n                var dom = d.domain ? d.domain() : [0, 1],\n                    dmin = Math.min(dom[0], dom[dom.length - 1]),\n                    dmax = Math.max(dom[dom.length - 1], dom[0]);\n                for (var i = 0; i <= 100; i++) {\n\n                    ColorList.push('' + d(dmin + i / 100 * (dmax - dmin)) + '')\n                    s += '<span class=\"grad-step\" data-value = ' + (i / 100 * (dmax - dmin)).toFixed(1) + ' style=\"background-color:' + d(dmin + i / 100 * (dmax - dmin)) + '\"></span>';\n\n                }\n                return '<div id =\"gradient\" class=\"gradient\">' + s + '</div>';\n            }\n        }\n\n        function resShort(d) {\n            if (typeof d == 'string') {\n                return '<span class=\"cm-string cm-color cm-small\" data-color=\"' + d + '\"><span class=\"cm-hidden-text\">\\'' + chroma(d).hex() + '\\'</span></span>';\n            } else if (typeof d == 'object' && d._rgb) {\n                return '<span class=\"cm-string cm-color cm-small\" data-color=\"' + d.css() + '\"><span class=\"cm-hidden-text\">\\'' + d.hex() + '\\'</span></span>';\n            } else if ($.isNumeric(d)) {\n                return '<span class=\"cm-number\">' + round(d, 2) + '</span>';\n            } else if (isNaN(d)) {\n                return '<span class=\"cm-number cm-nan\">NaN</span>';\n            }\n        }\n\n        function round(d, p) {\n            var n = Math.pow(10, p);\n            return Math.round(d * n) / n;\n        }\n    }\n}\n\n\nfunction hwColorInput_change(sender, selColor) {\n\n}\n\n\nfunction CreatNewDiv(div_id, style, parent_div, backgroundcolor) {\n    var div = document.createElement('div');\n    div.id = div_id;\n    div.style.width = style.width;\n    div.style.height = style.height;\n    div.style.marginTop = style.mTop;\n    div.style.marginLeft = style.mLeft;\n    div.style.left = style.Left;\n    div.style.position = style.position;\n    div.style.float = style.float;\n    div.clear = \"both\";\n    div.className = style.className;\n    if (style.backgroundcolor) {\n        div.style.backgroundColor = style.backgroundcolor\n    }\n    parent_div.appendChild(div);\n}\nvar parentdivid;\n\nfunction SelectColor1_afterrender(sender) {\n    resDisplayDom = resDisplay.el.dom;\n    var parentdom = hwDiv.el.dom;\n    var style = {\n        className: \"P_SelcetColor\",\n        width: resDisplayDom.clientWidth + 10 + 'px',\n        height: '20px',\n        mTop: '45px',\n        mLeft: resDisplayDom.offsetLeft - 5 + 'px',\n        position: 'relative',\n    }\n    parentdivid = resDisplayDom.id + \"P_SelcetColor\";\n    CreatNewDiv(parentdivid, style, parentdom);\n    // _setValue();\n\n    // CreatDiv(\"First\", '0px');\n    // CreatDiv(\"Last\", resDisplayDom.clientWidth + 'px');\n    // _setColorPercentageValue([\"#FFFF00\", \"rgb(255, 153, 204)\", \"rgb(204, 255, 204)\", \"008ae5\"], [0, 28, 64, 100])\n    //按钮位置调整\n    // var addbtn = document.getElementsByClassName('add_btn')[0];\n    // addbtn.style.left = resDisplayDom.clientWidth + resDisplayDom.offsetLeft + 5 + 'px';\n    // var delbtn = document.getElementsByClassName('del_btn')[0];\n    // delbtn.style.left = resDisplayDom.clientWidth + resDisplayDom.offsetLeft + 30 + 'px';\n}\n\nfunction hwDiv_afterrender(sender) {\n\n}\n\nfunction _setColorValue(Color) {\n    ColorValue = Color;\n}\n\nfunction _setPercentageValue(Percentage) {\n    ColorPercentageValue = Percentage;\n}\n\nfunction _setColorPercentageValue(Color, Percentage) {\n    // vmd.taskRunner(function() {\n    //     if (resDisplay.el && chroma) return true;\n    // }, function() {\n    //     ColorValue = Color;\n    //     ColorPercentageValue = Percentage;\n    //     var s = chroma.scale(ColorValue).domain(ColorPercentageValue);\n    //     showColors(s);\n    //     CreatCursor(Percentage);\n    // })\n    vmd.taskRunner(function() {\n        if (resDisplay.el) return true;\n    }, function() {\n        var s = chroma.scale(Color).domain(Percentage);\n        showColors(s);\n        //如果界面上已有游标，则移除当前游标\n        // if (clickNum != 2) {\n        for (var i = 0; i < divInfo.length; i++) {\n            var p_div = document.getElementById(parentdivid);\n            var div = document.getElementById(divInfo[i].id);\n            p_div.removeChild(div);\n            divInfo.remove(divInfo[i]);\n            i--;\n        }\n        // }\n        CreatDiv(resDisplayDom.id + \"_First\", '0px');\n        CreatDiv(resDisplayDom.id + \"_Last\", resDisplayDom.clientWidth + 'px');\n        CreatCursor(Percentage);\n    })\n}\n\n\n//初始化创建光标信息\nfunction CreatCursor(percentage) {\n    clickNum = 2;\n    for (var j = 0; j < percentage.length; j++) {\n        var p = percentage[j] / 100;\n        if (p != 0 && p != 1) {\n            hwvar = parseInt(resDisplayDom.clientWidth * p);\n            id = resDisplayDom.id + \"SelectColor1Div_\" + j;\n            Left = hwvar + \"px\";\n            CreatDiv(id, Left);\n            clickNum++;\n        }\n    }\n    var temp;\n    for (var i = 0; i < divInfo.length - 1; i++) {\n        for (var j = 0; j < divInfo.length - 1 - i; j++) {\n            if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                temp = divInfo[j];\n                divInfo[j] = divInfo[j + 1];\n                divInfo[j + 1] = temp;\n            }\n        }\n    }\n\n}\n\nfunction hwDiv_click(sender, e) {\n\n}\n\nvar nextcolor;\nvar oldpositon = '';\nvar oldcolor = '';\n\n\nfunction position_change(sender, value, describe) {\n    if (!SelectColor1Div) {\n        return;\n    }\n    if (SelectColor1Div.id == resDisplayDom.id + '_First') {\n        position.setValue(0);\n        return;\n    }\n    if (SelectColor1Div.id == resDisplayDom.id + '_Last') {\n        position.setValue(100);\n        return;\n    }\n    var sliderflag = 0;\n    if (oldpositon == 100 && parseInt(value) > 100) {\n        position.setValue(100);\n        value = 100;\n        return;\n    }\n    if (parseInt(value) > 100) {\n        position.setValue(100);\n        value = 100;\n    }\n    //拖动至其他游标上时做处理\n    for (var i = 0; i < divInfo.length; i++) {\n        if (divInfo[i].percentage == value) {\n            //数组中当前信息\n            for (var j = 0; j < divInfo.length; j++) {\n                if (divInfo[j].id == SelectColor1Div.id) {\n                    divInfo.remove(divInfo[j]);\n                }\n            }\n            //直接给原有游标信息赋值\n            var data = {\n                id: divInfo[i - 1].id,\n                percentage: value,\n                color: hwColorSelect.getValue()\n            }\n            divInfo.splice(i - 1, 1, data);\n            clickNum = clickNum - 1;\n            var p_div = document.getElementById(parentdivid);\n            p_div.removeChild(SelectColor1Div);\n            SelectColor1Div = document.getElementById(divInfo[i - 1].id);\n            SelectColor1Div.childNodes[1].style.boxShadow = \"2px 2px 6px #a6a6a6\";\n            sliderflag = 1;\n        }\n    }\n    if (oldpositon && sliderflag != 1) {\n        for (var i = 0; i < divInfo.length; i++) {\n            if (divInfo[i].percentage == oldpositon) {\n                divInfo[i].percentage = value;\n                var newcolor = divInfo[i].color;\n                var newid = divInfo[i].color;\n                SelectColor1Div.style.left = (parseInt(value) * resDisplayDom.clientWidth) / 100 + 'px';\n            }\n        }\n    }\n\n    showColors();\n    oldpositon = value;\n    //change事件所需数据组织\n    var temp;\n    for (var i = 0; i < divInfo.length - 1; i++) {\n        for (var j = 0; j < divInfo.length - 1 - i; j++) {\n            if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                temp = divInfo[j];\n                divInfo[j] = divInfo[j + 1];\n                divInfo[j + 1] = temp;\n            }\n        }\n    }\n    var chromaColor = [];\n    var chromaValue = [];\n    for (var i = 0; i < divInfo.length; i++) {\n        chromaColor.push(divInfo[i].color);\n        chromaValue.push(divInfo[i].percentage);\n    }\n    var data = {\n        chromaColor: chromaColor,\n        chromaValue: chromaValue,\n        allColors: ColorList\n    }\n    page.fireEvent('change', page, data);\n}\n\n\nfunction hwColorSelect_change(sender, selColor) {\n    var color = hwColorSelect.getValue();\n    for (var i = 0; i < divInfo.length; i++) {\n        if (divInfo[i].id == SelectColor1Div.id) {\n            divInfo[i].color = color;\n        }\n    }\n    showColors();\n    //change事件所需数据组织\n    var temp;\n    for (var i = 0; i < divInfo.length - 1; i++) {\n        for (var j = 0; j < divInfo.length - 1 - i; j++) {\n            if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                temp = divInfo[j];\n                divInfo[j] = divInfo[j + 1];\n                divInfo[j + 1] = temp;\n            }\n        }\n    }\n    var chromaColor = [];\n    var chromaValue = [];\n    for (var i = 0; i < divInfo.length; i++) {\n        chromaColor.push(divInfo[i].color);\n        chromaValue.push(divInfo[i].percentage);\n    }\n    var data = {\n        chromaColor: chromaColor,\n        chromaValue: chromaValue,\n        allColors: ColorList\n    }\n    page.fireEvent('change', page, data);\n}\n\nfunction _setValue(data) {\n    if (!data || data.chromaValue.length < 2) {\n        _setColorPercentageValue([\"red\", \"green\", \"blue\"], [0, 50, 100]);\n    } else {\n        _setColorPercentageValue(data.chromaColor, data.chromaValue);\n    }\n}\n\nfunction getValue() {\n    //change事件所需数据组织\n    var temp;\n    for (var i = 0; i < divInfo.length - 1; i++) {\n        for (var j = 0; j < divInfo.length - 1 - i; j++) {\n            if (divInfo[j].percentage > divInfo[j + 1].percentage) {\n                temp = divInfo[j];\n                divInfo[j] = divInfo[j + 1];\n                divInfo[j + 1] = temp;\n            }\n        }\n    }\n    var chromaColor = [];\n    var chromaValue = [];\n    for (var i = 0; i < divInfo.length; i++) {\n        chromaColor.push(divInfo[i].color);\n        chromaValue.push(divInfo[i].percentage);\n    }\n    var data = {\n        chromaColor: chromaColor,\n        chromaValue: chromaValue,\n        allColors: ColorList\n    }\n    return data;\n}","vmdcss":".colpick_hue_arrs {\r\n    position: absolute;\r\n}\r\n\r\n.colpick_hue_larr {\r\n    position: absolute;\r\n    border-left: 6px solid transparent;\r\n    border-right: 6px solid transparent;\r\n    border-top: 7px solid #858585;\r\n\r\n}\r\n\r\n.colpick_hue_rarr {\r\n    position: absolute;\r\n    border-left: 6px solid transparent;\r\n    border-right: 6px solid transparent;\r\n    border-bottom: 7px solid #858585;\r\n}\r\n\r\n.slider .thumb {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 13px;\r\n    height: 15px;\r\n    margin-left: -7px;\r\n    cursor: default;\r\n    background-position: -13px -150px;\r\n}\r\n\r\n.thumb-top {\r\n    position: absolute;\r\n    width: 8px;\r\n    height: 9px;\r\n    background-color: #D9D9D9;\r\n    -moz-transform: rotate(45deg);\r\n    -ms-transform: rotate(45deg);\r\n    -webkit-transform: rotate(45deg);\r\n    -o-transform: rotate(45deg);\r\n    transform: rotate(45deg);\r\n    border-top: solid 1px #848484;\r\n    border-left: solid 1px #848484;\r\n    border-radius: 0 3px;\r\n    box-sizing: content-box;\r\n}\r\n\r\n.thumb-bottom {\r\n    position: absolute;\r\n    width: 10px;\r\n    height: 8px;\r\n    background-color: #D9D9D9;\r\n    border: solid 1px #848484;\r\n    border-top: none;\r\n    border-radius: 2px;\r\n    box-sizing: content-box;\r\n}\r\n\r\n.gradient {\r\n    width: 100%;\r\n    white-space: nowrap;\r\n    position: relative;\r\n    display: inline-block;\r\n    top: 0px;\r\n    padding-bottom: 15px;\r\n}\r\n\r\n.add_btn {\r\n    /*margin-left: 10px;*/\r\n}\r\n\r\n.del_btn {\r\n    /*margin-left: 10px;*/\r\n}\r\n\r\n.positiontext {\r\n    border: solid 1px #848484;\r\n}","vmdprops":"\"\"","type":"ux","vmdcmpdeps":[],"vmdevents_controller":"Ext.define('vmd.ux.selectColor.Controller', {\n    xtype: 'vmd.ux.selectColor.Controller',\n    constructor: function(options) {\n        \n    }\n})","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxprop\",\"id\":\"ColorColumnWidth\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"ColorColumnWidth\",\"zhname\":\"色柱宽度\",\"bindCmp\":\"resDisplay\",\"bindValue\":\"width\",\"isPublic\":\"on\",\"desc\":\"色柱宽度\",\"uxcid\":\"container\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"ColorCodeWidth\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"ColorCodeWidth\",\"zhname\":\"色标颜色宽度\",\"bindCmp\":\"hwColorSelect\",\"bindValue\":\"width\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"vmd.ux.ColorInput\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false,\"radio_muB5\":\"string\"}},{\"cid\":\"uxprop\",\"id\":\"ColorColumnLeft\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"ColorColumnLeft\",\"zhname\":\"色柱左间距\",\"bindCmp\":\"resDisplay\",\"bindValue\":\"x\",\"isPublic\":\"on\",\"desc\":\"色柱左间距\",\"uxcid\":\"container\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false}}]},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"getColorValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getColorValue\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"获取颜色列表数组\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nreturn ColorValue;\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"getPercentageValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getPercentageValue\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"//获取颜色百分比数组信息\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nreturn ColorPercentageValue;\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"getColorList\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getColorList\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"return ColorList;\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setColorValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setColorValue\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"colorlist\",\"code\":\"debugger\\n_setColorValue(colorlist)\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setPercentageValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setPercentageValue\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"percentagelist\",\"code\":\"_setPercentageValue(percentagelist)\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setColorPercentageValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setColorPercentageValue\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"colorlist,percentagelist\",\"code\":\"//直接填写方法内容\\n_setColorPercentageValue(colorlist,percentagelist)\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"setValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setValue\",\"params\":\"data\",\"desc\":\"\",\"isPublic\":\"on\",\"code\":\"return _setValue(data)\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxevent\",\"id\":\"change\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"change\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"data\",\"code\":\"\"}}]}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"rescss\",\"id\":\"components/ux/selectcolor/1.0/css/hwcharts.css\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"components/ux/selectcolor/1.0/css/hwcharts.css\",\"path\":\"components/ux/selectcolor/1.0/css/hwcharts.css\",\"absolutePath\":\"{{vmduxpath}}/components/ux/selectcolor/1.0/css/hwcharts.css\",\"ext\":\"css\"}}]},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"resjs\",\"id\":\"components/ux/selectcolor/1.0/js/chroma.min.js\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"components/ux/selectcolor/1.0/js/chroma.min.js\",\"path\":\"components/ux/selectcolor/1.0/js/chroma.min.js\",\"absolutePath\":\"{{vmduxpath}}/components/ux/selectcolor/1.0/js/chroma.min.js\",\"ext\":\"js\"}},{\"cid\":\"resjs\",\"id\":\"components/ux/selectcolor/1.0/js/chroma.js\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"components/ux/selectcolor/1.0/js/chroma.js\",\"path\":\"components/ux/selectcolor/1.0/js/chroma.js\",\"absolutePath\":\"{{vmduxpath}}/components/ux/selectcolor/1.0/js/chroma.js\",\"ext\":\"js\"}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resimg\",\"id\":\"components/ux/selectcolor/1.0/img/减.png\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"components/ux/selectcolor/1.0/img/减.png\",\"path\":\"components/ux/selectcolor/1.0/img/减.png\",\"absolutePath\":\"{{vmduxpath}}/components/ux/selectcolor/1.0/img/减.png\",\"ext\":\"png\"}},{\"cid\":\"resimg\",\"id\":\"components/ux/selectcolor/1.0/img/添加.png\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"components/ux/selectcolor/1.0/img/添加.png\",\"path\":\"components/ux/selectcolor/1.0/img/添加.png\",\"absolutePath\":\"{{vmduxpath}}/components/ux/selectcolor/1.0/img/添加.png\",\"ext\":\"png\"}}]}]}"}