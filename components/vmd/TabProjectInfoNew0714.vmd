{"vmdversion":"2.0.3.0710","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"TabProjectInfoNew0714\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"header\":false,\"width\":609,\"height\":422,\"beforerender\":\"TabProjectInfoNew0714_beforerender\",\"afterrender\":\"TabProjectInfoNew0714_afterrender\"},\"cn\":[{\"cid\":\"tabpanel\",\"id\":\"TabsProjectInfo\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"width\":610,\"height\":420,\"id\":\"TabsProjectInfo\",\"activeTab\":4,\"tabchange\":\"TabsProjectInfo_tabchange\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panelTabInfo\",\"layoutConfig\":{},\"userConfig\":{\"title\":\"基本信息\",\"id\":\"panelTabInfo\",\"layout\":\"absolute\",\"width\":436,\"height\":270,\"beforerender\":\"panelTabInfo_beforerender\"},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":15,\"text\":\"项目名称：\",\"height\":20}},{\"cid\":\"textfield\",\"id\":\"hwTextProjectName\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":10,\"width\":470,\"id\":\"hwTextProjectName\",\"blankText\":\"\",\"emptyText\":\"我的项目\"}},{\"cid\":\"textfield\",\"id\":\"hwTextCreateTime\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":100,\"width\":470,\"readOnly\":false,\"id\":\"hwTextCreateTime\",\"disabled\":true}},{\"cid\":\"label\",\"id\":\"label1\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":105,\"text\":\"创建时间：\"}},{\"cid\":\"label\",\"id\":\"label2\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":165,\"text\":\"修改时间：\"}},{\"cid\":\"textfield\",\"id\":\"hwTextModifiedTime\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":160,\"width\":470,\"readOnly\":false,\"id\":\"hwTextModifiedTime\",\"disabled\":true}},{\"cid\":\"label\",\"id\":\"label3\",\"layoutConfig\":{},\"userConfig\":{\"x\":43,\"y\":190,\"text\":\"    说明：\",\"height\":20}},{\"cid\":\"textarea\",\"id\":\"hwTextAreaProjectDescription\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":190,\"width\":470,\"height\":90,\"id\":\"hwTextAreaProjectDescription\"}},{\"cid\":\"label\",\"id\":\"label6\",\"layoutConfig\":{},\"userConfig\":{\"x\":32,\"y\":75,\"text\":\"创建人：\",\"height\":16}},{\"cid\":\"label\",\"id\":\"label7\",\"layoutConfig\":{},\"userConfig\":{\"x\":32,\"y\":135,\"text\":\"修改人：\"}},{\"cid\":\"textfield\",\"id\":\"hwTextCreateBy\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":70,\"width\":470,\"id\":\"hwTextCreateBy\",\"readOnly\":false,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"hwTextModifiedBy\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":130,\"width\":470,\"id\":\"hwTextModifiedBy\",\"beforerender\":\"hwTextModifiedBy_beforerender\",\"readOnly\":false,\"disabled\":true}},{\"cid\":\"label\",\"id\":\"label4\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":45,\"text\":\"项目别名：\",\"height\":20}},{\"cid\":\"textfield\",\"id\":\"hwTextProjectAlias\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":40,\"width\":470,\"id\":\"hwTextProjectAlias\"}}]},{\"cid\":\"panel\",\"id\":\"panelTabWorkflow\",\"layoutConfig\":{},\"userConfig\":{\"title\":\"工作流\",\"id\":\"panelTabWorkflow\",\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"checkboxgroup\",\"id\":\"workflowChkgroup\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":0,\"vertical\":true,\"width\":600,\"height\":390,\"columns\":1,\"id\":\"workflowChkgroup\",\"afterrender\":\"workflowChkgroup_afterrender\",\"beforerender\":\"workflowChkgroup_beforerender\",\"store\":\"\",\"autoScroll\":true}}]},{\"cid\":\"panel\",\"id\":\"panelTabDataService\",\"layoutConfig\":{},\"userConfig\":{\"title\":\"数据服务\",\"id\":\"panelTabDataService\",\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"style\":\"\",\"autoWidth\":false,\"autoHeight\":false,\"height\":35,\"width\":609,\"layout\":\"auto\"},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"delService\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"删除\",\"id\":\"delService\",\"type\":\"text\",\"icon\":\"icon-minus\",\"style\":\"position: relative;    margin-right: 20px;    float: right;    top: 4px;\",\"click\":\"delService_click\"}},{\"cid\":\"vmdButton\",\"id\":\"addService\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"添加\",\"style\":\"position: relative;    margin-right: 20px;    float: right;    top: 4px;\",\"id\":\"addService\",\"icon\":\" icon-plus\",\"type\":\"text\",\"click\":\"addService_click\"}}]},{\"cid\":\"checkboxgroup\",\"id\":\"chkGrpDataService\",\"layoutConfig\":{},\"userConfig\":{\"width\":595,\"vertical\":false,\"columns\":2,\"id\":\"chkGrpDataService\",\"beforerender\":\"chkGrpDataService_beforerender\",\"height\":355,\"x\":15,\"y\":40,\"autoScroll\":true}}]},{\"cid\":\"panel\",\"id\":\"panelTabResource\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"panelTabResource\",\"title\":\"资源\",\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"vmd.ux.TabWorkSpaceResource\",\"id\":\"TabWorkSpaceResource\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"afterrender\":\"TabWorkSpaceResource_afterrender\",\"beforerender\":\"TabWorkSpaceResource_beforerender\"}}]},{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"title\":\"项目成员\",\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"grid\",\"id\":\"MyGrid\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":30,\"height\":360,\"hideHeaders\":false,\"header\":false},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"序号\",\"dataIndex\":\"data1\",\"width\":40},\"name\":\"MyColumn\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"成员名\",\"dataIndex\":\"data2\",\"width\":180,\"align\":\"center\"},\"name\":\"MyColumn1\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"所属部门\",\"dataIndex\":\"data3\",\"width\":380,\"align\":\"center\"},\"name\":\"MyColumn2\"}]},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":360,\"y\":0,\"text\":\"添加\",\"type\":\"text\",\"icon\":\"icon-plus\",\"click\":\"button_click\"}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"x\":410,\"y\":0,\"text\":\"删除\",\"type\":\"text\",\"icon\":\"icon-minus\"}},{\"cid\":\"vmdButton\",\"id\":\"button2\",\"layoutConfig\":{},\"userConfig\":{\"x\":460,\"y\":0,\"text\":\"成员角色\",\"type\":\"text\",\"icon\":\"icon-user\",\"click\":\"button2_click\"}},{\"cid\":\"vmdButton\",\"id\":\"button3\",\"layoutConfig\":{},\"userConfig\":{\"x\":530,\"y\":0,\"text\":\"角色管理\",\"type\":\"text\",\"icon\":\"icon-key\",\"click\":\"button3_click\"}}]},{\"cid\":\"panel\",\"id\":\"panelRegInfo\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"title\":\"发布注册信息\",\"id\":\"panelRegInfo\"},\"cn\":[{\"cid\":\"vmd.ux.RegRelease\",\"id\":\"RegRelease\",\"layoutConfig\":{},\"userConfig\":{}}]}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"var page = this;\nvar objInfoId = \"\"; // 项目ID\nvar workspaceId = \"\"; // 工区ID\nvar workflowAddress = \"\"; // 工作流服务地址\n// var dataServiceAddress = \"\"; // 数据服务地址\nvar applyType = 1;\nvar login = Ext.util.Cookies.get('userName');\n\nvar storeWorkflow = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: ['label', 'value', 'checked']\n});\n\nvar storeDataService = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: ['label', 'value', 'checked']\n});\n\nfunction TabsProjectInfo_tabchange(sender, tab) {\n\n    var tabId = tab.id;\n    var tabIndexInfo = tabId.indexOf(\"panelTabInfo\"); // 基于0开始,找不到返回-1\n    var tabIndexWorkFlow = tabId.indexOf(\"panelTabWorkflow\"); // 基于0开始,找不到返回-1\n    var tabIndexDataService = tabId.indexOf(\"panelTabDataService\"); // 基于0开始,找不到返回-1\n    var tabIndexResource = tabId.indexOf(\"panelTabResource\"); // 基于0开始,找不到返回-1\n    var tabIndexRegInfo = tabId.indexOf(\"panelRegInfo\"); // 基于0开始,找不到返回-1\n\n    // 基本信息\n    if(tabIndexInfo > -1) {\n        queryDataInfo();\n    } else if(tabIndexWorkFlow > -1) {\n        queryWorkFlow();\n    } else if(tabIndexDataService > -1) {\n        queryDataService();\n    } else if(tabIndexResource > -1) {\n        TabWorkSpaceResource.iSetWorkSpaceId(objInfoId);\n    }\n    //20180711 成兵增加对项目注册信息提取\n    else if(tabIndexRegInfo > -1) {\n        RegRelease.getRegInfo(objInfoId);\n        panelRegInfo.ifDataLoaded=true;\n    }\n    // queryDataInfo();\n    // queryWorkFlow();\n    // queryDataService();\n    // TabWorkSpaceResource.iSetWorkSpaceId(objInfoId);\n}\n\nfunction queryDataInfo() {\n\n    // objInfoId = \"18a7a702-1077-4b44-9e35-6e289da389d9\";\n\n    if(objInfoId === null || objInfoId === undefined || objInfoId === '') {\n        return;\n    }\n    if(panelTabInfo.ifDataLoaded) {\n        return;\n    }\n    hwDas.get(\n        \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {\n            \"projectid\": objInfoId\n        },\n        function(result) {\n            // 根据获取的数据赋值基本信息Tab页\n            if(null === result && undefined === result) {\n                return;\n            }\n\n            if(null != result.data && undefined != result.data) {\n                if(result.data.length > 0) {\n                    if(null != result.data[0].datas && undefined != result.data[0].datas) {\n                        if(result.data[0].datas.length > 0) {\n                            hwTextProjectName.setValue(result.data[0].datas[0].project_name);\n                            hwTextProjectAlias.setValue(result.data[0].datas[0].alias_short_name);\n                            hwTextCreateBy.setValue(result.data[0].datas[0].row_created_by);\n                            hwTextCreateTime.setValue(result.data[0].datas[0].row_created_date);\n                            hwTextModifiedBy.setValue(result.data[0].datas[0].row_changed_by);\n                            hwTextModifiedTime.setValue(result.data[0].datas[0].row_changed_date);\n                            hwTextAreaProjectDescription.setValue(result.data[0].datas[0].description);\n                        }\n                    }\n                }\n            }\n\n            panelTabInfo.ifDataLoaded = true;\n            // Tips.tips(\"查询成功！\", \"success\");\n        },\n        function(msg) {\n            Tips.tips(\"查询失败！\", \"error\");\n            // Ext.Msg.alert(\"提示\", \"查询项目信息失败！\");\n        });\n}\n\nfunction queryWorkFlow() {\n    // objInfoId = \"326c3fa0-1e02-4402-b2c2-42659a50e0b0\";\n\n    if(objInfoId === null || objInfoId === undefined || objInfoId === '') {\n        return;\n    }\n    if(panelTabWorkflow.ifDataLoaded) {\n        return;\n    }\n\n    // workflowAddress = \"www.hanweikeji.com:8004\";\n    // if(\"\" != workspaceId) {\n    //     hwDas.get(\n    //         \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {\n    //             \"workspaceid\": workspaceId,\n    //             \"servicetype\": 3\n    //         },\n    //         function(result) {\n    //             // 根据获取的数据赋值基本信息Tab页\n    //             if(null != result && undefined != result) {\n    //                 if(null != result.data && undefined != result.data) {\n    //                     if(result.data.length > 0) {\n    //                         if(null != result.data[0].datas && undefined != result.data[0].datas) {\n    //                             if(result.data[0].datas.length > 0) {\n    //                                 workflowAddress = result.data[0].datas[0].address;\n    //                             }\n    //                         }\n    //                     }\n    //                 }\n    //             }\n    //         },\n    //         function(msg) {\n    //             // Ext.Msg.alert(\"提示\", \"查询工区信息失败！\");\n    //         });\n    // }\n    // workflowAddress = \"www.hanweikeji.com:8004\";\n    //var urlService = \"http://\" + workflowAddress + \"/activiti-rest/service/repository/categorys/root?info=kermit\";\n    var urlService = \"http://\" + (parent.vmd.workspace.workflowIp || vmdSettings.workflowIp) + \"/activiti-rest/service/repository/categorys/root?info=kermit\";\n\n    // var info = \"kermit\";\n    // urlService = \"http://\" + workflowAddress + \"/activiti-rest/service/repository/categorys/root?info=\" + info;\n\n    // 获取根节点下的文件夹节点信息\n    hwDas.ajax({\n        url: urlService,\n        type: 'get',\n        params: {},\n        success: function(result) {\n\n            // 列表数据加载完成后，查询项目服务分类关系表（PROJECT_SERVICECATEGORY）\n            // 获取选中的工作流，并设置节点选中\n            hwDas.get(\n                \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, {\n                    \"projectid\": objInfoId,\n                    \"type\": 0\n                },\n                function(resultChecked) {\n                    // 根据获取的数据赋值基本信息Tab页\n                    if(null === resultChecked && undefined === resultChecked) {\n                        return;\n                    }\n\n                    if(null != resultChecked.data && undefined != resultChecked.data) {\n                        if(resultChecked.data.length > 0) {\n                            // 获取数据后解析形成树形节点；\n                            var arrDataTmp = [];\n                            for(var i = 0; i < result.data.length; i++) {\n\n                                var ifChecked = false;\n                                if(null != resultChecked.data[0].datas && undefined != resultChecked.data[0].datas) {\n                                    // SERVICE_CATEGORY_ID\n                                    for(var j = 0; j < resultChecked.data[0].datas.length; j++) {\n                                        if(result.data[i].id == resultChecked.data[0].datas[j].service_category_id) {\n                                            ifChecked = true;\n                                        }\n                                    }\n                                }\n                                var objTmp = {\n                                    label: result.data[i].name,\n                                    value: result.data[i].id,\n                                    checked: ifChecked\n                                };\n                                arrDataTmp.push(objTmp);\n                            }\n                            storeWorkflow.loadData(arrDataTmp);\n                        }\n                    }\n                    // Tips.tips(\"查询成功！\", \"success\");\n                },\n                function(msg) {\n                    // 获取数据后解析形成树形节点；\n                    var arrDataTmp = [];\n                    for(var i = 0; i < result.data.length; i++) {\n                        var objTmp = {\n                            label: result.data[i].name,\n                            value: result.data[i].id,\n                            checked: false\n                        };\n                        arrDataTmp.push(objTmp);\n                    }\n                    storeWorkflow.loadData(arrDataTmp);\n                    // Tips.tips(\"查询失败！\", \"error\");\n                });\n\n            panelTabWorkflow.ifDataLoaded = true;\n            // workflowChkgroup.panel.doLayout();\n\n        },\n        error: function(msg) {\n            // Tips.tips(\"查询失败！\", \"error\");\n            // myMask.hide();\n            // Ext.Msg.alert(\"提示\", \"获取模块信息失败\", function() {})\n        }\n    });\n}\n\nfunction queryDataService() {\n    // objInfoId = \"20e05c41-96ab-46f7-aaa6-d9a177ee9323\";\n\n    if(objInfoId === null || objInfoId === undefined || objInfoId === '') {\n        return;\n    }\n    if(panelTabDataService.ifDataLoaded) {\n        return;\n    }\n\n    // dataServiceAddress = \"www.hanweikeji.com:8050\";\n    // if(\"\" != workspaceId) {\n    //     hwDas.get(\n    //         \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {\n    //             \"workspaceid\": workspaceId,\n    //             \"servicetype\": 4\n    //         },\n    //         function(result) {\n    //             // 根据获取的数据赋值基本信息Tab页\n    //             if(null != result && undefined != result) {\n    //                 if(null != result.data && undefined != result.data) {\n    //                     if(result.data.length > 0) {\n    //                         if(null != result.data[0].datas && undefined != result.data[0].datas) {\n    //                             if(result.data[0].datas.length > 0) {\n    //                                 dataServiceAddress = result.data[0].datas[0].address;\n    //                             }\n    //                         }\n    //                     }\n    //                 }\n    //             }\n    //         },\n    //         function(msg) {\n    //             // Ext.Msg.alert(\"提示\", \"查询工区信息失败！\");\n    //         });\n    // }\n    // dataServiceAddress = \"www.hanweikeji.com:8050\";\n\n    // (vmd.workspace.workflowIp || vmdSettings.workflowIp)\n    // var urlService = \"http://\" + (parent.vmd.workspace.dataServiceIp || vmdSettings.dataServiceIp) + \"/DataService/Service/Project\";\n\n    var urlparam = {\n        host: parent.vmd.workspace.dataServiceIp || vmdSettings.dataServiceIp,\n        url: \"DataService/Service/Project\"\n\n    }\n    hwDas.get(urlparam, {}, {\n            develop: \"true\"\n        }, function(result) {\n\n            // 列表数据加载完成后，查询项目服务分类关系表（PROJECT_SERVICECATEGORY）\n            // 获取选中的数据服务，并设置节点选中\n            hwDas.get(\n                \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, {\n                    \"projectid\": objInfoId,\n                    \"type\": 1\n                },\n                function(resultChecked) {\n                    // 根据获取的数据赋值基本信息Tab页\n                    if(null === resultChecked && undefined === resultChecked) {\n                        return;\n                    }\n\n                    if(null != resultChecked.data && undefined != resultChecked.data) {\n                        if(resultChecked.data.length > 0) {\n                            // 获取数据后解析形成树形节点；\n                            var arrDataTmp = [];\n                            for(var j = 0; j < result.data.length; j++) {\n                                for(var i = 0; i < result.data[j].datas.length; i++) {\n                                    var ifChecked = false;\n                                    if(null != resultChecked.data[0].datas && undefined != resultChecked.data[0].datas) {\n                                        // SERVICE_CATEGORY_ID\n                                        for(var k = 0; k < resultChecked.data[0].datas.length; k++) {\n                                            if(result.data[j].datas[i].id == resultChecked.data[0].datas[k].service_category_id) {\n                                                ifChecked = true;\n                                            }\n                                        }\n                                    }\n                                    var objTmp = {\n                                        label: result.data[j].datas[i].name,\n                                        value: result.data[j].datas[i].id,\n                                        checked: ifChecked\n                                    };\n                                    arrDataTmp.push(objTmp);\n                                }\n                            }\n                            storeDataService.loadData(arrDataTmp);\n                        }\n                    }\n                    panelTabDataService.ifDataLoaded = true;\n                    // Tips.tips(\"查询成功！\", \"success\");\n                },\n                function(msg) {\n                    // 获取数据后解析形成树形节点；\n                    var arrDataTmp = [];\n                    for(var i = 0; i < result.data.length; i++) {\n                        var objTmp = {\n                            label: result.data[i].name,\n                            value: result.data[i].id,\n                            checked: false\n                        };\n                        arrDataTmp.push(objTmp);\n                    }\n                    storeDataService.loadData(arrDataTmp);\n                    // Tips.tips(\"查询失败！\", \"error\");\n                });\n\n            // workflowChkgroup.panel.doLayout();\n        },\n        function(msg) {\n            // Tips.tips(\"查询失败！\", \"error\");\n            // Ext.Msg.alert(\"提示\", \"数据服务信息获取失败！\", function() {})\n        })\n\n\n\n\n    // hwDas.ajax({\n    //     das: {\n    //         idedas: true\n    //     },\n    //     //url: urlService,\n    //      url: \"DataService/Service/Project\",\n    //     type: 'get',\n    //     timeout: 1000,\n    //     params:\n    //     success: function(result) {\n\n    //         // 列表数据加载完成后，查询项目服务分类关系表（PROJECT_SERVICECATEGORY）\n    //         // 获取选中的数据服务，并设置节点选中\n    //         hwDas.get(\n    //             \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, {\n    //                 \"projectid\": objInfoId,\n    //                 \"type\": 1\n    //             },\n    //             function(resultChecked) {\n    //                 // 根据获取的数据赋值基本信息Tab页\n    //                 if(null === resultChecked && undefined === resultChecked) {\n    //                     return;\n    //                 }\n\n    //                 if(null != resultChecked.data && undefined != resultChecked.data) {\n    //                     if(resultChecked.data.length > 0) {\n    //                         // 获取数据后解析形成树形节点；\n    //                         var arrDataTmp = [];\n    //                         for(var j = 0; j < result.data.length; j++) {\n    //                             for(var i = 0; i < result.data[j].datas.length; i++) {\n    //                                 var ifChecked = false;\n    //                                 if(null != resultChecked.data[0].datas && undefined != resultChecked.data[0].datas) {\n    //                                     // SERVICE_CATEGORY_ID\n    //                                     for(var k = 0; k < resultChecked.data[0].datas.length; k++) {\n    //                                         if(result.data[j].datas[i].id == resultChecked.data[0].datas[k].service_category_id) {\n    //                                             ifChecked = true;\n    //                                         }\n    //                                     }\n    //                                 }\n    //                                 var objTmp = {\n    //                                     label: result.data[j].datas[i].name,\n    //                                     value: result.data[j].datas[i].id,\n    //                                     checked: ifChecked\n    //                                 };\n    //                                 arrDataTmp.push(objTmp);\n    //                             }\n    //                         }\n    //                         storeDataService.loadData(arrDataTmp);\n    //                     }\n    //                 }\n    //                 panelTabDataService.ifDataLoaded = true;\n    //                 // Tips.tips(\"查询成功！\", \"success\");\n    //             },\n    //             function(msg) {\n    //                 // 获取数据后解析形成树形节点；\n    //                 var arrDataTmp = [];\n    //                 for(var i = 0; i < result.data.length; i++) {\n    //                     var objTmp = {\n    //                         label: result.data[i].name,\n    //                         value: result.data[i].id,\n    //                         checked: false\n    //                     };\n    //                     arrDataTmp.push(objTmp);\n    //                 }\n    //                 storeDataService.loadData(arrDataTmp);\n    //                 // Tips.tips(\"查询失败！\", \"error\");\n    //             });\n\n    //         // workflowChkgroup.panel.doLayout();\n    //     },\n    //     error: function(msg) {\n    //         // Tips.tips(\"查询失败！\", \"error\");\n    //         // Ext.Msg.alert(\"提示\", \"数据服务信息获取失败！\", function() {})\n    //     }\n    // });\n}\n\nfunction saveData(callback) {\n    var flag = 0; // 0: insert, 1:update;\n    if(objInfoId !== null && objInfoId !== undefined && objInfoId !== '') {\n        flag = 1;\n    }\n\n    if(0 === flag) {\n        objInfoId = vmd.util.guid();\n    }\n\n    var tabId = TabsProjectInfo.activeTab.id;\n    var tabIndexInfo = tabId.indexOf(\"panelTabInfo\"); // 基于0开始,找不到返回-1\n    var tabIndexWorkFlow = tabId.indexOf(\"panelTabWorkflow\"); // 基于0开始,找不到返回-1\n    var tabIndexDataService = tabId.indexOf(\"panelTabDataService\"); // 基于0开始,找不到返回-1\n    var tabIndexResource = tabId.indexOf(\"panelTabResource\"); // 基于0开始,找不到返回-1\n    var tabIndexRegInfo = tabId.indexOf(\"panelRegInfo\"); // 基于0开始,找不到返回-1\n    // 基本信息\n    if(panelTabInfo.ifDataLoaded) {\n        saveDataInfo(objInfoId, flag, callback);\n    }\n    if(panelTabWorkflow.ifDataLoaded) {\n        saveWorkFlow(objInfoId, flag, callback);\n    }\n    if(panelTabDataService.ifDataLoaded) {\n        saveDataService(objInfoId, flag, callback);\n    }\n    //20180711 成兵  增加对项目注册信息的保存\n    if(panelRegInfo.ifDataLoaded)\n    {\n        saveRegInfo(objInfoId, flag, callback)\n    }\n    // if(tabIndexInfo > -1) {\n    //     saveDataInfo(objInfoId, flag, callback);\n    // } else if(tabIndexWorkFlow > -1) {\n    //     saveWorkFlow(objInfoId, flag, callback);\n    // } else if(tabIndexDataService > -1) {\n    //     saveDataService(objInfoId, flag, callback);\n    // }\n}\n\n// flag 0:insert, 1:update\nfunction saveDataInfo(id, flag, callback) {\n\n    var myDate = new Date();\n    // myDate.toLocaleString(); //获取日期与时间\n\n    var nameTmp = hwTextProjectName.getValue();\n    var aliasTmp = hwTextProjectAlias.getValue();\n\n    if(aliasTmp === null || aliasTmp === undefined || aliasTmp === '') {\n        aliasTmp = nameTmp;\n    }\n    hwDas.edit(\n        \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {}, [{\n            'projectid': id,\n            'name': nameTmp,\n            'aliasname': aliasTmp,\n            'changedby': login,\n            'changeddate': myDate.toLocaleString(),\n            'description': hwTextAreaProjectDescription.getValue()\n        }],\n        function(result) {\n            if(callback) {\n                callback(0);\n            }\n\n            Tips.tips(\"保存成功\", \"success\");\n            // Ext.Msg.alert(\"提示\", \"保存项目信息成功！\")\n        },\n        function(msg) {\n            Tips.tips(\"保存失败\", \"error\");\n            // Ext.Msg.alert(\"提示\", \"保存项目信息失败！\")\n        }\n    );\n}\n\nfunction saveWorkFlow(id, flag, callback) {\n    // 先删除原来关联的工作流服务分类\n    hwDas.del(\n        \"DataServiceWorkSpace/projectInfo/DelProjectServiceCategory\", {}, {\n            'projectid': id,\n            'type': 0\n        },\n        function(result) {\n            // 保存新选择的关联的工作流服务分类\n            var arrData = [];\n            if(workflowChkgroup.items) {\n                for(var k = 0; k < workflowChkgroup.items.items.length; k++) {\n                    if(workflowChkgroup.items.items[k].checked) {\n                        var objWorkflow = {\n                            'projectid': id,\n                            'servicecategoryid': workflowChkgroup.items.items[k].inputValue,\n                            'type': 0\n                        };\n                        arrData.push(objWorkflow);\n                    }\n                }\n            }\n\n            hwDas.add(\n                \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, {}, arrData,\n                function(result) {\n                    if(callback) {\n                        callback(1);\n                    }\n                    Tips.tips(\"保存成功！\", \"success\");\n                },\n                function(msg) {\n                    Tips.tips(\"保存失败！\", \"error\");\n                }\n            );\n            // Tips.tips(\"删除成功！\", \"success\");\n        },\n        function(msg) {\n            // Tips.tips(\"删除失败！\", \"error\");\n        }\n    );\n\n}\n\nfunction saveDataService(id, flag, callback) {\n\n    // 先删除原来关联的数据服务分类\n    hwDas.del(\n        \"DataServiceWorkSpace/projectInfo/DelProjectServiceCategory\", {}, {\n            'projectid': id,\n            'type': 1\n        },\n        function(result) {\n\n            // 保存新选择的关联的数据服务分类\n            var arrData = [];\n            for(var k = 0; k < chkGrpDataService.items.items.length; k++) {\n                if(chkGrpDataService.items.items[k].checked) {\n                    var objWorkflow = {\n                        'projectid': id,\n                        'servicecategoryid': chkGrpDataService.items.items[k].inputValue,\n                        'type': 1\n                    };\n                    arrData.push(objWorkflow);\n                }\n            }\n\n            hwDas.add(\n                \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, {}, arrData,\n                function(result) {\n                    if(callback) {\n                        callback(2);\n                    }\n                    Tips.tips(\"保存成功！\", \"success\");\n                },\n                function(msg) {\n                    Tips.tips(\"保存失败！\", \"error\");\n                }\n            );\n            // Tips.tips(\"删除成功！\", \"success\");\n        },\n        function(msg) {\n            // Tips.tips(\"删除失败！\", \"error\");\n        }\n    );\n}\n\n//20180711 成兵  增加对项目注册信息的保存\nfunction saveRegInfo(id, flag, callback) \n{\n    RegRelease.saveRegInfo(id,callback)\n    \n}\n// function saveResource(objInfoId, flag) {\n//     Tips.tips(\"保存成功！\", \"success\");\n// }\n\nfunction TabWorkSpaceResource_afterrender(sender) {\n    TabWorkSpaceResource.iSetApplyType(1);\n}\n\nfunction workflowChkgroup_afterrender(sender) {\n\n}\n\nfunction workflowChkgroup_beforerender(sender) {\n    sender.store = storeWorkflow;\n}\n\nfunction chkGrpDataService_beforerender(sender) {\n    sender.store = storeDataService;\n}\n\n\n// 设置数据是否已加载\nfunction setIfDataLoaded(bVar) {\n\n    panelTabInfo.ifDataLoaded = bVar;\n    panelTabWorkflow.ifDataLoaded = bVar;\n    panelTabDataService.ifDataLoaded = bVar;\n    TabWorkSpaceResource.iSetIfDataLoaded(bVar);\n}\n\n// function workflowChkgroup_afterrender(sender) {\n\n//     workflowAddress = \"www.hanweikeji.com:8004\";\n//     // var urlService = \"http://\" + vmdSettings.workflowIp + \"/activiti-rest/service/repository/categorys/root?info=kermit\";\n//     var urlService = \"http://\" + workflowAddress + \"/activiti-rest/service/repository/categorys/root?info=kermit\";\n//     var einfo = Ext.util.Cookies.get('hwEcyLogin');\n//     if(einfo && einfo != undefined && einfo != \"undefined\") {\n//         urlService = \"http://\" + workflowAddress + \"/activiti-rest/service/repository/categorys/root?einfo=\" + einfo;\n//     } else {\n//         var info = Ext.util.Cookies.get('login');\n//         if(!info || info == undefined || info == \"undefined\") {\n//             info = \"kermit\";\n//         }\n//         urlService = \"http://\" + workflowAddress + \"/activiti-rest/service/repository/categorys/root?info=\" + info;\n//     }\n\n//     // 获取根节点下的文件夹节点信息\n//     hwDas.ajax({\n//         url: urlService,\n//         type: 'get',\n//         timeout: 1000,\n//         params: {},\n//         success: function(result) {\n//             // 获取数据后解析形成树形节点；\n//             var arrDataTmp = [];\n\n//             for(var i = 0; i < result.data.length; i++) {\n\n//                 // var checkbox = new Ext.form.Checkbox({\n//                 //     boxLabel: result.data[i].name,\n//                 //     name: result.data[i].id,\n//                 //     checked: false\n//                 // });\n//                 // hwCheckboxGroupProjectWorkflow.items.add(checkbox);\n\n//                 var _item=result.data[i];\n\n//                 var objTmp = {\n//                     label: result.data[i].name,\n//                     value: result.data[i].id,\n//                     checked: false\n//                 };\n//                 arrDataTmp.push(objTmp);\n//             }\n//             propStore.loadData(arrDataTmp);\n//             // sender.panel.add(arrDataTmp);\n//             // sender.panel.doLayout()\n//             // hwCheckboxGroupProjectWorkflow.items = arrDataTmp;\n//             // hwCheckboxGroupProjectWorkflow.doLayout();\n//             // hwCheckboxGroupProjectWorkflow.render();\n//             // hwCheckboxGroupProjectWorkflow.updateBox();\n\n//             // 列表数据加载完成后，查询项目服务分类关系表（PROJECT_SERVICECATEGORY）\n//             // 获取选中的工作流，并设置节点选中\n//             // hwDas.get(\n//             //     \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, {\n//             //         \"projectid\": objInfoId,\n//             //         \"type\": 0\n//             //     },\n//             //     function(result) {\n//             //         // 根据获取的数据赋值基本信息Tab页\n//             //         if(null === result && undefined === result) {\n//             //             return;\n//             //         }\n\n//             //         if(null != result.data && undefined != result.data) {\n//             //             if(result.data.length > 0) {\n//             //                 if(null != result.data[0].datas && undefined != result.data[0].datas) {\n//             //                     // SERVICE_CATEGORY_ID\n//             //                     for(var j = 0; j < result.data[0].datas.length; j++) {\n//             //                         for(var k = 0; k < hwCheckboxGroupProjectWorkflow.items.length; k++) {\n//             //                             if(hwCheckboxGroupProjectWorkflow.items[k].name ==\n//             //                                 result.data[0].datas[i].service_category_id) {\n//             //                                 hwCheckboxGroupProjectWorkflow.items[k].checked = true;\n//             //                             }\n//             //                         }\n//             //                     }\n//             //                 }\n//             //             }\n//             //         }\n//             //         // Tips.tips(\"查询成功！\", \"success\");\n//             //     },\n//             //     function(msg) {\n//             //         Tips.tips(\"查询失败！\", \"error\");\n//             //     });\n//         },\n//         error: function(msg) {\n//             Tips.tips(\"查询失败！\", \"error\");\n//             // myMask.hide();\n//             // Ext.Msg.alert(\"提示\", \"获取模块信息失败\", function() {})\n//         }\n//     });\n// }\n\nfunction TabProjectInfoNew0714_beforerender(sender) {\n    panelTabInfo.ifDataLoaded = false;\n    panelTabWorkflow.ifDataLoaded = false;\n    panelTabDataService.ifDataLoaded = false;\n    panelRegInfo.ifDataLoaded = false;\n}\n\nfunction TabProjectInfoNew0714_afterrender(sender) {\n    TabWorkSpaceResource.iSetApplyType(1);\n    TabWorkSpaceResource.iSetId(objInfoId);\n}\n\nfunction panelTabInfo_beforerender(sender) {\n\n}\n\nfunction TabWorkSpaceResource_beforerender(sender) {\n\n}\n\nfunction hwTextModifiedBy_beforerender(sender) {\n\n}\n\nfunction delService_click(sender, e) {\n    Ext.Msg.confirm(\"提示!\", \"确定要删除数据服务?删除后不可恢复！！！\", function(btn) {\n        if(btn == \"yes\") {\n            var arrData = [];\n            for(var k = 0; k < chkGrpDataService.items.items.length; k++) {\n                if(chkGrpDataService.items.items[k].checked) {\n                    var objWorkflow = {\n                        'projectid': objInfoId,\n                        'servicecategoryid': chkGrpDataService.items.items[k].inputValue,\n                        'type': 1\n                    };\n                    var objID = {\n                        'id': chkGrpDataService.items.items[k].inputValue\n                    }\n                    arrData.push(objWorkflow);\n                }\n            }\n            var urlparam = {\n                host: vmd.workspace.dataServiceIp || vmdSettings.dataServiceIp,\n                url: \"DataService/Service/Project\"\n            }\n            arrData.forEach(function(item, index) {\n                if(item.servicecategoryid == \"104FPWq2wr\" || item.servicecategoryid == \"eQX5RdNjsW\" || item.servicecategoryid == \"TuKge8jDwF\" || item.servicecategoryid == \"Tv3hLjddZS\") {\n                    Ext.Msg.alert(\"提示\", \"程序数据服务不可删除，请重新选择需要删除的数据服务！\");\n                    return\n                }\n                hwDas.del(\n                    urlparam, {}, {\n                        'id': item.servicecategoryid\n                    },\n                    function(result) {\n                        // 删除数据服务与项目的关联关系\n                        hwDas.del(\n                            \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, item,\n                            function(result) {\n                                if(index == arrData.length - 1) {\n                                    panelTabDataService.ifDataLoaded = false;\n                                    Tips.tips(\"删除成功！\", \"success\");\n                                    queryDataService();\n                                }\n                            },\n                            function(msg) {\n                                Tips.tips(\"删除关联关系失败！\", \"error\");\n                            }\n                        );\n                        // Tips.tips(\"删除成功！\", \"success\");\n                    },\n                    function(msg) {\n                        Tips.tips(\"删除服务失败！\", \"error\");\n                    }\n                );\n            })\n        }\n    })\n}\n\nfunction addService_click(sender, e) {\n    var addServe = function(code, name, remark) {\n        var serviceCode = code;\n        var serviceName = name;\n        var serviceRemark = remark;\n\n        var urlparam = {\n            host: vmd.workspace.dataServiceIp || vmdSettings.dataServiceIp,\n            url: \"DataService/Service/Project\"\n        }\n        hwDas.add(\n            urlparam, {}, {}, {\n                code: serviceCode,\n                name: serviceName,\n                remark: serviceRemark\n            },\n            function(result) { // 保存成功\n                // Tips.tips(\"保存成功！\", \"success\");\n                if(result == \"\") {\n                    return;\n                }\n                if(!result.data) {\n                    return;\n                }\n\n                if(result.data.length > 0) {\n                    var serviceName = result.data[0].datas.name;\n                    var serviceId = result.data[0].datas.id;\n                    panelTabDataService.ifDataLoaded = false;\n                    // 新建数据服务分类后，同步关联与项目的关系\n\n                    var objData = {\n                        'projectid': objInfoId,\n                        'servicecategoryid': serviceId,\n                        'type': 1\n                    };\n                    hwDas.add(\n                        \"DataServiceWorkSpace/projectInfo/ProjcetServiceCategory\", {}, {}, objData,\n                        function(result) {\n                            queryDataService();\n                        },\n                        function(msg) {\n                            // Tips.tips(\"保存失败！\", \"error\");\n                        }\n                    );\n                }\n            },\n            function(msg) {\n                Ext.Msg.alert(\"提示\", \"添加服务失败！\");\n            }\n        );\n\n    }\n    var winForm = new Ext.winDataService(addServe, \"\", \"\", \"\");\n    winForm.show();\n}\n//数据服务录入框\nExt.winDataService = Ext.extend(Ext.Window, {\n    xtype: \"window\",\n    title: \"数据服务\",\n    width: 300,\n    height: 214,\n    layout: \"form\",\n    bodyStyle: 'padding:15px',\n    labelAlign: \"left\",\n    labelWidth: 40,\n    modal: true,\n    constructor: function(callback, code, name, remark) {\n        this.callback = callback;\n        this.valueCode = code;\n        this.valueName = name;\n        this.valueRemark = remark;\n        this.callParent();\n    },\n    initComponent: function() {\n        var me = this;\n        this.fbar = [{\n            text: \"确定\",\n            handler: function() {\n                me.callback(Ext.getCmp('code').getValue(), Ext.getCmp('name').getValue(), Ext.getCmp('remark').getValue());\n                me.close();\n            }\n        }, {\n            text: \"取消\",\n            handler: function() {\n                me.close();\n            }\n        }];\n\n        this.items = [{\n            id: 'code',\n            xtype: \"textfield\",\n            fieldLabel: \"编码\",\n            anchor: \"100%\",\n            value: this.valueCode\n        }, {\n            id: 'name',\n            xtype: \"textfield\",\n            fieldLabel: \"名称\",\n            anchor: \"100%\",\n            value: this.valueName\n        }, {\n            id: 'remark',\n            xtype: \"textfield\",\n            fieldLabel: \"说明\",\n            anchor: \"100%\",\n            value: this.valueRemark\n        }]\n        Ext.winDataService.superclass.initComponent.call(this);\n    }\n})\n\nfunction button_click(sender,e){\n\n    var formAddWsMembers = new parent.vmd.window({\n        title: \"添加项目成员\",\n        url: parent.vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwdHH9CSl6/hwVaxlP27u.html\",\n        // url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hw4361c4dd.html\",\n        auto: false,\n        height: 510,\n        width: 902,\n        maximizable: false,\n        enableLoading: true,\n        resizable: true\n        // params: {\n        //     workspaceid: btnWorkSpaceName.workspaceId,\n        //     workflowaddr: vmd.workspace.workflowIp,\n        //     dataserviceaddr: vmd.workspace.dataServiceIp,\n        //     r: new Date().getTime()\n        // }\n    })\n\n    formAddWsMembers.show();\n}\n\nfunction button2_click(sender,e){\n    var formAddWsMembers = new parent.vmd.window({\n        title: \"成员角色\",\n        url: parent.vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwdHH9CSl6/hwDmMhbCOK.html\",\n        // url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hw4361c4dd.html\",\n        auto: false,\n        height: 366,\n        width: 250,\n        maximizable: false,\n        enableLoading: true,\n        resizable: true\n        // params: {\n        //     workspaceid: btnWorkSpaceName.workspaceId,\n        //     workflowaddr: vmd.workspace.workflowIp,\n        //     dataserviceaddr: vmd.workspace.dataServiceIp,\n        //     r: new Date().getTime()\n        // }\n    })\n\n    formAddWsMembers.show();\n}\n\nfunction button3_click(sender,e){\n    var formRoleAuthority = new parent.vmd.window({\n        title: \"角色管理\",\n        url: parent.vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwdHH9CSl6/hwvasfOQqK.html\",\n        // url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hw4361c4dd.html\",\n        auto: false,\n        height: 404,\n        width: 624,\n        maximizable: false,\n        enableLoading: true,\n        resizable: true\n        // params: {\n        //     workspaceid: btnWorkSpaceName.workspaceId,\n        //     workflowaddr: vmd.workspace.workflowIp,\n        //     dataserviceaddr: vmd.workspace.dataServiceIp,\n        //     r: new Date().getTime()\n        // }\n    })\n\n    formRoleAuthority.show();\n}","vmdcss":"","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"iSaveData\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSaveData\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"保存数据接口，保存基本信息、工作流、数据服务的Tab页的信息。\",\"uxcid\":\"\",\"params\":\"callback\",\"code\":\"//直接填写方法内容\\nsaveData(callback);\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetId\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetId\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置工区、项目的ID\",\"uxcid\":\"\",\"params\":\"id\",\"code\":\"//直接填写方法内容\\nobjInfoId = id;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iGetName\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iGetName\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"获取名称\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nreturn hwTextProjectName.getValue();\",\"returnType\":\"字符串\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetIfDataLoaded\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetIfDataLoaded\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置是否已加载\",\"uxcid\":\"\",\"params\":\"bVar\",\"code\":\"//直接填写方法内容\\nsetIfDataLoaded(bVar);\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetWorkSpaceId\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetWorkSpaceId\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置工区id\",\"uxcid\":\"\",\"params\":\"id\",\"code\":\"//直接填写方法内容\\nworkspaceId = id;\",\"returnType\":\"无\",\"hwCheckbox\":\"无\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}"}