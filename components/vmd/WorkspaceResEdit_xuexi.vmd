{"vmdversion":"2.0.3.0701","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"WorkspaceResEdit_xuexi\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"auto\",\"header\":false,\"width\":692,\"height\":522,\"afterrender\":\"WorkspaceResEdit_xuexi_afterrender\"},\"cn\":[{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"width\":\"\",\"height\":30,\"hidden\":false,\"border\":true},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"btnAddServer\",\"layoutConfig\":{},\"userConfig\":{\"icon\":\"icon-tasks\",\"text\":\"\",\"width\":28,\"height\":22,\"style\":\"padding: 5px 5px 5px 5px;    border: none;    background: none;\",\"id\":\"btnAddServer\",\"click\":\"btnAddServer_click\",\"size\":\"large\"}},{\"cid\":\"vmdButton\",\"id\":\"btnAddCategory\",\"layoutConfig\":{},\"userConfig\":{\"icon\":\"icon-file-text-alt\",\"text\":\"\",\"width\":26,\"height\":22,\"style\":\"padding: 5px 5px 5px 5px;    border: none;    background: none;\",\"id\":\"btnAddCategory\",\"click\":\"btnAddCategory_click\",\"size\":\"large\"}},{\"cid\":\"vmdButton\",\"id\":\"btnEdit\",\"layoutConfig\":{},\"userConfig\":{\"icon\":\"icon-pencil\",\"text\":\"\",\"width\":26,\"height\":22,\"style\":\"padding: 5px 5px 5px 5px;    border: none;    background: none;\",\"id\":\"btnEdit\",\"click\":\"btnEdit_click\",\"size\":\"large\"}},{\"cid\":\"vmdButton\",\"id\":\"btnDelete\",\"layoutConfig\":{},\"userConfig\":{\"icon\":\"icon-trash\",\"text\":\"\",\"width\":26,\"height\":22,\"style\":\"padding: 5px 5px 5px 5px;    border: none;    background: none;\",\"id\":\"btnDelete\",\"click\":\"btnDelete_click\",\"size\":\"large\"}}]},{\"cid\":\"container\",\"id\":\"div1\",\"layoutConfig\":{},\"userConfig\":{\"width\":\"\",\"layout\":\"fit\",\"height\":478},\"cn\":[{\"cid\":\"vmdTreeEx\",\"id\":\"treeResource\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":-1,\"width\":569,\"height\":322,\"id\":\"treeResource\",\"afterrender\":\"treeResource_afterrender\",\"hideRoot\":true,\"loadType\":\"全部加载\",\"leafImg\":\"/img/public/folderClosed.gif\",\"nodeover\":\"treeResource_nodeover\",\"nodeout\":\"treeResource_nodeout\"}}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"// 资源类型：0：主题，1：图片，2：JS文件\nvar resourceType = 0;\nvar workspaceId = \"\"; // 工区ID\nvar objInfoId = \"\"; // 工区/项目ID\nvar pointerCtrlOwner = this;\nvar page = this;\nvar applyType = 0; // 应用类型：0：工区，1：项目\nvar ifDataLoaded = false;\n\nfunction btnAddServer_click(sender, e) {\n    btnAddServer();\n}\n\nfunction btnAddServer() {\n    // // pointerCtrlOwner.fireEvent('onClickBtnAddServer', sender, e);\n    // var nodeRoot = treeResource.getRootNode();\n    // if(null == nodeRoot) {\n    //     return;\n    // }\n\n    // var addResourceServer = function(name, addr, remark) {\n\n    //     var nodeRoot = treeResource.getRootNode();\n    //     if(null === nodeRoot || undefined === nodeRoot) {\n    //         return;\n    //     }\n\n    //     if(ifServiceExisted(nodeRoot, name, addr)) {\n    //         return;\n    //     }\n\n    //     var mytree = treeResource;\n    //     var nodeId = vmd.util.guid();\n\n    //     var cnode = new Ext.tree.TreeNode({\n    //         id: nodeId,\n    //         text: name,\n    //         cls: \"vmd-tree-node\"\n    //     });\n\n    //     cnode.id = nodeId;\n    //     cnode.text = name;\n    //     cnode.type = 1; // 节点类型：0：根节点，1：服务器节点，2：分类节点\n    //     cnode.address = addr;\n    //     cnode.remark = remark;\n    //     // 拖上图片，增加图标\n    //     // cnode.setIcon(null);\n    //     cnode.setIcon(\"/img/public/folderClosed.gif\");\n    //     var nodeRoot = mytree.getRootNode();\n    //     if(null == nodeRoot) {\n    //         return;\n    //     }\n    //     nodeRoot.appendChild(cnode);\n\n    //     // 调用数据服务将数据保存到数据库\n    //     if(0 == applyType) {\n    //         hwDas.add(\n    //             \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {}, [{\n    //                 'workspaceid': workspaceId,\n    //                 'serviceaddressid': nodeId,\n    //                 'serviceaddressname': name,\n    //                 'serviceaddress': addr,\n    //                 'serviceaddresstype': resourceType,\n    //                 'serviceaddressremark': remark\n    //             }],\n    //             function(result) {\n    //                 Tips.tips(\"保存成功！\", \"success\");\n    //                 // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n    //             },\n    //             function(msg) {\n    //                 Tips.tips(\"保存失败！\", \"error\");\n    //                 // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\")\n    //             }\n    //         );\n    //     } else {\n\n    //         hwDas.save(\n    //             \"DataServiceWorkSpace/projectInfo/ProjectServiceAddress\", {}, {}, [{\n    //                 'projectid': objInfoId,\n    //                 'id': nodeId,\n    //                 'name': name,\n    //                 'address': addr,\n    //                 'type': resourceType,\n    //                 'remark': remark\n    //             }],\n    //             function(result) {\n    //                 Tips.tips(\"保存成功！\", \"success\");\n    //                 // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n    //             },\n    //             function(msg) {\n    //                 Tips.tips(\"保存失败！\", \"error\");\n    //                 // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\")\n    //             }\n    //         );\n    //     }\n\n    //     // 不是主题就不需要获取服务器下包含的子节点数据\n    //     if(0 != resourceType) {\n    //         return;\n    //     }\n\n\n    //     // 添加资源中心的服务地址后，需要同步从服务地址\n    //     // 通过数据服务获取该资源中心有哪些主题添加到服务地址节点下\n    //     // 此处的主题的展现方式尚需讨论\n    //     // 获取来的节点数据格式是什么样的？数据集？怎样提取数据？\n    //     // var treeNode = me.store.data.items[index].data; // ???\n    //     // 调用服务保存新添加的服务器信息\n    //     // 主题获取的分类节点需要带复选框\n    // }\n\n    // var winForm = new Ext.winAddResourceServer(addResourceServer, \"\", \"\", \"\");\n    // winForm.show();\n}\n\nfunction addResourceServer(id, name, addr, remark, resType) {\n    resourceType = resType;\n    // var nodeRoot = treeResource.getRootNode();\n    // if(null === nodeRoot || undefined === nodeRoot) {\n    //     return;\n    // }\n\n    var mytree = treeResource;\n    var nodeRoot = mytree.getRootNode();\n    if(null == nodeRoot || undefined == nodeRoot) {\n        nodeRoot = addTreeResourceRootNode();\n    }\n    if(ifServiceExisted(nodeRoot, name, addr)) {\n        return;\n    }\n\n    var cnode = new Ext.tree.TreeNode({\n        id: id,\n        text: name,\n        cls: \"vmd-tree-node\"\n    });\n\n    cnode.id = id;\n    cnode.text = name + \"(\" + addr + \")\";\n    cnode.name = name;\n    cnode.type = 1; // 节点类型：0：根节点，1：服务器节点，2：分类节点\n    cnode.address = addr;\n    cnode.remark = remark;\n    // 拖上图片，增加图标\n    // cnode.setIcon(null);\n    cnode.setIcon(\"/img/public/server6.png\");\n    nodeRoot.appendChild(cnode);\n    addServeInServe(id, name, addr, remark, resType);\n    // 不是主题就不需要获取服务器下包含的子节点数据\n    if(0 != resType) {\n        return;\n    }\n\n\n    // 添加资源中心的服务地址后，需要同步从服务地址\n    // 通过数据服务获取该资源中心有哪些主题添加到服务地址节点下\n    // 此处的主题的展现方式尚需讨论\n    // 获取来的节点数据格式是什么样的？数据集？怎样提取数据？\n    // var treeNode = me.store.data.items[index].data; // ???\n    // 调用服务保存新添加的服务器信息\n    // 主题获取的分类节点需要带复选框\n}\n\n// 调用数据服务将数据保存到数据库\nfunction addServeInServe(id, name, addr, remark, resType) {\n    // var reg = /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?$/;\n    // if(!reg.test(addr)) {\n    //     Ext.Msg.alert(\"提示\", \"请输入正确的服务地址（带端口）！\")\n    //     return;\n    // }\n    if(0 == applyType) {\n        hwDas.add(\n            \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {}, [{\n                'workspaceid': workspaceId,\n                'serviceaddressid': id,\n                'serviceaddressname': name,\n                'serviceaddress': addr,\n                'serviceaddresstype': resType,\n                'serviceaddressremark': remark\n            }],\n            function(result) {\n                // Tips.tips(\"保存成功！\", \"success\");\n                // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n            },\n            function(msg) {\n                // Tips.tips(\"保存失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\")\n            }\n        );\n    } else {\n\n        hwDas.save(\n            \"DataServiceWorkSpace/projectInfo/ProjectServiceAddress\", {}, {}, [{\n                'projectid': objInfoId,\n                'id': id,\n                'name': name,\n                'address': addr,\n                'type': resType,\n                'remark': remark\n            }],\n            function(result) {\n                // Tips.tips(\"保存成功！\", \"success\");\n                // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n            },\n            function(msg) {\n                // Tips.tips(\"保存失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\")\n            }\n        );\n    }\n\n}\n\n\n// 判断服务地址是否已经存在\nfunction ifServiceExisted(nodeOp, name, addr) {\n    if(null == nodeOp || undefined == nodeOp) {\n        return false;\n    }\n    // console.log(nodeOp.childNodes)\n    for(var i = 0; i < nodeOp.childNodes.length; i++) {\n        if(nodeOp.childNodes[i].text == name) {\n            Tips.tips(name + \"已经存在！\", \"info\");\n            // Ext.Msg.alert(\"提示\", name + \"已经存在！\");\n            return true;\n        } else if(nodeOp.childNodes[i].address == addr) {\n            Tips.tips(addr + \"已经存在！\", \"info\");\n            // Ext.Msg.alert(\"提示\", addr + \"已经存在！\");\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction addCategory(id, path, serverid, serverip, servername) {\n    // var nodeSel = treeResource.getSelNode();\n    var nodeSel = nodeHoverSel;\n    if(null == nodeSel || 1 != nodeSel.type) // 未选中服务器节点\n    {\n        return;\n    }\n\n    if(ifCategoryExisted(nodeSel, id, path)) {\n        return;\n    }\n\n    var nodeId = vmd.util.guid();\n\n    var cnode = new Ext.tree.TreeNode({\n        id: nodeId,\n        text: name,\n        cls: \"vmd-tree-node\"\n    });\n\n    cnode.id = nodeId;\n    cnode.resourceCategoryId = id;\n    cnode.serviceaddressid = nodeSel.id;\n    cnode.text = path;\n    // cnode.text = name;\n    cnode.type = 2; // 分类节点\n\n    // 拖上图片，增加图标\n    cnode.setIcon(\"/img/public/folderClosed.gif\");\n    nodeSel.appendChild(cnode);\n\n    // cnode.parentNode.setIcon(null);\n    nodeSel.expand();\n\n    // 调用数据服务将数据保存到数据库\n    if(0 == applyType) {\n        hwDas.add(\n            \"DataServiceWorkSpace/WorkSpaceInfo/ResourceCategory\", {}, {}, [{\n                'workspaceid': workspaceId,\n                'serviceaddressid': nodeSel.id,\n                'resourcecategoryid': cnode.resourceCategoryId,\n                'resourceid': nodeId,\n                'path': path,\n                'type': resourceType,\n                resourceserverid: serverid,\n                resourceservername: servername,\n                resourceserverip: serverip\n            }],\n            function(result) {\n                Tips.tips(\"保存成功！\", \"success\");\n                // Ext.Msg.alert(\"提示\", \"添加资源目录成功！\");\n            },\n            function(msg) {\n                Tips.tips(\"保存失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"添加资源目录失败！\");\n            }\n        );\n    } else {\n        hwDas.save(\n            \"DataServiceWorkSpace/projectInfo/ProjectResource\", {}, {}, [{\n                'projectid': objInfoId,\n                'serviceaddressid': nodeSel.id,\n                'resourcecategoryid': cnode.resourceCategoryId,\n                'resourceid': nodeId,\n                'path': path,\n                'type': resourceType,\n                resourceserverid: serverid,\n                resourceservername: servername,\n                resourceserverip: serverip\n            }],\n            function(result) {\n                Tips.tips(\"保存成功！\", \"success\");\n                // Ext.Msg.alert(\"提示\", \"添加资源目录成功！\");\n            },\n            function(msg) {\n                Tips.tips(\"保存失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"添加资源目录失败！\");\n            }\n        );\n    }\n}\n// window.addCategory = addCategory;\n\n\nfunction editCategory(id, path, serverid, serverip, servername) {\n\n    var nodeSel = nodeHoverSel;\n    // var nodeSel = treeResource.getSelNode();\n    if(null == nodeSel || 2 != nodeSel.type) // 0:根节点，1：服务器节点，2：分类目录节点\n    {\n        return;\n    }\n\n    if(ifCategoryExisted(nodeSel, id, path)) {\n        return;\n    }\n\n    nodeSel.resourceCategoryId = id;\n    nodeSel.setText(path);\n    if(0 == applyType) {\n        hwDas.edit(\n            \"DataServiceWorkSpace/WorkSpaceInfo/ResourceCategory\", {}, {}, [{\n                'resourcecategoryid': nodeSel.resourceCategoryId,\n                'resourceid': nodeSel.id,\n                'path': path,\n                resourceserverid: serverid,\n                resourceservername: servername,\n                resourceserverip: serverip\n            }],\n            function(result) {\n                Tips.tips(\"保存成功！\", \"success\");\n                // Ext.Msg.alert(\"提示\", \"保存资源目录成功！\");\n            },\n            function(msg) {\n                Tips.tips(\"保存失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"保存资源目录失败！\");\n            }\n        );\n    } else {\n        hwDas.save(\n            \"DataServiceWorkSpace/projectInfo/ProjectResource\", {}, {}, [{\n                'projectid': objInfoId,\n                'serviceaddressid': nodeSel.serviceaddressid,\n                'resourcecategoryid': nodeSel.resourceCategoryId,\n                'resourceid': nodeSel.id,\n                'path': path,\n                'type': resourceType,\n                resourceserverid: serverid,\n                resourceservername: servername,\n                resourceserverip: serverip\n            }],\n            function(result) {\n                Tips.tips(\"保存成功！\", \"success\");\n                // Ext.Msg.alert(\"提示\", \"添加资源目录成功！\");\n            },\n            function(msg) {\n                Tips.tips(\"保存失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"添加资源目录失败！\");\n            }\n        );\n    }\n}\n\n// 判断资源目录是否已经存在\nfunction ifCategoryExisted(nodeOp, categoryId, path) {\n    if(null == nodeOp || undefined == nodeOp) {\n        return false;\n    }\n    for(var i = 0; i < nodeOp.childNodes.length; i++) {\n        if(nodeOp.childNodes[i].text == path ||\n            nodeOp.childNodes[i].resourceCategoryId == categoryId) {\n            // Tips.tips(\"资源已经存在！\", \"info\");\n            // Ext.Msg.alert(\"提示\", \"资源已经存在！\");\n            return true;\n        }\n    }\n\n    return false;\n}\n// var curSelNodeId;\nfunction btnAddCategory_click(sender, e) {\n    btnAddCategory();\n}\n\nfunction btnAddCategory() {\n    window.treeResource = treeResource;\n    treeResource.addCategory = addCategory;\n\n    resourceCategoryForm = new vmd.window({\n        title: \"资源目录选择\",\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwcde15445.html\",\n        auto: false,\n        height: 400,\n        width: 400,\n        params: {\n            type: 0, // 0：添加目录，1：编辑目录\n            categoryId: \"\",\n            r: new Date().getTime()\n        }\n    })\n\n    resourceCategoryForm.show();\n    //   window[\"openWinFrom2\"] = openWinFrom2;\n    window.resourceCategoryForm = resourceCategoryForm;\n    return resourceCategoryForm;\n\n    // 主题不需要添加分类数据\n    // if(0 == resourceType) {\n    //     return;\n    // }\n\n    // var openWinFrom2 = new Ext.Window({\n    //     title: \"资源目录选择\",\n    //     modal: true,\n    //     maximized: false,\n    //     height: 400,\n    //     width: 400,\n    //     maximizable: true,\n    //     resizable: true,\n    //     bodyStyle: \"background-color:#fff\",\n    //     closeAction: 'close'\n\n    // });\n    // Ext.defer(function() {\n    //     // openWinFrom.html = \"<iframe src='http://www.baidu.com' frameborder=0 scrolling=no style='height:100%;width:100%'></iframe>\";\n    //     openWinFrom2.html = \"<iframe src='\" + vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwcde15445.html?r=\" + new Date().getTime() + \"' frameborder=0 scrolling=no style='height:100%;width:100%'></iframe>\";\n    //     openWinFrom2.show();\n    // }, 50);\n\n\n\n    // openWinFrom2.on('hide',function(){\n    //   var info=  this.info;\n    //   addCategory(info.id, info.path)\n    //   // treeResource.getSelNode()\n    // })\n    // openWinFrom2.on('close',function(){\n    //     treeResource.getSelNode()\n\n    // })\n\n    // window.openWinFrom2 = openWinFrom2;\n}\n\nfunction btnEdit_click(sender, e) {\n    // pointerCtrlOwner.fireEvent('onClickBtnEdit', sender, e);\n\n    btnEdit();\n}\n\nfunction btnEdit() {\n    // pointerCtrlOwner.fireEvent('onClickBtnEdit', sender, e);\n\n    var nodeSel = nodeHoverSel;\n    // var nodeSel = treeResource.getSelNode();\n    if(null == nodeSel) {\n        return;\n    }\n\n    // 服务器节点\n    if(1 == nodeSel.type) {\n        editResourceService(nodeSel);\n    } else if(2 == nodeSel.type && 0 != resourceType) // 分类节点\n    {\n        editResourceCategory(nodeSel);\n    }\n}\n\nfunction editResourceService(nodeSel) {\n    // pointerCtrlOwner.fireEvent('onClickBtnAddServer', sender, e);\n\n    // var nodeSel = treeResource.getSelNode();\n    if(null == nodeSel || 1 != nodeSel.type) // 未选中服务器节点\n    {\n        return;\n    }\n\n    var editResourceServer = function(name, addr, remark) {\n        if(null == nodeSel) {\n            return;\n        }\n\n        if(ifServiceExisted(nodeSel, name, addr)) {\n            return;\n        }\n        console.log(nodeSel)\n        nodeSel.setText(name);\n        nodeSel.address = addr;\n        nodeSel.remark = remark;\n\n        // 调用数据服务将数据保存到数据库\n        if(0 == applyType) {\n            hwDas.edit(\n                \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {}, [{\n                    'serviceaddressid': nodeSel.id,\n                    'name': name,\n                    'serviceaddress': addr,\n                    'remark': remark\n                }],\n                function(result) {\n                    // Tips.tips(\"保存成功！\", \"success\");\n                    // Ext.Msg.alert(\"提示\", \"保存服务地址信息成功！\");\n                },\n                function(msg) {\n                    // Tips.tips(\"保存失败！\", \"error\");\n                    // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n                }\n            );\n        } else {\n            hwDas.save(\n                \"DataServiceWorkSpace/projectInfo/ProjectServiceAddress\", {}, {}, [{\n                    'projectid': objInfoId,\n                    'id': nodeSel.id,\n                    'name': name,\n                    'address': addr,\n                    'type': resourceType,\n                    'remark': remark\n                }],\n                function(result) {\n                    // Tips.tips(\"保存成功！\", \"success\");\n                    // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n                },\n                function(msg) {\n                    // Tips.tips(\"保存失败！\", \"error\");\n                    // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\")\n                }\n            );\n        }\n    }\n\n    var winForm = new Ext.winAddResourceServer(editResourceServer, nodeSel.text, nodeSel.address, nodeSel.remark);\n    winForm.show();\n}\n\nfunction editResourceCategory(nodeSel) {\n    // pointerCtrlOwner.fireEvent('onClickBtnEdit', sender, e);\n\n    // 主题不需要添加分类数据\n    if(0 == resourceType) {\n        return;\n    }\n\n    // var nodeSel = treeResource.getSelNode();\n    if(null == nodeSel || 2 != nodeSel.type) {\n        return;\n    }\n\n    window.treeResource = treeResource;\n    treeResource.editCategory = editCategory;\n    // console.log(nodeHoverSel.parentNode.text);\n    var serverName = nodeHoverSel.name;\n    // var serverName = nodeHoverSel.text;\n    if(null != nodeHoverSel.parentNode && undefined != nodeHoverSel.parentNode) {\n        serverName = nodeHoverSel.parentNode.name;\n        // serverName = nodeHoverSel.parentNode.text;\n    }\n\n    var serverAddr = \"\";\n    if(null != nodeSel.parent && undefined != nodeSel.parent) {\n        serverAddr = nodeSel.parent.address;\n    }\n\n    resourceCategoryForm = new vmd.window({\n        title: serverName,\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwcde15445.html\",\n        auto: false,\n        height: 400,\n        width: 400,\n        params: {\n            type: 1, // 0：添加目录，1：编辑目录\n            categoryId: nodeSel.resourceCategoryId,\n            path: nodeSel.text,\n            serverAddr: serverAddr,\n            r: new Date().getTime()\n        }\n    })\n\n    resourceCategoryForm.show();\n    window.resourceCategoryForm = resourceCategoryForm;\n}\n\nfunction btnDelete_click(sender, e) {\n\n    btnDelete();\n}\n\nfunction btnDelete() {\n    // pointerCtrlOwner.fireEvent('onClickBtnDelete', sender, e);\n\n    var nodeSel = nodeHoverSel;\n    // var nodeSel = treeResource.getSelNode();\n    if(null == nodeSel) {\n        return;\n    }\n\n    // 主题且当前选中分类节点，就返回\n    // 因为主题不能执行删除操作\n    if(0 == resourceType && 2 == nodeSel.type) {\n        return;\n    }\n\n    Ext.Msg.confirm(\"提示\", \"确认要删除节点？\", function(type) {\n        if(type == \"yes\") {\n\n            var dataService = \"\";\n            // 服务器节点\n            if(1 == nodeSel.type) {\n\n                // 删除服务地址\n                if(0 == applyType) {\n\n                    hwDas.del(\n                        \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {\n                            'serviceaddressid': nodeSel.id\n                        },\n                        function(result) {\n                            // Tips.tips(\"保存成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息成功！\");\n                        },\n                        function(msg) {\n                            // Tips.tips(\"保存失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n                        }\n                    );\n                } else {\n                    hwDas.del(\n                        \"DataServiceWorkSpace/projectInfo/ProjectServiceAddress\", {}, {\n                            'serviceaddressid': nodeSel.id\n                        },\n                        function(result) {\n                            // Tips.tips(\"保存成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息成功！\");\n                        },\n                        function(msg) {\n                            // Tips.tips(\"保存失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n                        }\n                    );\n                }\n            } else if(2 == nodeSel.type) // 分类节点\n            {\n                // 删除节点\n                if(0 == applyType) {\n                    hwDas.del(\n                        \"DataServiceWorkSpace/WorkSpaceInfo/ResourceCategory\", {}, {\n                            'resourceid': nodeSel.id\n                        },\n                        function(result) {\n                            // Tips.tips(\"删除成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录成功！\");\n                        },\n                        function(msg) {\n                            // Tips.tips(\"删除失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录失败！\");\n                        }\n                    );\n                } else {\n                    hwDas.del(\n                        \"DataServiceWorkSpace/projectInfo/ProjectResource\", {}, {\n                            'resourceid': nodeSel.id\n                        },\n                        function(result) {\n                            // Tips.tips(\"删除成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录成功！\");\n                        },\n                        function(msg) {\n                            // Tips.tips(\"删除失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录失败！\");\n                        }\n                    );\n                }\n            }\n\n            // 删除之前需要循环删除其下的分类节点\n            nodeSel.removeAll();\n            // 删除当前节点\n            nodeSel.remove();\n        }\n    });\n\n}\n\n//添加资源中心服务地址\nExt.winAddResourceServer = Ext.extend(Ext.Window, {\n    xtype: \"window\",\n    title: \"资源中心服务地址\",\n    width: 300,\n    height: 200,\n    layout: \"form\",\n    bodyStyle: 'padding:15px',\n    labelAlign: \"left\",\n    labelWidth: 40,\n    modal: true,\n    constructor: function(callback, name, addr, remark) {\n        this.callback = callback;\n        this.valueAddr = addr;\n        this.valueName = name;\n        this.valueRemark = remark;\n        this.callParent();\n    },\n    initComponent: function() {\n        var me = this;\n        this.fbar = [{\n            text: \"确定\",\n            handler: function() {\n                var reg = /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?:([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/;\n                if(!reg.test(Ext.getCmp('addr').getValue())) {\n                    Ext.Msg.alert(\"提示\", \"请输入正确的服务地址(带端口)！\")\n                    return;\n                }\n                me.callback(Ext.getCmp('name').getValue(), Ext.getCmp('addr').getValue(), Ext.getCmp('remark').getValue());\n                me.close();\n            }\n        }, {\n            text: \"取消\",\n            handler: function() {\n                me.close();\n            }\n        }];\n        if(this.valueAddr != '') {\n            this.items = [{\n                id: 'name',\n                xtype: \"textfield\",\n                fieldLabel: \"名称\",\n                anchor: \"100%\",\n                value: this.valueName,\n                disabled: true\n            }, {\n                id: 'addr',\n                xtype: \"textfield\",\n                fieldLabel: \"地址\",\n                anchor: \"100%\",\n                value: this.valueAddr,\n                disabled: true\n            }, {\n                id: 'remark',\n                xtype: \"textfield\",\n                fieldLabel: \"说明\",\n                anchor: \"100%\",\n                value: this.valueRemark\n            }]\n        } else {\n            this.items = [{\n                id: 'name',\n                xtype: \"textfield\",\n                fieldLabel: \"名称\",\n                anchor: \"100%\",\n                value: this.valueName\n            }, {\n                id: 'addr',\n                xtype: \"textfield\",\n                fieldLabel: \"地址\",\n                anchor: \"100%\",\n                value: this.valueAddr,\n                regex:/[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?:([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/,\n                regexText: \"输入标准的服务器地址（带端口）！\"\n            }, {\n                id: 'remark',\n                xtype: \"textfield\",\n                fieldLabel: \"说明\",\n                anchor: \"100%\",\n                value: this.valueRemark\n            }]\n        }\n\n        Ext.winAddResourceServer.superclass.initComponent.call(this);\n    }\n})\n\n\n//添加资源目录\nExt.winAddResourceCategory = Ext.extend(Ext.Window, {\n    xtype: \"window\",\n    title: \"添加资源目录\",\n    width: 300,\n    height: 200,\n    layout: \"form\",\n    bodyStyle: 'padding:15px',\n    labelAlign: \"left\",\n    labelWidth: 40,\n    modal: true,\n    constructor: function(callback, name, addr, remark) {\n        this.callback = callback;\n        this.valueAddr = addr;\n        this.valueName = name;\n        this.valueRemark = remark;\n        this.callParent();\n    },\n    initComponent: function() {\n        var me = this;\n        this.fbar = [{\n            text: \"确定\",\n            handler: function() {\n                // var reg = /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?$/;\n                // if(!reg.test(Ext.getCmp('addr').getValue())) {\n                //     Ext.Msg.alert(\"提示\", \"请输入正确的服务地址(带端口)！\")\n                //     return;\n                // }\n                me.callback(Ext.getCmp('name').getValue(), Ext.getCmp('addr').getValue(), Ext.getCmp('remark').getValue());\n                me.close();\n            }\n        }, {\n            text: \"取消\",\n            handler: function() {\n                me.close();\n            }\n        }];\n\n        this.items = [{\n            id: 'name',\n            xtype: \"textfield\",\n            fieldLabel: \"选择文件所在目录\",\n            anchor: \"100%\",\n            value: this.valueName\n        }, {\n            id: 'addr',\n            xtype: \"textfield\",\n            fieldLabel: \"地址\",\n            anchor: \"100%\",\n            value: this.valueAddr,\n            regex: /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?:([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/,\n            regexText: \"输入标准的服务器地址（带端口）！\"\n        }, {\n            id: 'remark',\n            xtype: \"textarea\",\n            fieldLabel: \"说明\",\n            anchor: \"100%\",\n            value: this.valueRemark\n        }]\n        Ext.winAddResourceServer.superclass.initComponent.call(this);\n    }\n})\n\nfunction treeResource_afterrender(sender) {\n\n    addTreeResourceRootNode();\n}\n\nfunction addTreeResourceRootNode() {\n\n    var mytree = treeResource;\n    var rootNode = mytree.getRootNode();\n    if(null == rootNode || undefined == rootNode) {\n        var nodeId = vmd.util.guid();\n\n        rootNode = new Ext.tree.TreeNode({\n            id: nodeId,\n            text: \"根节点\"\n        });\n\n        rootNode.id = nodeId;\n        rootNode.type = 0; // 节点类型：0：根节点，1：服务器节点，2：分类节点\n        // 拖上图片，增加图标\n        // rootNode.setIcon(\"/img/public/{D35D2F80-5F23-46C8-A9EE-CE33B28DD531}.png\");\n        mytree.setRootNode(rootNode); // ???根节点的添加\n        // mytree.rootVisible = false;\n\n        return rootNode;\n    }\n    return rootNode;\n}\n\n// type:0:主题，1：图片，2：JS文件\nfunction loadResource(type, resouType) {\n    // applyType = 0;\n    // workspaceId = \"1005a370-ea5a-4753-9cbb-d854be34f490\";\n    if(0 == applyType) { // 工区\n\n        if(workspaceId === null || workspaceId === undefined || workspaceId === '') {\n            return;\n        }\n        // if(ifDataLoaded) {\n        //     return;\n        // }\n        ifDataLoaded = true;\n        clearTree();\n        hwDas.get(\n            \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {\n                \"workspaceid\": workspaceId,\n                \"servicetype\": type\n            },\n            function(result) {\n                // 根据获取的数据赋值基本信息Tab页\n                if(null === result && undefined === result) {\n                    return;\n                }\n\n                if(null != result.data && undefined != result.data) {\n                    if(result.data.length > 0) {\n                        if(null != result.data[0].datas && undefined != result.data[0].datas) {\n                            if(result.data[0].datas.length > 0) {\n                                for(var i = 0; i < result.data[0].datas.length; i++) {\n                                    var nodeService = addServiceAddressNode(\n                                        result.data[0].datas[i].id,\n                                        result.data[0].datas[i].name + \"(\" + result.data[0].datas[i].address + \")\",\n                                        result.data[0].datas[i].address,\n                                        result.data[0].datas[i].remark);\n                                    // workspaceId = \"1005a370-ea5a-4753-9cbb-d854be34f490\";\n                                    if(1 == resouType || 2 == resouType) {\n                                        loadResourceCategory(nodeService, workspaceId, result.data[0].datas[i].id, resouType);\n                                    }\n                                }\n                            } else {\n                                clearTree();\n                            }\n                        }\n                    }\n                }\n\n                ifDataLoaded = true;\n                // Tips.tips(\"查询成功！\", \"success\");\n            },\n            function(msg) {\n                // Tips.tips(\"查询失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"查询资源信息失败！\");\n            });\n    } else { // 项目\n\n        if(objInfoId === null || objInfoId === undefined || objInfoId === '') {\n            return;\n        }\n        // if(ifDataLoaded) {\n        //     return;\n        // }\n\n        ifDataLoaded = true;\n        clearTree();\n        hwDas.get(\n            \"DataServiceWorkSpace/projectInfo/ProjectServiceAddress\", {}, {\n                \"id\": objInfoId,\n                \"type\": type\n            },\n            function(result) {\n                // 根据获取的数据赋值基本信息Tab页\n                if(null === result && undefined === result) {\n                    return;\n                }\n\n                if(null != result.data && undefined != result.data) {\n                    if(result.data.length > 0) {\n                        if(null != result.data[0].datas && undefined != result.data[0].datas) {\n                            if(result.data[0].datas.length > 0) {\n                                console.log(result.data[0].datas)\n                                for(var i = 0; i < result.data[0].datas.length; i++) {\n                                    var nodeService = addServiceAddressNode(\n                                        result.data[0].datas[i].id,\n                                        result.data[0].datas[i].name + \"(\" + result.data[0].datas[i].address + \")\",\n                                        result.data[0].datas[i].address,\n                                        result.data[0].datas[i].remark);\n                                    // objInfoId = \"1005a370-ea5a-4753-9cbb-d854be34f490\";\n                                    if(1 == resouType || 2 == resouType) {\n                                        loadResourceCategory(nodeService, objInfoId, result.data[0].datas[0].id, resouType);\n                                    }\n                                }\n                            } else {\n                                clearTree();\n                            }\n                        }\n                    }\n                }\n\n                ifDataLoaded = true;\n                // Tips.tips(\"查询成功！\", \"success\");\n            },\n            function(msg) {\n                // Tips.tips(\"查询失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"查询资源信息失败！\");\n            });\n    }\n}\n\nfunction addServiceAddressNode(id, name, address, remark) {\n\n    var mytree = treeResource;\n\n    var cnode = new Ext.tree.TreeNode({\n        id: id,\n        text: name,\n        cls: \"vmd-tree-node\"\n    });\n\n    cnode.id = id;\n    cnode.text = name;\n    cnode.type = 1; // 节点类型：0：根节点，1：服务器节点，2：分类节点\n    cnode.address = address;\n    cnode.remark = remark;\n    // 拖上图片，增加图标\n    cnode.setIcon(\"/img/public/server6.png\");\n    var nodeRoot = mytree.getRootNode();\n    if(null == nodeRoot || undefined == nodeRoot) {\n        nodeRoot = addTreeResourceRootNode();\n    }\n    nodeRoot.appendChild(cnode);\n\n    return cnode;\n}\n\n// 加载资源目录\nfunction loadResourceCategory(nodeParent, wsId, serviceId, type) {\n    if(wsId === null || wsId === undefined || wsId === '') {\n        return;\n    }\n    if(0 == applyType) {\n\n        hwDas.get(\n            \"DataServiceWorkSpace/WorkSpaceInfo/ResourceCategory\", {}, {\n                \"workspaceid\": wsId,\n                \"serviceid\": serviceId,\n                \"resourcetype\": type\n            },\n            function(result) {\n                // 根据获取的数据赋值基本信息Tab页\n                if(null === result && undefined === result) {\n                    return;\n                }\n\n                if(null != result.data && undefined != result.data) {\n                    if(result.data.length > 0) {\n                        if(null != result.data[0].datas && undefined != result.data[0].datas) {\n                            for(var i = 0; i < result.data[0].datas.length; i++) {\n                                addCategoryNode(nodeParent,\n                                    result.data[0].datas[i].resource_id,\n                                    result.data[0].datas[i].resource_category_id,\n                                    serviceId,\n                                    result.data[0].datas[i].path,\n                                    2);\n                            }\n                        }\n                    }\n                }\n                // Tips.tips(\"查询成功！\", \"success\");\n            },\n            function(msg) {\n                Tips.tips(\"加载失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"查询资源信息失败！\");\n            });\n    } else {\n\n        hwDas.get(\n            \"DataServiceWorkSpace/projectInfo/ProjectResource\", {}, {\n                \"projectid\": wsId,\n                \"serviceid\": serviceId,\n                \"resourcetype\": type\n            },\n            function(result) {\n                // 根据获取的数据赋值基本信息Tab页\n                if(null === result && undefined === result) {\n                    return;\n                }\n\n                if(null != result.data && undefined != result.data) {\n                    if(result.data.length > 0) {\n                        if(null != result.data[0].datas && undefined != result.data[0].datas) {\n                            for(var i = 0; i < result.data[0].datas.length; i++) {\n                                addCategoryNode(nodeParent,\n                                    result.data[0].datas[i].resource_id,\n                                    result.data[0].datas[i].resource_category_id,\n                                    serviceId,\n                                    result.data[0].datas[i].path,\n                                    2);\n                            }\n                        }\n                    }\n                }\n                // Tips.tips(\"查询成功！\", \"success\");\n            },\n            function(msg) {\n                Tips.tips(\"加载失败！\", \"error\");\n                // Ext.Msg.alert(\"提示\", \"查询资源信息失败！\");\n            });\n    }\n}\n\nfunction addCategoryNode(nodeParent, id, resourceCategoryId, serviceId, path, type) {\n    var cnode = new Ext.tree.TreeNode({\n        id: id,\n        text: path,\n        cls: \"vmd-tree-node\"\n    });\n\n    cnode.id = id;\n    cnode.resourceCategoryId = resourceCategoryId;\n    cnode.serviceaddressid = serviceId;\n    cnode.text = path;\n    // cnode.text = name;\n    cnode.type = type; // 分类节点\n\n    // 拖上图片，增加图标\n    cnode.setIcon(\"/img/public/folderClosed.gif\");\n    // cnode.parentNode.setIcon(null);\n    nodeParent.appendChild(cnode);\n}\n\n// 清空树\nfunction clearAll() {\n    clearTree();\n}\n\n// 删除根节点下的所有节点\nfunction clearTree() {\n    var nodeRoot = treeResource.getRootNode();\n    // 删除根节点下的所有节点\n    if(nodeRoot) {\n        // nodeRoot.remove();\n        if(nodeRoot.hasChildNodes()) {\n            nodeRoot.removeAll();\n        }\n\n        // nodeRoot.eachChild(\n        //     function(childService) {\n        //         if(childService.hasChildNodes()) {\n        //             childService.eachChild(\n        //                 function(childCategory) {\n        //             childService.removeChild(childCategory);\n        //                     // childCategory.remove();\n        //                 }\n        //             );\n        //         }\n        //         // childService.remove();\n        //     }\n        // );\n    }\n}\n\nfunction WorkspaceResEdit_xuexi_afterrender(sender) {\n    div.hide()\n}\n\nvar nodeHoverSel = null;\n\nfunction treeResource_nodeover(sender, e, node) {\n\n    nodeHoverSel = node;\n    var nodeEl = vmd(node.ui.wrap.firstChild);\n\n    //构造用户新增、编辑、删除浮动效果\n    if(nodeEl.find(\".nodetool\").length == 0) {\n\n        if(1 == node.type) {\n\n            // nodeEl.append('<div class=\"nodetool\" style=\"display:inline\"><span class=\"button add\"  title=\"添加\" onfocus=\"this.blur();\"></span><span class=\"button edit\"  title=\"编辑\" ></span><span class=\"button remove\"  title=\"删除\"></div>');\n            // 主题不需要添加分类数据\n            if(0 == resourceType) {\n\n                nodeEl.append('<div class=\"nodetool\" style=\"display:inline\"><span class=\"button remove\"  title=\"删除\"></div>');\n                node._tool = nodeEl[0].lastChild;\n                // node._tool.add = nodeEl[0].lastChild.firstChild;\n                // node._tool.edit = nodeEl[0].lastChild.children[1];\n                node._tool.del = nodeEl[0].lastChild.lastChild;\n\n                // vmd(node._tool.add).bind('click', node_add);\n                // vmd(node._tool.edit).bind('click', node_edit);\n                vmd(node._tool.del).bind('click', node_del);\n            } else {\n\n                nodeEl.append('<div class=\"nodetool\" style=\"display:inline\"><span class=\"button add\"  title=\"添加\" onfocus=\"this.blur();\"></span><span class=\"button remove\"  title=\"删除\"></div>');\n                node._tool = nodeEl[0].lastChild;\n                node._tool.add = nodeEl[0].lastChild.firstChild;\n                // node._tool.edit = nodeEl[0].lastChild.children[1];\n                node._tool.del = nodeEl[0].lastChild.lastChild;\n\n                vmd(node._tool.add).bind('click', node_add);\n                // vmd(node._tool.edit).bind('click', node_edit);\n                vmd(node._tool.del).bind('click', node_del);\n            }\n\n\n\n\n\n            // nodeEl.append('<div class=\"nodetool\" style=\"display:inline\"><span class=\"button add\"  title=\"添加\" onfocus=\"this.blur();\"></span><span class=\"button edit\"  title=\"编辑\" ></span><span class=\"button remove\"  title=\"删除\"></div>');\n\n            // node._tool = nodeEl[0].lastChild;\n            // node._tool.add = nodeEl[0].lastChild.firstChild;\n            // node._tool.edit = nodeEl[0].lastChild.children[1];\n            // node._tool.del = nodeEl[0].lastChild.lastChild;\n\n            // vmd(node._tool.add).bind('click', node_add);\n            // vmd(node._tool.edit).bind('click', node_edit);\n            // vmd(node._tool.del).bind('click', node_del);\n        } else if(2 == node.type) {\n            nodeEl.append('<div class=\"nodetool\" style=\"display:inline\"></span><span class=\"button edit\"  title=\"编辑\" ></span><span class=\"button remove\"  title=\"删除\"></div>');\n\n            node._tool = nodeEl[0].lastChild;\n\n            node._tool.edit = nodeEl[0].lastChild.firstChild;\n            // node._tool.edit = nodeEl[0].lastChild.children[1];\n            node._tool.del = nodeEl[0].lastChild.lastChild;\n\n            // vmd(node._tool.add).bind('click', node_add);\n            vmd(node._tool.edit).bind('click', node_edit);\n            vmd(node._tool.del).bind('click', node_del);\n        }\n\n        //Dom对象的操作流程\n        // vmd(node._tool.add).bind('click', function(){\n        //     node_add(node);\n        // });\n        // vmd(node._tool.edit).bind('click', function(){\n        //     node_edit(node);\n        // });\n        // vmd(node._tool.del).bind('click', function(){\n        //     node_del(node);\n        // });\n    }\n}\n\n\nfunction node_add() {\n\n    window.treeResource = treeResource;\n    treeResource.addCategory = addCategory;\n    var serverName = \"\";\n    if(null != nodeHoverSel && undefined != nodeHoverSel) {\n        serverName = nodeHoverSel.name;\n        // serverName = nodeHoverSel.text;\n    }\n\n    resourceCategoryForm = new vmd.window({\n        title: serverName,\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwcde15445.html\",\n        auto: false,\n        height: 400,\n        width: 400,\n        params: {\n            type: 0, // 0：添加目录，1：编辑目录\n            categoryId: \"\",\n            serverAddr: nodeHoverSel.address,\n            r: new Date().getTime()\n        }\n    })\n\n    resourceCategoryForm.show();\n    //   window[\"openWinFrom2\"] = openWinFrom2;\n    window.resourceCategoryForm = resourceCategoryForm;\n    return resourceCategoryForm;\n\n}\n\nfunction node_edit() {\n\n    var nodeSel = nodeHoverSel;\n    // var nodeSel = treeResource.getSelNode();\n    if(null == nodeSel) {\n        return;\n    }\n\n    // 服务器节点\n    if(1 == nodeSel.type) {\n        editResourceService(nodeSel);\n    } else if(2 == nodeSel.type && 0 != resourceType) // 分类节点\n    {\n        editResourceCategory(nodeSel);\n    }\n}\n\nfunction node_del() {\n    var nodeSel = nodeHoverSel;\n    // var nodeSel = treeResource.getSelNode();\n    if(null == nodeSel) {\n        return;\n    }\n\n    // 主题且当前选中分类节点，就返回\n    // 因为主题不能执行删除操作\n    if(0 == resourceType && 2 == nodeSel.type) {\n        return;\n    }\n\n    Ext.Msg.confirm(\"提示\", \"确认要删除节点？\", function(type) {\n        if(type == \"yes\") {\n\n            var dataService = \"\";\n            // 服务器节点\n            if(1 == nodeSel.type) {\n\n                // 删除服务地址\n                if(0 == applyType) {\n\n                    hwDas.del(\n                        \"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddress\", {}, {\n                            'serviceaddressid': nodeSel.id,\n                            'type': resourceType\n                        },\n                        function(result) {\n                            Tips.tips(\"删除成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息成功！\");\n                        },\n                        function(msg) {\n                            Tips.tips(\"删除失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n                        }\n                    );\n                } else {\n                    hwDas.del(\n                        \"DataServiceWorkSpace/projectInfo/ProjectServiceAddress\", {}, {\n                            'serviceaddressid': nodeSel.id,\n                            'type': resourceType\n                        },\n                        function(result) {\n                            Tips.tips(\"删除成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息成功！\");\n                        },\n                        function(msg) {\n                            Tips.tips(\"删除失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n                        }\n                    );\n                }\n            } else if(2 == nodeSel.type) // 分类节点\n            {\n                // 删除节点\n                if(0 == applyType) {\n                    hwDas.del(\n                        \"DataServiceWorkSpace/WorkSpaceInfo/ResourceCategory\", {}, {\n                            'resourceid': nodeSel.id\n                        },\n                        function(result) {\n                            Tips.tips(\"删除成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录成功！\");\n                        },\n                        function(msg) {\n                            Tips.tips(\"删除失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录失败！\");\n                        }\n                    );\n                } else {\n                    hwDas.del(\n                        \"DataServiceWorkSpace/projectInfo/ProjectResource\", {}, {\n                            'resourceid': nodeSel.id\n                        },\n                        function(result) {\n                            Tips.tips(\"删除成功！\", \"success\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录成功！\");\n                        },\n                        function(msg) {\n                            Tips.tips(\"删除失败！\", \"error\");\n                            // Ext.Msg.alert(\"提示\", \"删除资源目录失败！\");\n                        }\n                    );\n                }\n            }\n\n            // 删除之前需要循环删除其下的分类节点\n            nodeSel.removeAll();\n            // 删除当前节点\n            nodeSel.remove();\n        }\n    });\n}\n\nfunction treeResource_nodeout(sender, e, node) {\n    if(node._tool) {\n        vmd(node._tool).remove();\n    }\n}\n\n\nfunction WorkspaceResEdit_xuexi_beforerender(sender){\n\n}","vmdcss":".nodetool span.button {\n    line-height: 0;\n    margin: 0 2px;\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    vertical-align: middle;\n    border: 0 none;\n    cursor: pointer;\n    outline: none;\n    /*background-color: transparent;*/\n    /*background-repeat: no-repeat;*/\n    /*background-attachment: scroll;*/\n    /*background-image: url(\"/system/img/hwico.png\");*/\n}\n\n.nodetool span.button.add {\n    /*margin-left: 2px;*/\n    /*margin-right: -1px;*/\n    /*background-position: -144px 0;*/\n    /*vertical-align: top;*/\n    /**vertical-align: middle;*/\n    background-color: transparent;\n    background-repeat: no-repeat;\n    background-attachment: scroll;\n    background-image: url(\"/system/img/add2.png\");\n}\n\n.nodetool span.button.edit {\n    /*margin-right: 2px;*/\n    /*background-position: -110px -48px;*/\n    /*vertical-align: top;*/\n    /**vertical-align: middle;*/\n    background-color: transparent;\n    background-repeat: no-repeat;\n    background-attachment: scroll;\n    background-image: url(\"/system/img/edit2.png\");\n}\n\n.nodetool span.button.remove {\n    /*margin-right: 2px;*/\n    /*background-position: -110px -64px;*/\n    /*vertical-align: top;*/\n    /**vertical-align: middle;*/\n    background-color: transparent;\n    background-repeat: no-repeat;\n    background-attachment: scroll;\n    background-image: url(\"/system/img/del2.png\");\n}","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"iSetAddCategoryBtnVisiable\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetAddCategoryBtnVisiable\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置添加目录按钮是否可见。\",\"uxcid\":\"\",\"params\":\"paraVisiable\",\"code\":\"//直接填写方法内容\\nbtnAddCategory.isVisible = paraVisiable;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetResourceType\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetResourceType\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置资源类型：\\n0：主题，1：图片，2：JS文件\",\"uxcid\":\"\",\"params\":\"type\",\"code\":\"//直接填写方法内容\\nresourceType = type;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetWorkSpaceId\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetWorkSpaceId\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置工区ID\",\"uxcid\":\"\",\"params\":\"id\",\"code\":\"//直接填写方法内容\\nworkspaceId = id;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetDataStore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetDataStore\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"store\",\"code\":\"//直接填写方法内容\\ndebugger;\\nthis.dataStore = store;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iLoadResource\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iLoadResource\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"载入主题、图片、JS文件\",\"uxcid\":\"\",\"params\":\"type, resouType\",\"code\":\"//直接填写方法内容\\nloadResource(type,resouType);\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iShowAddCategoryBtn\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iShowAddCategoryBtn\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"是否显示添加分类按钮。\",\"uxcid\":\"\",\"params\":\"bShow\",\"code\":\"//直接填写方法内容\\n// debugger;\\n// btnAddCategory.hidden = true;\\n// btnAddCategory.hide();\\n// if(bShow)\\n// {\\n//     btnAddCategory.show();\\n// }\\n// else\\n// {\\n//     btnAddCategory.hide();\\n// }\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetId\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetId\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置ID\",\"uxcid\":\"\",\"params\":\"id\",\"code\":\"//直接填写方法内容\\nobjInfoId = id;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetApplyType\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetApplyType\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"type\",\"code\":\"//直接填写方法内容\\napplyType = type;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iClearAll\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iClearAll\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"清空所有资源信息\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nclearAll();\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"iSetIfDataLoaded\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iSetIfDataLoaded\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"设置资源是否已经查询加载\",\"uxcid\":\"\",\"params\":\"bVar\",\"code\":\"//直接填写方法内容\\nifDataLoaded = bVar;\",\"returnType\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"iGetIfDataLoaded\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iGetIfDataLoaded\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nreturn ifDataLoaded;\",\"returnType\":\"对象\"}},{\"cid\":\"uxmethod\",\"id\":\"iAddServer\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"iAddServer\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"添加服务地址\",\"uxcid\":\"\",\"params\":\"id, name, addr, remark, resType\",\"code\":\"//直接填写方法内容\\naddResourceServer(id,name, addr, remark, resType);\",\"returnType\":\"无\",\"hwCheckbox\":\"无\"}},{\"cid\":\"uxmethod\",\"id\":\"isAddServeData\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"isAddServeData\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"id, name, addr, remark, resType\",\"code\":\"//直接填写方法内容\\naddServeInServe(id, name, addr, remark, resType)\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxevent\",\"id\":\"onClickBtnAddServer\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"onClickBtnAddServer\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"点击添加服务器按钮事件。\",\"uxcid\":\"\",\"params\":\"e\",\"code\":\"\"}},{\"cid\":\"uxevent\",\"id\":\"onClickBtnAddCategory\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"onClickBtnAddCategory\",\"params\":\"e\",\"desc\":\"点击添加目录按钮的事件\"}},{\"cid\":\"uxevent\",\"id\":\"onClickBtnEdit\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"onClickBtnEdit\",\"params\":\"e\",\"desc\":\"点击编辑按钮事件\"}},{\"cid\":\"uxevent\",\"id\":\"onClickBtnDelete\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"onClickBtnDelete\",\"params\":\"e\",\"desc\":\"点击删除按钮事件\"}}]}]}"}