{"vmdversion":"vmd2.0.4.190810","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"GridvirtualCol\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"header\":false,\"width\":350,\"height\":450,\"afterrender\":\"GridvirtualCol_afterrender\"},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv6\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"anchor\",\"width\":220,\"region\":\"center\",\"height\":446,\"border\":false,\"margins\":\"0 0 0 10\"},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv1\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"anchor\":\"100%\",\"height\":40,\"border\":false,\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel1\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"虚拟列名：\",\"margins\":\"10 0 0 0 \"}},{\"cid\":\"textfield\",\"id\":\"virtualColName\",\"layoutConfig\":{},\"userConfig\":{\"width\":213,\"margins\":\"10 0 0 0\",\"id\":\"virtualColName\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv\",\"layoutConfig\":{\"align\":\"middle\",\"padding\":\"\"},\"userConfig\":{\"x\":100,\"y\":60,\"anchor\":\"100% \",\"border\":false,\"height\":30,\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"类型：\",\"margins\":\"\"}},{\"cid\":\"vmdComlist\",\"id\":\"typeList\",\"layoutConfig\":{},\"userConfig\":{\"width\":255,\"margins\":\"\",\"id\":\"typeList\",\"selectChanged\":\"typeList_selectChanged\",\"beforerender\":\"typeList_beforerender\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv11\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"anchor\":\"100%\",\"border\":false,\"height\":30,\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel7\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"显示值：\"}},{\"cid\":\"textfield\",\"id\":\"showValue\",\"layoutConfig\":{},\"userConfig\":{\"width\":225,\"id\":\"showValue\",\"readOnly\":true}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"...\",\"height\":25,\"width\":30,\"click\":\"button_click\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv3\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"anchor\":\"100%\",\"border\":false,\"height\":30,\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel3\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"列宽：\"}},{\"cid\":\"numberfield\",\"id\":\"colWidthTxt\",\"layoutConfig\":{},\"userConfig\":{\"width\":232,\"id\":\"colWidthTxt\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv7\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"border\":false,\"height\":30,\"anchor\":\"100%\",\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"allowSort\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"启用排序\",\"id\":\"allowSort\",\"checked\":true}}]},{\"cid\":\"container\",\"id\":\"hwDiv8\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"border\":false,\"height\":30,\"anchor\":\"100%\",\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"allowFilt\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"启用过滤\",\"id\":\"allowFilt\",\"check\":\"allowFilt_check\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv9\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"height\":27,\"anchor\":\"100%\",\"layout\":\"hbox\",\"border\":false},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"allowStat\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"启用统计\",\"check\":\"allowStat_check\",\"id\":\"allowStat\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv10\",\"layoutConfig\":{},\"userConfig\":{\"anchor\":\"100%\",\"border\":false,\"style\":\"margin-left: 10px\",\"height\":30,\"hidden\":true},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel6\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"统计表达式:\"}},{\"cid\":\"textfield\",\"id\":\"statValue\",\"layoutConfig\":{},\"userConfig\":{\"width\":198,\"id\":\"statValue\",\"readOnly\":true}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"...\",\"height\":25,\"width\":30,\"click\":\"button1_click\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv4\",\"layoutConfig\":{},\"userConfig\":{\"x\":190,\"y\":370,\"anchor\":\"100% -250\",\"height\":30,\"border\":false,\"layout\":\"anchor\"},\"cn\":[{\"cid\":\"container\",\"id\":\"linkDiv\",\"layoutConfig\":{},\"userConfig\":{\"width\":289,\"height\":80,\"layout\":\"fit\",\"border\":false,\"id\":\"linkDiv\",\"hidden\":false,\"anchor\":\"100%\"},\"cn\":[{\"cid\":\"tabpanel\",\"id\":\"hwMyTabs\",\"layoutConfig\":{},\"userConfig\":{\"width\":263,\"activeTab\":0,\"border\":false,\"height\":80,\"hidden\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"title\":\"属性\",\"width\":267,\"border\":false,\"header\":false,\"layout\":\"hbox\",\"height\":131},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel2\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"标签名：\"}},{\"cid\":\"textfield\",\"id\":\"linktitleTxt\",\"layoutConfig\":{},\"userConfig\":{\"width\":223,\"id\":\"linktitleTxt\"}}]},{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"title\":\"事件\",\"border\":false,\"header\":false,\"width\":280,\"height\":96,\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel4\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"click：\"}},{\"cid\":\"textfield\",\"id\":\"linkClick\",\"layoutConfig\":{},\"userConfig\":{\"width\":232,\"id\":\"linkClick\",\"afterrender\":\"linkClick_afterrender\"}},{\"cid\":\"vmdButton\",\"id\":\"linkClickDel\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"\",\"icon\":\"icon-trash\",\"width\":30,\"id\":\"linkClickDel\",\"click\":\"linkClickDel_click\",\"height\":25}}]}]}]},{\"cid\":\"container\",\"id\":\"txtTypeDiv\",\"layoutConfig\":{},\"userConfig\":{\"width\":296,\"id\":\"txtTypeDiv\",\"height\":36,\"border\":false,\"hidden\":false,\"anchor\":\"100%\"},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"lineFeedChk\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"自动换行\",\"id\":\"lineFeedChk\"}}]},{\"cid\":\"container\",\"id\":\"dateDiv\",\"layoutConfig\":{},\"userConfig\":{\"width\":295,\"height\":93,\"border\":false,\"id\":\"dateDiv\",\"hidden\":false,\"anchor\":\"100%\"},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"customFormatChk\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"自定义格式\",\"id\":\"customFormatChk\",\"check\":\"customFormatChk_check\"}},{\"cid\":\"label\",\"id\":\"hwLabel5\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"格式：\"}},{\"cid\":\"textfield\",\"id\":\"customFormat\",\"layoutConfig\":{},\"userConfig\":{\"width\":190,\"id\":\"customFormat\"}},{\"cid\":\"checkbox\",\"id\":\"defaultDate\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"默认当前日期\",\"id\":\"defaultDate\"}}]}]}]}]}]}","vmdevents":"var typeListData = [{\n    name: '文本',\n    id: \"txt\"\n}, {\n    name: '数字',\n    id: \"num\"\n}, {\n    name: '日期',\n    id: \"date\"\n}, {\n    name: '超链接',\n    id: \"link\"\n}]\n\nvar typeListStore = new vmd.data.Store({\n    data: typeListData,\n    fields: ['id', 'name']\n})\n\n\n\nvar mypage = this;\n\nmypage.selFiledInfo = {}\n\nfunction typeList_beforerender(sender) {\n    typeList.displayField = 'name';\n    typeList.valueField = 'id';\n    typeList.store = typeListStore;\n}\n\nfunction typeList_selectChanged(sender, combo, record, index) {\n    setTypePanel()\n    mypage.selFiledInfo.fileInfo.type = typeList.getValue()\n    //设置字段的额信息，默认值\n    _setDefaultConfigInfo()\n}\n\nfunction _setDefaultConfigInfo() {\n    var fileInfo = mypage.selFiledInfo;\n    var _type = typeList.getValue()\n    var _fileInfo = {},\n        _fileEvent = {};\n    _fileInfo.type = _type;\n    if (_type == \"txt\") {\n        lineFeedChk.setValue(fileInfo.fileInfo.lineFeed || false)\n        _fileInfo.lineFeed = fileInfo.fileInfo.lineFeed || false;\n    } else if (_type == \"num\") {} else if (_type == \"date\") {\n        defaultDate.setValue((fileInfo.fileInfo && fileInfo.fileInfo.defaultDate) || false)\n        customFormatChk.setValue((fileInfo.fileInfo && fileInfo.fileInfo.format) ? true : false)\n        customFormat.setValue((fileInfo.fileInfo && fileInfo.fileInfo.format) || \"\")\n        _fileInfo.defaultDate = (fileInfo.fileInfo && fileInfo.fileInfo.defaultDate) || false\n        _fileInfo.format = (fileInfo.fileInfo && fileInfo.fileInfo.format) ? true : false\n\n    } else if (_type == \"link\") {\n        linktitleTxt.setValue((fileInfo.fileInfo && fileInfo.fileInfo.title) || \"\");\n        linkClick.setValue((fileInfo.events && fileInfo.events[\"click\"]) || \"\");\n        _fileInfo.title = (fileInfo.fileInfo && fileInfo.fileInfo.title) || \"\";\n        _fileEvent[\"click\"] = (fileInfo.events && fileInfo.events[\"click\"]) || \"\";\n    } else {}\n    mypage.selFiledInfo.fileInfo = _fileInfo;\n    mypage.selFiledInfo.events = _fileEvent;\n}\n//\nfunction setTypePanel() {\n    enableAll()\n    if (typeList.getValue() == \"txt\") {\n        txtTypeDiv.show();\n    } else if (typeList.getValue() == \"num\") {} else if (typeList.getValue() == \"date\") {\n        dateDiv.show();\n    } else if (typeList.getValue() == \"link\") {\n        linkDiv.show();\n    } else {\n        txtTypeDiv.show();\n    }\n    hwDiv4.doLayout();\n}\n\nfunction enableAll() {\n    txtTypeDiv.hide(true);\n    linkDiv.hide(true);\n    dateDiv.hide(true);\n}\n\nvar defauleSelInde = 0\n\n//根据列信息设置并绑定到列信息展示区域\nfunction _setFileInfo(fileInfo) {\n    mypage.selFiledInfo = fileInfo;\n    if (fileInfo) {\n        //设置通用属性\n        fileInfo.fileInfo = fileInfo.fileInfo || {}\n        fileInfo.events = fileInfo.events || {}\n        var type = (fileInfo.fileInfo && fileInfo.fileInfo.type) || \"txt\";\n        virtualColName.setValue(fileInfo.title || \"\")\n        typeList.setValue(type)\n        colWidthTxt.setValue(fileInfo.width)\n        allowFilt.setValue(fileInfo.allowFilt || false)\n        allowSort.setValue(fileInfo.allowSort || false)\n        allowSort.setValue(fileInfo.allowSort || false)\n        showValue.setValue(fileInfo.showValue || \"\")\n        //statValue.setValue(fileInfo.statValue || \"\")\n        if (fileInfo.statValue && fileInfo.statValue.length > 0) {\n            allowStat.setValue(true) \n            hwDiv10.show();\n            hwDiv6.doLayout();\n        } else {\n            allowStat.setValue(false)\n            hwDiv10.hide();\n            hwDiv6.doLayout();\n        }\n        statValue.setValue(fileInfo.statValue || \"\")\n        //设置显示面板\n        setTypePanel()\n        //设置面板的属性\n        _setFileConfigInfo()\n    }\n}\n//设置默认值，\nfunction _setFileConfigInfo() {\n    var _fileInfo = mypage.selFiledInfo;\n    var _type = typeList.getValue()\n    if (_type == \"txt\") {\n        lineFeedChk.setValue(_fileInfo.fileInfo.lineFeed || false)\n    } else if (_type == \"num\") {} else if (_type == \"date\") {\n        defaultDate.setValue((_fileInfo.fileInfo && _fileInfo.fileInfo.defaultDate) || false)\n        customFormatChk.setValue((_fileInfo.fileInfo && _fileInfo.fileInfo.format) ? true : false)\n        customFormat.setValue((_fileInfo.fileInfo && _fileInfo.fileInfo.format) || \"\")\n    } else if (_type == \"link\") {\n        linktitleTxt.setValue((_fileInfo.fileInfo && _fileInfo.fileInfo.title) || \"\")\n        linkClick.setValue((_fileInfo.events && _fileInfo.events[\"click\"]) || \"\")\n    } else {}\n}\n\n\nfunction customFormatChk_check(sender, checked) {\n    if (!checked) {\n        customFormat.setValue(\"\")\n    }\n}\n\nfunction linkClickDel_click(sender, e) {\n    mypage.selFiledInfo.events.click = \"\"\n    linkClick.setValue(\"\")\n}\n\n\nvar activePropPanel = parent.xds && parent.xds.active.component.propPanel;\n\nfunction linkClick_afterrender(sender) {\n    sender.el.on('dblclick', function() {\n        var simpleGrid_openCodeEditor = parent.simpleGrid_openCodeEditor;\n        simpleGrid_openCodeEditor(sender, mypage.selFiledInfo.colId + '_link_click', sender.getValue(), 'grid,cell,rId,cInd', function() {\n            mypage.selFiledInfo.events.click = linkClick.getValue()\n        });\n    })\n}\n\n\nfunction allowFilt_check(sender, checked) {\n    mypage.selFiledInfo.allowFilt = checked\n}\n\n\nfunction allowStat_check(sender, checked) {\n    if (checked) {\n        hwDiv10.show();\n        hwDiv6.doLayout();\n    } else {\n        hwDiv10.hide();\n        hwDiv6.doLayout();\n    }\n}\n\nfunction _getFieldsInfo() {\n        var _field = {};\n        _field.colId = mypage.selFiledInfo.colId || (\"InvCol_\" + Date.now());\n        _field.title = mypage.selFiledInfo.title||virtualColName.getValue();\n        _field.width = colWidthTxt.getValue();\n        _field.isVirtual=true;\n        allowFilt.getValue() && (_field.allowFilt = true);\n        allowSort.getValue() && (_field.allowSort = true);\n        showValue.getValue() && (_field.showValue = showValue.getValue() );\n        statValue.getValue() && (_field.statValue =statValue.getValue());\n        _field.fileInfo = {};\n        _field.fileInfo.type = typeList.getValue()||\"txt\";\n        if (_field.fileInfo.type == \"txt\") {\n            lineFeedChk.getValue() && (_field.fileInfo.lineFeed = true)\n        }\n        if (_field.fileInfo.type == \"num\") {\n            //mypage.selFiledInfo.fileInfo.lineFeed && _field.fileInfo.lineFeed = mypage.selFiledInfo.fileInfo.lineFeed\n        }\n        if (_field.fileInfo.type == \"link\") {\n            linktitleTxt.getValue() && (_field.fileInfo.title = linktitleTxt.getValue())\n            linkClick.getValue()&&(_field.events ={click:linkClick.getValue()})\n        }\n        if (_field.fileInfo.type == \"date\") {\n            (customFormat.getValue()&&customFormatChk.getValue()) && (_field.fileInfo.format = customFormat.getValue())\n            defaultDate.getValue() && (_field.fileInfo.defaultDate =true)\n        }\n    return _field;\n}\n\nfunction GridvirtualCol_afterrender(sender) {\n\n}\n\nfunction button_click(sender,e){ \n    var editFieldsInfo = mypage.selFiledInfo.showValue;\n    var setBack = function(controller, flag) {\n        if (flag) {\n           mypage.selFiledInfo.showValue=controller;\n           showValue.setValue(controller);\n        }\n        simpleGridCodeEdit.close()\n    }\n    var simpleGridCodeEdit = parent.openSimpleGridCodeEdit(editFieldsInfo, setBack)\n    simpleGridCodeEdit.show()\n    window.simpleGridCodeEdit = simpleGridCodeEdit;\n}\n\nfunction button1_click(sender,e){\n var editFieldsInfo = mypage.selFiledInfo.statValue;\n    var setBack = function(controller, flag) {\n        if (flag) {\n           mypage.selFiledInfo.statValue=controller;\n           statValue.setValue(controller);\n        }\n        simpleGridCodeEdit.close()\n    }\n    var simpleGridCodeEdit = parent.openSimpleGridCodeEdit(editFieldsInfo, setBack)\n    simpleGridCodeEdit.show()\n    window.simpleGridCodeEdit = simpleGridCodeEdit;\n}","vmdcss":"","vmdprops":"\"\"","type":"ux","vmdevents_controller":"","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"setFileInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"setFileInfo\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"fileInfo\",\"code\":\"//直接填写方法内容\\n_setFileInfo(fileInfo)\",\"returnType\":\"\"}},{\"cid\":\"uxmethod\",\"id\":\"getFiledInfo\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getFiledInfo\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"\",\"code\":\"//直接填写方法内容\\nreturn _getFieldsInfo()\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}