{"vmdversion":"2.0.3.0701","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"DataServiceModuleInfo\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"header\":false,\"width\":605,\"height\":590,\"afterrender\":\"DataServiceModuleInfo_afterrender\"},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":30,\"text\":\"模块基础信息\",\"style\":\"color: blue;    font-size: 20px;\"}},{\"cid\":\"label\",\"id\":\"label1\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":90,\"text\":\"模块编码：\"}},{\"cid\":\"label\",\"id\":\"label2\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":130,\"text\":\"模块名称：\"}},{\"cid\":\"label\",\"id\":\"label3\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":170,\"text\":\"创建人：\"}},{\"cid\":\"label\",\"id\":\"label4\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":210,\"text\":\"创建时间：\"}},{\"cid\":\"label\",\"id\":\"label5\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":250,\"text\":\"修改人：\"}},{\"cid\":\"label\",\"id\":\"label6\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":290,\"text\":\"修改时间：\"}},{\"cid\":\"label\",\"id\":\"label7\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":330,\"text\":\"路径：\"}},{\"cid\":\"label\",\"id\":\"label8\",\"layoutConfig\":{},\"userConfig\":{\"x\":60,\"y\":370,\"text\":\"说明：\"}},{\"cid\":\"textfield\",\"id\":\"hwText\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":90,\"width\":450,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"hwText1\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":130,\"width\":450}},{\"cid\":\"textfield\",\"id\":\"hwText2\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":170,\"width\":450,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"hwText3\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":210,\"width\":450,\"readOnly\":false,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"hwText4\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":250,\"width\":450,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"hwText5\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":290,\"width\":450,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"hwText6\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":330,\"width\":450,\"disabled\":true}},{\"cid\":\"textarea\",\"id\":\"hwText7\",\"layoutConfig\":{},\"userConfig\":{\"x\":120,\"y\":370,\"width\":450,\"height\":80,\"id\":\"hwText7\"}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":410,\"y\":470,\"text\":\"保存\",\"size\":\"large\",\"type\":\"info\",\"click\":\"button_click\"}},{\"cid\":\"vmdButton\",\"id\":\"button3\",\"layoutConfig\":{},\"userConfig\":{\"x\":500,\"y\":470,\"text\":\"查看\",\"size\":\"large\",\"type\":\"info\",\"click\":\"button3_click\"}},{\"cid\":\"vmdButton\",\"id\":\"button4\",\"layoutConfig\":{},\"userConfig\":{\"x\":480,\"y\":530,\"width\":80,\"text\":\"测试注册\",\"hidden\":true}}]}]}","vmdevents":"var hwTree;\n\nfunction DataServiceModuleInfo_afterrender(sender) {\n\n}\n\nvar Selprojectid;\nvar selWorkspaceid;\n\nfunction refresh(tree, projectid, workspaceid, changeId) {\n    Selprojectid = projectid;\n    selWorkspaceid = workspaceid;\n    if(!tree) return;\n    hwTree = tree;\n    var tree = hwTree;\n    var newnode = tree.newnode;\n    if(newnode) {\n        hwText.setValue(newGuid(32));\n        hwText1.setValue(\"\");\n        hwText2.setValue(Ext.util.Cookies.get('userName'));\n        hwText3.setValue(Ext.Date.dateFormat(new Date(), 'Y-m-d H:i:s'));\n        hwText4.setValue(\"\");\n        hwText5.setValue(\"\");\n        hwText6.setValue(\"\");\n        hwText7.setValue(\"\");\n    } else {\n        var selId = \"hw\" + tree.getSelectedItemId();\n        var selnode = tree.itemObj[selId];\n        hwText.setValue(selnode.code);\n        hwText1.setValue(selnode.text);\n        hwText2.setValue(selnode.createuser);\n        hwText3.setValue(selnode.createtime);\n        hwText4.setValue(selnode.changeuser);\n        hwText5.setValue(selnode.changetime);\n        hwText6.setValue(\"\");\n        hwText7.setValue(selnode.remark);\n    }\n\n}\n\nfunction button_click(sender, e) {\n    saveModelInfo(function() {\n        Ext.Msg.alert(\"提示\", \"保存成功！\")\n    });\n}\n/*保存前校验\nreturn:boolean  \n*/\nfunction saveCheck() {\n    if(hwText1.getValue() == \"\") {\n        Ext.Msg.alert(\"提示\", \"模块名称不能为空！\")\n        return false;\n    }\n    return true;\n}\n\n//模块保存按钮操作\nfunction saveModelInfo(callback) {\n    var mytree = parent.hwTreeDataService;\n    var selId = mytree.getSelectedItemId();\n    var objKey = \"hw\" + selId;\n    var selnode = mytree.itemObj[objKey];\n\n    var serviceCode = selnode.code; // 模块编码\n    var serviceName = hwText1.getValue(); // 模块名称\n    var serviceRemark = hwText7.getValue(); // 说明\n\n    var urlparam = {\n        host: (vmd.workspace.dataServiceIp || vmdSettings.dataServiceIp),\n        url: \"DataService/Service/Project\"\n    }\n\n    // 更改活动工区状态\n    hwDas.edit(\n        urlparam, {}, {}, [{ // body传参\n            'code': serviceCode,\n            'id': selId,\n            'name': serviceName,\n            'remark': serviceRemark\n        }],\n        function(result) {\n            // 获取数据后解析形成树形节点；\n            if(result == \"\") {\n                return;\n            }\n            if(!result.data) {\n                return;\n            }\n\n            if(result.data.length > 0) {\n                if(result.data[0].datas) {\n                    var serviceName = result.data[0].datas.name;\n                    var serviceId = result.data[0].datas.id;\n\n                    mytree.setItemText(serviceId, serviceName, serviceName);\n                    var treenode = mytree.item(serviceId);\n                    if(treenode) {\n                        treenode.code = result.data[0].datas.code;\n                        treenode.remark = result.data[0].datas.remark;\n                        treenode.builtin = result.data[0].datas.builtin;\n                    }\n                    var objKey = \"hw\" + serviceId;\n                    mytree.itemObj[objKey] = treenode;\n                }\n            }\n        },\n        function(msg) {\n            Ext.Msg.alert(msg);\n            // Ext.Msg.alert(\"提示\", \"保存失败！\");\n        }\n    );\n    \n    // // 模板节点\n    // hwDas.ajax({\n    //     das: {\n    //         idedas: true\n    //     },\n    //     url: \"DataService/Service/Project\",\n    //     // url: \"http://192.168.1.188:8050/DasService/DataService/DataService/Service/Project\",\n    //     type: 'put',\n    //     timeout: 5000,\n    //     data: [{ // body传参\n    //         'code': serviceCode,\n    //         'id': selId,\n    //         'name': serviceName,\n    //         'remark': serviceRemark\n    //     }],\n    //     success: function(result) {\n\n    //         if(result == \"\") {\n    //             return;\n    //         }\n    //         if(!result.data) {\n    //             return;\n    //         }\n\n    //         if(result.data.length > 0) {\n    //             if(result.data[0].datas) {\n    //                 var serviceName = result.data[0].datas.name;\n    //                 var serviceId = result.data[0].datas.id;\n\n    //                 mytree.setItemText(serviceId, serviceName, serviceName);\n    //                 var treenode = mytree.item(serviceId);\n    //                 if(treenode) {\n    //                     treenode.code = result.data[0].datas.code;\n    //                     treenode.remark = result.data[0].datas.remark;\n    //                     treenode.builtin = result.data[0].datas.builtin;\n    //                 }\n    //                 var objKey = \"hw\" + serviceId;\n    //                 mytree.itemObj[objKey] = treenode;\n    //             }\n    //         }\n    //     },\n    //     error: function(msg) {\n    //         Ext.Msg.alert(\"提示\", \"编辑节点失败！\")\n    //     }\n    // })\n}\n\n//自定义自定义方法\n\nfunction newGuid(len) {\n    var length = 32;\n    if(len)\n        length = len - 2\n    var guid = \"\";\n    for(var i = 1; i <= length; i++) {\n        var n = Math.floor(Math.random() * 16.0).toString(16);\n        guid += n;\n    }\n    return \"hw\" + guid;\n}\n\nfunction button3_click(sender, e) {\n    viewDataService();\n}","vmdcss":"","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"refresh\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"refresh\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"\",\"params\":\"tree,projectid,workspaceid\",\"code\":\"//直接填写方法内容\\n\\nrefresh(tree,projectid,workspaceid)\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}"}