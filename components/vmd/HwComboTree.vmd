{"vmdversion":"2.0.4.190717","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"HwComboTree\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"auto\",\"header\":false,\"width\":\"\",\"height\":\"\",\"autoHeight\":false,\"afterrender\":\"HwComboTree_afterrender\"},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"border\":false,\"layout\":\"hbox\",\"width\":200,\"height\":50},\"cn\":[{\"cid\":\"vmdCombo\",\"id\":\"combo\",\"layoutConfig\":{},\"userConfig\":{\"afterrender\":\"combo_afterrender\",\"change\":\"combo_change\"}}]},{\"cid\":\"vmdTreeEx\",\"id\":\"tree\",\"layoutConfig\":{},\"userConfig\":{\"nodeclick\":\"tree_nodeclick\",\"beforeNodeExpand\":\"tree_beforeNodeExpand\",\"beforerender\":\"tree_beforerender\",\"afterrender\":\"tree_afterrender\",\"loadType\":\"全部加载\",\"rootValue\":\"0\",\"rootText\":\"\",\"hideRoot\":true,\"style\":\"z-index: 999;\",\"afterBindData\":\"tree_afterBindData\"}}]}]}","vmdevents":"var page = this;\n\nfunction combo_change(sender, value, text) {\n    \n    page.fireEvent(\"change\", sender, value, text);\n}\n\nfunction combo_afterrender(sender) {\n    \n    combo.setValue = function(val) {\n        this._value = val;\n        tree._setValue();\n    };\n    combo.getValue = function() {\n        return this._value || \"\";\n    };\n    var imgel = combo.el.query(\".dhxcombo_select_img\");\n    vmd(imgel).unbind('click');\n    combo.addClass('combotree');\n    vmd(sender.DOMelem_input).on('focus', function(e) {\n        e.stopPropagation();\n        var pos = combo.el.getRegion();\n\n        //当top+tree高>body的可视化高度，需要body的高度减去tree的高度才可以显示\n        var top = pos.top + 35;\n        var left = pos.left;\n        tree.show();\n\n        if (top + tree.getHeight() >= document.body.clientHeight) {\n            top = top - tree.getHeight() - 35;\n        }\n\n        tree.el.setStyle('border', '1px solid #eee');\n        tree.el.setStyle('position', 'absolute');\n        tree.el.setLeft(left);\n        tree.el.setTop(top);\n    }).on('blur', function() {}).on('keyup', function() {\n        tree.filterBy(combo.getText());\n    });\n    Ext.getDoc().on('click', function(e) {\n        if (vmd(e.target).parents('.combotree').length === 0 && vmd(e.target).parents('.vmd-tree').length === 0) tree.hide();\n    });\n}\n\nfunction tree_nodeclick(sender, node, e) {\n    e.stopPropagation();\n\n    if (!node.hasChildNodes()) {\n        combo.setValue(node.id);\n        combo.setText(node.text);\n        combo._value = node.id;\n        tree.hide();\n    }\n}\n\nfunction tree_beforeNodeExpand(sender, node, deep, anim) {\n    \n    stopPP(sender);\n}\n\nfunction tree_beforerender(sender) {\n    \n    this._setValue = function() {\n        var id = combo._value;\n\n        var node = tree.getNodeById(id);\n        var text = \"\";\n        if (node) {\n            text = node.text;\n            //节点展开\n            tree.expandPath(node.getPath());\n            node.select();\n        }\n\n        combo.setText(text);\n    };\n}\n\nfunction tree_afterrender(sender) {\n    \n    tree.hide();\n}\n\nfunction tree_afterBindData(sender) {\n    \n    tree.expandAll();\n}\n\nfunction HwComboTree_afterrender(sender) {\n    \n    document.body.appendChild(tree.el.dom);\n}","vmdcss":"","vmdprops":"\"\"","type":"ux","vmdevents_controller":"","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxprop\",\"id\":\"treeStore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"treeStore\",\"zhname\":\"数据集\",\"bindCmp\":\"tree\",\"bindValue\":\"store\",\"isPublic\":\"on\",\"desc\":\"数据集\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"parentId\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"parentId\",\"zhname\":\"父节点\",\"bindCmp\":\"tree\",\"bindValue\":\"parentField\",\"isPublic\":\"on\",\"desc\":\"父节点ID\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"storeField\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"treeStore\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"value\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"value\",\"zhname\":\"值\",\"bindCmp\":\"tree\",\"bindValue\":\"valueField\",\"isPublic\":\"on\",\"desc\":\"节点值\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"storeField\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"treeStore\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"text\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"text\",\"zhname\":\"显示文本\",\"bindCmp\":\"tree\",\"bindValue\":\"textField\",\"isPublic\":\"on\",\"desc\":\"显示文本\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"storeField\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"treeStore\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"comboWidth\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"comboWidth\",\"zhname\":\"\",\"bindCmp\":\"combo\",\"bindValue\":\"width\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"vmdCombo\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"treeWidth\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"treeWidth\",\"zhname\":\"\",\"bindCmp\":\"tree\",\"bindValue\":\"width\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"treeHeight\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"treeHeight\",\"zhname\":\"\",\"bindCmp\":\"tree\",\"bindValue\":\"height\",\"isPublic\":\"on\",\"desc\":\"\",\"uxcid\":\"vmdTreeEx\",\"group\":\"\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false}},{\"cid\":\"uxprop\",\"id\":\"comboDivWidth\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"comboDivWidth\",\"desc\":\"\",\"zhname\":\"\",\"isPublic\":\"on\",\"radio_ysqO\":\"string\",\"bindCmp\":\"hwDiv\",\"bindValue\":\"width\",\"uxcid\":\"container\",\"cmptype\":\"string\",\"cmpsettings\":\"{\\\"isMulti\\\":false,\\\"data\\\":\\\"\\\"}\",\"storesource\":\"\",\"storefield_multi\":false}}]},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxmethod\",\"id\":\"getValue\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"getValue\",\"params\":\"\",\"desc\":\"获取下拉树选择框的值\",\"isPublic\":\"on\",\"code\":\"return combo.getValue();\",\"returnType\":\"\"}}]},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"uxevent\",\"id\":\"change\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"change\",\"zhname\":\"\",\"bindCmp\":\"\",\"bindValue\":\"\",\"isPublic\":\"\",\"desc\":\"值改变事件\",\"uxcid\":\"\",\"params\":\"value,text\",\"code\":\"\"}}]}]}","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"controller.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}