{"vmdversion":"2.0.3.0920","vmdlayout":"{\"components\":[{\"cid\":\"uxpanel\",\"id\":\"DutyTaskCompletion\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"header\":false,\"width\":1160,\"height\":380,\"autoScroll\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":\"\",\"y\":\"\",\"height\":380,\"title\":\"当班任务完成情况\",\"afterrender\":\"panel_afterrender\",\"header\":true,\"width\":1150,\"padding\":\"5\",\"layout\":\"auto\"},\"cn\":[{\"cid\":\"grid\",\"id\":\"MyGrid\",\"layoutConfig\":{},\"userConfig\":{\"height\":343,\"hideHeaders\":false,\"header\":false,\"beforerender\":\"MyGrid_beforerender\",\"id\":\"MyGrid\",\"border\":true,\"x\":\"\",\"cls\":\"vmd-grid\",\"width\":1150},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"id\",\"dataIndex\":\"id\",\"align\":\"center\",\"width\":50,\"hidden\":true},\"name\":\"id\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"序号\",\"dataIndex\":\"xh\",\"align\":\"center\",\"width\":50,\"menuDisabled\":true},\"name\":\"xh\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"计划开始时间\",\"dataIndex\":\"jhkssj\",\"align\":\"center\",\"width\":120,\"menuDisabled\":true},\"name\":\"jhkssj\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务类型\",\"dataIndex\":\"rwtype\",\"align\":\"center\",\"css\":\"text-align: left !important;\",\"menuDisabled\":true},\"name\":\"rwtype\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务名称\",\"dataIndex\":\"rwmc\",\"align\":\"center\",\"width\":160,\"css\":\"text-align: left !important;\",\"menuDisabled\":true},\"name\":\"rwmc\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"状态\",\"dataIndex\":\"state\",\"align\":\"center\",\"css\":\"text-align: left !important;\",\"menuDisabled\":true},\"name\":\"state\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"派工人\",\"dataIndex\":\"pgr\",\"align\":\"center\",\"css\":\"text-align: left !important;\",\"menuDisabled\":true},\"name\":\"pgr\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"任务完成时间\",\"dataIndex\":\"rwwcsj\",\"align\":\"center\",\"width\":120,\"menuDisabled\":true},\"name\":\"rwwcsj\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"审核人\",\"dataIndex\":\"shr\",\"align\":\"center\",\"css\":\"text-align: left !important;\",\"menuDisabled\":true},\"name\":\"shr\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"审核时间\",\"dataIndex\":\"shsj\",\"align\":\"center\",\"width\":120,\"menuDisabled\":true},\"name\":\"shsj\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"审核结论\",\"dataIndex\":\"shjl\",\"align\":\"center\",\"width\":150,\"css\":\"text-align: left !important;\",\"menuDisabled\":true},\"name\":\"shjl\"}]}]}]}]}","vmdevents":"var page=this;\nvar dbrwDateList=[];\nvar store1 = new Ext.data.JsonStore({\n    proxy: new Ext.data.MemoryProxy(),\n    fields: [\"id\", \"xh\", \"jhkssj\", \"rwtype\", \"rwmc\",\"state\",\"pgr\",\"rwwcsj\",\"shr\",\"shsj\",\"shjl\"]\n});\nvar ptServer = {\n    ip:'192.168.1.180:6602',\n    callcode:'snqtscdd',\n    userInfo: 'platform/v1/UserManage', //用户信息服务\n    schedule: 'XXHTS/schedule/taskmanager/schedandwo/schedule'\n};\n\n//获取用户信息\nfunction loginInfo() {\n    var hwDao = new HwDao(ptServer.ip, ptServer.callcode); //地址:端口和授权码(服务管理员分配)\n    var url = ptServer.userInfo;\n    hwDao.get(url, {}, {}, function(res) {\n        if(res.data[0].size > 0) {\n            dwdm = res.data[0].datas[0].dwdm;\n            loadData(dwdm);\n        } else {\n            loadData(dwdm);\n        }\n    }, function() {}); /*成功回调函数*/\n}\n\nfunction panel_afterrender(sender){\n  loginInfo();\n}\n\n//加载数据\nfunction loadData(dwcode){\n    var hwDao = new HwDao(ptServer.ip, ptServer.callcode);//地址:端口和授权码(服务管理员分配)\n  var url = ptServer.schedule;\n  hwDao.get(url, {}, {dwdm:dwcode}, function (res) {\n      if (res.isSucceed) {\n         /* var str = JSON.stringify(res.data);\n          debugger*/\n           if(res.data && res.data[0].datas.length > 0) {\n                var data = res.data[0].datas;\n                for(var i = 0; i < data.length; i++) {\n                    var itemObj = {\n                        xh: i + 1,\n                        id: data[i].schedule_id,\n                        jhkssj: data[i].planning_start_date,\n                        rwtype: data[i].schedule_type_name,\n                        rwmc: \"<a href='#' onclick='rwmcLink(this);'>\"+data[i].schedule_name+\"</a>\",\n                        state: data[i].schedule_status,\n                        pgr: data[i].distribute_person,\n                        rwwcsj: data[i].planning_end_date,\n                        shr: data[i].audit_person,\n                        shsj:data[i].audit_date,\n                        shjl: \"正常\"\n                    }\n                    dbrwDateList.push(itemObj);\n                }\n            }\n             store1.loadData(dbrwDateList);\n      } else {\n          alert(res.errMsg);\n      }\n  }, function (res) { alert(res); });\n}\n\nwindow.rwmcLink=function(id){\n    var tr = $(id).closest('tr'), id = tr.find('td')[0].innerText;\n}\n\nfunction MyGrid_beforerender(sender){\nthis.store=store1;\n}\nwindow.rwmcLink=function(id){\n    var tr = $(id).closest('tr'), id = tr.find('td')[0].innerText;\n}","vmdcss":".x-grid3-hd-row td {\r\n    line-height: 15px;\r\n    vertical-align: middle;\r\n    border-left: 0px solid;\r\n     border-right: 0px solid;\r\n     border: 1px solid #e4e4e4;\r\n}\r\n\r\n.x-grid3-scroller {\r\n    overflow-x: hidden;\r\n}\r\n/* =========================================== Grid Panel =========================================== */\r\n/* 表格左右间距 */\r\n.vmd-grid {\r\n    padding-left: 5px;\r\n    padding-right: 5px;\r\n}\r\n\r\n/* 表格线样式兼容 */\r\n.vmd-grid table {\r\n    border-collapse: collapse;\r\n}\r\n\r\n/* 表头背景色 */\r\n.vmd-grid .x-grid3-header {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-hd-over .x-grid3-hd-inner {\r\n    background-color: #f7f7f7;\r\n}\r\n\r\n/* 表头错位兼容 */\r\n.vmd-grid .x-grid3-header-offset {\r\n    padding: 0;\r\n}\r\n\r\n/* 表头单元格 */\r\n.vmd-grid .x-grid3-header td {\r\n    border: 1px solid #e3e2e8;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体单元格 */\r\n.vmd-grid .x-grid3-body td {\r\n    border: 1px solid #e3e2e8;\r\n    border-top-width: 0;\r\n    padding: 0;\r\n    font-size: 14px;\r\n}\r\n\r\n/* 表体行 */\r\n.vmd-grid .x-grid3-row {\r\n    border: none;\r\n}\r\n\r\n/* 表体行鼠标悬停背景色 */\r\n.vmd-grid .x-grid3-row-over {\r\n    background-color: white;\r\n}\r\n\r\n/* 表体行选中背景色 */\r\n.vmd-grid .x-grid3-row-selected {\r\n    background-color: #F5F7FC !important;\r\n}\r\n\r\n/* =========================================== Grid Panel =========================================== */\r\n","vmdprops":"\"\"","type":"ux","vmdinterface":"{\"components\":[{\"cid\":\"vmduxprops\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxmethods\",\"id\":\"方法\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmduxevents\",\"id\":\"事件\",\"layoutConfig\":{},\"userConfig\":{}}]}"}