{"vmdversion":"2.0.3.20190219","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"height\":500,\"width\":500,\"style\":\"background-color: white;\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"MyPanel3\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"west\",\"width\":204,\"title\":\"West\",\"layout\":\"fit\",\"border\":true,\"header\":false,\"margins\":\"5 \",\"style\":\"\",\"bodyStyle\":\"background-color: white\"},\"cn\":[{\"cid\":\"vmd.ux.ZyglServerList\",\"id\":\"ZyglServerList\",\"layoutConfig\":{},\"userConfig\":{\"serverListStore\":\"liststore\",\"store\":\"liststore\",\"style\":\"border:1px;\",\"width\":189,\"serverClick\":\"ZyglServerList_serverClick\",\"addServerConfig\":\"ZyglServerList_addServerConfig\",\"delServerConfig\":\"ZyglServerList_delServerConfig\",\"region\":\"north\",\"height\":352}}]},{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"header\":false,\"border\":false,\"margins\":\"5\",\"layout\":\"anchor\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"border\":true,\"header\":false,\"region\":\"north\",\"height\":37,\"style\":\"border-bottom: 5px;    border-bottom-color: #20a0ff;\",\"layout\":\"absolute\",\"x\":0,\"y\":0},\"cn\":[{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"width\":104,\"height\":35,\"style\":\"background-color: #20a0ff\",\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"基础信息\",\"style\":\"color: white;    font-size: 15px;\",\"x\":15,\"y\":7}}]}]},{\"cid\":\"panel\",\"id\":\"panel3\",\"layoutConfig\":{},\"userConfig\":{\"border\":false,\"header\":false,\"height\":2,\"bodyStyle\":\"background-color: #20a0ff\"}},{\"cid\":\"panel\",\"id\":\"panel2\",\"layoutConfig\":{},\"userConfig\":{\"border\":false,\"header\":false,\"region\":\"center\",\"layout\":\"absolute\",\"anchor\":\"100% -40\"},\"cn\":[{\"cid\":\"label\",\"id\":\"label1\",\"layoutConfig\":{},\"userConfig\":{\"height\":20,\"x\":66,\"y\":20,\"text\":\"名称：\"}},{\"cid\":\"label\",\"id\":\"label2\",\"layoutConfig\":{},\"userConfig\":{\"x\":30,\"y\":60,\"text\":\"服务器地址：\"}},{\"cid\":\"label\",\"id\":\"label3\",\"layoutConfig\":{},\"userConfig\":{\"x\":66,\"y\":100,\"text\":\"端口：\"}},{\"cid\":\"label\",\"id\":\"label4\",\"layoutConfig\":{},\"userConfig\":{\"x\":42,\"y\":140,\"text\":\"创建时间：\"}},{\"cid\":\"label\",\"id\":\"label5\",\"layoutConfig\":{},\"userConfig\":{\"x\":42,\"y\":180,\"text\":\"修改时间：\"}},{\"cid\":\"label\",\"id\":\"label6\",\"layoutConfig\":{},\"userConfig\":{\"x\":66,\"y\":220,\"text\":\"说明：\",\"height\":20}},{\"cid\":\"textfield\",\"id\":\"t_name\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":15,\"width\":290,\"id\":\"t_name\",\"emptyText\":\"请输入名称\"}},{\"cid\":\"textfield\",\"id\":\"t_serverIp\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":55,\"width\":290,\"id\":\"t_serverIp\",\"emptyText\":\"请输入服务器地址\",\"beforerender\":\"t_serverIp_beforerender\"}},{\"cid\":\"textfield\",\"id\":\"t_port\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":95,\"width\":290,\"id\":\"t_port\",\"afterrender\":\"t_port_afterrender\",\"beforerender\":\"t_port_beforerender\"}},{\"cid\":\"textfield\",\"id\":\"t_creat\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":135,\"width\":290,\"id\":\"t_creat\",\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"t_change\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":175,\"width\":290,\"id\":\"t_change\",\"disabled\":true}},{\"cid\":\"textarea\",\"id\":\"t_remark\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":220,\"width\":290,\"height\":90,\"id\":\"t_remark\"}},{\"cid\":\"vmdButton\",\"id\":\"btn_save\",\"layoutConfig\":{},\"userConfig\":{\"x\":260,\"y\":330,\"text\":\"保存\",\"type\":\"primary\",\"width\":60,\"id\":\"btn_save\",\"click\":\"btn_save_click\"}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":340,\"y\":330,\"width\":60,\"text\":\"关闭\",\"click\":\"button_click\"}}]}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdJsonStore\",\"id\":\"liststore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"liststore\",\"storeConfig\":\"{\\\"id\\\":\\\"TBsf2M8hEi\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"zyzx/zyzxtree/getServer\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"获取服务器\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"server_id\\\",\\\"value1\\\":\\\"\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"server_id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"ip\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"port\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"remark\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"row_created_date\\\",\\\"type\\\":\\\"datetime\\\"},{\\\"name\\\":\\\"row_changed_date\\\",\\\"type\\\":\\\"datetime\\\"}]}\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"server_id\"},\"name\":\"server_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"ip\"},\"name\":\"ip\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"port\"},\"name\":\"port\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"remark\"},\"name\":\"remark\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"row_created_date\"},\"name\":\"row_created_date\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"row_changed_date\"},\"name\":\"row_changed_date\"}]}]},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdVariable\",\"id\":\"selServerId\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"selServerId\"}}]},{\"cid\":\"vmdsubviewport\",\"id\":\"SubView_Window\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"function ZyglServerList_serverClick(sender, index, node, e) {\n\n    var selServerData = ZyglServerList.getSelServerData();\n    if(selServerData) {\n        if(selServerData.server_id == \"0000000001\") {\n            t_name.setDisabled(true);\n            t_serverIp.setDisabled(true);\n            t_port.setDisabled(true);\n            t_remark.setDisabled(true);\n        } else {\n            t_name.setDisabled(false);\n            t_serverIp.setDisabled(false);\n            t_port.setDisabled(false);\n            t_remark.setDisabled(false);\n        }\n        selServerId.setValue(selServerData.server_id);\n        t_name.setValue(selServerData.name);\n        t_serverIp.setValue(selServerData.ip);\n        t_port.setValue(selServerData.port);\n        t_creat.setValue(selServerData.row_created_date);\n        t_change.setValue(selServerData.row_changed_date);\n        t_remark.setValue(selServerData.remark);\n    }\n}\n\nfunction ZyglServerList_addServerConfig(sender, e) {\n    selServerId.setValue(vmd.util.guid());\n    t_name.setValue(\"新建服务器\");\n    t_serverIp.setValue(\"\");\n    t_port.setValue(\"\");\n    t_creat.setValue(\"\");\n    t_change.setValue(\"\");\n    t_remark.setValue(\"\");\n}\n\nfunction btn_save_click(sender, e) {\n    hwDas.save(\"zyzx/zyzxtree/getServer\", {}, {}, {\n        server_id: selServerId.getValue(),\n        name: t_name.getValue(),\n        server_ip: t_serverIp.getValue(),\n        port: t_port.getValue(),\n        remark: t_remark.getValue()\n    }, function() {\n        Tips.tips(\"保存成功\", \"success\");\n        liststore.toRefresh();\n    }, function(msg) {\n        Tips.tips(\"保存失败\", \"success\");\n    })\n}\n\nfunction ZyglServerList_delServerConfig(sender) {\n    hwDas.del(\"zyzx/zyzxtree/getServer\", {}, {\n        server_id: selServerId.getValue()\n    }, function() {\n        Tips.tips(\"保存成功\", \"success\");\n        liststore.toRefresh();\n    }, function(msg) {\n        Tips.tips(\"保存失败\", \"success\");\n    })\n}\n\nfunction t_port_afterrender(sender) {}\n\nfunction t_port_beforerender(sender) {\n    t_port.regex = /^[0-9]*$/;\n    t_port.regexText = \"端口必须为空或数字\";\n}\n\nfunction t_serverIp_beforerender(sender) {\n    var strRegex = '^(([0-9a-z_!~*().&=+$%-]+: )?[0-9a-z_!~*().&=+$%-]+@)?' //ftp的user@\n        +\n        '(([0-9]{1,3}.){3}[0-9]{1,3}' // IP形式的URL- 199.194.52.184\n        +\n        '|' // 允许IP和DOMAIN（域名）\n        +\n        '([0-9a-z_!~*()-]+.)*' // 域名- www.\n        +\n        '([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].' // 二级域名\n        +\n        '[a-z]{2,6})' // first level domain- .com or .museum\n        //+ '(:[0-9]{1,4})?' // 端口- :80\n        +\n        '((/?)|' // a slash isn't required if there is no file name\n        +\n        \"(/[0-9a-z_!~*().;?:@&=+$,%#-]+)+/?)$\";\n\n    t_serverIp.regex = new RegExp(strRegex)\n    // t_serverIp.regex = /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?$/;\n    //t_serverIp.regex = /^((ht|f)tps?):\\/\\/[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?$/;\n    t_serverIp.regexText = \"输入标准的服务器地址！无需输入‘http://’和端口\";\n}\n\nfunction button_click(sender, e) {\n    if(parent && parent.serverEditWin) {\n        parent.serverEditWin.close()\n    }\n}","vmdcss":"","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}