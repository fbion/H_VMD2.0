{"vmdversion":"vmd2.0.5.191228","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"afterrender\":\"MyViewport_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"MyPanel_head\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"height\":60,\"layout\":\"border\",\"bodyStyle\":\"background-color:skyblue;\",\"region\":\"north\",\"id\":\"MyPanel_head\",\"header\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"MyPanel_logo\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"west\",\"layout\":\"border\",\"width\":500,\"maskDisabled\":true,\"border\":false,\"bodyStyle\":\"background-color:#1e7fff;\",\"id\":\"MyPanel_logo\",\"header\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"MyC_Logoimg\",\"layoutConfig\":{},\"userConfig\":{\"width\":83,\"height\":25,\"style\":\"margin-left: 20px;\",\"x\":0,\"y\":0,\"region\":\"west\",\"id\":\"MyC_Logoimg\",\"backgroundImage\":\"/system/modules/eQ9ULgcVb1/img/resourceLogowhite.png\",\"backgroundPosition\":\"center center\",\"disableImage\":false,\"backgroundRepeat\":\"no-repeat\",\"hideMode\":\"offsets\",\"border\":false}},{\"cid\":\"container\",\"id\":\"div4\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"border\":false,\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"label\",\"id\":\"MyLb_name\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":-6,\"text\":\"资源管理\",\"style\":\"font-size: 26px;    color: #ffffff;    margin-left: 20px;    margin-top: 10px;\",\"region\":\"center\",\"split\":false,\"cls\":\"lineHeight200\",\"id\":\"MyLb_name\"}},{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"x\":130,\"y\":30,\"height\":20,\"text\":\"V1.0.1\",\"style\":\"color: #fff;\"}}]}]},{\"cid\":\"panel\",\"id\":\"MyP_Htool\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"end\",\"scrollOffset\":30},\"userConfig\":{\"region\":\"east\",\"width\":450,\"layout\":\"hbox\",\"border\":false,\"style\":\"background-color:skyblue;\",\"bodyStyle\":\"background-color:#1e7fff;\",\"id\":\"MyP_Htool\",\"header\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"div5\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":25,\"width\":20,\"height\":20,\"border\":false,\"afterrender\":\"div5_afterrender\",\"backgroundImage\":\"/system/modules/eQ9ULgcVb1/img/server.png\",\"disableImage\":false}},{\"cid\":\"label\",\"id\":\"label1\",\"layoutConfig\":{},\"userConfig\":{\"x\":30,\"y\":27,\"text\":\"资源中心服务器\",\"style\":\"color: white;    font-size: 12px;    color: #ffffff;\",\"afterrender\":\"label1_afterrender\",\"height\":\"\",\"width\":100,\"autoWidth\":true,\"autoHeight\":false,\"cls\":\"hand\"}},{\"cid\":\"container\",\"id\":\"MyC_hjbl\",\"layoutConfig\":{},\"userConfig\":{\"x\":150,\"y\":25,\"width\":20,\"style\":\"background-image: url(/system/img/main/hjbl.png);\",\"height\":20,\"id\":\"MyC_hjbl\",\"border\":false,\"afterrender\":\"MyC_hjbl_afterrender\"}},{\"cid\":\"label\",\"id\":\"MyLb_hjbl\",\"layoutConfig\":{},\"userConfig\":{\"x\":180,\"y\":27,\"text\":\"服务器配置\",\"id\":\"MyLb_hjbl\",\"style\":\"color: white;    font-size: 12px;    color: #ffffff;\",\"afterrender\":\"MyLb_hjbl_afterrender\",\"margins\":\"0 10 0 0\",\"hidden\":false,\"cls\":\"hand\"}},{\"cid\":\"container\",\"id\":\"MyC_grxx\",\"layoutConfig\":{},\"userConfig\":{\"x\":260,\"y\":25,\"width\":20,\"style\":\"background-image: url(/system/img/main/grxx.png);\",\"height\":20,\"id\":\"MyC_grxx\",\"border\":false,\"hidden\":false,\"disabled\":true}},{\"cid\":\"label\",\"id\":\"MyLb_grxx\",\"layoutConfig\":{},\"userConfig\":{\"x\":290,\"y\":27,\"text\":\"个人信息\",\"id\":\"MyLb_grxx\",\"style\":\"color: white;    font-size: 12px;    color: #ffffff;\",\"width\":60,\"hidden\":false,\"disabled\":true}},{\"cid\":\"container\",\"id\":\"MyC_tc\",\"layoutConfig\":{},\"userConfig\":{\"x\":365,\"y\":25,\"width\":20,\"style\":\"background-image: url(/system/img/main/tc.png);\",\"height\":20,\"id\":\"MyC_tc\",\"border\":false,\"hidden\":false,\"disabled\":true}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":375,\"y\":22,\"type\":\"text\",\"width\":39,\"style\":\"font-size: 12px;    color: #ffffff;\",\"text\":\"退出\",\"hidden\":false,\"disabled\":true}}]},{\"cid\":\"panel\",\"id\":\"MyPanel7\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"border\":false,\"style\":\"background-color: #1e7fff;\",\"bodyStyle\":\"background-color:#1e7fff;\",\"header\":false,\"width\":175}}]},{\"cid\":\"panel\",\"id\":\"MyP_info\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":60,\"height\":640,\"layout\":\"border\",\"region\":\"center\",\"id\":\"MyP_info\",\"header\":false},\"cn\":[{\"cid\":\"panel\",\"id\":\"MyP_ModelTree\",\"layoutConfig\":{},\"userConfig\":{\"width\":220,\"height\":639,\"layout\":\"fit\",\"x\":0,\"y\":0,\"region\":\"west\",\"id\":\"MyP_ModelTree\",\"header\":false,\"style\":\"background-color: white;    border: 1px;\",\"bodyStyle\":\"background-color: white;    border: 1px;\",\"split\":true,\"floatable\":false,\"collapseMode\":\"mini\",\"collapsible\":false,\"border\":true},\"cn\":[{\"cid\":\"container\",\"id\":\"div6\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\"},\"cn\":[{\"cid\":\"vmd.ux.ZyglTree\",\"id\":\"ZyglTree\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"treemenu\":\"hwMenu\",\"store\":\"store\",\"onBeforeShowMenu\":\"ZyglTree_onBeforeShowMenu\",\"onAfterShowMenu\":\"ZyglTree_onAfterShowMenu\",\"resourceNodeClick\":\"ZyglTree_resourceNodeClick\",\"homeClick\":\"ZyglTree_homeClick\",\"creatCategory\":\"ZyglTree_creatCategory\",\"refreshTree\":\"ZyglTree_refreshTree\",\"afterCategoryBind\":\"ZyglTree_afterCategoryBind\",\"creatFile\":\"ZyglTree_creatFile\",\"treeRootText\":\"资源中心服务器\"}}]}]},{\"cid\":\"panel\",\"id\":\"MyP_jcxx\",\"layoutConfig\":{},\"userConfig\":{\"width\":900,\"x\":220,\"y\":0,\"height\":640,\"layout\":\"border\",\"region\":\"center\",\"id\":\"MyP_jcxx\",\"header\":false,\"style\":\"background-color: white;    border: 1px;\",\"bodyStyle\":\"background-color: white;    border: 1px;\",\"border\":true},\"cn\":[{\"cid\":\"container\",\"id\":\"div2\",\"layoutConfig\":{},\"userConfig\":{\"x\":100,\"y\":20,\"region\":\"north\",\"style\":\"border-bottom: 0\",\"height\":35,\"border\":true,\"layout\":\"border\"},\"cn\":[{\"cid\":\"container\",\"id\":\"div1\",\"layoutConfig\":{},\"userConfig\":{\"height\":35,\"region\":\"center\",\"border\":false,\"layout\":\"fit\"},\"cn\":[{\"cid\":\"vmd.ux.Navigation\",\"id\":\"Navigation\",\"layoutConfig\":{},\"userConfig\":{\"height\":28,\"style\":\"margin-left: 10px;    margin-top: 3px;    padding-bottom: 4px\",\"width\":\"\",\"homeClick\":\"Navigation_homeClick\",\"pathClick\":\"Navigation_pathClick\",\"afterrender\":\"Navigation_afterrender\"}}]},{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"start\"},\"userConfig\":{\"layout\":\"hbox\",\"height\":35,\"region\":\"east\",\"width\":300,\"border\":false,\"style\":\"margin-left: 10px\"},\"cn\":[{\"cid\":\"vmd.ux.ZyflSearch\",\"id\":\"ZyflSearch\",\"layoutConfig\":{},\"userConfig\":{\"height\":28,\"disabled\":false,\"style\":\"margin-left: 15px\",\"width\":200,\"seaechTextChange\":\"ZyflSearch_seaechTextChange\",\"searchTextChange\":\"ZyflSearch_searchTextChange\"}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"size\":\"small\",\"width\":28,\"height\":28,\"text\":\"\",\"click\":\"button1_click\",\"cls\":\"list-view list-view-sel\",\"iconcls\":\"\"}},{\"cid\":\"vmdButton\",\"id\":\"btn_list\",\"layoutConfig\":{},\"userConfig\":{\"size\":\"small\",\"width\":28,\"height\":28,\"text\":\"\",\"click\":\"btn_list_click\",\"cls\":\"list-list\",\"iconcls\":\"\",\"id\":\"btn_list\"}}]}]},{\"cid\":\"container\",\"id\":\"div3\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"border\":true,\"layout\":\"fit\"},\"cn\":[{\"cid\":\"vmd.ux.ZyglList\",\"id\":\"ZyglList\",\"layoutConfig\":{},\"userConfig\":{\"store\":\"liststore\",\"listDbClick\":\"ZyglList_listDbClick\",\"tpl\":\"<tpl for=\\\".\\\">\\n    <div class=\\\"file undefined file-box menu-file is{type}\\\" original-name=\\\"{name}\\\" title=\\\"名称:{name};大小:{size}B;位置:{path};修改时间:{modifyTime}\\\" data-size=\\\"221\\\">\\n        <div class=\\\"item-select\\\">\\n            <div class=\\\"item-check\\\"></div>\\n        </div>\\n        <div class=\\\"item-menu\\\">\\n            <div class=\\\"cert\\\"></div>\\n        </div>\\n        <div class=\\\"ico\\\" filetype=\\\"{type}\\\"><i class=\\\"x-item-file x-{ext}\\\"></i></div>\\n        <div class=\\\"filename\\\"> <span class=\\\"title db-click-rename\\\" title=\\\"双击名称重命名\\\">{name}\\t</span> </div>\\n    </div>\\n</tpl>\",\"hidden\":false,\"afterrender\":\"ZyglList_afterrender\",\"contextmenu\":\"ZyglList_contextmenu\",\"rename\":\"ZyglList_rename\"}}]}]}]},{\"cid\":\"vmdMenu\",\"id\":\"hwMenu2\",\"layoutConfig\":{},\"userConfig\":{\"click\":\"hwMenu2_click\",\"region\":\"west\"}},{\"cid\":\"vmdMenu\",\"id\":\"hwMenu\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"west\",\"hidden\":true,\"floating\":true,\"disabled\":false,\"click\":\"hwMenu_click\"},\"cn\":[{\"cid\":\"vmdMenuItem\",\"id\":\"refreshItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"刷新树目录\",\"hidden\":false,\"cls\":\"\",\"iconCls\":\"icon-refresh\",\"id\":\"refreshItem\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"copyItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"复制\",\"hidden\":false,\"iconCls\":\"icon-cloud-copy\",\"id\":\"copyItem\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"cutItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"剪切\",\"hidden\":false,\"id\":\"cutItem\",\"iconCls\":\"icon-cloud-cut\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"pasteItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"粘帖\",\"iconCls\":\"icon-cloud-paste\",\"id\":\"pasteItem\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"renameItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"重命名\",\"id\":\"renameItem\",\"iconCls\":\"icon-cloud-rname\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"removeItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"删除\",\"id\":\"removeItem\",\"iconCls\":\"icon-cloud-remove\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"newFileItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"新建文件\",\"iconCls\":\"icon-cloud-newfile\",\"id\":\"newFileItem\"},\"cn\":[{\"cid\":\"vmdMenu\",\"id\":\"hwMenu1\",\"layoutConfig\":{},\"userConfig\":{\"click\":\"hwMenu1_click\"},\"cn\":[{\"cid\":\"vmdMenuItem\",\"id\":\"jsItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"js文件\",\"hidden\":false,\"id\":\"jsItem\",\"iconCls\":\"icon-cloud-js\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"htmlItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"html文件\",\"hidden\":false,\"id\":\"htmlItem\",\"iconCls\":\"icon-cloud-html\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"cssItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"css文件\",\"hidden\":false,\"id\":\"cssItem\",\"iconCls\":\"icon-cloud-css\"}}]}]},{\"cid\":\"vmdMenuItem\",\"id\":\"newFordItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"新建文件夹\",\"id\":\"newFordItem\",\"iconCls\":\"icon-cloud-newfolder\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"searchItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"文件夹中搜索\",\"id\":\"searchItem\",\"iconCls\":\"icon-cloud-search\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"uploadItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"文件上传\",\"iconCls\":\"icon-cloud-upload\",\"id\":\"uploadItem\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"uploadFolder\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"uploadFolder\",\"text\":\"上传文件夹\",\"icon\":\"icon-folder-open\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"downItem\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"downItem\",\"text\":\"下载\",\"iconCls\":\"icon-cloud-download\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"infoItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"属性\",\"iconCls\":\"icon-cloud-info\",\"id\":\"infoItem\",\"icon\":\"icon-info\"}}]},{\"cid\":\"vmd.ux.Uploader\",\"id\":\"Uploader\",\"layoutConfig\":{},\"userConfig\":{\"hidden\":true,\"region\":\"east\"}}]},{\"cid\":\"vmddataset\",\"id\":\"数据\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdJsonStore\",\"id\":\"store\",\"layoutConfig\":{},\"userConfig\":{\"storeConfig\":\"{\\\"id\\\":\\\"Tv3lpnpaBV\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"zyzx/zyzxtree/zycategorytree\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"资源分类树\\\",\\\"getMethods\\\":[],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"category_id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"parent_id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"type\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"leaf\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"path\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"info\\\",\\\"type\\\":\\\"string\\\"}]}\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"category_id\"},\"name\":\"category_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"parent_id\"},\"name\":\"parent_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"type\"},\"name\":\"type\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"leaf\"},\"name\":\"leaf\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"path\"},\"name\":\"path\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"info\"},\"name\":\"info\"}]},{\"cid\":\"vmdJsonStore\",\"id\":\"liststore\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"east\",\"id\":\"liststore\",\"storeConfig\":\"{\\\"id\\\":\\\"TxnFNuKnTM\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"zyzx/zyzxtree/getResource\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"获取分类下资源\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"category_id\\\",\\\"value1\\\":\\\"return selnodeID.getValue()\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"path\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"type\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"ext\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"size\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"modifytime\\\",\\\"type\\\":\\\"datetime\\\"},{\\\"name\\\":\\\"isparent\\\",\\\"type\\\":\\\"string\\\"}]}\",\"autoLoad\":false},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"id\"},\"name\":\"id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"path\"},\"name\":\"path\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"type\"},\"name\":\"type\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"ext\"},\"name\":\"ext\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"size\"},\"name\":\"size\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"modifytime\"},\"name\":\"modifytime\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"isparent\"},\"name\":\"isparent\"}]},{\"cid\":\"vmdJsonStore\",\"id\":\"serverstore\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"serverstore\",\"storeConfig\":\"{\\\"id\\\":\\\"TBsf2M8hEi\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"zyzx/zyzxtree/getServer\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"获取服务器\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"server_id\\\",\\\"value1\\\":\\\"\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"server_id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"ip\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"port\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"remark\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"row_created_date\\\",\\\"type\\\":\\\"datetime\\\"},{\\\"name\\\":\\\"row_changed_date\\\",\\\"type\\\":\\\"datetime\\\"}]}\",\"load\":\"serverstore_load\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"server_id\"},\"name\":\"server_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"ip\"},\"name\":\"ip\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"port\"},\"name\":\"port\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"remark\"},\"name\":\"remark\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"row_created_date\"},\"name\":\"row_created_date\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"row_changed_date\"},\"name\":\"row_changed_date\"}]}]},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdVariable\",\"id\":\"selnodeID\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"selnodeID\"}},{\"cid\":\"vmdVariable\",\"id\":\"selServerID\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"selServerID\"}},{\"cid\":\"vmdVariable\",\"id\":\"menuObjName\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"menuObjName\"}},{\"cid\":\"vmdVariable\",\"id\":\"zyzxVPath\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"zyzxVPath\",\"value\":\"return vmdSettings.resourceCode;\"}},{\"cid\":\"vmdVariable\",\"id\":\"selServerUrl\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"selServerUrl\"}}]},{\"cid\":\"vmdsubviewport\",\"id\":\"SubView_Window\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"if (typeof(Element.onselectstart) != \"undefined\") {\r\n    // IE下禁止元素被选取        \r\n    Element.onselectstart = new Function(\"return false\");\r\n} else {\r\n    // firefox下禁止元素被选取的变通办法        \r\n    Element.onmousedown = new Function(\"return false\");\r\n    Element.onmouseup = new Function(\"return true\");\r\n}\r\n\r\n///menuObjName  1  树节点弹出菜单   0 列表弹出菜单;\r\n///\r\n///\r\nvar hwdasFileServer;\r\n/*\r\nfunction send() {\r\n    var validData = [];\r\n    var data = \"\";\r\n    var selectedRecords = ZyglList.dataView.getSelectedRecords();\r\n    selectedRecords.forEach(function(data) {\r\n        var type = data.data.type;\r\n        var ext = data.data.ext;\r\n        var validExt = ['css', 'js', 'jpg', 'gif', 'png'];\r\n        var path = data.data.path;\r\n        if(type == 'file' && validExt.indexOf(ext) != -1) {\r\n            var info = {\r\n                ip: 'http://www.hanweikeji.com:8000/zyzx',\r\n                path: path,\r\n                servName: '资源管理中心',\r\n                ext: ext\r\n            }\r\n            validData.push(info);\r\n        }\r\n    })\r\n    data = Ext.encode(validData);\r\n    parent.postMessage && parent.postMessage(data, '*'); // 触发父页面的message事件\r\n}\r\n*/\r\nfunction ZyglTree_onAfterShowMenu(sender, node, e) {\r\n    selnodeID.setValue(ZyglTree.getSelNodeId());\r\n    menuObjName.setValue(\"1\");\r\n    ZyglTree_resourceNodeClick(sender, node, e)\r\n}\r\n//树的右键菜单控制\r\nfunction ZyglTree_onBeforeShowMenu(sender, node, e) {\r\n    //首先判断节点是否为根节点  根节点为服务器，部分功能禁用\r\n    if (node && node.getDepth() <= 0) {\r\n        refreshItem.setVisible(true);\r\n        copyItem.setVisible(false);\r\n        cutItem.setVisible(false);\r\n        pasteItem.setVisible(false);\r\n        renameItem.setVisible(false);\r\n        removeItem.setVisible(false);\r\n        newFileItem.setVisible(false);\r\n        newFordItem.setVisible(true);\r\n        searchItem.setVisible(true);\r\n        uploadItem.setVisible(false);\r\n        uploadFolder.setVisible(false);\r\n        downItem.setVisible(false);\r\n        infoItem.setVisible(false);\r\n    } else if (node) {\r\n        refreshItem.setVisible(false);\r\n        copyItem.setVisible(false);\r\n        cutItem.setVisible(false);\r\n        pasteItem.setVisible(true);\r\n        renameItem.setVisible(true);\r\n        removeItem.setVisible(true);\r\n        newFileItem.setVisible(true);\r\n        newFordItem.setVisible(true);\r\n        searchItem.setVisible(true);\r\n        uploadItem.setVisible(true);\r\n        uploadFolder.setVisible(true);\r\n        downItem.setVisible(false);\r\n        infoItem.setVisible(false);\r\n    }\r\n}\r\n//菜单点击事件的处理\r\nfunction hwMenu_click(sender, menuItem, e) {\r\n    var itemid = menuItem.id;\r\n    switch (itemid) {\r\n        case \"newFordItem\":\r\n            {\r\n                addNewFord();\r\n                break;\r\n            }\r\n        case \"refreshItem\":\r\n            {\r\n                store.toRefresh();\r\n                break;\r\n            }\r\n        case \"uploadItem\":\r\n            {\r\n                var selnodePath = ZyglTree.getSelNodepath();\r\n                if (selnodePath)\r\n                    Uploader.disableDirUpload();\r\n                upLoadFile(selnodePath);\r\n                break;\r\n            }\r\n        case \"uploadFolder\":\r\n            {\r\n                var selnodePath = ZyglTree.getSelNodepath();\r\n                if (selnodePath) {\r\n                    //upLoadFile(selnodePath);\r\n                    if (Ext.isIE) {\r\n                        vmd.alert('提示', 'IE浏览器不支持文件夹上传！')\r\n                        return\r\n                    }\r\n                    //上传支持文件夹\r\n                    Uploader.enableDirUpload();\r\n                    //private\r\n                    _uploadfolder(selnodePath)\r\n\r\n                }\r\n                break;\r\n            }\r\n        case \"removeItem\":\r\n            {\r\n                removeResource();\r\n                break;\r\n            }\r\n        case \"renameItem\":\r\n            {\r\n                rename();\r\n                break;\r\n            }\r\n        case \"downItem\":\r\n            {\r\n                downLoad();\r\n                break;\r\n            }\r\n        case \"copyItem\":\r\n            {\r\n                copyFileItem();\r\n                break;\r\n            }\r\n        case \"cutItem\":\r\n            {\r\n                cutFileItem();\r\n                break;\r\n            }\r\n        case \"pasteItem\":\r\n            {\r\n                pasteFile();\r\n                break;\r\n            }\r\n    }\r\n}\r\n//文件夹上传 rootpath 上传根路径\r\nfunction _uploadfolder(rootpath) {\r\n\r\n    var uploader = Uploader.getUploader();\r\n    var uploaderwin = new vmd.window({\r\n        items: Uploader,\r\n        auto: false,\r\n        height: 500,\r\n        width: 655,\r\n        maximizable: false,\r\n        resizable: false,\r\n        closeAction: 'hide',\r\n        title: \"文件上传\"\r\n    })\r\n\r\n    Uploader.show()\r\n    uploaderwin.show();\r\n    uploaderwin.hide(); //上传接口\r\n    uploader.upload(selServerUrl.getValue(), rootpath, uploaderwin, function(fileList) {\r\n        //上传成功回调\r\n        var saveDate = [];//需要提交的文件数据\r\n        var saveCategoryDate = [];//需要提交的文件夹数据\r\n        var filePathList = [] //记录所有的路径\r\n        var Pathandparpath = [] //记录路径和上级路径\r\n        var fileandpath = [];//文件和路径\r\n        var pathAndId = []//文件和id\r\n        //获取上传返回的路径\r\n        for (var i = 0; i < fileList.length; i++) {\r\n            var selNodeName = ZyglTree.getSelCartery().text\r\n            var filename = fileList[i].url.trim();\r\n            var filepath = filename.substr(0, filename.lastIndexOf('/'));\r\n            fileandpath.push({\r\n                filename: filename,\r\n                filepath: filepath\r\n            })\r\n            var fileNameList = filepath.split(\"/\"); //拆分路径的列表\r\n            var filepath1 = \"\"\r\n            var ppath = \"\"\r\n            for (var j = 0; j < fileNameList.length; j++) {\r\n                if (fileNameList[j] == selNodeName)\r\n                    filepath1 = selNodeName\r\n                else\r\n                    filepath1 += \"/\" + fileNameList[j]\r\n                if (filePathList.indexOf(filepath1) == -1) {\r\n                    filePathList.push(filepath1);\r\n                    filePathList.push(filepath1);\r\n                    Pathandparpath.push({\r\n                        name: fileNameList[j],\r\n                        path: filepath1,\r\n                        parpath: ppath,\r\n                        id: \"\",\r\n                        pid: \"\"\r\n                    })\r\n                    pathAndId.push({\r\n                        path: filepath1,\r\n                        id: \"\"\r\n                    })\r\n                }\r\n                ppath = filepath1;\r\n            }\r\n        }\r\n        //将获取到的路径地址去数据库中比对。将包含的目录id拿到\r\n        var filepaths = filePathList.join(',')\r\n        hwDas.get(\"zyzx/zyzxtree/getpathid\", {}, {\r\n            path: filepaths,\r\n            serverid: selServerID.getValue()\r\n        }, function(result) {\r\n            var datas = [];\r\n            if (result.data && result.data.length > 0 && result.data[0].datas && result.data[0].datas.length > 0)\r\n                datas = result.data[0].datas\r\n            //将没有id的分类添加上id\r\n            //将记录，目录和id的数组添加上对应的id\r\n            for (var i = 0; i < pathAndId.length; i++) {\r\n                var paid = \"\"\r\n                for (var j = 0; j < datas.length; j++) {\r\n                    if (datas[j].path == pathAndId[i].path)\r\n                        paid = datas[j].category_id\r\n                }\r\n                pathAndId[i].id = paid || vmd.getGuid()\r\n            }\r\n            //将记录，目录和id的数组添加上对应的id\r\n            for (var i = 0; i < Pathandparpath.length; i++) {\r\n                for (var j = 0; j < pathAndId.length; j++) {\r\n                    if (pathAndId[j].path == Pathandparpath[i].path) {\r\n                        Pathandparpath[i].id = pathAndId[j].id\r\n                    }\r\n                    if (pathAndId[j].path == Pathandparpath[i].parpath) {\r\n                        Pathandparpath[i].pid = pathAndId[j].id\r\n                    }\r\n                }\r\n                saveCategoryDate.push({\r\n                    path: Pathandparpath[i].path,\r\n                    category_id: Pathandparpath[i].id,\r\n                    parent_id: Pathandparpath[i].pid,\r\n                    name: Pathandparpath[i].name,\r\n                    server_id: selServerID.getValue()\r\n                })\r\n            } //将文件添加上分类id\r\n            for (var i = 0; i < fileList.length; i++) {\r\n\r\n                var filename = fileList[i].url.trim();\r\n                var filepath = filename.substr(0, filename.lastIndexOf('/'));\r\n                var pathid = \"\"\r\n                for (var j = 0; j < Pathandparpath.length; j++) {\r\n                    if (Pathandparpath[j].path == filepath)\r\n                        pathid = Pathandparpath[j].id\r\n                }\r\n                var filedate = {\r\n                    RESOURCE_ID: vmd.util.guid(),\r\n                    xh: 10,\r\n                    name: fileList[i].title.trim(),\r\n                    type: fileList[i].ext,\r\n                    size: fileList[i].size,\r\n                    path: fileList[i].url.trim(),\r\n                    CATEGORY_ID: pathid,\r\n                    SERVER_ID: selServerID.getValue()\r\n                }\r\n                saveDate.push(filedate);\r\n            }\r\n            //将上传的文件通过数据服务进行保存\r\n            hwDas.save(\"zyzx/zyzxtree/zysc\", {}, {}, saveDate, function(e) { //将上传的文件通过数据服务进行保存\r\n                hwDas.save(\"zyzx/zyzxtree/addCategorys\", {}, {}, saveCategoryDate, function(e) {\r\n                    //文件上传成功 需要刷新下列表\r\n                    liststore.toRefresh();\r\n                    Tips.tips(\"上传成功\", \"success\");\r\n                }, function(e) {\r\n                    Tips.tips(\"上传失败\", \"error\");\r\n                })\r\n            }, function(e) {\r\n                Tips.tips(\"上传失败\", \"error\");\r\n            })\r\n        })\r\n        //处理分类\r\n    });\r\n}\r\n//新建文件的子菜单事件\r\nfunction hwMenu1_click(sender, menuItem, e) {\r\n    var itemid = menuItem.id;\r\n    switch (itemid) {\r\n        case \"jsItem\":\r\n            {\r\n                addNewFile(\"js\");\r\n                break;\r\n            }\r\n        case \"htmlItem\":\r\n            {\r\n                addNewFile(\"html\");\r\n                break;\r\n            }\r\n        case \"cssItem\":\r\n            {\r\n                addNewFile(\"css\");\r\n                break;\r\n            }\r\n    }\r\n}\r\n//添加分类的弹出框\r\nfunction addNewFord() {\r\n    //添加文件夹 成功后的回调，通过在资源树节点添加实现数据库和界面的添加\r\n    var toAddFord = function(values, fun) {\r\n        hwDas.get(\"zyzx/zyzxtree/checkFord\", {}, {\r\n            name: values.name,\r\n            parent_id: ZyglTree.getSelNodeId()\r\n        }, function(result) {\r\n            if (result.data && result.data.length > 0 && result.data[0].datas && result.data[0].datas.length > 0) {\r\n                Ext.Msg.alert(\"警告\", \"已存在该文件夹，请重新修改文件夹名！\");\r\n            } else {\r\n                var SelNodepath = ZyglTree.getSelNodepath();\r\n                ZyglTree.addCartery(ZyglTree.getSelNodeId(),\r\n                    vmd.util.guid(),\r\n                    values.name,\r\n                    SelNodepath == \"\" ? values.name : SelNodepath + \"/\" + values.name,\r\n                    selServerID.getValue(),\r\n                    values.remark,\r\n                    function() {\r\n                        liststore.toRefresh(); //成功后刷新分类下的列表数据\r\n                        Tips.tips(\"新建文件夹成功\", \"success\");\r\n                        fun();\r\n                    },\r\n                    function() {\r\n                        Tips.tips(\"新建文件夹失败\", \"error\");\r\n                    });\r\n            }\r\n        }, function() {\r\n            Tips.tips(\"新建文件夹失败\", \"error\")\r\n        })\r\n    }\r\n    //添加分类的弹出框\r\n    addFile(\"folder\", null, null, toAddFord)\r\n}\r\n//添加新文件  \r\nfunction addNewFile(type) {\r\n    //添加成功后的回调\r\n    var c_toAddFile = function(values, fun) {\r\n        //判断是否存在该文件\r\n        hwDas.get(\"zyzx/zyzxtree/checkFileName\", {}, {\r\n            name: values.name,\r\n            actegory_id: ZyglTree.getSelNodeId()\r\n        }, function(result) {\r\n            if (result.data && result.data.length > 0 && result.data[0].datas && result.data[0].datas.length > 0) {\r\n                Ext.Msg.alert(\"警告\", \"已存在该文件，请重新修改文件名！\");\r\n                //Tips.tips(\"已存在该文件，请重新修改文件名！\", \"error\");\r\n            } else { //调用数据服务信息的保存方法\r\n                toAddorEditFile(values.name, values.remark, type, function() {\r\n                    var newpath = ZyglTree.getSelNodepath() == \"\" ? values.name : (ZyglTree.getSelNodepath() + \"/\" + values.name)\r\n                    hwDas.write(hwdasFileServer, newpath.trim(), \" \", function(result) {\r\n                        openAcetoEdit(newpath.trim());\r\n                        liststore.toRefresh();\r\n                        Tips.tips(\"新建文件成功\", \"success\");\r\n                        fun();\r\n                    }, function(err) {\r\n                        Tips.tips(\"新建文件失败\", 'error')\r\n                    })\r\n                }, function(e) {\r\n                    Tips.tips(\"新建文件失败\", \"error\");\r\n                });\r\n            }\r\n        }, function() {\r\n            Tips.tips(\"检测文件是否重复出错\", \"error\");\r\n        })\r\n    }\r\n    //定义类型的校验规则\r\n    var reg, regText;\r\n    reg = new RegExp(\"\\\\.\" + type + \"$\");\r\n    regText = \"名称必须以.\" + type + \"结尾！\";\r\n    //调用添加文件的页面\r\n    addFile(type, reg, regText, c_toAddFile);\r\n}\r\n//新建文件或修改文件的保存服务\r\nfunction toAddorEditFile(name, remark, type, sucfun, erfun) {\r\n    var saveData = {};\r\n    saveData.name = name.trim();\r\n    saveData.mark = remark;\r\n    saveData.resource_id = vmd.util.guid();\r\n    saveData.category_id = ZyglTree.getSelNodeId();\r\n    saveData.path = (ZyglTree.getSelNodepath() == \"\" ? name : (ZyglTree.getSelNodepath() + \"/\" + name)).trim();\r\n    saveData.server_id = selServerID.getValue();\r\n    saveData.type = type;\r\n    hwDas.save(\"zyzx/zyzxtree/addFile\", {}, {}, saveData, sucfun, erfun)\r\n}\r\n//添加文件和分类的名称录入界面\r\nfunction addFile(type, Reg, regText, fun) {\r\n    var newName;\r\n    if (type == \"folder\")\r\n        newName = \"新建文件夹\" + new Date().getTime();\r\n    else\r\n        newName = \"new\" + type + new Date().getTime() + \".\" + type;\r\n    //定义表单\r\n    var form = new Ext.form.FormPanel({\r\n        labelAlign: \"top\",\r\n        bodyStyle: \"padding: 10px\",\r\n        border: false,\r\n        items: [{\r\n            xtype: \"textfield\",\r\n            allowBlank: false,\r\n            anchor: \"100%\",\r\n            name: 'name',\r\n            height: 30,\r\n            fieldLabel: '名称',\r\n            emptyText: \"请输入名称\",\r\n            regex: Reg,\r\n            regexText: regText\r\n        }, {\r\n            xtype: \"textarea\",\r\n            allowBlank: true,\r\n            name: 'remark',\r\n            anchor: \"100%\",\r\n            fieldLabel: \"备注\"\r\n        }]\r\n    })\r\n    //表单窗体\r\n    var win = new Ext.Window({\r\n        width: 440,\r\n        height: 260,\r\n        title: '创建分类',\r\n        hidden: false,\r\n        layout: \"fit\",\r\n        border: false,\r\n        modal: true,\r\n        items: form,\r\n        fbar: [{\r\n            text: '确定',\r\n            handler: function() {\r\n                if (form.getForm().isValid()) {\r\n                    var values = form.form.getValues()\r\n                    //添加完节点，不仅仅在树上添加，还要刷新右侧列表\r\n                    if (fun) {\r\n                        fun(values, function() {\r\n                            win.close()\r\n                        })\r\n                    } else\r\n                        win.close()\r\n                }\r\n            }\r\n        }, {\r\n            text: '取消',\r\n            handler: function() {\r\n                win.close()\r\n            }\r\n        }]\r\n    });\r\n    win.show()\r\n    form.form.setValues({\r\n        name: newName.trim() + \"\"\r\n    })\r\n}\r\n//上传文件  参数：上传路径\r\nfunction upLoadFile(filepath) {\r\n    var uploader = Uploader.getUploader()\r\n    var win = new vmd.window({\r\n        items: Uploader,\r\n        auto: false,\r\n        height: 500,\r\n        width: 655,\r\n        maximizable: false,\r\n        resizable: false,\r\n        closeAction: 'hide',\r\n        title: \"文件上传\"\r\n    })\r\n    Uploader.show()\r\n    win.show();\r\n    win.hide();\r\n    //上传接口\r\n    uploader.upload(selServerUrl.getValue(), filepath, win, function(fileList) {\r\n        //上传成功回调\r\n        var saveDate = [];\r\n        //获取上传返回的路径\r\n        for (var i = 0; i < fileList.length; i++) {\r\n            var filedate = {\r\n                RESOURCE_ID: vmd.util.guid(),\r\n                xh: 10,\r\n                name: fileList[i].title.trim(),\r\n                type: fileList[i].ext,\r\n                size: fileList[i].size,\r\n                path: fileList[i].url.trim(),\r\n                CATEGORY_ID: selnodeID.getValue(),\r\n                SERVER_ID: selServerID.getValue()\r\n            }\r\n            saveDate.push(filedate);\r\n        }\r\n        //将上传的文件通过数据服务进行保存\r\n        hwDas.add(\"zyzx/zyzxtree/zysc\", {}, {}, saveDate, function(e) {\r\n            //文件上传成功 需要刷新下列表\r\n            liststore.toRefresh();\r\n            Tips.tips(\"上传成功\", \"success\");\r\n        }, function(e) {\r\n            Tips.tips(\"上传失败\", \"error\");\r\n        })\r\n    });\r\n}\r\n//下载\r\nfunction downLoad() {\r\n    var filepath = listSelData.data.path;\r\n    var descname = listSelData.data.name;\r\n    var dirmark = vmdSettings.resourceCode;\r\n    hwDas.down(hwdasFileServer, filepath, descname);\r\n}\r\n//删除资源  \r\nfunction removeResource() {\r\n    Ext.Msg.confirm(\"提示\", \"确定要进行删除操作吗？文件删除之后将不可恢复！\", function(type) {\r\n        if (type == \"yes\") {\r\n            switch (menuObjName.getValue()) {\r\n                case \"1\": //从树节点右键删除分类\r\n                    {\r\n                        //var selnodeID = ZyglTree.getSelNodeId();\r\n                        var selnodePath = ZyglTree.getSelNodepath();\r\n                        var selnodeParId = ZyglTree.getSelNodeparentId(); //当前节点的父节点id\r\n                        if (selnodeID.getValue()) {\r\n                            ZyglTree.removeCaretory(selnodeID.getValue(), function() {\r\n                                hwDas.remove(hwdasFileServer, selnodePath, function() {\r\n                                    Tips.tips(\"删除分类成功\", \"success\");\r\n                                }, function(msg) {\r\n                                    Tips.tips(\"删除分类失败\", \"error\");\r\n                                })\r\n                                //在删除树节点的分类后，定位到其上层节点\r\n                                if (selnodeParId) {\r\n                                    selnodeID.setValue(selnodeParId);\r\n                                    ZyglTree.setNodeSel(selnodeParId);\r\n                                    liststore.toRefresh();\r\n                                }\r\n                            }); //从树节点上移除,同时同步数据库\r\n                        }\r\n                        break;\r\n                    }\r\n                case \"0\": //从列表中右键删除分类或文件\r\n                    {\r\n                        var selItemData = ZyglList.getSelItemData();\r\n                        var selItemID = selItemData.id;\r\n                        var selItemtype = selItemData.type;\r\n                        var selItemPath = selItemData.path;\r\n                        if (selItemtype == \"folder\") //如果是分类，则通过树节点的删除方式进行删除，并同步。\r\n                        {\r\n                            if (selItemID) {\r\n                                //删除数据库信息\r\n                                ZyglTree.removeCaretory(selItemID, function() {\r\n                                    ZyglList.removeSelItem();\r\n                                    hwDas.remove(hwdasFileServer, selItemPath, function() {\r\n                                        Tips.tips(\"删除分类成功\", \"success\");\r\n                                    }, function(msg) {\r\n                                        Tips.tips(\"删除分类失败\", \"error\");\r\n                                    })\r\n                                }, function() {\r\n                                    Tips.tips(\"删除分类失败\", \"error\");\r\n                                });\r\n                            }\r\n                        } else { //如果为文件，调用单独服务进行删除\r\n                            hwDas.del(\"zyzx/zyzxtree/delresource\", {}, {\r\n                                resource_id: selItemID\r\n                            }, function() {\r\n                                hwDas.remove(hwdasFileServer, selItemPath, function() {\r\n                                    ZyglList.removeSelItem();\r\n                                    Tips.tips(\"删除文件成功\", \"success\");\r\n                                }, function(msg) {\r\n                                    Tips.tips(\"删除文件失败\", \"error\");\r\n                                })\r\n                            }, function(msg) {\r\n                                Tips.tips(\"删除文件失败\", \"error\");\r\n                            });\r\n                        }\r\n                        break;\r\n                    }\r\n            }\r\n        } else\r\n            return;\r\n    })\r\n}\r\n//重命名\r\nfunction rename() {\r\n    //定义服务变量\r\n    var type = \"1\";\r\n    var resource_id = \"\";\r\n    var category_id = \"\";\r\n    var path = \"\";\r\n    var vpath = \"\";\r\n    var name = \"\";\r\n    var ext = \"\";\r\n    var reg, regText;\r\n    //当前为树节点右键修改\r\n    if (menuObjName.getValue() == \"1\") {\r\n        type = \"1\";\r\n        category_id = ZyglTree.getSelNodeId();\r\n        path = ZyglTree.getSelNodepath();\r\n        name = ZyglTree.getSelCartery().text;\r\n    } else {\r\n        //当前为列表项右键修改\r\n        if (listSelData) { //判断是否存在选中的项\r\n            if (listSelData.data.type == \"folder\") { //如果选中的项为目录\r\n                type = \"1\";\r\n                category_id = listSelData.data.id;\r\n            } else { //如果选中的项为文件\r\n                type = \"0\";\r\n                resource_id = listSelData.data.id;\r\n                ext = listSelData.data.ext;\r\n                reg = new RegExp(\"\\\\.\" + ext + \"$\"); //new RegExp(\"/\\.\" + ext + \"$/\"); ///^[A-Z][a-zA-Z0-9]*$/;\r\n                regText = \"名称必须以.\" + ext + \"结尾！\";\r\n            }\r\n            path = listSelData.data.path;\r\n            name = listSelData.data.name;\r\n        }\r\n    }\r\n    //定义表单\r\n    var form = new Ext.form.FormPanel({\r\n        labelAlign: \"top\",\r\n        bodyStyle: \"padding: 10px\",\r\n        border: false,\r\n        items: [{\r\n            xtype: \"textfield\",\r\n            allowBlank: false,\r\n            anchor: \"100%\",\r\n            name: 'name',\r\n            height: 30,\r\n            fieldLabel: '将<span style=\"color:red;font-weight:bold\">' + name + '</span>重命名为',\r\n            emptyText: \"请输入重命名分类名称\",\r\n            regex: reg,\r\n            regexText: regText\r\n        }]\r\n    })\r\n    //表单窗体\r\n    var win = new Ext.Window({\r\n        width: 440,\r\n        height: 150,\r\n        title: '重命名',\r\n        hidden: false,\r\n        layout: \"fit\",\r\n        border: false,\r\n        modal: true,\r\n        items: form,\r\n        fbar: [{\r\n            text: '确定',\r\n            handler: function() { //修改后确定\r\n                if (form.getForm().isValid()) { //是否录入的名称\r\n                    var values = form.form.getValues(); //是否录入的名称\r\n                    if (path) { //根据路径重新组织新路径\r\n                        var index = path.lastIndexOf(\"\\/\");\r\n                        vpath = path.substring(0, index + 1) + values.name;\r\n                    }\r\n                    //调用重命名的服务\r\n                    hwDas.edit(\"zyzx/zyzxtree/rename\", {}, {}, [{\r\n                        resource_id: resource_id,\r\n                        category_id: category_id,\r\n                        rename: values.name.trim(),\r\n                        vpath: vpath.trim(),\r\n                        path: path.trim(),\r\n                        type: type\r\n                    }], function() {\r\n                        //设置节点名称\r\n                        //根据右键菜单的点击位置进行处理，如为树节点\r\n                        if (menuObjName.getValue() == \"1\") {\r\n                            ZyglTree.setCarteryName(category_id, values.name);\r\n                        } else {\r\n                            //根据右键菜单的点击位置进行处理，如为列表项\r\n                            if (listSelData) {\r\n                                //根据右键菜单的点击位置进行处理，如为文件夹\r\n                                if (listSelData.data.type == \"folder\") {\r\n                                    ZyglTree.setCarteryName(category_id, values.name);\r\n                                }\r\n                                listSelData.set(\"path\", vpath.trim());\r\n                                listSelData.set(\"name\", values.name.trim()) //设置名称，出发改变事件\r\n                            }\r\n                        }\r\n                        moveFile(path, vpath, \"重命名\");\r\n                        //Tips.tips(\"重命名成功\", \"success\");\r\n                    }, function(msg) {\r\n                        debugger\r\n                        Tips.tips(\"重命名失败\", \"error\");\r\n                    });\r\n                    win.close()\r\n                }\r\n            }\r\n        }, {\r\n            text: '取消',\r\n            handler: function() {\r\n                win.close()\r\n            }\r\n        }]\r\n    });\r\n    win.show()\r\n    form.form.setValues({\r\n        name: name.trim()\r\n    })\r\n}\r\n\r\nfunction savereName() {}\r\nvar copyItemData;\r\n\r\nfunction copyFileItem() {\r\n    cutItemData = null;\r\n    copyItemData = listSelData.data;\r\n}\r\nvar cutItemData;\r\n\r\nfunction cutFileItem() {\r\n    copyItemData = null;\r\n    cutItemData = listSelData.data;\r\n}\r\n\r\nfunction pasteFile() {\r\n    var type;\r\n    var path;\r\n    var vpath;\r\n    var pName;\r\n    var saveDate = {};\r\n    saveDate.vcategory_id = ZyglTree.getSelNodeId();\r\n    if (copyItemData) {\r\n        path = copyItemData.path;\r\n        saveDate.type = \"0\";\r\n        type = \"0\";\r\n        saveDate.resource_id = copyItemData.id;\r\n        pName = copyItemData.name;\r\n        vpath = ZyglTree.getSelNodepath() == \"\" ? values.name : (ZyglTree.getSelNodepath() + \"/\" + pName.trim());\r\n    } else if (cutItemData) {\r\n        path = cutItemData.path;\r\n        saveDate.type = \"1\";\r\n        type = \"1\";\r\n        saveDate.resource_id = cutItemData.id;\r\n        pName = cutItemData.name;\r\n        vpath = ZyglTree.getSelNodepath() == \"\" ? values.name : (ZyglTree.getSelNodepath() + \"/\" + pName.trim());\r\n    }\r\n    //判断是否为同级目录,同级目录且为复制时，会生成“文件名(1)”的文件。\r\n    if (path == vpath && type == \"0\") {\r\n        pName = pName.replace(/(.*)\\./, '$1' + new Date().getTime() + '.'); //正则表达式，设置复制的文件为“文件名(1).类型”\r\n        vpath = ZyglTree.getSelNodepath() == \"\" ? values.name : (ZyglTree.getSelNodepath() + \"/\" + pName.trim());\r\n    } else if (path == vpath && type == \"1\") { //同级目录且为剪切时，禁止该操作。\r\n        Ext.Msg.alert(\"警告\", \"同级目录禁止剪切后粘帖！\");\r\n        return;\r\n    }\r\n    saveDate.pName = pName.trim();\r\n    saveDate.vpath = vpath.trim();\r\n    hwDas.add(\"zyzx/zyzxtree/pasteItem\", {}, {}, saveDate, function(e) {\r\n        //文件上传成功 需要刷新下列表\r\n        liststore.toRefresh();\r\n        if (type == \"0\") {\r\n            copyFile(path, vpath, \"粘帖\");\r\n        } else {\r\n            moveFile(path, vpath, \"粘帖\");\r\n        }\r\n    }, function(e) {\r\n        Tips.tips(\"粘帖失败\", \"error\");\r\n    });\r\n}\r\n//树节点的点击，绑定列表资源显示\r\nfunction ZyglTree_resourceNodeClick(sender, node, e) {\r\n    selnodeID.setValue(node.id);\r\n    liststore.toRefresh();\r\n    node.select();\r\n    if (ZyglTree.tree.root == node) {\r\n        Navigation.setPath(ZyglTree.tree.root.text + \"/\")\r\n    } else {\r\n        Navigation.setPath(ZyglTree.tree.root.text + \"/\" + ZyglTree.getSelNodepath() + \"/\")\r\n    }\r\n}\r\n//树上方工具的回到主目录\r\nfunction ZyglTree_homeClick(sender, e) {\r\n    selnodeID.setValue(ZyglTree.getSelNodeId());\r\n    liststore.toRefresh();\r\n}\r\n//树上方工具的新建分类\r\nfunction ZyglTree_creatCategory(sender, e) {\r\n    addNewFord();\r\n}\r\n//树上方工具的刷新树\r\nfunction ZyglTree_refreshTree(sender, e) {\r\n    store.toRefresh();\r\n}\r\n//ace编辑 类型\r\nvar aceExtList = [\"html\", \"js\", \"css\", \"text\"];\r\n//图片类型列表 \r\nvar imgExtList = [\"jpg\", \"jpeg\", \"png\", \"gif\", \"ico\", \"bmp\"];\r\n//列表中选中的数据\r\nvar listSelData;\r\n//双击列表图标\r\nfunction ZyglList_listDbClick(sender, index, node, e) {\r\n    var target = e.target;\r\n    //if(e.target.className != 'ico') return;\r\n    listSelData = sender.store.getAt(index);\r\n    var listSelJson = listSelData.data;\r\n    if (listSelJson.type == \"folder\") {\r\n        selnodeID.setValue(sender.store.getAt(index).data.id);\r\n        ZyglTree.setNodeSel(sender.store.getAt(index).data.id);\r\n        liststore.toRefresh();\r\n        //设置导航的路径\r\n        Navigation.setPath(ZyglTree.tree.root.text + \"/\" + ZyglTree.getSelNodepath() + \"/\")\r\n        ZyglTree.getSelCartery().expand();\r\n    } else if (listSelJson.type == \"file\") { //如果是文件 ，进行打开处理\r\n        var selext = listSelJson.ext;\r\n        if (imgExtList.indexOf(selext) >= 0) { //如果是图片，用图片管理器打开\r\n            openImgShow(sender.store, listSelJson.name);\r\n        } else if (aceExtList.indexOf(selext) >= 0) {\r\n            //打开文件编辑\r\n            openAceEdit(sender.store, index);\r\n        }\r\n    }\r\n}\r\n//图片查看\r\nfunction openImgShow(store, selName) {\r\n    var imageList = {};\r\n    var imageListItems = [];\r\n    var index = -1;\r\n    for (var i = 0; i < store.data.items.length; i++) { //遍历当前的资源，将图片列表信息生成特定格式\r\n        var itemData = store.data.items[i].data;\r\n        if (imgExtList.indexOf(itemData.ext) >= 0) {\r\n            var imageListItem = {\r\n                msrc: \"http://\" + selServerUrl.getValue() + \"/\" + (zyzxVPath.getValue() ? \"/\" + zyzxVPath.getValue() : \"\") + \"/\" + itemData.path,\r\n                src: \"http://\" + selServerUrl.getValue() + \"/\" + (zyzxVPath.getValue() ? \"/\" + zyzxVPath.getValue() : \"\") + \"/\" + itemData.path,\r\n                h: 0,\r\n                w: 0,\r\n                title: itemData.name\r\n            }\r\n            imageListItems.push(imageListItem);\r\n            index++; ////获取当前图片在图片列表中的索引\r\n        }\r\n        if (selName == itemData.name) //根据当前点击的项与添加的图片项作对比 记录当前点击图片的index\r\n            imageList.index = index;\r\n    }\r\n    imageList.items = imageListItems;\r\n    vmd.showImg(imageList)\r\n}\r\n//打开文本编辑器\r\nfunction openAceEdit(store, index) {\r\n    //获取当前选中的文件所在的数据集行记录\r\n    var selFileItemData = store.getAt(index);\r\n    var path;\r\n    //打开文本编辑器，\r\n    if (selFileItemData) {\r\n        path = selFileItemData.data.path;\r\n        openAcetoEdit(path)\r\n    }\r\n}\r\n\r\nfunction openAcetoEdit(path) {\r\n    var aceFileEditWin = new vmd.window({\r\n        title: \"编辑\",\r\n        url: vmd.core.getVirtualPath() + \"modules/eQ9ULgcVb1/hw3ce0447e/hwef4bf837/hw1c51773c.html\",\r\n        auto: false,\r\n        height: getHeight(),\r\n        width: getWidth(),\r\n        params: {\r\n            path: path\r\n        }\r\n    })\r\n    aceFileEditWin.show();\r\n}\r\n//保存编辑文件信息\r\nfunction saveAceFileEditinfo() {\r\n    //先判断当前的选中项是否存在\r\n    if (listSelData && ZyglList.getSelItemData())\r\n        //调用保存服务方法\r\n        toAddorEditFile(listSelData.data.name, '修改', listSelData.data.ext, function() {\r\n            liststore.toRefresh();\r\n            Tips.tips(\"更新文件信息成功\", \"success\");\r\n        }, function(e) {\r\n            Tips.tips(\"更新文件信息失败\", \"error\");\r\n        })\r\n}\r\n//在打开的页面中保存时会调用该方法实现保存，放到window中\r\nwindow.saveAceFileEditinfo = saveAceFileEditinfo;\r\n//默认列表展示模式\r\nvar isview = true;\r\n\r\nfunction ZyglList_afterrender(sender) {\r\n    ZyglList.enableView();\r\n    ZyglList.body.on('click', function() {\r\n        //发送消息，进行文件过滤\r\n        // send();\r\n    })\r\n}\r\n//处理列表的右键菜单显示\r\nfunction ZyglList_contextmenu(sender, index, e) {\r\n    //根据当前点击的列表项，设置列表项选中\r\n    if (sender.xtype == \"vmd.dataview\") {\r\n        sender.selectRange(index, index);\r\n    } else if (sender.xtype == \"grid\") {\r\n        sender.selModel.selectRow(index);\r\n    }\r\n    //根据传递的index 来判断是在文件或分类上点击的右键还是空白区域展示的右键\r\n    if (index != null) {\r\n        //获取选中项的数据\r\n        listSelData = sender.store.getAt(index);\r\n        var listSelJson = listSelData.data;\r\n        //根据不同的类型来调用不同的菜单\r\n        if (listSelJson.type == \"folder\") {\r\n            refreshItem.setVisible(false);\r\n            copyItem.setVisible(false);\r\n            cutItem.setVisible(false);\r\n            pasteItem.setVisible(false);\r\n            renameItem.setVisible(true);\r\n            removeItem.setVisible(true);\r\n            newFileItem.setVisible(false);\r\n            newFordItem.setVisible(false);\r\n            searchItem.setVisible(true);\r\n            uploadItem.setVisible(false);\r\n            uploadFolder.setVisible(false);\r\n            downItem.setVisible(false);\r\n            infoItem.setVisible(false);\r\n        } else {\r\n            refreshItem.setVisible(false);\r\n            copyItem.setVisible(true);\r\n            cutItem.setVisible(true);\r\n            pasteItem.setVisible(false);\r\n            renameItem.setVisible(true);\r\n            removeItem.setVisible(true);\r\n            newFileItem.setVisible(false);\r\n            newFordItem.setVisible(false);\r\n            searchItem.setVisible(false);\r\n            uploadItem.setVisible(false);\r\n            uploadFolder.setVisible(false);\r\n            downItem.setVisible(true);\r\n            infoItem.setVisible(true);\r\n        }\r\n    } else {\r\n        refreshItem.setVisible(false);\r\n        copyItem.setVisible(false);\r\n        cutItem.setVisible(false);\r\n        pasteItem.setVisible(true);\r\n        renameItem.setVisible(false);\r\n        removeItem.setVisible(false);\r\n        newFileItem.setVisible(true);\r\n        newFordItem.setVisible(true);\r\n        searchItem.setVisible(true);\r\n        uploadItem.setVisible(true);\r\n        uploadFolder.setVisible(true);\r\n        downItem.setVisible(false);\r\n        infoItem.setVisible(false);\r\n    }\r\n    //设置菜单显示位置\r\n    hwMenu.showAt(e.xy);\r\n    e.stopEvent(); //阻止冒泡\r\n    //设置菜单为列表中弹出 ，以方便进行不同操作\r\n    menuObjName.setValue(\"0\");\r\n}\r\n//设置列表展示模式切换的样式\r\nfunction button1_click(sender, e) {\r\n    ZyglList.enableView();\r\n    isview = true;\r\n    btn_list.removeClass(\"list-list-sel\")\r\n    button1.addClass(\"list-view-sel\")\r\n}\r\n//设置列表展示模式切换的样式\r\nfunction btn_list_click(sender, e) {\r\n    ZyglList.enableList();\r\n    isview = false;\r\n    button1.removeClass(\"list-view-sel\")\r\n    btn_list.addClass(\"list-list-sel\")\r\n}\r\n//通过双击文件名进行重命名\r\nfunction ZyglList_rename(sender, name, oldname, curIndex) {\r\n    if (curIndex == null) return;\r\n    //调用重命名的服务\r\n    var cnData = sender.store.getAt(curIndex);\r\n    if (!cnData) return;\r\n    //定义服务变量\r\n    var type = \"1\";\r\n    var resource_id = \"\";\r\n    var category_id = \"\";\r\n    var path = \"\";\r\n    var vpath = \"\";\r\n    //当前为列表项右键修改\r\n    if (cnData) { //判断是否存在选中的项\r\n        if (cnData.data.type == \"folder\") { //如果选中的项为目录\r\n            type = \"1\";\r\n            category_id = cnData.data.id;\r\n        } else { //如果选中的项为文件\r\n            type = \"0\";\r\n            resource_id = cnData.data.id;\r\n        }\r\n        path = cnData.data.path;\r\n    }\r\n    if (path) { //根据路径重新组织新路径\r\n        var index = path.lastIndexOf(\"\\/\");\r\n        vpath = path.substring(0, index + 1) + name.trim();\r\n    }\r\n    //调用重命名的服务\r\n    hwDas.edit(\"zyzx/zyzxtree/rename\", {}, {}, [{\r\n        resource_id: resource_id,\r\n        category_id: category_id,\r\n        rename: name.trim(),\r\n        vpath: vpath.trim(),\r\n        path: path.trim(),\r\n        type: type\r\n    }], function() {\r\n        //根据右键菜单的点击位置进行处理，如为列表项\r\n        if (cnData) {\r\n            //根据右键菜单的点击位置进行处理，如为文件夹\r\n            if (cnData.data.type == \"folder\") {\r\n                ZyglTree.setCarteryName(category_id, name.trim());\r\n            }\r\n            cnData.set(\"path\", vpath.trim());\r\n            cnData.set(\"name\", name.trim()) //设置名称，出发改变事件\r\n            moveFile(path.trim(), vpath.trim(), \"重命名\");\r\n        }\r\n    }, function(msg) {\r\n        Tips.tips(\"重命名失败\", \"error\");\r\n    });\r\n}\r\n//服务器端移动文件方法，在重命名或剪切时用到\r\nfunction moveFile(path, vpath, msg) {\r\n    var pSuccess = function(res) {\r\n        if (res.isSucceed) {\r\n            Tips.tips(msg + \"成功\", \"success\");\r\n            copyItemData = null;\r\n            cutItemData = null;\r\n        } else {\r\n            if (res.indexOf(\"不存在\") >= 0)\r\n                Tips.tips(msg + \"成功\", \"success\");\r\n            else\r\n                Tips.tips(msg + \"失败\", \"error\");\r\n        }\r\n    }\r\n    var eSuccess = function(res) {\r\n        if (res.indexOf(\"不存在\") >= 0)\r\n            Tips.tips(msg + \"成功\", \"success\");\r\n        else\r\n            Tips.tips(msg + \"失败\", \"error\");\r\n    }\r\n    hwDas.move(hwdasFileServer, path.trim(), vpath.trim(), pSuccess, eSuccess);\r\n}\r\n//服务器端复制文件，文件复制时用到\r\nfunction copyFile(path, vpath, msg) {\r\n    var pSuccess = function(res) {\r\n        if (res.isSucceed) {\r\n            Tips.tips(msg + \"成功\", \"success\");\r\n            copyItemData = null;\r\n            cutItemData = null;\r\n        } else {\r\n            Tips.tips(msg + \"失败\", \"error\");\r\n        }\r\n    }\r\n    var eSuccess = function(res) {\r\n        Tips.tips(msg + \"失败\", \"error\");\r\n    }\r\n    hwDas.copy(hwdasFileServer, path, vpath, pSuccess, eSuccess);\r\n}\r\n//资源树绑定后，默认的选中根节点，并展示根节点的数据\r\nfunction ZyglTree_afterCategoryBind(sender, e) {\r\n    ZyglTree.tree.root.select();\r\n    selnodeID.setValue(ZyglTree.tree.root.id);\r\n    liststore.toRefresh();\r\n    ZyglTree.tree.root.expand();\r\n    ZyglTree.tree.root.setIcon(\"/img/public/server2.png\");\r\n}\r\n//快捷键的菜单\r\nfunction ZyglTree_creatFile(sender, e) {\r\n    hwMenu1.showAt([sender.x, sender.y + 80])\r\n}\r\n//导航的专业按钮，定位到根节点并刷新列表\r\nfunction Navigation_homeClick(sender, e) {\r\n    ZyglTree.tree.root.select();\r\n    selnodeID.setValue(ZyglTree.tree.root.id);\r\n    liststore.toRefresh();\r\n}\r\n//导航的点击，定位到指定目录并刷新列表\r\nfunction Navigation_pathClick(sender, path) {\r\n    //根节点，则调用home的点击事件\r\n    if (ZyglTree.tree.root.text + \"/\" == path || ZyglTree.tree.root.text == path) {\r\n        Navigation_homeClick();\r\n    } else {\r\n        //获取导航返回的路径，并进行处理，过滤掉根节点，最后的/\r\n        var cPath = path.replace(ZyglTree.tree.root.text + \"/\", \"\");\r\n        if (cPath.substr(cPath.length - 1) == \"/\")\r\n            cPath = cPath.substr(0, cPath.length - 1);\r\n        //通过服务 和 路径获取分类id，唯一\r\n        hwDas.get(\"zyzx/zyzxtree/getIdByPath\", {}, {\r\n            path: cPath\r\n        }, function(result) {\r\n            //获取到分类id后，定位到指定节点，并刷新列表\r\n            if (result.data && result.data.length > 0 && result.data[0].datas && result.data[0].datas.length > 0) {\r\n                selnodeID.setValue(result.data[0].datas[0].category_id);\r\n                ZyglTree.setNodeSel(result.data[0].datas[0].category_id);\r\n                liststore.toRefresh();\r\n                //设置导航的路径\r\n                // Navigation.setPath(ZyglTree.tree.root.text + \"/\" + ZyglTree.getSelNodepath())\r\n            }\r\n        }, function() {})\r\n    }\r\n}\r\n//服务器设置的时间\r\nfunction MyLb_hjbl_afterrender(sender) {\r\n    sender.el.on('click', function() {\r\n        openServerEdit();\r\n    })\r\n}\r\n//服务器设置的时间\r\nfunction MyC_hjbl_afterrender(sender) {\r\n    sender.el.on('click', function() {\r\n        openServerEdit();\r\n    })\r\n}\r\n//关闭服务器配置后刷新列表\r\nfunction closeEditWin() {\r\n    serverstore.toRefresh();\r\n}\r\n//打开服务器编辑框\r\nfunction openServerEdit() {\r\n    serverEditWin = new vmd.window({\r\n        title: \"编辑\",\r\n        url: vmd.core.getVirtualPath() + \"modules/eQ9ULgcVb1/hw3ce0447e/hwef4bf837/hw999da775.html\",\r\n        auto: false,\r\n        height: 480,\r\n        width: 650,\r\n        closable: true\r\n    })\r\n    serverEditWin.show();\r\n    serverEditWin.on('close', closeEditWin, this)\r\n    window.serverEditWin = serverEditWin;\r\n}\r\n//打开服务器列表菜单\r\nfunction openServerMenu(sender, e) {\r\n    hwMenu2.showAt(sender.xy);\r\n}\r\n//服务器列表数据集初始化完后，加载列表菜单\r\nfunction serverstore_load(sender, records, options) {\r\n    hwMenu2.removeAll();\r\n    for (var i = 0; i < records.length; i++) {\r\n        if (selServerID.getValue() == \"\") {\r\n            selServerID.setValue(records[i].data.server_id);\r\n            selServerUrl.setValue(records[i].data.ip + (records[i].data.port == \"\" ? \"\" : (\":\" + records[i].data.port)));\r\n            hwdasFileServer = {\r\n                host: selServerUrl.getValue(),\r\n                mark: vmdSettings.resourceCode\r\n            }\r\n            window[\"hwdasFileServer\"] = hwdasFileServer;\r\n        }\r\n        var item1 = new Ext.menu.Item({\r\n            id: records[i].data.server_id,\r\n            text: records[i].data.name,\r\n            iconCls: \"server-list\"\r\n        })\r\n        item1.dataObj = records[i].data;\r\n        hwMenu2.addMenuItem(item1)\r\n    }\r\n}\r\n//选择服务器点击事件\r\nfunction label1_afterrender(sender) {\r\n    sender.el.on('click', function(sender, e) {\r\n        openServerMenu(sender, e);\r\n    })\r\n}\r\n//选择服务器点击事件\r\nfunction div5_afterrender(sender) {\r\n    sender.el.on('click', function(sender, e) {\r\n        openServerMenu(sender, e);\r\n    })\r\n}\r\n//服务器列表选择事件\r\nfunction hwMenu2_click(sender, menuItem, e) {\r\n    label1.setText(menuItem.text);\r\n    selServerID.setValue(menuItem.id);\r\n    selServerUrl.setValue(menuItem.dataObj.ip + (menuItem.dataObj.port == \"\" ? \"\" : (\":\" + menuItem.dataObj.port)));\r\n    hwdasFileServer = {\r\n        host: selServerUrl.getValue(),\r\n        mark: vmdSettings.resourceCode\r\n    }\r\n    window[\"hwdasFileServer\"] = hwdasFileServer;\r\n    ZyglTree.setRootText(menuItem.text);\r\n    ZyglTree.setRootValue(menuItem.id);\r\n    store.toRefresh();\r\n}\r\n\r\nfunction getHeight() {\r\n    return (document.documentElement || document.body).clientHeight - 50;\r\n}\r\n\r\nfunction getWidth() {\r\n    var width = (document.documentElement || document.body).clientWidth;\r\n    if (width > 400) {\r\n        return width - 200;\r\n    }\r\n    return width - 20;\r\n}\r\n\r\nfunction ZyflSearch_searchTextChange(sender, oldValue, newValue) {\r\n    hwDas.get(\"zyzx/zyzxtree/search\", {}, {\r\n            name: newValue,\r\n            category_id: ZyglTree.getSelNodeId()\r\n        }, function(result) {\r\n            var selIds = [];\r\n            if (result.data && result.data.length > 0 && result.data[0].datas && result.data[0].datas.length > 0) {\r\n                for (var i = 0; i < result.data[0].datas.length; i++) {\r\n                    selIds.push(result.data[0].datas[i].resource_id)\r\n                }\r\n            }\r\n            ZyglList.setItemsSel(selIds);\r\n        },\r\n        function(msg) {\r\n            Tips.tips(\"检索失败\", \"error\");\r\n        })\r\n}\r\n\r\nfunction Navigation_afterrender(sender) {\r\n    Navigation.setPath(ZyglTree.tree.root.text + \"/\")\r\n}\r\n//接口，返回当前选择的资源的信息\r\nfunction getSelResource() {\r\n    var selItems = ZyglList.getSelItemsData();\r\n    return selItems;\r\n}\r\n\r\nfunction MyViewport_afterrender(sender) {}","vmdcss":".icon-cloud-download {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: -16px -48px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.font-icon {\r\n    display: inline-block;\r\n    width: 16px;\r\n    text-align: center;\r\n    font-size: 1.2em;\r\n    color: #aaa;\r\n    margin-right: 15px;\r\n    vertical-align: middle;\r\n    margin-top: -2px;\r\n    padding: 0;\r\n}\r\n.icon-folder-close-alt {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 -16px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-upload  {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 -48px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-newfolder {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 -16px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-search{\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 0px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-remove{\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 -80px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-rname  {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 -64px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-paste {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: -16px -64px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-cut{\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: -16px -80px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-copy {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 -96px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n\r\n.icon-cloud-info {\r\n    color: #fff !important;\r\n    background: #c4e5ff;\r\n    text-align: center;\r\n    width: 15px;\r\n    border-radius: 50%;\r\n    height: 15px;\r\n    line-height: 15px;\r\n    margin-right: 15px;\r\n    box-shadow: 0 0 0 1px #6db9f5;\r\n}\r\n.icon-cloud-newfile  {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/menu_icon.png);\r\n    width: 16px !important;\r\n    background-position: 0 -32px;\r\n    background-size: auto !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-css  {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/icon_file/css.png);\r\n    width: 16px !important;\r\n    background-size: cover !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-js  {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/icon_file/js.png);\r\n    width: 16px !important;\r\n    background-size: cover !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n.icon-cloud-html  {\r\n    display: inline-block;\r\n    background-image: url(/system/modules/eQ9ULgcVb1/hw3ce0447e/img/icon_file/html.png);\r\n    width: 16px !important;\r\n    background-size: cover !important;\r\n    background-repeat: no-repeat;\r\n    height: 16px;\r\n    margin-right: 15px;\r\n}\r\n\r\n.list-view{\r\n    margin-left: 25px;\r\n    background-image: url(\"/system/modules/eQ9ULgcVb1/hw3ce0447e/img/list-view.png\");\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    border-radius: 0px;\r\n}\r\n.list-view-sel{\r\n    background-color: lightBlue;\r\n}\r\n.list-list{\r\n    margin-left: 25px;\r\n    background-image: url(\"/system/modules/eQ9ULgcVb1/hw3ce0447e/img/list-list.png\");\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    border-radius: 0px;\r\n}\r\n.list-list-sel{\r\n    background-color: lightBlue;\r\n}\r\n.server-list{\r\n    background-image: url(\"/system/modules/eQ9ULgcVb1/hw3ce0447e/img/servermenu.png\");\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    border-radius: 0px;\r\n}\r\n.icon-folder-open{\r\n    color: #39c;\r\n    font-size: 16px\r\n}","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"project.config.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}