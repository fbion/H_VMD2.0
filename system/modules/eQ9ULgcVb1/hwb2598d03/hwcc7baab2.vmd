{"vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"afterrender\":\"MyViewport_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"top\",\"layoutConfig\":{\"pack\":\"center\"},\"userConfig\":{\"x\":0,\"y\":72,\"height\":47,\"layout\":\"hbox\",\"id\":\"top\",\"style\":\"\",\"border\":false,\"header\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer\",\"layoutConfig\":{},\"userConfig\":{\"height\":47,\"style\":\"background:url('/system/img/login_topbanner.png') no-repeat left\",\"width\":800},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer1\",\"layoutConfig\":{},\"userConfig\":{\"height\":47,\"style\":\"margin-left:80px\"},\"cn\":[{\"cid\":\"label\",\"id\":\"MyLabel\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"VMD2.0可视化定制工具\",\"style\":\"font-size:23px;line-height:47px\"}},{\"cid\":\"label\",\"id\":\"MyLabel1\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"V2.0.2\",\"cls\":\"margin_left5\"}}]}]}]},{\"cid\":\"container\",\"id\":\"center\",\"layoutConfig\":{\"pack\":\"center\"},\"userConfig\":{\"x\":0,\"y\":120,\"id\":\"center\",\"width\":\"\",\"height\":400,\"style\":\"background:url('/system/img/login_bg.png') repeat\",\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer5\",\"layoutConfig\":{},\"userConfig\":{\"x\":290,\"y\":640,\"width\":800,\"height\":400},\"cn\":[{\"cid\":\"container\",\"id\":\"right\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"right\",\"width\":300,\"height\":321,\"style\":\"float:right;margin-top:55px;;background:url('/system/img/login_box.png') no-repeat\",\"x\":500,\"y\":520,\"layout\":\"auto\"},\"cn\":[{\"cid\":\"container\",\"id\":\"username_img\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"username_img\",\"width\":\"\",\"style\":\"margin-top:80px;margin-left:20px;background:url('/system/img/login_user.png') no-repeat\",\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"textfield\",\"id\":\"username\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":5,\"width\":210,\"height\":30,\"id\":\"username\",\"style\":\"border: 0;    background: none\",\"blankText\":\"\",\"emptyText\":\"请输入用户名\"}}]},{\"cid\":\"container\",\"id\":\"userpwd_img\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"userpwd_img\",\"width\":\"\",\"style\":\"margin-left: 20px;    background: url('/system/img/login_pwd.png') no-repeat\",\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"textfield\",\"id\":\"userpwd\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":5,\"width\":210,\"id\":\"userpwd\",\"height\":30,\"style\":\"border:0;background:none\",\"vtype\":\"\",\"grow\":false,\"allowBlank\":false,\"blankText\":\"\",\"inputType\":\"password\",\"emptyText\":\"请输入密码\",\"validateOnBlur\":false}}]},{\"cid\":\"container\",\"id\":\"remember\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"remember\",\"width\":\"\",\"style\":\"margin-top:10px;margin-left:20px;\",\"layout\":\"absolute\",\"height\":30},\"cn\":[{\"cid\":\"label\",\"id\":\"MyLabel3\",\"layoutConfig\":{},\"userConfig\":{\"x\":25,\"y\":-1,\"text\":\"记住密码\"}},{\"cid\":\"container\",\"id\":\"rememberpwd\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"id\":\"rememberpwd\",\"height\":22,\"width\":22,\"style\":\"background: url('/system/img/checkbox.png') no-repeat;    color: red;\",\"afterrender\":\"rememberpwd_afterrender\",\"cls\":\"hand\"}}]},{\"cid\":\"container\",\"id\":\"loginbtn\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\",\"scrollOffset\":\"\"},\"userConfig\":{\"id\":\"loginbtn\",\"width\":\"\",\"layout\":\"hbox\",\"style\":\"\"},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"登 &nbsp;&nbsp; 录\",\"type\":\"primary\",\"size\":\"(none)\",\"width\":200,\"click\":\"button_click\",\"style\":\"color: red\"}}]},{\"cid\":\"container\",\"id\":\"thirdpartlogin\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"width\":\"\",\"id\":\"thirdpartlogin\",\"layout\":\"hbox\",\"height\":40},\"cn\":[{\"cid\":\"container\",\"id\":\"qq\",\"layoutConfig\":{},\"userConfig\":{\"width\":26,\"id\":\"qq\",\"style\":\"background: url('/system/img/QQ.png');    background-repeat: round;    cursor: pointer\",\"height\":29,\"afterrender\":\"qq_afterrender\"}}]}]},{\"cid\":\"container\",\"id\":\"left\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"left\",\"height\":304,\"width\":304,\"style\":\"float:right;margin-right:100px;margin-top:55px;background:url('/system/img/login_bg_top.png') no-repeat\",\"x\":90,\"y\":520}}]}]},{\"cid\":\"panel\",\"id\":\"bottom\",\"layoutConfig\":{\"pack\":\"center\",\"align\":\"top\"},\"userConfig\":{\"x\":0,\"y\":540,\"height\":20,\"layout\":\"hbox\",\"border\":false,\"id\":\"bottom\",\"header\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer6\",\"layoutConfig\":{},\"userConfig\":{\"height\":20,\"width\":20,\"style\":\"background:url('/system/img/hwico.png') no-repeat\"}},{\"cid\":\"label\",\"id\":\"MyLabel2\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"东营汉威石油技术开发有限公司\"}}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"function button_click(sender) {\n    \n    if(!username.getValue()) {\n        Ext.Msg.alert('提示', '用户名不能为空！', function() {\n            username.focus();\n        })\n\n        return\n    }\n    if(!userpwd.getValue()) {\n        Ext.Msg.alert('提示', '密码不能为空！', function() {\n            userpwd.focus();\n        })\n        return\n    }\n    //加载服务\n\n    var myMask = new Ext.LoadMask(Ext.getBody(), {\n        msg: \"正在登录,请稍后...\",\n        msgCls: 'z-index:10000;'\n    });\n    myMask.show();\n\n\n    //平台登录服务编写\n    hwDas.ajax({\n        das: { //是数据访问服务提供的接口必须要设置为true\n            idedas: false //如果不是定制的数据服务就填写idedas为false\n        },\n        url: \"TokenAuth\",\n        type: 'get',\n        timeout: 5000,\n        params: {\n            login: username.getValue(),\n            password: userpwd.getValue()\n        },\n        success: function(result) {\n            debugger\n            var data = result.data;\n            hwDas.token = data.token;\n            //存储cookie\n             Ext.util.Cookies.set('token', data.token);\n             Ext.util.Cookies.set('userName', data.user.name);\n             Ext.util.Cookies.set('login', data.user.login);\n           // Ext.util.Cookies.set('ecyLogin', data.user.ecyLogin || \"\");\n            Ext.util.Cookies.set('EcyLogin', data.user.ecyLogin || \"\");\n            //记录 登录用户是否拥有编辑主页面的权限\n            Ext.util.Cookies.set('userType', \"vmdDesigner\");\n\n            // Ext.Msg.alert('提示', '登录成功！')\n            myMask.hide();\n            //window.location.href=\"/system/main/main.html\"\n            // window.location.href = \"/modules/eQ9ULgcVb1/eQ9ULgcVb5/5b8e5abdec.html\"\n            window.location.href = vmd.virtualPath + \"/modules/eQ9ULgcVb1/eQ9ULgcVb5/hwa009d2d3.html?r=\" + new Date().getTime();\n\n        },\n        error: function(msg) {\n\n            Ext.Msg.alert('错误', msg)\n            myMask.hide()\n        }\n\n    })\n\n}\n\nfunction rememberpwd_afterrender(sender) {\n    var state = false;\n\n    rememberpwd.el.on('click', function(e) {\n\n        if(!state) {\n            //sender.el.dom.style.backgroundPositionX=\"-27px\"\n            rememberpwd.el.setStyle('background-position-x', '-27px');\n\n        } else {\n            // sender.el.dom.style.backgroundPositionX=\"0px\"\n            rememberpwd.el.setStyle('background-position-x', '0px');\n        }\n\n        state = !state\n\n    })\n}\n\n\n\n\n//增加页面回车登录快捷操作\nfunction MyViewport_afterrender(sender) {\n    var map = new Ext.KeyMap(document, {\n            key: 13, // or Ext.EventObject.ENTER\n            fn: button_click,\n            scope: button\n        })\n        //默认记住密码\n    rememberpwd.el.setStyle('background-position-x', '-27px');\n\n    username.setValue('dbadmin');\n    userpwd.setValue('1');\n\n\n}\n\n\n\nfunction qq_afterrender(sender) {\n    qq.el.on('click', function() {\n\n        Ext.Msg.alert('提示', '功能研发中！')\n    })\n}","vmdcss":"","vmdprops":"\"\"","type":"module"}