{"vmdversion":"2.0.3.0701","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"afterrender\":\"MyViewport_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"MyPanel\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"height\":650,\"layout\":\"absolute\",\"width\":600,\"border\":false,\"header\":false,\"region\":\"west\"},\"cn\":[{\"cid\":\"label\",\"id\":\"MyLabel8\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":320,\"text\":\"路径：\"}},{\"cid\":\"textfield\",\"id\":\"MyField6\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":320,\"width\":460,\"id\":\"MyField6\",\"disabled\":true}},{\"cid\":\"vmdButton\",\"id\":\"button3\",\"layoutConfig\":{},\"userConfig\":{\"x\":500,\"y\":450,\"text\":\"查看\",\"type\":\"info\",\"size\":\"large\",\"click\":\"button3_click\"}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":400,\"y\":450,\"size\":\"large\",\"type\":\"info\",\"text\":\"保存\",\"click\":\"button_click\"}},{\"cid\":\"textarea\",\"id\":\"MyField7\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":360,\"width\":460,\"id\":\"MyField7\"}},{\"cid\":\"textfield\",\"id\":\"MyField5\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":280,\"width\":460,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"MyField4\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":240,\"width\":460,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"MyField3\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":200,\"width\":460,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"MyField2\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":160,\"width\":460,\"disabled\":true}},{\"cid\":\"textfield\",\"id\":\"MyField1\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":120,\"width\":460}},{\"cid\":\"textfield\",\"id\":\"MyField\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":80,\"width\":460,\"disabled\":true}},{\"cid\":\"label\",\"id\":\"MyLabel7\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":360,\"text\":\"说明：\"}},{\"cid\":\"label\",\"id\":\"MyLabel6\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":280,\"text\":\"修改时间：\"}},{\"cid\":\"label\",\"id\":\"MyLabel5\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":240,\"text\":\"修改人：\"}},{\"cid\":\"label\",\"id\":\"MyLabel4\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":200,\"text\":\"创建时间：\"}},{\"cid\":\"label\",\"id\":\"MyLabel3\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":160,\"text\":\"创建人：\"}},{\"cid\":\"label\",\"id\":\"MyLabel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":120,\"text\":\"模块名称：\"}},{\"cid\":\"label\",\"id\":\"MyLabel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":80,\"text\":\"模块编码：\"}},{\"cid\":\"label\",\"id\":\"MyLabel\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":30,\"text\":\"模块基础信息\",\"style\":\"color: blue;    font-size: 20px;\"}}]},{\"cid\":\"panel\",\"id\":\"MyPanel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":650,\"y\":100,\"region\":\"center\",\"header\":false,\"border\":false,\"layout\":\"anchor\"},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer\",\"layoutConfig\":{},\"userConfig\":{\"anchor\":\"90% 15%\"}},{\"cid\":\"container\",\"id\":\"MyContainer1\",\"layoutConfig\":{},\"userConfig\":{\"anchor\":\"90% 40%\",\"style\":\"\"}},{\"cid\":\"container\",\"id\":\"MyContainer2\",\"layoutConfig\":{},\"userConfig\":{\"anchor\":\"90% 20%\"}}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"function MyViewport_afterrender(sender) {\n    \n    var tree = parent.hwTreeDataService;\n    if(!tree)\n    {\n        return;\n    }\n    var nodeId = tree.getSelectedItemId();\n    var nodeName = tree.getSelectedItemText();\n    var objKey = \"hw\" + nodeId;\n    var nodeItemObj = tree.itemObj[objKey];\n    var userName = Ext.util.Cookies.get('userName');\n\n    if(nodeItemObj) {\n        MyField.setValue(nodeItemObj.code); // 模块编码\n        MyField1.setValue(nodeName); // 模块名称\n        MyField2.setValue(userName); // 创建人\n        MyField3.setValue(Ext.Date.dateFormat(new Date(), 'Y-m-d H:i:s')); // 创建时间\n        MyField4.setValue(userName); // 修改人\n        MyField5.setValue(Ext.Date.dateFormat(new Date(), 'Y-m-d H:i:s')); // 修改时间\n        MyField6.setValue(\"\"); // 路径\n        MyField7.setValue(nodeItemObj.remark); // 说明\n    }\n}\n\nfunction button_click(sender) {\n    saveModelInfo(function() {\n        Ext.Msg.alert(\"提示\", \"保存成功！\")\n    });\n}\n\n//模块保存按钮操作\nfunction saveModelInfo(callback) {\n    var mytree = parent.hwTreeDataService;\n    var selId = mytree.getSelectedItemId();\n    var objKey = \"hw\" + selId;\n    var selnode = mytree.itemObj[objKey];\n\n    var serviceCode = selnode.code; // 模块编码\n    var serviceName = MyField1.getValue(); // 模块名称\n    var serviceRemark = MyField7.getValue(); // 说明\n\n\n    // 模板节点\n    hwDas.ajax({\n        das: {\n            idedas: true\n        },\n        url: \"DataService/Service/Project\",\n        // url: \"http://www.hanweikeji.com:10050/DasService/DataService/DataService/Service/Project\",\n        type: 'put',\n        timeout: 5000,\n        data: [{ // body传参\n            'code': serviceCode,\n            'id': selId,\n            'name': serviceName,\n            'remark': serviceRemark\n        }],\n        success: function(result) {\n\n            if(result == \"\") {\n                return;\n            }\n            if(!result.data) {\n                return;\n            }\n\n            if(result.data.length > 0) {\n                if(result.data[0].datas) {\n                    var serviceName = result.data[0].datas.name;\n                    var serviceId = result.data[0].datas.id;\n\n                    mytree.setItemText(serviceId, serviceName, serviceName);\n                    var treenode = mytree.item(serviceId);\n                    if(treenode) {\n                        treenode.code = result.data[0].datas.code;\n                        treenode.remark = result.data[0].datas.remark;\n                        treenode.builtin = result.data[0].datas.builtin;\n                    }\n                    var objKey = \"hw\" + serviceId;\n                    mytree.itemObj[objKey] = treenode;\n                }\n            }\n        },\n        error: function(msg) {\n            Ext.Msg.alert(\"提示\", \"编辑节点失败！\")\n        }\n    })\n}\n\nfunction button1_click(sender) {\n\n    // var mytree = parent.hwTreeWorkFlow;\n    // var selId = mytree.getSelectedItemId();\n    // if(parent) {\n    //     if(parent.designTemplate) {\n    //         parent.designTemplate(selId);\n    //     }\n    // }\n}\n\nfunction button3_click(sender) {\n\n    // var mytree = parent.hwTreeDataService;\n    // var selId = mytree.getSelectedItemId();\n    if(parent) {\n        if(parent.viewDataService) {\n            parent.viewDataService();\n        }\n    }\n}\n\n//自定义自定义方法\n\nfunction newGuid(len) {\n    var length = 32;\n    if(len)\n        length = len - 2\n    var guid = \"\";\n    for(var i = 1; i <= length; i++) {\n        var n = Math.floor(Math.random() * 16.0).toString(16);\n        guid += n;\n    }\n    return \"hw\" + guid;\n}\n\nfunction openSelMode(id, name, path) {\n    parent.openSelMode(id, name, path)\n}\n\nwindow[\"openSelMode\"] = openSelMode;\n\n/*\nfunction closeSelMode(create) {\n    if(create)\n        var mytree = parent.hwTree;\n    var selId = mytree.getSelectedItemId();\n    var selnode = mytree.itemObj[selId];\n    selnode.newnode = false;\n    mytree.newnode = false;\n    parent.closeSelMode1()\n}\nwindow[\"closeSelMode\"] = closeSelMode;\n*/","vmdcss":"","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}