{"vmdversion":"2.0.3.0706","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"afterrender\":\"MyViewport_afterrender\",\"autoScroll\":true},\"cn\":[{\"cid\":\"panel\",\"id\":\"top\",\"layoutConfig\":{\"pack\":\"center\"},\"userConfig\":{\"x\":0,\"y\":72,\"height\":47,\"layout\":\"hbox\",\"id\":\"top\",\"style\":\"\",\"border\":false,\"header\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer\",\"layoutConfig\":{},\"userConfig\":{\"height\":47,\"style\":\"background: url('/system/img/main/vmdlogo1.png') no-repeat left\",\"width\":800,\"border\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer1\",\"layoutConfig\":{},\"userConfig\":{\"height\":47,\"style\":\"margin-left:80px\",\"border\":false},\"cn\":[{\"cid\":\"label\",\"id\":\"MyLabel\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"VMD2.0可视化定制工具\",\"style\":\"font-size:23px;line-height:47px\"}},{\"cid\":\"label\",\"id\":\"MyLabel1\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"V2.0.3\",\"cls\":\"margin_left5\",\"hidden\":false}}]}]}]},{\"cid\":\"container\",\"id\":\"center\",\"layoutConfig\":{\"pack\":\"center\"},\"userConfig\":{\"x\":0,\"y\":120,\"id\":\"center\",\"width\":\"\",\"height\":400,\"style\":\"background:url('/system/img/login_bg.png') repeat\",\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer5\",\"layoutConfig\":{},\"userConfig\":{\"x\":290,\"y\":640,\"width\":800,\"height\":400,\"border\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"right\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"right\",\"width\":300,\"height\":321,\"style\":\"float:right;margin-top:55px;;background:url('/system/img/login_box.png') no-repeat\",\"x\":500,\"y\":520,\"layout\":\"auto\",\"border\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"username_img\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"username_img\",\"width\":\"\",\"style\":\"margin-top:80px;margin-left:20px;background:url('/system/img/login_user.png') no-repeat\",\"layout\":\"absolute\",\"border\":false},\"cn\":[{\"cid\":\"textfield\",\"id\":\"username\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":5,\"width\":210,\"height\":30,\"id\":\"username\",\"style\":\"border: 0;    background: none\",\"blankText\":\"\",\"emptyText\":\"请输入用户名\"}}]},{\"cid\":\"container\",\"id\":\"userpwd_img\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"userpwd_img\",\"width\":\"\",\"style\":\"margin-left: 20px;    background: url('/system/img/login_pwd.png') no-repeat\",\"layout\":\"absolute\",\"border\":false},\"cn\":[{\"cid\":\"textfield\",\"id\":\"userpwd\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":5,\"width\":210,\"id\":\"userpwd\",\"height\":30,\"style\":\"border:0;background:none\",\"vtype\":\"\",\"grow\":false,\"allowBlank\":false,\"blankText\":\"\",\"inputType\":\"password\",\"emptyText\":\"\",\"validateOnBlur\":false}}]},{\"cid\":\"container\",\"id\":\"remember\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"remember\",\"width\":\"\",\"style\":\"margin-top:10px;margin-left:20px;\",\"layout\":\"absolute\",\"height\":30,\"border\":false},\"cn\":[{\"cid\":\"label\",\"id\":\"MyLabel3\",\"layoutConfig\":{},\"userConfig\":{\"x\":23,\"y\":2,\"text\":\"记住密码\"}},{\"cid\":\"container\",\"id\":\"rememberpwd\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"id\":\"rememberpwd\",\"height\":22,\"width\":22,\"style\":\"background: url('/system/img/checkbox.png') no-repeat;    color: red;\",\"afterrender\":\"rememberpwd_afterrender\",\"cls\":\"hand\",\"border\":false}}]},{\"cid\":\"container\",\"id\":\"loginbtn\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\",\"scrollOffset\":\"\"},\"userConfig\":{\"id\":\"loginbtn\",\"width\":\"\",\"layout\":\"hbox\",\"style\":\"\",\"border\":false},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"登 &nbsp;&nbsp; 录\",\"type\":\"primary\",\"size\":\"(none)\",\"width\":200,\"click\":\"button_click\"}}]},{\"cid\":\"container\",\"id\":\"thirdpartlogin\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"width\":\"\",\"id\":\"thirdpartlogin\",\"layout\":\"hbox\",\"height\":40,\"border\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"qq\",\"layoutConfig\":{},\"userConfig\":{\"width\":26,\"id\":\"qq\",\"style\":\"background: url('/system/img/QQ.png');    background-repeat: round;    cursor: pointer\",\"height\":29,\"afterrender\":\"qq_afterrender\",\"border\":false}}]}]},{\"cid\":\"container\",\"id\":\"left\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"left\",\"height\":304,\"width\":304,\"style\":\"float:right;margin-right:100px;margin-top:55px;background:url('/system/img/login_bg_top.png') no-repeat\",\"x\":90,\"y\":520,\"border\":false}}]}]},{\"cid\":\"panel\",\"id\":\"bottom\",\"layoutConfig\":{\"pack\":\"center\",\"align\":\"top\"},\"userConfig\":{\"x\":0,\"y\":540,\"height\":20,\"layout\":\"hbox\",\"border\":false,\"id\":\"bottom\",\"header\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"MyContainer6\",\"layoutConfig\":{},\"userConfig\":{\"height\":20,\"width\":20,\"style\":\"background:url('/system/img/hwico.png') no-repeat\",\"border\":false}},{\"cid\":\"label\",\"id\":\"MyLabel2\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"东营汉威石油技术开发有限公司\"}}]},{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":570,\"width\":\"\",\"html\":\"<span style=\\\"font-weight:bold;font-size:16px;color:blue\\\">\\n    推荐使用浏览器：<a href=\\\"http://www.chromeliulanqi.com/\\\">谷歌浏览器</a>\\n    、<a href=\\\"http://chrome.360.cn/\\\">360极速浏览器</a>、\\n    <a href=\\\"http://ie.sogou.com/\\\">搜狗高速浏览器</a></span>\",\"style\":\"text-align: center\",\"border\":false,\"cls\":\"browser\"}}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"var Login = (function() {\n    var isRememberPwd = function() {\n\n        return Cookie.get('rememberpwd');\n    };\n    var modifyRememberState = function(state) {\n        //取消记住密码\n        if(!state) {\n\n            rememberpwd.el.setStyle('background-position-x', '0px');\n\n        } else {\n            //记住状态\n            rememberpwd.el.setStyle('background-position-x', '-27px');\n        }\n\n    }\n    var delPwd = function() {\n\n        Cookie.del('rememberpwd');\n\n    };\n    var remembePwd = function() {\n\n        Cookie.set('rememberpwd', true, 30);\n\n\n    };\n    var rememberState = function() {\n        //默认记住密码\n        username.focus();\n        if(isRememberPwd()) {\n            modifyRememberState(true)\n            //rememberpwd.el.setStyle('background-position-x', '-27px');\n            var login = Cookie.get('hwLogin');\n            var pwd = Cookie.get('_userpwd');\n            username.setValue(login);\n            userpwd.setValue(pwd);\n        }\n\n\n    }\n\n    var setCookie = function(info) {\n        info = info || {};\n\n        hwDas.token = info.token;\n        if(Login.state) {\n            remembePwd();\n            Cookie.set('hwLogin', info.user.login, 30);\n            Cookie.set('_userpwd', userpwd.getValue(), 30);\n        } else {\n            delPwd();\n            Cookie.set('hwLogin', info.user.login);\n            Cookie.del('_userpwd')\n        }\n        Cookie.set('userName', info.user.name);\n        Cookie.set('hwToken', info.token);\n        Cookie.set('hwEcyLogin', info.user.ecyLogin || \"\");\n        //记录 登录用户是否拥有编辑主页面的权限\n        Cookie.set('userType', \"vmdDesigner\");\n\n    }\n\n    return {\n        state: isRememberPwd(),\n        isRememberPwd: isRememberPwd,\n        setCookie: setCookie,\n        rememberState: rememberState,\n        modifyRememberState:modifyRememberState\n\n    }\n\n\n})();\n\nfunction button_click(sender, e) {\n\n    if(!username.getValue()) {\n        // Ext.Msg.alert('提示', '用户名不能为空！', function() {\n        //     username.focus();\n        // })\n        username.focus();\n        vmd.tip('用户名不能为空！', 'info')\n\n        return\n    }\n    if(!userpwd.getValue()) {\n        // Ext.Msg.alert('提示', '密码不能为空！', function() {\n        //     userpwd.focus();\n        // })\n        userpwd.focus();\n        vmd.tip('密码不能为空！', 'info')\n        return\n    }\n    //加载服务\n\n    var myMask = new Ext.LoadMask(Ext.getBody(), {\n        msg: \"正在登录,请稍后...\",\n        msgCls: 'z-index:10000;'\n    });\n    myMask.show();\n    // hwDas.login(username.getValue(), userpwd.getValue(), successback, errorback, \"unity\");\n    /////////////////////////////////////////////////////////////\n    hwDas.login(\n        username.getValue(), userpwd.getValue(),\n        function(result) {\n\n            Login.setCookie(result);\n            myMask.hide();\n            // 新的\n            window.location.href = vmd.virtualPath + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwZ8jCmRKR.html?r=\" + new Date().getTime();\n\n            //原来的\n            //window.location.href = vmd.virtualPath + \"/modules/eQ9ULgcVb1/eQ9ULgcVb5/hwBgORDLpV.html?r=\" + new Date().getTime();\n        },\n        function(msg) {\n            Tips.tips(\"验证失败！\", \"error\");\n            myMask.hide();\n            // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n        },\n        \"unity\"\n    );\n\n\n}\n\nfunction rememberpwd_afterrender(sender) {\n\n    Login.state = Login.isRememberPwd();\n\n    rememberpwd.el.on('click', function(e) {\n\n        if(!Login.state) {\n            //记住密码\n            Login.modifyRememberState(true);\n\n        } else {\n             Login.modifyRememberState(false);\n        }\n\n        Login.state = !Login.state;\n\n    })\n}\n\n\n\n\n//增加页面回车登录快捷操作\nfunction MyViewport_afterrender(sender) {\n\n    var map = new Ext.KeyMap(document, {\n        key: 13, // or Ext.EventObject.ENTER\n        fn: button_click,\n        scope: button\n    })\n    Login.rememberState();\n    if(Ext.isIE)\n\t\tvmd.tip( '为达到更好的用户体验，建议采用谷歌浏览器、360极速浏览器等webkit内核的浏览器进行操作。','info',3000);\n\n}\n\n\n\nfunction qq_afterrender(sender) {\n    qq.el.on('click', function() {\n\n        Ext.Msg.alert('提示', '功能研发中！')\n    })\n}","vmdcss":".browser a{\n    \n    text-decoration: none;\n    color: blue\n}","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}