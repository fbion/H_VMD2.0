<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <title>主页面</title>
    
    <!--基本样式-->
    <link href="/css/common.css" rel="stylesheet" />

    <!--加载dhx组件-->
    
    <link href="/lib/ext-3.4/resources/css/ext-all.css" rel="stylesheet" />
     <!--样式快捷索引表-->
    <link href="/css/shortcut.css" rel="stylesheet" />
    <link href="/lib/dhtmlx/dhtmlx.css" rel="stylesheet" />

    <script src="/lib/labjs/LAB.min.js"></script>
    <script src="/config.js"></script>
    <script src="/lib/ext-3.4/adapter/ext/ext-base-debug.js"></script>
    <script src="/lib/ext-3.4/adapter/ext/ext-base-lang.js"></script>
    <script src="/lib/ext-3.4/adapter/ext/ext-base-class.js"></script>
    <script src="/lib/ext-3.4/ext-all-debug.js"></script>
    <script src="/lib/ext-3.4/src/locale/ext-lang-zh_CN.js"></script>

    <script src="/lib/dhtmlx/dhtmlxCommon/codebase/dhtmlxcommon.js"></script>
    <script src="/lib/dhtmlx/dhtmlxCommon/codebase/dhtmlxcore.js"></script>
    <!--<script src="/lib/dhtmlx/dhtmlx.js"></script>-->
	<script src="/lib/dhtmlx/dhtmlxMenu/codebase/dhtmlxmenu.js"></script>
	<script src="/lib/dhtmlx/dhtmlxTree/codebase/dhtmlxtree.js"></script>	
	<script src="/lib/dhtmlx/dhtmlxTree/codebase/ext/dhtmlxtree_json.js"></script>
	
	
	
	
    <script src="/js/hwdas.js"></script>
    <script src="/js/vmdcore.js"></script>
    <script src="/js/vmdcomps.js"></script>
    <style>
        .x-viewport, .x-viewport body {
            overflow:auto !important
        }
    </style>
    <script>

        Ext.define("vmd.module.MyViewport" ,{
	extend:"Ext.Viewport",
	xtype:"vmd.module.MyViewport",
	layout:"border",
	initComponent: function(){
		this.items=[
			{
				xtype:"panel",
				id:"MyPanel_head",
				title:"Panel",
				header:false,
				border:true,
				height:60,
				x:0,
				y:0,
				layout:"border",
				bodyStyle:"background-color:skyblue;",
				region:"north",
				items:[
					{
						xtype:"panel",
						id:"MyPanel_logo",
						title:"Panel",
						header:false,
						border:false,
						height:100,
						region:"west",
						layout:"border",
						width:500,
						maskDisabled:true,
						bodyStyle:"background-color:#4169E1;",
						items:[
							{
								xtype:"container",
								id:"MyC_Logoimg",
								autoEl:"div",
								width:58,
								height:58,
								style:"background-image: url(/system/img/main/图片1.png);",
								x:0,
								y:0,
								region:"west"
							},
							{
								xtype:"label",
								id:"MyLb_name",
								text:"VMD2.0可视化定制工具",
								x:70,
								y:10,
								style:"font-size: 30px;color:white;",
								region:"center",
								split:false,
								cls:"lineHeight200"
							}
						]
					},
					{
						xtype:"panel",
						id:"MyP_Htool",
						title:"Panel",
						header:false,
						border:false,
						height:100,
						region:"east",
						width:250,
						layout:"absolute",
						style:"background-color:skyblue;",
						bodyStyle:"background-color:#4169E1;",
						items:[
							{
								xtype:"container",
								id:"MyC_zy",
								autoEl:"div",
								width:40,
								height:40,
								x:0,
								y:0,
								style:"background-image: url(/system/img/main/zy.png);"
							},
							{
								xtype:"container",
								id:"MyC_hjbl",
								autoEl:"div",
								width:40,
								height:40,
								x:60,
								y:0,
								style:"background-image: url(/system/img/main/hjbl.png);"
							},
							{
								xtype:"container",
								id:"MyC_grxx",
								autoEl:"div",
								width:40,
								height:40,
								x:120,
								y:0,
								style:"background-image: url(/system/img/main/grxx.png);"
							},
							{
								xtype:"container",
								id:"MyC_tc",
								autoEl:"div",
								width:40,
								height:40,
								x:180,
								y:0,
								style:"background-image: url(/system/img/main/tc.png);"
							},
							{
								xtype:"label",
								id:"MyLb_zy",
								text:"资源",
								x:5,
								y:40,
								style:"color:white;"
							},
							{
								xtype:"label",
								id:"MyLb_hjbl",
								text:"环境变量",
								x:50,
								y:40,
								style:"color:white;"
							},
							{
								xtype:"label",
								id:"MyLb_grxx",
								text:"个人信息",
								x:115,
								y:40,
								style:"color:white;"
							},
							{
								xtype:"label",
								id:"MyLb_tc",
								text:"退出",
								x:185,
								y:40,
								style:"color:white;"
							}
						]
					},
					{
						xtype:"panel",
						id:"MyPanel7",
						title:"Panel",
						header:false,
						border:false,
						height:100,
						region:"center",
						style:"background-color: #4169E1;",
						bodyStyle:"background-color:#4169E1;"
					}
				]
			},
			{
				xtype:"panel",
				id:"MyP_info",
				title:"Panel",
				header:false,
				border:true,
				height:640,
				x:0,
				y:60,
				layout:"border",
				region:"center",
				items:[
					{
						xtype:"panel",
						id:"MyP_ModelTree",
						title:"Panel",
						header:false,
						border:true,
						height:639,
						width:220,
						layout:"absolute",
						x:0,
						y:0,
						region:"west",
						items:[
							{
								xtype:"vmd.button",
								id:"btn_search",
								type:"(none)",
								size:"mini",
								x:197,
								y:0,
								icon:"search",
								width:30
							},
							{
								xtype:"vmd.tree",
								id:"hwTree",
								skin:"material",
								width:220,
								height:580,
								isdesign:false,
								x:0,
								y:30,
								afterrender:"hwTree_afterrender",
								onOpenEnd:"hwTree_onOpenEnd",
								nodeClick:"hwTree_nodeClick",
								listeners:{
									afterrender:hwTree_afterrender,
									onOpenEnd:hwTree_onOpenEnd,
									nodeClick:hwTree_nodeClick
								}
							},
							{
								xtype:"vmd.button",
								id:"button",
								text:"添加目录",
								type:"(none)",
								size:"mini",
								x:10,
								y:0,
								click:"button_click",
								disabled:true,
								listeners:{
									click:button_click
								}
							},
							{
								xtype:"vmd.button",
								id:"button1",
								text:"删除",
								type:"(none)",
								size:"mini",
								x:150,
								y:0,
								click:"button1_click",
								disabled:true,
								listeners:{
									click:button1_click
								}
							},
							{
								xtype:"vmd.button",
								id:"button2",
								text:"添加模块",
								type:"(none)",
								size:"mini",
								x:80,
								y:0,
								click:"button2_click",
								disabled:true,
								listeners:{
									click:button2_click
								}
							},
							{
								xtype:"textfield",
								id:"MyF_searchtext",
								fieldLabel:"Form Fields",
								x:0,
								y:0,
								width:200
							}
						]
					},
					{
						xtype:"panel",
						id:"MyP_jcxx",
						title:"Panel",
						header:false,
						border:true,
						height:640,
						width:900,
						x:220,
						y:0,
						layout:"absolute",
						region:"center",
						items:[
							{
								xtype:"panel",
								id:"MyP_jcxxinfo",
								title:"基础信息",
								header:false,
								border:true,
								height:600,
								layout:"border",
								cls:"height100",
								overCls:"height100",
								baseCls:"height100",
								items:[
									{
										xtype:"panel",
										id:"MyP_info1",
										title:"Panel",
										header:false,
										border:false,
										height:230,
										x:0,
										y:490,
										region:"center",
										layout:"absolute",
										items:[
											{
												xtype:"label",
												id:"MyLabel1",
												text:"模块编码：",
												x:40,
												y:50,
												region:"center"
											},
											{
												xtype:"textfield",
												id:"MyField7",
												fieldLabel:"Form Fields",
												x:110,
												y:390,
												width:450
											},
											{
												xtype:"label",
												id:"MyLabel8",
												text:"皮肤：",
												x:40,
												y:390,
												width:50
											},
											{
												xtype:"textfield",
												id:"MyField6",
												fieldLabel:"Form Fields",
												x:110,
												y:350,
												width:450
											},
											{
												xtype:"textfield",
												id:"MyField5",
												fieldLabel:"Form Fields",
												x:110,
												y:210,
												width:450,
												readOnly:true
											},
											{
												xtype:"textfield",
												id:"MyField4",
												fieldLabel:"Form Fields",
												x:110,
												y:170,
												width:450,
												readOnly:true
											},
											{
												xtype:"textfield",
												id:"MyField3",
												fieldLabel:"Form Fields",
												x:110,
												y:130,
												width:450,
												readOnly:true
											},
											{
												xtype:"textfield",
												id:"MyField2",
												fieldLabel:"Form Fields",
												x:110,
												y:90,
												width:450
											},
											{
												xtype:"label",
												id:"MyLabel7",
												text:"脚本：",
												x:40,
												y:350
											},
											{
												xtype:"label",
												id:"MyLabel6",
												text:"修改时间：",
												x:40,
												y:210
											},
											{
												xtype:"label",
												id:"MyLabel5",
												text:"创建时间：",
												x:40,
												y:170,
												region:"south"
											},
											{
												xtype:"label",
												id:"MyLabel4",
												text:"创建人：",
												x:40,
												y:130,
												region:"north"
											},
											{
												xtype:"label",
												id:"MyLabel3",
												text:"模块名称：",
												x:40,
												y:90,
												region:"east"
											},
											{
												xtype:"textfield",
												id:"MyField1",
												fieldLabel:"Form Fields",
												x:110,
												y:50,
												width:450,
												region:"west",
												readOnly:true
											},
											{
												xtype:"label",
												id:"MyLabel",
												text:"路径：",
												x:40,
												y:250
											},
											{
												xtype:"textfield",
												id:"MyField_path",
												fieldLabel:"Form Fields",
												x:110,
												y:250,
												width:450,
												readOnly:true,
												disabled:false
											},
											{
												xtype:"vmd.button",
												id:"button3",
												text:"界面设计",
												type:"info",
												size:"large",
												x:110,
												y:290,
												style:"color: white;",
												click:"button3_click",
												listeners:{
													click:button3_click
												}
											},
											{
												xtype:"label",
												id:"MyLabel2",
												text:"模块基础信息",
												x:40,
												y:10,
												style:"color: blue;    font-size: 20px;"
											}
										]
									},
									{
										xtype:"panel",
										id:"MyP_btng",
										title:"Panel",
										header:false,
										border:false,
										height:175,
										region:"south",
										layout:"absolute",
										y:500,
										items:[
											{
												xtype:"vmd.button",
												id:"btn_save",
												text:"保存",
												type:"info",
												size:"small",
												x:110,
												y:10,
												style:"color: white;",
												click:"btn_save_click",
												listeners:{
													click:btn_save_click
												}
											},
											{
												xtype:"vmd.button",
												id:"btn_yl",
												text:"预览",
												type:"info",
												size:"small",
												x:190,
												y:10,
												style:"color: white;",
												click:"btn_yl_click",
												listeners:{
													click:btn_yl_click
												}
											},
											{
												xtype:"vmd.button",
												id:"btn_zc",
												text:"注册发布",
												type:"info",
												size:"small",
												x:270,
												y:10,
												style:"color: white;",
												click:"btn_zc_click",
												listeners:{
													click:btn_zc_click
												}
											}
										]
									}
								]
							}
						]
					}
				]
			}
		]
		this.callParent();
		vmd.core.moduleInit(this.items, this);
			//初始化数据
function hwTree_afterrender(sender) {
    var mytree = hwTree;
    mytree.deleteChildItems(0);
    mytree.loadJSONObject({
        id: 0,
        text: "我的项目",
        item: []
    });
    mytree.itemObj = {};
    hwDas.ajax({
        das: {
            idedas: true
        },
        url: "CDEServcie/project/info",
        type: 'get',
        timeout: 50000,
        params: {},
        success: function(result) {
            var datajson = result.data[0].datas;
            var treeDataJson = [];
            for(var i = 0; i < datajson.length; i++) {
                mytree.insertNewChild(0, datajson[i].id, datajson[i].name);
                mytree.setItemImage2(datajson[i].id, "tree/projectclose.png", "tree/projectopen.png", "tree/projectclose.png");

            } 
			
	
        },
        error: function(msg) {
            Ext.Msg.alert("提示", "获取模块信息失败")
        }
    })


   
            //绑定右键菜单
    var menu = new dhtmlXMenuObject();
    //menu.setIconsPath("../common/images/menu/");
    menu.renderAsContextMenu();
    menu.attachEvent("onClick", onMenuClick);
    menu.addNewChild(menu.topId, 0, "newFord", "新建目录", false);
    menu.addNewChild(menu.topId, 1, "newMode", "新建模块", false);
    menu.addNewChild(menu.topId, 2, "delete", "删除", false);
    mytree.enableDragAndDrop(true);
	//
    //mytree.tree.enableContextMenu(menu);
	
    mytree.enableContextMenu(menu);
    
}

function hwTree_onOpenEnd(sender, id) {
    /*
     var proId = id;
     var mytree = this.tree
     var hasChild = mytree.hasChildren(proId);
     if(hasChild <= 0) {
         hwDas.ajax({
             das: {
                 idedas: false
             },
             url: "DataService/CDEServcie/module/category",
             type: 'get',
             timeout: 50000,
             params: {
                 project_id: proId
             },
             success: function(result) {
                 
                 var datajson = result.data[0].datas;
                 var treeDataJson = [];
                 for(var i = 0; i < datajson.length; i++) {
                     mytree.insertNewChild(proId, datajson[i].id, datajson[i].name);
                 }
                 //数据操作   
             },
             error: function(msg) {
                 alert("获取模块信息失败");
             }
         })
     } else {}
     */
}
//点击树节点操作
function hwTree_nodeClick(sender, id) {

    var proId = id;
    var mytree = hwTree;
    var hasChild = mytree.hasChildren(proId);
    //var selnode = mytree.item(proId);
    var selnode = {};
    var selnodepath = "";
    var projectId = "";
    var childParentId = "0";
    if(selnode.isModel) {
        MyField1.setValue(selnode.code);
        MyField2.setValue(selnode.text);
        MyField3.setValue(selnode.createuser);
        MyField4.setValue(selnode.createtime);
        MyField5.setValue(selnode.changetime);
        MyField_path.setValue(selnode.path);
        return;
    } else if(selnode.isProject) {
        projectId = proId;
        childParentId = "0";
    } else {
        projectId = selnode.projectId;
        childParentId = proId
    }
    if(hasChild <= 0 && !selnode.isModel) {
        hwDas.ajax({
            das: {
                idedas: true
            },
            url: "CDEServcie/module/category",
            type: 'get',
            timeout: 50000,
            params: {
                project_id: projectId,
                parent_id: childParentId
            },
            success: function(result) {

                var datajson = result.data[0].datas;
                var treeDataJson = [];
                for(var i = 0; i < datajson.length; i++) {
                    mytree.insertNewChild(proId, datajson[i].id, datajson[i].name);
                    mytree.setItemImage2(datajson[i].id, "tree/folderClosed.gif", "tree/folderOpen.gif", "tree/folderClosed.gif")
                    var treenode = mytree.item(datajson[i].id);
                    treenode.path = selnodepath + "/" + datajson[i].id;
                    treenode.projectId = projectId;
                    if(treenode) {
                        treenode.isFord = true;
                    }
                    mytree.itemObj[datajson[i].id] = treenode;
                }
                //数据操作   
            },
            error: function(msg) {
                Ext.Msg.alert("提示", "获取模块信息失败")
            }
        })
        if(selnode.isFord) {
            hwDas.ajax({
                das: {
                    idedas: true
                },
                url: "CDEServcie/module/info",
                type: 'get',
                timeout: 50000,
                params: {
                    category_id: childParentId
                },
                success: function(result) {

                    var datajson = result.data[0].datas;
                    var treeDataJson = [];
                    for(var i = 0; i < datajson.length; i++) {
                        mytree.insertNewChild(proId, datajson[i].id, datajson[i].name);
                        mytree.setItemImage2(datajson[i].id, "tree/model.png", "tree/model.png", "tree/model.png")
                        var treenode = mytree.item(datajson[i].id);
                        treenode.path = selnodepath + "/" + datajson[i].id;
                        treenode.projectId = projectId;
                        if(treenode) {
                            treenode.isModel = true;
                            treenode.createuser = datajson[i].row_created_by;
                            treenode.createtime = datajson[i].row_created_date;
                            treenode.changetime = datajson[i].row_changed_date;
                            treenode.code = datajson[i].code;
                        }
                        mytree.itemObj[datajson[i].id] = treenode;
                    }
                    //数据操作   
                },
                error: function(msg) {
                    Ext.Msg.alert("提示", "获取模块信息失败")
                }
            })
        }
    } else {}
}
//创建分类按钮操作
function button_click(sender) {
    var addford = function(fordname) {
        var mytree = hwTree;
        var selId = mytree.getSelectedItemId();
        var selnode = mytree.itemObj[selId];
        var selnodepath = selnode.path;
        var parentId;
        var projectId;
        var nodename = fordname;

        var newnodeid = newGuid(10);
        var newcode = newGuid(10);
        var xh = 10;
        if(selnode.isProject) {
            parentId = "0";
            projectId = selId;
        } else
        if(selnode.isModel) {
            return;
        } else if(selnode.isFord) {
            parentId = selId;
            projectId = selnode.projectId;
        }
        
        hwDas.ajax({
            das: {
                idedas: true
            },
            url: "CDEServcie/module/category",
            type: 'post',
            timeout: 50000,
            params: {
                parent_id: parentId,
                name: nodename,
                code: newcode,
                project_id: projectId,
                id: newnodeid,
                xh: xh
            },
            datas: [{
                parent_id: parentId,
                name: nodename,
                code: newcode,
                project_id: projectId,
                id: newnodeid,
                xh: xh
            }],
            success: function(result) {
                mytree.insertNewChild(selId, newnodeid, nodename);
                mytree.setItemImage2(newnodeid, "tree/folderClosed.gif", "tree/folderOpen.gif", "tree/folderClosed.gif")
                var treenode = mytree.item(newnodeid);
                treenode.path = selnodepath + "/" + newnodeid;
                treenode.projectId = projectId;
                if(treenode) {
                    treenode.isFord = true;
                }
                mytree.itemObj[newnodeid] = treenode;

            },
            error: function(msg) {
                Ext.Msg.alert("提示", "新建目录失败")
            }
        })
    }

    var fordname = new Ext.MyFordWin(addford);
    //fordname.callbackfun = addford;
    fordname.show();
}

function button2_click(sender) {
    var mytree = hwTree;
    var selId = mytree.getSelectedItemId();
    var selnode = mytree.itemObj[selId];
    if(selnode.isModel) {
        return;
    }
    MyField2.setValue();
    MyField3.setValue(Ext.util.Cookies.get('userName'));
    MyField4.setValue(Ext.Date.dateFormat(new Date(), 'y-M-d h:m:s'));
    MyField5.setValue(Ext.Date.dateFormat(new Date(), 'y-M-d h:m:s'));

    MyField1.setValue(newGuid(32));
}

//模块保存按钮操作
function btn_save_click(sender) {
    var mytree = hwTree;
    var selId = mytree.getSelectedItemId();
    var selnode = mytree.itemObj[selId];
    var selnodepath = selnode.path;
    if(selnode.isModel) {
        return;
    }
    var id = newGuid(10);
    var category_id = selId;
    var Project_id = selnode.projectId;
    var codeid = MyField1.getValue();
    var name = MyField2.getValue();
    var remark = "测试";
    var type = "0";
    var vmdpath = mytree.getp
        //保存模块基础信息
    hwDas.ajax({
            das: {
                idedas: true
            },
            url: "CDEServcie/module/info",
            type: 'post',
            timeout: 50000,
            params: {},
            datas: [{
                id: id,
                code: codeid,
                type: type,
                name: name,
                remark: remark,
                category_id: category_id,
                project_id: Project_id
            }],
            success: function(result) {
                mytree.insertNewChild(category_id, id, name);
                mytree.setItemImage2(id, "tree/model.png", "tree/model.png", "tree/model.png")
                var treenode = mytree.item(id);
                treenode.path = selnodepath + "/" + id;
                treenode.projectId = Project_id;
                if(treenode) {
                    treenode.isModel = true;
                    treenode.createuser = MyField3.getValue();
                    treenode.createtime = MyField4.getValue();
                    treenode.changetime = MyField5.getValue();
                    treenode.code = codeid
                }
                mytree.itemObj[id] = treenode;

            },
            error: function(msg) {
                Ext.Msg.alert("提示", "新建模块失败")
            }
        })
        //保存模块路径版本信息
    hwDas.ajax({
        das: {
            idedas: true
        },
        url: "CDEServcie/module/file",
        type: 'post',
        timeout: 50000,
        params: {},
        datas: [{
            filepath: selnodepath + "/" + MyField1.getValue(),
            version: 1,
            module_id: id
        }],
        success: function(result) {},
        error: function(msg) {
            Ext.Msg.alert("提示", "保存模块版本信息失败")
        }
    })
}


//删除目录 模块信息
function button1_click(sender) {
    var mytree = hwTree;
    var selId = mytree.getSelectedItemId();
    var selnode = mytree.itemObj[selId];
    var haschild = mytree.hasChildren(selId);
    //删除文件夹
    if(selnode.isFord) {
        if(haschild > 0) {
            alert("存在子目录或模块，请删除子目录或子模块后再删除该目录")
            return
        }
        hwDas.ajax({
            das: {
                idedas: true
            },
            url: "CDEServcie/module/category",
            type: 'delete',
            timeout: 50000,
            params: {
                id: selId
            },
            success: function(result) {
                mytree.deleteItem(selId, true);
                //mytree.itemObj.delete(selId);
            },
            error: function(msg) {
                Ext.Msg.alert("提示", "删除目录失败")
            }
        })
        return;
    }
    //删除模块
    if(selnode.isModel) {
        //先删除模块信息
        hwDas.ajax({
                das: {
                    idedas: true
                },
                url: "CDEServcie/module/info",
                type: 'delete',
                timeout: 50000,
                params: {
                    id: selId
                },
                success: function(result) {
                    mytree.deleteItem(selId, true);
                    // mytree.itemObj.delete(selId);
                },
                error: function(msg) {
                    Ext.Msg.alert("提示", "删除模块信息失败")
                    return
                }
            })
            //删除模块文件对应关系
        hwDas.ajax({
            das: {
                idedas: true
            },
            url: "CDEServcie/module/file",
            type: 'delete',
            timeout: 50000,
            params: {
                module_id: selId
            },
            success: function(result) {},
            error: function(msg) {
                Ext.Msg.alert("提示", "删除模块文件信息失败")
            }
        })
        return;
    }
}

function btn_zc_click(sender) {
    Ext.Msg.alert("提示", "功能开发中......")
}

function btn_yl_click(sender) {

    var mytree = hwTree;
    var selId = mytree.getSelectedItemId();
    var selnode = mytree.itemObj[selId];
    var url = '/modules' + selnode.path + '.html';
    window.open(url, selnode.text);

}
//页面设计
function button3_click(sender) {
    var mytree = hwTree;
    var selId = mytree.getSelectedItemId();
    var selnode = mytree.itemObj[selId];

    /*var pre = new vmdDesigner({
           title: selnode.text+"界面设计",
           params: {
               id: selnode.id,
               name:selnode.text,
               path:'modules'+selnode.path+'.vmd'
           }
       });
       pre.show();
       pre.maximize()
       */
    var params = {
        id: selnode.id,
        name: escape(selnode.text),
        path: 'modules' + selnode.path + '.vmd'
    }

    window.open('/design/default.html?' + Ext.urlEncode(params))


}







/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//自定义自定义方法

function newGuid(len) {
    var length = 32;
    if(len)
        length = len
    var guid = "";
    for(var i = 1; i <= length; i++) {
        var n = Math.floor(Math.random() * 16.0).toString(16);
        guid += n;
    }
    return guid;
}

//文件夹名称录入框
Ext.MyFordWin = Ext.extend(Ext.Window, {
    xtype: "window",
    title: "文件夹对话框",
    width: 300,
    height: 130,
    layout: "form",
    bodyStyle: 'padding:15px',
    labelAlign: "left",
    labelWidth: 40,
    constructor: function(callback) {
        this.callback = callback;
        this.callParent();
    },
    initComponent: function() {
        var me = this;
        this.fbar = [{
            text: "确定",
            handler: function() {
                me.callback(Ext.getCmp('filename').getValue())
                me.close()
            }
        }, {
            text: "取消",
            handler: function() {
                me.close()
            }
        }];

        this.items = [{
            id: 'filename',
            xtype: "textfield",
            fieldLabel: "名称",
            anchor: "100%"
        }]
        Ext.MyFordWin.superclass.initComponent.call(this);
    }
})

function onMenuClick(menuitemId) {
if(menuitemId=="newFord")
{button_click();}
else if(menuitemId=="newMode")
{button2_click();}
else if(menuitemId=="delete")
{button1_click();}
else
{}
}
	}
})
        Ext.onReady(function () {
            Ext.create('vmd.module.MyViewport', {
                renderTo: document.body
            })


        })

      </script>
</head>
<body>
</body>
</html>
