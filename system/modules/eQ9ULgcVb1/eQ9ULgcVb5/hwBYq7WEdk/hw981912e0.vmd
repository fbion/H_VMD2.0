{"vmdversion":"2.0.5.191228","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MainViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"fit\",\"afterrender\":\"MainViewport_afterrender\",\"beforerender\":\"MainViewport_beforerender\",\"style\":\"font-size: 14px;    color: #646464;\",\"cls\":\"aaaa\"},\"cn\":[{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"id\":\"div\",\"border\":false},\"cn\":[{\"cid\":\"container\",\"id\":\"div1\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"west\",\"id\":\"div1\",\"width\":246,\"layout\":\"border\",\"border\":false,\"style\":\"border-right: 1px solid #dddddd;\"},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"region\":\"north\",\"height\":40,\"layout\":\"hbox\",\"border\":false,\"width\":245,\"style\":\"border-bottom: 1px solid #dddddd;\"},\"cn\":[{\"cid\":\"vmdImg\",\"id\":\"hwImg1\",\"layoutConfig\":{},\"userConfig\":{\"src\":\"/system/modules/eQ9ULgcVb1/img/一级图标.png\",\"width\":18,\"height\":18,\"margins\":\"0 10\",\"click\":\"hwImg1_click\",\"afterrender\":\"hwImg1_afterrender\"}},{\"cid\":\"vmdImg\",\"id\":\"hwImg\",\"layoutConfig\":{},\"userConfig\":{\"src\":\"/system/modules/eQ9ULgcVb1/img/网址.png\",\"width\":18,\"height\":18,\"margins\":\"0 10 0 0\",\"click\":\"hwImg_click\",\"afterrender\":\"hwImg_afterrender\"}},{\"cid\":\"vmdImg\",\"id\":\"hwImg2\",\"layoutConfig\":{},\"userConfig\":{\"src\":\"/system/modules/eQ9ULgcVb1/img/垃圾箱.png\",\"width\":18,\"height\":18,\"click\":\"hwImg2_click\",\"afterrender\":\"hwImg2_afterrender\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv1\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"layout\":\"fit\",\"border\":false},\"cn\":[{\"cid\":\"vmdTreeEx\",\"id\":\"tree\",\"layoutConfig\":{},\"userConfig\":{\"width\":320,\"rootImg\":\"/system/modules/eQ9ULgcVb1/img/一级图标.png\",\"folderImg\":\"/system/modules/eQ9ULgcVb1/img/一级图标.png\",\"leafImg\":\"/system/modules/eQ9ULgcVb1/img/一级图标.png\",\"hideRoot\":true,\"store\":\"store_tree\",\"parentField\":\"p_id\",\"valueField\":\"id\",\"textField\":\"name\",\"rootValue\":\"root\",\"rootText\":\"\",\"allowSameNode\":false,\"checkBox\":true,\"checkBoxFiled\":\"id\",\"checkedValue\":\"\",\"folderValue\":\"\",\"leafValue\":\"\",\"loadType\":\"全部加载\",\"cascading\":false,\"checkChanged\":\"tree_checkChanged\",\"nodeclick\":\"tree_nodeclick\",\"contentMenu\":\"hwMenu\",\"nodedraggable\":false,\"afterBindData\":\"tree_afterBindData\",\"style\":\"font-size: 14px;\",\"afterrender\":\"tree_afterrender\"}},{\"cid\":\"vmdMenu\",\"id\":\"hwMenu\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItem\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"添加分组\",\"hidden\":false,\"click\":\"hwMenuItem_click\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItem1\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"添加地址\",\"click\":\"hwMenuItem1_click\"}},{\"cid\":\"vmdMenuItem\",\"id\":\"hwMenuItem2\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"删除\",\"hidden\":false,\"click\":\"hwMenuItem2_click\"}}]}]}]},{\"cid\":\"container\",\"id\":\"div2\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"id\":\"div2\",\"layout\":\"border\",\"border\":false,\"style\":\"font-size: 14px;\"},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv2\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"north\",\"height\":40,\"border\":false,\"layout\":\"absolute\",\"style\":\"border-bottom: 1px solid #dddddd;\"},\"cn\":[{\"cid\":\"label\",\"id\":\"headline\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":10,\"text\":\"说明\",\"style\":\"color: #5f5f5f;    font-size: 14px;    font-family: \\\"微软雅黑\\\";    font-weight: bold\",\"width\":660,\"id\":\"headline\"}}]},{\"cid\":\"container\",\"id\":\"hwDiv3\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"border\":false,\"layout\":\"border\"},\"cn\":[{\"cid\":\"container\",\"id\":\"micrservinfo\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"border\":false,\"height\":669,\"width\":548,\"layout\":\"absolute\",\"hidden\":true,\"id\":\"micrservinfo\",\"hideMode\":\"display\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel4\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":40,\"text\":\"微服务名称：\",\"width\":100,\"style\":\"text-align: right;\"}},{\"cid\":\"textfield\",\"id\":\"micrservinfo_name\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":35,\"allowBlank\":false,\"width\":200,\"id\":\"micrservinfo_name\"}},{\"cid\":\"label\",\"id\":\"hwLabel5\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":80,\"text\":\"微服务标识：\",\"style\":\"text-align: right\",\"width\":100}},{\"cid\":\"textfield\",\"id\":\"micrservinfo_identify\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":75,\"allowBlank\":false,\"width\":200,\"id\":\"micrservinfo_identify\"}},{\"cid\":\"label\",\"id\":\"hwLabel6\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":120,\"text\":\"说明：\",\"width\":100,\"style\":\"text-align: right\"}},{\"cid\":\"textarea\",\"id\":\"micrservinfo_mark\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":115,\"growMin\":\"\",\"width\":200,\"height\":80,\"id\":\"micrservinfo_mark\"}},{\"cid\":\"vmdButton\",\"id\":\"button2\",\"layoutConfig\":{},\"userConfig\":{\"x\":150,\"y\":260,\"width\":70,\"height\":28,\"text\":\"保存\",\"style\":\"color: #fff;    background-color: #20A0FF;    font-size: 14px;    font-family: \\\"微软雅黑\\\";    border: none;\",\"click\":\"button2_click\"}}]},{\"cid\":\"container\",\"id\":\"micrserchild\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"west\",\"border\":false,\"hidden\":true,\"layout\":\"absolute\",\"id\":\"micrserchild\",\"hideMode\":\"display\",\"height\":448},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel7\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":40,\"text\":\"服务名称：\",\"width\":80,\"style\":\"text-align: right;\"}},{\"cid\":\"textfield\",\"id\":\"micrserchild_name\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":35,\"allowBlank\":false,\"width\":200,\"id\":\"micrserchild_name\"}},{\"cid\":\"label\",\"id\":\"hwLabel8\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":80,\"text\":\"服务地址：\",\"style\":\"text-align: right\",\"width\":80}},{\"cid\":\"textfield\",\"id\":\"micrserchild_url\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":75,\"allowBlank\":true,\"width\":200,\"id\":\"micrserchild_url\",\"afterrender\":\"micrserchild_url_afterrender\"}},{\"cid\":\"label\",\"id\":\"hwLabel9\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":120,\"text\":\"说明：\",\"width\":80,\"style\":\"text-align: right\"}},{\"cid\":\"textarea\",\"id\":\"micrserchild_mark\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":115,\"growMin\":\"\",\"width\":200,\"height\":80,\"id\":\"micrserchild_mark\"}},{\"cid\":\"vmdButton\",\"id\":\"button3\",\"layoutConfig\":{},\"userConfig\":{\"x\":150,\"y\":260,\"width\":70,\"height\":28,\"text\":\"保存\",\"style\":\"color: #fff;    background-color: #20A0FF;    font-size: 14px;    font-family: \\\"微软雅黑\\\";    border: none;\",\"click\":\"button3_click\"}}]},{\"cid\":\"container\",\"id\":\"explain\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"north\",\"border\":false,\"width\":466,\"layout\":\"absolute\",\"hidden\":false,\"id\":\"explain\",\"hideMode\":\"display\",\"height\":0},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel10\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":20,\"text\":\"操作提示：\",\"width\":140,\"height\":20,\"style\":\"font-size: 14px;\"}},{\"cid\":\"label\",\"id\":\"hwLabel11\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":50,\"text\":\"1.请选择左侧节点进行编辑\",\"width\":200,\"height\":20,\"style\":\"font-size: 14px\"}},{\"cid\":\"label\",\"id\":\"hwLabel12\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":80,\"text\":\"2.支持节点的鼠标右键功能\",\"width\":200,\"height\":20,\"style\":\"font-size: 14px\"}}]},{\"cid\":\"container\",\"id\":\"micrervlist\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"west\",\"width\":728,\"border\":false,\"style\":\"overflow-x: hidden;    overflow-y: scroll\",\"id\":\"micrervlist\",\"hidden\":true,\"hideMode\":\"display\",\"layout\":\"anchor\",\"height\":600}}]}]},{\"cid\":\"container\",\"id\":\"hwDiv6\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"region\":\"south\",\"layout\":\"hbox\",\"style\":\"background-color: #f2f2f2;    border-bottom-color: #fff;    border-left-color: #fff;    border-right-color: #fff;\",\"height\":35},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button4\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"确定\",\"style\":\"color: #fff;    background-color: #20A0FF;    font-size: 14px;    font-family: \\\"微软雅黑\\\";    border: none;\",\"margins\":\"0 20\",\"click\":\"button4_click\",\"size\":\"small\"}},{\"cid\":\"vmdButton\",\"id\":\"button5\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"取消\",\"margins\":\"0 20\",\"click\":\"button5_click\",\"size\":\"small\"}}]}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdDataSet\",\"id\":\"dataset\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"vmdDataSet\"},\"cn\":[{\"cid\":\"vmdJsonStore\",\"id\":\"store_tree\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"vmdJsonStore\",\"storeConfig\":\"{\\\"id\\\":\\\"m8GYRhBgrp\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"CDEServcie/micservice/micrserver\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"微服务树结构\\\",\\\"getMethods\\\":[],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"cname\\\":\\\"\\\",\\\"dname\\\":\\\"\\\",\\\"dtype\\\":\\\"string\\\",\\\"type\\\":\\\"string\\\",\\\"primary\\\":false,\\\"nullable\\\":false,\\\"length\\\":\\\"\\\",\\\"precision\\\":\\\"\\\",\\\"unit\\\":\\\"\\\",\\\"dunit\\\":\\\"\\\",\\\"rule\\\":{}},{\\\"name\\\":\\\"name\\\",\\\"cname\\\":\\\"\\\",\\\"dname\\\":\\\"\\\",\\\"dtype\\\":\\\"string\\\",\\\"type\\\":\\\"string\\\",\\\"primary\\\":false,\\\"nullable\\\":false,\\\"length\\\":\\\"\\\",\\\"precision\\\":\\\"\\\",\\\"unit\\\":\\\"\\\",\\\"dunit\\\":\\\"\\\",\\\"rule\\\":{}},{\\\"name\\\":\\\"p_id\\\",\\\"cname\\\":\\\"\\\",\\\"dname\\\":\\\"\\\",\\\"dtype\\\":\\\"string\\\",\\\"type\\\":\\\"string\\\",\\\"primary\\\":false,\\\"nullable\\\":false,\\\"length\\\":\\\"\\\",\\\"precision\\\":\\\"\\\",\\\"unit\\\":\\\"\\\",\\\"dunit\\\":\\\"\\\",\\\"rule\\\":{}},{\\\"name\\\":\\\"identify\\\",\\\"cname\\\":\\\"\\\",\\\"dname\\\":\\\"\\\",\\\"dtype\\\":\\\"string\\\",\\\"type\\\":\\\"string\\\",\\\"primary\\\":false,\\\"nullable\\\":false,\\\"length\\\":\\\"\\\",\\\"precision\\\":\\\"\\\",\\\"unit\\\":\\\"\\\",\\\"dunit\\\":\\\"\\\",\\\"rule\\\":{}},{\\\"name\\\":\\\"mark\\\",\\\"cname\\\":\\\"\\\",\\\"dname\\\":\\\"\\\",\\\"dtype\\\":\\\"string\\\",\\\"type\\\":\\\"string\\\",\\\"primary\\\":false,\\\"nullable\\\":false,\\\"length\\\":\\\"\\\",\\\"precision\\\":\\\"\\\",\\\"unit\\\":\\\"\\\",\\\"dunit\\\":\\\"\\\",\\\"rule\\\":{}},{\\\"name\\\":\\\"type\\\",\\\"cname\\\":\\\"\\\",\\\"dname\\\":\\\"\\\",\\\"dtype\\\":\\\"string\\\",\\\"type\\\":\\\"string\\\",\\\"primary\\\":false,\\\"nullable\\\":false,\\\"length\\\":\\\"\\\",\\\"precision\\\":\\\"\\\",\\\"unit\\\":\\\"\\\",\\\"dunit\\\":\\\"\\\",\\\"rule\\\":{}},{\\\"name\\\":\\\"code\\\",\\\"cname\\\":\\\"\\\",\\\"dname\\\":\\\"\\\",\\\"dtype\\\":\\\"string\\\",\\\"type\\\":\\\"string\\\",\\\"primary\\\":false,\\\"nullable\\\":false,\\\"length\\\":\\\"\\\",\\\"precision\\\":\\\"\\\",\\\"unit\\\":\\\"\\\",\\\"dunit\\\":\\\"\\\",\\\"rule\\\":{}}]}\",\"id\":\"store_tree\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"id\"},\"name\":\"id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"p_id\"},\"name\":\"p_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"identify\"},\"name\":\"identify\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"mark\"},\"name\":\"mark\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"type\"},\"name\":\"type\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"code\"},\"name\":\"code\"}]}]}]},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdsubviewport\",\"id\":\"SubView_Window\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdSubWindow\",\"id\":\"subWin\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"vmdSubWindow\"}},{\"cid\":\"vmdSubView\",\"id\":\"subView\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"vmdSubView\",\"layout\":\"border\",\"width\":337,\"height\":242},\"cn\":[{\"cid\":\"container\",\"id\":\"hwDiv4\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"north\",\"height\":189,\"layout\":\"absolute\"},\"cn\":[{\"cid\":\"label\",\"id\":\"hwLabel\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"名称：\",\"height\":20,\"x\":50,\"y\":20}},{\"cid\":\"textfield\",\"id\":\"hwText\",\"layoutConfig\":{},\"userConfig\":{\"x\":90,\"y\":20,\"width\":200}},{\"cid\":\"label\",\"id\":\"hwLabel1\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"说明：\",\"x\":50,\"y\":70}},{\"cid\":\"textarea\",\"id\":\"hwTextArea\",\"layoutConfig\":{},\"userConfig\":{\"x\":90,\"y\":70,\"width\":200,\"height\":100}}]},{\"cid\":\"container\",\"id\":\"hwDiv5\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"region\":\"center\",\"height\":58,\"layout\":\"hbox\",\"style\":\"background-color: #f8f8f8;    border-bottom-color: #fff;    border-left-color: #fff;    border-right-color: #fff;\"},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"确定\",\"width\":68}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"0 20\",\"text\":\"取消\",\"width\":68}}]}]}]}]}","vmdevents":"var url = location.href;\n// 提取url中的解析字符串\nfunction UrlParamHash(url) {\n    var params = [],\n        h;\n    var hash = url.slice(url.indexOf(\"?\") + 1).split('&');\n    for (var i = 0; i < hash.length; i++) {\n        h = hash[i].split(\"=\");\n        params[h[0]] = h[1];\n    }\n    return params;\n}\nvar params = UrlParamHash(url);\n\nfunction MainViewport_beforerender(sender) {\n\n\n    if (params.type == 1) {\n        micrservinfo_name.readOnly = false;\n        micrservinfo_identify.readOnly = false;\n        micrservinfo_mark.readOnly = false;\n        micrserchild_name.readOnly = false;\n        micrserchild_url.readOnly = false;\n        micrserchild_mark.readOnly = false;\n        button2.show();\n        button3.show();\n        // hwDiv6.hide();\n        div2.show();\n        hwDiv.show();\n        div1.setWidth(246);\n        tree.checkBox = false;\n    } else if (params.type == 2) {\n        micrservinfo_name.readOnly = true;\n        micrservinfo_identify.readOnly = true;\n        micrservinfo_mark.readOnly = true;\n        micrserchild_name.readOnly = true;\n        micrserchild_url.readOnly = true;\n        micrserchild_mark.readOnly = true;\n        button2.hide();\n        button3.hide();\n        // hwDiv6.show();\n        hwDiv.hide();\n        div2.hide();\n        div1.setWidth(340);\n        tree.checkBox = true;\n    }\n}\n\nfunction MainViewport_afterrender(sender) {\n\n}\n// function MainViewport_afterrender(sender) {\n//     if (params.type == 1) {\n\n//         micrservinfo_name.readOnly = false;\n//         micrservinfo_identify.readOnly = false;\n//         micrservinfo_mark.readOnly = false;\n//         micrserchild_name.readOnly = false;\n//         micrserchild_url.readOnly = false;\n//         micrserchild_mark.readOnly = false;\n//         button2.show();\n//         button3.show();\n//         tree.checkBox = false;\n//     } else if (params.type == 2) {\n//         micrservinfo_name.readOnly = true;\n//         micrservinfo_identify.readOnly = true;\n//         micrservinfo_mark.readOnly = true;\n//         micrserchild_name.readOnly = true;\n//         micrserchild_url.readOnly = true;\n//         micrserchild_mark.readOnly = true;\n//         button2.hide();\n//         button3.hide();\n//         tree.checkBox = true;\n//     }\n// }\n// 设置操作类型\nvar optiontype;\n\nfunction tree_checkChanged(sender, node, checked) {\n    // 控制子选项只能单选\n    if (node.parentNode.attributes.id != 'root') {\n        var parent = node.parentNode.childNodes;\n        if (!checked)\n            return\n        for (var i = 0; i < parent.length; i++) {\n            if (parent[i].attributes.checked && node != parent[i]) {\n                parent[i].getUI().toggleCheck(false)\n\n                // parent[i].getUI().checkbox.checked=false;\n            }\n        }\n    }\n    // 右侧展示信息\n    // adddispaly();\n\n}\n// 隐藏右侧所有面板\nfunction hideAllpanel() {\n    micrervlist.hide();\n    micrserchild.hide();\n    micrservinfo.hide();\n    explain.hide();\n}\n// 添加右侧展示信息\nfunction adddispaly() {\n    headline.setText(\"微服务：数据展示\")\n    hideAllpanel();\n    micrervlist.show();\n    micrervlist.removeAll();\n    var data = tree.getChecked();\n    for (var i = 0; i < data.length; i++) {\n        var Micrservicesinfo = new vmd.ux.Micrservicesinfo({\n            id: 'Micrservicesinfo_' + i\n        });\n        micrervlist.add(Micrservicesinfo);\n        micrervlist.doLayout();\n        if (data[i].nodeDataJson.p_id == 'root') {\n            Micrservicesinfo.setLabel('微服务名称：', '微服务标识：', '说明：');\n        } else {\n            Micrservicesinfo.setLabel('服务名称：', '服务地址（IP/域名）：', '说明：');\n        }\n\n        Micrservicesinfo.setInput(data[i].nodeDataJson.name, data[i].nodeDataJson.identify, data[i].nodeDataJson.mark)\n    }\n\n}\n\n// 点击展示树节点信息\nfunction tree_nodeclick(sender, node, e) {\n\n    button2.disabled;\n    var data = node.nodeDataJson\n    headline.setText(\"微服务：\" + data.name);\n    hideAllpanel();\n    optiontype = 'edit';\n    if (data.p_id == 'root') {\n        // identify\n        micrservinfo.show();\n        if (data.type == 1) {\n            micrservinfo_name.disable();\n            micrservinfo_identify.disable();\n            micrservinfo_mark.disable();\n        } else {\n            micrservinfo_name.enable();\n            micrservinfo_identify.enable();\n            micrservinfo_mark.enable();\n        }\n        micrservinfo_name.setValue(data.name);\n        micrservinfo_identify.setValue(data.identify);\n        micrservinfo_mark.setValue(data.mark);\n    } else {\n        micrserchild.show();\n        // micrservinfo_name.enable();\n        // micrservinfo_identify.enable();\n        // micrservinfo_mark.enable();\n        micrserchild_name.setValue(data.name);\n        micrserchild_url.setValue(data.identify);\n        micrserchild_mark.setValue(data.mark);\n    }\n\n\n}\n// 添加微服务分组\nfunction addmicrserlist() {\n    if (micrservinfo_name.activeError || micrservinfo_identify.activeError) {\n        alert(\"微服务书写不规范，请核实后再保存!\")\n        return;\n    }\n    var submit = {\n        id: vmd.getGuid(36),\n        code: micrservinfo_identify.getValue(),\n        name: micrservinfo_name.getValue(),\n        mark: micrservinfo_mark.getValue(),\n        type: 2,\n    }\n\n    // 添加数据\n    hwDas.add({\n            host: vmd.workspace.dataServiceIp,\n            url: 'CDEServcie/micservice/micservicelist'\n        }, {}, {}, submit,\n        function(result) {\n            if (result.isSucceed) {\n                vmd.tip('微服务添加成功！', 'success');\n                // tree.addNode('root', submit.id, submit.name);\n                store_tree.toRefresh();\n            }\n        },\n        function(msg) {\n            Ext.Msg.alert(\"提示\", \"数据异常，请与管理员联系\");\n        }\n    );\n}\n\n// 修改微服务分组\nfunction editmicrserlist() {\n    if (micrservinfo_name.activeError || micrservinfo_identify.activeError) {\n        alert(\"微服务书写不规范，请核实后再保存!\")\n        return;\n    }\n\n    var data = tree.getSelNode().nodeDataJson;\n    if (data.type == 1) {\n        alert(\"此分组信息不允许修改!\")\n        return;\n    }\n    var submit = {\n        id: data.id,\n        code: micrservinfo_identify.getValue(),\n        name: micrservinfo_name.getValue(),\n        mark: micrservinfo_mark.getValue(),\n        type: data.type\n    }\n    // 修改数据\n    hwDas.edit({\n            host: vmd.workspace.dataServiceIp,\n            url: 'CDEServcie/micservice/micservicelist'\n        }, {}, {}, submit,\n        function(result) {\n            if (result.isSucceed) {\n                vmd.tip('微服务修改成功！', 'success');\n                tree.getSelNode().setText(submit.name);\n                headline.setText(\"微服务：\" + submit.name);\n                tree.getSelNode().nodeDataJson.name = submit.name;\n                tree.getSelNode().nodeDataJson.identify = submit.code;\n                tree.getSelNode().nodeDataJson.mark = submit.mark;\n                // store_tree.toRefresh();\n            } else {\n                Ext.Msg.alert(\"提示\", \"微服务修改失败\");\n            }\n            //成功回调\n        },\n        function(msg) {\n            //失败提示\n            Ext.Msg.alert(\"提示\", \"数据异常，请与管理员联系\");\n        }\n    );\n}\n// 删除服务分组\nfunction delmicrserlist() {\n    var data = tree.getSelNode().nodeDataJson;\n    if (data.type == 1) {\n        vmd.tip('该项不允许删除！', 'warning');\n        return;\n    }\n    if (params.select) {\n        var selectData = JSON.parse(decodeURIComponent(params.select));\n        for (i in selectData) {\n            if (data.id == selectData[i]) {\n                vmd.tip('该分组信息正在使用，请在微服务移除后操作', 'warning');\n                return\n            }\n        }\n    }\n    //删除数据\n    hwDas.del({\n            host: vmd.workspace.dataServiceIp,\n            url: 'CDEServcie/micservice/micservicelist'\n        }, {}, {\n            'id': data.id\n        },\n        function(result) {\n            if (result.isSucceed) {\n                vmd.tip('删除成功！', 'success');\n                tree.getSelNode().remove();\n                // store_tree.toRefresh();\n            } else {\n                Ext.Msg.alert(\"提示\", \"删除失败失败\");\n            }\n        },\n        function(msg) {\n            Ext.Msg.alert(\"提示\", \"数据异常，请与管理员联系\");\n        }\n    )\n}\n// 添加服务子项\nfunction addmicrserchild() {\n    if (micrserchild_url.activeError || micrserchild_name.activeError) {\n        alert(\"微服务书写不规范，请核实后再保存!\")\n        return;\n    }\n    var data = tree.getSelNode().nodeDataJson;\n    var submit = {\n        id: vmd.getGuid(36),\n        code: data.identify,\n        name: micrserchild_name.getValue(),\n        url: micrserchild_url.getValue(),\n        mark: micrserchild_mark.getValue(),\n        micserviceid: data.id,\n    }\n\n    // 添加数据\n    hwDas.add({\n            host: vmd.workspace.dataServiceIp,\n            url: 'CDEServcie/micservice/micserviceaddress'\n        }, {}, {}, submit,\n        function(result) {\n            if (result.isSucceed) {\n                vmd.tip('服务地址添加成功！', 'success');\n                // tree.addNode('root', submit.id, submit.name);\n                tree.addNode(submit.micserviceid, submit.id, submit.name + \"(\" + submit.url + \")\");\n                var newnode = tree.getNodeById(submit.id);\n                newnode.nodeDataJson.name = submit.name;\n                newnode.nodeDataJson.identify = submit.url;\n                newnode.nodeDataJson.mark = submit.mark;\n                newnode.setIcon(\"{资源中心&&资源中心服务器}/图片/公用图片/网址.png\");\n                newnode.select();\n                tree_nodeclick(tree, newnode);\n                // store_tree.toRefresh();\n            }\n        },\n        function(msg) {\n            Ext.Msg.alert(\"提示\", \"数据异常，请与管理员联系\");\n        }\n    );\n}\n\n// 修改微服务子项\nfunction editmicrserchild() {\n    if (micrserchild_url.activeError || micrserchild_name.activeError) {\n        alert(\"微服务书写不规范，请核实后再保存!\")\n        return;\n    }\n    var data = tree.getSelNode().nodeDataJson;\n    var submit = {\n        id: data.id,\n        code: data.code,\n        name: micrserchild_name.getValue(),\n        url: micrserchild_url.getValue(),\n        mark: micrserchild_mark.getValue(),\n        micserviceid: data.p_id\n    }\n    // 修改数据\n    hwDas.edit({\n            host: vmd.workspace.dataServiceIp,\n            url: 'CDEServcie/micservice/micserviceaddress'\n        }, {}, {}, submit,\n        function(result) {\n            if (result.isSucceed) {\n                vmd.tip('微服务修改成功！', 'success');\n                tree.getSelNode().setText(submit.name + \"(\" + submit.url + \")\");\n                headline.setText(\"微服务：\" + submit.name);\n                tree.getSelNode().nodeDataJson.name = submit.name;\n                tree.getSelNode().nodeDataJson.identify = submit.url;\n                tree.getSelNode().nodeDataJson.mark = submit.mark;\n                // store_tree.toRefresh();\n            } else {\n                Ext.Msg.alert(\"提示\", \"微服务修改失败\");\n            }\n            //成功回调\n        },\n        function(msg) {\n            //失败提示\n            Ext.Msg.alert(\"提示\", \"数据异常，请与管理员联系\");\n        }\n    );\n}\n\n// 删除微服务子项\nfunction delmicrserchild() {\n    var data = tree.getSelNode().nodeDataJson;\n    if (params.select) {\n        var selectData = JSON.parse(decodeURIComponent(params.select));\n        for (i in selectData) {\n            if (data.id == selectData[i]) {\n                vmd.tip('该分组信息正在使用，请在微服务移除后操作', 'warning');\n                return\n            }\n        }\n    }\n    //删除数据\n    hwDas.del({\n            host: vmd.workspace.dataServiceIp,\n            url: 'CDEServcie/micservice/micserviceaddress'\n        }, {}, {\n            'id': data.id\n        },\n        function(result) {\n            if (result.isSucceed) {\n                vmd.tip('删除成功！', 'success');\n                var newnode = tree.getSelNode();\n                tree_nodeclick(tree, newnode.parentNode);\n                tree.getSelNode().remove();\n                // store_tree.toRefresh();\n            } else {\n                Ext.Msg.alert(\"提示\", \"删除失败失败\");\n            }\n        },\n        function(msg) {\n            Ext.Msg.alert(\"提示\", \"数据异常，请与管理员联系\");\n        }\n    )\n}\n\n\n\nfunction button2_click(sender, e) {\n    if (optiontype == 'edit') {\n        editmicrserlist();\n    } else if (optiontype == 'add') {\n        addmicrserlist();\n    }\n\n}\n\nfunction button3_click(sender, e) {\n    if (optiontype == 'edit') {\n        editmicrserchild();\n    } else if (optiontype == 'add') {\n        addmicrserchild();\n    }\n\n}\n// 打开添加服务分组\nfunction hwImg1_click(sender) {\n    optiontype = 'add';\n    headline.setText(\"微服务：添加微服务\");\n    hideAllpanel();\n    micrservinfo.show();\n    micrservinfo_name.setValue('');\n    micrservinfo_identify.setValue('');\n    micrservinfo_mark.setValue('');\n}\n// 打开添加服务子项\nfunction hwImg_click(sender) {\n    if (!tree.getSelNode() || tree.getSelNode().nodeDataJson.p_id != \"root\") {\n        vmd.tip('请选择要添加地址的外部分组', 'warning');\n    } else {\n        optiontype = 'add';\n        headline.setText(\"微服务：添加服务地址\");\n        hideAllpanel();\n        micrserchild.show();\n        micrserchild_name.setValue('');\n        micrserchild_url.setValue('');\n        micrserchild_mark.setValue('');\n    }\n\n}\n// 点击删除图标\nfunction hwImg2_click(sender) {\n    if (!tree.getSelNode()) {\n        vmd.tip('请选择删除项', 'warning');\n    } else {\n        Ext.Msg.confirm('提示', '确定要删除选中的组件信息？', function(type) {\n            if (type == 'yes') {\n                if (tree.getSelNode().nodeDataJson.p_id == 'root') {\n                    delmicrserlist();\n                } else {\n                    delmicrserchild();\n                }\n            }\n        })\n\n    }\n}\n\nfunction hwMenuItem_click(sender, e) {\n    hwImg1_click()\n}\n\nfunction hwMenuItem1_click(sender, e) {\n    hwImg_click(sender)\n}\n\nfunction hwMenuItem2_click(sender, e) {\n    hwImg2_click()\n}\n\nfunction button4_click(sender, e) {\n\n    parent.affirm_windows(tree.getChecked());\n}\n\n\nfunction tree_afterBindData(sender) {\n    if (params.select) {\n        var data = JSON.parse(decodeURIComponent(params.select));\n    }\n    var treenode = tree.nodeHash;\n    for (var i in treenode) {\n        if (treenode[i].id != 'root') {\n            if (params.select) {\n                var data = JSON.parse(decodeURIComponent(params.select));\n                for (var j = 0; j < data.length; j++) {\n                    if (treenode[i].id == data[j]) {\n                        treenode[i].getUI().toggleCheck(true);\n                        if (params.type == 2) {\n                            treenode[i].disable()\n                        }\n                    }\n\n                }\n            }\n            treenode[i].eachChild(function(item) {\n                item.setIcon(\"{资源中心&&资源中心服务器}/图片/公用图片/网址.png\")\n                item.setText(item.nodeDataJson.name + \"(\" + item.nodeDataJson.identify + \")\");\n            })\n            if (treenode[i].nodeDataJson.type == 0) {\n                treenode[i].getUI().toggleCheck(true);\n            }\n        }\n\n    }\n}\n\nfunction button5_click(sender, e) {\n    parent.colse_windows();\n    //记录日志信息 \n    //vmd.webBase.syslog(loginfo,logtype,operationtype,function(res){}) \n}\n\n\n\n\n//定义校验规则表达式\nvar strRegex = '^(([0-9a-z_!~*().&=+$%-]+: )?[0-9a-z_!~*().&=+$%-]+@)?' //ftp的user@\n    +\n    '(([0-9]{1,3}.){3}[0-9]{1,3}' // IP形式的URL- 199.194.52.184\n    +\n    '|' // 允许IP和DOMAIN（域名）\n    +\n    '([0-9a-z_!~*()-]+.)*' // 域名- www.\n    +\n    '([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].' // 二级域名\n    +\n    '[a-z]{2,6})' // first level domain- .com or .museum\n    +\n    '(:[0-9]{1,6})?' // 端口- :80\n    +\n    '((/?)|' // a slash isn't required if there is no file name\n    +\n    \"(/[0-9a-z_!~*().;?:@&=+$,%#-]+)+/?)$\";\n\nfunction setRegEx(cmp) {\n    cmp.regex = new RegExp(strRegex)\n    cmp.regexText = \"输入格式如:www.hanweikeji.com:8888或192.168.1.1:8888\";\n}\n\nfunction micrserchild_url_afterrender(sender) {\n    setRegEx(this)\n}\n\nfunction hwImg1_afterrender(sender) {\n    // vmd.utils.tooltip(\"创建分组\");\n    sender.el.dom.title = '创建分组';\n}\n\nfunction hwImg_afterrender(sender) {\n    sender.el.dom.title = '创建服务地址'\n}\n\nfunction hwImg2_afterrender(sender) {\n    sender.el.dom.title = '删除'\n}\n\nfunction tree_afterrender(sender) {\n\n}","vmdcss":".aaaa .x-tree-node-icon.x-tree-node-inline-icon{\n    width: 18px;\n    height: 18px;\n}\n.aaaa .x-tree-node-cb{\n    margin: 0 5px\n}\n\n.aaaa .x-tree-node-ct input{\n    display: none\n}\n.aaaa .x-tree-node .x-tree-node-anchor span{\n    font-size: 14px;\n    color: #646464;\n}\n.aaaa .x-tree-node{\n margin: 3px 0\n \n}","vmdprops":"\"\"","type":"module","vmdcmpdeps":[],"vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resjs\",\"id\":\"project.config.js\",\"layoutConfig\":{},\"userConfig\":{}}]},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"resimg\",\"id\":\"资源中心服务器/图片/公用图片/网址.png\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"资源中心服务器/图片/公用图片/网址.png\",\"servName\":\"资源中心&&资源中心服务器\",\"path\":\"图片/公用图片/网址.png\",\"absolutePath\":\"http://192.168.1.181:9050/resource/图片/公用图片/网址.png\",\"ext\":\"png\"}}]}]}"}