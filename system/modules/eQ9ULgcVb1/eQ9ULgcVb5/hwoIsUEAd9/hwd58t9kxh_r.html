<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <title>数据集字段配置</title>
	<!--基本样式-->
    <link href="{vmdvirtualPath}/css/common.css?ver=vmd2.0.5.200306" rel="stylesheet" />
    <!--加载dhx组件-->
    <link href="{vmdvirtualPath}/lib/ext-3.4/resources/css/ext-all.css?ver=vmd2.0.5.200306" rel="stylesheet" />
   
    <link href="{vmdvirtualPath}/design/css/icons.css?ver=vmd2.0.5.200306" rel="stylesheet" />

	<link href="{vmdvirtualPath}/lib/dhtmlx/skins/material/dhtmlx.css?ver=vmd2.0.5.200306" rel="stylesheet" />
	  <!--样式快捷索引表-->
    <link href="{vmdvirtualPath}/css/shortcut.css?ver=vmd2.0.5.200306" rel="stylesheet" />
    
	{vmdprojectcssfiles}
    
    <script src="{vmdvirtualPath}/lib/labjs/LAB.min.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/config.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/lib/ext-3.4/adapter/ext/ext-base-debug.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/lib/ext-3.4/adapter/ext/ext-base-lang.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/lib/ext-3.4/adapter/ext/ext-base-class.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/lib/ext-3.4/ext-all-debug.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/lib/ext-3.4/src/locale/ext-lang-zh_CN.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/js/util.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/lib/dhtmlx/codebase/dhtmlx.js?ver=vmd2.0.5.200306"></script>
	<script src="{vmdvirtualPath}/report/dhtmlx/dhtmlxCommon/codebase/dhtmlxcommon.js?ver=vmd2.0.5.200306"></script>
	<script src="{vmdvirtualPath}/report/dhtmlx/dhtmlxCommon/codebase/dhtmlxcore.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/report/dhtmlx/dhtmlxCommon/codebase/dhtmlxcontainer.js?ver=vmd2.0.5.200306"></script>
	<script src="{vmdvirtualPath}/report/FillReport2.0/js/dhtmlx/dhtmlXFileUploader.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/js/hwdas.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/js/vmdcore.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/js/vmdcomps.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/js/publicMethods.js?ver=vmd2.0.5.200306"></script>
    <script src="{vmdvirtualPath}/js/vmdreport.js?ver=vmd2.0.5.200306"></script>
    
    {vmdworkspacePath}
	{vmdprojectconfigjs}
	<script src="{vmdvirtualPath}/lib/ace/ace.js?ver=vmd2.0.5.200306" ></script>
	<script src="{vmdvirtualPath}/lib/ace/mode-base.js?ver=vmd2.0.5.200306" ></script>
	<script src="{vmdvirtualPath}/lib/ace/theme-xcode.js?ver=vmd2.0.5.200306" ></script>
	<script src="{vmdvirtualPath}/lib/ace/ext-language_tools.js?ver=vmd2.0.5.200306" ></script>
	{vmdprojectjsfiles}
    
    <style>

    </style>
    <style type="text/css" id="vmdcss">
        
    </style>
    <script>
	    
        vmd.virtualPath = '{vmdvirtualPath}';
        
        Ext.define("vmd.module.MainViewport" ,{
	extend:"vmd.comp.viewport",
	requires:vmd.getCmpDeps([]),
	xtype:"vmd.module.MainViewport",
	layout:"border",
	height:500,
	width:500,
	afterrender:"MainViewport_afterrender",
	initComponent: function(){
		//初始化处理ace的api
if (parent.init_def_platformControlData) {
    parent.init_def_platformControlData();
    def_platformControl = parent.def_platformControl;
}

if (parent.allPublicMethods)
    window.allPublicMethods = parent.allPublicMethods;
else
    window.allPublicMethods = {};
if (parent.publicMethodsType)
    window.publicMethodsType = parent.publicMethodsType;
else
    window.publicMethodsType = {};

if (parent.init_def_platformFun) {
    parent.init_def_platformFun({
        vmd: allPublicMethods
    });
    parent.init_def_platformVmd();
    def_platformWidget = parent.def_platformWidget;
}

//ext框架类自动识别
def_platformExtjs = parent.def_platformExtjs;

var storeConfigStr = parent.storeFileInfo;
if(!storeConfigStr)
    vmd.alert("提示","未配置数据集，无法获取字段信息！")
var storeConfig = JSON.parse(storeConfigStr);
var fileDic = storeConfig.fields;
var dhgrid;
var sfileDic = []
for (var i = 0; i < fileDic.length; i++) {
    var row = fileDic[i]
    row.defaultValue = row.defaultValue || "";
    row.primary = row.primary == "Y" ? row.primary : "";
    row.nullable = row.nullable == "Y" ? row.nullable : "";
    row.dunit = row.dunit || row.unit;
    row.dname = row.dname || row.cname;
    row.flaStore = row.flaStore ||"";
    row.flaValueField = row.flaValueField || "";
    row.flaDisplayField = row.flaDisplayField || "";
    sfileDic.push(row)
}
storeConfig.fields;
var rows = [];

function button1_click(sender, e) {

    setGridValue(selRowId)

    dhgrid.editStop();
    var dataRowsID = myDataStore.data.order
    var dataRows = myDataStore.data.pull
    for (var i = 0; i < dataRowsID.length; i++) {
        var dr = dataRows[dataRowsID[i]]
        for (var j = 0; j < fileDic.length; j++) {
            if (fileDic[j].name == dr.name) {
                fileDic[j].cname = dr.cname;
                fileDic[j].primary = dr.primary;
                fileDic[j].nullable = dr.nullable;
                fileDic[j].type = dr.type;
                fileDic[j].length = dr.length;
                fileDic[j].precision = dr.precision;
                fileDic[j].defaultValue = dr.defaultValue;
                fileDic[j].flaStore = dr.flaStore;
                fileDic[j].valueField = dr.valueField;
                fileDic[j].diplayField = dr.diplayField;
                break;
            }
        }
    }
    storeConfig.fields = fileDic;
    parent.changeFileInfo(JSON.stringify(storeConfig))
}

function hwreport_afterrender(render) {
    hwreport.query();
}

var myDataStore = new dhtmlXDataStore();

function MainViewport_afterrender(sender) {
    //设置默认值
    lb_name.setText("");
    lb_cname.setText("");
    txt_name.setValue("");
    ch_pk.setValue("");
    ch_nullable.setValue("");
    lb_type.setText("");
    lb_cd.setText("");
    lb_jd.setText("");
    lb_unit.setText("");
    txt_unit.setValue("");
    hwTextArea.setValue("");

    //初始化网格数据
    dhgrid = new dhtmlXGridObject(hwDiv.el.dom);
    dhgrid.setImagePath("/lib/dhtmlx/codebase/imgs/");
    var header = "字段名,汉字注释,显示名称,主键,可为空,类型,长度,精度,计量单位,显示单位,默认值,代码表,值字段,显示字段";
    var width = "100,100,100,50,50,80,50,50,60,60,120,60,60,60";
    //var colType = "ro,ed,ch,ch,co,ed,ed,ed";
    var colType = "ro,ro,ro,ch,ch,ro,ro,ro,ro,ro,txt,ro,ro,ro";
    var strType = "str,str,str,str,str,str,int,int,str,str,str,str,str,str";
    var colId = "name,cname,dname,primary,nullable,type,length,precision,unit,dunit,defaultValue,flaStore,flaValueField,flaDisplayField";
    dhgrid.setHeader(header);
    dhgrid.setInitWidths(width);
    dhgrid.setColumnIds(colId)
    dhgrid.setColTypes(colType)
    //dhgrid.enableAutoHeight(true, null, true);
    var combobox = dhgrid.getCombo(4);
    combobox.put("NUMBER", "NUMBER");
    combobox.put("VARCHAR2", "VARCHAR2");
    combobox.put("DATE", "DATE");
    combobox.put("LONG", "LONG");
    combobox.put("BLOB", "BLOB");
    combobox.put("BLOB", "BLOB");
    dhgrid.init();
    myDataStore.parse(sfileDic);
    dhgrid.sync(myDataStore)
    //dhgrid.attachEvent("onCheckbox", doOnCheck);
    dhgrid.setEditable(false)
    dhgrid.attachEvent("onBeforeSelect", rowSelect);
    //dhgrid.attachEvent("onXLE", function(){
    for (var i = 0; i < dhgrid.getRowsNum(); i++) {
        dhgrid.cells2(i, 3).cell.firstChild.onclick = null; //.setDisabled(true);
        dhgrid.cells2(i, 4).cell.firstChild.onclick = null; //.setDisabled(true);
    }
}
var dValue = "";
var selRowId = "";

function rowSelect(new_row, old_row, new_col_index) {
    selRowId = new_row;
    setGridValue(old_row)
    //设置下方显示选中行信息
    lb_name.setText(dhgrid.cells(new_row, 0).getValue());
    lb_cname.setText(dhgrid.cells(new_row, 1).getValue());
    txt_name.setValue(dhgrid.cells(new_row, 2).getValue());
    ch_pk.setDisabled(false)
    ch_pk.setValue(dhgrid.cells(new_row, 3).getValue());
    ch_pk.setDisabled(true)
    ch_nullable.setDisabled(false)
    ch_nullable.setValue(dhgrid.cells(new_row, 4).getValue());
    ch_nullable.setDisabled(true)
    lb_type.setText(dhgrid.cells(new_row, 5).getValue());
    lb_cd.setText(dhgrid.cells(new_row, 6).getValue());
    lb_jd.setText(dhgrid.cells(new_row, 7).getValue());
    lb_unit.setText(dhgrid.cells(new_row, 8).getValue());
    txt_unit.setValue(dhgrid.cells(new_row, 9).getValue());
    hwTextArea.setValue(dhgrid.cells(new_row, 10).getValue() || dValue);
    //
    com_store.setValue(dhgrid.cells(new_row, 11).getValue() || "")
    com_store_selectChanged()
    com_valueFile.setValue(dhgrid.cells(new_row, 12).getValue() || "")
    com_displayFile.setValue(dhgrid.cells(new_row, 13).getValue() || "")
    
    
    return true;
}

// function doOnCheck(rowId, cellInd, state) {
//     var tf = ""
//     if (!state)
//         tf = "Y"
//     if (cellInd == "3")
//         myDataStore.item(rowId).primary = tf
//     if (cellInd == "4")
//         myDataStore.item(rowId).nullable = tf
//     return true;
// }

function button3_click(sender, e) {
    window.open("/system/modules/eQ9ULgcVb1/eQ9ULgcVb5/hwoIsUEAd9/hw5f8b2870.html", "_blank", "width=800,height=600")
    //记录日志信息 
    //vmd.webBase.syslog(loginfo,logtype,operationtype,function(res){}) 
}

function hwDiv_afterrender(sender) {

}

function ch_pk_beforerender(sender) {
    ch_pk.readOnly = true;
}

function ch_nullable_beforerender(sender) {

    ch_nullable.readOnly = true;
}

function setGridValue(rowid) {
    if (rowid) {
        var rowdate = myDataStore.item(rowid);
        if (rowdate) {
            //设置数据集
            rowdate.dname = txt_name.getValue() || lb_cname.text
            rowdate.dunit = txt_unit.getValue() || lb_unit.text;
            rowdate.defaultValue = hwTextArea.getValue();
            //设置转换的配置信息
            rowdate.flaStore = com_store.getValue();
            rowdate.flaValueField = com_valueFile.getValue();
            rowdate.flaDisplayField = com_displayFile.getValue();
            //设置显示
            dhgrid.cells(rowid, 2).setValue(txt_name.getValue() || lb_cname.text);
            dhgrid.cells(rowid, 9).setValue(txt_unit.getValue() || lb_unit.text);
            dhgrid.cells(rowid, 10).setValue(hwTextArea.getValue())
            dhgrid.cells(rowid, 11).setValue(com_store.getValue());
            dhgrid.cells(rowid, 12).setValue(com_valueFile.getValue());
            dhgrid.cells(rowid, 13).setValue(com_displayFile.getValue())
        }
    }
}

function txt_name_blur(sender, e) {
    setGridValue(selRowId)
}

function txt_unit_blur(sender, e) {

    setGridValue(selRowId)
}

function hwTextArea_afterrender(sender) {
    hwTextArea.on("focus", function() {
        var mygrid = dhgrid;
        var win = new Ext.Window({
            title: "参数值代码编辑",
            modal: true,
            maximized: false,
            height: 400,
            width: 500,
            maximizable: true,
            resizable: true,
            bodyStyle: "background-color:#fff",
            closeAction: 'close'
        })
        win.editor = new vmd.comp.Ace({
            language: 'javascript'
        })
        win.add(win.editor);
        //关闭
        win.hidefn = function() {
            var value = win.editor.getValue()
            mygrid.cells(selRowId, 10).setValue(value)
            myDataStore.item(selRowId).defaultValue = value
            hwTextArea.setValue(value); // .item(rowId).defaultValue = value
        }
        win.on('hide', win.hidefn);
        var dValue = hwTextArea.getValue();
        if (dValue == "") {
            dValue = "//var date=new Date(dateTime.getValue()) //获取标准日期 \r\n" +
                "//date.setDate(date.getDate()-1)//前移或后移天数  \r\n" +
                "//date.setMonth(date.getMonth()+n)//前移或后移月数  \r\n" +
                "//date.setFullYear(date.getFullYear()+n)//前移或后移年数  \r\n" +
                "//value = vmd.Date.format(date,'Y-m-d')//返回查询日期  \r\n" +
                "//value = vmd.Date.format(date,'Ym')//返回查询年月  \r\n" +
                "//value = vmd.Date.format(date,'Y')//返回查询年度  \r\n" +
                "//返回值 \r\n return \"\""
        }
        win.editor.value = dValue;
        win.show();
        Ext.defer(function() {
            win.editor.focus();
            win.editor.el.dom.click()
        }, 100)

    });
}
//
//处理下拉，数据集的列表。字段列表
var storelistData = []
var storelist = new vmd.data.Store({
    data: storelistData,
    fields: ['id', 'name']
})
var storeFileListData = []
var storeFileList = new vmd.data.Store({
    data: storeFileListData,
    fields: ['id', 'name']
})

if (parent && parent.xds.vmd.getStoreNames)
    var stores = parent.xds.vmd.getStoreNames()
for (var i = 0; i < stores.length; i++) {
    storelistData.push({
        id: stores[i],
        name: stores[i]
    })
}
storelist.loadData(storelistData)

function com_store_selectChanged(sender, combo, record, index) {
    var storename = com_store.getValue();
    if (storename && parent && parent.xds.vmd.getStoreFieldNames) {
        var Fields = parent.xds.vmd.getStoreFieldNames(storename)
        for (var i = 0; i < Fields.length; i++) {
            storeFileListData.push({
                id: Fields[i],
                name: Fields[i]
            })
        }
    }
    storeFileList.loadData(storeFileListData)
}

function com_store_beforerender(sender) {
    com_store.store = storelist;
    com_store.displayField = "name";
    com_store.valueField = "id";
}

function com_valueFile_beforerender(sender) {
    com_valueFile.store = storeFileList;
    com_valueFile.displayField = "name";
    com_valueFile.valueField = "id";
}

function com_displayFile_beforerender(sender) {
    com_displayFile.store = storeFileList;
    com_displayFile.displayField = "name";
    com_displayFile.valueField = "id";
}
			this.MainViewport_afterrender=MainViewport_afterrender;



		this.items=[
			{
				xtype:"vmd.div",
				id:"div",
				autoEl:"div",
				border:true,
				backgroundRepeat:"no-repeat",
				backgroundPosition:"top left",
				width:400,
				height:621,
				x:220,
				y:50,
				region:"center",
				layout:"border",
				autoScroll:false,
				style:"overflow-x: hidden;    overflow-y: auto;",
				items:[
					{
						xtype:"vmd.div",
						id:"hwDiv",
						autoEl:"div",
						border:true,
						backgroundRepeat:"no-repeat",
						backgroundPosition:"top left",
						width:400,
						height:50,
						afterrender:"hwDiv_afterrender",
						layout:"fit",
						region:"center",
						listeners:{
							vmdafterrender:hwDiv_afterrender
						}
					},
					{
						xtype:"vmd.div",
						id:"hwDiv1",
						autoEl:"div",
						border:false,
						backgroundRepeat:"no-repeat",
						backgroundPosition:"top left",
						width:400,
						height:200,
						region:"south",
						layout:"border",
						items:[
							{
								xtype:"vmd.div",
								id:"hwDiv2",
								autoEl:"div",
								border:false,
								backgroundRepeat:"no-repeat",
								backgroundPosition:"top left",
								width:438,
								height:50,
								region:"west",
								layout:"absolute",
								items:[
									{
										xtype:"label",
										id:"hwLabel",
										text:"显示名称：",
										region:"center",
										x:20,
										y:80,
										height:20
									},
									{
										xtype:"label",
										id:"hwLabel1",
										text:"注释：",
										region:"west",
										x:20,
										y:50
									},
									{
										xtype:"label",
										id:"hwLabel3",
										text:"字段名称：",
										x:20,
										y:20,
										height:30
									},
									{
										xtype:"label",
										id:"hwLabel4",
										text:"主键：",
										x:170,
										y:20,
										height:30
									},
									{
										xtype:"label",
										id:"hwLabel5",
										text:"非空：",
										x:170,
										y:50
									},
									{
										xtype:"label",
										id:"hwLabel6",
										text:"计量单位：",
										x:20,
										y:110
									},
									{
										xtype:"label",
										id:"hwLabel7",
										text:"显示单位：",
										x:20,
										y:140,
										height:20
									},
									{
										xtype:"label",
										id:"hwLabel8",
										text:"类型：",
										x:170,
										y:80,
										height:20
									},
									{
										xtype:"textfield",
										id:"txt_name",
										allowBlank:true,
										enableKeyEvents:true,
										x:80,
										y:70,
										width:90,
										blur:"txt_name_blur",
										listeners:{
											blur:txt_name_blur
										}
									},
									{
										xtype:"textfield",
										id:"txt_unit",
										allowBlank:true,
										enableKeyEvents:true,
										x:80,
										y:130,
										width:90,
										blur:"txt_unit_blur",
										listeners:{
											blur:txt_unit_blur
										}
									},
									{
										xtype:"checkbox",
										id:"ch_pk",
										fieldLabel:"Checkbox",
										x:210,
										y:20,
										disabled:false,
										beforerender:"ch_pk_beforerender",
										listeners:{
											beforerender:ch_pk_beforerender
										}
									},
									{
										xtype:"checkbox",
										id:"ch_nullable",
										fieldLabel:"Checkbox",
										x:210,
										y:50,
										disabled:false,
										beforerender:"ch_nullable_beforerender",
										listeners:{
											beforerender:ch_nullable_beforerender
										}
									},
									{
										xtype:"label",
										id:"lb_name",
										text:"lable:",
										x:83,
										y:20
									},
									{
										xtype:"label",
										id:"lb_cname",
										text:"lable:",
										x:83,
										y:50
									},
									{
										xtype:"label",
										id:"lb_unit",
										text:"lable:",
										x:83,
										y:110
									},
									{
										xtype:"label",
										id:"lb_type",
										text:"lable:",
										x:210,
										y:80
									},
									{
										xtype:"label",
										id:"hwLabel9",
										text:"长度：",
										x:170,
										y:110
									},
									{
										xtype:"label",
										id:"lb_cd",
										text:"lable:",
										x:210,
										y:110,
										height:20
									},
									{
										xtype:"label",
										id:"hwLabel11",
										text:"精度：",
										x:170,
										y:140,
										height:20
									},
									{
										xtype:"label",
										id:"lb_jd",
										text:"lable:",
										x:210,
										y:140
									},
									{
										xtype:"label",
										id:"hwLabel10",
										text:"注：转换配置用于配置字段的实际值与显示值的代码转换关系。",
										x:20,
										y:170,
										width:370,
										style:"color:red;"
									},
									{
										xtype:"label",
										id:"hwLabel12",
										text:"转换配置：",
										x:280,
										y:20
									},
									{
										xtype:"label",
										id:"hwLabel13",
										text:"数据集：",
										x:290,
										y:50
									},
									{
										xtype:"label",
										id:"hwLabel14",
										text:"实际值：",
										x:290,
										y:80
									},
									{
										xtype:"label",
										id:"hwLabel15",
										text:"显示值：",
										x:290,
										y:110
									},
									{
										xtype:"vmd.comlist",
										id:"com_store",
										width:90,
										height:270,
										x:330,
										y:40,
										selectChanged:"com_store_selectChanged",
										beforerender:"com_store_beforerender",
										listeners:{
											selectChanged:com_store_selectChanged,
											beforerender:com_store_beforerender
										}
									},
									{
										xtype:"vmd.comlist",
										id:"com_valueFile",
										width:90,
										height:270,
										x:330,
										y:70,
										beforerender:"com_valueFile_beforerender",
										listeners:{
											beforerender:com_valueFile_beforerender
										}
									},
									{
										xtype:"vmd.comlist",
										id:"com_displayFile",
										width:90,
										height:270,
										x:330,
										y:100,
										beforerender:"com_displayFile_beforerender",
										listeners:{
											beforerender:com_displayFile_beforerender
										}
									}
								]
							},
							{
								xtype:"vmd.div",
								id:"hwDiv3",
								autoEl:"div",
								border:false,
								backgroundRepeat:"no-repeat",
								backgroundPosition:"top left",
								width:400,
								height:50,
								region:"center",
								layout:"border",
								items:[
									{
										xtype:"label",
										id:"hwLabel2",
										text:"   默认值：",
										region:"west",
										height:39,
										html:"<br>默认值:",
										width:48
									},
									{
										xtype:"vmd.div",
										id:"hwDiv4",
										autoEl:"div",
										border:true,
										backgroundRepeat:"no-repeat",
										backgroundPosition:"top left",
										width:400,
										height:156,
										region:"center",
										layout:"fit",
										margins:"10 5 10 0",
										items:[
											{
												xtype:"textarea",
												id:"hwTextArea",
												allowBlank:true,
												readOnly:true,
												afterrender:"hwTextArea_afterrender",
												listeners:{
													vmdafterrender:hwTextArea_afterrender
												}
											}
										]
									}
								]
							}
						]
					}
				]
			},
			{
				xtype:"vmd.div",
				id:"div2",
				autoEl:"div",
				border:false,
				backgroundRepeat:"no-repeat",
				backgroundPosition:"top left",
				width:400,
				height:50,
				x:290,
				y:250,
				region:"south",
				layout:"border",
				hidden:false,
				items:[
					{
						xtype:"vmd.div",
						id:"div3",
						layoutConfig:{
							align:"middle",
							pack:"start"
						},
						autoEl:"div",
						border:false,
						backgroundRepeat:"no-repeat",
						backgroundPosition:"top left",
						width:400,
						height:50,
						region:"west",
						layout:"hbox",
						items:[
							{
								xtype:"checkbox",
								id:"hwCheckbox",
								fieldLabel:"Checkbox",
								boxLabel:"启用校验",
								margins:"0 0 0 20",
								hidden:true
							},
							{
								xtype:"vmd.button",
								id:"button3",
								text:"编辑校验规则",
								type:"primary",
								size:"small",
								margins:"0 0 0 30",
								click:"button3_click",
								hidden:true,
								listeners:{
									click:button3_click
								}
							}
						]
					},
					{
						xtype:"vmd.div",
						id:"div4",
						layoutConfig:{
							align:"middle",
							pack:"end"
						},
						autoEl:"div",
						border:false,
						backgroundRepeat:"no-repeat",
						backgroundPosition:"top left",
						width:400,
						height:50,
						region:"center",
						layout:"hbox",
						items:[
							{
								xtype:"vmd.button",
								id:"button1",
								text:"保存",
								type:"primary",
								size:"small",
								margins:"0 20 0 0",
								click:"button1_click",
								listeners:{
									click:button1_click
								}
							}
						]
					}
				]
			},
			{
				xtype:"vmd.div",
				id:"div1",
				layoutConfig:{
					align:"middle"
				},
				autoEl:"div",
				border:false,
				backgroundRepeat:"no-repeat",
				backgroundPosition:"top left",
				width:400,
				height:50,
				region:"north",
				layout:"hbox",
				hidden:true,
				items:[
					{
						xtype:"checkbox",
						id:"hwCheckbox1",
						fieldLabel:"Checkbox",
						boxLabel:"启用校验",
						margins:"0 0 0 30"
					},
					{
						xtype:"vmd.button",
						id:"button",
						text:"编辑校验规则",
						type:"primary",
						size:"small",
						margins:"0 0 0 30"
					},
					{
						xtype:"vmd.button",
						id:"button2",
						text:"保存",
						type:"primary",
						size:"small",
						margins:"0 0 0 30"
					},
					{
						xtype:"vmd.ace",
						id:"MyAce",
						height:300,
						width:600,
						language:"javascript"
					}
				]
			}
		]
		this.callParent();
		var me = this;vmd.core.moduleInit(this.items, this);
			me.on('afterrender',function(){ MainViewport_afterrender.call(me,me)})
}
})
        Ext.onReady(function () {
            Ext.create('vmd.module.MainViewport', {
                renderTo: document.body
            })


        })

      </script>
</head>
<body>
</body>
</html>
