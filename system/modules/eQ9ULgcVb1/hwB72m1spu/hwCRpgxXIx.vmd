{"vmdversion":"2.0.3.0815","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"afterrender\":\"MyViewport_afterrender\",\"beforerender\":\"MyViewport_beforerender\",\"autoScroll\":true},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":110,\"y\":370,\"region\":\"center\",\"title\":\"右侧视频ocx控件区\"},\"cn\":[{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"x\":40,\"y\":50,\"width\":640,\"height\":460}}]},{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":50,\"region\":\"north\",\"width\":60,\"hidden\":false},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":810,\"y\":330,\"click\":\"button_click\",\"text\":\"点击弹窗\"}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"x\":960,\"y\":330,\"click\":\"button1_click\",\"text\":\"打开遮罩层\"}},{\"cid\":\"vmdButton\",\"id\":\"button4\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"关闭遮罩层\",\"click\":\"button4_click\"}}]},{\"cid\":\"panel\",\"id\":\"panel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":210,\"y\":210,\"region\":\"west\",\"width\":556,\"autoScroll\":false,\"title\":\"左侧滚动区域\",\"layout\":\"border\"},\"cn\":[{\"cid\":\"container\",\"id\":\"div2\",\"layoutConfig\":{\"align\":\"middle\"},\"userConfig\":{\"region\":\"north\",\"height\":91,\"layout\":\"hbox\"},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"方案一：将控件放到iframe里后演示效果\",\"style\":\"font-weight: bold;font-size: 25px\"}}]},{\"cid\":\"container\",\"id\":\"div1\",\"layoutConfig\":{},\"userConfig\":{\"height\":2000,\"region\":\"center\",\"autoScroll\":true},\"cn\":[{\"cid\":\"container\",\"id\":\"div3\",\"layoutConfig\":{},\"userConfig\":{\"height\":1550,\"autoScroll\":true},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button2\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdButton\",\"id\":\"button3\",\"layoutConfig\":{},\"userConfig\":{}}]}]}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"function MyViewport_afterrender(sender) {\n\n    var script = document.createElement(\"script\");\n    //创建language标签\n    script.setAttribute('language', 'javascript')\n    //创建for标签\n    script.setAttribute('for', 'RealTimePlayOcx')\n    //创建event标签\n    script.event = \"FireSelectWindow(lWndIndex)\";\n    //创建script 内容\n    script.innerHTML = \"\\n alert()\";\n\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n\n\n    document.getElementById('div').innerHTML = '<object classid=\"clsid:D5E14042-7BF6-4E24-8B01-2F453E8154D7\" ' +\n        ' id=\"RealTimePlayOcx\" width=\"100%\" height=\"100%\" ' +\n        ' name=\"RealTimePlayOcx\">' +\n        '<param name=\"theme\" value=\"blue\">' +\n        '<param name=\"showType\" value=\"1\">' +\n        '</object>'\n\n\n}\n\nfunction initVideo() {\n\n    //  var script = document.createElement(\"script\");\n    // //创建language标签\n    // script.setAttribute('language', 'javascript')\n    // //创建for标签\n    // script.setAttribute('for', 'RealTimePlayOcx')\n    // //创建event标签\n    // script.event = \"FireSelectWindow(lWndIndex)\";\n    // //创建script 内容\n    // script.innerHTML = \"\\n alert()\";\n\n    // document.getElementsByTagName(\"head\")[0].appendChild(script);\n\n\n    document.getElementById('div').innerHTML = '<object classid=\"clsid:D5E14042-7BF6-4E24-8B01-2F453E8154D7\" ' +\n        ' id=\"RealTimePlayOcx\" width=\"100%\" height=\"100%\" ' +\n        ' name=\"RealTimePlayOcx\">' +\n        '<param name=\"theme\" value=\"blue\">' +\n        '<param name=\"showType\" value=\"1\">' +\n        '</object>'\n}\n\n\n\nfunction MyViewport_beforerender(sender) {\n\n\n\n    var addMask = function() {\n\n        var dh = vmd.DomHelper\n        // 创建新的dom元素并加入到el中\n        var videoEl=div.el;\n        videoEl.setStyle(\"background\",'#000');\n       // videoEl.setStyle(opacity,0.5);\n        var pos = videoEl.getRegion()\n        var width = videoEl.getWidth();\n        var height = videoEl.getHeight();\n\n        var videwMask = Ext.get('videomask');\n        if(!videwMask) {\n\n            var d = dh.append(Ext.getBody(), {\n                tag: 'iframe',\n                id: 'videomask',\n                cls: 'my-list',\n                frameborder: 1,\n                scrolling: 'no',\n                style: 'position:absolute'\n\n            }, true);\n\n            d.setHeight(height);\n            d.setWidth(width);\n            d.setTop(pos.top);\n            d.setLeft(pos.left);\n        } else {\n            videwMask.show()\n        }\n    }\n    var hideMask = function() {\n        var videoEl=div.el;\n        videoEl.setStyle('background','#fff')\n        var videwMask = Ext.get('videomask');\n        if(videwMask) videwMask.hide()\n    }\n\n    // Ext.getBody().on('mousewheel', function(e) {\n    //     var delta = e.getWheelDelta(); //\n\n    //     console.log(delta)\n    //     addMask()\n       \n    //     //\n    //     Ext.defer(function(){\n            \n    //       hideMask()\n    //     },500)\n\n    // });\n\n}\n\nfunction button_click(sender, e) {\n\n    // 创建一个新窗口（有url指向） \n    var newWin = new vmd.window({\n        url: '/modules/eQ9ULgcVb1/hwB72m1spu/hwCRpgxXIx.html',\n        title: '遮挡模拟',\n        id: 'testWin',\n        enableLoading: true, //启用进度加载\n        enableIframe: true, //启用iframe弹窗遮罩解决ocx遮挡问题\n        width: 500,\n        height: 500,\n        auto: false, //auto为true 自动适应窗口，配合offset使用\n        params: {} //url中追加的编码的参数，json格式 \n    })\n\n\n    newWin.show(); //窗口显示\n\n    newWin.on('hide', function() {\n        //alert(111)\n        initVideo()\n    })\n\n}\n\n\nfunction button1_click(sender, e) {\n    // var myMask = new vmd.LoadMask(vmd.getBody(), {\n    //     msg: \"进度加载中，请稍后\"\n    // });\n    // myMask.show();\n\n    var dh = vmd.DomHelper\n    // 创建新的dom元素并加入到el中\n    var pos = div.el.getRegion()\n    var width = div.el.getWidth();\n    var height = div.el.getHeight();\n\n    var videwMask = Ext.get('videomask');\n    \n    div.el.applyStyles({'background':'red',\"opacity\":0.5});\n    if(!videwMask) {\n       \n        var d = dh.append(Ext.getBody(), {\n            tag: 'iframe',\n            id: 'videomask',\n            cls: 'my-list',\n            frameborder: 1,\n            scrolling: 'no',\n            style: 'position:absolute'\n\n        }, true);\n\n        d.setHeight(height);\n        d.setWidth(width);\n        d.setTop(pos.top);\n        d.setLeft(pos.left);\n    } else {\n        videwMask.show()\n    }\n\n}\n\nfunction button4_click(sender, e) {\n    //debugger\n    div.el.setStyle('background','#fff')\n    var videwMask = Ext.get('videomask');\n    if(videwMask) videwMask.hide()\n\n}","vmdcss":"","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}