{"vmdversion":"2.0.4.20190408","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"afterrender\":\"MyViewport_afterrender\"},\"cn\":[{\"cid\":\"container\",\"id\":\"div\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"layout\":\"border\",\"width\":700,\"height\":528},\"cn\":[{\"cid\":\"container\",\"id\":\"div1\",\"layoutConfig\":{\"align\":\"center\",\"pack\":\"center\"},\"userConfig\":{\"region\":\"center\",\"layout\":\"vbox\",\"width\":218,\"minWidth\":66,\"autoWidth\":false,\"autoHeight\":false,\"border\":true},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button6\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"west\",\"x\":400,\"y\":5,\"width\":50,\"height\":\"\",\"text\":\"↑\",\"click\":\"button6_click\",\"margins\":\"10 0\",\"beforerender\":\"button6_beforerender\",\"afterrender\":\"button6_afterrender\"}},{\"cid\":\"vmdButton\",\"id\":\"button7\",\"layoutConfig\":{},\"userConfig\":{\"x\":470,\"y\":5,\"width\":50,\"height\":\"\",\"text\":\"↓\",\"click\":\"button7_click\",\"region\":\"south\",\"margins\":\"10 0\",\"afterrender\":\"button7_afterrender\"}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"10 0\",\"text\":\">>\",\"width\":50,\"click\":\"button_click\",\"afterrender\":\"button_afterrender\"}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"10 0\",\"text\":\">\",\"width\":50,\"click\":\"button1_click\",\"afterrender\":\"button1_afterrender\"}},{\"cid\":\"vmdButton\",\"id\":\"button2\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"10 0\",\"text\":\"<\",\"width\":50,\"click\":\"button2_click\",\"afterrender\":\"button2_afterrender\"}},{\"cid\":\"vmdButton\",\"id\":\"button3\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"10 0\",\"text\":\"<<\",\"width\":50,\"click\":\"button3_click\",\"afterrender\":\"button3_afterrender\"}}]},{\"cid\":\"grid\",\"id\":\"MyGrid1\",\"layoutConfig\":{},\"userConfig\":{\"title\":\"\",\"width\":487,\"height\":\"\",\"style\":\"/*border: 1px solid #ccc*/\",\"beforerender\":\"MyGrid1_beforerender\",\"hideHeaders\":false,\"region\":\"east\",\"enableHdMenu\":false,\"border\":true,\"cls\":\"bbb\"},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"字段名称\",\"dataIndex\":\"name\",\"align\":\"left\",\"width\":230},\"name\":\"name\"},{\"cid\":\"templatecolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"值\",\"align\":\"left\",\"dataIndex\":\"cnname\",\"tpl\":\"<a></a>\",\"width\":230},\"name\":\"cnname\"}]},{\"cid\":\"grid\",\"id\":\"MyGrid\",\"layoutConfig\":{},\"userConfig\":{\"header\":false,\"title\":\"待选字段\",\"beforerender\":\"MyGrid_beforerender\",\"height\":560,\"style\":\"width: 100%;    border:none;\",\"region\":\"west\",\"width\":179,\"hideHeaders\":false,\"cls\":\"aaa\"},\"cn\":[{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"字段名称\",\"dataIndex\":\"name\",\"align\":\"left\",\"width\":160,\"fixed\":false},\"name\":\"name\"}]}]},{\"cid\":\"container\",\"id\":\"div4\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"end\"},\"userConfig\":{\"region\":\"south\",\"layout\":\"hbox\",\"border\":false,\"height\":40},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"button4\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"0 10 0 0 \",\"text\":\"确定\",\"click\":\"button4_click\",\"width\":80,\"style\":\"color: #fff;    background-color: #50bfff;    border-color: #50bfff;\"}},{\"cid\":\"vmdButton\",\"id\":\"button5\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"0 90 0 10\",\"text\":\"取消\",\"click\":\"button5_click\",\"width\":80}}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdsubviewport\",\"id\":\"SubView_Window\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"var page = this;\r\nvar data = parent.selectorWin.params.data;\r\nvar data1 = parent.selectorWin.params.data1\r\nvar urlCode = parent.selectorWin.params.type;\r\nvar store = new Ext.data.JsonStore({\r\n    proxy: new Ext.data.MemoryProxy(),\r\n    fields: ['name']\r\n});\r\nstore.loadData(data)\r\nvar store1 = new Ext.data.JsonStore({\r\n    proxy: new Ext.data.MemoryProxy(),\r\n    fields: ['name', 'value']\r\n});\r\nstore1.loadData(data1)\r\n\r\nfunction button4_click(sender, e) {\r\n    debugger\r\n    parent.selectorWin.close(data1, urlCode, true);\r\n}\r\n\r\nfunction button_click(sender, e) {\r\n    debugger\r\n    var temp = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        temp.push({\r\n            name: data[i].name,\r\n            value: ''\r\n        });\r\n    }\r\n    data = [];\r\n    for (var n = 0; n < temp.length; n++) {\r\n        data1.push({\r\n            name: temp[n].name,\r\n            value: temp[n].value\r\n        })\r\n    }\r\n    store.loadData(data)\r\n    store1.loadData(data1)\r\n}\r\n\r\nfunction button3_click(sender, e) {\r\n    debugger\r\n    var temp = [];\r\n    for (var i = 0; i < data1.length; i++) {\r\n        temp.push(data1[i])\r\n    }\r\n    data1 = [];\r\n    for (var n = 0; n < temp.length; n++) {\r\n        data.push({\r\n            name: temp[n].name\r\n        })\r\n    }\r\n    store.loadData(data);\r\n    store1.loadData(data1)\r\n}\r\n\r\nfunction button1_click(sender, e) {\r\n    debugger\r\n    var group = MyGrid.getSelectionModel().selections.items;\r\n    var temp = []\r\n    for (var i = 0; i < group.length; i++) {\r\n        temp.push({\r\n            name: group[i].data.name\r\n        })\r\n        for (var n = data.length - 1; n >= 0; n--) {\r\n            if (temp[i].name == data[n].name) {\r\n                data.splice(n, 1);\r\n            }\r\n        }\r\n    }\r\n    // data = [];\r\n    for (var n = 0; n < temp.length; n++) {\r\n        data1.push({\r\n            name: temp[n].name,\r\n            value: temp[n].value\r\n        })\r\n    }\r\n    store.loadData(data)\r\n    store1.loadData(data1)\r\n}\r\n\r\nfunction button2_click(sender, e) {\r\n    var group = MyGrid1.getSelectionModel().selections.items;\r\n    var temp = []\r\n    for (var i = 0; i < group.length; i++) {\r\n        temp.push({\r\n            name: group[i].data.name\r\n        })\r\n        for (var n = data1.length - 1; n >= 0; n--) {\r\n            if (temp[i].name == data1[n].name) {\r\n                data1.splice(n, 1);\r\n            }\r\n        }\r\n    }\r\n    // data = [];\r\n    for (var n = 0; n < temp.length; n++) {\r\n        data.push({\r\n            name: temp[n].name,\r\n            value: temp[n].value\r\n        })\r\n    }\r\n    store.loadData(data)\r\n    store1.loadData(data1)\r\n}\r\n\r\nfunction button5_click(sender, e) {\r\n    parent.selectorWin.close();\r\n}\r\n\r\nfunction MyGrid_beforerender(sender) {\r\n    sender.enableColumnHide = true;\r\n    sender.enableHdMenu = false;\r\n    sender.store = store;\r\n}\r\n\r\nfunction MyGrid1_beforerender(sender) {\r\n    debugger\r\n    sender.enableColumnHide = true;\r\n    sender.enableHdMenu = false;\r\n    var listCol = this.colModel.config;\r\n    listCol[1].renderer = function(value, cellmeta, record) { //可以根据行字段的某个类型进行转换设置显示值\r\n        return '<input type=\"text\" style=\"border:none;width:100%;height:100%;background: none;\" value=\"' + record.data.value + '\" onchange=\"gridValue(this,this.value,\\'' + record.id + '\\')\">'\r\n    }\r\n    sender.store = store1;\r\n}\r\n\r\nfunction button6_click(sender, e) {\r\n    //上移\r\n    var group = MyGrid1.getSelectionModel().selections.items;\r\n    var name = group[0].data.name;\r\n    for (var i = 0; i < data1.length; i++) {\r\n        if (data1[i].name == name && i != 0) {\r\n            var temp = data1[i - 1];\r\n            data1[i - 1] = data1[i];\r\n            data1[i] = temp;\r\n            break;\r\n        }\r\n    }\r\n    store1.loadData(data1)\r\n}\r\n\r\nfunction button7_click(sender, e) {\r\n    //下移\r\n    var group = MyGrid1.getSelectionModel().selections.items;\r\n    var name = group[0].data.name;\r\n    for (var i = 0; i < data1.length; i++) {\r\n        if (data1[i].name == name && i != data1.length - 1) {\r\n            var temp = data1[i + 1];\r\n            data1[i + 1] = data1[i];\r\n            data1[i] = temp;\r\n            break;\r\n        }\r\n    }\r\n    store1.loadData(data1)\r\n}\r\nwindow.gridValue = function(sender, value, id) {\r\n    debugger\r\n    for (var i = 0; i < MyGrid1.store.data.items.length; i++) {\r\n        if (id == MyGrid1.store.data.items[i].id) {\r\n            MyGrid1.store.data.items[i].set('value', value)\r\n            for (var n = 0; n < data1.length; n++) {\r\n                if (data1[n].name == MyGrid1.store.data.items[i].get('name')) {\r\n                    data1[n].value = value\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction button6_beforerender(sender) {}\r\n\r\nfunction button6_afterrender(sender) {\r\n    vmd(button6.el.dom).attr('data-tooltip', '上移');\r\n    vmd.utils.tooltip(\"[data-tooltip]\");\r\n}\r\n\r\nfunction button7_afterrender(sender) {\r\n    vmd(sender.el.dom).attr('data-tooltip', '下移');\r\n    vmd.utils.tooltip(\"[data-tooltip]\");\r\n}\r\n\r\nfunction button_afterrender(sender) {\r\n    vmd(sender.el.dom).attr('data-tooltip', '全部选择');\r\n    vmd.utils.tooltip(\"[data-tooltip]\");\r\n}\r\n\r\nfunction button1_afterrender(sender) {\r\n    vmd(sender.el.dom).attr('data-tooltip', '选择');\r\n    vmd.utils.tooltip(\"[data-tooltip]\");\r\n}\r\n\r\nfunction button2_afterrender(sender) {\r\n    vmd(sender.el.dom).attr('data-tooltip', '取消');\r\n    vmd.utils.tooltip(\"[data-tooltip]\");\r\n}\r\n\r\nfunction button3_afterrender(sender) {\r\n    vmd(sender.el.dom).attr('data-tooltip', '全部取消');\r\n    vmd.utils.tooltip(\"[data-tooltip]\");\r\n}\r\n\r\nfunction MyViewport_afterrender(sender) {}","vmdcss":".aaa .x-grid3-row{border:0;}\n.aaa .x-grid3-hd-row td {border-right:0;}\n.bbb .x-grid3-hd-row td {border-right:0;}","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}