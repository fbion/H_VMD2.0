{"vmdversion":"2.0.3.0701","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"viewportWorkSpaceResource\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"border\",\"id\":\"viewportWorkSpaceResource\",\"afterrender\":\"viewportWorkSpaceResource_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{\"align\":\"middle\",\"pack\":\"center\"},\"userConfig\":{\"region\":\"south\",\"layout\":\"hbox\",\"header\":false,\"height\":50},\"cn\":[{\"cid\":\"vmdButton\",\"id\":\"btnOk\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"确定\",\"id\":\"btnOk\",\"click\":\"btnOk_click\"}},{\"cid\":\"vmdButton\",\"id\":\"btnCancle\",\"layoutConfig\":{},\"userConfig\":{\"margins\":\"0 0 0 50\",\"text\":\"取消\",\"id\":\"btnCancle\",\"click\":\"btnCancle_click\"}}]},{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"region\":\"center\",\"layout\":\"fit\",\"header\":false},\"cn\":[{\"cid\":\"vmdTreeEx\",\"id\":\"treeWorkSpaceResourceCategory\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"id\":\"treeWorkSpaceResourceCategory\",\"store\":\"storeResourceCategory\",\"parentField\":\"parent_id\",\"valueField\":\"category_id\",\"textField\":\"name\",\"loadType\":\"全部加载\",\"rootValue\":\"0\",\"rootText\":\"0\",\"hideRoot\":true,\"width\":350,\"region\":\"center\",\"leafImg\":\"/system/modules/eQ9ULgcVb1/img/folderClosed.gif\",\"afterrender\":\"treeWorkSpaceResourceCategory_afterrender\",\"afterBindData\":\"treeWorkSpaceResourceCategory_afterBindData\"}}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdJsonStore\",\"id\":\"storeResourceCategory\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeResourceCategory\",\"storeConfig\":\"{\\\"id\\\":\\\"Tv3lpnpaBV\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"zyzx/zyzxtree/zycategorytree\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"资源分类树\\\",\\\"getMethods\\\":[],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"category_id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"parent_id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"type\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"leaf\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"path\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"info\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"ip\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"servername\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"serverid\\\",\\\"type\\\":\\\"string\\\"}]}\",\"load\":\"storeResourceCategory_load\",\"autoLoad\":false},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"category_id\"},\"name\":\"category_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"parent_id\"},\"name\":\"parent_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"type\"},\"name\":\"type\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"leaf\"},\"name\":\"leaf\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"path\"},\"name\":\"path\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"info\"},\"name\":\"info\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"ip\"},\"name\":\"ip\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"servername\"},\"name\":\"servername\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"serverid\"},\"name\":\"serverid\"}]}]},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"function btnOk_click(sender, e) {\n\n    var nodeSel = treeWorkSpaceResourceCategory.getSelNode();\n    var path = nodeSel.nodeDataJson.path;\n    var categoryId = nodeSel.id;\n    var resourceServerIP = nodeSel.nodeDataJson.ip;\n    var resourceServerName = nodeSel.nodeDataJson.servername;\n    var resourceServerId = nodeSel.nodeDataJson.serverid;\n    var pathTmp = nodeSel.getPath(\"text\");\n    // alert(pathTmp);\n    path = pathTmp.substring(3);\n    var type = getUrlParam(\"type\"); // 0：添加分类目录，1：编辑分类目录\n    if(0 == type) {\n        parent.treeResource.addCategory(categoryId, path,resourceServerId,resourceServerIP,resourceServerName);\n    } else {\n        parent.treeResource.editCategory(categoryId, path,resourceServerId,resourceServerIP,resourceServerName);\n    }\n\n    parent.resourceCategoryForm.close();\n\n}\n\nfunction btnCancle_click(sender, e) {\n\n    parent.resourceCategoryForm.close();\n    // parent.setCategoryInfo(\"1111\", \"22222\");\n}\n\nfunction viewportWorkSpaceResource_afterrender(sender) {\n    // var categoryId = getUrlParam(\"categoryId\");\n    // var node = treeWorkSpaceResourceCategory.getNodeById(categoryId)\n    // if(null !== node && undefined !== node) {\n    //     node.select();\n    // }\n}\n\nfunction treeWorkSpaceResourceCategory_afterrender(sender) {\n    // callback:回调函数，ip:配置的服务地址， url:相对路径\n    // storeResourceCategory.toRefresh(callback, ip, url);\n    var serverAddr = getUrlParam(\"serverAddr\");\n    if(\"\" == serverAddr || null == serverAddr) {\n        serverAddr = \"www.hanweikeji.com:10050\";\n    }\n    // serverAddr = \"www.hanweikeji.com:10050\";\n    // var url = \"\";\n\n    storeResourceCategory.toRefresh(\n        function() {\n\n        }, serverAddr\n    );\n    // storeResourceCategory.rootValue = \"\";\n\n}\n\nfunction treeWorkSpaceResourceCategory_afterBindData(sender) {\n    // var categoryId = getUrlParam(\"categoryId\");\n    // var node = treeWorkSpaceResourceCategory.getNodeById(categoryId)\n    // if(null !== node && undefined !== node) {\n    //     node.select();\n    // }\n}\n\nfunction storeResourceCategory_load(sender, records, options) {\n\n    var nodeRoot = treeWorkSpaceResourceCategory.getRootNode();\n    if(null == nodeRoot) {\n        return;\n    }\n    for(var i = 0; i < nodeRoot.childNodes.length; i++) {\n        nodeRoot.childNodes[i].setIcon(\"/img/public/server6.png\");\n    }\n    // nodeRoot.setIcon(\"/img/public/server6.png\");\n\n    var categoryId = getUrlParam(\"categoryId\");\n    // var path = getUrlParam(\"path\");\n    treeWorkSpaceResourceCategory.expandAll();\n    // treeWorkSpaceResourceCategory.expandPath(path);\n    var node = treeWorkSpaceResourceCategory.getNodeById(categoryId);\n    if(null !== node && undefined !== node) {\n        node.select();\n    } else {\n        // treeWorkSpaceResourceCategory.expand(true);\n    }\n}","vmdcss":"","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}