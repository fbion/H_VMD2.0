{"vmdversion":"2.0.3.1108","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"afterrender\":\"MyViewport_afterrender\"},\"cn\":[{\"cid\":\"vmd.ux.TabWorkSpaceInfo\",\"id\":\"TabWorkSpaceInfo\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"beforerender\":\"TabWorkSpaceInfo_beforerender\",\"afterrender\":\"TabWorkSpaceInfo_afterrender\"}},{\"cid\":\"vmdButton\",\"id\":\"btnSave\",\"layoutConfig\":{},\"userConfig\":{\"x\":450,\"y\":430,\"width\":70,\"id\":\"btnSave\",\"text\":\"保存\",\"style\":\"background-color: rgb(64, 158, 255);    color: rgb(255, 255, 255);    font-size: 14px;\",\"click\":\"btnSave_click\"}},{\"cid\":\"vmdButton\",\"id\":\"btnClose\",\"layoutConfig\":{},\"userConfig\":{\"x\":530,\"y\":430,\"width\":70,\"id\":\"btnClose\",\"text\":\"关闭\",\"style\":\"background-color: rgb(201, 201, 201);    color: rgb(0, 0, 0);    font-size: 14px;\",\"click\":\"btnClose_click\"}}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdJsonStore\",\"id\":\"storeWorkflowList\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeWorkflowList\",\"storeConfig\":\"{\\\"id\\\":\\\"TDblz0Ejpz\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddressAll\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"所有服务地址\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"type\\\",\\\"value1\\\":\\\"return 3;\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"address\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"remark\\\",\\\"type\\\":\\\"string\\\"}]}\",\"load\":\"storeWfList_load\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"id\"},\"name\":\"id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"address\"},\"name\":\"address\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"remark\"},\"name\":\"remark\"}]},{\"cid\":\"vmdJsonStore\",\"id\":\"storeDataService\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeDataService\",\"storeConfig\":\"{\\\"id\\\":\\\"TDblz0Ejpz\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddressAll\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"所有服务地址\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"type\\\",\\\"value1\\\":\\\"return 4;\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"address\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"remark\\\",\\\"type\\\":\\\"string\\\"}]}\",\"load\":\"storeDsList_load\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"id\"},\"name\":\"id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"address\"},\"name\":\"address\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"remark\"},\"name\":\"remark\"}]},{\"cid\":\"vmdJsonStore\",\"id\":\"storeMSG\",\"layoutConfig\":{},\"userConfig\":{\"storeConfig\":\"{\\\"id\\\":\\\"TDblz0Ejpz\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"DataServiceWorkSpace/WorkSpaceInfo/ServiceAddressAll\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"所有服务地址\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"type\\\",\\\"value1\\\":\\\"return 5;\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"address\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"string\\\"}]}\",\"load\":\"storeMSG_load\",\"id\":\"storeMSG\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"address\"},\"name\":\"address\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"id\"},\"name\":\"id\"}]}]},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdsubviewport\",\"id\":\"SubView_Window\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"var workspaceId = \"\";\n// workspaceId = \"657e35d9-494a-456d-8f80-98b4924133d7\";\nfunction btnSave_click(sender, e) {\n    // 修改的工区名称需要同步到树节点中\n    var workspaceName = TabWorkSpaceInfo.iGetWorkSpaceName();\n    parent.btnWorkSpaceName.setText(workspaceName);\n    TabWorkSpaceInfo.iSaveData('workspaceId',\n        function() {\n            debugger\n            parent.initMenuWorkSpaceList();\n            parent.updateMenuWorkSpaceList();\n        }\n    );\n    // TabWorkSpaceInfo.isSaveFlow(\n    //     function() {\n    //         debugger\n    //         parent.reloadWorkflowCategory();\n    //     }\n    // );\n    // TabWorkSpaceInfo.isSaveService(\n    //     function() {\n    //         debugger\n    //         parent.reloadDataServiceCategory();\n    //     }\n    // );\n    // TabWorkSpaceInfo.isSaveMSG(\n    //     function() {}\n    // );\n}\n\nfunction TabWorkSpaceInfo_beforerender(sender) {\n    workspaceId = getUrlParam('workspaceid');\n    TabWorkSpaceInfo.iSetWorkSpaceId(workspaceId);\n    // TabWorkSpaceInfo.iSetApplyType(0);\n}\n\nfunction btnClose_click(sender, e) {\n    if(parent) {\n        parent.initMenuWorkSpaceList();\n        parent.formWorkSpaceConfig.close();\n    }\n}\n\nfunction MyViewport_afterrender(sender) {\n    workspaceId = getUrlParam('workspaceid');\n    TabWorkSpaceInfo.iSetIfDataLoaded(false);\n    TabWorkSpaceInfo.iQueryWorkSpaceInfo(workspaceId);\n}\n\nfunction TabWorkSpaceInfo_afterrender(sender) {\n\n    TabWorkSpaceInfo.comlistWorkflowAddress.regex = /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?:([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/;\n    TabWorkSpaceInfo.comlistWorkflowAddress.regexText = '输入标准的服务器地址!';\n    TabWorkSpaceInfo.comlistWorkflowAddress.valueField = 'id';\n    TabWorkSpaceInfo.comlistWorkflowAddress.displayField = 'address';\n    TabWorkSpaceInfo.comlistWorkflowAddress.dropDownFields = 'address';\n    TabWorkSpaceInfo.comlistWorkflowAddress.queryField = 'id';\n    TabWorkSpaceInfo.comlistWorkflowAddress.store = storeWorkflowList;\n\n    TabWorkSpaceInfo.comlistDataServiceAddress.regex = /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?:([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/;\n    TabWorkSpaceInfo.comlistDataServiceAddress.regexText = '输入标准的服务器地址!';\n    TabWorkSpaceInfo.comlistDataServiceAddress.valueField = 'id';\n    TabWorkSpaceInfo.comlistDataServiceAddress.displayField = 'address';\n    TabWorkSpaceInfo.comlistDataServiceAddress.dropDownFields = 'address';\n    TabWorkSpaceInfo.comlistDataServiceAddress.queryField = 'id';\n    TabWorkSpaceInfo.comlistDataServiceAddress.store = storeDataService;\n    \n     TabWorkSpaceInfo.comlistMSG.regex = /[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?:([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/;\n    TabWorkSpaceInfo.comlistMSG.regexText = '输入标准的服务器地址!';\n    TabWorkSpaceInfo.comlistMSG.valueField = 'id';\n    TabWorkSpaceInfo.comlistMSG.displayField = 'address';\n    TabWorkSpaceInfo.comlistMSG.dropDownFields = 'address';\n    TabWorkSpaceInfo.comlistMSG.queryField = 'id';\n    TabWorkSpaceInfo.comlistMSG.store = storeMSG;\n    \n    // TabWorkSpaceInfo.iSetWorkSpaceId(workspaceId);\n}\n\nfunction storeWorkflowList_load(sender, records, options) {\n    storeWorkflowList.removeAll()\n    records = records.distinct();\n    storeWorkflowList.toAdd(records);\n}\n\nfunction storeDataService_load(sender, records, options) {\n    storeDataService.removeAll()\n    records = records.distinct();\n    storeDataService.toAdd(records);\n}\n\nArray.prototype.distinct = function() {\n    var arr = this,\n        i,\n        obj = {},\n        result = [],\n        len = arr.length;\n    for(i = 0; i < arr.length; i++) {\n        if(!obj[arr[i].data.address]) { //如果能查找到，证明数组元素重复了\n            obj[arr[i].data.address] = 1;\n            result.push(arr[i].data);\n        }\n    }\n    return result;\n};\n\n\nfunction storeDsList_load(sender, records, options) {\n    storeDataService.removeAll()\n    records = records.distinct();\n    storeDataService.toAdd(records);\n}\n\nfunction storeWfList_load(sender, records, options) {\n    storeWorkflowList.removeAll()\n    records = records.distinct();\n    storeWorkflowList.toAdd(records);\n}\n\nfunction storeMSG_load(sender, records, options) {\n    storeMSG.removeAll()\n    records = records.distinct();\n    storeMSG.toAdd(records);\n}","vmdcss":"","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}