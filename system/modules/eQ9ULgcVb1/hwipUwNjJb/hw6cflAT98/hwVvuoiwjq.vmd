{"vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"afterrender\":\"MyViewport_afterrender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"height\":640,\"width\":850,\"header\":false,\"layout\":\"absolute\",\"autoHeight\":false},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"名称：\",\"x\":35,\"y\":20}},{\"cid\":\"textfield\",\"id\":\"hwTextProjectName\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":10,\"width\":350,\"id\":\"hwTextProjectName\"}},{\"cid\":\"label\",\"id\":\"label1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":180,\"text\":\"所属区域：\"}},{\"cid\":\"label\",\"id\":\"label2\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":45,\"text\":\"项目年度：\"}},{\"cid\":\"label\",\"id\":\"label3\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":80,\"text\":\"合同年度：\"}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":695,\"y\":600,\"width\":70,\"text\":\"确定\",\"style\":\"background-color: rgb(64, 158, 255);    color: rgb(255, 255, 255);    font-size: 14px;\",\"id\":\"btnOk\",\"click\":\"button_click\"}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"x\":775,\"y\":600,\"width\":70,\"text\":\"取消\",\"style\":\"background-color: rgb(201, 201, 201);    color: rgb(0, 0, 0);    font-size: 14px;\",\"id\":\"btnCancle\",\"click\":\"button1_click\"}},{\"cid\":\"vmdButton\",\"id\":\"btnSearch\",\"layoutConfig\":{},\"userConfig\":{\"x\":435,\"y\":10,\"id\":\"btnSearch\",\"text\":\"查询\",\"style\":\"font-size: 12px;\",\"width\":60,\"height\":26}},{\"cid\":\"vmdButton\",\"id\":\"btnNewProject\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":605,\"id\":\"btnNewProject\",\"text\":\"创建新项目...\",\"type\":\"text\",\"style\":\"font-size: 14px;\",\"click\":\"btnNewProject_click\"}},{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":325,\"width\":835,\"height\":270,\"header\":false,\"border\":true,\"bodyStyle\":\"border: 1px solid RGB(192, 192,192);\"},\"cn\":[{\"cid\":\"grid\",\"id\":\"MyGridProject\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":250,\"height\":269,\"header\":false,\"store\":\"storeProjectList\",\"border\":true,\"width\":832,\"id\":\"MyGridProject\",\"beforerender\":\"MyGridProject_beforerender\"},\"cn\":[{\"cid\":\"booleancolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"选择\",\"align\":\"center\",\"width\":40,\"dataIndex\":\"checked\",\"resizable\":false,\"fixed\":false},\"name\":\"checked\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"项目名称\",\"dataIndex\":\"project_name\",\"align\":\"left\",\"width\":310},\"name\":\"project_name\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"项目别名\",\"dataIndex\":\"alias_short_name\",\"align\":\"left\",\"width\":250},\"name\":\"alias_short_name\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"项目年度\",\"align\":\"center\",\"dataIndex\":\"row_created_date\"},\"name\":\"row_created_date\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"合同年度\",\"align\":\"center\",\"dataIndex\":\"contract_date\"},\"name\":\"contract_date\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"研发部门\"},\"name\":\"MyColumn5\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"所属区域\"},\"name\":\"MyColumn6\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"甲方单位\"},\"name\":\"MyColumn7\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"项目状态\"},\"name\":\"MyColumn8\"}]}]},{\"cid\":\"vmdDataView\",\"id\":\"dataviewRegion\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":175,\"width\":795,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"info\\\">\\n            <h4>{name}</h4></li>\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 0,\\n    \\\"name\\\": \\\"全部\\\"\\n}, {\\n    \\\"id\\\": 1,\\n    \\\"name\\\": \\\"胜利\\\"\\n}, {\\n    \\\"id\\\": 2,\\n    \\\"name\\\": \\\"西北\\\"\\n}, {\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"北京\\\"\\n}, {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"华东\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"东北\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"中原\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"西南\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"华中\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"华北\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"上海\\\"\\n}];\\nreturn data;\",\"height\":30,\"id\":\"dataviewRegion\"}},{\"cid\":\"vmdDataView\",\"id\":\"dataviewProjectYear\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":40,\"width\":790,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"info\\\">\\n            <h4>{name}</h4></li>\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 2,\\n    \\\"name\\\": \\\"全部\\\"\\n}, {\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"2018\\\"\\n}, {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"2017\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"2016\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"2015\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"2014\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"2013\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"2012\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"2011\\\"\\n}, {\\n    \\\"id\\\": 11,\\n    \\\"name\\\": \\\"2010\\\"\\n}, {\\n    \\\"id\\\": 12,\\n    \\\"name\\\": \\\"2009\\\"\\n}];\\nreturn data;\",\"height\":30,\"id\":\"dataviewProjectYear\"}},{\"cid\":\"vmdDataView\",\"id\":\"dataviewContractYear\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":75,\"width\":790,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"info\\\"> <h4>{name}</h4></li>\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 2,\\n    \\\"name\\\": \\\"全部\\\"\\n},{\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"2018\\\"\\n},  {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"2017\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"2016\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"2015\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"2014\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"2013\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"2012\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"2011\\\"\\n}, {\\n    \\\"id\\\": 11,\\n    \\\"name\\\": \\\"2010\\\"\\n}, {\\n    \\\"id\\\": 12,\\n    \\\"name\\\": \\\"2009\\\"\\n}];\\nreturn data;\",\"height\":30,\"id\":\"dataviewContractYear\"}},{\"cid\":\"label\",\"id\":\"label4\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":215,\"text\":\"甲方单位：\"}},{\"cid\":\"label\",\"id\":\"label5\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":115,\"text\":\"研发部门：\"}},{\"cid\":\"vmdDataView\",\"id\":\"dataviewDepartment\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":110,\"width\":790,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"info\\\"> <h4>{name}</h4></li>\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"全部\\\"\\n}, {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"集成技术\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"可视化技术\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"产研一部\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"产研二部\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"产研三部\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"数据库\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"需求部\\\"\\n}, {\\n    \\\"id\\\": 11,\\n    \\\"name\\\": \\\"测试部\\\"\\n}, {\\n    \\\"id\\\": 12,\\n    \\\"name\\\": \\\"设计部\\\"\\n}, {\\n    \\\"id\\\": 14,\\n    \\\"name\\\": \\\"营销部\\\"\\n}, {\\n    \\\"id\\\": 15,\\n    \\\"name\\\": \\\"行业支持部\\\"\\n}, {\\n    \\\"id\\\": 16,\\n    \\\"name\\\": \\\"北京\\\"\\n}, {\\n    \\\"id\\\": 17,\\n    \\\"name\\\": \\\"西北\\\"\\n}, {\\n    \\\"id\\\": 18,\\n    \\\"name\\\": \\\"东北\\\"\\n}, {\\n    \\\"id\\\": 19,\\n    \\\"name\\\": \\\"华中\\\"\\n}, {\\n    \\\"id\\\": 20,\\n    \\\"name\\\": \\\"济南\\\"\\n}, {\\n    \\\"id\\\": 21,\\n    \\\"name\\\": \\\"西安\\\"\\n}];\\nreturn data;\",\"height\":60,\"id\":\"dataviewDepartment\"}},{\"cid\":\"label\",\"id\":\"label6\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":300,\"text\":\"项目状态：\",\"height\":15}},{\"cid\":\"checkboxgroup\",\"id\":\"chkgrpState\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":295,\"width\":765,\"height\":30,\"columns\":10,\"id\":\"chkgrpState\"},\"cn\":[{\"cid\":\"checkbox\",\"id\":\"hwCheckbox\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"立项\",\"fieldLabel\":\"\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox1\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"需求\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox2\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"设计\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox3\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"研发\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox4\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"测试\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox5\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"维护\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox6\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"培训\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox7\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"暂停\",\"fieldLabel\":\"\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox8\",\"layoutConfig\":{},\"userConfig\":{\"fieldLabel\":\"\",\"boxLabel\":\"取消\"}},{\"cid\":\"checkbox\",\"id\":\"hwCheckbox9\",\"layoutConfig\":{},\"userConfig\":{\"boxLabel\":\"结束\",\"fieldLabel\":\"\",\"width\":97}}]},{\"cid\":\"vmdDataView\",\"id\":\"dataviewFirstParty\",\"layoutConfig\":{},\"userConfig\":{\"x\":80,\"y\":210,\"width\":760,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"infoFirst\\\">\\n            <h4>{name}</h4></li>\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 2,\\n    \\\"name\\\": \\\"全部\\\"\\n}, {\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"东营汉威石油技术开发有限公司\\\"\\n}, {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"中国石油新疆油田分公司\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"中国石化股份公司华北油气分公司\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"滨南采油厂\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"江汉信息中心\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"新春采油厂\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"东胜\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"管理局劳资处厂\\\"\\n}, {\\n    \\\"id\\\": 11,\\n    \\\"name\\\": \\\"华东分公司\\\"\\n}, {\\n    \\\"id\\\": 12,\\n    \\\"name\\\": \\\"鲁胜油公司\\\"\\n}];\\nreturn data;\",\"height\":80,\"itemSelector\":\"li.info\",\"cls\":\"\",\"id\":\"dataviewFirstParty\"}}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdJsonStore\",\"id\":\"storeProjectList\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeProjectList\",\"storeConfig\":\"{\\\"id\\\":\\\"TA6EtU7wTx\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"DataServiceWorkSpace/projectInfo/ProjectAll\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"所有项目\\\",\\\"getMethods\\\":[],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"checked\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"project_name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"row_created_date\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"contract_date\\\",\\\"type\\\":\\\"string\\\"}]}\",\"load\":\"storeProjectList_load\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"checked\"},\"name\":\"checked\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"project_name\"},\"name\":\"project_name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"row_created_date\"},\"name\":\"row_created_date\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"contract_date\"},\"name\":\"contract_date\"}]},{\"cid\":\"vmdJsonStore\",\"id\":\"storeDepartment\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeDepartment\"}}]},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{}}]}","vmdevents":"var workspaceId = \"\";\n\nfunction btnNewProject_click(sender, e) {\n\n    window.MyGridProject = MyGridProject;\n    MyGridProject.newProject = newProject;\n    var formNewProject = new parent.vmd.window({\n        title: \"项目添加\",\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwhhRITolM.html\",\n        auto: false,\n        height: 640,\n        width: 635,\n        params: {\n            r: new Date().getTime()\n        }\n    })\n\n    formNewProject.show();\n    window.formNewProject = formNewProject;\n}\n\n// 创建新项目\nvar newProject = function(jsonInfo) {\n\n    debugger;\n    var projectId = vmd.util.guid();\n    var aliasId = vmd.util.guid();\n    var changedBy = \"\";\n    var changedDate = \"\";\n    var createdBy = \"\";\n    var createdDate = \"\";\n\n    // 保存到数据库\n    hwDas.add(\n        \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {}, [{\n            'workspaceid': workspaceId,\n            'projectid': projectId,\n            'name': jsonInfo.name,\n            'alias': jsonInfo.alias,\n            'aliasid': aliasId,\n            'changeddate': changedDate,\n            'changedby': changedBy,\n            'createddate': createdDate,\n            'createdby': createdBy,\n            'region': jsonInfo.region,\n            'department': jsonInfo.department,\n            'mister': jsonInfo.mister,\n            'manager': jsonInfo.manager,\n            'manager2': jsonInfo.manager2,\n            'year': jsonInfo.year,\n            'state': jsonInfo.state,\n            'projectparent': jsonInfo.projectParent,\n            'projectcontinue': jsonInfo.projectContinue,\n            'datecustomerstart': jsonInfo.dateCustomerStart,\n            'datecustomerend': jsonInfo.dateCustomerEnd,\n            'dateestimatestart': jsonInfo.dateEstimateStart,\n            'dateestimateend': jsonInfo.dateEstimateEnd,\n            'estspend': jsonInfo.estspend,\n            'bonus': jsonInfo.bonus,\n            'firstcustomerid': jsonInfo.firstCustomerId,\n            'firstcontact': jsonInfo.firstContact,\n            'techtype': jsonInfo.techType,\n            'internal': jsonInfo.bInternal,\n            'description': jsonInfo.remark\n        }],\n        // hwDas.add(\n        //     \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {}, [{\n        //         'workspaceid': workspaceId,\n        //         'projectid': projectId,\n        //         'name': name,\n        //         'alias': alias,\n        //         'aliasid': aliasId,\n        //         'changeddate': changedDate,\n        //         'changedby': changedBy,\n        //         'createddate': createdDate,\n        //         'createdby': createdBy,\n        //         'description': remark\n        //     }],\n        function(result) {\n\n            Tips.tips(\"查询成功！\", \"success\");\n            // 刷新项目列表数据集（或调用数据集对象添加一条记录）\n            storeProjectList.toRefresh();\n            // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n        },\n        function(msg) {\n\n            Tips.tips(\"保存失败！\", \"error\");\n            // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\");\n        }\n    );\n}\n\n// function btnNewProject_click(sender, e) {\n//     // 创建新项目\n//     var addProject = function(name, alias, remark) {\n\n//         debugger;\n//         var projectId = vmd.util.guid();\n//         var aliasId = vmd.util.guid();\n//         var changedBy = \"\";\n//         var changedDate = \"\";\n//         var createdBy = \"\";\n//         var createdDate = \"\";\n\n//         // 保存到数据库\n//         hwDas.add(\n//             \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {}, [{\n//                 'workspaceid': workspaceId,\n//                 'projectid': projectId,\n//                 'name': name,\n//                 'alias': alias,\n//                 'aliasid': aliasId,\n//                 'changeddate': changedDate,\n//                 'changedby': changedBy,\n//                 'createddate': createdDate,\n//                 'createdby': createdBy,\n//                 'description': remark\n//             }],\n//             function(result) {\n\n//                 Tips.tips(\"查询成功！\", \"success\");\n//                 // 刷新项目列表数据集（或调用数据集对象添加一条记录）\n//                 storeProjectList.toRefresh();\n//                 // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n//             },\n//             function(msg) {\n\n//                 Tips.tips(\"保存失败！\", \"error\");\n//                 // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\");\n//             }\n//         );\n//     }\n\n//     var winForm = new Ext.winAddProject(addProject, \"\", \"\", \"\");\n//     winForm.show();\n// }\n\n//添加资源中心服务地址\nExt.winAddProject = Ext.extend(Ext.Window, {\n    xtype: \"window\",\n    title: \"新建项目\",\n    width: 300,\n    height: 200,\n    layout: \"form\",\n    bodyStyle: 'padding:15px',\n    labelAlign: \"left\",\n    labelWidth: 40,\n    modal: true,\n    constructor: function(callback, name, alias, remark) {\n        this.callback = callback;\n        this.valueAlias = alias;\n        this.valueName = name;\n        this.valueRemark = remark;\n        this.callParent();\n    },\n    initComponent: function() {\n        var me = this;\n        this.fbar = [{\n            text: \"确定\",\n            handler: function() {\n                me.callback(Ext.getCmp('name').getValue(), Ext.getCmp('alias').getValue(), Ext.getCmp('remark').getValue());\n                me.close();\n            }\n        }, {\n            text: \"取消\",\n            handler: function() {\n                me.close();\n            }\n        }];\n\n        this.items = [{\n            id: 'name',\n            xtype: \"textfield\",\n            fieldLabel: \"名称\",\n            anchor: \"100%\",\n            value: this.valueName\n        }, {\n            id: 'alias',\n            xtype: \"textfield\",\n            fieldLabel: \"别名\",\n            anchor: \"100%\",\n            value: this.valueAlias\n        }, {\n            id: 'remark',\n            xtype: \"textfield\",\n            fieldLabel: \"说明\",\n            anchor: \"100%\",\n            value: this.valueRemark\n        }]\n        Ext.winAddProject.superclass.initComponent.call(this);\n    }\n})\n\n// 确定按钮事件\nfunction button_click(sender, e) {\n    debugger;\n\n    // 删除与当前工区相关的所有项目\n    hwDas.del(\n        \"DataServiceWorkSpace/WorkSpaceInfo/DelProjectByWorkspace\", {}, {\n            'workspaceid': workspaceId\n        },\n        function(result) {\n            // Tips.tips(\"删除成功！\", \"success\");\n            // Ext.Msg.alert(\"提示\", \"保存服务地址信息成功！\");\n        },\n        function(msg) {\n            // Tips.tips(\"删除失败！\", \"error\");\n            // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n        }\n    );\n\n    // 根据选择的项目保存与工区关联的项目\n    var selModel = MyGridProject.getSelectionModel();\n    // if(null != selModel && undefined != selModel) {\n    //     if(null != selModel.selections && undefined != selModel.selections) {\n    //         if(selModel.selections.items) {\n    //             for(var i = 0; i < selModel.selections.items.length; i++) {\n    //                 hwDas.add(\n    //                     \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {}, [{\n    //                         'workspaceid': workspaceId,\n    //                         'projectid': selModel.selections.items[i].projectid\n    //                     }],\n    //                     function(result) {\n    //                         // Tips.tips(\"保存成功！\", \"success\");\n    //                     },\n    //                     function(msg) {\n    //                         // Tips.tips(\"保存失败！\", \"error\");\n    //                     }\n    //                 );\n    //             }\n    //         }\n    //     }\n    // }\n\n    var arrData = [];\n\n    if(null != selModel && undefined != selModel) {\n        if(null != selModel.selections && undefined != selModel.selections) {\n            if(selModel.selections.items) {\n                for(var i = 0; i < selModel.selections.items.length; i++) {\n                    var objRow = {\n                        'workspaceid': workspaceId,\n                        'projectid': selModel.selections.items[i].project_id\n                    };\n                    arrData.push(objRow);\n                }\n            }\n        }\n    }\n\n    hwDas.add(\n        \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {}, arrData,\n        function(result) {\n            Tips.tips(\"保存成功！\", \"success\");\n            // 刷新项目列表数据集（或调用数据集对象添加一条记录）\n            storeProjectList.toRefresh();\n        },\n        function(msg) {\n            Tips.tips(\"保存失败！\", \"error\");\n        }\n    );\n\n    debugger\n    parent.treeProjects.addProjectTree();\n    parent.formAddProject.close();\n}\n\n// 取消按钮事件\nfunction MyViewport_afterrender(sender) {\n    debugger;\n    workspaceId = getUrlParam(\"workspaceid\");\n    // workspaceId = \"657e35d9-494a-456d-8f80-98b4924133d7\";\n\n    // 加载项目年度列表\n    // loadProjectYear();\n}\n\nfunction loadProjectYear() {\n\n    var arrData = [{\n        \"id\": 0,\n        \"name\": \"全部\"\n    }];\n\n    var myDate = new Date();\n    var thisYear = myDate.getFullYear(); //获取完整的年份(4位,1970-????)\n\n    for(var i = 0; i < 10; i++) {\n        objData = {\n            \"id\": (i+1).toString(),\n            \"name\": (thisYear - i).toString()\n        };\n        arrData.push(objData);\n    }\n    debugger;\n    dataviewProjectYear.data = arrData;\n}\n\nfunction button1_click(sender, e) {\n\n    parent.formAddProject.close();\n}\n\nfunction MyGridProject_beforerender(sender) {\n    // MyGridProject.selModel = {\n    //     injectCheckbox: 0,\n    //     mode: \"SIMPLE\",     //\"SINGLE\"/\"SIMPLE\"/\"MULTI\"\n    //     checkOnly: true     //只能通过checkbox选择\n    // };\n}\n\nfunction storeProjectList_load(sender, records, options) {\n    // 绑定的数据加载完成后\n    // 查询当前工区包含的项目，设置选中\n    hwDas.get(\n        \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {\n            \"workspaceid\": workspaceId\n        },\n        function(result) {\n            // 根据获取的数据赋值基本信息Tab页\n            if(null === result && undefined === result) {\n                return;\n            }\n\n            if(null != result.data && undefined != result.data) {\n                if(result.data.length > 0) {\n                    if(null != result.data[0].datas && undefined != result.data[0].datas) {\n                        for(var i = 0; i < result.data[0].datas.length; i++) {\n                            // result.data[0].datas[i].project_id;\n                            // 根据项目ID，设置列表项的选中\n                        }\n                    }\n                }\n            }\n        },\n        function(msg) {\n            // Tips.tips(\"查询失败！\", \"error\");\n        });\n}","vmdcss":".info {\n    float: left;\n    padding: 0px 0px;\n    margin: 3px;\n    text-align: left;\n    color: #333;\n    height: 20px;\n    width: 65px;\n    overflow: hidden;\n    border-top: 1px solid transparent;\n    cursor: pointer\n}\n.infoFirst {\n    float: left;\n    padding: 0px 0px;\n    margin: 3px;\n    text-align: left;\n    color: #333;\n    height: 20px;\n    width: 240px;\n    overflow: hidden;\n    border-top: 1px solid transparent;\n    cursor: pointer\n}","vmdprops":"\"\"","type":"module"}