{"vmdversion":"2.0.3.0718","vmdlayout":"{\"components\":[{\"cid\":\"viewport\",\"id\":\"MyViewport\",\"layoutConfig\":{},\"userConfig\":{\"layout\":\"absolute\",\"afterrender\":\"MyViewport_afterrender\",\"beforerender\":\"MyViewport_beforerender\"},\"cn\":[{\"cid\":\"panel\",\"id\":\"panel\",\"layoutConfig\":{},\"userConfig\":{\"x\":0,\"y\":0,\"height\":460,\"width\":870,\"header\":false,\"layout\":\"absolute\",\"autoHeight\":false},\"cn\":[{\"cid\":\"label\",\"id\":\"label\",\"layoutConfig\":{},\"userConfig\":{\"text\":\"名称：\",\"x\":10,\"y\":15,\"height\":15}},{\"cid\":\"textfield\",\"id\":\"hwTextProjectName\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":10,\"width\":350,\"id\":\"hwTextProjectName\"}},{\"cid\":\"label\",\"id\":\"label1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":115,\"text\":\"区域：\"}},{\"cid\":\"label\",\"id\":\"label2\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":50,\"text\":\"项目：\"}},{\"cid\":\"label\",\"id\":\"label3\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":82,\"text\":\"合同：\"}},{\"cid\":\"vmdButton\",\"id\":\"button\",\"layoutConfig\":{},\"userConfig\":{\"x\":480,\"y\":420,\"width\":70,\"text\":\"确定\",\"style\":\"background-color: rgb(64, 158, 255);    color: rgb(255, 255, 255);    font-size: 14px;\",\"id\":\"btnOk\",\"click\":\"button_click\",\"hidden\":true}},{\"cid\":\"vmdButton\",\"id\":\"button1\",\"layoutConfig\":{},\"userConfig\":{\"x\":550,\"y\":420,\"width\":70,\"text\":\"取消\",\"style\":\"background-color: rgb(201, 201, 201);    color: rgb(0, 0, 0);    font-size: 14px;\",\"id\":\"btnCancle\",\"click\":\"button1_click\",\"hidden\":true}},{\"cid\":\"vmdButton\",\"id\":\"btnSearch\",\"layoutConfig\":{},\"userConfig\":{\"x\":405,\"y\":10,\"id\":\"btnSearch\",\"text\":\"查询\",\"style\":\"font-size: 12px;\",\"width\":60,\"height\":26,\"click\":\"btnSearch_click\"}},{\"cid\":\"vmdButton\",\"id\":\"btnNewProject\",\"layoutConfig\":{},\"userConfig\":{\"x\":15,\"y\":415,\"id\":\"btnNewProject\",\"text\":\"创建新项目...\",\"type\":\"text\",\"style\":\"font-size: 14px;\",\"click\":\"btnNewProject_click\",\"hidden\":true}},{\"cid\":\"panel\",\"id\":\"panel1\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":150,\"width\":845,\"height\":260,\"header\":false,\"border\":true,\"bodyStyle\":\"border: 1px solid RGB(192, 192,192);\"},\"cn\":[{\"cid\":\"grid\",\"id\":\"MyGridProject\",\"layoutConfig\":{},\"userConfig\":{\"x\":20,\"y\":250,\"height\":258,\"header\":false,\"store\":\"storeProjectList\",\"border\":true,\"width\":845,\"id\":\"MyGridProject\",\"beforerender\":\"MyGridProject_beforerender\",\"keydown\":\"MyGridProject_keydown\",\"checked\":\"MyGridProject_checked\"},\"cn\":[{\"cid\":\"checkcolumn\",\"layoutConfig\":{},\"userConfig\":{\"width\":40,\"header\":\"选择\",\"dataIndex\":\"checked\",\"align\":\"center\",\"style\":\"line-height: 30px;\",\"tooltip\":\"\",\"resizable\":true,\"fixed\":false},\"name\":\"checked\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"项目名称\",\"dataIndex\":\"project_name\",\"align\":\"left\",\"width\":290},\"name\":\"project_name\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"项目别名\",\"dataIndex\":\"alias_short_name\",\"align\":\"left\",\"width\":230},\"name\":\"alias_short_name\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"项目年度\",\"align\":\"center\",\"dataIndex\":\"year\",\"width\":80},\"name\":\"year\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"合同年月\",\"align\":\"center\",\"dataIndex\":\"contract_date\",\"width\":80},\"name\":\"contract_date\"},{\"cid\":\"gridcolumn\",\"layoutConfig\":{},\"userConfig\":{\"header\":\"所属区域\",\"align\":\"center\",\"width\":90,\"dataIndex\":\"region\"},\"name\":\"region\"}]}]},{\"cid\":\"vmdDataView\",\"id\":\"dataviewRegion\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":110,\"width\":770,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"info\\\">{name}</li>\\n        <!--<li class=\\\"info\\\">-->\\n        <!--    <h4>{name}</h4></li>-->\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 0,\\n    \\\"name\\\": \\\"全部\\\",\\n    \\\"alias\\\": \\\"全部\\\"\\n}, {\\n    \\\"id\\\": 1,\\n    \\\"name\\\": \\\"胜利\\\",\\n    \\\"alias\\\": \\\"胜利\\\"\\n}, {\\n    \\\"id\\\": 2,\\n    \\\"name\\\": \\\"西北\\\",\\n    \\\"alias\\\": \\\"西北\\\"\\n}, {\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"北京\\\",\\n    \\\"alias\\\": \\\"北京\\\"\\n}, {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"华东\\\",\\n    \\\"alias\\\": \\\"华东\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"东北\\\",\\n    \\\"alias\\\": \\\"东北\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"中原\\\",\\n    \\\"alias\\\": \\\"中原\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"西南\\\",\\n    \\\"alias\\\": \\\"西南\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"华中\\\",\\n    \\\"alias\\\": \\\"华中\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"华北\\\",\\n    \\\"alias\\\": \\\"华北\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"上海\\\",\\n    \\\"alias\\\": \\\"上海\\\"\\n}];\\nreturn data;\",\"height\":30,\"id\":\"dataviewRegion\",\"click\":\"dataviewRegion_click\",\"selectedClass\":\"x-view-selected-ext\",\"overClass\":\"info-hover-ext\",\"store\":\"storeRegion\"}},{\"cid\":\"vmdButton\",\"id\":\"btnProjectYearMore\",\"layoutConfig\":{},\"userConfig\":{\"x\":820,\"y\":48,\"icon\":\"icon-chevron-right\",\"text\":\"  \",\"width\":30,\"type\":\"text\",\"id\":\"btnProjectYearMore\",\"click\":\"btnProjectYearMore_click\"}},{\"cid\":\"vmdDataView\",\"id\":\"dataviewProjectYear\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":45,\"width\":770,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"info\\\"> {name}</li>\\n        <!--<li class=\\\"info\\\"> <h4>{name}</h4></li>-->\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"2018\\\"\\n}, {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"2017\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"2016\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"2015\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"2014\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"2013\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"2012\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"2011\\\"\\n}, {\\n    \\\"id\\\": 11,\\n    \\\"name\\\": \\\"2010\\\"\\n}, {\\n    \\\"id\\\": 12,\\n    \\\"name\\\": \\\"2009\\\"\\n}, {\\n    \\\"id\\\": 13,\\n    \\\"name\\\": \\\"2008\\\"\\n}];\\nreturn data;\",\"height\":30,\"id\":\"dataviewProjectYear\",\"itemSelector\":\".info\",\"style\":\"background: none;    border: none;\",\"click\":\"dataviewProjectYear_click\",\"selectedClass\":\"x-view-selected-ext\",\"overClass\":\"info-hover-ext\"}},{\"cid\":\"vmdDataView\",\"id\":\"dataviewContractYear\",\"layoutConfig\":{},\"userConfig\":{\"x\":50,\"y\":77,\"width\":770,\"tpl\":\"<ul>\\n    <tpl for=\\\".\\\">\\n        <li class=\\\"info\\\">{name}</li>\\n        <!--<li class=\\\"info\\\">-->\\n        <!--    <h4>{name}</h4></li>-->\\n    </tpl>\\n</ul>\",\"data\":\"var data = [{\\n    \\\"id\\\": 3,\\n    \\\"name\\\": \\\"2018\\\"\\n}, {\\n    \\\"id\\\": 4,\\n    \\\"name\\\": \\\"2017\\\"\\n}, {\\n    \\\"id\\\": 5,\\n    \\\"name\\\": \\\"2016\\\"\\n}, {\\n    \\\"id\\\": 6,\\n    \\\"name\\\": \\\"2015\\\"\\n}, {\\n    \\\"id\\\": 7,\\n    \\\"name\\\": \\\"2014\\\"\\n}, {\\n    \\\"id\\\": 8,\\n    \\\"name\\\": \\\"2013\\\"\\n}, {\\n    \\\"id\\\": 9,\\n    \\\"name\\\": \\\"2012\\\"\\n}, {\\n    \\\"id\\\": 10,\\n    \\\"name\\\": \\\"2011\\\"\\n}, {\\n    \\\"id\\\": 11,\\n    \\\"name\\\": \\\"2010\\\"\\n}, {\\n    \\\"id\\\": 12,\\n    \\\"name\\\": \\\"2009\\\"\\n}, {\\n    \\\"id\\\": 13,\\n    \\\"name\\\": \\\"2008\\\"\\n}];\\nreturn data;\",\"height\":30,\"id\":\"dataviewContractYear\",\"click\":\"dataviewContractYear_click\",\"selectedClass\":\"x-view-selected-ext\",\"overClass\":\"info-hover-ext\"}},{\"cid\":\"panel\",\"id\":\"panel5\",\"layoutConfig\":{},\"userConfig\":{\"x\":5,\"y\":105,\"header\":false,\"layout\":\"absolute\",\"height\":1,\"width\":850,\"style\":\"border-bottom: 1px solid rgb(221, 221, 221);\"}},{\"cid\":\"panel\",\"id\":\"panel2\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":70,\"header\":false,\"layout\":\"absolute\",\"height\":1,\"width\":845,\"style\":\"border-bottom: 1px solid rgb(221, 221, 221);\"}},{\"cid\":\"panel\",\"id\":\"panel3\",\"layoutConfig\":{},\"userConfig\":{\"x\":10,\"y\":140,\"header\":false,\"layout\":\"absolute\",\"height\":1,\"width\":845,\"style\":\"border-bottom: 1px solid rgb(221, 221, 221);\"}},{\"cid\":\"vmdButton\",\"id\":\"btnAdvanced\",\"layoutConfig\":{},\"userConfig\":{\"x\":780,\"y\":10,\"text\":\"高级...\",\"width\":70,\"style\":\"font-size: 12px;\",\"hidden\":true,\"id\":\"btnAdvanced\"}},{\"cid\":\"vmdButton\",\"id\":\"btnContractYearMore\",\"layoutConfig\":{},\"userConfig\":{\"x\":820,\"y\":80,\"icon\":\"icon-chevron-right\",\"text\":\"  \",\"width\":30,\"type\":\"text\",\"id\":\"btnContractYearMore\",\"click\":\"btnContractYearMore_click\"}},{\"cid\":\"vmdButton\",\"id\":\"btnClose\",\"layoutConfig\":{},\"userConfig\":{\"x\":780,\"y\":420,\"width\":70,\"text\":\"取消\",\"id\":\"btnClose\",\"style\":\"background-color: rgb(201, 201, 201);    color: rgb(0, 0, 0);    font-size: 14px;\",\"click\":\"btnClose_click\"}},{\"cid\":\"vmdButton\",\"id\":\"btnOk\",\"layoutConfig\":{},\"userConfig\":{\"x\":700,\"y\":420,\"width\":70,\"style\":\"background-color: rgb(64, 158, 255);    color: rgb(255, 255, 255);    font-size: 14px;\",\"text\":\"确定\",\"id\":\"btnOk\",\"click\":\"btnOk_click\"}}]}]},{\"cid\":\"vmddataset\",\"id\":\"数据集\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdJsonStore\",\"id\":\"storeProjectList\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeProjectList\",\"storeConfig\":\"{\\\"id\\\":\\\"THoQDqx6yn\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"DataServiceWorkSpace/projectInfo/queryProjectList\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"查询工区中添加项目的项目列表\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"datecontractstart\\\",\\\"value1\\\":\\\"return hwvarContractStart.getValue();\\\",\\\"value2\\\":\\\"\\\"},{\\\"id\\\":\\\"datecontractend\\\",\\\"value1\\\":\\\"return hwvarContractEnd.getValue();\\\",\\\"value2\\\":\\\"\\\"},{\\\"id\\\":\\\"projectname\\\",\\\"value1\\\":\\\"return hwvarProjectName.getValue();\\\",\\\"value2\\\":\\\"\\\"},{\\\"id\\\":\\\"region\\\",\\\"value1\\\":\\\"return hwvarRegion.getValue();\\\",\\\"value2\\\":\\\"\\\"},{\\\"id\\\":\\\"year\\\",\\\"value1\\\":\\\"return hwvarProjectYear.getValue();\\\",\\\"value2\\\":\\\"\\\"},{\\\"id\\\":\\\"workspaceid\\\",\\\"value1\\\":\\\"return hwvarWorkSpaceId.getValue();\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"project_id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"project_name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"year\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"contract_date\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"region\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"checked\\\",\\\"type\\\":\\\"int64\\\"}]}\",\"load\":\"storeProjectList_load\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"project_id\"},\"name\":\"project_id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"project_name\"},\"name\":\"project_name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"year\"},\"name\":\"year\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"contract_date\"},\"name\":\"contract_date\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"region\"},\"name\":\"region\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"checked\"},\"name\":\"checked\"}]},{\"cid\":\"vmdJsonStore\",\"id\":\"storeDepartment\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeDepartment\",\"storeConfig\":\"{\\\"id\\\":\\\"TG0ZNlw8LG\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"DataServiceWorkSpace/projectInfo/otherinfo/department\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"部门信息查询\\\",\\\"getMethods\\\":[],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"}]}\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"id\"},\"name\":\"id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"}]},{\"cid\":\"vmdJsonStore\",\"id\":\"storeRegion\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"storeRegion\",\"storeConfig\":\"{\\\"id\\\":\\\"TG03PrfW4l\\\",\\\"callcode\\\":\\\"vmdCode\\\",\\\"url\\\":\\\"DataServiceWorkSpace/projectInfo/otherinfo/region\\\",\\\"host\\\":\\\"\\\",\\\"isHwRest\\\":true,\\\"name\\\":\\\"大区信息查询\\\",\\\"getMethods\\\":[{\\\"id\\\":\\\"filter\\\",\\\"value1\\\":\\\"\\\",\\\"value2\\\":\\\"\\\"}],\\\"postMethods\\\":[],\\\"putMethods\\\":[],\\\"deleteMethods\\\":[],\\\"saveMethods\\\":[],\\\"fields\\\":[{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"name\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"alias\\\",\\\"type\\\":\\\"string\\\"}]}\"},\"cn\":[{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"id\"},\"name\":\"id\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"name\"},\"name\":\"name\"},{\"cid\":\"datafield\",\"layoutConfig\":{},\"userConfig\":{\"cid\":\"datafield\",\"name\":\"alias\"},\"name\":\"alias\"}]}]},{\"cid\":\"vmdvariable\",\"id\":\"变量\",\"layoutConfig\":{},\"userConfig\":{},\"cn\":[{\"cid\":\"vmdVariable\",\"id\":\"hwvarWorkSpaceId\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwvarWorkSpaceId\"}},{\"cid\":\"vmdVariable\",\"id\":\"hwvarProjectName\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwvarProjectName\"}},{\"cid\":\"vmdVariable\",\"id\":\"hwvarProjectYear\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwvarProjectYear\"}},{\"cid\":\"vmdVariable\",\"id\":\"hwvarContractYear\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwvarContractYear\"}},{\"cid\":\"vmdVariable\",\"id\":\"hwvarRegion\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwvarRegion\"}},{\"cid\":\"vmdVariable\",\"id\":\"hwvarContractStart\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwvarContractStart\"}},{\"cid\":\"vmdVariable\",\"id\":\"hwvarContractEnd\",\"layoutConfig\":{},\"userConfig\":{\"id\":\"hwvarContractEnd\"}}]}]}","vmdevents":"var workspaceId = \"\";\n\n// var storeProjectYear = new Ext.data.JsonStore({\n//     proxy: new Ext.data.MemoryProxy(),\n//     fields: ['label', 'value', 'checked']\n// });\n\n\nfunction btnNewProject_click(sender, e) {\n\n    window.MyGridProject = MyGridProject;\n    if(parent) {\n        parent.MyGridProject = MyGridProject;\n    }\n    MyGridProject.newProject = newProject;\n    var formNewProject = new parent.vmd.window({\n        title: \"项目添加\",\n        url: vmd.core.getVirtualPath() + \"/modules/eQ9ULgcVb1/hwipUwNjJb/hwhhRITolM.html\",\n        auto: false,\n        height: 650,\n        width: 640,\n        params: {\n            r: new Date().getTime()\n        }\n    })\n\n    formNewProject.show();\n    window.formNewProject = formNewProject;\n    if(parent) {\n        parent.formNewProject = formNewProject;\n    }\n}\n\n\n// function btnNewProject_click(sender, e) {\n//     // 创建新项目\n//     var addProject = function(name, alias, remark) {\n\n//         var projectId = vmd.util.guid();\n//         var aliasId = vmd.util.guid();\n//         var changedBy = \"\";\n//         var changedDate = \"\";\n//         var createdBy = \"\";\n//         var createdDate = \"\";\n\n//         // 保存到数据库\n//         hwDas.add(\n//             \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {}, [{\n//                 'workspaceid': workspaceId,\n//                 'projectid': projectId,\n//                 'name': name,\n//                 'alias': alias,\n//                 'aliasid': aliasId,\n//                 'changeddate': changedDate,\n//                 'changedby': changedBy,\n//                 'createddate': createdDate,\n//                 'createdby': createdBy,\n//                 'description': remark\n//             }],\n//             function(result) {\n\n//                 Tips.tips(\"查询成功！\", \"success\");\n//                 // 刷新项目列表数据集（或调用数据集对象添加一条记录）\n//                 storeProjectList.toRefresh();\n//                 // Ext.Msg.alert(\"提示\", \"添加服务地址成功！\")\n//             },\n//             function(msg) {\n\n//                 Tips.tips(\"保存失败！\", \"error\");\n//                 // Ext.Msg.alert(\"提示\", \"添加服务地址失败！\");\n//             }\n//         );\n//     }\n\n//     var winForm = new Ext.winAddProject(addProject, \"\", \"\", \"\");\n//     winForm.show();\n// }\n\n//添加资源中心服务地址\nExt.winAddProject = Ext.extend(Ext.Window, {\n    xtype: \"window\",\n    title: \"新建项目\",\n    width: 300,\n    height: 200,\n    layout: \"form\",\n    bodyStyle: 'padding:15px',\n    labelAlign: \"left\",\n    labelWidth: 40,\n    modal: true,\n    constructor: function(callback, name, alias, remark) {\n        this.callback = callback;\n        this.valueAlias = alias;\n        this.valueName = name;\n        this.valueRemark = remark;\n        this.callParent();\n    },\n    initComponent: function() {\n        var me = this;\n        this.fbar = [{\n            text: \"确定\",\n            handler: function() {\n                me.callback(Ext.getCmp('name').getValue(), Ext.getCmp('alias').getValue(), Ext.getCmp('remark').getValue());\n                me.close();\n            }\n        }, {\n            text: \"取消\",\n            handler: function() {\n                me.close();\n            }\n        }];\n\n        this.items = [{\n            id: 'name',\n            xtype: \"textfield\",\n            fieldLabel: \"名称\",\n            anchor: \"100%\",\n            value: this.valueName\n        }, {\n            id: 'alias',\n            xtype: \"textfield\",\n            fieldLabel: \"别名\",\n            anchor: \"100%\",\n            value: this.valueAlias\n        }, {\n            id: 'remark',\n            xtype: \"textfield\",\n            fieldLabel: \"说明\",\n            anchor: \"100%\",\n            value: this.valueRemark\n        }]\n        Ext.winAddProject.superclass.initComponent.call(this);\n    }\n})\n\n// // 确定按钮事件\n// function button_click(sender, e) {\n\n//     // 根据选择的项目保存与工区关联的项目\n//     var arrData = [];\n//     storeProjectList.findBy(function(record, id) {\n//         if(record.get('checked')) {\n//             var objRow = {\n//                 \"Value\": {\n//                     'workspaceid': workspaceId,\n//                     'projectid': record.data.project_id\n//                 },\n//                 \"Original\": {},\n//                 \"RowState\": \"\"\n//             };\n//             arrData.push(objRow);\n//         }\n//     });\n\n//     hwDas.save(\"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {}, arrData,\n//         function(msg) {\n//             // Tips.tips(\"删除失败！\", \"error\");\n//             // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n\n//             // window.treeProjects = treeProjects;\n//             // treeProjects.addProjectTree = addProjectTree;\n//             // parent.treeProjects.store.toRefresh();\n//             parent.treeProjects.addProjectTree();\n\n//             parent.formAddProject.close();\n//         },\n//         function(msg) {\n//             // Tips.tips(\"删除失败！\", \"error\");\n//             // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n//             parent.formAddProject.close();\n//         });\n// }\n\n// 确定按钮事件\nfunction button_click(sender, e) {\n\n    // 删除与当前工区相关的所有项目\n    hwDas.del(\n        \"DataServiceWorkSpace/WorkSpaceInfo/DelProjectByWorkspace\", {}, {\n            'workspaceid': workspaceId\n        },\n        function(result) {\n            // Tips.tips(\"删除成功！\", \"success\");\n            // Ext.Msg.alert(\"提示\", \"保存服务地址信息成功！\");\n\n            // 根据选择的项目保存与工区关联的项目\n            var arrData = [];\n            storeProjectList.findBy(function(record, id) {\n                if(record.get('checked')) {\n                    // itemsChecked.push(record.data);\n                    var objRow = {\n                        'workspaceid': workspaceId,\n                        'projectid': record.data.project_id,\n                        'name': record.data.project_name\n                    };\n                    arrData.push(objRow);\n                }\n            });\n            hwDas.add(\n                \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {}, arrData,\n                function(result) {\n                    // Tips.tips(\"保存成功！\", \"success\");\n                    parent.getProject(workspaceId);\n                    parent.formAddProject.close();\n                },\n                function(msg) {\n                    Tips.tips(\"保存失败！\", \"error\");\n                }\n            );\n\n        },\n        function(msg) {\n            // Tips.tips(\"删除失败！\", \"error\");\n            // Ext.Msg.alert(\"提示\", \"保存服务地址信息失败！\");\n        }\n    );\n\n    // 根据选择的项目保存与工区关联的项目\n    // var selModel = MyGridProject.getSelectionModel();\n    // if(null != selModel && undefined != selModel) {\n    //     if(null != selModel.selections && undefined != selModel.selections) {\n    //         if(selModel.selections.items) {\n    //             for(var i = 0; i < selModel.selections.items.length; i++) {\n    //                 hwDas.add(\n    //                     \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {}, [{\n    //                         'workspaceid': workspaceId,\n    //                         'projectid': selModel.selections.items[i].projectid\n    //                     }],\n    //                     function(result) {\n    //                         // Tips.tips(\"保存成功！\", \"success\");\n    //                     },\n    //                     function(msg) {\n    //                         // Tips.tips(\"保存失败！\", \"error\");\n    //                     }\n    //                 );\n    //             }\n    //         }\n    //     }\n    // }\n\n    // var arrData = [];\n\n    // if(null != selModel && undefined != selModel) {\n    //     if(null != selModel.selections && undefined != selModel.selections) {\n    //         if(selModel.selections.items) {\n    //             for(var i = 0; i < selModel.selections.items.length; i++) {\n    //                 var objRow = {\n    //                     'workspaceid': workspaceId,\n    //                     'projectid': selModel.selections.items[i].project_id\n    //                 };\n    //                 arrData.push(objRow);\n    //             }\n    //         }\n    //     }\n    // }\n\n    // hwDas.add(\n    //     \"DataServiceWorkSpace/projectInfo/ProjectBaseInfo\", {}, {}, arrData,\n    //     function(result) {\n    //         Tips.tips(\"保存成功！\", \"success\");\n    //         // 刷新项目列表数据集（或调用数据集对象添加一条记录）\n    //         storeProjectList.toRefresh();\n    //     },\n    //     function(msg) {\n    //         Tips.tips(\"保存失败！\", \"error\");\n    //     }\n    // );\n\n}\n\nfunction MyViewport_afterrender(sender) {\n    workspaceId = getUrlParam(\"workspaceid\");\n    // workspaceId = \"657e35d9-494a-456d-8f80-98b4924133d7\";\n    hwvarWorkSpaceId.setValue(workspaceId);\n    storeProjectList.toRefresh();\n\n    var myDate = new Date();\n    var thisYear = myDate.getFullYear(); //获取完整的年份(4位,1970-????)\n\n    // 加载项目年度列表\n    loadProjectYear(thisYear, thisYear);\n\n    // 加载项目年度列表\n    loadContractYear(thisYear, thisYear);\n    // 处理窗体右上角的叉号关闭按钮\n    parent.formAddProject.on('hide', function() {\n        parent.getProject(workspaceId);\n    });\n}\n\n// 取消按钮事件\nfunction button1_click(sender, e) {\n\n    parent.formAddProject.close();\n}\n\nfunction MyGridProject_beforerender(sender) {\n    // MyGridProject.selModel = {\n    //     injectCheckbox: 0,\n    //     mode: \"SIMPLE\",     //\"SINGLE\"/\"SIMPLE\"/\"MULTI\"\n    //     checkOnly: true     //只能通过checkbox选择\n    // };\n}\n\nfunction storeProjectList_load(sender, records, options) {\n    // // 绑定的数据加载完成后\n    // // 查询当前工区包含的项目，设置选中\n    // hwDas.get(\n    //     \"DataServiceWorkSpace/projectInfo/queryProjectList\", {}, {\n    //         \"workspaceid\": workspaceId\n    //     },\n    //     function(result) {\n    //         // 根据获取的数据赋值基本信息Tab页\n    //         if(null === result && undefined === result) {\n    //             return;\n    //         }\n\n    //         if(null != result.data && undefined != result.data) {\n    //             if(result.data.length > 0) {\n    //                 if(null != result.data[0].datas && undefined != result.data[0].datas) {\n    //                     for(var i = 0; i < result.data[0].datas.length; i++) {\n    //                         // result.data[0].datas[i].project_id;\n    //                         // 根据项目ID，设置列表项的选中\n    //                     }\n    //                 }\n    //             }\n    //         }\n    //     },\n    //     function(msg) {\n    //         // Tips.tips(\"查询失败！\", \"error\");\n    //     });\n}\n\nfunction MyViewport_beforerender(sender) {\n    workspaceId = getUrlParam(\"workspaceid\");\n    // workspaceId = \"657e35d9-494a-456d-8f80-98b4924133d7\";\n    hwvarWorkSpaceId.setValue(workspaceId);\n    console.log(hwvarWorkSpaceId.getValue())\n}\n\nfunction dataviewProjectYear_click(sender, index, node, e) {\n    var selrec = dataviewProjectYear.getSelectedRecords();\n    if(selrec.length > 0) {\n        var value = selrec[0].data.name;\n        if(value == \"全部\") {\n            value = \"\";\n        }\n        hwvarProjectYear.setValue(value);\n\n        storeProjectList.toRefresh();\n    }\n}\n\nfunction dataviewContractYear_click(sender, index, node, e) {\n\n    var selrec = dataviewContractYear.getSelectedRecords();\n    if(selrec.length > 0) {\n        var value = selrec[0].data.name;\n        if(value == \"全部\") {\n            // value = \"\";\n            hwvarContractStart.setValue(\"\");\n            hwvarContractEnd.setValue(\"\");\n        } else {\n            hwvarContractStart.setValue(value + \"-01-01\");\n            hwvarContractEnd.setValue(value + \"-12-12\");\n        }\n        // hwvarContractYear.setValue(value);\n\n        storeProjectList.toRefresh();\n    }\n}\n\nfunction dataviewRegion_click(sender, index, node, e) {\n    var selrec = dataviewRegion.getSelectedRecords();\n    if(selrec.length > 0) {\n        var id = selrec[0].data.id;\n        var name = selrec[0].data.name;\n        // var value = selrec[0].data.name;\n        if(name == \"全部\") {\n            id = \"\";\n        }\n        hwvarRegion.setValue(id);\n        storeProjectList.toRefresh();\n    }\n}\n\nfunction btnSearch_click(sender, e) {\n    var value = hwTextProjectName.getValue();\n    if(null == value || undefined == value) {\n        value = \"\";\n    }\n    hwvarProjectName.setValue(value);\n    storeProjectList.toRefresh();\n}\n\nfunction btnProjectYearMore_click(sender, e) {\n\n    var myDate = new Date();\n    var thisYear = myDate.getFullYear(); //获取完整的年份(4位)\n    var selYear = 2018;\n\n    loadProjectYear(thisYear, selYear);\n}\n\nfunction btnContractYearMore_click(sender, e) {\n\n    var myDate = new Date();\n    var thisYear = myDate.getFullYear(); //获取完整的年份(4位)\n    var selYear = 2018;\n\n    loadContractYear(thisYear, selYear);\n}\n\n\nfunction loadProjectYear(thisYear, selYear) {\n\n    var arrData = [{\n        \"id\": 0,\n        \"name\": \"全部\"\n    }];\n\n    var startYear = thisYear;\n    if(selYear + 4 < thisYear) {\n        startYear = selYear + 4;\n    }\n\n    for(var i = 0; i < 10; i++) {\n        objData = {\n            \"id\": (i + 1).toString(),\n            \"name\": (startYear - i).toString()\n        };\n        arrData.push(objData);\n    }\n    dataviewProjectYear.store.loadData(arrData, false);\n}\n\nfunction loadContractYear(thisYear, selYear) {\n    var arrData = [{\n        \"id\": 0,\n        \"name\": \"全部\"\n    }];\n\n    var startYear = thisYear;\n    if(selYear + 4 < thisYear) {\n        startYear = selYear + 4;\n    }\n\n    for(var i = 0; i < 10; i++) {\n        objData = {\n            \"id\": (i + 1).toString(),\n            \"name\": (startYear - i).toString()\n        };\n        arrData.push(objData);\n    }\n    dataviewContractYear.store.loadData(arrData, false);\n}\n\nfunction MyGridProject_cellclick(sender, rowIndex, columnIndex, e) {}\n\nfunction MyGridProject_keydown(sender) {}\n\nfunction btnClose_click(sender, e) {\n    parent.formAddProject.close(function() {\n        // parent.getProject(workspaceId);\n    });\n}\n\nfunction MyGridProject_checked(sender, field, val, record, rowIndex, columnIndex, e) {\n    var ifChecked = val;\n    if(ifChecked) // 选中\n    {\n        // 根据选择的项目保存与工区关联的项目\n        // var objRow = {\n        //     'workspaceid': workspaceId,\n        //     'projectid': record.data.project_id\n        // };\n        hwDas.add(\n            \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {}, {\n\n                'workspaceid': workspaceId,\n                'projectid': record.project_id\n            },\n            function(result) {},\n            function(msg) {\n                // Tips.tips(\"保存失败！\", \"error\");\n            }\n        );\n    } else {\n        // 删除项目与工区的关联\n        hwDas.del(\n            \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {\n                'workspaceid': workspaceId,\n                'projectid': record.project_id\n            },\n            function(result) {},\n            function(msg) {\n                // Tips.tips(\"删除失败！\", \"error\");\n            }\n        );\n    }\n}\n\n// 点击时用数组记录点击行的项目ID,是否选中，选中的和取消选中的分开记录\n// 点击确定按钮时，根据数组中记录的ID和选中状态进行入库保存\n// 点击取消按钮不做处理\nvar arrProjectsSel = [];\nvar arrProjectsUnSel = [];\n\nfunction MyGridProject_checked1(sender, field, val, record, rowIndex, columnIndex, e) {\n    var ifChecked = val;\n\n    var objProject = {\n        \"workspaceid\": workspaceId,\n        \"projectid\": record.project_id\n    };\n    if(ifChecked) // 选中\n    {\n        arrProjectsSel.push(objProject);\n    } else {\n        arrProjectsUnSel.push(objProject);\n    }\n}\n\nfunction btnOk_click(sender, e) {\n    // 删除取消选中的，增加已选中的\n    hwDas.del(\n        \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {},\n        arrProjectsUnSel,\n        function(result) {\n            // Tips.tips(\"保存成功！\", \"error\");\n            hwDas.add(\n                \"DataServiceWorkSpace/WorkSpaceInfo/WorkSpaceProject\", {}, {},\n                arrProjectsSel,\n                function(result) {\n                    parent.formAddProject.close(function() {\n                        parent.getProject(workspaceId);\n                    });\n                    // Tips.tips(\"保存成功！\", \"error\");\n                },\n                function(msg) {\n                    // Tips.tips(\"保存失败！\", \"error\");\n                }\n            );\n        },\n        function(msg) {\n            // Tips.tips(\"删除失败！\", \"error\");\n        }\n    );\n}","vmdcss":".info {\n    float: left;\n    padding: 0px 0px;\n    margin: 3px;\n    text-align: center;\n    font-weight: normal;\n    color: #005AA0;\n    /*color: #333;*/\n    height: 20px;\n    /*纵向居中*/\n    line-height: 20px;\n    width: 62px;\n    overflow: hidden;\n    border-top: 1px solid transparent;\n    cursor: pointer\n}\n\n.infoDepartment{\n    float: left;\n    padding: 0px 0px;\n    margin: 3px;\n    text-align: left;\n    color: #005AA0;\n    /*color: #333;*/\n    height: 20px;\n    width: 100px;\n    overflow: hidden;\n    border-top: 1px solid transparent;\n    cursor: pointer\n}\n\n.infoFirst {\n    float: left;\n    padding: 0px 0px;\n    margin: 3px;\n    text-align: left;\n    color: #005AA0;\n    /*color: #333;*/\n    height: 20px;\n    width: 240px;\n    overflow: hidden;\n    border-top: 1px solid transparent;\n    cursor: pointer\n}\n.vmd-dataview ul li.x-view-selected-ext {\n    color:rgb(255,255,255);\n    background-color: rgba(37, 119, 227, .8);\n}\n.vmd-dataview ul li.info-hover-ext {\n    color:rgb(255,255,255);\n    background-color: rgba(37, 119, 227, .8);\n    /*background-color: #eee;*/\n}","vmdprops":"\"\"","type":"module","vmdresource":"{\"components\":[{\"cid\":\"vmdrescsss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresjss\",\"layoutConfig\":{},\"userConfig\":{}},{\"cid\":\"vmdresimgs\",\"layoutConfig\":{},\"userConfig\":{}}]}"}